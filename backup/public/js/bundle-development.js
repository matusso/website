var __defProp = Object.defineProperty;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/utils/Logger.js
var LOG_LEVELS, Logger, logger;
var init_Logger = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/utils/Logger.js"() {
    LOG_LEVELS = {
      ERROR: 0,
      WARN: 1,
      INFO: 2,
      DEBUG: 3,
      TRACE: 4
    };
    Logger = class {
      constructor() {
        this.currentLevel = this.getLogLevel();
        this.prefix = "[MiloDocs]";
        this.colors = {
          ERROR: "#ff5f56",
          WARN: "#ffbd2e",
          INFO: "#4ecdc4",
          DEBUG: "#79c0ff",
          TRACE: "#7c3aed"
        };
      }
      /**
       * Determine current log level based on environment
       */
      getLogLevel() {
        var _a, _b;
        if (window.MiloDocsLogLevel) {
          return (_a = LOG_LEVELS[window.MiloDocsLogLevel.toUpperCase()]) != null ? _a : LOG_LEVELS.INFO;
        }
        if ((_b = window.HugoEnvironment) == null ? void 0 : _b.debug) {
          return LOG_LEVELS.DEBUG;
        }
        if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
          return LOG_LEVELS.INFO;
        }
        return LOG_LEVELS.WARN;
      }
      /**
       * Check if a log level should be output
       */
      shouldLog(level) {
        return LOG_LEVELS[level] <= this.currentLevel;
      }
      /**
       * Format log message with consistent styling
       */
      formatMessage(level, component, message, ...args) {
        const timestamp = (/* @__PURE__ */ new Date()).toLocaleTimeString();
        const componentName = component ? `[${component}]` : "";
        const color = this.colors[level];
        return [
          `%c${this.prefix}%c ${componentName} %c${message}`,
          `color: ${color}; font-weight: bold;`,
          `color: #666; font-style: italic;`,
          `color: inherit;`,
          ...args
        ];
      }
      /**
       * Log methods for different levels
       */
      error(component, message, ...args) {
        if (this.shouldLog("ERROR")) {
          console.error(...this.formatMessage("ERROR", component, message, ...args));
        }
      }
      warn(component, message, ...args) {
        if (this.shouldLog("WARN")) {
          console.warn(...this.formatMessage("WARN", component, message, ...args));
        }
      }
      info(component, message, ...args) {
        if (this.shouldLog("INFO")) {
          console.log(...this.formatMessage("INFO", component, message, ...args));
        }
      }
      debug(component, message, ...args) {
        if (this.shouldLog("DEBUG")) {
          console.log(...this.formatMessage("DEBUG", component, message, ...args));
        }
      }
      trace(component, message, ...args) {
        if (this.shouldLog("TRACE")) {
          console.log(...this.formatMessage("TRACE", component, message, ...args));
        }
      }
      /**
       * Component-specific loggers
       */
      component(componentName) {
        return {
          error: (message, ...args) => this.error(componentName, message, ...args),
          warn: (message, ...args) => this.warn(componentName, message, ...args),
          info: (message, ...args) => this.info(componentName, message, ...args),
          debug: (message, ...args) => this.debug(componentName, message, ...args),
          trace: (message, ...args) => this.trace(componentName, message, ...args)
        };
      }
      /**
       * Performance logging helper
       */
      performance(metric, value, component = "Performance") {
        if (this.shouldLog("DEBUG")) {
          console.log(...this.formatMessage("DEBUG", component, `${metric}: ${value}`));
        }
      }
      /**
       * Event logging helper
       */
      event(eventName, data, component = "EventBus") {
        if (this.shouldLog("TRACE")) {
          console.log(...this.formatMessage("TRACE", component, `Event: ${eventName}`, data));
        }
      }
      /**
       * Success logging with emoji (only for important successes)
       */
      success(component, message, ...args) {
        if (this.shouldLog("INFO")) {
          console.log(...this.formatMessage("INFO", component, `\u2705 ${message}`, ...args));
        }
      }
      /**
       * Update log level at runtime
       */
      setLogLevel(level) {
        const newLevel = typeof level === "string" ? level.toUpperCase() : level;
        if (LOG_LEVELS[newLevel] !== void 0) {
          this.currentLevel = LOG_LEVELS[newLevel];
          this.info("Logger", `Log level changed to ${newLevel}`);
        } else {
          this.warn("Logger", `Invalid log level: ${level}`);
        }
      }
      /**
       * Get current log level name
       */
      getCurrentLevel() {
        return Object.keys(LOG_LEVELS).find((key) => LOG_LEVELS[key] === this.currentLevel);
      }
    };
    logger = new Logger();
    if (typeof window !== "undefined") {
      window.MiloLogger = {
        setLevel: (level) => logger.setLogLevel(level),
        getLevel: () => logger.getCurrentLevel(),
        levels: Object.keys(LOG_LEVELS)
      };
    }
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/utils/FeatureDetection.js
function withFallback(feature, modernImpl, fallback) {
  if (modernFeatures[feature]) {
    try {
      log.trace(`Using modern ${feature} implementation`);
      return modernImpl();
    } catch (error) {
      log.warn(`Modern ${feature} failed, falling back:`, error);
      return fallback();
    }
  } else {
    log.debug(`${feature} not supported, using fallback`);
    return fallback();
  }
}
function requestIdleTime(callback, options = {}) {
  const { timeout = 5e3, priority = "normal" } = options;
  return withFallback(
    "requestIdleCallback",
    () => {
      log.trace("Scheduling task for idle time");
      return requestIdleCallback(callback, { timeout });
    },
    () => {
      const delay = priority === "high" ? 16 : priority === "low" ? 100 : 50;
      log.trace(`Fallback: scheduling with ${delay}ms delay`);
      return setTimeout(callback, delay);
    }
  );
}
function deepClone(obj) {
  if (obj === null || typeof obj !== "object") {
    return obj;
  }
  if (typeof AbortController !== "undefined" && obj instanceof AbortController) {
    return obj;
  }
  if (typeof AbortSignal !== "undefined" && obj instanceof AbortSignal) {
    return obj;
  }
  if (obj instanceof Element || obj instanceof Node) {
    log.trace("Preserving DOM element reference instead of cloning");
    return obj;
  }
  if (Array.isArray(obj)) {
    return obj.map((item) => deepClone(item));
  }
  if (obj instanceof Date) {
    return new Date(obj.getTime());
  }
  if (obj instanceof RegExp) {
    return new RegExp(obj);
  }
  if (typeof obj === "object") {
    const hasDOMElements = Object.values(obj).some(
      (value) => value instanceof Element || value instanceof Node
    );
    if (hasDOMElements) {
      const cloned = {};
      for (const [key, value] of Object.entries(obj)) {
        if (value instanceof Element || value instanceof Node) {
          cloned[key] = value;
        } else {
          cloned[key] = deepClone(value);
        }
      }
      return cloned;
    }
    return withFallback(
      "structuredClone",
      () => {
        try {
          return structuredClone(obj);
        } catch (error) {
          log.trace("structuredClone failed, using manual clone:", error.message);
          throw error;
        }
      },
      () => {
        try {
          return JSON.parse(JSON.stringify(obj));
        } catch (e) {
          const cloned = {};
          for (const [key, value] of Object.entries(obj)) {
            cloned[key] = deepClone(value);
          }
          return cloned;
        }
      }
    );
  }
  return obj;
}
function logFeatureSupport() {
  const supported = Object.entries(modernFeatures).filter(([_, isSupported]) => isSupported).map(([feature]) => feature);
  const unsupported = Object.entries(modernFeatures).filter(([_, isSupported]) => !isSupported).map(([feature]) => feature);
  log.info(`Modern features supported: ${supported.length}/${Object.keys(modernFeatures).length}`);
  log.debug("Supported:", supported);
  if (unsupported.length > 0) {
    log.debug("Using fallbacks for:", unsupported);
  }
  return { supported, unsupported };
}
function initFeatureDetection() {
  if (window.location.hostname === "localhost" || new URLSearchParams(window.location.search).has("debug")) {
    logFeatureSupport();
  }
}
var log, modernFeatures;
var init_FeatureDetection = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/utils/FeatureDetection.js"() {
    init_Logger();
    log = logger.component("FeatureDetection");
    modernFeatures = {
      // Observer APIs
      intersectionObserver: "IntersectionObserver" in window,
      mutationObserver: "MutationObserver" in window,
      resizeObserver: "ResizeObserver" in window,
      performanceObserver: "PerformanceObserver" in window,
      // Performance APIs
      requestIdleCallback: "requestIdleCallback" in window,
      requestAnimationFrame: "requestAnimationFrame" in window,
      // Modern JS APIs
      structuredClone: "structuredClone" in window,
      // CSS Features
      cssHas: (() => {
        try {
          return CSS.supports("selector(:has(p))");
        } catch (e) {
          return false;
        }
      })(),
      // Form APIs
      elementInternals: "ElementInternals" in window,
      customElements: "customElements" in window,
      // Experimental APIs
      navigationAPI: "navigation" in window,
      // Performance Features
      memory: "memory" in performance,
      // Touch/Interaction
      touchEvents: "ontouchstart" in window,
      pointerEvents: "PointerEvent" in window
    };
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/core/EventBus.js
var EventBus_exports = {};
__export(EventBus_exports, {
  EventBus: () => EventBus,
  eventBus: () => eventBus
});
var EventBus, eventBus;
var init_EventBus = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/core/EventBus.js"() {
    init_Logger();
    init_FeatureDetection();
    EventBus = class {
      constructor() {
        this.events = /* @__PURE__ */ new Map();
        this.globalListeners = /* @__PURE__ */ new Set();
      }
      /**
       * Subscribe to an event
       * @param {string} event - Event name
       * @param {Function} callback - Event handler
       * @param {Object} options - Event options
       */
      on(event, callback, options = {}) {
        if (!this.events.has(event)) {
          this.events.set(event, /* @__PURE__ */ new Set());
        }
        const listener = {
          callback,
          once: options.once || false,
          context: options.context || null
        };
        this.events.get(event).add(listener);
        return () => this.off(event, listener);
      }
      /**
       * Subscribe to an event once
       */
      once(event, callback, context = null) {
        return this.on(event, callback, { once: true, context });
      }
      /**
       * Unsubscribe from an event
       */
      off(event, listenerOrCallback) {
        if (!this.events.has(event)) return;
        const listeners = this.events.get(event);
        if (typeof listenerOrCallback === "function") {
          for (const listener of listeners) {
            if (listener.callback === listenerOrCallback) {
              listeners.delete(listener);
              break;
            }
          }
        } else {
          listeners.delete(listenerOrCallback);
        }
        if (listeners.size === 0) {
          this.events.delete(event);
        }
      }
      /**
       * Emit an event with enhanced data safety
       * 🚀 Uses structuredClone to prevent accidental data mutations
       */
      emit(event, data = null, options = {}) {
        if (!this.events.has(event)) return;
        const {
          clone = true,
          // Whether to clone data for safety
          async = false,
          // Whether to emit asynchronously  
          maxListeners = 100
          // Safety limit for listeners
        } = options;
        const listeners = Array.from(this.events.get(event));
        if (listeners.length > maxListeners) {
          logger.warn("EventBus", `Event "${event}" has ${listeners.length} listeners (max: ${maxListeners})`);
        }
        const shouldClone = clone && data && typeof data === "object" && !this.containsDOMElements(data);
        const safeData = shouldClone ? deepClone(data) : data;
        const executeListeners = () => {
          const results = [];
          for (const listener of listeners) {
            try {
              const listenerData = shouldClone ? deepClone(safeData) : safeData;
              const result = listener.context ? listener.callback.call(listener.context, listenerData, event) : listener.callback(listenerData, event);
              results.push(result);
              if (listener.once) {
                this.events.get(event).delete(listener);
              }
            } catch (error) {
              logger.error("EventBus", `Error in event listener for "${event}":`, error);
            }
          }
          return results;
        };
        if (clone && !shouldClone) {
          logger.event(event, "data (DOM elements preserved, not cloned)");
        } else {
          logger.event(event, shouldClone ? "data (cloned)" : data);
        }
        if (async) {
          return Promise.resolve().then(executeListeners);
        } else {
          return executeListeners();
        }
      }
      /**
       * Remove all listeners for an event or all events
       */
      clear(event = null) {
        if (event) {
          this.events.delete(event);
        } else {
          this.events.clear();
        }
      }
      /**
       * Get list of all events
       */
      getEvents() {
        return Array.from(this.events.keys());
      }
      /**
       * Get listener count for an event
       */
      listenerCount(event) {
        return this.events.has(event) ? this.events.get(event).size : 0;
      }
      /**
       * 🚀 Emit event without cloning (for performance-critical cases)
       */
      emitFast(event, data = null) {
        return this.emit(event, data, { clone: false });
      }
      /**
       * 🚀 Emit event asynchronously (non-blocking)
       */
      emitAsync(event, data = null, options = {}) {
        return this.emit(event, data, { ...options, async: true });
      }
      /**
       * 🚀 Emit event with large data safely (optimized for large objects)
       */
      emitSafe(event, data = null, options = {}) {
        return this.emit(event, data, { ...options, clone: true });
      }
      /**
       * Check if data contains DOM elements that shouldn't be cloned
       */
      containsDOMElements(data) {
        if (!data || typeof data !== "object") return false;
        if (data instanceof Element || data instanceof Node) return true;
        return Object.values(data).some((value) => {
          if (value instanceof Element || value instanceof Node) return true;
          if (typeof value === "object" && value !== null) {
            return this.containsDOMElements(value);
          }
          return false;
        });
      }
      /**
       * Performance statistics for debugging
       */
      getStats() {
        const stats = {
          totalEvents: this.events.size,
          totalListeners: 0,
          eventBreakdown: {}
        };
        for (const [event, listeners] of this.events) {
          const count = listeners.size;
          stats.totalListeners += count;
          stats.eventBreakdown[event] = count;
        }
        return stats;
      }
    };
    eventBus = new EventBus();
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/core/Component.js
var log2, Component;
var init_Component = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/core/Component.js"() {
    init_EventBus();
    init_Logger();
    log2 = logger.component("Component");
    Component = class {
      constructor(config = {}) {
        this.name = config.name || this.constructor.name.toLowerCase();
        this.selector = config.selector;
        this.element = config.element || (config.selector ? document.querySelector(config.selector) : null);
        this.dependencies = config.dependencies || [];
        this.options = config.options || {};
        this.state = "uninitialized";
        this.childComponents = /* @__PURE__ */ new Map();
        this.abortController = new AbortController();
        this.signal = this.abortController.signal;
        this.isSingleton = config.isSingleton !== void 0 ? config.isSingleton : this.detectSingletonBehavior();
        this.allowMultipleInstances = config.allowMultipleInstances || false;
        this.id = `${this.name}-${Date.now()}-${Math.random().toString(36).substr(2, 5)}`;
        this.handleDestroy = this.handleDestroy.bind(this);
        eventBus.on("component:destroy-all", this.handleDestroy);
      }
      /**
       * Initialize the component
       */
      async init() {
        if (this.state !== "uninitialized") {
          log2.warn(`Component ${this.name} already initialized`);
          return this;
        }
        try {
          this.state = "initializing";
          if (this.selector && !this.element) {
            log2.trace(`${this.name}: No elements found for selector "${this.selector}" - component will remain inactive`);
            this.state = "failed";
            return null;
          }
          await this.loadDependencies();
          this.setupElements();
          this.bindEvents();
          await this.onInit();
          this.state = "ready";
          eventBus.emit(`component:${this.name}:ready`, this);
          eventBus.emit("component:ready", { component: this });
          log2.debug(`Component ${this.name} initialized`);
          return this;
        } catch (error) {
          log2.error(`Component ${this.name} initialization failed:`, error);
          this.state = "failed";
          return null;
        }
      }
      /**
       * Detect if this component should behave as a singleton
       */
      detectSingletonBehavior() {
        if (this.selector && this.selector.startsWith("#")) {
          return true;
        }
        const singletonPatterns = [
          "theme-toggle",
          "navigation-sidebar-left",
          "navigation-mobile-toggle",
          "chat-toc-toggle",
          "performance-optimizer",
          "search"
        ];
        return singletonPatterns.includes(this.name);
      }
      /**
       * Load component dependencies
       */
      async loadDependencies() {
        if (!this.dependencies.length) return;
        const { ComponentManager: ComponentManager2 } = await Promise.resolve().then(() => (init_ComponentManager(), ComponentManager_exports));
        const loadPromises = this.dependencies.map(async (dep) => {
          if (typeof dep === "string") {
            return ComponentManager2.load(dep);
          } else if (typeof dep === "function") {
            return await dep();
          }
          return dep;
        });
        await Promise.all(loadPromises);
      }
      /**
       * Setup DOM elements - override in subclasses
       */
      setupElements() {
        if (this.element) {
          this.element.setAttribute("data-component", this.name);
          this.element.setAttribute("data-component-id", this.id);
        }
      }
      /**
       * Bind component events - override in subclasses
       */
      bindEvents() {
      }
      /**
       * Custom initialization hook - override in subclasses
       */
      async onInit() {
      }
      // ============================================================================
      // DOM UTILITIES
      // ============================================================================
      /**
       * Find multiple elements matching the component's selector
       * Useful for components that need to work with multiple DOM elements
       */
      findElements(customSelector = null) {
        const selector = customSelector || this.selector;
        if (!selector) return [];
        return Array.from(document.querySelectorAll(selector));
      }
      /**
       * Find elements within a specific container
       */
      findElementsIn(container, selector) {
        if (!container || !selector) return [];
        return Array.from(container.querySelectorAll(selector));
      }
      /**
       * Find the closest parent element matching a selector
       */
      findParent(element, selector) {
        if (!element || !selector) return null;
        return element.closest(selector);
      }
      /**
       * Check if an element matches the component's selector
       */
      matchesSelector(element, customSelector = null) {
        if (!element) return false;
        const selector = customSelector || this.selector;
        return selector ? element.matches(selector) : false;
      }
      /**
       * Find a child element within the component's element
       */
      findChild(selector) {
        if (!this.element) return null;
        return this.element.querySelector(selector);
      }
      /**
       * Find multiple child elements within the component's element
       */
      findChildren(selector) {
        if (!this.element) return [];
        return Array.from(this.element.querySelectorAll(selector));
      }
      /**
       * Validate required elements exist
       */
      validateElements(elements = {}) {
        const missing = [];
        Object.entries(elements).forEach(([name, selector]) => {
          const element = typeof selector === "string" ? document.querySelector(selector) : selector;
          if (!element) {
            missing.push(name);
          }
        });
        if (missing.length > 0) {
          log2.warn(`${this.name}: Missing required elements:`, missing);
          return false;
        }
        return true;
      }
      // ============================================================================
      // EVENT UTILITIES
      // ============================================================================
      /**
       * 🚀 Enhanced event listener with robust cleanup for navigation scenarios
       * 
       * Benefits:
       * - Defensive cleanup (explicit + AbortController)
       * - Navigation-safe event binding
       * - Better memory management with explicit tracking
       * - Handles edge cases in static deployments
       * 
       * @param {Element} element - Target element
       * @param {string} event - Event name
       * @param {Function} handler - Event handler
       * @param {Object} options - Event options (passive, once, etc.)
       * @returns {Object} - Object with remove() method for manual cleanup
       */
      addEventListener(element, event, handler, options = {}) {
        if (!element || !event || !handler) return null;
        if (!this.eventListeners) {
          this.eventListeners = /* @__PURE__ */ new Map();
        }
        const listenerKey = `${element.tagName}-${element.id || element.className}-${event}-${Date.now()}`;
        const listenerInfo = {
          element,
          event,
          handler,
          options: { ...options },
          signal: this.signal
        };
        this.removeExistingListeners(element, event);
        const passiveEvents = /* @__PURE__ */ new Set(["scroll", "wheel", "mousewheel", "touchstart", "touchmove", "touchend"]);
        const finalOptions = {
          ...options,
          ...options.passive === void 0 && passiveEvents.has(event) ? { passive: true } : {},
          signal: this.signal
        };
        element.addEventListener(event, handler, finalOptions);
        this.eventListeners.set(listenerKey, listenerInfo);
        if (element && element.dataset) {
          if (!element.dataset.componentListeners) {
            element.dataset.componentListeners = this.id;
          } else if (!element.dataset.componentListeners.includes(this.id)) {
            element.dataset.componentListeners += `,${this.id}`;
          }
        }
        return {
          remove: () => {
            this.removeSpecificListener(listenerKey);
          }
        };
      }
      /**
       * Remove existing listeners on element to prevent conflicts
       */
      removeExistingListeners(element, event) {
        if (!this.eventListeners) return;
        for (const [key, listenerInfo] of this.eventListeners.entries()) {
          if (listenerInfo.element === element && listenerInfo.event === event) {
            this.removeSpecificListener(key);
          }
        }
      }
      /**
       * Remove a specific listener by key
       */
      removeSpecificListener(listenerKey) {
        if (!this.eventListeners || !this.eventListeners.has(listenerKey)) return;
        const listenerInfo = this.eventListeners.get(listenerKey);
        try {
          listenerInfo.element.removeEventListener(
            listenerInfo.event,
            listenerInfo.handler,
            listenerInfo.options
          );
        } catch (error) {
          log2.trace(`Non-critical cleanup error for ${this.name}:`, error);
        }
        this.eventListeners.delete(listenerKey);
      }
      /**
       * Add multiple modern event listeners
       */
      addMultipleEventListeners(element, events, handler, options = {}) {
        if (!element || !events || !handler) return [];
        const eventList = Array.isArray(events) ? events : [events];
        return eventList.map((event) => this.addEventListener(element, event, handler, options));
      }
      // ============================================================================
      // PERFORMANCE UTILITIES
      // ============================================================================
      /**
       * Throttle a function call
       */
      throttle(func, delay = 250) {
        let timeoutId;
        let lastExecTime = 0;
        return (...args) => {
          const currentTime = Date.now();
          if (currentTime - lastExecTime > delay) {
            func.apply(this, args);
            lastExecTime = currentTime;
          } else {
            clearTimeout(timeoutId);
            timeoutId = setTimeout(() => {
              func.apply(this, args);
              lastExecTime = Date.now();
            }, delay - (currentTime - lastExecTime));
          }
        };
      }
      /**
       * Debounce a function call
       */
      debounce(func, delay = 250) {
        let timeoutId;
        return (...args) => {
          clearTimeout(timeoutId);
          timeoutId = setTimeout(() => func.apply(this, args), delay);
        };
      }
      // ============================================================================
      // COMPONENT MANAGEMENT
      // ============================================================================
      /**
       * Register child component
       */
      addChild(name, component) {
        this.childComponents.set(name, component);
        return component;
      }
      /**
       * Get child component
       */
      getChild(name) {
        return this.childComponents.get(name);
      }
      /**
       * Update component options
       */
      updateOptions(newOptions) {
        this.options = { ...this.options, ...newOptions };
        this.emit("options-updated", { options: this.options });
      }
      // ============================================================================
      // CSS INTEGRATION (PURE VANILLA JS)
      // ============================================================================
      /**
       * Set CSS custom property on the component element
       * Enables dynamic styling from JavaScript
       */
      setCSSProperty(property, value) {
        if (!this.element) return;
        const cssProperty = property.startsWith("--") ? property : `--component-${property}`;
        this.element.style.setProperty(cssProperty, value);
      }
      /**
       * Get CSS custom property value
       */
      getCSSProperty(property) {
        if (!this.element) return null;
        const cssProperty = property.startsWith("--") ? property : `--component-${property}`;
        return getComputedStyle(this.element).getPropertyValue(cssProperty).trim();
      }
      /**
       * Update component state for CSS :has() patterns
       * Leverages your existing :has() CSS automatically
       */
      updateComponentState(state) {
        if (!this.element) return;
        this.element.dataset.componentState = state;
        this.setCSSProperty("state", state);
        this.emit("state-changed", { state });
      }
      /**
       * Set component loading state with CSS
       */
      setLoadingState(isLoading) {
        this.updateComponentState(isLoading ? "loading" : "ready");
      }
      /**
       * Enable/disable component with CSS feedback
       */
      setEnabled(isEnabled) {
        this.updateComponentState(isEnabled ? "ready" : "disabled");
        if (this.element) {
          this.element.setAttribute("aria-disabled", (!isEnabled).toString());
        }
      }
      // ============================================================================
      // EVENT SYSTEM
      // ============================================================================
      /**
       * Emit component-specific event
       */
      emit(event, data = null) {
        const eventName = `component:${this.name}:${event}`;
        return eventBus.emit(eventName, { ...data, component: this });
      }
      /**
       * Listen to component events
       */
      on(event, handler, context = null) {
        const eventName = event.includes(":") ? event : `component:${this.name}:${event}`;
        return eventBus.on(eventName, handler, { context });
      }
      // ============================================================================
      // STATE MANAGEMENT
      // ============================================================================
      /**
       * Set collapse state using the unified state system
       */
      setCollapseState(state) {
        var _a;
        const validStates = ["collapsed", "expanded", "transitioning"];
        if (!validStates.includes(state)) {
          log2.warn(`Invalid collapse state "${state}" for component ${this.name}`);
          return this;
        }
        if (this.element) {
          this.element.setAttribute("data-collapse-state", state);
          if (state === "expanded") {
            this.element.setAttribute("aria-expanded", "true");
          } else if (state === "collapsed") {
            this.element.setAttribute("aria-expanded", "false");
          }
        }
        this.emit("collapse-state-changed", {
          previous: (_a = this.element) == null ? void 0 : _a.getAttribute("data-collapse-state"),
          current: state
        });
        return this;
      }
      /**
       * Set visibility state using the unified state system
       */
      setVisibilityState(state) {
        var _a;
        const validStates = ["hidden", "visible", "partial"];
        if (!validStates.includes(state)) {
          log2.warn(`Invalid visibility state "${state}" for component ${this.name}`);
          return this;
        }
        if (this.element) {
          this.element.setAttribute("data-visibility-state", state);
        }
        this.emit("visibility-state-changed", {
          previous: (_a = this.element) == null ? void 0 : _a.getAttribute("data-visibility-state"),
          current: state
        });
        return this;
      }
      /**
       * Expand a collapsible element with proper state management
       */
      async expand(options = {}) {
        var _a;
        const {
          showFirst = false,
          duration = 300
        } = options;
        this.setCollapseState("transitioning");
        if (showFirst) {
          this.setVisibilityState("visible");
          (_a = this.element) == null ? void 0 : _a.offsetHeight;
        }
        return new Promise((resolve) => {
          setTimeout(() => {
            this.setCollapseState("expanded");
            if (!showFirst) {
              this.setVisibilityState("visible");
            }
            resolve();
          }, 10);
        });
      }
      /**
       * Collapse a collapsible element with proper state management
       */
      async collapse(options = {}) {
        const {
          hideAfter = false,
          duration = null
        } = options;
        this.setCollapseState("transitioning");
        const animationDuration = duration || parseFloat(this.getCSSProperty("--collapse-timing") || "0.3") * 1e3;
        return new Promise((resolve) => {
          setTimeout(() => {
            this.setCollapseState("collapsed");
            if (hideAfter) {
              this.setVisibilityState("hidden");
            }
            resolve();
          }, animationDuration);
        });
      }
      /**
       * Toggle collapse state
       */
      async toggle(options = {}) {
        var _a;
        const isExpanded = ((_a = this.element) == null ? void 0 : _a.getAttribute("data-collapse-state")) === "expanded";
        if (isExpanded) {
          return this.collapse(options);
        } else {
          return this.expand(options);
        }
      }
      /**
       * Configure collapse behavior by setting CSS custom properties
       * This allows components to customize how component-states.css handles them
       */
      configureCollapseBehavior(config = {}) {
        const {
          heightCollapsed = "0",
          heightExpanded = "none",
          opacityCollapsed = "1",
          opacityExpanded = "1",
          overflowCollapsed = "hidden",
          overflowExpanded = "visible",
          paddingCollapsed = "0",
          paddingExpanded = "initial",
          timing = "0.3s",
          easing = "ease",
          display = "block"
        } = config;
        const properties = {
          "--collapse-height-collapsed": heightCollapsed,
          "--collapse-height-expanded": heightExpanded,
          "--collapse-opacity-collapsed": opacityCollapsed,
          "--collapse-opacity-expanded": opacityExpanded,
          "--collapse-overflow-collapsed": overflowCollapsed,
          "--collapse-overflow-expanded": overflowExpanded,
          "--collapse-padding-collapsed": paddingCollapsed,
          "--collapse-padding-expanded": paddingExpanded,
          "--collapse-timing": timing,
          "--collapse-easing": easing,
          "--component-display": display
        };
        Object.entries(properties).forEach(([property, value]) => {
          this.setCSSProperty(property, value);
        });
        return this;
      }
      /**
       * Check if component is ready
       */
      isReady() {
        return this.state === "ready";
      }
      /**
       * Check if component has failed
       */
      hasFailed() {
        return this.state === "failed";
      }
      /**
       * Enhanced health check for navigation scenarios
       * Override this method in subclasses to provide component-specific health checks
       */
      isHealthy() {
        if (this.state !== "ready") return false;
        if (!this.element || !document.contains(this.element)) return false;
        if (this.eventListeners && this.eventListeners.size === 0) {
          log2.debug(`Component ${this.id} has no tracked event listeners`);
          return false;
        }
        if (this.element && this.element.dataset && this.element.dataset.componentListeners) {
          const componentIds = this.element.dataset.componentListeners.split(",");
          if (!componentIds.includes(this.id)) {
            log2.debug(`Component ${this.id} not tracked on its DOM element`);
            return false;
          }
        }
        return true;
      }
      /**
       * Get current state
       */
      getState() {
        return {
          name: this.name,
          id: this.id,
          state: this.state,
          element: !!this.element,
          dependencies: this.dependencies.length,
          children: this.childComponents.size,
          options: this.options
        };
      }
      // ============================================================================
      // CLEANUP
      // ============================================================================
      /**
       * Handle destroy event
       */
      handleDestroy() {
        this.destroy();
      }
      /**
       * Cleanup component resources with enhanced navigation safety
       */
      destroy() {
        if (this.state === "destroyed") return;
        log2.debug(`Destroying component ${this.name} (${this.id})`);
        this.cleanupExplicitListeners();
        try {
          this.abortController.abort();
          log2.trace(`Aborted all event listeners for ${this.name}`);
        } catch (error) {
          log2.warn(`Failed to abort event listeners in ${this.name}:`, error);
        }
        this.childComponents.forEach((child) => {
          if (child && typeof child.destroy === "function") {
            child.destroy();
          }
        });
        this.childComponents.clear();
        eventBus.off("component:destroy-all", this.handleDestroy);
        if (this.element) {
          this.element.removeAttribute("data-component");
          this.element.removeAttribute("data-component-id");
          if (this.element.dataset && this.element.dataset.componentListeners) {
            const listeners = this.element.dataset.componentListeners.split(",");
            const filteredListeners = listeners.filter((id) => id !== this.id);
            if (filteredListeners.length > 0) {
              this.element.dataset.componentListeners = filteredListeners.join(",");
            } else {
              delete this.element.dataset.componentListeners;
            }
          }
        }
        this.state = "destroyed";
        this.emit("destroyed");
        log2.debug(`Component ${this.name} destroyed successfully`);
      }
      /**
       * Explicitly cleanup tracked event listeners
       */
      cleanupExplicitListeners() {
        if (!this.eventListeners) return;
        log2.trace(`Cleaning up ${this.eventListeners.size} tracked listeners for ${this.name}`);
        for (const [key, listenerInfo] of this.eventListeners.entries()) {
          try {
            listenerInfo.element.removeEventListener(
              listenerInfo.event,
              listenerInfo.handler,
              listenerInfo.options
            );
          } catch (error) {
            log2.trace(`Non-critical cleanup error for listener ${key}:`, error);
          }
        }
        this.eventListeners.clear();
      }
    };
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/utils/sanitize.js
function sanitizeHTML(html) {
  if (!html || typeof html !== "string") return "";
  try {
    const parser = new DOMParser();
    const doc = parser.parseFromString(html, "text/html");
    doc.querySelectorAll("script, noscript").forEach((el) => el.remove());
    const walker = doc.createTreeWalker(doc.body, NodeFilter.SHOW_ELEMENT, null);
    while (walker.nextNode()) {
      const el = walker.currentNode;
      [...el.attributes].forEach((attr) => {
        const name = attr.name.toLowerCase();
        if (name.startsWith("on")) {
          el.removeAttribute(attr.name);
          return;
        }
        const value = attr.value.trim();
        if (name === "href" || name === "src") {
          const lower = value.toLowerCase();
          const allowed = /^(https?:|mailto:|tel:|\/|\.\/|#|$)/.test(lower);
          if (!allowed) {
            el.removeAttribute(attr.name);
          }
        }
      });
    }
    return doc.body.innerHTML;
  } catch (e) {
    const div = document.createElement("div");
    div.textContent = html;
    return div.innerHTML;
  }
}
function setSafeHTML(element, html) {
  if (!element) return;
  element.innerHTML = sanitizeHTML(html);
}
function escapeHTML(text) {
  const div = document.createElement("div");
  div.textContent = text != null ? text : "";
  return div.innerHTML;
}
var init_sanitize = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/utils/sanitize.js"() {
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/utils/dom.js
var dom_exports = {};
__export(dom_exports, {
  $: () => $,
  $$: () => $$,
  addEventListenerWithCleanup: () => addEventListenerWithCleanup,
  copyToClipboard: () => copyToClipboard,
  createElement: () => createElement,
  createRipple: () => createRipple,
  debounce: () => debounce,
  delegate: () => delegate,
  isInViewport: () => isInViewport,
  ready: () => ready,
  smoothScrollTo: () => smoothScrollTo,
  throttle: () => throttle,
  waitForElement: () => waitForElement
});
function ready(callback) {
  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", callback);
  } else {
    callback();
  }
}
function $(selector, context = document) {
  try {
    return context.querySelector(selector);
  } catch (error) {
    console.warn(`Invalid selector: "${selector}"`, error);
    return null;
  }
}
function $$(selector, context = document) {
  try {
    return Array.from(context.querySelectorAll(selector));
  } catch (error) {
    console.warn(`Invalid selector: "${selector}"`, error);
    return [];
  }
}
function createRipple(element, event) {
  const ripple = document.createElement("span");
  const rect = element.getBoundingClientRect();
  const size = Math.max(rect.width, rect.height);
  const x = event.clientX - rect.left - size / 2;
  const y = event.clientY - rect.top - size / 2;
  ripple.style.cssText = `
    width: ${size}px;
    height: ${size}px;
    left: ${x}px;
    top: ${y}px;
    position: absolute;
    border-radius: 50%;
    background: currentColor;
    opacity: 0.25;
    pointer-events: none;
    transform: scale(0);
    animation: ripple 0.6s linear;
  `;
  ripple.classList.add("ripple");
  element.style.position = element.style.position || "relative";
  element.style.overflow = "hidden";
  element.appendChild(ripple);
  const rippleDuration = getComputedStyle(document.documentElement).getPropertyValue("--timing-slow");
  const duration = parseFloat(rippleDuration) * 1e3 || 500;
  setTimeout(() => ripple.remove(), duration);
}
function smoothScrollTo(target, offset = 0, behavior = "smooth") {
  let element;
  if (typeof target === "string") {
    element = $(target);
  } else if (target instanceof Element) {
    element = target;
  } else {
    console.warn("Invalid scroll target:", target);
    return;
  }
  if (!element) {
    console.warn("Scroll target not found:", target);
    return;
  }
  const targetPosition = element.offsetTop - offset;
  window.scrollTo({
    top: targetPosition,
    behavior
  });
}
function debounce(func, wait, immediate = false) {
  let timeout;
  return function executedFunction(...args) {
    const later = () => {
      timeout = null;
      if (!immediate) func.apply(this, args);
    };
    const callNow = immediate && !timeout;
    clearTimeout(timeout);
    timeout = setTimeout(later, wait);
    if (callNow) func.apply(this, args);
  };
}
function throttle(func, limit) {
  let inThrottle;
  return function executedFunction(...args) {
    if (!inThrottle) {
      func.apply(this, args);
      inThrottle = true;
      setTimeout(() => inThrottle = false, limit);
    }
  };
}
function isInViewport(element, threshold = 0) {
  const rect = element.getBoundingClientRect();
  const windowHeight = window.innerHeight || document.documentElement.clientHeight;
  const windowWidth = window.innerWidth || document.documentElement.clientWidth;
  return rect.top >= -threshold && rect.left >= -threshold && rect.bottom <= windowHeight + threshold && rect.right <= windowWidth + threshold;
}
function waitForElement(selector, timeout = 5e3) {
  return new Promise((resolve, reject) => {
    const element = $(selector);
    if (element) {
      resolve(element);
      return;
    }
    const observer = new MutationObserver((mutations, obs) => {
      const element2 = $(selector);
      if (element2) {
        obs.disconnect();
        resolve(element2);
      }
    });
    observer.observe(document.body, {
      childList: true,
      subtree: true
    });
    setTimeout(() => {
      observer.disconnect();
      reject(new Error(`Element "${selector}" not found within ${timeout}ms`));
    }, timeout);
  });
}
function addEventListenerWithCleanup(element, event, handler, options = {}) {
  element.addEventListener(event, handler, options);
  return {
    remove() {
      element.removeEventListener(event, handler, options);
    }
  };
}
function delegate(parent, selector, event, handler) {
  const delegatedHandler = (e) => {
    const target = e.target.closest(selector);
    if (target && parent.contains(target)) {
      handler.call(target, e);
    }
  };
  parent.addEventListener(event, delegatedHandler);
  return {
    remove() {
      parent.removeEventListener(event, delegatedHandler);
    }
  };
}
function createElement(tag, attributes = {}, content = "") {
  const element = document.createElement(tag);
  Object.entries(attributes).forEach(([key, value]) => {
    if (key === "className" || key === "class") {
      element.className = value;
    } else if (key === "dataset") {
      Object.entries(value).forEach(([dataKey, dataValue]) => {
        element.dataset[dataKey] = dataValue;
      });
    } else if (key.startsWith("on") && typeof value === "function") {
      element.addEventListener(key.slice(2).toLowerCase(), value);
    } else {
      element.setAttribute(key, value);
    }
  });
  if (content) {
    if (typeof content === "string") {
      try {
        setSafeHTML(element, content);
      } catch (e) {
        element.textContent = content;
      }
    } else if (content instanceof Element) {
      element.appendChild(content);
    } else if (Array.isArray(content)) {
      content.forEach((child) => {
        if (typeof child === "string") {
          element.appendChild(document.createTextNode(child));
        } else if (child instanceof Element) {
          element.appendChild(child);
        }
      });
    }
  }
  return element;
}
async function copyToClipboard(text) {
  if (navigator.clipboard && window.isSecureContext) {
    try {
      await navigator.clipboard.writeText(text);
      return true;
    } catch (err) {
      console.warn("Clipboard API failed, using fallback:", err);
    }
  }
  try {
    const textArea = createElement("textarea", {
      value: text,
      style: "position: fixed; opacity: 0; pointer-events: none;"
    });
    document.body.appendChild(textArea);
    textArea.select();
    const successful = document.execCommand("copy");
    document.body.removeChild(textArea);
    return successful;
  } catch (err) {
    console.error("Clipboard fallback failed:", err);
    return false;
  }
}
var init_dom = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/utils/dom.js"() {
    init_sanitize();
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/core/utils/DOMUtils.js
function waitForDOM() {
  return new Promise((resolve) => {
    if (document.readyState === "loading") {
      document.addEventListener("DOMContentLoaded", resolve, { once: true });
    } else {
      resolve();
    }
  });
}
function waitForElement2(selector, timeout = 5e3) {
  return new Promise((resolve, reject) => {
    const element = document.querySelector(selector);
    if (element) {
      resolve(element);
      return;
    }
    const observer = new MutationObserver((mutations) => {
      const element2 = document.querySelector(selector);
      if (element2) {
        observer.disconnect();
        resolve(element2);
      }
    });
    observer.observe(document.body, {
      childList: true,
      subtree: true
    });
    setTimeout(() => {
      observer.disconnect();
      reject(new Error(`Element ${selector} not found within ${timeout}ms`));
    }, timeout);
  });
}
function isElementVisible(element, threshold = 0) {
  if (!element) return false;
  const rect = element.getBoundingClientRect();
  const viewHeight = Math.max(document.documentElement.clientHeight, window.innerHeight);
  const viewWidth = Math.max(document.documentElement.clientWidth, window.innerWidth);
  return rect.bottom >= threshold && rect.right >= threshold && rect.top <= viewHeight - threshold && rect.left <= viewWidth - threshold;
}
function scrollToElement(element, options = {}) {
  if (!element) return;
  const defaultOptions = {
    behavior: "smooth",
    block: "start",
    inline: "nearest",
    ...options
  };
  element.scrollIntoView(defaultOptions);
}
var init_DOMUtils = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/core/utils/DOMUtils.js"() {
    init_sanitize();
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/core/AnimationBridge.js
var AnimationBridge, animationBridge;
var init_AnimationBridge = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/core/AnimationBridge.js"() {
    AnimationBridge = class {
      constructor() {
        this.timingTokens = {
          instant: "var(--timing-instant)",
          fast: "var(--timing-fast)",
          medium: "var(--timing-medium)",
          slow: "var(--timing-slow)"
        };
        this.easingTokens = {
          standard: "var(--easing-standard)",
          emphasized: "var(--easing-emphasized)",
          smooth: "var(--easing-smooth)"
        };
      }
      /**
       * Get CSS timing value in milliseconds from CSS custom property
       * @param {string} tokenName - Token name (instant, fast, medium, slow)
       * @returns {number} Duration in milliseconds
       */
      getTiming(tokenName = "medium") {
        const cssVariable = this.timingTokens[tokenName] || this.timingTokens.medium;
        const value = this.getCSSValue(cssVariable);
        return parseFloat(value) * 1e3;
      }
      /**
       * Get CSS easing value from CSS custom property
       * @param {string} tokenName - Token name (standard, emphasized, smooth)
       * @returns {string} CSS easing function
       */
      getEasing(tokenName = "standard") {
        const cssVariable = this.easingTokens[tokenName] || this.easingTokens.standard;
        return this.getCSSValue(cssVariable);
      }
      /**
       * Get computed CSS custom property value
       * @param {string} cssVar - CSS variable (e.g., 'var(--timing-medium)')
       * @returns {string} Computed value
       */
      getCSSValue(cssVar) {
        var _a;
        const propName = (_a = cssVar.match(/var\(([^)]+)\)/)) == null ? void 0 : _a[1];
        if (propName) {
          return getComputedStyle(document.documentElement).getPropertyValue(propName).trim();
        }
        return cssVar;
      }
      /**
       * Set collapse state using new data attribute system
       * @param {Element} element - Target element
       * @param {string} state - State: 'collapsed', 'transitioning', 'expanded'
       */
      setCollapseState(element, state) {
        if (!element) return;
        element.setAttribute("data-collapse-state", state);
        if (state === "expanded") {
          element.classList.add("expanded");
          element.classList.remove("collapsed");
        } else if (state === "collapsed") {
          element.classList.remove("expanded");
          element.classList.add("collapsed");
        }
      }
      /**
       * Get current collapse state
       * @param {Element} element - Target element
       * @returns {string} Current state
       */
      getCollapseState(element) {
        if (!element) return "collapsed";
        return element.getAttribute("data-collapse-state") || "collapsed";
      }
      /**
       * Set component state using new data attribute system
       * @param {Element} element - Target element
       * @param {string} state - State: 'loading', 'ready', 'disabled', 'error'
       */
      setComponentState(element, state) {
        if (!element) return;
        element.setAttribute("data-component-state", state);
      }
      /**
       * Expand element with proper animation and state management
       * @param {Element} element - Element to expand
       * @param {Object} options - Animation options
       * @returns {Promise} Resolves when animation completes
       */
      async expand(element, options = {}) {
        if (!element) return;
        const {
          timing = "medium",
          easing = "standard",
          height = null
        } = options;
        this.setCollapseState(element, "transitioning");
        const header = element.querySelector("[aria-expanded]");
        if (header) {
          header.setAttribute("aria-expanded", "true");
        }
        const duration = this.getTiming(timing);
        setTimeout(() => {
          this.setCollapseState(element, "expanded");
        }, 10);
        return new Promise((resolve) => {
          setTimeout(() => {
            resolve();
          }, duration);
        });
      }
      /**
       * Collapse element with proper animation and state management
       * @param {Element} element - Element to collapse
       * @param {Object} options - Animation options
       * @returns {Promise} Resolves when animation completes
       */
      async collapse(element, options = {}) {
        if (!element) return;
        const {
          timing = "medium",
          easing = "standard"
        } = options;
        this.setCollapseState(element, "transitioning");
        const header = element.querySelector("[aria-expanded]");
        if (header) {
          header.setAttribute("aria-expanded", "false");
        }
        const duration = this.getTiming(timing);
        setTimeout(() => {
          this.setCollapseState(element, "collapsed");
        }, 10);
        return new Promise((resolve) => {
          setTimeout(() => {
            resolve();
          }, duration);
        });
      }
      /**
       * Toggle element between expanded/collapsed states
       * @param {Element} element - Element to toggle
       * @param {Object} options - Animation options
       * @returns {Promise} Resolves when animation completes
       */
      async toggle(element, options = {}) {
        if (!element) return;
        const currentState = this.getCollapseState(element);
        const isExpanded = currentState === "expanded";
        if (isExpanded) {
          return this.collapse(element, options);
        } else {
          return this.expand(element, options);
        }
      }
      /**
       * Apply loading state with CSS tokens
       * @param {Element} element - Element to apply loading state
       * @param {boolean} isLoading - Whether element is loading
       */
      setLoadingState(element, isLoading) {
        if (!element) return;
        if (isLoading) {
          this.setComponentState(element, "loading");
        } else {
          this.setComponentState(element, "ready");
        }
      }
      /**
       * Create universal toggle function for use in templates
       * This replaces the old toggleCollapse() function
       * @param {string} elementId - ID of element to toggle
       * @param {Object} options - Animation options
       */
      createToggleFunction() {
        window.toggleCollapse = async (elementId, options = {}) => {
          const element = document.getElementById(elementId);
          if (!element) {
            console.warn(`Element with ID '${elementId}' not found`);
            return;
          }
          return this.toggle(element, options);
        };
        window.animationBridge = this;
      }
      /**
       * Initialize the animation bridge system
       * Call this once when the page loads
       */
      init() {
        this.createToggleFunction();
        this.initializeStates();
        console.log("\u{1F3AF} Animation Bridge initialized with CSS token integration");
      }
      /**
       * Initialize states for existing elements
       */
      initializeStates() {
        const collapseElements = document.querySelectorAll(".collapse");
        collapseElements.forEach((element) => {
          if (!element.hasAttribute("data-collapse-state")) {
            const isExpanded = element.classList.contains("expanded");
            this.setCollapseState(element, isExpanded ? "expanded" : "collapsed");
          }
          if (!element.hasAttribute("data-component-state")) {
            this.setComponentState(element, "ready");
          }
        });
      }
      /**
       * Migrate existing components to use new system
       * This can be called to update old components
       */
      migrateExistingComponents() {
        const expandedElements = document.querySelectorAll(".expanded");
        expandedElements.forEach((el) => {
          if (!el.hasAttribute("data-collapse-state")) {
            this.setCollapseState(el, "expanded");
          }
        });
        const collapsedElements = document.querySelectorAll(".collapsed");
        collapsedElements.forEach((el) => {
          if (!el.hasAttribute("data-collapse-state")) {
            this.setCollapseState(el, "collapsed");
          }
        });
        console.log("\u{1F504} Migrated existing components to new animation system");
      }
    };
    animationBridge = new AnimationBridge();
    if (document.readyState === "loading") {
      document.addEventListener("DOMContentLoaded", () => {
        animationBridge.init();
      });
    } else {
      animationBridge.init();
    }
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/mixins/MixinBase.js
function validateMixinInterface(mixin, requirements = {}) {
  const log20 = logger.component("MixinValidator");
  if (requirements.methods) {
    const missing = requirements.methods.filter((method) => !(method in mixin));
    if (missing.length > 0) {
      log20.error(`Mixin missing required methods: ${missing.join(", ")}`);
      return false;
    }
  }
  const initMethods = Object.keys(mixin).filter((key) => key.startsWith("init"));
  if (initMethods.length === 0) {
    log20.warn("Mixin does not follow init* naming convention");
  }
  const healthMethods = Object.keys(mixin).filter((key) => key.includes("Health"));
  if (healthMethods.length === 0) {
    log20.warn("Mixin does not provide health check method");
  }
  return true;
}
var MixinUtilities, MixinPatterns;
var init_MixinBase = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/mixins/MixinBase.js"() {
    init_Logger();
    MixinUtilities = {
      /**
       * Create a standardized mixin initialization function
       * @param {string} mixinName - Name of the mixin for logging
       * @param {Object} defaultOptions - Default configuration options
       * @param {Function} setupFunction - Function to call after options are set
       * @returns {Function} Standardized init function
       */
      createInitFunction(mixinName, defaultOptions, setupFunction) {
        return function(options = {}) {
          const log20 = logger.component(mixinName);
          const baseName = mixinName.endsWith("Mixin") ? mixinName.slice(0, -5) : mixinName;
          const canonical = baseName.charAt(0).toLowerCase() + baseName.slice(1);
          const optionsProperty = `${canonical}Options`;
          this[optionsProperty] = {
            ...defaultOptions,
            ...options
          };
          if (typeof setupFunction === "function") {
            setupFunction.call(this);
          }
          log20.debug(`${mixinName} initialized for ${this.name || "component"}`);
        };
      },
      /**
       * Create a standardized element setup function
       * @param {Object} selectors - Map of element names to selectors
       * @returns {Function} Element setup function
       */
      createElementSetup(selectors) {
        return function() {
          if (!this.element) return;
          Object.entries(selectors).forEach(([name, selector]) => {
            if (Array.isArray(selector)) {
              this[name] = Array.from(this.element.querySelectorAll(selector[0]));
            } else {
              this[name] = this.element.querySelector(selector);
            }
          });
        };
      },
      /**
       * Create a standardized event setup function with automatic cleanup
       * @param {Object} eventMap - Map of elements to event handlers
       * @returns {Function} Event setup function
       */
      createEventSetup(eventMap) {
        return function() {
          Object.entries(eventMap).forEach(([elementName, events]) => {
            const elements = Array.isArray(this[elementName]) ? this[elementName] : [this[elementName]];
            elements.forEach((element) => {
              if (!element) return;
              Object.entries(events).forEach(([eventType, handler]) => {
                this.addEventListener(element, eventType, handler.bind(this));
              });
            });
          });
        };
      },
      /**
       * Create a standardized health check function
       * @param {Function[]} checks - Array of health check functions
       * @returns {Function} Health check function
       */
      createHealthCheck(checks) {
        return function() {
          return checks.every((check) => check.call(this));
        };
      },
      /**
       * Create a standardized cleanup function
       * @param {Function} customCleanup - Optional custom cleanup function
       * @returns {Function} Cleanup function
       */
      createCleanup(customCleanup) {
        return function() {
          if (typeof customCleanup === "function") {
            customCleanup.call(this);
          }
        };
      }
    };
    MixinPatterns = {
      /**
       * State management pattern for mixins
       * @param {string} stateName - Name of the state property
       * @param {*} initialValue - Initial state value
       * @returns {Object} State management functions
       */
      createState(stateName, initialValue) {
        const getterName = `get${stateName.charAt(0).toUpperCase() + stateName.slice(1)}`;
        const setterName = `set${stateName.charAt(0).toUpperCase() + stateName.slice(1)}`;
        return {
          [getterName]() {
            return this[`_${stateName}`] || initialValue;
          },
          [setterName](value) {
            const oldValue = this[`_${stateName}`];
            this[`_${stateName}`] = value;
            if (this.emit) {
              this.emit(`${stateName}-changed`, { oldValue, newValue: value });
            }
          }
        };
      },
      /**
       * Options validation pattern
       * @param {Object} schema - Options schema for validation
       * @returns {Function} Validation function
       */
      createOptionsValidator(schema) {
        return function(options) {
          const errors = [];
          Object.entries(schema).forEach(([key, config]) => {
            const value = options[key];
            if (config.required && value === void 0) {
              errors.push(`Required option '${key}' is missing`);
            }
            if (value !== void 0 && config.type && typeof value !== config.type) {
              errors.push(`Option '${key}' must be of type ${config.type}, got ${typeof value}`);
            }
            if (config.validate && !config.validate(value)) {
              errors.push(`Option '${key}' failed validation`);
            }
          });
          if (errors.length > 0) {
            throw new Error(`Options validation failed: ${errors.join(", ")}`);
          }
          return true;
        };
      },
      /**
       * Event delegation pattern for mixins
       * @param {string} containerSelector - Container element selector
       * @param {Object} delegationMap - Map of selectors to handlers
       * @returns {Object} Delegation setup functions
       */
      createEventDelegation(containerSelector, delegationMap) {
        return {
          setupDelegation() {
            const container = this.element.querySelector(containerSelector) || this.element;
            Object.entries(delegationMap).forEach(([selector, handler]) => {
              this.addEventListener(container, "click", (e) => {
                const target = e.target.closest(selector);
                if (target) {
                  handler.call(this, e, target);
                }
              });
            });
          }
        };
      }
    };
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/mixins/ExpandableMixin.js
var log3, ExpandableMixin;
var init_ExpandableMixin = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/mixins/ExpandableMixin.js"() {
    init_AnimationBridge();
    init_MixinBase();
    init_Logger();
    init_MixinBase();
    log3 = logger.component("ExpandableMixin");
    ExpandableMixin = {
      /**
       * Initialize expandable functionality using MixinBase utilities
       * Call this from your component's onInit method
       * @param {Object} options - Configuration options
       */
      initExpandable: MixinUtilities.createInitFunction(
        "ExpandableMixin",
        {
          toggleSelector: ".sidebar__toggle",
          contentSelector: ".nested-content",
          animationTiming: "medium",
          autoExpand: false
        },
        function setupExpandable() {
          this.setupExpandableElements();
          this.setupExpandableEvents();
          this.setupExpandableAccessibility();
        }
      ),
      /**
       * Find and cache expandable elements using standardized setup
       */
      setupExpandableElements() {
        if (!this.element) return;
        const toggleSelector = this.expandableOptions.toggleSelector;
        this.toggles = Array.from(this.element.querySelectorAll(toggleSelector));
        this.toggleContentMap = /* @__PURE__ */ new Map();
        this.toggles.forEach((toggle) => {
          const listItem = toggle.closest("li");
          const content = listItem == null ? void 0 : listItem.querySelector(this.expandableOptions.contentSelector);
          if (content) {
            this.toggleContentMap.set(toggle, content);
          }
        });
      },
      /**
       * Setup event listeners for toggles
       */
      setupExpandableEvents() {
        if (!this.toggles) return;
        this.toggles.forEach((toggle) => {
          this.addEventListener(toggle, "click", async (e) => {
            e.preventDefault();
            e.stopPropagation();
            await this.handleToggleClick(toggle);
          });
        });
      },
      /**
       * Setup accessibility attributes for toggles
       */
      setupExpandableAccessibility() {
        if (!this.toggles) return;
        this.toggles.forEach((toggle) => {
          if (!toggle.hasAttribute("aria-expanded")) {
            toggle.setAttribute("aria-expanded", "false");
          }
          if (!toggle.hasAttribute("role")) {
            toggle.setAttribute("role", "button");
          }
          if (!toggle.hasAttribute("tabindex")) {
            toggle.setAttribute("tabindex", "0");
          }
        });
      },
      /**
       * Handle toggle button clicks
       * @param {Element} toggle - Toggle button element
       */
      async handleToggleClick(toggle) {
        const isExpanded = toggle.getAttribute("aria-expanded") === "true";
        const newState = !isExpanded;
        this.emit("before-toggle", {
          toggle,
          expanding: newState,
          collapsing: !newState
        });
        const _promise = this.setToggleState(toggle, newState);
        this.emit("after-toggle", {
          toggle,
          expanded: newState,
          collapsed: !newState
        });
      },
      /**
       * Set the expand/collapse state of a toggle
       * @param {Element} toggle - Toggle button element
       * @param {boolean} expand - Whether to expand (true) or collapse (false)
       */
      async setToggleState(toggle, expand) {
        const content = this.toggleContentMap.get(toggle);
        if (!content) {
          log3.warn("No content found for toggle:", toggle);
          return;
        }
        toggle.setAttribute("aria-expanded", expand.toString());
        const chevron = toggle.querySelector("svg, .chevron, .icon");
        if (chevron) {
          if (expand) {
            chevron.classList.add("rotate-90");
          } else {
            chevron.classList.remove("rotate-90");
          }
        }
        if (expand) {
          if (this.isInitialized) {
            await animationBridge.expand(content, { timing: this.expandableOptions.animationTiming });
          } else {
            animationBridge.setCollapseState(content, "expanded");
          }
        } else {
          if (this.isInitialized) {
            await animationBridge.collapse(content, { timing: this.expandableOptions.animationTiming });
          } else {
            animationBridge.setCollapseState(content, "collapsed");
          }
        }
      },
      /**
       * Expand a specific toggle
       * @param {Element} toggle - Toggle button element
       */
      async expandToggle(toggle) {
        if (toggle.getAttribute("aria-expanded") !== "true") {
          await this.setToggleState(toggle, true);
        }
      },
      /**
       * Collapse a specific toggle
       * @param {Element} toggle - Toggle button element
       */
      async collapseToggle(toggle) {
        if (toggle.getAttribute("aria-expanded") === "true") {
          await this.setToggleState(toggle, false);
        }
      },
      /**
       * Expand all toggles
       */
      async expandAll() {
        if (!this.toggles) return;
        const expandPromises = this.toggles.map((toggle) => {
          if (toggle.getAttribute("aria-expanded") === "false") {
            return this.setToggleState(toggle, true);
          }
          return Promise.resolve();
        });
        await Promise.all(expandPromises);
        this.emit("expanded-all");
      },
      /**
       * Collapse all toggles
       */
      async collapseAll() {
        if (!this.toggles) return;
        const collapsePromises = this.toggles.map((toggle) => {
          if (toggle.getAttribute("aria-expanded") === "true") {
            return this.setToggleState(toggle, false);
          }
          return Promise.resolve();
        });
        await Promise.all(collapsePromises);
        this.emit("collapsed-all");
      },
      /**
       * Get expanded toggles
       * @returns {Element[]} Array of expanded toggle elements
       */
      getExpandedToggles() {
        if (!this.toggles) return [];
        return this.toggles.filter((toggle) => toggle.getAttribute("aria-expanded") === "true");
      },
      /**
       * Get collapsed toggles
       * @returns {Element[]} Array of collapsed toggle elements
       */
      getCollapsedToggles() {
        if (!this.toggles) return [];
        return this.toggles.filter((toggle) => toggle.getAttribute("aria-expanded") === "false");
      },
      /**
       * Check if expandable functionality is healthy using standardized checks
       * @returns {boolean} Whether expandable functionality is working
       */
      isExpandableHealthy: MixinUtilities.createHealthCheck([
        function() {
          return this.toggles && this.toggles.length > 0;
        },
        function() {
          return this.expandableOptions !== void 0;
        },
        function() {
          return this.toggles.every((toggle) => toggle.hasAttribute("aria-expanded"));
        },
        function() {
          return this.toggles.every((toggle) => {
            if (!toggle.dataset || !toggle.dataset.componentListeners) return false;
            return toggle.dataset.componentListeners.includes(this.id);
          });
        },
        function() {
          if (!this.eventListeners) return false;
          const toggleClickListeners = Array.from(this.eventListeners.values()).filter((listener) => listener.event === "click" && this.toggles.includes(listener.element));
          return toggleClickListeners.length === this.toggles.length;
        }
      ])
    };
    validateMixinInterface(ExpandableMixin, {
      methods: ["initExpandable", "isExpandableHealthy"]
    });
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/mixins/ResponsiveMixin.js
var log4, ResponsiveMixin;
var init_ResponsiveMixin = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/mixins/ResponsiveMixin.js"() {
    init_MixinBase();
    init_Logger();
    log4 = logger.component("ResponsiveMixin");
    ResponsiveMixin = {
      /**
       * Initialize responsive functionality using MixinBase utilities
       * Call this from your component's onInit method
       * @param {Object} options - Configuration options
       */
      initResponsive: MixinUtilities.createInitFunction(
        "ResponsiveMixin",
        {
          mobileBreakpoint: 768,
          overlaySelector: "#mobileNavOverlay",
          overlayToggleClass: "hidden",
          debounceDelay: 150
        },
        function setupResponsive() {
          this.isOpen = false;
          this.resizeTimeout = null;
          this.initializeMobileState();
          this.setupResponsiveHandling();
        }
      ),
      /**
       * Initialize mobile sidebar state without interfering with desktop CSS
       */
      initializeMobileState() {
        var _a, _b;
        const isMobile = this.isMobileViewport();
        if (isMobile) {
          this.isOpen = ((_a = this.element) == null ? void 0 : _a.classList.contains("translate-x-0")) && !((_b = this.element) == null ? void 0 : _b.classList.contains("-translate-x-full"));
        } else {
          this.isOpen = false;
        }
      },
      /**
       * Setup responsive handling without forcing initial state
       */
      setupResponsiveHandling() {
        this.addEventListener(window, "resize", () => {
          clearTimeout(this.resizeTimeout);
          this.resizeTimeout = setTimeout(() => {
            this.handleResponsiveChange();
          }, this.responsiveOptions.debounceDelay);
        });
      },
      /**
       * Handle responsive changes without forcing initial desktop state
       */
      handleResponsiveChange() {
        const isMobile = this.isMobileViewport();
        if (isMobile) {
          this.closeOverlayIfOpen();
          log4.debug(`${this.name}: Responsive change to mobile`);
        } else {
          this.closeOverlayIfOpen();
        }
        this.emit("responsive-change", {
          isMobile,
          breakpoint: this.responsiveOptions.mobileBreakpoint
        });
      },
      /**
       * Check if current viewport is mobile
       * @returns {boolean} Whether viewport is mobile size
       */
      isMobileViewport() {
        return window.innerWidth < this.responsiveOptions.mobileBreakpoint;
      },
      /**
       * Close overlay and clean up mobile-specific state without touching component visibility
       */
      closeOverlayIfOpen() {
        const overlay = document.querySelector(this.responsiveOptions.overlaySelector);
        if (overlay && !overlay.classList.contains(this.responsiveOptions.overlayToggleClass)) {
          overlay.classList.add(this.responsiveOptions.overlayToggleClass);
        }
        document.body.style.overflow = "";
        this.isOpen = false;
      },
      /**
       * Open mobile component
       */
      openMobile() {
        if (this.isOpen || !this.isMobileViewport()) return;
        this.updateComponentState("opening");
        if (this.element) {
          this.element.classList.remove("-translate-x-full");
          this.element.classList.add("translate-x-0");
        }
        this.isOpen = true;
        const overlay = document.querySelector(this.responsiveOptions.overlaySelector);
        if (overlay) {
          overlay.classList.remove(this.responsiveOptions.overlayToggleClass);
        }
        document.body.style.overflow = "hidden";
        setTimeout(() => {
          this.updateComponentState("open");
        }, 300);
        this.emit("mobile-opened");
        log4.debug(`${this.name}: Mobile component opened`);
      },
      /**
       * Close mobile component
       */
      closeMobile() {
        if (!this.isOpen) return;
        this.updateComponentState("closing");
        if (this.element) {
          this.element.classList.add("-translate-x-full");
          this.element.classList.remove("translate-x-0");
        }
        this.isOpen = false;
        this.closeOverlayIfOpen();
        setTimeout(() => {
          this.updateComponentState("closed");
        }, 300);
        this.emit("mobile-closed");
      },
      /**
       * Toggle mobile component
       */
      toggleMobile() {
        if (this.isOpen) {
          this.closeMobile();
        } else {
          this.openMobile();
        }
      },
      /**
       * Force close mobile component (useful for cleanup)
       */
      forceCloseMobile() {
        if (this.element) {
          this.element.classList.add("-translate-x-full");
          this.element.classList.remove("translate-x-0");
        }
        this.isOpen = false;
        this.closeOverlayIfOpen();
        this.emit("mobile-closed");
        log4.debug(`${this.name}: Mobile component force closed`);
      },
      /**
       * Reset component to initial responsive state (useful for debugging)
       */
      resetResponsiveState() {
        this.forceCloseMobile();
        if (this.element) {
          this.element.classList.remove("translate-x-0");
        }
        log4.debug(`${this.name}: Reset to initial responsive state`);
        this.emit("responsive-reset");
      },
      /**
       * Get current responsive state
       * @returns {Object} Current responsive state information
       */
      getResponsiveState() {
        return {
          isMobile: this.isMobileViewport(),
          isOpen: this.isOpen,
          breakpoint: this.responsiveOptions.mobileBreakpoint,
          viewportWidth: window.innerWidth
        };
      },
      /**
       * Check if responsive functionality is healthy using standardized checks
       */
      isResponsiveHealthy: MixinUtilities.createHealthCheck([
        function() {
          return this.responsiveOptions !== void 0;
        },
        function() {
          return typeof this.isMobileViewport === "function";
        },
        function() {
          return typeof this.responsiveOptions.mobileBreakpoint === "number";
        }
      ])
    };
    validateMixinInterface(ResponsiveMixin, {
      methods: ["initResponsive", "isResponsiveHealthy"]
    });
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/mixins/ModalMixin.js
var log5, ModalMixin;
var init_ModalMixin = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/mixins/ModalMixin.js"() {
    init_MixinBase();
    init_Logger();
    log5 = logger.component("ModalMixin");
    ModalMixin = {
      /**
       * Initialize modal functionality using MixinBase utilities
       * Call this from your component's onInit method
       * @param {Object} options - Configuration options
       */
      initModal: MixinUtilities.createInitFunction(
        "ModalMixin",
        {
          overlaySelector: ".modal-overlay",
          closeSelector: ".modal-close",
          escapeToClose: true,
          clickOutsideToClose: true,
          trapFocus: true,
          bodyScrollLock: true,
          animationDuration: 300
        },
        function setupModal() {
          this.isModalOpen = false;
          this.previousFocus = null;
          this.focusableElements = [];
          this.setupModalElements();
          this.setupModalEvents();
          this.setupModalAccessibility();
        }
      ),
      /**
       * Find and cache modal elements
       */
      setupModalElements() {
        if (!this.element) return;
        this.overlay = this.element.querySelector(this.modalOptions.overlaySelector) || document.querySelector(this.modalOptions.overlaySelector);
        this.closeButtons = Array.from(this.element.querySelectorAll(this.modalOptions.closeSelector));
        this.updateFocusableElements();
      },
      /**
       * Setup event listeners for modal functionality
       */
      setupModalEvents() {
        this.closeButtons.forEach((button) => {
          this.addEventListener(button, "click", (e) => {
            e.preventDefault();
            this.closeModal();
          });
        });
        if (this.overlay && this.modalOptions.clickOutsideToClose) {
          this.addEventListener(this.overlay, "click", (e) => {
            if (e.target === this.overlay) {
              this.closeModal();
            }
          });
        }
        if (this.modalOptions.escapeToClose) {
          this.addEventListener(document, "keydown", (e) => {
            if (e.key === "Escape" && this.isModalOpen) {
              e.preventDefault();
              this.closeModal();
            }
          });
        }
        if (this.modalOptions.trapFocus) {
          this.addEventListener(document, "keydown", (e) => {
            if (e.key === "Tab" && this.isModalOpen) {
              this.handleFocusTrap(e);
            }
          });
        }
      },
      /**
       * Setup accessibility attributes
       */
      setupModalAccessibility() {
        if (!this.element) return;
        if (!this.element.hasAttribute("role")) {
          this.element.setAttribute("role", "dialog");
        }
        if (!this.element.hasAttribute("aria-modal")) {
          this.element.setAttribute("aria-modal", "true");
        }
        if (!this.element.hasAttribute("aria-hidden")) {
          this.element.setAttribute("aria-hidden", "true");
        }
      },
      /**
       * Open the modal
       * @param {Object} config - Optional configuration for this open
       */
      async openModal(config = {}) {
        if (this.isModalOpen) return;
        const options = { ...this.modalOptions, ...config };
        this.emit("before-modal-open", { options });
        this.previousFocus = document.activeElement;
        if (options.bodyScrollLock) {
          document.body.style.overflow = "hidden";
        }
        this.element.setAttribute("aria-hidden", "false");
        this.element.classList.remove("hidden");
        if (this.overlay) {
          this.overlay.classList.remove("hidden");
        }
        this.isModalOpen = true;
        this.updateComponentState("modal-open");
        this.updateFocusableElements();
        this.focusFirstElement();
        if (options.animationDuration > 0) {
          await new Promise((resolve) => setTimeout(resolve, options.animationDuration));
        }
        this.emit("after-modal-open", { options });
        log5.debug(`${this.name}: Modal opened`);
      },
      /**
       * Close the modal
       * @param {Object} config - Optional configuration for this close
       */
      async closeModal(config = {}) {
        if (!this.isModalOpen) return;
        const options = { ...this.modalOptions, ...config };
        this.emit("before-modal-close", { options });
        this.element.setAttribute("aria-hidden", "true");
        this.element.classList.add("hidden");
        if (this.overlay) {
          this.overlay.classList.add("hidden");
        }
        this.isModalOpen = false;
        this.updateComponentState("modal-closed");
        if (options.bodyScrollLock) {
          document.body.style.overflow = "";
        }
        if (this.previousFocus && document.contains(this.previousFocus)) {
          this.previousFocus.focus();
        }
        if (options.animationDuration > 0) {
          await new Promise((resolve) => setTimeout(resolve, options.animationDuration));
        }
        this.emit("after-modal-close", { options });
        log5.debug(`${this.name}: Modal closed`);
      },
      /**
       * Toggle modal state
       */
      toggleModal() {
        if (this.isModalOpen) {
          this.closeModal();
        } else {
          this.openModal();
        }
      },
      /**
       * Update list of focusable elements
       */
      updateFocusableElements() {
        if (!this.element) return;
        const focusableSelector = 'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';
        this.focusableElements = Array.from(this.element.querySelectorAll(focusableSelector)).filter((el) => !el.disabled && !el.hidden && el.offsetParent !== null);
      },
      /**
       * Focus the first focusable element
       */
      focusFirstElement() {
        this.updateFocusableElements();
        if (this.focusableElements.length > 0) {
          this.focusableElements[0].focus();
        }
      },
      /**
       * Handle focus trapping within modal
       * @param {KeyboardEvent} e - Tab key event
       */
      handleFocusTrap(e) {
        if (this.focusableElements.length === 0) return;
        const firstElement = this.focusableElements[0];
        const lastElement = this.focusableElements[this.focusableElements.length - 1];
        if (e.shiftKey) {
          if (document.activeElement === firstElement) {
            e.preventDefault();
            lastElement.focus();
          }
        } else {
          if (document.activeElement === lastElement) {
            e.preventDefault();
            firstElement.focus();
          }
        }
      },
      /**
       * Check if modal functionality is healthy using standardized checks
       */
      isModalHealthy: MixinUtilities.createHealthCheck([
        function() {
          return this.element !== null;
        },
        function() {
          return this.modalOptions !== void 0;
        },
        function() {
          return this.element.hasAttribute("role") && this.element.hasAttribute("aria-modal");
        },
        function() {
          if (!this.closeButtons || this.closeButtons.length === 0) return true;
          return this.closeButtons.every((button) => {
            return button.dataset && button.dataset.componentListeners && button.dataset.componentListeners.includes(this.id);
          });
        }
      ])
    };
    validateMixinInterface(ModalMixin, {
      methods: ["initModal", "isModalHealthy"]
    });
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/utils/storage.js
function isStorageAvailable(type = "localStorage") {
  try {
    const storage = window[type];
    const testKey = "__storage_test__";
    storage.setItem(testKey, testKey);
    storage.removeItem(testKey);
    return true;
  } catch (e) {
    return false;
  }
}
function createNamespacedStorage(namespace) {
  return {
    get(key, fallback) {
      return localStorage2.get(`${namespace}.${key}`, fallback);
    },
    set(key, value) {
      return localStorage2.set(`${namespace}.${key}`, value);
    },
    remove(key) {
      return localStorage2.remove(`${namespace}.${key}`);
    },
    clear() {
      const keys = localStorage2.keys().filter((k) => k.startsWith(`${namespace}.`));
      keys.forEach((key) => localStorage2.remove(key));
    }
  };
}
var inMemoryStorage, SafeStorage, localStorage2, sessionStorage;
var init_storage = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/utils/storage.js"() {
    init_Logger();
    inMemoryStorage = /* @__PURE__ */ new Map();
    SafeStorage = class {
      constructor(type = "localStorage") {
        this.storageType = type;
        this.isAvailable = isStorageAvailable(type);
        this.storage = this.isAvailable ? window[type] : null;
      }
      get(key, fallback = null) {
        try {
          if (this.isAvailable) {
            const value = this.storage.getItem(key);
            if (value === null) return fallback;
            try {
              return JSON.parse(value);
            } catch (e) {
              return value;
            }
          } else {
            return inMemoryStorage.has(key) ? inMemoryStorage.get(key) : fallback;
          }
        } catch (error) {
          logger.warn("Storage", `Storage get error for key "${key}":`, error);
          return fallback;
        }
      }
      set(key, value) {
        try {
          if (this.isAvailable) {
            const serialized = typeof value === "string" ? value : JSON.stringify(value);
            this.storage.setItem(key, serialized);
            return true;
          } else {
            inMemoryStorage.set(key, value);
            return true;
          }
        } catch (error) {
          logger.warn("Storage", `Storage set error for key "${key}":`, error);
          return false;
        }
      }
      remove(key) {
        try {
          if (this.isAvailable) {
            this.storage.removeItem(key);
          } else {
            inMemoryStorage.delete(key);
          }
          return true;
        } catch (error) {
          logger.warn("Storage", `Storage remove error for key "${key}":`, error);
          return false;
        }
      }
      clear() {
        try {
          if (this.isAvailable) {
            this.storage.clear();
          } else {
            inMemoryStorage.clear();
          }
          return true;
        } catch (error) {
          logger.warn("Storage", "Storage clear error:", error);
          return false;
        }
      }
      keys() {
        try {
          if (this.isAvailable) {
            return Object.keys(this.storage);
          } else {
            return Array.from(inMemoryStorage.keys());
          }
        } catch (error) {
          logger.warn("Storage", "Storage keys error:", error);
          return [];
        }
      }
      has(key) {
        if (this.isAvailable) {
          return this.storage.getItem(key) !== null;
        } else {
          return inMemoryStorage.has(key);
        }
      }
    };
    localStorage2 = new SafeStorage("localStorage");
    sessionStorage = new SafeStorage("sessionStorage");
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/utils/animation.js
function typeWriter(element, text, speed = 50) {
  return new Promise((resolve) => {
    element.textContent = "";
    let i = 0;
    const typeInterval = setInterval(() => {
      element.textContent += text.charAt(i);
      i++;
      if (i >= text.length) {
        clearInterval(typeInterval);
        resolve();
      }
    }, speed);
  });
}
function staggeredAnimation(elements, animationFn, delay = 100) {
  return Promise.all(
    elements.map((element, index) => {
      return new Promise((resolve) => {
        setTimeout(async () => {
          await animationFn(element);
          resolve();
        }, index * delay);
      });
    })
  );
}
function animateCounter(element, endValue, duration = 1e3, startValue = 0) {
  return new Promise((resolve) => {
    const range = endValue - startValue;
    const startTime = performance.now();
    function updateCounter(currentTime) {
      const elapsed = currentTime - startTime;
      const progress = Math.min(elapsed / duration, 1);
      const easeOut = 1 - Math.pow(1 - progress, 3);
      const currentValue = Math.round(startValue + range * easeOut);
      element.textContent = currentValue.toLocaleString();
      if (progress < 1) {
        requestAnimationFrame(updateCounter);
      } else {
        resolve();
      }
    }
    requestAnimationFrame(updateCounter);
  });
}
function createLoadingSpinner(size = "medium", color = "currentColor") {
  const sizes = {
    small: "w-4 h-4",
    medium: "w-6 h-6",
    large: "w-8 h-8"
  };
  const spinner = document.createElement("div");
  spinner.className = `animate-spin ${sizes[size]} border-2 border-transparent border-t-current rounded-full`;
  spinner.style.borderTopColor = color;
  spinner.setAttribute("role", "status");
  spinner.setAttribute("aria-label", "Loading");
  return spinner;
}
function animateProgressBar(element, targetPercent, duration = 1e3) {
  return new Promise((resolve) => {
    const startPercent = parseFloat(element.style.width) || 0;
    const range = targetPercent - startPercent;
    const startTime = performance.now();
    function updateProgress2(currentTime) {
      const elapsed = currentTime - startTime;
      const progress = Math.min(elapsed / duration, 1);
      const easeOut = 1 - Math.pow(1 - progress, 2);
      const currentPercent = startPercent + range * easeOut;
      element.style.width = `${currentPercent}%`;
      if (progress < 1) {
        requestAnimationFrame(updateProgress2);
      } else {
        resolve();
      }
    }
    requestAnimationFrame(updateProgress2);
  });
}
var transitions, ScrollAnimationObserver, ParallaxController;
var init_animation = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/utils/animation.js"() {
    init_AnimationBridge();
    transitions = {
      /**
       * Slide down animation
       */
      slideDown(element, duration = null) {
        const animDuration = duration || animationBridge.getTiming("medium");
        return new Promise((resolve) => {
          element.style.height = "0";
          element.style.overflow = "hidden";
          requestAnimationFrame(() => {
            element.style.height = element.scrollHeight + "px";
            setTimeout(() => {
              element.style.height = "";
              element.style.overflow = "";
              element.style.transition = "";
              resolve();
            }, duration);
          });
        });
      },
      /**
       * Slide up animation
       */
      slideUp(element, duration = null) {
        const animDuration = duration || animationBridge.getTiming("medium");
        return new Promise((resolve) => {
          element.style.height = element.scrollHeight + "px";
          element.style.overflow = "hidden";
          requestAnimationFrame(() => {
            element.style.height = "0";
            setTimeout(() => {
              element.style.height = "";
              element.style.overflow = "";
              element.style.transition = "";
              resolve();
            }, duration);
          });
        });
      },
      /**
       * Fade in animation
       */
      fadeIn(element, duration = 300) {
        return new Promise((resolve) => {
          element.style.opacity = "0";
          element.style.transition = `opacity ${duration}ms ease`;
          requestAnimationFrame(() => {
            element.style.opacity = "1";
            setTimeout(() => {
              element.style.transition = "";
              resolve();
            }, duration);
          });
        });
      },
      /**
       * Fade out animation
       */
      fadeOut(element, duration = 300) {
        return new Promise((resolve) => {
          element.style.transition = `opacity ${duration}ms ease`;
          element.style.opacity = "0";
          setTimeout(() => {
            element.style.transition = "";
            resolve();
          }, duration);
        });
      },
      /**
       * Scale in animation
       */
      scaleIn(element, duration = 300) {
        return new Promise((resolve) => {
          element.style.transform = "scale(0)";
          element.style.transition = `transform ${duration}ms ease`;
          requestAnimationFrame(() => {
            element.style.transform = "scale(1)";
            setTimeout(() => {
              element.style.transition = "";
              resolve();
            }, duration);
          });
        });
      }
    };
    ScrollAnimationObserver = class {
      constructor(options = {}) {
        this.options = {
          threshold: options.threshold || 0.1,
          rootMargin: options.rootMargin || "0px 0px -10% 0px",
          animationClass: options.animationClass || "animate-in",
          ...options
        };
        this.observer = new IntersectionObserver(
          this.handleIntersection.bind(this),
          {
            threshold: this.options.threshold,
            rootMargin: this.options.rootMargin
          }
        );
      }
      handleIntersection(entries) {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            const element = entry.target;
            const animation = element.dataset.animation || this.options.animationClass;
            element.classList.add(animation);
            if (!element.dataset.repeatAnimation) {
              this.observer.unobserve(element);
            }
          } else if (entry.target.dataset.repeatAnimation) {
            const animation = entry.target.dataset.animation || this.options.animationClass;
            entry.target.classList.remove(animation);
          }
        });
      }
      observe(element) {
        this.observer.observe(element);
      }
      unobserve(element) {
        this.observer.unobserve(element);
      }
      disconnect() {
        this.observer.disconnect();
      }
    };
    ParallaxController = class {
      constructor() {
        this.elements = /* @__PURE__ */ new Map();
        this.isRunning = false;
        this.handleScroll = this.handleScroll.bind(this);
      }
      add(element, speed = 0.5, direction = "vertical") {
        this.elements.set(element, { speed, direction });
        if (!this.isRunning) {
          this.start();
        }
      }
      remove(element) {
        this.elements.delete(element);
        if (this.elements.size === 0) {
          this.stop();
        }
      }
      start() {
        if (this.isRunning) return;
        this.isRunning = true;
        window.addEventListener("scroll", this.handleScroll, { passive: true });
      }
      stop() {
        this.isRunning = false;
        window.removeEventListener("scroll", this.handleScroll);
      }
      handleScroll() {
        const scrollY = window.pageYOffset;
        this.elements.forEach((config, element) => {
          const { speed, direction } = config;
          const transform = direction === "vertical" ? `translateY(${scrollY * speed}px)` : `translateX(${scrollY * speed}px)`;
          element.style.transform = transform;
        });
      }
    };
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/utils/accessibility.js
function announceToScreenReader(message, priority = "polite") {
  announcer.announce(message, priority);
}
function detectHighContrastMode() {
  const testElement = document.createElement("div");
  testElement.style.cssText = `
    border: 1px solid;
    border-color: red green;
    position: absolute;
    height: 5px;
    top: -999px;
    background-image: url("data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==");
  `;
  document.body.appendChild(testElement);
  const computedStyle = window.getComputedStyle(testElement);
  const isHighContrast = computedStyle.borderTopColor === computedStyle.borderRightColor;
  document.body.removeChild(testElement);
  return isHighContrast;
}
var ScreenReaderAnnouncer, announcer, focus, keyboard, aria, motion, contrast;
var init_accessibility = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/utils/accessibility.js"() {
    ScreenReaderAnnouncer = class {
      constructor() {
        this.announcer = null;
        this.init();
      }
      init() {
        if (this.announcer) return;
        this.announcer = document.createElement("div");
        this.announcer.id = "sr-announcer";
        this.announcer.className = "sr-only";
        this.announcer.setAttribute("aria-live", "polite");
        this.announcer.setAttribute("aria-atomic", "true");
        Object.assign(this.announcer.style, {
          position: "absolute",
          left: "-10000px",
          width: "1px",
          height: "1px",
          overflow: "hidden",
          clip: "rect(0, 0, 0, 0)",
          whiteSpace: "nowrap",
          border: "0"
        });
        document.body.appendChild(this.announcer);
      }
      announce(message, priority = "polite") {
        if (!this.announcer) this.init();
        this.announcer.setAttribute("aria-live", priority);
        this.announcer.textContent = message;
        setTimeout(() => {
          this.announcer.textContent = "";
        }, 1e3);
      }
      assertive(message) {
        this.announce(message, "assertive");
      }
    };
    announcer = new ScreenReaderAnnouncer();
    focus = {
      /**
       * Focus trap for modals and overlays
       */
      trap(container, options = {}) {
        const focusableElements = this.getFocusableElements(container);
        const firstElement = focusableElements[0];
        const lastElement = focusableElements[focusableElements.length - 1];
        const handleTabKey = (e) => {
          if (e.key !== "Tab") return;
          if (e.shiftKey) {
            if (document.activeElement === firstElement) {
              e.preventDefault();
              lastElement == null ? void 0 : lastElement.focus();
            }
          } else {
            if (document.activeElement === lastElement) {
              e.preventDefault();
              firstElement == null ? void 0 : firstElement.focus();
            }
          }
        };
        const handleEscapeKey = (e) => {
          if (e.key === "Escape" && options.onEscape) {
            options.onEscape();
          }
        };
        container.addEventListener("keydown", handleTabKey);
        document.addEventListener("keydown", handleEscapeKey);
        firstElement == null ? void 0 : firstElement.focus();
        return {
          release() {
            container.removeEventListener("keydown", handleTabKey);
            document.removeEventListener("keydown", handleEscapeKey);
          }
        };
      },
      /**
       * Get all focusable elements within a container
       */
      getFocusableElements(container) {
        const selector = [
          "a[href]",
          "button",
          "input",
          "select",
          "textarea",
          '[tabindex]:not([tabindex="-1"])',
          '[contenteditable="true"]'
        ].join(", ");
        return Array.from(container.querySelectorAll(selector)).filter((element) => {
          return !element.disabled && !element.hidden && element.offsetWidth > 0 && element.offsetHeight > 0;
        });
      },
      /**
       * Save and restore focus
       */
      save() {
        return document.activeElement;
      },
      restore(element) {
        if (element && typeof element.focus === "function") {
          element.focus();
        }
      }
    };
    keyboard = {
      /**
       * Arrow key navigation for lists/grids
       */
      setupArrowNavigation(container, options = {}) {
        const {
          itemSelector = '[role="option"], button, a',
          direction = "both",
          // 'horizontal', 'vertical', 'both'
          wrap = true,
          onActivate = null
        } = options;
        const handleKeyDown = (e) => {
          const items = Array.from(container.querySelectorAll(itemSelector));
          const currentIndex = items.indexOf(document.activeElement);
          if (currentIndex === -1) return;
          let nextIndex = currentIndex;
          switch (e.key) {
            case "ArrowDown":
              if (direction === "vertical" || direction === "both") {
                e.preventDefault();
                nextIndex = wrap ? (currentIndex + 1) % items.length : Math.min(currentIndex + 1, items.length - 1);
              }
              break;
            case "ArrowUp":
              if (direction === "vertical" || direction === "both") {
                e.preventDefault();
                nextIndex = wrap ? (currentIndex - 1 + items.length) % items.length : Math.max(currentIndex - 1, 0);
              }
              break;
            case "ArrowRight":
              if (direction === "horizontal" || direction === "both") {
                e.preventDefault();
                nextIndex = wrap ? (currentIndex + 1) % items.length : Math.min(currentIndex + 1, items.length - 1);
              }
              break;
            case "ArrowLeft":
              if (direction === "horizontal" || direction === "both") {
                e.preventDefault();
                nextIndex = wrap ? (currentIndex - 1 + items.length) % items.length : Math.max(currentIndex - 1, 0);
              }
              break;
            case "Home":
              e.preventDefault();
              nextIndex = 0;
              break;
            case "End":
              e.preventDefault();
              nextIndex = items.length - 1;
              break;
            case "Enter":
            case " ":
              if (onActivate) {
                e.preventDefault();
                onActivate(items[currentIndex], currentIndex);
              }
              break;
          }
          if (nextIndex !== currentIndex && items[nextIndex]) {
            items[nextIndex].focus();
          }
        };
        container.addEventListener("keydown", handleKeyDown);
        return {
          destroy() {
            container.removeEventListener("keydown", handleKeyDown);
          }
        };
      },
      /**
       * Global keyboard shortcuts
       */
      addShortcut(key, callback, options = {}) {
        const {
          ctrl = false,
          alt = false,
          shift = false,
          meta = false,
          preventDefault = true
        } = options;
        const handleKeyDown = (e) => {
          if (e.key === key && e.ctrlKey === ctrl && e.altKey === alt && e.shiftKey === shift && e.metaKey === meta) {
            if (preventDefault) {
              e.preventDefault();
            }
            callback(e);
          }
        };
        document.addEventListener("keydown", handleKeyDown);
        return {
          remove() {
            document.removeEventListener("keydown", handleKeyDown);
          }
        };
      }
    };
    aria = {
      /**
       * Update ARIA attributes
       */
      set(element, attributes) {
        Object.entries(attributes).forEach(([key, value]) => {
          const ariaKey = key.startsWith("aria-") ? key : `aria-${key}`;
          element.setAttribute(ariaKey, value);
        });
      },
      /**
       * Toggle ARIA state
       */
      toggle(element, attribute, value1 = "true", value2 = "false") {
        const ariaKey = attribute.startsWith("aria-") ? attribute : `aria-${attribute}`;
        const currentValue = element.getAttribute(ariaKey);
        const newValue = currentValue === value1 ? value2 : value1;
        element.setAttribute(ariaKey, newValue);
        return newValue;
      },
      /**
       * Setup expandable content ARIA
       */
      setupExpandable(trigger, content, expanded = false) {
        const contentId = content.id || `expandable-${Date.now()}`;
        content.id = contentId;
        trigger.setAttribute("aria-expanded", String(expanded));
        trigger.setAttribute("aria-controls", contentId);
        content.setAttribute("aria-hidden", String(!expanded));
        return {
          expand() {
            trigger.setAttribute("aria-expanded", "true");
            content.setAttribute("aria-hidden", "false");
          },
          collapse() {
            trigger.setAttribute("aria-expanded", "false");
            content.setAttribute("aria-hidden", "true");
          },
          toggle() {
            const isExpanded = trigger.getAttribute("aria-expanded") === "true";
            return isExpanded ? this.collapse() : this.expand();
          }
        };
      }
    };
    motion = {
      /**
       * Check if user prefers reduced motion
       */
      prefersReduced() {
        return window.matchMedia("(prefers-reduced-motion: reduce)").matches;
      },
      /**
       * Respect reduced motion preference
       */
      respectPreference(normalAnimation, reducedAnimation = null) {
        return this.prefersReduced() ? reducedAnimation || (() => {
        }) : normalAnimation;
      }
    };
    contrast = {
      /**
       * Check if user prefers high contrast
       */
      prefersHigh() {
        return window.matchMedia("(prefers-contrast: high)").matches;
      },
      /**
       * Get luminance of a color
       */
      getLuminance(r, g, b) {
        const [rs, gs, bs] = [r, g, b].map((c) => {
          c = c / 255;
          return c <= 0.03928 ? c / 12.92 : Math.pow((c + 0.055) / 1.055, 2.4);
        });
        return 0.2126 * rs + 0.7152 * gs + 0.0722 * bs;
      },
      /**
       * Calculate contrast ratio between two colors
       */
      getContrastRatio(color1, color2) {
        const l1 = this.getLuminance(...color1);
        const l2 = this.getLuminance(...color2);
        const lighter = Math.max(l1, l2);
        const darker = Math.min(l1, l2);
        return (lighter + 0.05) / (darker + 0.05);
      }
    };
    if (typeof window !== "undefined") {
      window.announceToScreenReader = announceToScreenReader;
    }
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/utils/CopyManager.js
var CopyManager_exports = {};
__export(CopyManager_exports, {
  CopyManager: () => CopyManager,
  copyFromElement: () => copyFromElement,
  copyText: () => copyText,
  setupCopyButtons: () => setupCopyButtons
});
var CopyManager, copyText, copyFromElement, setupCopyButtons;
var init_CopyManager = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/utils/CopyManager.js"() {
    init_dom();
    init_accessibility();
    CopyManager = class {
      /**
       * Copy text with unified feedback and error handling
       * @param {string|HTMLElement} source - Text or element to copy from
       * @param {CopyOptions} options - Copy configuration
       * @returns {Promise<CopyResult>}
       */
      static async copy(source, options = {}) {
        const config = { ...this.defaultOptions, ...options };
        try {
          const text = await this.extractText(source, config);
          if (!text) {
            throw new Error("No text found to copy");
          }
          const success = await copyToClipboard(text);
          if (!success) {
            throw new Error("Copy operation failed");
          }
          await this.handleSuccess(text, config);
          return {
            success: true,
            text
          };
        } catch (error) {
          await this.handleError(error, config);
          return {
            success: false,
            text: "",
            error
          };
        }
      }
      /**
       * Extract text content from various source types
       * @param {string|HTMLElement} source - Source to extract from
       * @param {CopyOptions} options - Configuration options
       * @returns {Promise<string>}
       */
      static async extractText(source, options) {
        if (typeof source === "string") {
          return options.preprocessText ? options.preprocessText(source) : source;
        }
        if (source instanceof HTMLElement) {
          return this.extractFromElement(source, options);
        }
        if (typeof source === "string" && source.startsWith(".") || source.startsWith("#")) {
          const element = document.querySelector(source);
          if (element) {
            return this.extractFromElement(element, options);
          }
        }
        throw new Error("Invalid copy source");
      }
      /**
       * Extract text from HTML elements with smart detection
       * @param {HTMLElement} element - Element to extract from
       * @param {CopyOptions} options - Configuration options
       * @returns {string}
       */
      static extractFromElement(element, options) {
        let text = "";
        if (element.hasAttribute("data-copy-text")) {
          text = element.getAttribute("data-copy-text");
        } else if (element.hasAttribute("data-copy-target") || element.hasAttribute("data-clipboard-target")) {
          const targetSelector = element.getAttribute("data-copy-target") || element.getAttribute("data-clipboard-target");
          const targetElement = document.querySelector(targetSelector);
          if (targetElement) {
            text = this.getElementText(targetElement);
          }
        } else {
          text = this.getElementText(element) || this.findCodeBlock(element);
        }
        text = this.cleanText(text);
        return options.preprocessText ? options.preprocessText(text) : text;
      }
      /**
       * Get clean text content from element
       * @param {HTMLElement} element - Element to get text from
       * @returns {string}
       */
      static getElementText(element) {
        if (!element) return "";
        if (element.tagName === "CODE" || element.tagName === "PRE") {
          return element.textContent || element.innerText || "";
        }
        return element.textContent || element.innerText || "";
      }
      /**
       * Find associated code block for copy buttons
       * @param {HTMLElement} button - Button element
       * @returns {string}
       */
      static findCodeBlock(button) {
        var _a, _b;
        let codeElement = (_a = button.parentElement) == null ? void 0 : _a.querySelector("code");
        if (codeElement) {
          return this.getElementText(codeElement);
        }
        let sibling = button.previousElementSibling;
        while (sibling) {
          codeElement = sibling.querySelector("code") || (sibling.tagName === "CODE" ? sibling : null);
          if (codeElement) {
            return this.getElementText(codeElement);
          }
          sibling = sibling.previousElementSibling;
        }
        const preElement = button.closest("pre") || ((_b = button.parentElement) == null ? void 0 : _b.querySelector("pre"));
        if (preElement) {
          codeElement = preElement.querySelector("code");
          if (codeElement) {
            return this.getElementText(codeElement);
          }
        }
        return "";
      }
      /**
       * Clean text content (remove line numbers, prompts, etc.)
       * @param {string} text - Raw text
       * @returns {string}
       */
      static cleanText(text) {
        if (!text) return "";
        return text.replace(/^\d+\s+/gm, "").replace(/^\$\s+/gm, "").replace(/^>\s+/gm, "").replace(/^#\s+/gm, "").trim();
      }
      /**
       * Handle successful copy with visual and audio feedback
       * @param {string} text - The copied text
       * @param {CopyOptions} options - Configuration options
       */
      static async handleSuccess(text, options) {
        if (options.button) {
          await this.showButtonSuccess(options.button, options);
        }
        if (options.announce) {
          const message = options.announceMessage || `${this.defaultOptions.announceMessage}: ${text.substring(0, 50)}${text.length > 50 ? "..." : ""}`;
          announceToScreenReader(message);
        }
        if (window.toast) {
          window.toast(options.successMessage, "success", options.feedbackDuration);
        }
        if (options.analytics) {
          this.trackCopyEvent("success", text, options.analytics);
        }
        if (options.onSuccess) {
          options.onSuccess(text);
        }
      }
      /**
       * Handle copy error with appropriate feedback
       * @param {Error} error - The error that occurred
       * @param {CopyOptions} options - Configuration options
       */
      static async handleError(error, options) {
        console.error("Copy failed:", error);
        if (options.button) {
          await this.showButtonError(options.button, options);
        }
        if (options.announce) {
          announceToScreenReader("Failed to copy to clipboard");
        }
        if (window.toast) {
          window.toast(options.errorMessage, "error", options.feedbackDuration);
        }
        if (options.analytics) {
          this.trackCopyEvent("error", "", { ...options.analytics, error: error.message });
        }
        if (options.onError) {
          options.onError(error);
        }
      }
      /**
       * Show success feedback on button
       * @param {HTMLElement} button - Button element
       * @param {CopyOptions} options - Configuration options
       */
      static async showButtonSuccess(button, options) {
        const originalContent = button.innerHTML;
        const originalClasses = button.className;
        button.textContent = options.successMessage;
        button.classList.add("copy-button--success", "bg-green-600");
        button.classList.remove("copy-button--error", "bg-red-600", "bg-zinc-600");
        setTimeout(() => {
          button.innerHTML = originalContent;
          button.className = originalClasses;
        }, options.feedbackDuration);
      }
      /**
       * Show error feedback on button
       * @param {HTMLElement} button - Button element
       * @param {CopyOptions} options - Configuration options
       */
      static async showButtonError(button, options) {
        const originalContent = button.innerHTML;
        const originalClasses = button.className;
        button.textContent = options.errorMessage;
        button.classList.add("copy-button--error", "bg-red-600");
        button.classList.remove("copy-button--success", "bg-green-600", "bg-zinc-600");
        setTimeout(() => {
          button.innerHTML = originalContent;
          button.className = originalClasses;
        }, options.feedbackDuration);
      }
      /**
       * Track copy events for analytics
       * @param {string} status - 'success' or 'error'
       * @param {string} text - Copied text
       * @param {Object} analytics - Analytics data
       */
      static trackCopyEvent(status, text, analytics) {
        const event = {
          type: "copy",
          status,
          textLength: text.length,
          timestamp: (/* @__PURE__ */ new Date()).toISOString(),
          ...analytics
        };
        if (window.eventBus) {
          window.eventBus.emit("copy:tracked", event);
        }
        if (window.MiloDebug) {
          console.log(`\u{1F4CB} Copy ${status}:`, event);
        }
      }
      /**
       * Copy from code blocks with enhanced detection
       * @param {HTMLElement} button - Copy button
       * @param {CopyOptions} options - Configuration options
       * @returns {Promise<CopyResult>}
       */
      static async copyCode(button, options = {}) {
        const codeOptions = {
          ...options,
          preprocessText: (text) => this.cleanCodeText(text),
          analytics: {
            type: "code",
            language: this.detectLanguage(button),
            ...options.analytics
          }
        };
        return this.copy(button, codeOptions);
      }
      /**
       * Enhanced code text cleaning
       * @param {string} text - Raw code text
       * @returns {string}
       */
      static cleanCodeText(text) {
        return this.cleanText(text).replace(/^\/\/.*$/gm, "").replace(/^\s*[\r\n]/gm, "").trim();
      }
      /**
       * Detect programming language from context
       * @param {HTMLElement} element - Element context
       * @returns {string}
       */
      static detectLanguage(element) {
        var _a, _b;
        const codeBlock = ((_a = element.closest("pre")) == null ? void 0 : _a.querySelector("code")) || ((_b = element.parentElement) == null ? void 0 : _b.querySelector("code"));
        if (codeBlock) {
          const className = codeBlock.className;
          const langMatch = className.match(/language-(\w+)/);
          if (langMatch) {
            return langMatch[1];
          }
        }
        return "unknown";
      }
      /**
       * Bulk copy setup for multiple elements
       * @param {string} selector - CSS selector for copy buttons
       * @param {CopyOptions} options - Default options for all buttons
       */
      static setupCopyButtons(selector = "[data-copy], .copy-btn, .copy-code", options = {}) {
        const buttons = document.querySelectorAll(selector);
        buttons.forEach((button) => {
          if (button.hasAttribute("data-copy-manager")) {
            return;
          }
          button.setAttribute("data-copy-manager", "true");
          button.addEventListener("click", async (e) => {
            e.preventDefault();
            const buttonOptions = {
              ...options,
              button,
              // Extract button-specific options from data attributes
              successMessage: button.getAttribute("data-success-message") || options.successMessage,
              errorMessage: button.getAttribute("data-error-message") || options.errorMessage,
              announceMessage: button.getAttribute("data-announce-message") || options.announceMessage
            };
            await this.copyCode(button, buttonOptions);
          });
        });
        console.log(`\u{1F4CB} CopyManager: Setup ${buttons.length} copy buttons`);
        return buttons.length;
      }
    };
    __publicField(CopyManager, "defaultOptions", {
      successMessage: "\u2705 Copied!",
      errorMessage: "\u274C Failed",
      feedbackDuration: 2e3,
      announce: true,
      announceMessage: "Copied to clipboard"
    });
    copyText = (text, options) => CopyManager.copy(text, options);
    copyFromElement = (element, options) => CopyManager.copy(element, options);
    setupCopyButtons = (selector, options) => CopyManager.setupCopyButtons(selector, options);
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/utils/LoadingStateManager.js
var LoadingStateManager_exports = {};
__export(LoadingStateManager_exports, {
  LoadingStateManager: () => LoadingStateManager,
  hideLoading: () => hideLoading,
  showLoading: () => showLoading,
  showSkeleton: () => showSkeleton,
  showSpinner: () => showSpinner,
  updateProgress: () => updateProgress
});
var LoadingStateManager, showLoading, hideLoading, showSpinner, showSkeleton, updateProgress;
var init_LoadingStateManager = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/utils/LoadingStateManager.js"() {
    init_accessibility();
    init_AnimationBridge();
    init_sanitize();
    LoadingStateManager = class {
      /**
       * Show loading state in container
       * @param {HTMLElement|string} container - Container element or selector
       * @param {LoadingOptions} options - Loading configuration
       * @returns {string} - Unique loader ID for later removal
       */
      static show(container, options = {}) {
        const element = typeof container === "string" ? document.querySelector(container) : container;
        if (!element) {
          console.warn("LoadingStateManager: Container not found");
          return null;
        }
        const config = {
          type: "spinner",
          message: "Loading...",
          size: "medium",
          variant: "primary",
          overlay: false,
          blocking: false,
          animate: !motion.prefersReduced(),
          ariaLabel: "Loading content",
          ...options
        };
        const loaderId = `loader-${++this.loaderId}`;
        const loaderElement = this.createLoader(config, loaderId);
        const originalContent = element.innerHTML;
        const originalAriaAttributes = this.getAriaAttributes(element);
        if (config.overlay) {
          this.showAsOverlay(element, loaderElement, config);
        } else {
          element.innerHTML = "";
          element.appendChild(loaderElement);
        }
        element.setAttribute("aria-busy", "true");
        element.setAttribute("aria-live", "polite");
        if (config.ariaLabel) {
          element.setAttribute("aria-label", config.ariaLabel);
        }
        this.activeLoaders.set(loaderId, {
          element,
          loaderElement,
          originalContent,
          originalAriaAttributes,
          config
        });
        this.trackLoadingEvent("show", config);
        return loaderId;
      }
      /**
       * Hide loading state and restore content
       * @param {string} loaderId - Loader ID returned from show()
       * @param {HTMLElement} [newContent] - Optional new content to replace with
       */
      static hide(loaderId, newContent = null) {
        const loader = this.activeLoaders.get(loaderId);
        if (!loader) {
          return;
        }
        const { element, originalContent, originalAriaAttributes, config } = loader;
        if (config.animate && !motion.prefersReduced()) {
          this.animateContentRestore(element, originalContent, newContent);
        } else {
          if (newContent) {
            if (typeof newContent === "string") {
              element.innerHTML = sanitizeHTML(newContent);
            } else {
              element.innerHTML = "";
              element.appendChild(newContent);
            }
          } else {
            element.innerHTML = originalContent;
          }
        }
        element.removeAttribute("aria-busy");
        element.removeAttribute("aria-live");
        this.restoreAriaAttributes(element, originalAriaAttributes);
        this.activeLoaders.delete(loaderId);
        this.trackLoadingEvent("hide", config);
      }
      /**
       * Update loading progress for progress-type loaders
       * @param {string} loaderId - Loader ID
       * @param {number} progress - Progress percentage (0-100)
       * @param {string} [message] - Optional message update
       */
      static updateProgress(loaderId, progress, message = null) {
        const loader = this.activeLoaders.get(loaderId);
        if (!loader || loader.config.type !== "progress") {
          return;
        }
        const progressBar = loader.loaderElement.querySelector(".loading-progress-bar");
        const progressText = loader.loaderElement.querySelector(".loading-progress-text");
        const messageElement = loader.loaderElement.querySelector(".loading-message");
        if (progressBar) {
          progressBar.style.width = `${Math.max(0, Math.min(100, progress))}%`;
          progressBar.setAttribute("aria-valuenow", progress);
        }
        if (progressText) {
          progressText.textContent = `${Math.round(progress)}%`;
        }
        if (message && messageElement) {
          messageElement.textContent = message;
        }
        loader.config.progress = progress;
      }
      /**
       * Create loader element based on configuration
       * @param {LoadingOptions} config - Loading configuration
       * @param {string} loaderId - Unique loader ID
       * @returns {HTMLElement}
       */
      static createLoader(config, loaderId) {
        const wrapper = document.createElement("div");
        wrapper.className = `loading-state loading-state--${config.type} loading-state--${config.size}`;
        wrapper.setAttribute("data-loader-id", loaderId);
        wrapper.setAttribute("role", "status");
        wrapper.setAttribute("aria-label", config.ariaLabel);
        switch (config.type) {
          case "spinner":
            wrapper.appendChild(this.createSpinner(config));
            break;
          case "skeleton":
            wrapper.appendChild(this.createSkeleton(config));
            break;
          case "progress":
            wrapper.appendChild(this.createProgress(config));
            break;
          case "dots":
            wrapper.appendChild(this.createDots(config));
            break;
          default:
            wrapper.appendChild(this.createSpinner(config));
        }
        return wrapper;
      }
      /**
       * Create spinner loading indicator
       * @param {LoadingOptions} config - Configuration
       * @returns {HTMLElement}
       */
      static createSpinner(config) {
        const container = document.createElement("div");
        container.className = `loading-spinner loading-spinner--${config.variant}`;
        const sizes = {
          small: "1rem",
          medium: "2rem",
          large: "3rem"
        };
        const spinner = document.createElement("div");
        spinner.className = "loading-spinner__circle";
        spinner.style.cssText = `
      width: ${sizes[config.size]};
      height: ${sizes[config.size]};
      border: 2px solid var(--color-border-light, #e5e7eb);
      border-top: 2px solid var(--color-brand, #3b82f6);
      border-radius: 50%;
      ${config.animate ? "animation: loading-spin 1s linear infinite;" : ""}
    `;
        container.appendChild(spinner);
        if (config.message) {
          const message = document.createElement("div");
          message.className = "loading-message";
          message.textContent = config.message;
          message.style.cssText = `
        margin-top: 0.75rem;
        font-size: 0.875rem;
        color: var(--color-text-secondary, #6b7280);
        text-align: center;
      `;
          container.appendChild(message);
        }
        return container;
      }
      /**
       * Create skeleton loading screen
       * @param {LoadingOptions} config - Configuration
       * @returns {HTMLElement}
       */
      static createSkeleton(config) {
        const container = document.createElement("div");
        container.className = "loading-skeleton";
        container.setAttribute("aria-label", "Loading content structure");
        const skeleton = config.skeleton || {};
        if (skeleton.template) {
          return this.createSkeletonTemplate(skeleton.template, config);
        }
        if (skeleton.avatar) {
          const avatar = document.createElement("div");
          avatar.className = "skeleton-avatar";
          avatar.style.cssText = `
        width: 3rem;
        height: 3rem;
        border-radius: 50%;
        background: var(--skeleton-color, #e5e7eb);
        margin-bottom: 1rem;
        ${config.animate ? "animation: skeleton-pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;" : ""}
      `;
          container.appendChild(avatar);
        }
        if (skeleton.title) {
          const title = document.createElement("div");
          title.className = "skeleton-title";
          title.style.cssText = `
        height: 1.5rem;
        background: var(--skeleton-color, #e5e7eb);
        border-radius: 0.25rem;
        margin-bottom: 0.75rem;
        width: 75%;
        ${config.animate ? "animation: skeleton-pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;" : ""}
      `;
          container.appendChild(title);
        }
        const lines = skeleton.lines || 3;
        const widths = skeleton.widths || ["100%", "85%", "60%"];
        for (let i = 0; i < lines; i++) {
          const line = document.createElement("div");
          line.className = "skeleton-line";
          line.style.cssText = `
        height: 1rem;
        background: var(--skeleton-color, #e5e7eb);
        border-radius: 0.25rem;
        margin-bottom: 0.5rem;
        width: ${widths[i] || "90%"};
        ${config.animate ? `animation: skeleton-pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;` : ""}
        animation-delay: ${i * 0.1}s;
      `;
          container.appendChild(line);
        }
        return container;
      }
      /**
       * Create predefined skeleton templates
       * @param {string} template - Template name
       * @param {LoadingOptions} config - Configuration
       * @returns {HTMLElement}
       */
      static createSkeletonTemplate(template, config) {
        const container = document.createElement("div");
        container.className = `loading-skeleton loading-skeleton--${template}`;
        switch (template) {
          case "article":
            container.innerHTML = `
          <div class="skeleton-title skeleton-element"></div>
          <div class="skeleton-meta skeleton-element"></div>
          <div class="skeleton-line skeleton-element" style="width: 100%"></div>
          <div class="skeleton-line skeleton-element" style="width: 85%"></div>
          <div class="skeleton-line skeleton-element" style="width: 60%"></div>
          <div class="skeleton-heading skeleton-element" style="width: 40%; margin-top: 1.5rem;"></div>
          <div class="skeleton-line skeleton-element" style="width: 90%"></div>
          <div class="skeleton-line skeleton-element" style="width: 75%"></div>
        `;
            break;
          case "card":
            container.innerHTML = `
          <div class="skeleton-image skeleton-element" style="height: 8rem; width: 100%; margin-bottom: 1rem;"></div>
          <div class="skeleton-title skeleton-element" style="width: 80%"></div>
          <div class="skeleton-line skeleton-element" style="width: 100%"></div>
          <div class="skeleton-line skeleton-element" style="width: 70%"></div>
        `;
            break;
          case "list":
            for (let i = 0; i < 5; i++) {
              const item = document.createElement("div");
              item.className = "skeleton-list-item";
              item.style.cssText = "display: flex; align-items: center; margin-bottom: 1rem;";
              item.innerHTML = `
            <div class="skeleton-avatar skeleton-element" style="width: 2.5rem; height: 2.5rem; border-radius: 50%; margin-right: 0.75rem;"></div>
            <div style="flex: 1;">
              <div class="skeleton-line skeleton-element" style="width: 60%; margin-bottom: 0.5rem;"></div>
              <div class="skeleton-line skeleton-element" style="width: 40%;"></div>
            </div>
          `;
              container.appendChild(item);
            }
            break;
        }
        if (config.animate) {
          container.querySelectorAll(".skeleton-element").forEach((el, index) => {
            el.style.animation = `skeleton-pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite`;
            el.style.animationDelay = `${index * 0.1}s`;
          });
        }
        return container;
      }
      /**
       * Create progress indicator
       * @param {LoadingOptions} config - Configuration
       * @returns {HTMLElement}
       */
      static createProgress(config) {
        const container = document.createElement("div");
        container.className = "loading-progress";
        const progress = config.progress || 0;
        container.innerHTML = `
      <div class="loading-progress-track" style="
        width: 100%;
        height: 0.5rem;
        background-color: var(--color-border-light, #e5e7eb);
        border-radius: 0.25rem;
        overflow: hidden;
      ">
        <div class="loading-progress-bar" style="
          height: 100%;
          background-color: var(--color-brand, #3b82f6);
          width: ${progress}%;
          transition: width var(--timing-medium) var(--easing-standard);
          ${config.animate ? "animation: progress-shimmer 2s infinite;" : ""}
        " role="progressbar" aria-valuenow="${progress}" aria-valuemin="0" aria-valuemax="100"></div>
      </div>
      ${config.message ? `<div class="loading-message" style="margin-top: 0.75rem; text-align: center; font-size: 0.875rem;">${sanitizeHTML(config.message)}</div>` : ""}
      <div class="loading-progress-text" style="margin-top: 0.5rem; text-align: center; font-size: 0.75rem; color: var(--color-text-secondary);">${Math.round(progress)}%</div>
    `;
        return container;
      }
      /**
       * Create animated dots indicator
       * @param {LoadingOptions} config - Configuration
       * @returns {HTMLElement}
       */
      static createDots(config) {
        const container = document.createElement("div");
        container.className = "loading-dots";
        container.style.cssText = "display: flex; align-items: center; justify-content: center; gap: 0.25rem;";
        for (let i = 0; i < 3; i++) {
          const dot = document.createElement("div");
          dot.className = "loading-dot";
          dot.style.cssText = `
        width: 0.5rem;
        height: 0.5rem;
        background-color: var(--color-brand, #3b82f6);
        border-radius: 50%;
        ${config.animate ? `animation: dot-bounce 1.4s infinite ease-in-out; animation-delay: ${i * 0.16}s;` : ""}
      `;
          container.appendChild(dot);
        }
        if (config.message) {
          const message = document.createElement("div");
          message.className = "loading-message";
          message.textContent = config.message;
          message.style.cssText = "margin-left: 0.75rem; font-size: 0.875rem;";
          container.appendChild(message);
        }
        return container;
      }
      /**
       * Show loader as overlay
       * @param {HTMLElement} element - Target element
       * @param {HTMLElement} loaderElement - Loader to show
       * @param {LoadingOptions} config - Configuration
       */
      static showAsOverlay(element, loaderElement, config) {
        const overlay = document.createElement("div");
        overlay.className = "loading-overlay";
        overlay.style.cssText = `
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(255, 255, 255, 0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      ${config.blocking ? "pointer-events: auto;" : "pointer-events: none;"}
    `;
        overlay.appendChild(loaderElement);
        const position = getComputedStyle(element).position;
        if (position === "static") {
          element.style.position = "relative";
        }
        element.appendChild(overlay);
      }
      /**
       * Animate content restoration
       * @param {HTMLElement} element - Target element
       * @param {string} originalContent - Original HTML content
       * @param {HTMLElement|string} [newContent] - New content to show
       */
      static animateContentRestore(element, originalContent, newContent = null) {
        const content = newContent || originalContent;
        element.style.opacity = "0";
        const duration = animationBridge.getTiming("fast");
        setTimeout(() => {
          if (typeof content === "string") {
            element.innerHTML = sanitizeHTML(content);
          } else {
            element.innerHTML = "";
            element.appendChild(content);
          }
          element.style.opacity = "1";
          setTimeout(() => {
            element.style.transition = "";
          }, 200);
        }, 200);
      }
      /**
       * Get current ARIA attributes from element
       * @param {HTMLElement} element - Target element
       * @returns {Object}
       */
      static getAriaAttributes(element) {
        const attributes = {};
        for (const attr of element.attributes) {
          if (attr.name.startsWith("aria-")) {
            attributes[attr.name] = attr.value;
          }
        }
        return attributes;
      }
      /**
       * Restore ARIA attributes to element
       * @param {HTMLElement} element - Target element  
       * @param {Object} attributes - Attributes to restore
       */
      static restoreAriaAttributes(element, attributes) {
        for (const [name, value] of Object.entries(attributes)) {
          element.setAttribute(name, value);
        }
      }
      /**
       * Track loading events for analytics
       * @param {string} action - Action performed
       * @param {LoadingOptions} config - Configuration used
       */
      static trackLoadingEvent(action, config) {
        if (window.eventBus) {
          window.eventBus.emit("loading:tracked", {
            action,
            type: config.type,
            timestamp: (/* @__PURE__ */ new Date()).toISOString()
          });
        }
      }
      /**
       * Hide all active loaders
       */
      static hideAll() {
        for (const loaderId of this.activeLoaders.keys()) {
          this.hide(loaderId);
        }
      }
      /**
       * Get active loader count
       * @returns {number}
       */
      static getActiveCount() {
        return this.activeLoaders.size;
      }
      /**
       * Initialize CSS animations for loading states
       */
      static initializeStyles() {
        if (document.getElementById("loading-state-styles")) {
          return;
        }
        const styles = document.createElement("style");
        styles.id = "loading-state-styles";
        styles.textContent = `
      @keyframes loading-spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }

      @keyframes skeleton-pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
      }

      @keyframes progress-shimmer {
        0% { background-position: -200px 0; }
        100% { background-position: calc(200px + 100%) 0; }
      }

      @keyframes dot-bounce {
        0%, 80%, 100% { transform: scale(0); }
        40% { transform: scale(1); }
      }

      .loading-state {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 2rem;
        text-align: center;
      }

      .loading-skeleton .skeleton-element {
        background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
        background-size: 200% 100%;
      }

      @media (prefers-reduced-motion: reduce) {
        .loading-state *,
        .skeleton-element {
          animation: none !important;
        }
      }
    `;
        document.head.appendChild(styles);
      }
    };
    __publicField(LoadingStateManager, "activeLoaders", /* @__PURE__ */ new Map());
    __publicField(LoadingStateManager, "loaderId", 0);
    LoadingStateManager.initializeStyles();
    showLoading = (container, options) => LoadingStateManager.show(container, options);
    hideLoading = (loaderId, newContent) => LoadingStateManager.hide(loaderId, newContent);
    showSpinner = (container, message) => LoadingStateManager.show(container, { type: "spinner", message });
    showSkeleton = (container, template) => LoadingStateManager.show(container, { type: "skeleton", skeleton: { template } });
    updateProgress = (loaderId, progress, message) => LoadingStateManager.updateProgress(loaderId, progress, message);
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/utils/ErrorHandler.js
var ErrorHandler_exports = {};
__export(ErrorHandler_exports, {
  ErrorHandler: () => ErrorHandler,
  createErrorBoundary: () => createErrorBoundary,
  handleError: () => handleError,
  handleFetchError: () => handleFetchError,
  handleNetworkError: () => handleNetworkError,
  handleValidationError: () => handleValidationError
});
var _ErrorHandler, ErrorHandler, handleError, handleNetworkError, handleValidationError, createErrorBoundary, handleFetchError;
var init_ErrorHandler = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/utils/ErrorHandler.js"() {
    init_accessibility();
    init_LoadingStateManager();
    _ErrorHandler = class _ErrorHandler {
      /**
       * Handle an error with unified processing and user feedback
       * @param {Error|string} error - Error to handle
       * @param {ErrorOptions} options - Error handling options
       * @returns {Promise<ErrorResult>}
       */
      static async handle(error, options = {}) {
        const config = {
          userMessage: null,
          context: "unknown",
          silent: false,
          recoverable: false,
          onRetry: null,
          maxRetries: 3,
          metadata: {},
          loaderId: null,
          announce: true,
          ...options
        };
        const errorObj = error instanceof Error ? error : new Error(error);
        const errorId = `error-${Date.now()}-${Math.random().toString(36).substr(2, 5)}`;
        const errorType = this.classifyError(errorObj);
        const userMessage = config.userMessage || this.getUserMessage(errorType, errorObj) || this.DefaultMessages[errorType];
        const errorResult = {
          id: errorId,
          type: errorType,
          message: userMessage,
          originalError: errorObj,
          handled: false,
          metadata: {
            context: config.context,
            timestamp: (/* @__PURE__ */ new Date()).toISOString(),
            userAgent: navigator.userAgent,
            url: window.location.href,
            ...config.metadata
          }
        };
        this.logError(errorResult, config);
        if (config.loaderId) {
          hideLoading(config.loaderId);
        }
        if (!config.silent) {
          await this.showUserFeedback(errorResult, config);
        }
        if (config.recoverable && config.onRetry) {
          await this.handleRetry(errorResult, config);
        }
        this.errorLog.push(errorResult);
        this.emitErrorEvent(errorResult, config);
        errorResult.handled = true;
        return errorResult;
      }
      /**
       * Classify error into standard types
       * @param {Error} error - Error to classify
       * @returns {string}
       */
      static classifyError(error) {
        const message = error.message.toLowerCase();
        const name = error.name.toLowerCase();
        if (name === "aborterror" || message.includes("abort")) {
          return this.ErrorTypes.ABORT;
        }
        if (name === "timeouterror" || message.includes("timeout")) {
          return this.ErrorTypes.TIMEOUT;
        }
        if (message.includes("network") || message.includes("fetch") || message.includes("connection") || !navigator.onLine) {
          return this.ErrorTypes.NETWORK;
        }
        if (error.status) {
          if (error.status === 401) return this.ErrorTypes.AUTHENTICATION;
          if (error.status === 403) return this.ErrorTypes.PERMISSION;
          if (error.status === 404) return this.ErrorTypes.NOT_FOUND;
          if (error.status >= 400 && error.status < 500) return this.ErrorTypes.CLIENT;
          if (error.status >= 500) return this.ErrorTypes.SERVER;
        }
        if (name.includes("validation") || message.includes("invalid") || message.includes("required") || message.includes("format")) {
          return this.ErrorTypes.VALIDATION;
        }
        return this.ErrorTypes.UNKNOWN;
      }
      /**
       * Get context-specific user message
       * @param {string} errorType - Classified error type
       * @param {Error} error - Original error
       * @returns {string|null}
       */
      static getUserMessage(errorType, error) {
        if (errorType === this.ErrorTypes.NETWORK && !navigator.onLine) {
          return "You appear to be offline. Please check your internet connection.";
        }
        if (errorType === this.ErrorTypes.TIMEOUT) {
          return "The request is taking longer than expected. Please try again.";
        }
        if (errorType === this.ErrorTypes.SERVER) {
          return "Our servers are experiencing issues. Please try again in a few minutes.";
        }
        return null;
      }
      /**
       * Log error for debugging and analytics
       * @param {ErrorResult} errorResult - Error result object
       * @param {ErrorOptions} config - Configuration
       */
      static logError(errorResult, config) {
        const logLevel = this.getLogLevel(errorResult.type);
        const logMessage = `[${errorResult.type.toUpperCase()}] ${config.context}: ${errorResult.originalError.message}`;
        switch (logLevel) {
          case "error":
            console.error(logMessage, {
              errorId: errorResult.id,
              error: errorResult.originalError,
              metadata: errorResult.metadata
            });
            break;
          case "warn":
            console.warn(logMessage, errorResult.metadata);
            break;
          case "info":
            console.info(logMessage, errorResult.metadata);
            break;
        }
        if (window.errorLogger) {
          window.errorLogger.log(errorResult);
        }
      }
      /**
       * Get appropriate log level for error type
       * @param {string} errorType - Error type
       * @returns {string}
       */
      static getLogLevel(errorType) {
        switch (errorType) {
          case this.ErrorTypes.SERVER:
          case this.ErrorTypes.UNKNOWN:
            return "error";
          case this.ErrorTypes.NETWORK:
          case this.ErrorTypes.TIMEOUT:
            return "warn";
          case this.ErrorTypes.VALIDATION:
          case this.ErrorTypes.ABORT:
            return "info";
          default:
            return "warn";
        }
      }
      /**
       * Show user feedback for error
       * @param {ErrorResult} errorResult - Error result
       * @param {ErrorOptions} config - Configuration
       */
      static async showUserFeedback(errorResult, config) {
        if (config.announce) {
          announceToScreenReader(`Error: ${errorResult.message}`);
        }
        if (window.toast) {
          const duration = this.getNotificationDuration(errorResult.type);
          window.toast(errorResult.message, "error", duration);
        }
        if (window.MiloDebug) {
          console.group(`\u{1F6A8} Error in ${config.context}`);
          console.error("Message:", errorResult.message);
          console.error("Type:", errorResult.type);
          console.error("Original:", errorResult.originalError);
          console.error("Metadata:", errorResult.metadata);
          console.groupEnd();
        }
      }
      /**
       * Get notification duration based on error severity
       * @param {string} errorType - Error type
       * @returns {number}
       */
      static getNotificationDuration(errorType) {
        switch (errorType) {
          case this.ErrorTypes.VALIDATION:
          case this.ErrorTypes.ABORT:
            return 3e3;
          // Short duration for user-caused errors
          case this.ErrorTypes.NETWORK:
          case this.ErrorTypes.TIMEOUT:
            return 5e3;
          // Medium duration for network issues
          case this.ErrorTypes.SERVER:
          case this.ErrorTypes.UNKNOWN:
            return 7e3;
          // Longer duration for serious errors
          default:
            return 4e3;
        }
      }
      /**
       * Handle retry logic for recoverable errors
       * @param {ErrorResult} errorResult - Error result
       * @param {ErrorOptions} config - Configuration
       */
      static async handleRetry(errorResult, config) {
        const retryKey = `${config.context}-${errorResult.type}`;
        const currentAttempts = this.retryAttempts.get(retryKey) || 0;
        if (currentAttempts >= config.maxRetries) {
          console.warn(`Max retries (${config.maxRetries}) exceeded for ${config.context}`);
          return;
        }
        const baseDelay = 1e3;
        const delay = baseDelay * Math.pow(2, currentAttempts);
        console.log(`Retrying ${config.context} in ${delay}ms (attempt ${currentAttempts + 1}/${config.maxRetries})`);
        this.retryAttempts.set(retryKey, currentAttempts + 1);
        if (window.toast) {
          window.toast(`Retrying... (${currentAttempts + 1}/${config.maxRetries})`, "info", 2e3);
        }
        setTimeout(async () => {
          try {
            await config.onRetry();
            this.retryAttempts.delete(retryKey);
          } catch (retryError) {
            await this.handle(retryError, {
              ...config,
              userMessage: `Retry failed: ${retryError.message}`
            });
          }
        }, delay);
      }
      /**
       * Emit error event for component tracking
       * @param {ErrorResult} errorResult - Error result
       * @param {ErrorOptions} config - Configuration
       */
      static emitErrorEvent(errorResult, config) {
        if (window.eventBus) {
          window.eventBus.emit("error:handled", {
            errorId: errorResult.id,
            type: errorResult.type,
            context: config.context,
            recoverable: config.recoverable,
            timestamp: errorResult.metadata.timestamp
          });
        }
      }
      /**
       * Create error boundary for component error handling
       * @param {Function} operation - Operation to wrap
       * @param {ErrorOptions} options - Error handling options
       * @returns {Function}
       */
      static createErrorBoundary(operation, options = {}) {
        return async (...args) => {
          try {
            return await operation(...args);
          } catch (error) {
            const errorResult = await this.handle(error, options);
            if (options.critical) {
              throw errorResult.originalError;
            }
            return null;
          }
        };
      }
      /**
       * Register global error callback for specific error types
       * @param {string} errorType - Error type to handle
       * @param {Function} callback - Callback function
       */
      static onError(errorType, callback) {
        if (!this.errorCallbacks.has(errorType)) {
          this.errorCallbacks.set(errorType, []);
        }
        this.errorCallbacks.get(errorType).push(callback);
      }
      /**
       * Handle fetch errors with automatic classification
       * @param {Response} response - Fetch response
       * @param {ErrorOptions} options - Error handling options
       * @returns {Promise<ErrorResult>}
       */
      static async handleFetchError(response, options = {}) {
        let error;
        if (!response.ok) {
          const errorText = await response.text().catch(() => "Unknown error");
          error = new Error(`HTTP ${response.status}: ${errorText}`);
          error.status = response.status;
          error.statusText = response.statusText;
        } else {
          error = new Error("Fetch operation failed");
        }
        return this.handle(error, {
          context: "fetch",
          recoverable: response.status >= 500,
          // Server errors are recoverable
          ...options
        });
      }
      /**
       * Clear error log (for memory management)
       * @param {number} [maxAge] - Maximum age in milliseconds
       */
      static clearErrorLog(maxAge = 24 * 60 * 60 * 1e3) {
        const cutoff = Date.now() - maxAge;
        this.errorLog = this.errorLog.filter(
          (error) => new Date(error.metadata.timestamp).getTime() > cutoff
        );
      }
      /**
       * Get error statistics
       * @param {number} [timeframe] - Timeframe in milliseconds
       * @returns {Object}
       */
      static getErrorStats(timeframe = 60 * 60 * 1e3) {
        const cutoff = Date.now() - timeframe;
        const recentErrors = this.errorLog.filter(
          (error) => new Date(error.metadata.timestamp).getTime() > cutoff
        );
        const stats = {
          total: recentErrors.length,
          byType: {},
          byContext: {},
          recoverable: 0
        };
        recentErrors.forEach((error) => {
          stats.byType[error.type] = (stats.byType[error.type] || 0) + 1;
          const context = error.metadata.context;
          stats.byContext[context] = (stats.byContext[context] || 0) + 1;
        });
        return stats;
      }
      /**
       * Setup global error handlers
       */
      static setupGlobalHandlers() {
        window.addEventListener("unhandledrejection", (event) => {
          this.handle(event.reason, {
            context: "unhandled-promise",
            userMessage: "An unexpected error occurred.",
            silent: false
          });
        });
        window.addEventListener("error", (event) => {
          this.handle(event.error || new Error(event.message), {
            context: "javascript-error",
            userMessage: "A script error occurred. Please refresh the page.",
            metadata: {
              filename: event.filename,
              lineno: event.lineno,
              colno: event.colno
            }
          });
        });
        console.log("ErrorHandler: Global error handlers initialized");
      }
    };
    __publicField(_ErrorHandler, "errorLog", []);
    __publicField(_ErrorHandler, "errorCallbacks", /* @__PURE__ */ new Map());
    __publicField(_ErrorHandler, "retryAttempts", /* @__PURE__ */ new Map());
    // Error type classifications
    __publicField(_ErrorHandler, "ErrorTypes", {
      NETWORK: "network",
      VALIDATION: "validation",
      AUTHENTICATION: "authentication",
      PERMISSION: "permission",
      NOT_FOUND: "not_found",
      SERVER: "server",
      CLIENT: "client",
      TIMEOUT: "timeout",
      ABORT: "abort",
      UNKNOWN: "unknown"
    });
    // Default error messages
    __publicField(_ErrorHandler, "DefaultMessages", {
      [_ErrorHandler.ErrorTypes.NETWORK]: "Network connection failed. Please check your internet connection and try again.",
      [_ErrorHandler.ErrorTypes.VALIDATION]: "Please check your input and try again.",
      [_ErrorHandler.ErrorTypes.AUTHENTICATION]: "Authentication failed. Please log in and try again.",
      [_ErrorHandler.ErrorTypes.PERMISSION]: "You do not have permission to perform this action.",
      [_ErrorHandler.ErrorTypes.NOT_FOUND]: "The requested resource was not found.",
      [_ErrorHandler.ErrorTypes.SERVER]: "Server error occurred. Please try again later.",
      [_ErrorHandler.ErrorTypes.CLIENT]: "An error occurred in the application.",
      [_ErrorHandler.ErrorTypes.TIMEOUT]: "Request timed out. Please try again.",
      [_ErrorHandler.ErrorTypes.ABORT]: "Operation was cancelled.",
      [_ErrorHandler.ErrorTypes.UNKNOWN]: "An unexpected error occurred. Please try again."
    });
    ErrorHandler = _ErrorHandler;
    handleError = (error, options) => ErrorHandler.handle(error, options);
    handleNetworkError = (error, options = {}) => ErrorHandler.handle(error, { ...options, context: "network" });
    handleValidationError = (error, options = {}) => ErrorHandler.handle(error, { ...options, context: "validation" });
    createErrorBoundary = (operation, options) => ErrorHandler.createErrorBoundary(operation, options);
    handleFetchError = (response, options) => ErrorHandler.handleFetchError(response, options);
    if (typeof window !== "undefined") {
      ErrorHandler.setupGlobalHandlers();
    }
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/utils/NotificationManager.js
var NotificationManager_exports = {};
__export(NotificationManager_exports, {
  NotificationManager: () => NotificationManager,
  dismissAllNotifications: () => dismissAllNotifications,
  dismissNotification: () => dismissNotification,
  showError: () => showError,
  showInfo: () => showInfo,
  showSuccess: () => showSuccess,
  showWarning: () => showWarning,
  toast: () => toast
});
var NotificationManager, toast, showSuccess, showError, showWarning, showInfo, dismissNotification, dismissAllNotifications;
var init_NotificationManager = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/utils/NotificationManager.js"() {
    init_accessibility();
    init_AnimationBridge();
    init_sanitize();
    NotificationManager = class {
      /**
       * Show a notification
       * @param {string} message - Notification message
       * @param {string|NotificationOptions} typeOrOptions - Type string or full options object
       * @param {number} [duration] - Duration override
       * @returns {string} - Notification ID
       */
      static show(message, typeOrOptions = "info", duration = null) {
        const options = typeof typeOrOptions === "string" ? { type: typeOrOptions, duration } : typeOrOptions;
        const config = {
          type: "info",
          duration: null,
          // Will use default based on type
          position: "top-right",
          persistent: false,
          dismissible: true,
          announce: true,
          icon: null,
          action: null,
          onAction: null,
          onDismiss: null,
          metadata: {},
          ...options
        };
        if (config.duration === null) {
          config.duration = config.persistent ? 0 : this.DefaultDurations[config.type];
        }
        if (!this.initialized) {
          this.initialize();
        }
        const notificationId = `notification-${++this.notificationId}`;
        const element = this.createElement(notificationId, message, config);
        const container = this.getContainer(config.position);
        this.manageQueue(config.position);
        this.addToContainer(container, element, config);
        let timeoutId = null;
        if (config.duration > 0) {
          timeoutId = setTimeout(() => {
            this.dismiss(notificationId);
          }, config.duration);
        }
        const notification = {
          id: notificationId,
          element,
          options: config,
          timestamp: Date.now(),
          timeoutId
        };
        this.notifications.set(notificationId, notification);
        if (config.announce) {
          const announcement = `${config.type} notification: ${message}`;
          announceToScreenReader(announcement);
        }
        this.trackNotification("show", notification);
        return notificationId;
      }
      /**
       * Dismiss a notification
       * @param {string} notificationId - Notification ID to dismiss
       * @param {boolean} [userTriggered] - Whether dismissal was user-triggered
       */
      static dismiss(notificationId, userTriggered = false) {
        const notification = this.notifications.get(notificationId);
        if (!notification) {
          return;
        }
        const { element, options, timeoutId } = notification;
        if (timeoutId) {
          clearTimeout(timeoutId);
        }
        if (options.onDismiss) {
          options.onDismiss(notificationId, userTriggered);
        }
        this.animateOut(element, () => {
          if (element.parentNode) {
            element.parentNode.removeChild(element);
          }
          this.cleanupContainer(element.closest(".notification-container"));
        });
        this.notifications.delete(notificationId);
        this.trackNotification("dismiss", notification, { userTriggered });
      }
      /**
       * Dismiss all notifications
       * @param {string} [position] - Specific position to clear (optional)
       */
      static dismissAll(position = null) {
        for (const [id, notification] of this.notifications) {
          if (!position || notification.options.position === position) {
            this.dismiss(id);
          }
        }
      }
      /**
       * Create notification element
       * @param {string} id - Notification ID
       * @param {string} message - Message text
       * @param {NotificationOptions} options - Configuration
       * @returns {HTMLElement}
       */
      static createElement(id, message, options) {
        const notification = document.createElement("div");
        notification.id = id;
        notification.className = `notification notification--${options.type}`;
        notification.setAttribute("role", "alert");
        notification.setAttribute("aria-live", "polite");
        const icon = options.icon || this.DefaultIcons[options.type];
        const actionButton = options.action ? `
      <button class="notification__action" aria-label="${escapeHTML(options.action)}">
        ${escapeHTML(options.action)}
      </button>
    ` : "";
        const dismissButton = options.dismissible ? `
      <button class="notification__dismiss" aria-label="Dismiss notification">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-4 h-4">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    ` : "";
        const contentHTML = `
      <div class="notification__content">
        <div class="notification__icon">${icon}</div>
        <div class="notification__message">${escapeHTML(message)}</div>
      </div>
      <div class="notification__actions">
        ${actionButton}
        ${dismissButton}
      </div>
    `;
        notification.innerHTML = sanitizeHTML(contentHTML);
        this.bindEventHandlers(notification, id, options);
        return notification;
      }
      /**
       * Bind event handlers to notification
       * @param {HTMLElement} element - Notification element
       * @param {string} id - Notification ID
       * @param {NotificationOptions} options - Configuration
       */
      static bindEventHandlers(element, id, options) {
        const actionButton = element.querySelector(".notification__action");
        if (actionButton && options.onAction) {
          actionButton.addEventListener("click", (e) => {
            e.preventDefault();
            options.onAction(id);
          });
        }
        const dismissButton = element.querySelector(".notification__dismiss");
        if (dismissButton) {
          dismissButton.addEventListener("click", (e) => {
            e.preventDefault();
            this.dismiss(id, true);
          });
        }
        if (options.duration > 0) {
          element.addEventListener("mouseenter", () => {
            this.pauseAutoDismiss(id);
          });
          element.addEventListener("mouseleave", () => {
            this.resumeAutoDismiss(id);
          });
        }
        element.addEventListener("keydown", (e) => {
          if (e.key === "Escape" && options.dismissible) {
            this.dismiss(id, true);
          }
        });
      }
      /**
       * Get or create container for position
       * @param {string} position - Container position
       * @returns {HTMLElement}
       */
      static getContainer(position) {
        if (this.containers.has(position)) {
          return this.containers.get(position);
        }
        const container = document.createElement("div");
        container.className = `notification-container notification-container--${position}`;
        container.setAttribute("aria-live", "polite");
        container.setAttribute("aria-label", "Notifications");
        this.positionContainer(container, position);
        document.body.appendChild(container);
        this.containers.set(position, container);
        return container;
      }
      /**
       * Position container based on position string
       * @param {HTMLElement} container - Container element
       * @param {string} position - Position identifier
       */
      static positionContainer(container, position) {
        const baseStyles = {
          position: "fixed",
          zIndex: "9999",
          pointerEvents: "none",
          display: "flex",
          flexDirection: "column",
          gap: "0.75rem",
          padding: "1rem",
          maxWidth: "24rem"
        };
        const positionStyles = {
          "top-right": { top: "0", right: "0" },
          "top-left": { top: "0", left: "0" },
          "bottom-right": { bottom: "0", right: "0", flexDirection: "column-reverse" },
          "bottom-left": { bottom: "0", left: "0", flexDirection: "column-reverse" },
          "top-center": { top: "0", left: "50%", transform: "translateX(-50%)" },
          "bottom-center": { bottom: "0", left: "50%", transform: "translateX(-50%)", flexDirection: "column-reverse" }
        };
        const styles = { ...baseStyles, ...positionStyles[position] };
        Object.assign(container.style, styles);
      }
      /**
       * Add notification to container with animation
       * @param {HTMLElement} container - Target container
       * @param {HTMLElement} element - Notification element
       * @param {NotificationOptions} options - Configuration
       */
      static addToContainer(container, element, options) {
        element.style.pointerEvents = "auto";
        if (options.position.includes("bottom")) {
          container.insertBefore(element, container.firstChild);
        } else {
          container.appendChild(element);
        }
        this.animateIn(element);
      }
      /**
       * Animate notification in
       * @param {HTMLElement} element - Notification element
       */
      static animateIn(element) {
        if (motion.prefersReduced()) {
          element.style.opacity = "1";
          return;
        }
        element.style.opacity = "0";
        element.style.transform = "translateX(100%)";
        requestAnimationFrame(() => {
          element.style.opacity = "1";
          element.style.transform = "translateX(0)";
        });
      }
      /**
       * Animate notification out
       * @param {HTMLElement} element - Notification element
       * @param {Function} callback - Completion callback
       */
      static animateOut(element, callback) {
        if (motion.prefersReduced()) {
          callback();
          return;
        }
        element.style.opacity = "0";
        element.style.transform = "translateX(100%)";
        const duration = animationBridge.getTiming("medium");
        setTimeout(callback, duration);
      }
      /**
       * Manage notification queue to prevent overflow
       * @param {string} position - Container position
       */
      static manageQueue(position) {
        const container = this.containers.get(position);
        if (!container) return;
        const notifications = container.querySelectorAll(".notification");
        if (notifications.length >= this.maxNotifications) {
          const oldest = notifications[0];
          const oldestId = oldest.id;
          this.dismiss(oldestId);
        }
      }
      /**
       * Pause auto-dismiss for notification
       * @param {string} notificationId - Notification ID
       */
      static pauseAutoDismiss(notificationId) {
        const notification = this.notifications.get(notificationId);
        if (notification && notification.timeoutId) {
          clearTimeout(notification.timeoutId);
          notification.timeoutId = null;
        }
      }
      /**
       * Resume auto-dismiss for notification
       * @param {string} notificationId - Notification ID
       */
      static resumeAutoDismiss(notificationId) {
        const notification = this.notifications.get(notificationId);
        if (notification && notification.options.duration > 0) {
          const elapsed = Date.now() - notification.timestamp;
          const remaining = notification.options.duration - elapsed;
          if (remaining > 0) {
            notification.timeoutId = setTimeout(() => {
              this.dismiss(notificationId);
            }, remaining);
          }
        }
      }
      /**
       * Clean up empty container
       * @param {HTMLElement} container - Container to check
       */
      static cleanupContainer(container) {
        var _a;
        if (container && container.children.length === 0) {
          const position = (_a = Array.from(this.containers.entries()).find(([, c]) => c === container)) == null ? void 0 : _a[0];
          if (position) {
            this.containers.delete(position);
            container.remove();
          }
        }
      }
      /**
       * Track notification events
       * @param {string} action - Action performed
       * @param {NotificationInstance} notification - Notification instance
       * @param {Object} [extra] - Additional data
       */
      static trackNotification(action, notification, extra = {}) {
        if (window.eventBus) {
          window.eventBus.emit("notification:tracked", {
            action,
            id: notification.id,
            type: notification.options.type,
            position: notification.options.position,
            timestamp: (/* @__PURE__ */ new Date()).toISOString(),
            ...extra
          });
        }
      }
      /**
       * Initialize the notification system
       */
      static initialize() {
        if (this.initialized) return;
        this.injectStyles();
        document.addEventListener("keydown", (e) => {
          if (e.key === "Escape" && e.ctrlKey) {
            this.dismissAll();
          }
        });
        this.initialized = true;
        console.log("NotificationManager: Initialized");
      }
      /**
       * Inject CSS styles for notifications
       */
      static injectStyles() {
        if (document.getElementById("notification-styles")) {
          return;
        }
        const styles = document.createElement("style");
        styles.id = "notification-styles";
        styles.textContent = `
      .notification {
        background: white;
        border-radius: 0.5rem;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        padding: 1rem;
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        min-width: 20rem;
        max-width: 24rem;
        border-left: 4px solid;
        transition: all var(--timing-medium) var(--easing-standard);
      }

      .notification:hover {
        transform: translateY(-2px);
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
      }

      .notification--success {
        border-left-color: #10b981;
        background: #f0fdf4;
      }

      .notification--error {
        border-left-color: #ef4444;
        background: #fef2f2;
      }

      .notification--warning {
        border-left-color: #f59e0b;
        background: #fffbeb;
      }

      .notification--info {
        border-left-color: #3b82f6;
        background: #eff6ff;
      }

      .notification__content {
        display: flex;
        align-items: flex-start;
        gap: 0.75rem;
        flex: 1;
      }

      .notification__icon {
        flex-shrink: 0;
        margin-top: 0.125rem;
      }

      .notification--success .notification__icon {
        color: #10b981;
      }

      .notification--error .notification__icon {
        color: #ef4444;
      }

      .notification--warning .notification__icon {
        color: #f59e0b;
      }

      .notification--info .notification__icon {
        color: #3b82f6;
      }

      .notification__message {
        font-size: 0.875rem;
        line-height: 1.5;
        color: #374151;
      }

      .notification__actions {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-left: 0.75rem;
      }

      .notification__action {
        background: transparent;
        border: 1px solid currentColor;
        border-radius: 0.25rem;
        padding: 0.25rem 0.5rem;
        font-size: 0.75rem;
        cursor: pointer;
        transition: all var(--timing-fast) var(--easing-standard);
      }

      .notification__action:hover {
        background: currentColor;
        color: white;
      }

      .notification__dismiss {
        background: transparent;
        border: none;
        padding: 0.25rem;
        cursor: pointer;
        border-radius: 0.25rem;
        color: #6b7280;
        transition: all var(--timing-fast) var(--easing-standard);
      }

      .notification__dismiss:hover {
        background: rgba(0, 0, 0, 0.1);
        color: #374151;
      }

      @media (prefers-reduced-motion: reduce) {
        .notification,
        .notification * {
          transition: none !important;
          animation: none !important;
        }
      }

      @media (max-width: 640px) {
        .notification-container {
          left: 0.5rem !important;
          right: 0.5rem !important;
          max-width: none !important;
          transform: none !important;
        }

        .notification {
          min-width: auto;
          max-width: none;
        }
      }
    `;
        document.head.appendChild(styles);
      }
      /**
       * Get notification statistics
       * @returns {Object}
       */
      static getStats() {
        const stats = {
          active: this.notifications.size,
          byType: {},
          byPosition: {},
          containers: this.containers.size
        };
        for (const notification of this.notifications.values()) {
          const type = notification.options.type;
          const position = notification.options.position;
          stats.byType[type] = (stats.byType[type] || 0) + 1;
          stats.byPosition[position] = (stats.byPosition[position] || 0) + 1;
        }
        return stats;
      }
    };
    __publicField(NotificationManager, "notifications", /* @__PURE__ */ new Map());
    __publicField(NotificationManager, "containers", /* @__PURE__ */ new Map());
    __publicField(NotificationManager, "notificationId", 0);
    __publicField(NotificationManager, "maxNotifications", 5);
    __publicField(NotificationManager, "initialized", false);
    // Default durations by type (milliseconds)
    __publicField(NotificationManager, "DefaultDurations", {
      success: 4e3,
      error: 6e3,
      warning: 5e3,
      info: 4e3
    });
    // Default icons by type
    __publicField(NotificationManager, "DefaultIcons", {
      success: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-5 h-5">
      <path d="M20 6L9 17l-5-5"></path>
    </svg>`,
      error: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-5 h-5">
      <circle cx="12" cy="12" r="10"></circle>
      <line x1="15" y1="9" x2="9" y2="15"></line>
      <line x1="9" y1="9" x2="15" y2="15"></line>
    </svg>`,
      warning: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-5 h-5">
      <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
      <line x1="12" y1="9" x2="12" y2="13"></line>
      <line x1="12" y1="17" x2="12.01" y2="17"></line>
    </svg>`,
      info: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-5 h-5">
      <circle cx="12" cy="12" r="10"></circle>
      <line x1="12" y1="16" x2="12" y2="12"></line>
      <line x1="12" y1="8" x2="12.01" y2="8"></line>
    </svg>`
    });
    toast = (message, type = "info", duration = null) => NotificationManager.show(message, type, duration);
    showSuccess = (message, options = {}) => NotificationManager.show(message, { type: "success", ...options });
    showError = (message, options = {}) => NotificationManager.show(message, { type: "error", ...options });
    showWarning = (message, options = {}) => NotificationManager.show(message, { type: "warning", ...options });
    showInfo = (message, options = {}) => NotificationManager.show(message, { type: "info", ...options });
    dismissNotification = (id) => NotificationManager.dismiss(id);
    dismissAllNotifications = () => NotificationManager.dismissAll();
    if (typeof window !== "undefined" && !window.toast) {
      window.toast = toast;
      console.log("NotificationManager: Global toast function registered");
    } else if (typeof window !== "undefined") {
      console.log("NotificationManager: Global toast already exists, skipping registration");
    }
    if (typeof window !== "undefined") {
      if (!window.MiloUX) {
        window.MiloUX = {};
      }
      if (!window.MiloUX.showNotification) {
        window.MiloUX.showNotification = (message, type = "info", duration = null) => NotificationManager.show(message, type, duration);
      }
    }
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/utils/NavigationUtils.js
var log6, NavigationUtils, normalizePath, pathsMatch, findCurrentLink, getCurrentPath, findParentNavigationItems, getNavigationItemInfo;
var init_NavigationUtils = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/utils/NavigationUtils.js"() {
    init_Logger();
    log6 = logger.component("NavigationUtils");
    NavigationUtils = class {
      /**
       * Normalize path for comparison (handles static deployments)
       * @param {string} path - Path to normalize
       * @returns {string} Normalized path
       */
      static normalizePath(path) {
        if (!path) return "";
        if (path.startsWith("./")) {
          return path.substring(2);
        }
        if (path.startsWith("/")) {
          return path.substring(1);
        }
        return path;
      }
      /**
       * Check if two paths match, accounting for relative vs absolute paths
       * @param {string} currentPath - Current page path
       * @param {string} linkPath - Link href path
       * @returns {boolean} Whether paths match
       */
      static pathsMatch(currentPath, linkPath) {
        if (!currentPath || !linkPath) return false;
        const normalizedCurrent = this.normalizePath(currentPath);
        const normalizedLink = this.normalizePath(linkPath);
        if (normalizedCurrent === normalizedLink) {
          return true;
        }
        if (normalizedCurrent.endsWith("/index.html") && normalizedLink.endsWith("/")) {
          return normalizedCurrent.replace("/index.html", "/") === normalizedLink;
        }
        if (normalizedLink.endsWith("/index.html") && normalizedCurrent.endsWith("/")) {
          return normalizedLink.replace("/index.html", "/") === normalizedCurrent;
        }
        if (normalizedCurrent.endsWith("/") && normalizedLink === normalizedCurrent + "index.html") {
          return true;
        }
        if (normalizedLink.endsWith("/") && normalizedCurrent === normalizedLink + "index.html") {
          return true;
        }
        return false;
      }
      /**
       * Find current link using multiple detection strategies
       * @param {Element} container - Container element to search within
       * @param {string} currentPath - Current page path
       * @returns {Element|null} Found link element or null
       */
      static findCurrentLink(container, currentPath) {
        if (!container || !currentPath) return null;
        let currentLink = null;
        currentLink = container.querySelector('a[data-current="true"]');
        if (currentLink) {
          log6.debug("Found current link via data-current attribute:", currentLink.href);
          return currentLink;
        }
        log6.debug("No data-current link found, trying path matching...");
        currentLink = container.querySelector(`a[href="${currentPath}"]`);
        if (currentLink) {
          log6.debug("Found current link via exact path match:", currentLink.href);
          return currentLink;
        }
        const relativePath = `.${currentPath}`;
        currentLink = container.querySelector(`a[href="${relativePath}"]`);
        if (currentLink) {
          log6.debug("Found current link via relative path match:", currentLink.href);
          return currentLink;
        }
        if (currentPath.startsWith("/")) {
          const pathWithoutSlash = currentPath.substring(1);
          currentLink = container.querySelector(`a[href="${pathWithoutSlash}"]`);
          if (currentLink) {
            log6.debug("Found current link via path without slash:", currentLink.href);
            return currentLink;
          }
        }
        const allLinks = container.querySelectorAll("a[href]");
        for (const link of allLinks) {
          const linkPath = link.getAttribute("href");
          if (this.pathsMatch(currentPath, linkPath)) {
            log6.debug("Found current link via fuzzy path matching:", linkPath);
            return link;
          }
        }
        log6.debug("No current link found for path:", currentPath);
        return null;
      }
      /**
       * Get current page path with normalization for static deployments
       * @returns {string} Current page path
       */
      static getCurrentPath() {
        let currentPath = window.location.pathname;
        if (currentPath.endsWith("/")) {
          currentPath += "index.html";
        }
        return currentPath;
      }
      /**
       * Find parent navigation items for a given link
       * @param {Element} link - Link element to find parents for
       * @param {string} parentSelector - Selector for parent items (default: 'li')
       * @returns {Element[]} Array of parent elements
       */
      static findParentNavigationItems(link, parentSelector = "li") {
        var _a;
        const parents = [];
        let parent = link.closest(parentSelector);
        while (parent) {
          parents.push(parent);
          parent = (_a = parent.parentElement) == null ? void 0 : _a.closest(parentSelector);
        }
        return parents;
      }
      /**
       * Get navigation item info (link text, section name, etc.)
       * @param {Element} navigationItem - Navigation item element
       * @returns {Object} Navigation item information
       */
      static getNavigationItemInfo(navigationItem) {
        var _a, _b;
        const link = navigationItem.querySelector("a");
        const toggle = navigationItem.querySelector(".expand-toggle");
        return {
          link,
          toggle,
          href: link == null ? void 0 : link.getAttribute("href"),
          text: (_a = link == null ? void 0 : link.textContent) == null ? void 0 : _a.trim(),
          sectionName: (toggle == null ? void 0 : toggle.getAttribute("aria-label")) || ((_b = link == null ? void 0 : link.textContent) == null ? void 0 : _b.trim()),
          hasToggle: !!toggle,
          isExpanded: (toggle == null ? void 0 : toggle.getAttribute("aria-expanded")) === "true",
          isSection: (link == null ? void 0 : link.getAttribute("data-section")) === "true"
        };
      }
    };
    ({
      normalizePath,
      pathsMatch,
      findCurrentLink,
      getCurrentPath,
      findParentNavigationItems,
      getNavigationItemInfo
    } = NavigationUtils);
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/utils/CurrentPageDetection.js
function detectCurrentPage(container, options = {}, expandFunction = null) {
  const detector = new CurrentPageDetection(options);
  const success = detector.init(container);
  if (success && expandFunction) {
    detector.expandParentSections(expandFunction);
  }
  return {
    success,
    detector,
    pageInfo: detector.getCurrentPageInfo()
  };
}
var log7, CurrentPageDetection;
var init_CurrentPageDetection = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/utils/CurrentPageDetection.js"() {
    init_NavigationUtils();
    init_Logger();
    log7 = logger.component("CurrentPageDetection");
    CurrentPageDetection = class {
      /**
       * Create a new CurrentPageDetection instance
       * @param {Object} options - Configuration options
       */
      constructor(options = {}) {
        this.options = {
          containerSelector: null,
          // Must be provided
          activeClass: "sidebar-link--active",
          parentItemSelector: "li",
          toggleSelector: ".sidebar__toggle",
          linkSelector: "a",
          ...options
        };
        this.currentPath = NavigationUtils.getCurrentPath();
        this.container = null;
        this.currentLink = null;
      }
      /**
       * Initialize current page detection
       * @param {Element} container - Container element to search within
       * @returns {boolean} Whether initialization was successful
       */
      init(container) {
        if (!container) {
          log7.error("Container element is required for current page detection");
          return false;
        }
        this.container = container;
        return this.detectAndHighlightCurrentPage();
      }
      /**
       * Detect current page and highlight it in navigation
       * @returns {boolean} Whether current page was found and highlighted
       */
      detectAndHighlightCurrentPage() {
        log7.debug("Detecting current page for path:", this.currentPath);
        this.currentLink = NavigationUtils.findCurrentLink(this.container, this.currentPath);
        if (!this.currentLink) {
          log7.debug("No current link found for path:", this.currentPath);
          return false;
        }
        log7.debug("Found current link:", this.currentLink.href, this.currentLink.textContent.trim());
        this.highlightCurrentLink();
        this.expandParentSections();
        return true;
      }
      /**
       * Highlight the current link with active class
       */
      highlightCurrentLink() {
        if (!this.currentLink) return;
        this.clearActiveLinks();
        if (!this.currentLink.classList.contains(this.options.activeClass)) {
          this.currentLink.classList.add(this.options.activeClass);
          log7.debug("Added active class to current link");
        }
      }
      /**
       * Clear active classes from all links in container
       */
      clearActiveLinks() {
        const activeLinks = this.container.querySelectorAll(`.${this.options.activeClass}`);
        activeLinks.forEach((link) => {
          link.classList.remove(this.options.activeClass);
        });
      }
      /**
       * Expand parent sections to show the current page
       * @param {Function} expandFunction - Function to expand a toggle (optional)
       * @returns {number} Number of sections expanded
       */
      expandParentSections(expandFunction = null) {
        if (!this.currentLink) return 0;
        const parents = NavigationUtils.findParentNavigationItems(this.currentLink, this.options.parentItemSelector);
        let expandedCount = 0;
        parents.forEach((parent) => {
          const toggle = parent.querySelector(this.options.toggleSelector);
          if (toggle && toggle.getAttribute("aria-expanded") !== "true") {
            const navInfo = NavigationUtils.getNavigationItemInfo(parent);
            log7.debug(`Expanding parent section: ${navInfo.sectionName}`);
            if (expandFunction && typeof expandFunction === "function") {
              expandFunction(toggle, true);
            } else {
              this.defaultExpandToggle(toggle);
            }
            expandedCount++;
          }
        });
        log7.debug(`Expanded ${expandedCount} parent sections for current page`);
        return expandedCount;
      }
      /**
       * Default toggle expansion (fallback when no custom function provided)
       * @param {Element} toggle - Toggle element to expand
       */
      defaultExpandToggle(toggle) {
        toggle.setAttribute("aria-expanded", "true");
        const chevron = toggle.querySelector("svg, .chevron, .icon");
        if (chevron) {
          chevron.classList.add("rotate-90");
        }
        const parent = toggle.closest(this.options.parentItemSelector);
        const content = parent == null ? void 0 : parent.querySelector(".nested-content, .collapse-content");
        if (content) {
          content.style.display = "";
          content.classList.add("expanded");
          content.setAttribute("data-collapse-state", "expanded");
        }
      }
      /**
       * Update current path and re-detect
       * @param {string} newPath - New path to detect
       * @returns {boolean} Whether new path was found and highlighted
       */
      updateCurrentPath(newPath) {
        this.currentPath = newPath || NavigationUtils.getCurrentPath();
        return this.detectAndHighlightCurrentPage();
      }
      /**
       * Get current page information
       * @returns {Object} Current page information
       */
      getCurrentPageInfo() {
        if (!this.currentLink) {
          return {
            found: false,
            path: this.currentPath,
            link: null,
            text: null,
            href: null
          };
        }
        return {
          found: true,
          path: this.currentPath,
          link: this.currentLink,
          text: this.currentLink.textContent.trim(),
          href: this.currentLink.getAttribute("href"),
          parents: NavigationUtils.findParentNavigationItems(this.currentLink, this.options.parentItemSelector)
        };
      }
      /**
       * Reset current page detection (clear highlights and collapse)
       */
      reset() {
        this.clearActiveLinks();
        this.currentLink = null;
        log7.debug("Current page detection reset");
      }
    };
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/utils/index.js
var utils_exports = {};
__export(utils_exports, {
  $: () => $,
  $$: () => $$,
  CopyManager: () => CopyManager,
  CurrentPageDetection: () => CurrentPageDetection,
  ErrorHandler: () => ErrorHandler,
  LoadingStateManager: () => LoadingStateManager,
  NavigationUtils: () => NavigationUtils,
  NotificationManager: () => NotificationManager,
  ParallaxController: () => ParallaxController,
  ScrollAnimationObserver: () => ScrollAnimationObserver,
  addEventListenerWithCleanup: () => addEventListenerWithCleanup,
  animateCounter: () => animateCounter,
  animateProgressBar: () => animateProgressBar,
  announceToScreenReader: () => announceToScreenReader,
  aria: () => aria,
  contrast: () => contrast,
  copyFromElement: () => copyFromElement,
  copyText: () => copyText,
  copyToClipboard: () => copyToClipboard,
  createElement: () => createElement,
  createErrorBoundary: () => createErrorBoundary,
  createLoadingSpinner: () => createLoadingSpinner,
  createNamespacedStorage: () => createNamespacedStorage,
  createRipple: () => createRipple,
  debounce: () => debounce,
  deepClone: () => deepClone,
  delegate: () => delegate,
  detectCurrentPage: () => detectCurrentPage,
  detectHighContrastMode: () => detectHighContrastMode,
  dismissAllNotifications: () => dismissAllNotifications,
  dismissNotification: () => dismissNotification,
  findCurrentLink: () => findCurrentLink,
  findParentNavigationItems: () => findParentNavigationItems,
  focus: () => focus,
  getCurrentPath: () => getCurrentPath,
  getNavigationItemInfo: () => getNavigationItemInfo,
  handleError: () => handleError,
  handleFetchError: () => handleFetchError,
  handleNetworkError: () => handleNetworkError,
  handleValidationError: () => handleValidationError,
  hideLoading: () => hideLoading,
  initFeatureDetection: () => initFeatureDetection,
  isInViewport: () => isInViewport,
  keyboard: () => keyboard,
  localStorage: () => localStorage2,
  logFeatureSupport: () => logFeatureSupport,
  modernFeatures: () => modernFeatures,
  motion: () => motion,
  normalizePath: () => normalizePath,
  pathsMatch: () => pathsMatch,
  ready: () => ready,
  requestIdleTime: () => requestIdleTime,
  sessionStorage: () => sessionStorage,
  setupCopyButtons: () => setupCopyButtons,
  showError: () => showError,
  showInfo: () => showInfo,
  showLoading: () => showLoading,
  showSkeleton: () => showSkeleton,
  showSpinner: () => showSpinner,
  showSuccess: () => showSuccess,
  showWarning: () => showWarning,
  smoothScrollTo: () => smoothScrollTo,
  staggeredAnimation: () => staggeredAnimation,
  throttle: () => throttle,
  toast: () => toast,
  transitions: () => transitions,
  typeWriter: () => typeWriter,
  updateProgress: () => updateProgress,
  utils: () => utils,
  waitForElement: () => waitForElement,
  withFallback: () => withFallback
});
var utils;
var init_utils = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/utils/index.js"() {
    init_dom();
    init_storage();
    init_animation();
    init_accessibility();
    init_CopyManager();
    init_LoadingStateManager();
    init_ErrorHandler();
    init_NotificationManager();
    init_FeatureDetection();
    init_NavigationUtils();
    init_CurrentPageDetection();
    utils = {
      // Generate unique IDs
      generateId(prefix = "milo") {
        return `${prefix}-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
      },
      // Format dates consistently
      formatDate(date, options = {}) {
        const defaults = {
          year: "numeric",
          month: "long",
          day: "numeric"
        };
        return new Intl.DateTimeFormat("en-US", { ...defaults, ...options }).format(date);
      },
      // Escape HTML to prevent XSS
      escapeHtml(text) {
        const div = document.createElement("div");
        div.textContent = text;
        return div.innerHTML;
      },
      // Parse query parameters
      parseQueryParams(url = window.location.search) {
        return new URLSearchParams(url);
      },
      // Clamp number between min and max
      clamp(value, min, max) {
        return Math.min(Math.max(value, min), max);
      },
      // Check if object is empty
      isEmpty(obj) {
        return obj == null || typeof obj === "object" && Object.keys(obj).length === 0;
      },
      // Deep merge objects
      deepMerge(target, ...sources) {
        if (!sources.length) return target;
        const source = sources.shift();
        if (this.isObject(target) && this.isObject(source)) {
          for (const key in source) {
            if (this.isObject(source[key])) {
              if (!target[key]) Object.assign(target, { [key]: {} });
              this.deepMerge(target[key], source[key]);
            } else {
              Object.assign(target, { [key]: source[key] });
            }
          }
        }
        return this.deepMerge(target, ...sources);
      },
      // Check if value is object
      isObject(item) {
        return item && typeof item === "object" && !Array.isArray(item);
      },
      // Format file size
      formatFileSize(bytes, decimals = 2) {
        if (bytes === 0) return "0 Bytes";
        const k = 1024;
        const dm = decimals < 0 ? 0 : decimals;
        const sizes = ["Bytes", "KB", "MB", "GB", "TB"];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + " " + sizes[i];
      }
    };
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/mixins/ScrollTrackingMixin.js
var ScrollTrackingMixin;
var init_ScrollTrackingMixin = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/mixins/ScrollTrackingMixin.js"() {
    init_MixinBase();
    init_utils();
    ScrollTrackingMixin = {
      /**
       * Initialize scroll tracking functionality using MixinBase utilities
       * Call this from your component's onInit method
       * @param {Object} options - Configuration options
       */
      initScrollTracking: MixinUtilities.createInitFunction(
        "ScrollTrackingMixin",
        {
          activeClass: "active",
          offset: 100,
          smoothScroll: true,
          throttleDelay: 16,
          // ~60fps
          debounceDelay: 100,
          useIntersectionObserver: true,
          rootMargin: "-50% 0px -50% 0px",
          threshold: 0
        },
        function setupScrollTracking() {
          this.scrollTargets = [];
          this.activeTarget = null;
          this.isScrolling = false;
          this.scrollTimeout = null;
          this.observer = null;
          this.setupScrollElements();
          this.setupScrollTracking();
        }
      ),
      /**
       * Find and cache scroll-related elements
       */
      setupScrollElements() {
        if (!this.element) return;
        const scrollLinks = this.element.querySelectorAll('[data-scroll-target], a[href^="#"]');
        this.scrollTargets = Array.from(scrollLinks).map((link) => {
          var _a;
          const targetId = link.getAttribute("data-scroll-target") || ((_a = link.getAttribute("href")) == null ? void 0 : _a.substring(1));
          const targetElement = document.getElementById(targetId);
          return {
            link,
            targetId,
            targetElement,
            isActive: false
          };
        }).filter((target) => target.targetElement);
      },
      /**
       * Setup scroll tracking based on configuration
       */
      setupScrollTracking() {
        if (this.scrollOptions.useIntersectionObserver && "IntersectionObserver" in window) {
          this.setupIntersectionObserver();
        } else {
          this.setupScrollListener();
        }
        this.setupScrollLinks();
      },
      /**
       * Setup Intersection Observer for modern scroll tracking
       */
      setupIntersectionObserver() {
        const observerOptions = {
          root: null,
          rootMargin: this.scrollOptions.rootMargin,
          threshold: this.scrollOptions.threshold
        };
        this.observer = new IntersectionObserver((entries) => {
          entries.forEach((entry) => {
            const target = this.scrollTargets.find((t) => t.targetElement === entry.target);
            if (target) {
              if (entry.isIntersecting) {
                this.setActiveTarget(target);
              }
            }
          });
        }, observerOptions);
        this.scrollTargets.forEach((target) => {
          this.observer.observe(target.targetElement);
        });
      },
      /**
       * Setup scroll listener (fallback for older browsers)
       */
      setupScrollListener() {
        const throttledScrollHandler = throttle(() => {
          this.handleScroll();
        }, this.scrollOptions.throttleDelay);
        this.addEventListener(window, "scroll", throttledScrollHandler);
        this.handleScroll();
      },
      /**
       * Setup click handlers for scroll links
       */
      setupScrollLinks() {
        this.scrollTargets.forEach((target) => {
          this.addEventListener(target.link, "click", (e) => {
            e.preventDefault();
            this.scrollToTarget(target);
          });
        });
      },
      /**
       * Handle scroll events (for non-IntersectionObserver mode)
       */
      handleScroll() {
        if (this.isScrolling) return;
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        let activeTarget = null;
        let closestDistance = Infinity;
        this.scrollTargets.forEach((target) => {
          const rect = target.targetElement.getBoundingClientRect();
          const elementTop = rect.top + scrollTop;
          const distance = Math.abs(elementTop - scrollTop - this.scrollOptions.offset);
          if (distance < closestDistance && rect.top <= this.scrollOptions.offset) {
            closestDistance = distance;
            activeTarget = target;
          }
        });
        if (activeTarget && activeTarget !== this.activeTarget) {
          this.setActiveTarget(activeTarget);
        }
      },
      /**
       * Set the active target and update UI
       * @param {Object} target - Target object to set as active
       */
      setActiveTarget(target) {
        if (this.activeTarget) {
          this.activeTarget.link.classList.remove(this.scrollOptions.activeClass);
          this.activeTarget.isActive = false;
        }
        this.activeTarget = target;
        if (target) {
          target.link.classList.add(this.scrollOptions.activeClass);
          target.isActive = true;
          this.emit("scroll-target-active", {
            target: target.targetElement,
            link: target.link,
            targetId: target.targetId
          });
        }
      },
      /**
       * Scroll to a specific target
       * @param {Object} target - Target object to scroll to
       */
      async scrollToTarget(target) {
        if (!target.targetElement) return;
        this.isScrolling = true;
        this.emit("before-scroll", {
          target: target.targetElement,
          link: target.link,
          targetId: target.targetId
        });
        if (this.scrollOptions.smoothScroll && "scrollBehavior" in document.documentElement.style) {
          const elementTop = target.targetElement.offsetTop - this.scrollOptions.offset;
          window.scrollTo({
            top: elementTop,
            behavior: "smooth"
          });
          await this.waitForScrollEnd();
        } else {
          const elementTop = target.targetElement.offsetTop - this.scrollOptions.offset;
          window.scrollTo(0, elementTop);
        }
        this.setActiveTarget(target);
        this.isScrolling = false;
        this.emit("after-scroll", {
          target: target.targetElement,
          link: target.link,
          targetId: target.targetId
        });
      },
      /**
       * Wait for smooth scroll to end
       * @returns {Promise} Promise that resolves when scrolling stops
       */
      waitForScrollEnd() {
        return new Promise((resolve) => {
          let lastScrollTop = window.pageYOffset;
          let scrollEndTimer;
          const checkScrollEnd = () => {
            const currentScrollTop = window.pageYOffset;
            if (Math.abs(currentScrollTop - lastScrollTop) < 1) {
              resolve();
            } else {
              lastScrollTop = currentScrollTop;
              scrollEndTimer = setTimeout(checkScrollEnd, 50);
            }
          };
          scrollEndTimer = setTimeout(checkScrollEnd, 50);
        });
      },
      /**
       * Update scroll targets (useful when DOM changes)
       */
      updateScrollTargets() {
        if (this.observer) {
          this.observer.disconnect();
        }
        this.setupScrollElements();
        this.setupScrollTracking();
      },
      /**
       * Get current active target
       * @returns {Object|null} Current active target or null
       */
      getActiveTarget() {
        return this.activeTarget;
      },
      /**
       * Get all scroll targets
       * @returns {Array} Array of all scroll targets
       */
      getScrollTargets() {
        return this.scrollTargets;
      },
      /**
       * Scroll to target by ID
       * @param {string} targetId - ID of target to scroll to
       */
      scrollToId(targetId) {
        const target = this.scrollTargets.find((t) => t.targetId === targetId);
        if (target) {
          this.scrollToTarget(target);
        }
      },
      /**
       * Check if scroll tracking functionality is healthy using standardized checks
       */
      isScrollTrackingHealthy: MixinUtilities.createHealthCheck([
        function() {
          return this.scrollTargets && this.scrollTargets.length > 0;
        },
        function() {
          return this.scrollOptions !== void 0;
        },
        function() {
          return this.scrollTargets.every(
            (target) => target.targetElement && document.contains(target.targetElement) && target.link && document.contains(target.link)
          );
        },
        function() {
          if (this.scrollOptions.useIntersectionObserver) {
            return this.observer !== null;
          }
          return true;
        }
      ]),
      /**
       * Clean up scroll tracking
       */
      cleanupScrollTracking() {
        if (this.observer) {
          this.observer.disconnect();
          this.observer = null;
        }
        if (this.scrollTimeout) {
          clearTimeout(this.scrollTimeout);
          this.scrollTimeout = null;
        }
        this.scrollTargets = [];
        this.activeTarget = null;
      }
    };
    validateMixinInterface(ScrollTrackingMixin, {
      methods: ["initScrollTracking", "isScrollTrackingHealthy"]
    });
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/mixins/FormValidationMixin.js
var FormValidationMixin;
var init_FormValidationMixin = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/mixins/FormValidationMixin.js"() {
    init_MixinBase();
    FormValidationMixin = {
      /**
       * Initialize form validation using MixinBase utilities
       */
      initFormValidation: MixinUtilities.createInitFunction(
        "FormValidationMixin",
        {
          formSelector: "form",
          fieldSelector: "input, select, textarea",
          errorClass: "error",
          validClass: "valid",
          showErrorMessages: true,
          validateOnBlur: true,
          validateOnSubmit: true
        },
        function setupFormValidation() {
          this.setupFormElements();
          this.setupFormEvents();
          this.setupFormAccessibility();
        }
      ),
      /**
       * Setup form elements using standardized element setup
       */
      setupFormElements: MixinUtilities.createElementSetup({
        form: "form",
        // Single form element
        fields: ["input, select, textarea"],
        // Multiple field elements
        submitButton: 'button[type="submit"], input[type="submit"]',
        errorContainers: [".error-message"]
        // Multiple error containers
      }),
      /**
       * Setup form events using standardized event setup
       */
      setupFormEvents: MixinUtilities.createEventSetup({
        form: {
          "submit": "handleFormSubmit"
        },
        fields: {
          "blur": "handleFieldBlur",
          "input": "handleFieldInput"
        }
      }),
      /**
       * Setup accessibility attributes
       */
      setupFormAccessibility() {
        if (!this.fields) return;
        this.fields.forEach((field) => {
          if (!field.hasAttribute("aria-invalid")) {
            field.setAttribute("aria-invalid", "false");
          }
        });
      },
      /**
       * Handle form submission
       */
      handleFormSubmit(e) {
        if (this.formvalidationOptions.validateOnSubmit) {
          const isValid = this.validateAllFields();
          if (!isValid) {
            e.preventDefault();
            this.emit("form-validation-failed", { form: this.form });
            return;
          }
        }
        this.emit("form-submitted", { form: this.form });
      },
      /**
       * Handle field blur events
       */
      handleFieldBlur(e) {
        if (this.formvalidationOptions.validateOnBlur) {
          this.validateField(e.target);
        }
      },
      /**
       * Handle field input events
       */
      handleFieldInput(e) {
        this.clearFieldError(e.target);
      },
      /**
       * Validate all fields in the form
       */
      validateAllFields() {
        if (!this.fields) return true;
        let allValid = true;
        this.fields.forEach((field) => {
          const isValid = this.validateField(field);
          if (!isValid) allValid = false;
        });
        return allValid;
      },
      /**
       * Validate a specific field
       */
      validateField(field) {
        const value = field.value.trim();
        const rules = this.getFieldValidationRules(field);
        for (const rule of rules) {
          if (!rule.test(value, field)) {
            this.showFieldError(field, rule.message);
            return false;
          }
        }
        this.showFieldValid(field);
        return true;
      },
      /**
       * Get validation rules for a field
       */
      getFieldValidationRules(field) {
        const rules = [];
        if (field.hasAttribute("required")) {
          rules.push({
            test: (value) => value.length > 0,
            message: "This field is required"
          });
        }
        if (field.type === "email") {
          rules.push({
            test: (value) => !value || /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value),
            message: "Please enter a valid email address"
          });
        }
        if (field.hasAttribute("minlength")) {
          const minLength = parseInt(field.getAttribute("minlength"));
          rules.push({
            test: (value) => !value || value.length >= minLength,
            message: `Must be at least ${minLength} characters`
          });
        }
        return rules;
      },
      /**
       * Show field error
       */
      showFieldError(field, message) {
        field.classList.add(this.formvalidationOptions.errorClass);
        field.classList.remove(this.formvalidationOptions.validClass);
        field.setAttribute("aria-invalid", "true");
        if (this.formvalidationOptions.showErrorMessages) {
          this.displayErrorMessage(field, message);
        }
        this.emit("field-error", { field, message });
      },
      /**
       * Show field as valid
       */
      showFieldValid(field) {
        field.classList.remove(this.formvalidationOptions.errorClass);
        field.classList.add(this.formvalidationOptions.validClass);
        field.setAttribute("aria-invalid", "false");
        this.clearErrorMessage(field);
        this.emit("field-valid", { field });
      },
      /**
       * Clear field error
       */
      clearFieldError(field) {
        field.classList.remove(this.formvalidationOptions.errorClass);
        field.setAttribute("aria-invalid", "false");
        this.clearErrorMessage(field);
      },
      /**
       * Display error message for field
       */
      displayErrorMessage(field, message) {
        let errorElement = field.parentElement.querySelector(".error-message");
        if (!errorElement) {
          errorElement = document.createElement("div");
          errorElement.className = "error-message";
          errorElement.setAttribute("role", "alert");
          field.parentElement.appendChild(errorElement);
        }
        errorElement.textContent = message;
        errorElement.style.display = "block";
      },
      /**
       * Clear error message for field
       */
      clearErrorMessage(field) {
        const errorElement = field.parentElement.querySelector(".error-message");
        if (errorElement) {
          errorElement.style.display = "none";
        }
      },
      /**
       * Public API - validate the form programmatically
       */
      validateForm() {
        return this.validateAllFields();
      },
      /**
       * Public API - reset form validation
       */
      resetFormValidation() {
        if (!this.fields) return;
        this.fields.forEach((field) => {
          this.clearFieldError(field);
          field.classList.remove(this.formvalidationOptions.validClass);
        });
      },
      /**
       * Health check using MixinBase utilities
       */
      isFormValidationHealthy: MixinUtilities.createHealthCheck([
        function() {
          return this.form !== null;
        },
        function() {
          return this.fields && this.fields.length > 0;
        },
        function() {
          return this.formvalidationOptions !== void 0;
        },
        function() {
          return this.form && this.form.dataset && this.form.dataset.componentListeners && this.form.dataset.componentListeners.includes(this.id);
        }
      ])
    };
    validateMixinInterface(FormValidationMixin, {
      methods: ["initFormValidation", "isFormValidationHealthy"]
    });
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/mixins/MixinManager.js
function withMixins(mixins, options = {}) {
  return function(ComponentClass) {
    if (typeof mixins === "string" && MixinApplicators[mixins]) {
      return MixinApplicators[mixins](ComponentClass, options);
    }
    if (Array.isArray(mixins)) {
      return MixinManager.applyMixins(ComponentClass, mixins, options);
    }
    throw new Error(`Invalid mixins specification: ${mixins}`);
  };
}
var log8, MixinManager, MixinApplicators;
var init_MixinManager = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/mixins/MixinManager.js"() {
    init_Logger();
    log8 = logger.component("MixinManager");
    MixinManager = class {
      /**
       * Apply mixins to a component class with conflict detection
       * @param {Function} ComponentClass - The component class to extend
       * @param {Object[]} mixins - Array of mixin objects to apply
       * @param {Object} options - Configuration options
       * @returns {Function} The extended component class
       */
      static applyMixins(ComponentClass, mixins, options = {}) {
        const config = {
          prefix: "",
          // Prefix for mixin methods to avoid conflicts
          allowOverride: false,
          // Whether to allow mixins to override existing methods
          detectConflicts: true,
          // Whether to detect and warn about conflicts
          skipConflicts: false,
          // Whether to skip conflicting methods
          ...options
        };
        const conflicts = [];
        const applied = [];
        mixins.forEach((mixin) => {
          var _a;
          const mixinName = ((_a = mixin.constructor) == null ? void 0 : _a.name) || "UnnamedMixin";
          Object.getOwnPropertyNames(mixin).forEach((prop) => {
            if (prop === "constructor") return;
            const descriptor = Object.getOwnPropertyDescriptor(mixin, prop);
            if (!descriptor) return;
            const targetProp = config.prefix ? `${config.prefix}${prop}` : prop;
            const existingDescriptor = Object.getOwnPropertyDescriptor(ComponentClass.prototype, targetProp);
            if (existingDescriptor && config.detectConflicts) {
              const conflict = {
                property: prop,
                targetProperty: targetProp,
                mixin: mixinName,
                existing: true
              };
              conflicts.push(conflict);
              if (config.skipConflicts) {
                log8.warn(`Skipping conflicting method ${targetProp} from ${mixinName}`);
                return;
              }
              if (!config.allowOverride) {
                log8.warn(`Method conflict detected: ${targetProp} (${mixinName} vs existing)`);
              }
            }
            Object.defineProperty(ComponentClass.prototype, targetProp, descriptor);
            applied.push({ property: targetProp, mixin: mixinName });
          });
        });
        if (conflicts.length > 0) {
          log8.info(`Applied ${applied.length} methods with ${conflicts.length} conflicts detected`);
        } else {
          log8.debug(`Applied ${applied.length} methods from ${mixins.length} mixins without conflicts`);
        }
        return ComponentClass;
      }
      /**
       * Create a safe mixin application function for a specific set of mixins
       * @param {Object[]} mixins - Mixins to create applicator for
       * @param {Object} defaultOptions - Default options for mixin application
       * @returns {Function} Mixin application function
       */
      static createApplicator(mixins, defaultOptions = {}) {
        return (ComponentClass, options = {}) => {
          return this.applyMixins(ComponentClass, mixins, { ...defaultOptions, ...options });
        };
      }
      /**
       * Check for potential conflicts between a component and mixins
       * @param {Function} ComponentClass - Component class to check
       * @param {Object[]} mixins - Mixins to check against
       * @returns {Object[]} Array of potential conflicts
       */
      static checkConflicts(ComponentClass, mixins) {
        const conflicts = [];
        const existingMethods = Object.getOwnPropertyNames(ComponentClass.prototype);
        mixins.forEach((mixin) => {
          var _a;
          const mixinName = ((_a = mixin.constructor) == null ? void 0 : _a.name) || "UnnamedMixin";
          const mixinMethods = Object.getOwnPropertyNames(mixin);
          mixinMethods.forEach((method) => {
            if (method === "constructor") return;
            if (existingMethods.includes(method)) {
              conflicts.push({
                method,
                mixin: mixinName,
                component: ComponentClass.name
              });
            }
          });
        });
        return conflicts;
      }
    };
    MixinApplicators = {
      /**
       * Apply navigation-related mixins (expandable + responsive + current page detection)
       */
      navigation: async (ComponentClass, options = {}) => {
        const { ExpandableMixin: ExpandableMixin2, ResponsiveMixin: ResponsiveMixin2 } = await Promise.resolve().then(() => (init_components(), components_exports));
        return MixinManager.applyMixins(ComponentClass, [ExpandableMixin2, ResponsiveMixin2], {
          detectConflicts: true,
          skipConflicts: false,
          ...options
        });
      },
      /**
       * Apply sidebar-related mixins (all navigation mixins)
       */
      sidebar: (ComponentClass, options = {}) => {
        return MixinApplicators.navigation(ComponentClass, options);
      },
      /**
       * Apply content-related mixins (expandable + scroll tracking)
       */
      content: async (ComponentClass, options = {}) => {
        const { ExpandableMixin: ExpandableMixin2, ScrollTrackingMixin: ScrollTrackingMixin2 } = await Promise.resolve().then(() => (init_components(), components_exports));
        return MixinManager.applyMixins(ComponentClass, [ExpandableMixin2, ScrollTrackingMixin2], {
          detectConflicts: true,
          skipConflicts: false,
          ...options
        });
      },
      /**
       * Apply modal-related mixins (modal + responsive)
       */
      modal: async (ComponentClass, options = {}) => {
        const { ModalMixin: ModalMixin2, ResponsiveMixin: ResponsiveMixin2 } = await Promise.resolve().then(() => (init_components(), components_exports));
        return MixinManager.applyMixins(ComponentClass, [ModalMixin2, ResponsiveMixin2], {
          detectConflicts: true,
          skipConflicts: false,
          ...options
        });
      }
    };
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/ui/Noop.js
function registerNoop(name) {
  ComponentManager_default.register(name, class extends NoopComponent {
    constructor(cfg = {}) {
      super({ ...cfg, name });
    }
  });
}
var NoopComponent;
var init_Noop = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/ui/Noop.js"() {
    init_Component();
    init_ComponentManager();
    NoopComponent = class extends Component {
      constructor(config = {}) {
        super({ name: config.name || "noop", selector: config.selector || null, ...config });
      }
      async onInit() {
        return;
      }
    };
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/article/TabAggregator.js
var TabAggregator_exports = {};
__export(TabAggregator_exports, {
  default: () => TabAggregator_default
});
var TabAggregator, TabAggregator_default;
var init_TabAggregator = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/article/TabAggregator.js"() {
    init_ComponentManager();
    TabAggregator = class extends Component {
      constructor(config = {}) {
        super({ name: "tab-aggregator", selector: '[data-component="tab-item"]', ...config });
        this.isSingleton = false;
      }
      // Override to avoid mutating source tab items' data-component attribute
      setupElements() {
        this.element = null;
      }
      async onInit() {
        const items = Array.from(document.querySelectorAll('[data-component="tab-item"]'));
        if (items.length === 0) return;
        const groups = /* @__PURE__ */ new Map();
        items.forEach((item) => {
          const group = (item.getAttribute("data-group") || "default").toLowerCase();
          if (!groups.has(group)) groups.set(group, []);
          groups.get(group).push(item);
        });
        groups.forEach((groupItems, groupName) => {
          const first = groupItems[0];
          if (document.querySelector(`[data-component="article-tabs"][data-tab-group="${groupName}"]`)) return;
          const container = document.createElement("section");
          container.className = "tabs";
          container.setAttribute("data-component", "article-tabs");
          container.setAttribute("data-tab-group", groupName);
          const variant = first.getAttribute("data-variant");
          if (variant === "subtle") {
            container.classList.add("tabs--subtle");
          }
          if (variant === "brand-active") {
            container.classList.add("tabs--brand-active");
          }
          const tabId = `tabs-${groupName}`;
          const buttons = document.createElement("div");
          buttons.className = "tabs__nav";
          buttons.setAttribute("data-tab-id", tabId);
          const contents = document.createElement("div");
          contents.className = "tabs__content";
          groupItems.forEach((item, index) => {
            const label = item.getAttribute("data-label") || `Tab ${index + 1}`;
            const isActive = item.getAttribute("data-active") === "true" || index === 0;
            const key = `${tabId}/${label.toLowerCase().replace(/\s+/g, "-")}`;
            const btn = document.createElement("button");
            btn.type = "button";
            btn.setAttribute("data-tab-option", key);
            btn.className = `tabs__button ${isActive ? "bg-brand" : ""}`;
            btn.textContent = label;
            buttons.appendChild(btn);
            const content = document.createElement("div");
            content.className = `tabs__panel${isActive ? " is-active" : ""}`;
            content.setAttribute("data-tabcontent", key);
            content.innerHTML = item.innerHTML;
            contents.appendChild(content);
          });
          container.appendChild(buttons);
          container.appendChild(contents);
          first.parentNode.insertBefore(container, first);
          groupItems.forEach((item) => item.remove());
        });
      }
    };
    ComponentManager_default.register("tab-aggregator", TabAggregator, { autoInit: true });
    TabAggregator_default = TabAggregator;
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/article/Clipboard.js
var Clipboard_exports = {};
__export(Clipboard_exports, {
  ArticleClipboard: () => ArticleClipboard
});
var ArticleClipboard;
var init_Clipboard = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/article/Clipboard.js"() {
    init_Component();
    init_ComponentManager();
    init_utils();
    ArticleClipboard = class extends Component {
      constructor(config = {}) {
        super({
          name: "article-clipboard",
          selector: config.selector || ".copy-btn, .copy-code",
          ...config
        });
        this.buttons = /* @__PURE__ */ new Map();
        this.options = {
          successDuration: 2e3,
          errorDuration: 3e3,
          successMessage: "\u2705 Copied!",
          errorMessage: "\u274C Failed",
          ...this.options
        };
      }
      /**
       * Setup elements and find all copy buttons
       */
      setupElements() {
        super.setupElements();
        this.copyButtons = [...$$(".copy-btn"), ...$$(".copy-code")];
        if (this.copyButtons.length === 0) return;
        this.copyButtons.forEach((button) => this.setupButton(button));
      }
      /**
       * Setup individual copy button
       */
      setupButton(button) {
        const originalContent = button.innerHTML;
        this.buttons.set(button, { originalContent });
        button.setAttribute("data-clipboard-component", this.id);
      }
      /**
       * Bind event listeners
       */
      bindEvents() {
        this.addEventListener(document, "click", (e) => {
          const button = e.target.closest(".copy-btn, .copy-code");
          if (button && this.buttons.has(button)) {
            e.preventDefault();
            this.handleCopyClick(button);
          }
          const askButton = e.target.closest(".ask-ai");
          if (askButton) {
            e.preventDefault();
            this.handleAskAIClick(askButton);
          }
        });
      }
      /**
       * Handle copy button click using unified CopyManager
       */
      async handleCopyClick(button) {
        const result = await CopyManager.copyCode(button, {
          successMessage: this.options.successMessage,
          errorMessage: this.options.errorMessage,
          feedbackDuration: this.options.successDuration,
          analytics: {
            component: "article-clipboard",
            buttonId: button.id || "unknown"
          },
          onSuccess: (text) => {
            this.trackCopyEvent(button, text.length);
            this.emit("copy-success", { button, text });
          },
          onError: (error) => {
            this.emit("copy-error", { button, error });
          }
        });
        return result;
      }
      /**
       * Track copy events for analytics (component-specific tracking)
       */
      trackCopyEvent(button, textLength) {
        this.emit("copy-tracked", {
          component: "article-clipboard",
          textLength,
          timestamp: (/* @__PURE__ */ new Date()).toISOString(),
          buttonCount: this.buttons.size
        });
      }
      /**
       * Add new copy button dynamically
       */
      addButton(button) {
        if (this.buttons.has(button)) return;
        this.setupButton(button);
      }
      /**
       * Remove copy button
       */
      removeButton(button) {
        if (!this.buttons.has(button)) return;
        button.removeAttribute("data-clipboard-component");
        this.buttons.delete(button);
      }
      /**
       * Get copy statistics
       */
      getStats() {
        return {
          buttonCount: this.buttons.size,
          componentId: this.id
        };
      }
      /**
       * Custom cleanup
       */
      onDestroy() {
        this.buttons.forEach((data, button) => {
          button.removeAttribute("data-clipboard-component");
        });
        this.buttons.clear();
      }
      /**
       * Handle Ask AI button: copy code then send to chat
       */
      async handleAskAIClick(button) {
        try {
          const prompt = button.getAttribute("data-ai-prompt") || "Explain this code snippet";
          const result = await CopyManager.copyCode(button, {
            button,
            successMessage: "Sent to chat",
            announceMessage: "Sent to chat",
            analytics: { component: "article-clipboard", action: "ask-ai" },
            onSuccess: async (codeText) => {
              const question = `${prompt}

${codeText}`;
              let chat = ComponentManager_default.getInstances("article-chat")[0];
              if (!chat) {
                chat = await ComponentManager_default.load("article-chat");
              }
              if (chat) {
                chat.show();
                chat.focus();
                await chat.handleQuestionSubmit(question);
              }
            }
          });
          return result;
        } catch (error) {
          this.emit("ask-ai-error", { button, error });
          return { success: false, error };
        }
      }
    };
    ComponentManager_default.register("article-clipboard", ArticleClipboard);
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/article/Collapse.js
var Collapse_exports = {};
__export(Collapse_exports, {
  ArticleCollapse: () => ArticleCollapse
});
var ArticleCollapse;
var init_Collapse = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/article/Collapse.js"() {
    init_Component();
    init_AnimationBridge();
    init_ComponentManager();
    init_utils();
    init_animation();
    ArticleCollapse = class extends Component {
      constructor(config = {}) {
        super({
          name: "article-collapse",
          selector: config.selector || ".toggle-collapse",
          ...config
        });
        this.toggles = /* @__PURE__ */ new Map();
        this.options = {
          animationDuration: 300,
          storeState: true,
          namespace: "article-collapse",
          ...this.options
        };
      }
      /**
       * Setup elements and find all collapse toggles
       */
      setupElements() {
        super.setupElements();
        this.collapseToggles = $$(".toggle-collapse");
        if (this.collapseToggles.length === 0) return;
        this.collapseToggles.forEach((toggle) => this.setupToggle(toggle));
      }
      /**
       * Setup individual collapse toggle
       */
      setupToggle(toggle) {
        const listItem = toggle.closest("li") || toggle.closest("[data-collapse-container]");
        const content = this.findContent(toggle, listItem);
        const chevron = toggle.querySelector(".chevron, svg, [data-chevron]");
        if (!content) {
          console.warn("No collapsible content found for toggle:", toggle);
          return;
        }
        if (!content.id) {
          content.id = `collapse-content-${Date.now()}-${Math.random().toString(36).substr(2, 5)}`;
        }
        const ariaController = aria.setupExpandable(toggle, content, false);
        this.toggles.set(toggle, {
          content,
          chevron,
          ariaController,
          listItem,
          isExpanded: false
        });
        if (this.options.storeState) {
          this.loadToggleState(toggle);
        }
        toggle.setAttribute("data-collapse-component", this.id);
      }
      /**
       * Find the content element for a toggle
       */
      findContent(toggle, container) {
        let content = toggle.nextElementSibling;
        if (content && (content.classList.contains("nested-content") || content.classList.contains("collapse-content"))) {
          return content;
        }
        const targetSelector = toggle.getAttribute("data-target");
        if (targetSelector) {
          return document.querySelector(targetSelector);
        }
        if (container) {
          content = container.querySelector(".nested-content, .collapse-content, [data-collapse-content]");
          if (content) return content;
        }
        return toggle.nextElementSibling;
      }
      /**
       * Bind event listeners
       */
      bindEvents() {
        this.addEventListener(document, "click", (e) => {
          const toggle = e.target.closest(".toggle-collapse");
          if (toggle && this.toggles.has(toggle)) {
            e.preventDefault();
            this.handleToggleClick(toggle);
          }
        });
        this.addEventListener(document, "keydown", (e) => {
          const toggle = e.target.closest(".toggle-collapse");
          if (toggle && this.toggles.has(toggle)) {
            if (e.key === "Enter" || e.key === " ") {
              e.preventDefault();
              this.handleToggleClick(toggle);
            }
          }
        });
      }
      /**
       * Handle toggle click
       */
      async handleToggleClick(toggle) {
        const toggleData = this.toggles.get(toggle);
        if (!toggleData) return;
        const { content, chevron, ariaController, isExpanded } = toggleData;
        animationBridge.setComponentState(this.element, isExpanded ? "collapsing" : "expanding");
        animationBridge.setLoadingState(this.element, true);
        toggleData.isExpanded = !isExpanded;
        try {
          if (toggleData.isExpanded) {
            await this.expand(toggle, toggleData);
          } else {
            await this.collapse(toggle, toggleData);
          }
          animationBridge.setLoadingState(this.element, false);
          animationBridge.setComponentState(this.element, toggleData.isExpanded ? "expanded" : "collapsed");
          if (this.options.storeState) {
            this.saveToggleState(toggle);
          }
          this.emit("toggle", {
            toggle,
            expanded: toggleData.isExpanded,
            content
          });
        } catch (error) {
          console.error("Toggle animation failed:", error);
          animationBridge.setLoadingState(this.element, false);
          animationBridge.setComponentState(this.element, "error");
          toggleData.isExpanded = !toggleData.isExpanded;
        }
      }
      /**
       * Expand content
       */
      async expand(toggle, toggleData) {
        const { content, chevron, ariaController } = toggleData;
        content.style.display = "block";
        ariaController.expand();
        if (!window.matchMedia("(prefers-reduced-motion: reduce)").matches) {
          content.classList.add("expanding");
          await transitions.slideDown(content, this.options.animationDuration);
          content.classList.remove("expanding");
        }
        animationBridge.setCollapseState(content, "expanded");
        if (chevron) {
          chevron.classList.add("rotate-90");
        }
        if (window.announceToScreenReader) {
          window.announceToScreenReader("Section expanded");
        }
        this.emit("expanded", { toggle, content });
      }
      /**
       * Collapse content
       */
      async collapse(toggle, toggleData) {
        const { content, chevron, ariaController } = toggleData;
        ariaController.collapse();
        if (!window.matchMedia("(prefers-reduced-motion: reduce)").matches) {
          content.classList.add("collapsing");
          await transitions.slideUp(content, this.options.animationDuration);
          content.classList.remove("collapsing");
        }
        animationBridge.setCollapseState(content, "collapsed");
        content.style.display = "none";
        if (chevron) {
          chevron.classList.remove("rotate-90");
        }
        if (window.announceToScreenReader) {
          window.announceToScreenReader("Section collapsed");
        }
        this.emit("collapsed", { toggle, content });
      }
      /**
       * Expand specific toggle programmatically
       */
      async expandToggle(toggle) {
        const toggleData = this.toggles.get(toggle);
        if (!toggleData || toggleData.isExpanded) return;
        return this.handleToggleClick(toggle);
      }
      /**
       * Collapse specific toggle programmatically
       */
      async collapseToggle(toggle) {
        const toggleData = this.toggles.get(toggle);
        if (!toggleData || !toggleData.isExpanded) return;
        return this.handleToggleClick(toggle);
      }
      /**
       * Expand all toggles
       */
      async expandAll() {
        const expandPromises = Array.from(this.toggles.keys()).filter((toggle) => !this.toggles.get(toggle).isExpanded).map((toggle) => this.expandToggle(toggle));
        await Promise.all(expandPromises);
        this.emit("expanded-all");
      }
      /**
       * Collapse all toggles
       */
      async collapseAll() {
        const collapsePromises = Array.from(this.toggles.keys()).filter((toggle) => this.toggles.get(toggle).isExpanded).map((toggle) => this.collapseToggle(toggle));
        await Promise.all(collapsePromises);
        this.emit("collapsed-all");
      }
      /**
       * Save toggle state to storage
       */
      saveToggleState(toggle) {
        if (!this.options.storeState) return;
        const toggleData = this.toggles.get(toggle);
        const key = this.getStorageKey(toggle);
        try {
          localStorage.set(key, {
            expanded: toggleData.isExpanded,
            timestamp: Date.now()
          });
        } catch (error) {
          console.warn("Failed to save collapse state:", error);
        }
      }
      /**
       * Load toggle state from storage
       */
      loadToggleState(toggle) {
        if (!this.options.storeState) return;
        const key = this.getStorageKey(toggle);
        try {
          const stored = localStorage.get(key);
          if (stored) {
            const { expanded } = stored;
            if (expanded) {
              const toggleData = this.toggles.get(toggle);
              toggleData.isExpanded = false;
              this.expand(toggle, toggleData);
            }
          }
        } catch (error) {
          console.warn("Failed to load collapse state:", error);
        }
      }
      /**
       * Get storage key for toggle
       */
      getStorageKey(toggle) {
        const contentId = this.toggles.get(toggle).content.id;
        return `${this.options.namespace}.${contentId}`;
      }
      /**
       * Get component statistics
       */
      getStats() {
        const stats = {
          totalToggles: this.toggles.size,
          expanded: 0,
          collapsed: 0
        };
        this.toggles.forEach((data) => {
          if (data.isExpanded) {
            stats.expanded++;
          } else {
            stats.collapsed++;
          }
        });
        return stats;
      }
      /**
       * Custom cleanup
       */
      onDestroy() {
        this.toggles.forEach((data, toggle) => {
          toggle.removeAttribute("data-collapse-component");
        });
        this.toggles.clear();
      }
    };
    ComponentManager_default.register("article-collapse", ArticleCollapse);
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/chat/ChatUI.js
var ChatUI;
var init_ChatUI = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/chat/ChatUI.js"() {
    init_AnimationBridge();
    ChatUI = class {
      constructor(chatManager) {
        this.chat = chatManager;
        this.form = null;
        this.questionInput = null;
        this.sendButton = null;
        this.clearAllButton = null;
        this.expandButton = null;
        this.overlay = null;
        this.previousActiveElement = null;
        this._focusTrapHandler = null;
      }
      /**
       * Cache UI element references
       */
      cacheElements() {
        this.form = document.getElementById("chat-form");
        this.questionInput = document.getElementById("question");
        this.sendButton = document.getElementById("sendButton");
        this.clearAllButton = document.getElementById("clearAll");
        this.expandButton = document.getElementById("expandChat");
      }
      /**
       * Setup all UI event listeners
       */
      setupEventListeners() {
        if (this.form) {
          this.form.addEventListener("submit", (e) => this.handleSubmit(e));
        }
        if (this.clearAllButton) {
          this.clearAllButton.addEventListener("click", () => this.chat.history.clearConversation());
        }
        if (this.expandButton) {
          this.expandButton.addEventListener("click", () => this.toggleExpanded());
        }
        if (this.questionInput) {
          this.questionInput.addEventListener("input", () => this.handleTextareaInput());
          this.questionInput.addEventListener("input", () => this.toggleSendButton());
          this.questionInput.addEventListener("keydown", (e) => this.handleKeydown(e));
        }
        window.addEventListener("resize", () => this.handleWindowResize());
        document.addEventListener("keydown", (e) => {
          if (e.key === "Escape") {
            const container = this.chat.element;
            if (container && container.classList.contains("chat-expanded")) {
              this.toggleExpanded();
            }
          }
        });
      }
      /**
       * Handle window resize events
       */
      handleWindowResize() {
        const container = this.chat.element;
        if (container.classList.contains("chat-expanded")) {
          this.repositionExpanded();
        }
      }
      /**
       * Reposition expanded chat after window resize
       */
      repositionExpanded() {
        const container = this.chat.element;
        const currentRight = container.style.right;
        const currentTop = container.style.top;
        const rightEdgeFromViewport = parseInt(currentRight) || 20;
        const maxViewportWidth = window.innerWidth * 0.6;
        const maxFixedWidth = 650;
        const expandedWidth = Math.min(maxViewportWidth, maxFixedWidth);
        const minLeftMargin = 20;
        const maxWidth = window.innerWidth - rightEdgeFromViewport - minLeftMargin;
        const finalWidth = Math.min(expandedWidth, maxWidth);
        container.style.width = `${finalWidth}px`;
        container.style.maxWidth = `${finalWidth}px`;
        container.style.right = currentRight;
        container.style.top = currentTop;
      }
      /**
       * Handle form submission
       */
      async handleSubmit(event) {
        event.preventDefault();
        const questionText = this.questionInput.value.trim();
        if (!questionText) return;
        this.questionInput.value = "";
        this.questionInput.style.height = "42px";
        this.toggleSendButton();
        await this.chat.handleQuestionSubmit(questionText);
      }
      /**
       * Handle textarea input for auto-resize and button state
       */
      handleTextareaInput() {
        const textarea = this.questionInput;
        textarea.style.height = "42px";
        const scrollHeight = textarea.scrollHeight;
        const maxHeight = 120;
        if (scrollHeight > 42) {
          textarea.style.height = Math.min(scrollHeight, maxHeight) + "px";
        }
      }
      /**
       * Toggle send button enabled/disabled state
       */
      toggleSendButton() {
        if (this.sendButton && this.questionInput) {
          const hasContent = this.questionInput.value.trim().length > 0;
          this.sendButton.disabled = !hasContent;
          if (hasContent) {
            this.sendButton.classList.remove("opacity-50", "cursor-not-allowed");
            this.sendButton.classList.add("hover:bg-primary/50", "dark:hover:bg-primary-dark/50");
          } else {
            this.sendButton.classList.add("opacity-50", "cursor-not-allowed");
            this.sendButton.classList.remove("hover:bg-primary/50", "dark:hover:bg-primary-dark/50");
          }
        }
      }
      /**
       * Handle keydown events for textarea
       */
      handleKeydown(event) {
        if (event.key === "Enter" && !event.shiftKey) {
          event.preventDefault();
          this.handleSubmit(event);
        }
      }
      /**
       * Toggle expanded state of chat
       */
      toggleExpanded() {
        const container = this.chat.element;
        const isExpanded = container.classList.contains("chat-expanded");
        if (isExpanded) {
          container.removeAttribute("data-collapse-state");
          container.classList.remove("expanded", "collapsed");
          container.classList.remove("chat-expanded");
          container.removeAttribute("role");
          container.removeAttribute("aria-modal");
          container.removeAttribute("aria-label");
          this.destroyOverlay();
          document.documentElement.style.overflow = "";
          document.body.style.overflow = "";
          this.teardownFocusTrap();
          if (this.previousActiveElement) {
            try {
              this.previousActiveElement.focus();
            } catch (e) {
            }
            this.previousActiveElement = null;
          }
          setTimeout(() => {
            container.style.width = "";
            container.style.maxWidth = "";
            container.style.right = "";
            container.style.top = "";
            container.style.bottom = "";
            container.style.height = "";
            container.style.maxHeight = "";
            container.style.position = "";
            container.style.zIndex = "";
            container.style.overflow = "";
          }, 150);
        } else {
          container.classList.add("chat-expanded");
          animationBridge.setCollapseState(container, "expanded");
          const rect = container.getBoundingClientRect();
          const rightEdgeFromViewport = window.innerWidth - rect.right;
          const currentTop = 16;
          const maxViewportWidth = window.innerWidth * 0.6;
          const maxFixedWidth = 650;
          const expandedWidth = Math.min(maxViewportWidth, maxFixedWidth);
          const minLeftMargin = 20;
          const maxWidth = window.innerWidth - rightEdgeFromViewport - minLeftMargin;
          const finalWidth = Math.min(expandedWidth, maxWidth);
          container.style.position = "fixed";
          container.style.top = `${currentTop}px`;
          container.style.bottom = "16px";
          container.style.right = `${rightEdgeFromViewport}px`;
          container.style.width = `${finalWidth}px`;
          container.style.maxWidth = `${finalWidth}px`;
          container.style.height = "auto";
          container.style.overflow = "visible";
          container.style.zIndex = "60";
          this.createOverlay();
          document.documentElement.style.overflow = "hidden";
          document.body.style.overflow = "hidden";
          this.previousActiveElement = document.activeElement;
          container.setAttribute("role", "dialog");
          container.setAttribute("aria-modal", "true");
          container.setAttribute("aria-label", "Assistant");
          this.setupFocusTrap(container);
          this.focusInput();
        }
        this.updateExpandButtonIcon(!isExpanded);
        this.chat.emit("chat:toggleExpanded", { expanded: !isExpanded });
      }
      /**
       * Setup a simple focus trap within the container
       */
      setupFocusTrap(container) {
        const getFocusable = () => Array.from(container.querySelectorAll(
          'a[href], area[href], input, select, textarea, button, [tabindex]:not([tabindex="-1"])'
        )).filter((el) => !el.hasAttribute("disabled") && el.tabIndex !== -1 && el.offsetParent !== null);
        this._focusTrapHandler = (e) => {
          if (e.key !== "Tab") return;
          const focusables = getFocusable();
          if (focusables.length === 0) return;
          const first = focusables[0];
          const last = focusables[focusables.length - 1];
          if (e.shiftKey) {
            if (document.activeElement === first) {
              last.focus();
              e.preventDefault();
            }
          } else {
            if (document.activeElement === last) {
              first.focus();
              e.preventDefault();
            }
          }
        };
        container.addEventListener("keydown", this._focusTrapHandler);
      }
      /**
       * Teardown focus trap
       */
      teardownFocusTrap() {
        const container = this.chat.element;
        if (this._focusTrapHandler && container) {
          container.removeEventListener("keydown", this._focusTrapHandler);
          this._focusTrapHandler = null;
        }
      }
      /**
       * Create modal overlay behind the expanded chat
       */
      createOverlay() {
        if (this.overlay) return;
        const overlay = document.createElement("div");
        overlay.id = "chatOverlay";
        overlay.className = "chat-overlay";
        overlay.setAttribute("aria-hidden", "true");
        overlay.addEventListener("click", () => this.toggleExpanded());
        document.body.appendChild(overlay);
        requestAnimationFrame(() => overlay.classList.add("visible"));
        this.overlay = overlay;
      }
      /**
       * Destroy modal overlay
       */
      destroyOverlay() {
        if (!this.overlay) return;
        const overlay = this.overlay;
        overlay.classList.remove("visible");
        setTimeout(() => {
          overlay.remove();
        }, 200);
        this.overlay = null;
      }
      /**
       * Update expand button icon based on state
       */
      updateExpandButtonIcon(isExpanded) {
        if (!this.expandButton) return;
        const img = this.expandButton.querySelector("img");
        if (!img) return;
        img.style.transform = "scale(0.8)";
        setTimeout(() => {
          const currentSrc = img.getAttribute("src") || "";
          const pathPrefix = currentSrc.includes("icons/") ? currentSrc.substring(0, currentSrc.lastIndexOf("icons/")) : "./";
          if (isExpanded) {
            this.expandButton.setAttribute("aria-label", "Collapse chat");
            img.src = pathPrefix + "icons/light/collapse.svg";
            img.alt = "Collapse";
          } else {
            this.expandButton.setAttribute("aria-label", "Expand chat");
            img.src = pathPrefix + "icons/light/expand.svg";
            img.alt = "Expand";
          }
          img.style.transform = "scale(1)";
        }, 100);
      }
      /**
       * Check if all required UI elements are present
       */
      validateElements() {
        return !!(this.form && this.questionInput && this.sendButton);
      }
      /**
       * Focus the input field
       */
      focusInput() {
        if (this.questionInput) {
          this.questionInput.focus();
        }
      }
      /**
       * Clear the input field and reset its state
       */
      clearInput() {
        if (this.questionInput) {
          this.questionInput.value = "";
          this.questionInput.style.height = "42px";
          this.toggleSendButton();
        }
      }
    };
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/chat/ChatAPI.js
var ChatAPI;
var init_ChatAPI = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/chat/ChatAPI.js"() {
    init_utils();
    ChatAPI = class {
      constructor(chatManager, config = {}) {
        this.chat = chatManager;
        const isOffline2 = window.HugoEnvironment && window.HugoEnvironment.environment === "offline";
        this.chatEndpoint = isOffline2 ? "" : config.chatEndpoint || "https://chat-2-lc4762co7a-uc.a.run.app/";
        this.requestTimeout = config.requestTimeout || 3e4;
      }
      /**
       * Fetch answer from AI endpoint
       */
      async fetchAnswer(question) {
        localStorage2.set("chat.pendingRequest", { question, startedAt: Date.now() });
        const loadingBubble = this.chat.bubbles.createLoadingBubble();
        this.chat.bubbles.addChatBubble(loadingBubble, "bot");
        const latestPair = this.chat.chatMessages.lastElementChild;
        if (latestPair) {
          latestPair.dataset.pending = "true";
        }
        try {
          const controller = new AbortController();
          const timeoutId = setTimeout(() => controller.abort(), this.requestTimeout);
          if (isOffline || !this.chatEndpoint) {
            throw new Error("Offline mode: chat service unavailable");
          }
          const response = await fetch(
            `${this.chatEndpoint}?query=${encodeURIComponent(question)}`,
            {
              method: "GET",
              headers: {
                "Content-Type": "application/json"
              },
              signal: controller.signal
            }
          );
          clearTimeout(timeoutId);
          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }
          const data = await response.json();
          const answer = data.answer || "Sorry, I could not fetch the answer.";
          const loaderId = loadingBubble.getAttribute("data-loader-id");
          if (loaderId) {
            hideLoading(loaderId);
          }
          loadingBubble.remove();
          const botBubble = this.chat.bubbles.createChatBubble(answer, "bot");
          this.chat.bubbles.addChatBubble(botBubble, "bot");
          await this.chat.bubbles.animateTyping(botBubble);
          localStorage2.remove("chat.pendingRequest");
          const completedPair = this.chat.chatMessages.lastElementChild;
          if (completedPair && completedPair.dataset && completedPair.dataset.pending) {
            delete completedPair.dataset.pending;
          }
          this.chat.history.saveChatHistory();
          this.announceToScreenReader(`AI response: ${answer.substring(0, 100)}...`);
          this.chat.emit("chat:responseReceived", { question, answer });
        } catch (error) {
          const loaderId = loadingBubble.getAttribute("data-loader-id");
          if (loaderId) {
            hideLoading(loaderId);
          }
          loadingBubble.remove();
          await this.handleFetchError(error, question);
          localStorage2.remove("chat.pendingRequest");
          const erroredPair = this.chat.chatMessages.lastElementChild;
          if (erroredPair && erroredPair.dataset && erroredPair.dataset.pending) {
            delete erroredPair.dataset.pending;
          }
          this.chat.history.saveChatHistory();
          this.chat.emit("chat:error", { question, error: error.message });
        }
      }
      /**
       * Handle fetch errors with user-friendly messages
       */
      async handleFetchError(error, question) {
        let errorMessage = "Sorry, I encountered an error. Please try again.";
        if (error.name === "AbortError") {
          errorMessage = "Request timed out. Please check your connection and try again.";
        } else if (error.message.includes("NetworkError") || error.message.includes("Failed to fetch")) {
          errorMessage = "Network error. Please check your internet connection.";
        } else if (error.message.includes("500")) {
          errorMessage = "Server error. Please try again in a moment.";
        } else if (error.message.includes("404")) {
          errorMessage = "Chat service temporarily unavailable. Please try again later.";
        }
        const errorBubble = this.chat.bubbles.createChatBubble(errorMessage, "bot", "error");
        this.chat.bubbles.addChatBubble(errorBubble, "bot");
        console.error("Chat API Error:", {
          question,
          error: error.message,
          stack: error.stack,
          endpoint: this.chatEndpoint
        });
        if (typeof handleError === "function") {
          handleError(error, "Chat API");
        }
      }
      /**
       * Announce message to screen readers
       */
      announceToScreenReader(message) {
        const announcement = document.createElement("div");
        announcement.setAttribute("aria-live", "polite");
        announcement.setAttribute("aria-atomic", "true");
        announcement.className = "sr-only";
        announcement.textContent = message;
        document.body.appendChild(announcement);
        setTimeout(() => {
          document.body.removeChild(announcement);
        }, 1e3);
      }
      /**
       * Test API connectivity
       */
      async testConnection() {
        try {
          const controller = new AbortController();
          const timeoutId = setTimeout(() => controller.abort(), 5e3);
          const response = await fetch(this.chatEndpoint, {
            method: "HEAD",
            signal: controller.signal
          });
          clearTimeout(timeoutId);
          return response.ok;
        } catch (error) {
          console.warn("Chat API connection test failed:", error.message);
          return false;
        }
      }
      /**
       * Update API configuration
       */
      updateConfig(config) {
        if (config.chatEndpoint) {
          this.chatEndpoint = config.chatEndpoint;
        }
        if (config.requestTimeout) {
          this.requestTimeout = config.requestTimeout;
        }
      }
    };
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/chat/ChatHistory.js
var ChatHistory;
var init_ChatHistory = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/chat/ChatHistory.js"() {
    init_utils();
    ChatHistory = class {
      constructor(chatManager) {
        this.chat = chatManager;
        this.storageKey = "chatHistory";
      }
      /**
       * Load chat history from localStorage
       */
      async loadChatHistory() {
        const chatHistory = localStorage2.get(this.storageKey, []);
        this.chat.chatMessages.innerHTML = "";
        if (!chatHistory || chatHistory.length === 0) {
          this.addInitialQAPair(
            "How do I use this chat?",
            "Ask a question about the documentation. You can also toggle between chat and table of contents view using the navigation controls."
          );
        } else {
          for (const pair of chatHistory) {
            if (pair.user && pair.bot) {
              const userBubble = this.chat.bubbles.createChatBubble(pair.user, "user");
              this.chat.bubbles.addChatBubble(userBubble, "user");
              const botBubble = this.chat.bubbles.createChatBubble(pair.bot, "bot");
              this.chat.bubbles.addChatBubble(botBubble, "bot");
            }
          }
        }
        this.scrollToBottom();
      }
      /**
       * Save chat history to localStorage
       */
      saveChatHistory() {
        try {
          const chatMessages = Array.from(this.chat.chatMessages.children);
          const chatHistory = chatMessages.map((pair) => {
            if (pair.dataset && pair.dataset.pending === "true") {
              return null;
            }
            const bubbles = Array.from(pair.children);
            if (bubbles.length >= 2) {
              return {
                user: bubbles[0].innerText,
                bot: bubbles[1].innerText,
                timestamp: Date.now()
              };
            }
            return null;
          }).filter(Boolean);
          localStorage2.set(this.storageKey, chatHistory);
        } catch (error) {
          console.error("Failed to save chat history:", error);
        }
      }
      /**
       * Clear entire conversation
       */
      clearConversation() {
        this.chat.chatMessages.innerHTML = "";
        this.saveChatHistory();
        this.chat.emit("chat:conversationCleared");
        setTimeout(() => {
          this.addInitialQAPair(
            "How do I use this chat?",
            "Ask a question about the documentation. You can also toggle between chat and table of contents view using the navigation controls."
          );
        }, 100);
      }
      /**
       * Add initial Q&A pair to show users how to use the chat
       */
      addInitialQAPair(question, answer) {
        const userBubble = this.chat.bubbles.createChatBubble(question, "user");
        this.chat.bubbles.addChatBubble(userBubble, "user");
        const botBubble = this.chat.bubbles.createChatBubble(answer, "bot");
        this.chat.bubbles.addChatBubble(botBubble, "bot");
      }
      /**
       * Export chat history as text
       */
      exportHistory() {
        const chatHistory = localStorage2.get(this.storageKey, []);
        let exportText = `Chat History Export - ${(/* @__PURE__ */ new Date()).toLocaleString()}
`;
        exportText += "=".repeat(50) + "\n\n";
        chatHistory.forEach((pair, index) => {
          exportText += `Conversation ${index + 1}:
`;
          exportText += `User: ${pair.user}
`;
          exportText += `Assistant: ${pair.bot}
`;
          if (pair.timestamp) {
            exportText += `Time: ${new Date(pair.timestamp).toLocaleString()}
`;
          }
          exportText += "\n" + "-".repeat(30) + "\n\n";
        });
        return exportText;
      }
      /**
       * Clear old history entries (keep only recent ones)
       */
      pruneHistory(maxEntries = 50) {
        const chatHistory = localStorage2.get(this.storageKey, []);
        if (chatHistory.length > maxEntries) {
          const prunedHistory = chatHistory.slice(-maxEntries);
          localStorage2.set(this.storageKey, prunedHistory);
        }
      }
      /**
       * Get conversation count
       */
      getConversationCount() {
        const chatHistory = localStorage2.get(this.storageKey, []);
        return chatHistory.length;
      }
      /**
       * Scroll chat to bottom
       */
      scrollToBottom() {
        if (this.chat.chatMessages) {
          this.chat.chatMessages.scrollTop = this.chat.chatMessages.scrollHeight;
        }
      }
      /**
       * Check if chat has any conversations
       */
      hasConversations() {
        const chatHistory = localStorage2.get(this.storageKey, []);
        return chatHistory.length > 0;
      }
      /**
       * Get the last conversation
       */
      getLastConversation() {
        const chatHistory = localStorage2.get(this.storageKey, []);
        return chatHistory[chatHistory.length - 1] || null;
      }
    };
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/chat/ChatBubbles.js
var ChatBubbles;
var init_ChatBubbles = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/chat/ChatBubbles.js"() {
    init_utils();
    init_sanitize();
    ChatBubbles = class {
      constructor(chatManager) {
        this.chat = chatManager;
        this.typingSpeed = chatManager.typingSpeed || 20;
      }
      /**
       * Create a chat bubble element
       */
      createChatBubble(text, sender, type = "normal") {
        const bubble = document.createElement("div");
        let baseClasses = `chat-bubble ${sender}`;
        if (type === "error") {
          baseClasses += " chat-bubble--error";
        } else if (sender === "user") {
          baseClasses += " chat-bubble--user";
        } else {
          baseClasses += " chat-bubble--bot";
        }
        bubble.className = baseClasses;
        const formattedText = this.formatChatText(text, sender);
        bubble.innerHTML = sanitizeHTML(formattedText);
        bubble.setAttribute("role", sender === "bot" ? "log" : "status");
        bubble.setAttribute("aria-live", "polite");
        return bubble;
      }
      /**
       * Create loading bubble using unified LoadingStateManager
       */
      createLoadingBubble() {
        const bubble = document.createElement("div");
        bubble.className = "chat-bubble bot p-2 rounded-lg text-black font-regular text-sm is-loading";
        const loaderId = showLoading(bubble, {
          type: "dots",
          message: "Thinking...",
          size: "small",
          variant: "minimal"
        });
        bubble.setAttribute("data-loader-id", loaderId);
        return bubble;
      }
      /**
       * Add chat bubble to the conversation
       */
      addChatBubble(bubble, sender) {
        let pair = this.chat.chatMessages.lastElementChild;
        if (!pair || !pair.classList.contains("chat-pair") || sender === "user") {
          pair = document.createElement("div");
          pair.className = "chat-pair group relative";
          this.chat.chatMessages.appendChild(pair);
        }
        pair.appendChild(bubble);
        this.handleAnimationsAndCleanup(bubble, sender, pair);
        if (bubble.classList.contains("is-loading")) {
          pair.dataset.pending = "true";
        } else {
          if (pair.dataset && pair.dataset.pending) {
            delete pair.dataset.pending;
          }
          this.chat.history.saveChatHistory();
        }
      }
      /**
       * Handle animations and cleanup for chat bubbles
       */
      handleAnimationsAndCleanup(bubble, sender, pair) {
        if (sender === "user") {
          bubble.classList.add("animate-pulse");
        } else {
          const userBubble = pair.querySelector(".user");
          userBubble == null ? void 0 : userBubble.classList.remove("animate-pulse");
          this.appendDeleteButton(pair);
        }
        this.scrollToBottom();
      }
      /**
       * Add delete button to conversation pair
       */
      appendDeleteButton(pair) {
        const deleteButton = document.createElement("button");
        deleteButton.className = "chat-delete";
        deleteButton.innerHTML = "\xD7";
        deleteButton.title = "Delete this conversation";
        deleteButton.addEventListener("click", () => {
          pair.style.opacity = "0";
          pair.style.transform = "translateX(20px)";
          setTimeout(() => {
            if (pair.parentNode === this.chat.chatMessages) {
              this.chat.chatMessages.removeChild(pair);
              this.chat.history.saveChatHistory();
            }
          }, 200);
        });
        pair.appendChild(deleteButton);
      }
      /**
       * Format chat text for better readability
       */
      formatChatText(text, sender) {
        if (sender === "bot") {
          let formatted = text.replace(/\.([A-Z])/g, ". $1");
          formatted = formatted.replace(/,([A-Z])/g, ", $1");
          formatted = formatted.split("\n\n").map((p) => `<p>${p}</p>`).join("");
          formatted = formatted.replace(/```([\s\S]*?)```/g, "<pre><code>$1</code></pre>");
          formatted = formatted.replace(/`([^`]*)`/g, "<code>$1</code>");
          return formatted;
        }
        return escapeHTML(text);
      }
      /**
       * Escape HTML to prevent XSS
       */
      escapeHtml(text) {
        return escapeHTML(text);
      }
      /**
       * Animate typing effect for messages
       */
      async animateTyping(bubble) {
        return new Promise((resolve) => {
          const text = bubble.innerText;
          bubble.innerText = "";
          let i = 0;
          const typeInterval = setInterval(() => {
            bubble.innerText += text.charAt(i);
            i++;
            if (i >= text.length) {
              clearInterval(typeInterval);
              resolve();
            }
          }, this.typingSpeed);
        });
      }
      /**
       * Add retry button for failed requests
       */
      addRetryButton(question) {
        const retryContainer = document.createElement("div");
        retryContainer.className = "flex justify-center my-2";
        const retryButton = document.createElement("button");
        retryButton.className = "px-4 py-2 bg-brand text-white rounded-lg hover:bg-brand-1 transition duration-300";
        retryButton.innerText = "Retry";
        retryButton.addEventListener("click", () => {
          retryContainer.remove();
          this.chat.api.fetchAnswer(question);
        });
        retryContainer.appendChild(retryButton);
        this.chat.chatMessages.appendChild(retryContainer);
      }
      /**
       * Scroll chat to bottom
       */
      scrollToBottom() {
        if (this.chat.chatMessages) {
          this.chat.chatMessages.scrollTop = this.chat.chatMessages.scrollHeight;
        }
      }
      /**
       * Remove all bubbles
       */
      clearAllBubbles() {
        if (this.chat.chatMessages) {
          this.chat.chatMessages.innerHTML = "";
        }
      }
      /**
       * Create a system message bubble
       */
      createSystemMessage(message, type = "info") {
        const bubble = document.createElement("div");
        bubble.className = `chat-bubble system chat-bubble--${type}`;
        bubble.innerHTML = `<em>${escapeHTML(message)}</em>`;
        bubble.setAttribute("role", "status");
        bubble.setAttribute("aria-live", "polite");
        return bubble;
      }
      /**
       * Add a typing indicator
       */
      showTypingIndicator() {
        const indicator = document.createElement("div");
        indicator.className = "typing-indicator";
        indicator.innerHTML = "<span>Assistant is typing</span>";
        indicator.id = "typing-indicator";
        const pair = document.createElement("div");
        pair.className = "chat-pair";
        pair.appendChild(indicator);
        this.chat.chatMessages.appendChild(pair);
        this.scrollToBottom();
        return indicator;
      }
      /**
       * Remove typing indicator
       */
      hideTypingIndicator() {
        const indicator = document.getElementById("typing-indicator");
        if (indicator && indicator.parentNode) {
          indicator.parentNode.remove();
        }
      }
      /**
       * Update typing speed
       */
      setTypingSpeed(speed) {
        this.typingSpeed = speed;
      }
    };
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/chat/ChatManager.js
var ChatManager;
var init_ChatManager = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/chat/ChatManager.js"() {
    init_Component();
    init_ChatUI();
    init_ChatAPI();
    init_ChatHistory();
    init_ChatBubbles();
    init_ComponentManager();
    ChatManager = class extends Component {
      constructor(config = {}) {
        super({
          name: "article-chat",
          selector: config.selector || "#chatContainer",
          ...config
        });
        const isOffline2 = window.HugoEnvironment && window.HugoEnvironment.environment === "offline";
        this.chatEndpoint = isOffline2 ? "" : config.chatEndpoint || "https://chat-2-lc4762co7a-uc.a.run.app/";
        this.requestTimeout = config.requestTimeout || 3e4;
        this.typingSpeed = config.typingSpeed || 20;
        this.chatMessages = null;
        this.productFilter = null;
        this.ui = new ChatUI(this);
        this.api = new ChatAPI(this, {
          chatEndpoint: this.chatEndpoint,
          requestTimeout: this.requestTimeout
        });
        this.history = new ChatHistory(this);
        this.bubbles = new ChatBubbles(this);
      }
      /**
       * Initialize the chat component
       */
      async onInit() {
        if (!this.element) {
          console.warn("ChatManager: Chat container not found");
          return;
        }
        this.cacheElements();
        if (!this.chatMessages) {
          console.warn("ChatManager: Chat messages container not found");
          return;
        }
        this.ui.cacheElements();
        if (!this.ui.validateElements()) {
          console.warn("ChatManager: Required UI elements not found");
          return;
        }
        this.ui.setupEventListeners();
        await this.history.loadChatHistory();
        try {
          const pending = (await Promise.resolve().then(() => (init_utils(), utils_exports))).localStorage.get("chat.pendingRequest", null);
          if (pending && pending.question) {
            const message = "Previous response was interrupted. Would you like to retry?";
            const bubble = this.bubbles.createSystemMessage(message, "info");
            this.bubbles.addChatBubble(bubble, "bot");
            this.bubbles.addRetryButton(pending.question);
            (await Promise.resolve().then(() => (init_utils(), utils_exports))).localStorage.remove("chat.pendingRequest");
          }
        } catch (e) {
        }
      }
      /**
       * Cache core DOM element references
       */
      cacheElements() {
        this.chatMessages = document.getElementById("chat-messages");
        this.productFilter = this.element.getAttribute("data-productFilter");
      }
      /**
       * Handle question submission from UI
       */
      async handleQuestionSubmit(questionText) {
        try {
          const userBubble = this.bubbles.createChatBubble(questionText, "user");
          this.bubbles.addChatBubble(userBubble, "user");
          await this.api.fetchAnswer(questionText);
          this.emit("chat:questionSubmitted", { question: questionText });
        } catch (error) {
          console.error("ChatManager: Error handling question submission:", error);
          this.emit("chat:error", { question: questionText, error: error.message });
        }
      }
      /**
       * Update configuration
       */
      updateConfig(newConfig) {
        if (newConfig.chatEndpoint || newConfig.requestTimeout) {
          this.api.updateConfig(newConfig);
        }
        if (newConfig.typingSpeed) {
          this.typingSpeed = newConfig.typingSpeed;
          this.bubbles.setTypingSpeed(newConfig.typingSpeed);
        }
      }
      /**
       * Get chat statistics
       */
      getStats() {
        return {
          conversationCount: this.history.getConversationCount(),
          hasConversations: this.history.hasConversations(),
          lastConversation: this.history.getLastConversation(),
          isExpanded: this.element.classList.contains("chat-expanded")
        };
      }
      /**
       * Export chat data
       */
      exportData() {
        return {
          history: this.history.exportHistory(),
          stats: this.getStats(),
          config: {
            endpoint: this.chatEndpoint,
            timeout: this.requestTimeout,
            typingSpeed: this.typingSpeed
          }
        };
      }
      /**
       * Focus the chat input
       */
      focus() {
        this.ui.focusInput();
      }
      /**
       * Clear the chat input
       */
      clearInput() {
        this.ui.clearInput();
      }
      /**
       * Show the chat container
       */
      show() {
        if (this.element) {
          this.element.classList.remove("hidden");
        }
      }
      /**
       * Hide the chat container
       */
      hide() {
        if (this.element) {
          this.element.classList.add("hidden");
        }
      }
      /**
       * Toggle chat visibility
       */
      toggle() {
        if (this.element) {
          this.element.classList.toggle("hidden");
        }
      }
      /**
       * Check if chat is visible
       */
      isVisible() {
        return this.element && !this.element.classList.contains("hidden");
      }
      /**
       * Test API connectivity
       */
      async testConnection() {
        return await this.api.testConnection();
      }
      /**
       * Manually trigger a conversation save
       */
      saveConversation() {
        this.history.saveChatHistory();
      }
      /**
       * Get current conversation data
       */
      getCurrentConversation() {
        const messages = Array.from(this.chatMessages.children);
        return messages.map((pair) => {
          const bubbles = Array.from(pair.children);
          return bubbles.map((bubble) => ({
            text: bubble.innerText,
            sender: bubble.classList.contains("user") ? "user" : "bot",
            type: bubble.classList.contains("chat-bubble--error") ? "error" : "normal"
          }));
        }).flat();
      }
      /**
       * Add a system message
       */
      addSystemMessage(message, type = "info") {
        const bubble = this.bubbles.createSystemMessage(message, type);
        const pair = document.createElement("div");
        pair.className = "chat-pair";
        pair.appendChild(bubble);
        this.chatMessages.appendChild(pair);
        this.bubbles.scrollToBottom();
      }
      /**
       * Component cleanup
       */
      onDestroy() {
        this.history.saveChatHistory();
      }
    };
    ComponentManager_default.register("article-chat", ChatManager);
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/chat/index.js
var chat_exports = {};
__export(chat_exports, {
  ChatAPI: () => ChatAPI,
  ChatBubbles: () => ChatBubbles,
  ChatHistory: () => ChatHistory,
  ChatUI: () => ChatUI,
  default: () => ChatManager
});
var init_chat = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/chat/index.js"() {
    init_ChatManager();
    init_ChatUI();
    init_ChatAPI();
    init_ChatHistory();
    init_ChatBubbles();
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/article/Header.js
var Header_exports = {};
__export(Header_exports, {
  ArticleHeader: () => ArticleHeader
});
var ArticleHeader;
var init_Header = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/article/Header.js"() {
    init_Component();
    init_AnimationBridge();
    init_storage();
    init_ComponentManager();
    ArticleHeader = class extends Component {
      constructor(config = {}) {
        super({
          name: "article-header",
          selector: config.selector || '[data-component="article-header"]',
          ...config
        });
        this.toggleBtn = null;
        this.metadataPanel = null;
        this.isExpanded = false;
        this.isAnimating = false;
        this.animationDuration = config.animationDuration || 400;
        this.maxHeight = config.maxHeight || 200;
      }
      async onInit() {
        if (!this.element) {
          console.warn("ArticleHeader: No article header found");
          return;
        }
        this.cacheElements();
        if (!this.toggleBtn || !this.metadataPanel) {
          console.warn("ArticleHeader: Missing required elements (toggle button or metadata panel)");
          return;
        }
        this.setupEventListeners();
        this.initializeState();
      }
      /**
       * Cache DOM element references
       */
      cacheElements() {
        this.toggleBtn = this.element.querySelector("[data-metadata-toggle]");
        this.metadataPanel = this.element.querySelector("[data-metadata-panel]");
      }
      /**
       * Setup event listeners
       */
      setupEventListeners() {
        this.addEventListener(this.toggleBtn, "click", (e) => {
          e.preventDefault();
          this.toggle();
        });
        this.addEventListener(this.toggleBtn, "keydown", (e) => {
          if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            this.toggle();
          }
        });
        this.addEventListener(document, "keydown", (e) => {
          if (e.key === "Escape" && this.isExpanded && !this.isAnimating) {
            this.collapse();
          }
        });
        this.addEventListener(window, "resize", () => {
          if (this.isExpanded) {
            this.adjustPanelHeight();
          }
        });
      }
      /**
       * Initialize component state from localStorage
       */
      initializeState() {
        const stored = localStorage2.get("article-metadata-expanded");
        const shouldExpand = stored === "true";
        if (shouldExpand) {
          this.expand(false);
        } else {
          this.collapse(false);
        }
      }
      /**
       * Toggle the metadata panel
       */
      toggle() {
        if (this.isAnimating) {
          return;
        }
        if (this.isExpanded) {
          this.collapse();
        } else {
          this.expand();
        }
      }
      /**
       * Expand the metadata panel
       */
      expand(animate = true) {
        if (this.isExpanded || this.isAnimating) {
          return;
        }
        this.isAnimating = true;
        this.isExpanded = true;
        this.toggleBtn.setAttribute("aria-expanded", "true");
        this.metadataPanel.setAttribute("aria-hidden", "false");
        this.updateButtonText("Hide Article Info");
        if (animate) {
          this.element.classList.add("expanding");
          this.metadataPanel.style.maxHeight = this.metadataPanel.scrollHeight + "px";
          setTimeout(() => {
            this.element.classList.remove("expanding");
            this.metadataPanel.style.maxHeight = this.maxHeight + "px";
            this.isAnimating = false;
            this.emit("header:metadataExpanded");
          }, this.animationDuration);
        } else {
          this.metadataPanel.style.maxHeight = this.maxHeight + "px";
          this.isAnimating = false;
          this.emit("header:metadataExpanded");
        }
        localStorage2.set("article-metadata-expanded", true);
      }
      /**
       * Collapse the metadata panel
       */
      collapse(animate = true) {
        if (!this.isExpanded || this.isAnimating) {
          return;
        }
        this.isAnimating = true;
        this.isExpanded = false;
        this.toggleBtn.setAttribute("aria-expanded", "false");
        this.metadataPanel.setAttribute("aria-hidden", "true");
        this.updateButtonText("Article Info");
        if (animate) {
          this.element.classList.add("collapsing");
          const currentHeight = this.metadataPanel.scrollHeight;
          this.metadataPanel.style.maxHeight = currentHeight + "px";
          this.metadataPanel.offsetHeight;
          this.metadataPanel.style.maxHeight = "0";
          const duration = animationBridge.getTiming("medium");
          setTimeout(() => {
            this.element.classList.remove("collapsing");
            this.isAnimating = false;
            this.emit("header:metadataCollapsed");
          }, duration);
        } else {
          this.metadataPanel.style.maxHeight = "0";
          this.isAnimating = false;
          this.emit("header:metadataCollapsed");
        }
        localStorage2.set("article-metadata-expanded", false);
      }
      /**
       * Update button text for accessibility
       */
      updateButtonText(text) {
        const buttonText = this.toggleBtn.querySelector(".article-header__toggle-text");
        if (buttonText) {
          buttonText.textContent = text;
        }
      }
      /**
       * Adjust panel height on window resize
       */
      adjustPanelHeight() {
        if (this.isExpanded && !this.isAnimating) {
          this.metadataPanel.style.maxHeight = "none";
          const newHeight = this.metadataPanel.scrollHeight;
          this.metadataPanel.style.maxHeight = Math.min(newHeight, this.maxHeight) + "px";
        }
      }
      /**
       * Get current component state
       */
      getState() {
        return {
          isExpanded: this.isExpanded,
          isAnimating: this.isAnimating,
          hasMetadata: !!this.metadataPanel,
          hasToggle: !!this.toggleBtn
        };
      }
      /**
       * Programmatically expand the panel
       */
      show() {
        if (!this.isExpanded) {
          this.expand();
        }
      }
      /**
       * Programmatically collapse the panel
       */
      hide() {
        if (this.isExpanded) {
          this.collapse();
        }
      }
      /**
       * Reset to default state
       */
      reset() {
        this.collapse(false);
        localStorage2.remove("article-metadata-expanded");
        this.emit("header:reset");
      }
      /**
       * Update configuration
       */
      updateConfig(config) {
        if (config.animationDuration !== void 0) {
          this.animationDuration = config.animationDuration;
        }
        if (config.maxHeight !== void 0) {
          this.maxHeight = config.maxHeight;
        }
      }
      /**
       * Component cleanup
       */
      onDestroy() {
        if (this.isAnimating) {
          this.element.classList.remove("expanding", "collapsing");
          this.isAnimating = false;
        }
        this.isExpanded = false;
      }
    };
    ComponentManager_default.register("article-header", ArticleHeader);
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/article/Tabs.js
var Tabs_exports = {};
__export(Tabs_exports, {
  ArticleTabs: () => ArticleTabs
});
var ArticleTabs;
var init_Tabs = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/article/Tabs.js"() {
    init_Component();
    init_AnimationBridge();
    init_ComponentManager();
    ArticleTabs = class extends Component {
      constructor(config = {}) {
        super({
          name: "article-tabs",
          selector: config.selector || '[data-component="tabs"], [data-component="article-tabs"]',
          ...config
        });
        this.tabContainers = [];
      }
      async onInit() {
        this.setLoadingState(true);
        this.updateComponentState("initializing");
        if (document.readyState === "loading") {
          await new Promise((resolve) => {
            document.addEventListener("DOMContentLoaded", resolve, { once: true });
          });
        }
        this.tabContainers = Array.from(document.querySelectorAll('[data-component="article-tabs"], [data-component="tabs"]'));
        this.tabContainers = this.tabContainers.filter((c) => c.querySelector("[data-tab-id]") && c.querySelector("[data-tabcontent]"));
        if (this.tabContainers.length === 0) {
          console.warn("ArticleTabs: No tab containers found");
          this.setLoadingState(false);
          this.updateComponentState("error");
          return;
        }
        this.initializeAllTabs();
        this.setLoadingState(false);
        this.updateComponentState("ready");
      }
      /**
       * Initialize all tab containers
       */
      initializeAllTabs() {
        this.tabContainers.forEach((tabContainer) => {
          this.initializeTabContainer(tabContainer);
        });
      }
      /**
       * Initialize a single tab container
       */
      initializeTabContainer(tabContainer) {
        const options = tabContainer.querySelectorAll("[data-tab-id]");
        const optionContent = tabContainer.querySelectorAll("[data-tabcontent]");
        if (options.length === 0) {
          console.warn("ArticleTabs: No tab options found in container");
          return;
        }
        this.ensureActiveTab(tabContainer);
        this.setupTabEventListeners(tabContainer, options);
        this.updateContent(tabContainer, optionContent);
        this.emit("tabs:containerInitialized", {
          container: tabContainer,
          optionsCount: options.length,
          contentCount: optionContent.length
        });
      }
      /**
       * Ensure at least one tab is active initially
       */
      ensureActiveTab(tabContainer) {
        const activeButtons = tabContainer.querySelectorAll("button.bg-brand");
        if (activeButtons.length === 0) {
          const firstButton = tabContainer.querySelector("button[data-tab-option]");
          if (firstButton) {
            this.activateButton(firstButton);
            this.emit("tabs:defaultTabActivated", { button: firstButton });
          }
        }
      }
      /**
       * Setup event listeners for tab buttons
       */
      setupTabEventListeners(tabContainer, options) {
        options.forEach((option) => {
          const buttons = option.querySelectorAll("button");
          buttons.forEach((button) => {
            this.addEventListener(button, "click", (e) => {
              this.handleButtonClick(e, tabContainer);
            });
            this.addEventListener(button, "keydown", (e) => {
              if (e.key === "Enter" || e.key === " ") {
                e.preventDefault();
                this.handleButtonClick(e, tabContainer);
              }
            });
          });
        });
      }
      /**
       * Handle button click events
       */
      handleButtonClick(e, tabContainer) {
        const clickedButton = e.target;
        const parentOption = clickedButton.closest("[data-tab-id]");
        if (!parentOption) return;
        this.updateComponentState("switching");
        this.setCSSProperty("--tab-switching", "true");
        const siblingButtons = parentOption.querySelectorAll("button");
        siblingButtons.forEach((button) => {
          if (button !== clickedButton) {
            this.deactivateButton(button);
          }
        });
        this.activateButton(clickedButton);
        const optionContent = tabContainer.querySelectorAll("[data-tabcontent]");
        this.updateContent(tabContainer, optionContent);
        setTimeout(() => {
          this.updateComponentState("active");
          this.setCSSProperty("--tab-switching", "false");
        }, 200);
        this.emit("tabs:buttonClicked", {
          button: clickedButton,
          container: tabContainer,
          option: clickedButton.getAttribute("data-tab-option")
        });
      }
      /**
       * Activate a button (make it selected)
       */
      activateButton(button) {
        button.classList.remove("bg-white", "text-black");
        button.classList.add("bg-brand", "text-white");
        button.setAttribute("aria-selected", "true");
      }
      /**
       * Deactivate a button (make it unselected)
       */
      deactivateButton(button) {
        button.classList.remove("bg-brand", "text-white");
        button.classList.add("bg-white", "text-black");
        button.setAttribute("aria-selected", "false");
      }
      /**
       * Update content visibility based on active buttons
       */
      updateContent(tabContainer, optionContent) {
        const contentWrapper = tabContainer.querySelector(".tabs__content, .w-full");
        const currentHeight = contentWrapper ? contentWrapper.offsetHeight : 0;
        const activeButtons = tabContainer.querySelectorAll("button.bg-brand");
        const activeButtonOptions = [];
        activeButtons.forEach((button) => {
          const tabOption = button.getAttribute("data-tab-option");
          if (tabOption) {
            activeButtonOptions.push(tabOption);
          }
        });
        const convertedText = activeButtonOptions.join("/").toLowerCase();
        let visibleContent = null;
        const contentToHide = [];
        const contentToShow = [];
        optionContent.forEach((content) => {
          const contentValue = content.getAttribute("data-tabcontent");
          const isCurrentlyVisible = content.classList.contains("is-active");
          if (contentValue === convertedText) {
            visibleContent = content;
            if (!isCurrentlyVisible) {
              contentToShow.push(content);
            }
          } else {
            if (isCurrentlyVisible) {
              contentToHide.push(content);
            }
          }
        });
        const targetPanel = contentToShow[0] || visibleContent;
        if (contentWrapper && targetPanel) {
          const targetHeight = targetPanel.scrollHeight;
          contentWrapper.style.height = currentHeight + "px";
          contentWrapper.offsetHeight;
          requestAnimationFrame(() => {
            contentWrapper.style.height = targetHeight + "px";
          });
          setTimeout(() => {
            contentWrapper.style.removeProperty("height");
          }, 300);
        }
        contentToHide.forEach((panel) => {
          this.hideContent(panel);
          panel.setAttribute("aria-hidden", "true");
        });
        setTimeout(() => {
          contentToShow.forEach((panel) => {
            this.showContent(panel);
            panel.setAttribute("aria-hidden", "false");
          });
        }, 60);
        this.emit("tabs:contentUpdated", {
          container: tabContainer,
          activeOptions: activeButtonOptions,
          visibleContent,
          contentIdentifier: convertedText
        });
      }
      /**
       * Get active tabs for a specific container
       */
      getActiveTabs(tabContainer) {
        const activeButtons = tabContainer.querySelectorAll("button.bg-brand");
        return Array.from(activeButtons).map((button) => {
          var _a;
          return {
            button,
            option: button.getAttribute("data-tab-option"),
            tabId: (_a = button.closest("[data-tab-id]")) == null ? void 0 : _a.getAttribute("data-tab-id")
          };
        });
      }
      /**
       * Programmatically activate a tab option
       */
      activateTabOption(tabContainer, tabOption) {
        const button = tabContainer.querySelector(`button[data-tab-option="${tabOption}"]`);
        if (button) {
          button.click();
          return true;
        }
        return false;
      }
      /**
       * Reset all tabs in a container to default state
       */
      resetTabContainer(tabContainer) {
        const allButtons = tabContainer.querySelectorAll("button[data-tab-option]");
        allButtons.forEach((button) => this.deactivateButton(button));
        const allContent = tabContainer.querySelectorAll("[data-tabcontent]");
        allContent.forEach((content) => {
          content.classList.remove("is-active");
          content.setAttribute("aria-hidden", "true");
        });
        this.ensureActiveTab(tabContainer);
        this.updateContent(tabContainer, allContent);
        this.emit("tabs:containerReset", { container: tabContainer });
      }
      /**
       * Show content with smooth crossfade transition
       */
      showContent(element) {
        element.classList.add("is-active");
      }
      /**
       * Hide content with smooth fade out
       */
      hideContent(element) {
        element.classList.remove("is-active");
      }
      /**
       * Component cleanup
       */
      onDestroy() {
      }
    };
    ComponentManager_default.register("article-tabs", ArticleTabs);
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/article/TOC.js
var TOC_exports = {};
__export(TOC_exports, {
  ArticleTOC: () => ArticleTOC
});
var ArticleTOC;
var init_TOC = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/article/TOC.js"() {
    init_Component();
    init_dom();
    init_ComponentManager();
    ArticleTOC = class extends Component {
      constructor(config = {}) {
        super({
          name: "article-toc",
          selector: config.selector || "#TableOfContents",
          ...config
        });
        this.tocLinks = [];
        this.sections = [];
        this.scrollOffset = config.scrollOffset || 50;
        this.progressBar = null;
        this.progressText = null;
        this.throttledHighlighter = null;
        this.throttledProgressUpdater = null;
      }
      async onInit() {
        if (!this.element) {
          return;
        }
        this.tocLinks = Array.from(this.element.querySelectorAll("a"));
        this.sections = Array.from(document.querySelectorAll("h2, h3"));
        if (this.tocLinks.length === 0 || this.sections.length === 0) {
          return;
        }
        this.initializeReadingProgress();
        this.throttledHighlighter = throttle(() => this.highlightInView(), 16);
        this.throttledProgressUpdater = throttle(() => this.updateProgress(), 16);
        this.setupScrollListeners();
        this.highlightInView();
      }
      /**
       * Highlight the TOC link for the currently viewed section
       */
      highlightInView() {
        this.sections.forEach((section) => {
          const rect = section.getBoundingClientRect();
          if (rect.top + this.scrollOffset >= 0 && rect.bottom <= window.innerHeight + this.scrollOffset) {
            const sectionId = section.id;
            if (!sectionId) return;
            const activeLink = this.tocLinks.find(
              (link) => link.getAttribute("href") === `#${sectionId}`
            );
            if (activeLink) {
              this.tocLinks.forEach((link) => {
                link.classList.remove("text-brand", "toc-active");
              });
              activeLink.classList.add("text-brand", "toc-active");
              this.emit("toc:sectionChanged", {
                sectionId,
                element: section,
                link: activeLink
              });
            }
          }
        });
      }
      /**
       * Initialize reading progress functionality
       */
      initializeReadingProgress() {
        this.progressBar = document.getElementById("progress-bar");
        this.progressText = document.getElementById("progress-text");
        if (this.progressBar && this.progressText) {
          this.updateComponentState("initializing-progress");
          this.progressBar.style.opacity = "0";
          this.progressBar.style.transition = "all var(--timing-medium) var(--easing-emphasized)";
          this.progressText.style.opacity = "0";
          this.progressText.style.transition = "all var(--timing-medium) var(--easing-emphasized)";
          requestAnimationFrame(() => {
            this.updateProgress();
            setTimeout(() => {
              this.progressBar.style.opacity = "1";
              setTimeout(() => {
                this.progressText.style.opacity = "1";
                this.updateComponentState("progress-active");
              }, 100);
            }, 150);
          });
        }
      }
      /**
       * Update reading progress bar
       */
      updateProgress() {
        if (!this.progressBar || !this.progressText) return;
        const article = document.querySelector("#articleContent") || document.querySelector(".article-content") || document.querySelector("main");
        if (!article) return;
        const articleTop = article.offsetTop;
        const articleHeight = article.offsetHeight;
        const scrollTop = window.pageYOffset;
        const windowHeight = window.innerHeight;
        const progress = Math.min(100, Math.max(
          0,
          (scrollTop + windowHeight - articleTop) / articleHeight * 100
        ));
        const currentWidth = parseFloat(this.progressBar.style.width) || 0;
        const difference = Math.abs(progress - currentWidth);
        if (difference > 2) {
          this.progressBar.classList.add("updating");
          setTimeout(() => {
            this.progressBar.classList.remove("updating");
          }, 200);
        }
        this.progressBar.style.width = `${progress}%`;
        this.progressText.textContent = `${Math.round(progress)}%`;
        if (progress < 10) {
          this.setCSSProperty("--progress-stage", "start");
        } else if (progress > 90) {
          this.setCSSProperty("--progress-stage", "end");
        } else {
          this.setCSSProperty("--progress-stage", "middle");
        }
        this.emit("toc:progressChanged", { progress });
      }
      /**
       * Setup scroll event listeners using modern AbortController pattern
       */
      setupScrollListeners() {
        this.addEventListener(window, "scroll", this.throttledHighlighter, { passive: true });
        if (this.progressBar && this.progressText) {
          this.addEventListener(window, "scroll", this.throttledProgressUpdater, { passive: true });
        }
      }
      /**
       * Smooth scroll to section
       */
      scrollToSection(sectionId) {
        const section = document.getElementById(sectionId);
        if (section) {
          const yOffset = -this.scrollOffset;
          const y = section.getBoundingClientRect().top + window.pageYOffset + yOffset;
          window.scrollTo({
            top: y,
            behavior: "smooth"
          });
          this.emit("toc:scrollToSection", { sectionId, element: section });
        }
      }
      /**
       * Component cleanup
       */
      onDestroy() {
      }
    };
    ComponentManager_default.register("article-toc", ArticleTOC);
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/article/Tiles.js
var Tiles_exports = {};
__export(Tiles_exports, {
  ArticleTiles: () => ArticleTiles
});
var ArticleTiles;
var init_Tiles = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/article/Tiles.js"() {
    init_Component();
    init_AnimationBridge();
    init_ComponentManager();
    ArticleTiles = class extends Component {
      constructor(config = {}) {
        super({
          name: "article-tiles",
          selector: config.selector || ".tile",
          ...config
        });
        this.tiles = [];
        this.globalPosition = { x: 50, y: 50 };
        this.animationId = null;
        this.isAnimating = false;
      }
      async onInit() {
        this.tiles = Array.from(document.querySelectorAll(".tile"));
        if (this.tiles.length === 0) {
          console.warn("ArticleTiles: No tiles found");
          return;
        }
        this.setupEventListeners();
        this.setupStaggeredEntryAnimations();
        this.startGradientAnimation();
      }
      /**
       * Setup event listeners for mouse tracking and tile interactions
       */
      setupEventListeners() {
        this.addEventListener(document, "mousemove", (e) => {
          this.globalPosition.x = e.clientX;
          this.globalPosition.y = e.clientY;
        }, { passive: true });
        this.tiles.forEach((tile) => {
          this.addEventListener(tile, "mouseenter", (e) => this.handleTileHover(e));
          this.addEventListener(tile, "mouseleave", (e) => this.handleTileLeave(e));
          this.addEventListener(tile, "focus", (e) => this.handleTileHover(e));
          this.addEventListener(tile, "blur", (e) => this.handleTileLeave(e));
        });
        this.addEventListener(window, "beforeunload", () => {
          this.stopGradientAnimation();
        });
      }
      /**
       * Handle tile hover effects
       */
      handleTileHover(e) {
        const tile = e.currentTarget;
        tile.style.transform = "translateY(-8px) scale(1.02)";
        tile.style.zIndex = "10";
        this.emit("tiles:tileHovered", { tile });
      }
      /**
       * Handle tile leave effects
       */
      handleTileLeave(e) {
        const tile = e.currentTarget;
        tile.style.transform = "translateY(0) scale(1.0)";
        tile.style.zIndex = "";
        this.emit("tiles:tileUnhovered", { tile });
      }
      /**
       * Setup staggered entry animations for tiles
       */
      setupStaggeredEntryAnimations() {
        this.tiles.forEach((tile, index) => {
          tile.style.opacity = "0";
          tile.style.transform = "translateY(20px)";
          const baseDelay = animationBridge.getTiming("fast");
          const staggerDelay = index * (baseDelay / 10);
          const delay = staggerDelay + Math.random() * baseDelay / 2;
          setTimeout(() => {
            tile.style.opacity = "1";
            tile.style.transform = "translateY(0)";
            this.emit("tiles:tileAnimatedIn", { tile, index, delay });
          }, delay);
        });
      }
      /**
       * Start gradient animation loop
       */
      startGradientAnimation() {
        if (this.isAnimating) return;
        this.isAnimating = true;
        this.updateGradients();
      }
      /**
       * Stop gradient animation loop
       */
      stopGradientAnimation() {
        if (this.animationId) {
          cancelAnimationFrame(this.animationId);
          this.animationId = null;
        }
        this.isAnimating = false;
      }
      /**
       * Update gradient positions for all tiles
       */
      updateGradients() {
        this.tiles.forEach((tile) => {
          const rect = tile.getBoundingClientRect();
          const mouseX = Math.max(0, Math.min(
            100,
            (this.globalPosition.x - rect.left) / rect.width * 100
          ));
          const mouseY = Math.max(0, Math.min(
            100,
            (this.globalPosition.y - rect.top) / rect.height * 100
          ));
          const hoverGradient = `radial-gradient(600px circle at ${mouseX}% ${mouseY}%, var(--primary-gradient-color, #3b82f6), var(--secondary-gradient-color, rgba(30,64,175,0)))`;
          const baseBg = getComputedStyle(tile).getPropertyValue("--tile-base-bg") || "transparent";
          tile.style.background = `${hoverGradient}, ${baseBg}`;
        });
        if (this.isAnimating) {
          this.animationId = requestAnimationFrame(() => this.updateGradients());
        }
      }
      /**
       * Update gradient colors
       */
      updateGradientColors(primaryColor, secondaryColor) {
        document.documentElement.style.setProperty("--primary-gradient-color", primaryColor);
        document.documentElement.style.setProperty("--secondary-gradient-color", secondaryColor);
        this.emit("tiles:colorsUpdated", { primaryColor, secondaryColor });
      }
      /**
       * Reset all tile styles
       */
      resetTiles() {
        this.tiles.forEach((tile) => {
          tile.style.opacity = "";
          tile.style.transform = "";
          tile.style.transition = "";
          tile.style.zIndex = "";
        });
        this.emit("tiles:tilesReset");
      }
      /**
       * Add new tiles dynamically
       */
      addTiles(newTiles) {
        const tilesToAdd = Array.isArray(newTiles) ? newTiles : [newTiles];
        tilesToAdd.forEach((tile) => {
          if (tile && tile.classList.contains("tile")) {
            this.tiles.push(tile);
            this.addEventListener(tile, "mouseenter", (e) => this.handleTileHover(e));
            this.addEventListener(tile, "mouseleave", (e) => this.handleTileLeave(e));
            this.addEventListener(tile, "focus", (e) => this.handleTileHover(e));
            this.addEventListener(tile, "blur", (e) => this.handleTileLeave(e));
            tile.style.opacity = "0";
            tile.style.transform = "translateY(20px)";
            setTimeout(() => {
              tile.style.opacity = "1";
              tile.style.transform = "translateY(0)";
            }, 100);
          }
        });
        this.emit("tiles:tilesAdded", { addedTiles: tilesToAdd });
      }
      /**
       * Component cleanup
       */
      onDestroy() {
        this.stopGradientAnimation();
        this.resetTiles();
      }
    };
    ComponentManager_default.register("article-tiles", ArticleTiles);
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/article/Summarization.js
var Summarization_exports = {};
__export(Summarization_exports, {
  ArticleSummarization: () => ArticleSummarization
});
var ArticleSummarization;
var init_Summarization = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/article/Summarization.js"() {
    init_Component();
    init_sanitize();
    init_ComponentManager();
    ArticleSummarization = class extends Component {
      constructor(config = {}) {
        super({
          name: "article-summarization",
          selector: config.selector || "#articleSummarizationContainer",
          ...config
        });
        this.summaryEndpoint = config.summaryEndpoint || "https://summarization-1-lc4762co7a-uc.a.run.app";
        this.articleContent = null;
        this.summaryContainer = null;
        this.isLoading = false;
      }
      async onInit() {
        if (!this.element) {
          console.warn("ArticleSummarization: Summarization container not found");
          return;
        }
        this.articleContent = document.getElementById("articleContent");
        if (!this.articleContent) {
          console.warn("ArticleSummarization: Article content not found");
          return;
        }
        this.setupKeyboardShortcuts();
      }
      /**
       * Setup keyboard shortcuts
       */
      setupKeyboardShortcuts() {
        this.addEventListener(document, "keydown", (e) => {
          if ((e.ctrlKey || e.metaKey) && e.code === "Slash") {
            e.preventDefault();
            this.toggleSummarization();
          }
        });
      }
      /**
       * Toggle summarization container visibility
       */
      async toggleSummarization() {
        this.element.classList.toggle("hidden");
        if (!this.element.classList.contains("hidden")) {
          await this.fetchAndDisplaySummary();
        }
        this.emit("summarization:toggled", {
          visible: !this.element.classList.contains("hidden")
        });
      }
      /**
       * Fetch and display article summary
       */
      async fetchAndDisplaySummary() {
        if (this.isLoading) return;
        const isOffline2 = window.HugoEnvironment && window.HugoEnvironment.environment === "offline";
        if (isOffline2) {
          this.displayError("Summarization is unavailable in offline mode.");
          return;
        }
        const articleText = this.articleContent.innerText;
        if (!articleText || articleText.trim().length < 100) {
          this.displayError("Article too short to summarize");
          return;
        }
        this.isLoading = true;
        this.showLoadingState();
        try {
          const response = await fetch(this.summaryEndpoint, {
            method: "POST",
            headers: {
              "Content-Type": "application/json"
            },
            body: JSON.stringify({
              article_text: articleText
            })
          });
          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }
          const data = await response.json();
          this.updateUIWithSummary(data.summarization || data.summary);
          this.emit("summarization:completed", { summary: data.summarization });
        } catch (error) {
          console.error("Summarization failed:", error);
          this.displayError("Failed to generate summary. Please try again.");
          this.emit("summarization:error", { error });
        } finally {
          this.isLoading = false;
        }
      }
      /**
       * Show loading state
       */
      showLoadingState() {
        this.element.innerHTML = `
      <div class="flex items-center justify-center p-8">
        <div class="animate-spin h-8 w-8 border-2 border-brand border-t-transparent rounded-full mr-3"></div>
        <span class="text-gray-600">Generating summary...</span>
      </div>
    `;
      }
      /**
       * Update UI with generated summary
       */
      updateUIWithSummary(summary) {
        if (!summary) {
          this.displayError("No summary generated");
          return;
        }
        const safeSummaryHTML = sanitizeHTML(this.formatSummary(summary));
        this.element.innerHTML = `
      <div class="bg-blue-50 border border-blue-200 rounded-lg p-6">
        <div class="flex items-center justify-between mb-4">
          <h3 class="text-lg font-semibold text-blue-900">Article Summary</h3>
          <button 
            class="text-blue-600 hover:text-blue-800 text-sm"
            onclick="this.closest('#articleSummarizationContainer').classList.add('hidden')"
          >
            \u2715 Close
          </button>
        </div>
        <div class="prose prose-sm text-gray-700">
          ${safeSummaryHTML}
        </div>
        <div class="mt-4 text-xs text-gray-500">
          Generated by AI \u2022 Press Ctrl/Cmd + / to toggle
        </div>
      </div>
    `;
      }
      /**
       * Format summary text for display
       */
      formatSummary(summary) {
        return summary.split("\n").filter((line) => line.trim()).map((line) => `<p>${line.trim()}</p>`).join("");
      }
      /**
       * Display error message
       */
      displayError(message) {
        const safeMessage = escapeHTML(message);
        this.element.innerHTML = `
      <div class="bg-red-50 border border-red-200 rounded-lg p-6">
        <div class="flex items-center justify-between mb-2">
          <h3 class="text-lg font-semibold text-red-900">Summary Error</h3>
          <button 
            class="text-red-600 hover:text-red-800 text-sm"
            onclick="this.closest('#articleSummarizationContainer').classList.add('hidden')"
          >
            \u2715 Close
          </button>
        </div>
        <p class="text-red-700">${safeMessage}</p>
        <button 
          class="mt-3 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 text-sm"
          onclick="this.closest('[data-component]').__component?.fetchAndDisplaySummary()"
        >
          Try Again
        </button>
      </div>
    `;
      }
      /**
       * Show summarization container
       */
      show() {
        this.element.classList.remove("hidden");
        this.fetchAndDisplaySummary();
      }
      /**
       * Hide summarization container
       */
      hide() {
        this.element.classList.add("hidden");
      }
      /**
       * Component cleanup
       */
      onDestroy() {
        this.isLoading = false;
      }
    };
    ComponentManager_default.register("article-summarization", ArticleSummarization);
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/article/RelatedContent.js
var RelatedContent_exports = {};
__export(RelatedContent_exports, {
  ArticleRelatedContent: () => ArticleRelatedContent
});
var log9, ArticleRelatedContent;
var init_RelatedContent = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/article/RelatedContent.js"() {
    init_Component();
    init_storage();
    init_accessibility();
    init_Logger();
    init_ComponentManager();
    log9 = logger.component("RelatedContent");
    ArticleRelatedContent = class extends Component {
      constructor(config = {}) {
        super({
          name: "article-related-content",
          selector: '[data-component="article-related-content"]',
          ...config
        });
        this.options = {
          defaultView: "compact",
          storageKey: "related-content-preferences",
          animationDuration: 300,
          ...this.options
        };
        this.currentView = this.options.defaultView;
        this.isCollapsed = false;
        this.viewButtons = /* @__PURE__ */ new Map();
      }
      /**
       * Setup DOM elements
       */
      setupElements() {
        super.setupElements();
        this.viewButtons.clear();
        this.element.querySelectorAll(".related-content__view-toggle").forEach((btn) => {
          const view = btn.getAttribute("data-view");
          this.viewButtons.set(view, btn);
        });
        this.collapseButton = this.element.querySelector(".related-content__collapse-toggle");
        this.contentContainer = this.element.querySelector(".related-content__container");
        if (!this.contentContainer) {
          log9.warn("Related content container not found");
          return;
        }
        log9.debug("Elements setup complete");
      }
      /**
       * Bind event listeners using component lifecycle methods
       */
      bindEvents() {
        this.viewButtons.forEach((button, view) => {
          this.addEventListener(button, "click", (e) => {
            e.preventDefault();
            this.switchView(view);
          });
        });
        if (this.collapseButton) {
          this.addEventListener(this.collapseButton, "click", (e) => {
            e.preventDefault();
            this.toggleCollapse();
          });
        }
        this.setupUsageTracking();
        log9.debug("Event listeners bound");
      }
      /**
       * Initialize component
       */
      async onInit() {
        if (!this.element) {
          log9.warn("Related content element not found");
          return;
        }
        this.restorePreferences();
        log9.info("ArticleRelatedContent initialized");
      }
      /**
       * Switch between view modes (compact/cards)
       */
      switchView(view) {
        if (view === this.currentView) return;
        const prevView = this.currentView;
        this.currentView = view;
        this.updateComponentState("switching-view");
        this.setLoadingState(true);
        this.setCSSProperty("--view-switching", "true");
        this.viewButtons.forEach((btn, btnView) => {
          btn.classList.toggle("active", btnView === view);
        });
        const allViews = this.element.querySelectorAll("[data-view]");
        allViews.forEach((viewEl) => {
          if (viewEl.classList.contains("related-content__view-toggle")) return;
          viewEl.style.opacity = "0";
          setTimeout(() => {
            viewEl.classList.add("hidden");
          }, 150);
        });
        const targetView = this.element.querySelector(`[data-view="${view}"]:not(.related-content__view-toggle)`);
        if (targetView) {
          setTimeout(() => {
            targetView.classList.remove("hidden");
            requestAnimationFrame(() => {
              targetView.style.opacity = "1";
            });
          }, 150);
        }
        setTimeout(() => {
          this.setLoadingState(false);
          this.updateComponentState("view-active");
          this.setCSSProperty("--view-switching", "false");
        }, 300);
        this.savePreferences();
        announceToScreenReader(`Switched to ${view} view`);
        this.emit("viewChanged", {
          previousView: prevView,
          currentView: view
        });
        log9.debug(`View switched from ${prevView} to ${view}`);
      }
      /**
       * Toggle collapse state of the entire section
       */
      toggleCollapse() {
        this.isCollapsed = !this.isCollapsed;
        this.collapseButton.setAttribute("data-collapsed", this.isCollapsed);
        if (this.isCollapsed) {
          this.contentContainer.style.display = "none";
        } else {
          this.contentContainer.style.display = "block";
        }
        this.savePreferences();
        const status = this.isCollapsed ? "collapsed" : "expanded";
        announceToScreenReader(`Related content section ${status}`);
        this.emit("collapsed", {
          collapsed: this.isCollapsed
        });
        log9.debug(`Section ${status}`);
      }
      /**
       * Save user preferences using existing storage utility
       */
      savePreferences() {
        const preferences = {
          view: this.currentView,
          collapsed: this.isCollapsed,
          timestamp: Date.now()
        };
        localStorage2.set(this.options.storageKey, preferences);
      }
      /**
       * Restore user preferences from storage
       */
      restorePreferences() {
        const preferences = localStorage2.get(this.options.storageKey, {});
        if (preferences.view && ["compact", "cards"].includes(preferences.view)) {
          this.currentView = preferences.view;
          this.viewButtons.forEach((btn, btnView) => {
            btn.classList.toggle("active", btnView === preferences.view);
          });
          const targetView = this.element.querySelector(`[data-view="${preferences.view}"]:not(.related-content__view-toggle)`);
          if (targetView) {
            this.element.querySelectorAll("[data-view]:not(.related-content__view-toggle)").forEach((v) => v.classList.add("hidden"));
            targetView.classList.remove("hidden");
          }
        }
        if (preferences.collapsed) {
          this.isCollapsed = !preferences.collapsed;
          this.toggleCollapse();
        }
        log9.debug("Preferences restored:", preferences);
      }
      /**
       * Setup usage tracking for analytics
       */
      setupUsageTracking() {
        const items = this.element.querySelectorAll("[data-related-article]");
        items.forEach((item) => {
          this.addEventListener(item, "click", (e) => {
            const articleUrl = item.getAttribute("data-related-article");
            const articleTitle = item.getAttribute("data-article-title");
            this.emit("itemClicked", {
              url: articleUrl,
              title: articleTitle,
              view: this.currentView,
              timestamp: Date.now()
            });
            log9.debug("Related content item clicked:", { articleTitle, view: this.currentView });
          });
        });
      }
      /**
       * Public API: Get current preferences
       */
      getPreferences() {
        return {
          view: this.currentView,
          collapsed: this.isCollapsed
        };
      }
      /**
       * Public API: Set view mode
       */
      setView(view) {
        if (["compact", "cards"].includes(view)) {
          this.switchView(view);
        }
      }
      /**
       * Public API: Expand section
       */
      expand() {
        if (this.isCollapsed) {
          this.toggleCollapse();
        }
      }
      /**
       * Public API: Collapse section
       */
      collapse() {
        if (!this.isCollapsed) {
          this.toggleCollapse();
        }
      }
      /**
       * Component cleanup
       */
      onDestroy() {
        log9.debug("RelatedContent component destroyed");
      }
    };
    ComponentManager_default.register("article-related-content", ArticleRelatedContent);
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/article/CopyPage.js
var CopyPage_exports = {};
__export(CopyPage_exports, {
  CopyPage: () => CopyPage
});
var log10, CopyPage;
var init_CopyPage = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/article/CopyPage.js"() {
    init_Component();
    init_dom();
    init_accessibility();
    init_Logger();
    init_ComponentManager();
    log10 = logger.component("CopyPage");
    CopyPage = class extends Component {
      constructor(config = {}) {
        super({
          name: "copy-page",
          selector: '[data-component="copy-page"]',
          ...config
        });
        this.options = {
          copySuccessDuration: 2e3,
          animationDuration: 150,
          ...this.options
        };
        this.isOpen = false;
        this.currentUrl = "";
        this.pageContent = null;
        this.jsonUrl = "";
        this.txtUrl = "";
        this.pageText = "";
      }
      /**
      * Setup DOM elements
      */
      setupElements() {
        super.setupElements();
        this.toggle = this.element.querySelector("[data-copy-page-toggle]");
        this.dropdown = this.element.querySelector("[data-copy-page-dropdown]");
        this.dropdownArrow = this.element.querySelector("[data-dropdown-arrow]");
        this.copyUrlButton = this.element.querySelector("[data-copy-url]");
        this.copyContentButton = this.element.querySelector("[data-copy-content]");
        this.copyTxtButton = this.element.querySelector("[data-copy-txt]");
        if (this.copyUrlButton) {
          this.currentUrl = this.normalizeUrl(this.copyUrlButton.getAttribute("data-copy-url"));
          let base = this.currentUrl.replace(/\/$/, "");
          base = base.replace(/\.html$/, "");
          this.jsonUrl = base + "/index.json";
          this.txtUrl = base + "/index.txt";
        }
        if (!this.toggle || !this.dropdown) {
          log10.warn("Required elements not found");
          return;
        }
        this.fetchPageContent();
      }
      /**
       * Bind event listeners
       */
      bindEvents() {
        this.addEventListener(this.toggle, "click", this.handleToggle.bind(this));
        if (this.copyUrlButton) {
          this.addEventListener(this.copyUrlButton, "click", this.handleCopyUrl.bind(this));
        }
        if (this.copyContentButton) {
          this.addEventListener(this.copyContentButton, "click", this.handleCopyContent.bind(this));
        }
        if (this.copyTxtButton) {
          this.addEventListener(this.copyTxtButton, "click", this.handleCopyTxt.bind(this));
        }
        this.addEventListener(document, "click", this.handleOutsideClick.bind(this));
        this.addEventListener(document, "keydown", this.handleKeydown.bind(this));
        this.addEventListener(this.dropdown, "click", (e) => {
          e.stopPropagation();
        });
      }
      /**
       * Handle toggle button click
       */
      handleToggle(e) {
        e.preventDefault();
        e.stopPropagation();
        if (this.isOpen) {
          this.closeDropdown();
        } else {
          this.openDropdown();
        }
      }
      /**
       * Handle copy URL button click
       */
      async handleCopyUrl(e) {
        e.preventDefault();
        e.stopPropagation();
        try {
          const success = await copyToClipboard(this.currentUrl);
          if (success) {
            this.showCopySuccess("Page URL copied to clipboard", this.copyUrlButton);
            this.closeDropdown();
          } else {
            this.showCopyError("Failed to copy URL", this.copyUrlButton);
          }
        } catch (error) {
          log10.error("Copy failed:", error);
          this.showCopyError("Failed to copy URL", this.copyUrlButton);
        }
      }
      /**
       * Handle copy content button click
       */
      async handleCopyContent(e) {
        e.preventDefault();
        e.stopPropagation();
        if (!this.pageContent) {
          this.showCopyError("Content not yet loaded", this.copyContentButton);
          return;
        }
        try {
          const contentText = this.createAIPrompt();
          const success = await copyToClipboard(contentText);
          if (success) {
            this.showCopySuccess("Page content copied to clipboard", this.copyContentButton);
            this.closeDropdown();
          } else {
            this.showCopyError("Failed to copy content", this.copyContentButton);
          }
        } catch (error) {
          log10.error("Copy content failed:", error);
          this.showCopyError("Failed to copy content", this.copyContentButton);
        }
      }
      /**
       * Handle copy LLM text button click
       */
      async handleCopyTxt(e) {
        e.preventDefault();
        e.stopPropagation();
        const button = this.copyTxtButton;
        const txtHref = (button == null ? void 0 : button.getAttribute("data-copy-txt")) || this.txtUrl;
        try {
          let text = this.pageText;
          if (!text && txtHref) {
            const r = await fetch(txtHref);
            if (r.ok) {
              text = (await r.text()).trim();
            }
          }
          if (!text) {
            this.showCopyError("LLM text not available", button);
            return;
          }
          const success = await copyToClipboard(text);
          if (success) {
            this.showCopySuccess("LLM text copied to clipboard", button);
            this.closeDropdown();
          } else {
            this.showCopyError("Failed to copy LLM text", button);
          }
        } catch (error) {
          log10.error("Copy LLM text failed:", error);
          this.showCopyError("Failed to copy LLM text", this.copyTxtButton);
        }
      }
      /**
       * Handle outside click to close dropdown
       */
      handleOutsideClick(e) {
        if (this.isOpen && !this.element.contains(e.target)) {
          this.closeDropdown();
        }
      }
      /**
       * Handle keyboard navigation
       */
      handleKeydown(e) {
        if (e.key === "Escape" && this.isOpen) {
          this.closeDropdown();
          this.toggle.focus();
        }
      }
      /**
       * Open dropdown menu
       */
      openDropdown() {
        this.isOpen = true;
        this.dropdown.setAttribute("data-state", "visible");
        this.toggle.setAttribute("aria-expanded", "true");
        const firstItem = this.dropdown.querySelector("button, a");
        if (firstItem) {
          firstItem.focus();
        }
        this.dropdown.style.opacity = "0";
        this.dropdown.style.transform = "translateY(-10px)";
        requestAnimationFrame(() => {
          this.dropdown.style.transition = `opacity ${this.options.animationDuration}ms ease, transform ${this.options.animationDuration}ms ease`;
          this.dropdown.style.opacity = "1";
          this.dropdown.style.transform = "translateY(0)";
        });
        log10.debug("Dropdown opened");
      }
      /**
       * Close dropdown menu
       */
      closeDropdown() {
        this.isOpen = false;
        this.toggle.setAttribute("aria-expanded", "false");
        this.dropdown.style.opacity = "0";
        this.dropdown.style.transform = "translateY(-10px)";
        setTimeout(() => {
          this.dropdown.setAttribute("data-state", "hidden");
          this.dropdown.style.transition = "";
          this.dropdown.style.opacity = "";
          this.dropdown.style.transform = "";
        }, this.options.animationDuration);
        log10.debug("Dropdown closed");
      }
      /**
       * Show copy success feedback
       */
      showCopySuccess(message, button = this.copyUrlButton) {
        if (!button) return;
        const originalText = button.textContent;
        button.textContent = "\u2713 Copied!";
        button.classList.add("success");
        announceToScreenReader(message);
        setTimeout(() => {
          button.textContent = originalText;
          button.classList.remove("success");
        }, this.options.copySuccessDuration);
        log10.debug("Copy success feedback shown");
      }
      /**
       * Show copy error feedback
       */
      showCopyError(message, button = this.copyUrlButton) {
        if (!button) return;
        const originalText = button.textContent;
        button.textContent = "\u2717 Failed";
        button.classList.add("error");
        announceToScreenReader(message);
        setTimeout(() => {
          button.textContent = originalText;
          button.classList.remove("error");
        }, this.options.copySuccessDuration);
        log10.error("Copy error feedback shown");
      }
      /**
       * Fetch page content from index.txt (preferred) and index.json for AI sharing
       */
      async fetchPageContent() {
        const requests = [];
        if (this.txtUrl) {
          requests.push(
            fetch(this.txtUrl).then((r) => r.ok ? r.text() : "").then((text) => {
              this.pageText = (text || "").trim();
            }).catch(() => {
            })
          );
        }
        if (this.jsonUrl) {
          requests.push(
            fetch(this.jsonUrl).then((r) => r.ok ? r.json() : null).then((json) => {
              this.pageContent = json;
            }).catch(() => {
            })
          );
        }
        try {
          await Promise.allSettled(requests);
          this.updateAILinks();
          log10.debug("Page content fetched (txt/json) for AI sharing");
        } catch (error) {
          log10.warn("Error fetching AI share content:", error);
        }
      }
      /**
       * Update AI sharing links with page content
       */
      updateAILinks() {
        if (!this.pageText && !this.pageContent) return;
        const aiLinks = this.dropdown.querySelectorAll('a[href*="claude.ai"], a[href*="chat.openai.com"], a[href*="copilot.microsoft.com"]');
        aiLinks.forEach((link) => {
          var _a;
          const fullPrompt = this.createAIPrompt();
          const shortUrl = this.txtUrl || this.currentUrl;
          const buildHref = (base, prompt) => `${base}?q=${encodeURIComponent(prompt)}`;
          const isOffline2 = ((_a = window.HugoEnvironment) == null ? void 0 : _a.environment) === "offline";
          if (isOffline2) {
            link.removeAttribute("href");
            link.setAttribute("aria-disabled", "true");
            return;
          }
          if (link.href.includes("copilot.microsoft.com")) {
            const prompt = `Please help me understand this documentation: ${shortUrl}`;
            link.href = buildHref("https://copilot.microsoft.com/", prompt);
            return;
          }
          const encodedFull = encodeURIComponent(fullPrompt);
          if (encodedFull.length > 1800) {
            const prompt = `Please help me understand this documentation: ${shortUrl}`;
            if (link.href.includes("claude.ai")) {
              link.href = buildHref("https://claude.ai/chat", prompt);
            } else if (link.href.includes("chat.openai.com")) {
              link.href = buildHref("https://chat.openai.com/", prompt);
            }
            return;
          }
          if (link.href.includes("claude.ai")) {
            link.href = buildHref("https://claude.ai/chat", fullPrompt);
          } else if (link.href.includes("chat.openai.com")) {
            link.href = buildHref("https://chat.openai.com/", fullPrompt);
          }
        });
      }
      /**
       * Normalize possibly relative or protocol-relative URLs to absolute
       */
      normalizeUrl(url) {
        if (!url) return url;
        let u = String(url).trim();
        if (u.startsWith("//")) {
          u = `${window.location.protocol}${u}`;
        } else if (u.startsWith("/")) {
          u = `${window.location.origin}${u}`;
        }
        return u;
      }
      /**
       * Create AI prompt with page content
       */
      createAIPrompt() {
        const maxContentLength = 4e3;
        if (this.pageText && this.pageText.length > 0) {
          let text = this.pageText;
          if (text.length > maxContentLength) {
            text = text.substring(0, maxContentLength) + "\n\n[Content truncated - see full content at URL]";
          }
          return [
            "Please help me understand this documentation:",
            "",
            `**URL**: ${this.currentUrl}`,
            "",
            "**Content (LLM-optimized)**:",
            text,
            "",
            "Please explain the key concepts and help me understand how to use this information."
          ].join("\n");
        }
        if (this.pageContent) {
          const {
            title,
            linkTitle,
            description,
            body,
            contentWithoutSummary,
            section,
            parent
          } = this.pageContent;
          let content = contentWithoutSummary || body || "";
          if (content.length > maxContentLength) {
            content = content.substring(0, maxContentLength) + "...\n\n[Content truncated - see full content at URL]";
          }
          let prompt = `Please help me understand this documentation:

# ${title || linkTitle || "Documentation Page"}`;
          if (description) {
            prompt += `

${description}`;
          }
          if (section && parent && section !== parent) {
            prompt += `

*From: ${parent} > ${section}*`;
          }
          prompt += `

**URL**: ${this.currentUrl}`;
          if (content) {
            prompt += `

**Content**:
${content}`;
          }
          prompt += `

Please explain the key concepts and help me understand how to use this information.`;
          return prompt;
        }
        return `Please help me understand this documentation: ${this.currentUrl}`;
      }
      /**
       * Clean up when component is destroyed
       */
      onDestroy() {
        if (this.isOpen) {
          this.closeDropdown();
        }
      }
    };
    ComponentManager_default.register("copy-page", CopyPage);
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/article/Mermaid.js
var Mermaid_exports = {};
__export(Mermaid_exports, {
  default: () => Mermaid_default
});
var MermaidComponent, Mermaid_default;
var init_Mermaid = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/article/Mermaid.js"() {
    init_Component();
    init_ComponentManager();
    MermaidComponent = class extends Component {
      constructor(config = {}) {
        super({
          name: "mermaid-diagram",
          selector: config.selector || ".mermaid",
          ...config
        });
      }
      async onInit() {
        const elements = this.findElements();
        if (!elements.length) return;
        await this.ensureMermaidLoaded();
        await this.renderAll(elements);
        document.addEventListener("themeChanged", () => {
          this.renderAll(elements);
        });
      }
      async ensureMermaidLoaded() {
        if (typeof window.mermaid !== "undefined") return;
        const isOffline2 = window.HugoEnvironment && window.HugoEnvironment.environment === "offline";
        const tryLoad = (src) => new Promise((resolve, reject) => {
          const script = document.createElement("script");
          script.src = src;
          script.onload = resolve;
          script.onerror = reject;
          document.head.appendChild(script);
        });
        try {
          if (isOffline2) {
            const localSrc = new URL("vendor/mermaid/mermaid.min.js", document.baseURI).toString();
            await tryLoad(localSrc);
          } else {
            await tryLoad("https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js");
          }
        } catch (e) {
          console.warn("Mermaid: failed to load script. Diagrams will not render.");
        }
      }
      async renderAll(elements) {
        const isDark = document.documentElement.classList.contains("dark");
        const theme = isDark ? "dark" : "neutral";
        window.mermaid.initialize({ theme, startOnLoad: false, securityLevel: "strict" });
        await window.mermaid.run({ querySelector: ".mermaid" });
        elements.forEach((el) => {
          el.style.opacity = "1";
        });
      }
    };
    ComponentManager_default.register("mermaid-diagram", MermaidComponent);
    Mermaid_default = MermaidComponent;
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/article/Video.js
var Video_exports = {};
__export(Video_exports, {
  default: () => Video_default
});
var VideoComponent, Video_default;
var init_Video = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/article/Video.js"() {
    init_Component();
    init_ComponentManager();
    VideoComponent = class extends Component {
      constructor(config = {}) {
        super({
          name: "video-player",
          selector: config.selector || ".video-container .player-wrapper",
          ...config
        });
      }
      async onInit() {
        const wrappers = this.findElements();
        wrappers.forEach((wrapper) => this.observeWrapper(wrapper));
      }
      observeWrapper(wrapper) {
        const observer = new IntersectionObserver((entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              this.loadPlayer(wrapper);
              observer.unobserve(entry.target);
            }
          });
        }, { threshold: 0.1 });
        observer.observe(wrapper);
      }
      async loadPlayer(wrapper) {
        var _a, _b, _c, _d, _e, _f;
        try {
          const url = (_c = (_b = (_a = wrapper.closest(".video-container")) == null ? void 0 : _a.querySelector("[data-video-src]")) == null ? void 0 : _b.dataset) == null ? void 0 : _c.videoSrc;
          const playerTarget = wrapper;
          const placeholder = wrapper.querySelector(".loading-placeholder");
          let module;
          const isOffline2 = window.HugoEnvironment && window.HugoEnvironment.environment === "offline";
          if (isOffline2) {
            const localSrc = new URL("vendor/clappr/clappr.min.js", document.baseURI).toString();
            module = await import(localSrc);
          } else {
            module = await import("https://cdn.jsdelivr.net/npm/@clappr/player@0.4.0/dist/clappr.min.js");
          }
          const Clappr = module.default || module;
          const player = new Clappr.Player({
            source: url,
            autoPlay: false,
            mute: false,
            height: "100%",
            width: "100%",
            responsive: true,
            playback: { preload: "metadata" }
          });
          player.attachTo(playerTarget);
          player.on(Clappr.Events.PLAYER_READY, () => {
            if (placeholder) {
              placeholder.style.opacity = "0";
              setTimeout(() => placeholder.remove(), 300);
            }
          });
        } catch (error) {
          const url = ((_f = (_e = (_d = wrapper.closest(".video-container")) == null ? void 0 : _d.querySelector("[data-video-src]")) == null ? void 0 : _e.dataset) == null ? void 0 : _f.videoSrc) || "#";
          wrapper.innerHTML = `
        <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded">
          <strong>Video Error:</strong> Failed to load video player.
          <a href="${url}" class="underline" target="_blank" rel="noopener">View video directly</a>
        </div>`;
        }
      }
    };
    ComponentManager_default.register("video-player", VideoComponent);
    Video_default = VideoComponent;
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/notebook/NotebookCell.js
var NotebookCell_exports = {};
__export(NotebookCell_exports, {
  NotebookCell: () => NotebookCell
});
var NotebookCell;
var init_NotebookCell = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/notebook/NotebookCell.js"() {
    init_Component();
    init_utils();
    init_ComponentManager();
    NotebookCell = class _NotebookCell extends Component {
      constructor(config = {}) {
        super({
          name: "notebook-cell",
          selector: config.selector || ".notebook-cell",
          ...config
        });
      }
      /**
       * Setup individual cell with proper structure and features
       */
      static setupCell(cellElement, index, parentViewer) {
        const cellType = _NotebookCell.detectCellType(cellElement);
        const cellId = _NotebookCell.generateCellId(cellType, index, parentViewer.getNotebookId());
        const cellData = {
          element: cellElement,
          type: cellType,
          index,
          collapsed: false,
          hasOutput: _NotebookCell.hasOutput(cellElement)
        };
        cellElement.classList.add("notebook-cell", `notebook-cell--${cellType}`);
        cellElement.setAttribute("data-cell-id", cellId);
        cellElement.setAttribute("data-cell-type", cellType);
        cellElement.setAttribute("data-cell-index", index);
        cellElement.style.setProperty("--cell-index", index);
        _NotebookCell.ensureCellHeader(cellElement, cellType, cellId);
        _NotebookCell.ensureCellContent(cellElement);
        if (cellType === "code") {
          _NotebookCell.setupCodeCell(cellElement, cellId);
        }
        if (_NotebookCell.shouldMakeCollapsible(cellType)) {
          _NotebookCell.makeCollapsible(cellElement, cellId);
        }
        return { cellId, cellData };
      }
      /**
       * Detect cell type from element
       */
      static detectCellType(element) {
        if (element.dataset.cellType) {
          return element.dataset.cellType;
        }
        if (element.classList.contains("notebook-cell--markdown")) return "markdown";
        if (element.classList.contains("notebook-cell--code")) return "code";
        if (element.classList.contains("notebook-cell--raw")) return "raw";
        if (element.querySelector("pre code, .highlight")) return "code";
        if (element.querySelector(".raw-cell-content")) return "raw";
        return "markdown";
      }
      /**
       * Check if cell has output
       */
      static hasOutput(cellElement) {
        return !!(cellElement.querySelector(".code-outputs") || cellElement.querySelector(".notebook-cell__outputs") || cellElement.querySelector('[class*="output"]'));
      }
      /**
       * Generate unique cell ID
       */
      static generateCellId(type, index, notebookId) {
        return `${notebookId}-${type}-${index}`;
      }
      /**
       * Ensure cell has proper header structure
       */
      static ensureCellHeader(cellElement, cellType, cellId) {
        let header = cellElement.querySelector(".notebook-cell__header");
        if (!header) {
          header = _NotebookCell.createElement("div", {
            class: "notebook-cell__header",
            role: "button",
            tabindex: "0",
            "aria-controls": `${cellId}-content`,
            "aria-expanded": "true"
          });
          const typeIndicator = _NotebookCell.createElement("div", {
            class: "notebook-cell__type"
          });
          const typeIcon = _NotebookCell.createElement("span", {
            class: "notebook-cell__type-icon",
            "aria-hidden": "true"
          });
          typeIcon.innerHTML = _NotebookCell.getCellTypeIcon(cellType);
          const typeText = _NotebookCell.createElement("span", {
            class: "notebook-cell__type-text"
          });
          typeText.textContent = _NotebookCell.getCellTypeLabel(cellType);
          typeIndicator.appendChild(typeIcon);
          typeIndicator.appendChild(typeText);
          const controls = _NotebookCell.createElement("div", {
            class: "notebook-cell__controls"
          });
          header.appendChild(typeIndicator);
          header.appendChild(controls);
          cellElement.insertBefore(header, cellElement.firstChild);
        }
        return header;
      }
      /**
       * Ensure cell has proper content wrapper
       */
      static ensureCellContent(cellElement) {
        let content = cellElement.querySelector(".notebook-cell__content");
        if (!content) {
          content = _NotebookCell.createElement("div", {
            class: "notebook-cell__content",
            id: `${cellElement.dataset.cellId}-content`
          });
          const header = cellElement.querySelector(".notebook-cell__header");
          const elementsToMove = Array.from(cellElement.children).filter(
            (child) => child !== header
          );
          elementsToMove.forEach((element) => {
            content.appendChild(element);
          });
          cellElement.appendChild(content);
        }
        return content;
      }
      /**
       * Setup code cell specific features
       */
      static setupCodeCell(cellElement, cellId) {
        const codeContent = cellElement.querySelector("pre, .highlight, .notebook-cell__code-content");
        if (codeContent) {
          if (!codeContent.closest(".notebook-cell__code-container")) {
            const codeContainer = _NotebookCell.createElement("div", {
              class: "notebook-cell__code-container"
            });
            const parent = codeContent.parentNode;
            parent.insertBefore(codeContainer, codeContent);
            codeContainer.appendChild(codeContent);
          }
          _NotebookCell.addCopyButton(codeContent, cellId);
          _NotebookCell.setupExecutionCount(cellElement);
        }
        _NotebookCell.setupOutputs(cellElement);
      }
      /**
       * Add copy button to code content
       */
      static addCopyButton(codeContent, cellId) {
        const existingBtn = codeContent.parentNode.querySelector(".notebook-cell__copy-btn");
        if (existingBtn) {
          existingBtn.remove();
        }
        const copyBtn = _NotebookCell.createElement("button", {
          class: "notebook-cell__copy-btn",
          type: "button",
          "aria-label": "Copy code to clipboard",
          "data-cell-id": cellId
        });
        const copyIcon = _NotebookCell.createElement("span", {
          class: "notebook-cell__copy-icon",
          "aria-hidden": "true"
        });
        copyIcon.innerHTML = _NotebookCell.getCopyIcon();
        const copyText2 = _NotebookCell.createElement("span", {
          class: "notebook-cell__copy-text"
        });
        copyText2.textContent = "Copy";
        copyBtn.appendChild(copyIcon);
        copyBtn.appendChild(copyText2);
        const container = codeContent.closest(".notebook-cell__code-container") || codeContent.parentNode;
        container.style.position = "relative";
        container.appendChild(copyBtn);
      }
      /**
       * Setup execution count display
       */
      static setupExecutionCount(cellElement) {
        const existingCount = cellElement.querySelector(".execution-count, .notebook-cell__execution-count");
        if (existingCount && !existingCount.classList.contains("notebook-cell__execution-count")) {
          existingCount.classList.add("notebook-cell__execution-count");
        }
      }
      /**
       * Setup cell outputs
       */
      static setupOutputs(cellElement) {
        const outputsContainer = cellElement.querySelector(".code-outputs, .notebook-cell__outputs");
        if (outputsContainer) {
          outputsContainer.classList.add("notebook-cell__outputs");
          const outputs = outputsContainer.querySelectorAll('[class*="output"], .stream-output, .execute-result, .display-data, .error-output');
          outputs.forEach((output) => {
            _NotebookCell.setupOutput(output);
          });
        }
      }
      /**
       * Setup individual output
       */
      static setupOutput(output) {
        let outputType = "general";
        if (output.classList.contains("stream-output") || output.className.includes("stream")) {
          outputType = "stream";
        } else if (output.classList.contains("execute-result") || output.className.includes("execute")) {
          outputType = "execute-result";
        } else if (output.classList.contains("display-data") || output.className.includes("display")) {
          outputType = "display-data";
        } else if (output.classList.contains("error-output") || output.className.includes("error")) {
          outputType = "error";
        }
        output.classList.add("notebook-cell__output", `notebook-cell__output--${outputType}`);
      }
      /**
       * Make cell collapsible
       */
      static makeCollapsible(cellElement, cellId) {
        cellElement.classList.add("notebook-cell--collapsible");
        const header = cellElement.querySelector(".notebook-cell__header");
        const controls = header.querySelector(".notebook-cell__controls");
        const toggleBtn = _NotebookCell.createElement("button", {
          class: "notebook-cell__toggle",
          type: "button",
          "aria-label": "Toggle cell visibility",
          "data-cell-id": cellId
        });
        const toggleIcon = _NotebookCell.createElement("span", {
          class: "notebook-cell__toggle-icon",
          "aria-hidden": "true"
        });
        toggleIcon.innerHTML = _NotebookCell.getToggleIcon();
        toggleBtn.appendChild(toggleIcon);
        controls.appendChild(toggleBtn);
        header.setAttribute("role", "button");
        header.setAttribute("tabindex", "0");
        header.setAttribute("aria-expanded", "true");
      }
      /**
       * Handle copy operation for cell
       */
      static async handleCopyClick(button, cell, cleanNotebookCode, emitCallback) {
        const cellId = button.dataset.cellId;
        if (!cell) {
          console.error("NotebookCell: Cell not found for copy operation");
          return;
        }
        const result = await CopyManager.copy(cell.element, {
          successMessage: "\u2705 Copied!",
          errorMessage: "\u274C Failed",
          feedbackDuration: 2e3,
          preprocessText: (text) => cleanNotebookCode(text),
          analytics: {
            component: "notebook-viewer",
            cellId,
            cellType: cell.type
          },
          onSuccess: (content) => {
            emitCallback("notebook:copy-success", { cellId, content });
          },
          onError: (error) => {
            emitCallback("notebook:copy-error", { cellId, error });
          }
        });
        return result;
      }
      /**
       * Clean notebook code for copying (notebook-specific preprocessing)
       */
      static cleanNotebookCode(text) {
        if (!text) return "";
        return text.replace(/^In \[\d*\]:\s*/gm, "").replace(/^Out\[\d*\]:\s*/gm, "").replace(/^\s*[\r\n]/gm, "").trim();
      }
      /**
       * Determine if cell type should be collapsible
       */
      static shouldMakeCollapsible(cellType) {
        return true;
      }
      /**
       * Utility: Create element with attributes
       */
      static createElement(tag, attributes = {}) {
        const element = document.createElement(tag);
        Object.entries(attributes).forEach(([key, value]) => {
          if (key === "class") {
            element.className = value;
          } else {
            element.setAttribute(key, value);
          }
        });
        return element;
      }
      /**
       * Get cell type icon SVG
       */
      static getCellTypeIcon(type) {
        const icons = {
          markdown: `<svg viewBox="0 0 16 16" fill="currentColor"><path d="M14.85 3H1.15C.52 3 0 3.52 0 4.15v7.69C0 12.48.52 13 1.15 13h13.69c.64 0 1.15-.52 1.15-1.15v-7.7C16 3.52 15.48 3 14.85 3zM9 11H7.5L5.5 8.92 3.5 11H2l2.5-3.5L2 4h1.5l2 2.08L7.5 4H9l-2.5 3.5L9 11zm5 0h-1.5V6.25L11.25 8 10 6.25V11H8.5V4H10l1.25 1.75L12.5 4H14v7z"/></svg>`,
          code: `<svg viewBox="0 0 16 16" fill="currentColor"><path d="M4.72 9.47L1.25 6l3.47-3.47a.75.75 0 00-1.06-1.06L.19 4.94a1.25 1.25 0 000 1.76l3.47 3.47a.75.75 0 101.06-1.06zm6.56 0L14.75 6l-3.47-3.47a.75.75 0 111.06-1.06l3.47 3.47a1.25 1.25 0 010 1.76l-3.47 3.47a.75.75 0 01-1.06-1.06z"/></svg>`,
          raw: `<svg viewBox="0 0 16 16" fill="currentColor"><path d="M8 1a7 7 0 100 14A7 7 0 008 1zM7 4.25A.75.75 0 018.75 4h.5a.75.75 0 01.75.75v2.5a.75.75 0 01-.75.75h-.5A.75.75 0 017 7.25v-3zm1 7.25a1 1 0 100-2 1 1 0 000 2z"/></svg>`
        };
        return icons[type] || icons.markdown;
      }
      /**
       * Get cell type label
       */
      static getCellTypeLabel(type) {
        const labels = {
          markdown: "Markdown",
          code: "Code",
          raw: "Raw"
        };
        return labels[type] || "Cell";
      }
      /**
       * Get copy icon SVG
       */
      static getCopyIcon() {
        return `<svg viewBox="0 0 16 16" fill="currentColor"><path d="M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V2Zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H6ZM2 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1h1v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1v1H2Z"/></svg>`;
      }
      /**
       * Get toggle icon SVG
       */
      static getToggleIcon() {
        return `<svg viewBox="0 0 16 16" fill="currentColor"><path d="M4.427 9.573L8 6l3.573 3.573a.5.5 0 00.707-.707l-4-4a.5.5 0 00-.707 0l-4 4a.5.5 0 10.707.707z"/></svg>`;
      }
    };
    ComponentManager_default.register("notebook-cell", NotebookCell);
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/notebook/NotebookNavigation.js
var NotebookNavigation_exports = {};
__export(NotebookNavigation_exports, {
  NotebookNavigation: () => NotebookNavigation
});
var NotebookNavigation;
var init_NotebookNavigation = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/notebook/NotebookNavigation.js"() {
    init_Component();
    init_accessibility();
    init_ComponentManager();
    NotebookNavigation = class _NotebookNavigation extends Component {
      constructor(config = {}) {
        super({
          name: "notebook-navigation",
          selector: config.selector || ".notebook",
          ...config
        });
      }
      /**
       * Setup keyboard navigation for notebook cells
       */
      static setupKeyboardNavigation(parentElement, cells, addEventListener) {
        const cellElements = Array.from(cells.values()).map((cell) => cell.element);
        cellElements.forEach((cell, index) => {
          const header = cell.querySelector(".notebook-cell__header");
          if (header) {
            header.setAttribute("tabindex", index === 0 ? "0" : "-1");
            addEventListener(header, "keydown", (e) => {
              _NotebookNavigation.handleCellNavigation(e, index, cellElements);
            });
          }
        });
      }
      /**
       * Handle cell-to-cell navigation
       */
      static handleCellNavigation(e, currentIndex, cells) {
        let newIndex = currentIndex;
        switch (e.key) {
          case "ArrowDown":
          case "j":
            e.preventDefault();
            newIndex = Math.min(currentIndex + 1, cells.length - 1);
            break;
          case "ArrowUp":
          case "k":
            e.preventDefault();
            newIndex = Math.max(currentIndex - 1, 0);
            break;
          case "Home":
            e.preventDefault();
            newIndex = 0;
            break;
          case "End":
            e.preventDefault();
            newIndex = cells.length - 1;
            break;
          default:
            return;
        }
        if (newIndex !== currentIndex) {
          cells[currentIndex].querySelector(".notebook-cell__header").setAttribute("tabindex", "-1");
          cells[newIndex].querySelector(".notebook-cell__header").setAttribute("tabindex", "0");
          cells[newIndex].querySelector(".notebook-cell__header").focus();
          const cellType = cells[newIndex].dataset.cellType;
          const cellIndex = cells[newIndex].dataset.cellIndex;
          announceToScreenReader(`Navigated to ${cellType} cell ${parseInt(cellIndex) + 1}`);
        }
      }
      /**
       * Handle global keyboard shortcuts for notebook
       */
      static handleGlobalKeydown(e, getFocusedCell, handleCopyForCell, toggleAllCells) {
        if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.key === "C") {
          e.preventDefault();
          const focusedCell = getFocusedCell();
          if (focusedCell) {
            const copyBtn = focusedCell.querySelector(".notebook-cell__copy-btn");
            if (copyBtn) {
              handleCopyForCell(copyBtn);
            }
          }
        }
        if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.key === "E") {
          e.preventDefault();
          toggleAllCells();
        }
      }
      /**
       * Get currently focused cell
       */
      static getFocusedCell() {
        const activeElement = document.activeElement;
        return activeElement == null ? void 0 : activeElement.closest(".notebook-cell");
      }
      /**
       * Initialize accessibility features for notebook
       */
      static initializeAccessibility(element, cellCount) {
        element.setAttribute("role", "main");
        element.setAttribute("aria-label", "Jupyter Notebook");
        announceToScreenReader(`Notebook loaded with ${cellCount} cells`);
        const instructions = document.createElement("div");
        instructions.className = "sr-only";
        instructions.setAttribute("aria-live", "polite");
        instructions.textContent = "Use arrow keys or j/k to navigate between cells. Press Enter or Space to toggle cell visibility. Press Ctrl+Shift+C to copy cell content.";
        element.insertBefore(instructions, element.firstChild);
        return instructions;
      }
      /**
       * Setup cell visibility animations with staggered entrance
       */
      static setupAnimations(cells, animationDelay = 100, animationsEnabled = true) {
        if (!animationsEnabled) return;
        Array.from(cells.values()).forEach((cell, index) => {
          cell.element.style.animationDelay = `${index * animationDelay}ms`;
        });
      }
      /**
       * Focus specific cell by index
       */
      static focusCell(cellIndex, cells) {
        const cellElements = Array.from(cells.values()).map((cell) => cell.element);
        if (cellIndex >= 0 && cellIndex < cellElements.length) {
          const targetCell = cellElements[cellIndex];
          const header = targetCell.querySelector(".notebook-cell__header");
          if (header) {
            cellElements.forEach((cell, index) => {
              const cellHeader = cell.querySelector(".notebook-cell__header");
              if (cellHeader) {
                cellHeader.setAttribute("tabindex", index === cellIndex ? "0" : "-1");
              }
            });
            header.focus();
            targetCell.scrollIntoView({
              behavior: "smooth",
              block: "center"
            });
            return true;
          }
        }
        return false;
      }
      /**
       * Focus first cell
       */
      static focusFirstCell(cells) {
        return _NotebookNavigation.focusCell(0, cells);
      }
      /**
       * Focus last cell
       */
      static focusLastCell(cells) {
        const cellCount = cells.size;
        return _NotebookNavigation.focusCell(cellCount - 1, cells);
      }
      /**
       * Get next focusable cell index
       */
      static getNextFocusableIndex(currentIndex, cells, direction = 1) {
        const cellElements = Array.from(cells.values()).map((cell) => cell.element);
        let nextIndex = currentIndex + direction;
        if (nextIndex >= cellElements.length) {
          nextIndex = 0;
        } else if (nextIndex < 0) {
          nextIndex = cellElements.length - 1;
        }
        return nextIndex;
      }
      /**
       * Setup smooth scrolling for cell navigation
       */
      static setupSmoothScrolling(element) {
        if (!element.style.scrollBehavior) {
          element.style.scrollBehavior = "smooth";
        }
      }
    };
    ComponentManager_default.register("notebook-navigation", NotebookNavigation);
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/notebook/NotebookState.js
var NotebookState_exports = {};
__export(NotebookState_exports, {
  NotebookState: () => NotebookState
});
var NotebookState;
var init_NotebookState = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/notebook/NotebookState.js"() {
    init_Component();
    init_utils();
    init_accessibility();
    init_ComponentManager();
    NotebookState = class _NotebookState extends Component {
      constructor(config = {}) {
        super({
          name: "notebook-state",
          selector: config.selector || ".notebook",
          ...config
        });
      }
      /**
       * Save notebook state to localStorage
       */
      static saveState(storageKey, collapsedCells) {
        try {
          const state = {
            collapsedCells: Array.from(collapsedCells),
            timestamp: Date.now()
          };
          localStorage2.set(storageKey, state);
        } catch (error) {
          console.warn("NotebookState: Failed to save state:", error);
        }
      }
      /**
       * Load notebook state from localStorage
       */
      static loadStoredState(storageKey, cells, collapseCell) {
        try {
          const state = localStorage2.get(storageKey);
          if (!state) return;
          if (state.collapsedCells) {
            state.collapsedCells.forEach((cellId) => {
              if (cells.has(cellId)) {
                collapseCell(cellId, false);
              }
            });
          }
        } catch (error) {
          console.warn("NotebookState: Failed to load state:", error);
        }
      }
      /**
       * Toggle cell collapsed state
       */
      static toggleCell(cellId, cells, preferences, saveState, emit) {
        const cell = cells.get(cellId);
        if (!cell) return;
        const isCollapsed = cell.collapsed;
        if (isCollapsed) {
          _NotebookState.expandCell(cellId, cells, preferences, saveState, emit);
        } else {
          _NotebookState.collapseCell(cellId, cells, preferences, saveState, emit);
        }
      }
      /**
       * Collapse cell
       */
      static collapseCell(cellId, cells, preferences, saveState, emit, shouldSave = true) {
        const cell = cells.get(cellId);
        if (!cell || cell.collapsed) return;
        cell.collapsed = true;
        preferences.collapsedCells.add(cellId);
        const { element } = cell;
        element.classList.add("notebook-cell--collapsed");
        const header = element.querySelector(".notebook-cell__header");
        header.setAttribute("aria-expanded", "false");
        announceToScreenReader("Cell collapsed");
        if (shouldSave) {
          saveState();
        }
        emit("notebook:cell-collapsed", { cellId });
      }
      /**
       * Expand cell
       */
      static expandCell(cellId, cells, preferences, saveState, emit, shouldSave = true) {
        const cell = cells.get(cellId);
        if (!cell || !cell.collapsed) return;
        cell.collapsed = false;
        preferences.collapsedCells.delete(cellId);
        const { element } = cell;
        element.classList.remove("notebook-cell--collapsed");
        const header = element.querySelector(".notebook-cell__header");
        header.setAttribute("aria-expanded", "true");
        announceToScreenReader("Cell expanded");
        if (shouldSave) {
          saveState();
        }
        emit("notebook:cell-expanded", { cellId });
      }
      /**
       * Toggle all cells
       */
      static toggleAllCells(cells, preferences, saveState, emit) {
        const hasCollapsed = preferences.collapsedCells.size > 0;
        if (hasCollapsed) {
          _NotebookState.expandAllCells(cells, preferences, saveState, emit);
        } else {
          _NotebookState.collapseAllCells(cells, preferences, saveState, emit);
        }
      }
      /**
       * Expand all cells
       */
      static expandAllCells(cells, preferences, saveState, emit) {
        Array.from(cells.keys()).forEach((cellId) => {
          _NotebookState.expandCell(cellId, cells, preferences, () => {
          }, emit, false);
        });
        saveState();
        announceToScreenReader("All cells expanded");
        emit("notebook:all-cells-expanded");
      }
      /**
       * Collapse all cells
       */
      static collapseAllCells(cells, preferences, saveState, emit, shouldMakeCollapsible) {
        Array.from(cells.keys()).forEach((cellId) => {
          const cell = cells.get(cellId);
          if (shouldMakeCollapsible(cell.type)) {
            _NotebookState.collapseCell(cellId, cells, preferences, () => {
            }, emit, false);
          }
        });
        saveState();
        announceToScreenReader("All cells collapsed");
        emit("notebook:all-cells-collapsed");
      }
      /**
       * Get notebook statistics
       */
      static getStats(cells, preferences, notebookId) {
        return {
          cellCount: cells.size,
          collapsedCount: preferences.collapsedCells.size,
          cellTypes: Array.from(cells.values()).reduce((acc, cell) => {
            acc[cell.type] = (acc[cell.type] || 0) + 1;
            return acc;
          }, {}),
          notebookId
        };
      }
      /**
       * Reset notebook state
       */
      static resetState(cells, preferences, saveState, emit) {
        Array.from(cells.keys()).forEach((cellId) => {
          const cell = cells.get(cellId);
          if (cell && cell.collapsed) {
            _NotebookState.expandCell(cellId, cells, preferences, () => {
            }, emit, false);
          }
        });
        preferences.collapsedCells.clear();
        saveState();
        announceToScreenReader("Notebook state reset");
        emit("notebook:state-reset");
      }
      /**
       * Get cell by ID
       */
      static getCell(cellId, cells) {
        return cells.get(cellId);
      }
      /**
       * Get all collapsed cells
       */
      static getCollapsedCells(preferences) {
        return Array.from(preferences.collapsedCells);
      }
      /**
       * Get all expanded cells
       */
      static getExpandedCells(cells, preferences) {
        return Array.from(cells.keys()).filter(
          (cellId) => !preferences.collapsedCells.has(cellId)
        );
      }
      /**
       * Check if cell is collapsed
       */
      static isCellCollapsed(cellId, preferences) {
        return preferences.collapsedCells.has(cellId);
      }
      /**
       * Check if all cells are collapsed
       */
      static areAllCellsCollapsed(cells, preferences) {
        const collapsibleCells = Array.from(cells.values()).filter(
          (cell) => _NotebookState.shouldMakeCollapsible(cell.type)
        );
        return collapsibleCells.every(
          (cell) => preferences.collapsedCells.has(cell.cellId)
        );
      }
      /**
       * Check if all cells are expanded
       */
      static areAllCellsExpanded(preferences) {
        return preferences.collapsedCells.size === 0;
      }
      /**
       * Determine if cell type should be collapsible
       */
      static shouldMakeCollapsible(cellType) {
        return true;
      }
      /**
       * Create state snapshot for undo/redo functionality
       */
      static createSnapshot(cells, preferences) {
        return {
          collapsedCells: new Set(preferences.collapsedCells),
          cellStates: new Map(Array.from(cells.entries()).map(([id, cell]) => [
            id,
            {
              collapsed: cell.collapsed,
              type: cell.type,
              index: cell.index
            }
          ])),
          timestamp: Date.now()
        };
      }
      /**
       * Restore from state snapshot
       */
      static restoreSnapshot(snapshot, cells, preferences, saveState, emit) {
        if (!snapshot) return false;
        try {
          preferences.collapsedCells = new Set(snapshot.collapsedCells);
          snapshot.cellStates.forEach((cellState, cellId) => {
            const cell = cells.get(cellId);
            if (cell) {
              const shouldBeCollapsed = snapshot.collapsedCells.has(cellId);
              if (shouldBeCollapsed && !cell.collapsed) {
                _NotebookState.collapseCell(cellId, cells, preferences, () => {
                }, emit, false);
              } else if (!shouldBeCollapsed && cell.collapsed) {
                _NotebookState.expandCell(cellId, cells, preferences, () => {
                }, emit, false);
              }
            }
          });
          saveState();
          announceToScreenReader("Notebook state restored");
          emit("notebook:state-restored", { snapshot });
          return true;
        } catch (error) {
          console.error("NotebookState: Failed to restore snapshot:", error);
          return false;
        }
      }
    };
    ComponentManager_default.register("notebook-state", NotebookState);
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/notebook/NotebookViewer.js
var NotebookViewer_exports = {};
__export(NotebookViewer_exports, {
  NotebookViewer: () => NotebookViewer
});
var NotebookViewer;
var init_NotebookViewer = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/notebook/NotebookViewer.js"() {
    init_Component();
    init_utils();
    init_NotebookCell();
    init_NotebookNavigation();
    init_NotebookState();
    init_ComponentManager();
    NotebookViewer = class extends Component {
      constructor(config = {}) {
        super({
          name: "notebook-viewer",
          selector: config.selector || ".notebook",
          ...config
        });
        this.cells = /* @__PURE__ */ new Map();
        this.preferences = {
          collapsedCells: /* @__PURE__ */ new Set(),
          autoCollapse: config.autoCollapse || false,
          animationsEnabled: !window.matchMedia("(prefers-reduced-motion: reduce)").matches,
          copyFeedback: config.copyFeedback !== false
        };
        this.options = {
          storageKey: "notebook-viewer-state",
          copySuccessDuration: 2e3,
          copyErrorDuration: 3e3,
          cellAnimationDelay: 100,
          ...this.options
        };
        this.cellManager = null;
        this.navigationManager = null;
        this.stateManager = null;
      }
      /**
       * Initialize the notebook viewer
       */
      async onInit() {
        if (!this.element) {
          console.warn("NotebookViewer: No notebook element found");
          return;
        }
        this.setLoadingState(true);
        this.updateComponentState("initializing");
        await this.setupNotebook();
        this.cacheElements();
        this.setupEventListeners();
        this.loadStoredState();
        this.initializeAccessibility();
        this.setupAnimations();
        this.setLoadingState(false);
        this.updateComponentState("ready");
        this.emit("notebook:initialized", {
          cellCount: this.cells.size,
          notebookId: this.getNotebookId()
        });
      }
      /**
       * Setup the notebook structure and identify cells
       */
      async setupNotebook() {
        this.element.classList.add("notebook");
        const cellElements = this.element.querySelectorAll("[data-cell-type], .notebook-cell");
        cellElements.forEach((cellElement, index) => {
          this.setupCell(cellElement, index);
        });
        this.setupKeyboardNavigation();
      }
      /**
       * Setup individual cell using NotebookCell component
       */
      setupCell(cellElement, index) {
        const { cellId, cellData } = NotebookCell.setupCell(cellElement, index, this);
        this.cells.set(cellId, cellData);
      }
      /**
       * Get notebook ID from element or generate one
       */
      getNotebookId() {
        return this.element.id || this.element.dataset.notebookId || `notebook-${Date.now()}`;
      }
      /**
       * Cache DOM elements
       */
      cacheElements() {
        this.copyButtons = this.element.querySelectorAll(".notebook-cell__copy-btn");
        this.toggleButtons = this.element.querySelectorAll(".notebook-cell__toggle");
        this.cellHeaders = this.element.querySelectorAll('.notebook-cell__header[role="button"]');
      }
      /**
       * Setup event listeners
       */
      setupEventListeners() {
        this.copyButtons.forEach((btn) => {
          this.addEventListener(btn, "click", (e) => {
            e.stopPropagation();
            this.handleCopyClick(btn);
          });
        });
        this.toggleButtons.forEach((btn) => {
          this.addEventListener(btn, "click", (e) => {
            e.stopPropagation();
            this.handleToggleClick(btn);
          });
        });
        this.cellHeaders.forEach((header) => {
          this.addEventListener(header, "click", (e) => {
            if (e.target.closest(".notebook-cell__toggle, .notebook-cell__copy-btn")) {
              return;
            }
            this.handleHeaderClick(header);
          });
          this.addEventListener(header, "keydown", (e) => {
            if (e.key === "Enter" || e.key === " ") {
              e.preventDefault();
              this.handleHeaderClick(header);
            }
          });
        });
        this.addEventListener(document, "keydown", (e) => {
          if (this.element.contains(e.target)) {
            this.handleGlobalKeydown(e);
          }
        });
        this.addEventListener(
          window.matchMedia("(prefers-reduced-motion: reduce)"),
          "change",
          (e) => {
            this.preferences.animationsEnabled = !e.matches;
          }
        );
      }
      /**
       * Handle copy button click using NotebookCell component
       */
      async handleCopyClick(button) {
        const cellId = button.dataset.cellId;
        const cell = this.cells.get(cellId);
        return NotebookCell.handleCopyClick(
          button,
          cell,
          NotebookCell.cleanNotebookCode,
          (event, data) => this.emit(event, data)
        );
      }
      /**
       * Handle toggle button click
       */
      handleToggleClick(button) {
        const cellId = button.dataset.cellId;
        this.toggleCell(cellId);
      }
      /**
       * Handle header click for collapsible cells
       */
      handleHeaderClick(header) {
        const cellElement = header.closest(".notebook-cell");
        const cellId = cellElement.dataset.cellId;
        if (cellElement.classList.contains("notebook-cell--collapsible")) {
          this.toggleCell(cellId);
        }
      }
      /**
       * Handle global keyboard shortcuts using NotebookNavigation
       */
      handleGlobalKeydown(e) {
        NotebookNavigation.handleGlobalKeydown(
          e,
          () => NotebookNavigation.getFocusedCell(),
          (button) => this.handleCopyClick(button),
          () => this.toggleAllCells()
        );
      }
      /**
       * Toggle cell collapsed state using NotebookState
       */
      toggleCell(cellId) {
        NotebookState.toggleCell(
          cellId,
          this.cells,
          this.preferences,
          () => this.saveState(),
          (event, data) => this.emit(event, data)
        );
      }
      /**
       * Collapse cell using NotebookState
       */
      collapseCell(cellId) {
        NotebookState.collapseCell(
          cellId,
          this.cells,
          this.preferences,
          () => this.saveState(),
          (event, data) => this.emit(event, data)
        );
      }
      /**
       * Expand cell using NotebookState
       */
      expandCell(cellId) {
        NotebookState.expandCell(
          cellId,
          this.cells,
          this.preferences,
          () => this.saveState(),
          (event, data) => this.emit(event, data)
        );
      }
      /**
       * Toggle all cells using NotebookState
       */
      toggleAllCells() {
        NotebookState.toggleAllCells(
          this.cells,
          this.preferences,
          () => this.saveState(),
          (event, data) => this.emit(event, data)
        );
      }
      /**
       * Expand all cells using NotebookState
       */
      expandAllCells() {
        NotebookState.expandAllCells(
          this.cells,
          this.preferences,
          () => this.saveState(),
          (event, data) => this.emit(event, data)
        );
      }
      /**
       * Collapse all cells using NotebookState
       */
      collapseAllCells() {
        NotebookState.collapseAllCells(
          this.cells,
          this.preferences,
          () => this.saveState(),
          (event, data) => this.emit(event, data),
          (cellType) => NotebookState.shouldMakeCollapsible(cellType)
        );
      }
      /**
       * Setup keyboard navigation using NotebookNavigation
       */
      setupKeyboardNavigation() {
        NotebookNavigation.setupKeyboardNavigation(
          this.element,
          this.cells,
          (element, event, handler) => this.addEventListener(element, event, handler)
        );
      }
      /**
       * Initialize accessibility features using NotebookNavigation
       */
      initializeAccessibility() {
        NotebookNavigation.initializeAccessibility(this.element, this.cells.size);
      }
      /**
       * Setup entry animations using NotebookNavigation
       */
      setupAnimations() {
        NotebookNavigation.setupAnimations(
          this.cells,
          this.options.cellAnimationDelay,
          this.preferences.animationsEnabled
        );
      }
      /**
       * Save state using NotebookState
       */
      saveState() {
        NotebookState.saveState(this.options.storageKey, this.preferences.collapsedCells);
      }
      /**
       * Load state using NotebookState
       */
      loadStoredState() {
        NotebookState.loadStoredState(
          this.options.storageKey,
          this.cells,
          (cellId) => this.collapseCell(cellId)
        );
      }
      /**
       * Get component statistics using NotebookState
       */
      getStats() {
        return NotebookState.getStats(this.cells, this.preferences, this.getNotebookId());
      }
      /**
       * Cleanup on destroy
       */
      onDestroy() {
        this.saveState();
        this.cells.clear();
        this.preferences.collapsedCells.clear();
        this.emit("notebook:destroyed");
      }
    };
    ComponentManager_default.register("notebook-viewer", NotebookViewer);
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/article/NotebookProgressiveReveal.js
var NotebookProgressiveReveal_exports = {};
__export(NotebookProgressiveReveal_exports, {
  NotebookProgressiveReveal: () => NotebookProgressiveReveal
});
var NotebookProgressiveReveal;
var init_NotebookProgressiveReveal = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/article/NotebookProgressiveReveal.js"() {
    init_Component();
    init_ComponentManager();
    init_AnimationBridge();
    NotebookProgressiveReveal = class extends Component {
      constructor(config = {}) {
        super({
          name: "notebook-progressive-reveal",
          selector: config.selector || '[data-component="notebook-progressive-reveal"]',
          ...config
        });
        this.options = {
          scrollThreshold: 400,
          // Pixels from bottom to trigger loading (more eager)
          animationDelay: 30,
          // Delay between cell animations (much faster)
          batchSize: 20,
          // How many cells to reveal per batch (larger batches)
          animationDuration: 300,
          // CSS animation duration
          ...this.options
        };
        this.allCells = [];
        this.visibleCount = 0;
        this.metadata = null;
        this.isRevealing = false;
        this.observer = null;
        this.loadTrigger = null;
      }
      /**
       * Initialize the progressive reveal
       */
      async onInit() {
        if (!this.element) {
          console.warn("NotebookProgressiveReveal: No element found");
          return;
        }
        this.setLoadingState(true);
        this.updateComponentState("initializing");
        this.loadMetadata();
        this.collectCells();
        this.setupIntersectionObserver();
        this.setupLoadTrigger();
        this.visibleCount = this.allCells.filter((cell) => !cell.classList.contains("notebook-cell--hidden")).length;
        this.setLoadingState(false);
        this.updateComponentState("ready");
        this.emit("notebook:initialized", {
          visibleCells: this.visibleCount,
          totalCells: this.allCells.length
        });
      }
      /**
       * Load metadata from the page
       */
      loadMetadata() {
        const metadataScript = document.getElementById("notebook-metadata");
        if (!metadataScript) {
          console.warn("NotebookProgressiveReveal: No metadata found, using defaults");
          this.metadata = { totalCells: 0, initiallyVisible: 5, batchSize: 10 };
          return;
        }
        try {
          this.metadata = JSON.parse(metadataScript.textContent);
        } catch (error) {
          console.error("NotebookProgressiveReveal: Failed to parse metadata", error);
          this.metadata = { totalCells: 0, initiallyVisible: 5, batchSize: 10 };
        }
      }
      /**
       * Collect all cell wrapper elements
       */
      collectCells() {
        this.allCells = Array.from(this.element.querySelectorAll(".notebook-cell-wrapper"));
      }
      /**
       * Setup intersection observer for infinite scroll
       */
      setupIntersectionObserver() {
        if (!("IntersectionObserver" in window)) {
          console.warn("IntersectionObserver not supported, falling back to scroll events");
          this.setupScrollFallback();
          return;
        }
        this.observer = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting && !this.isRevealing) {
                this.revealNextBatch();
              }
            });
          },
          {
            rootMargin: `${this.options.scrollThreshold}px 0px`,
            threshold: 0.1
          }
        );
      }
      /**
       * Setup load trigger element
       */
      setupLoadTrigger() {
        const hiddenCells = this.allCells.filter((cell) => cell.classList.contains("notebook-cell--hidden"));
        if (hiddenCells.length === 0) {
          return;
        }
        const cellsContainer = this.element.querySelector(".notebook__cells");
        if (this.loadTrigger) {
          this.loadTrigger.remove();
        }
        this.loadTrigger = document.createElement("div");
        this.loadTrigger.className = "notebook-load-trigger";
        this.loadTrigger.style.cssText = `
      height: 20px;
      margin: 2rem 0;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--color-text-secondary);
      font-size: 0.875rem;
    `;
        this.loadTrigger.innerHTML = `
      <div class="loading-indicator">
        <span>Loading more cells... (${hiddenCells.length} remaining)</span>
        <div class="loading-spinner ml-2"></div>
      </div>
    `;
        cellsContainer.appendChild(this.loadTrigger);
        if (this.observer) {
          this.observer.observe(this.loadTrigger);
        }
      }
      /**
       * Reveal the next batch of hidden cells
       */
      async revealNextBatch() {
        const hiddenCells = this.allCells.filter((cell) => cell.classList.contains("notebook-cell--hidden"));
        if (hiddenCells.length === 0 || this.isRevealing) {
          return;
        }
        this.isRevealing = true;
        if (this.loadTrigger) {
          this.observer.unobserve(this.loadTrigger);
          this.loadTrigger.remove();
        }
        const batchSize = Math.min(this.options.batchSize, hiddenCells.length);
        const cellsToReveal = hiddenCells.slice(0, batchSize);
        cellsToReveal.forEach((cell, index) => {
          setTimeout(() => {
            cell.classList.remove("notebook-cell--hidden");
            cell.classList.add("notebook-cell--revealing");
            setTimeout(() => {
              cell.classList.remove("notebook-cell--revealing");
            }, 300);
          }, index * this.options.animationDelay);
        });
        this.visibleCount += cellsToReveal.length;
        const totalAnimationTime = cellsToReveal.length * this.options.animationDelay + this.options.animationDuration;
        setTimeout(() => {
          this.setupLoadTrigger();
          this.isRevealing = false;
          this.emit("notebook:batch-revealed", {
            batchSize: cellsToReveal.length,
            visibleCells: this.visibleCount,
            remainingCells: this.allCells.length - this.visibleCount,
            totalCells: this.allCells.length
          });
        }, totalAnimationTime);
      }
      /**
       * Fallback scroll event handler for browsers without IntersectionObserver
       */
      setupScrollFallback() {
        const handleScroll = () => {
          const hiddenCells = this.allCells.filter((cell) => cell.classList.contains("notebook-cell--hidden"));
          if (this.isRevealing || hiddenCells.length === 0) {
            return;
          }
          const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
          const windowHeight = window.innerHeight;
          const documentHeight = document.documentElement.scrollHeight;
          if (scrollTop + windowHeight >= documentHeight - this.options.scrollThreshold) {
            this.revealNextBatch();
          }
        };
        let scrollTimeout;
        const throttledScroll = () => {
          if (scrollTimeout) {
            clearTimeout(scrollTimeout);
          }
          const throttleDelay = animationBridge.getTiming("fast") / 2;
          scrollTimeout = setTimeout(handleScroll, throttleDelay);
        };
        this.addEventListener(window, "scroll", throttledScroll);
      }
      /**
       * Get reveal statistics
       */
      getStats() {
        return {
          visibleCells: this.visibleCount,
          hiddenCells: this.allCells.length - this.visibleCount,
          totalCells: this.allCells.length,
          revealProgress: this.allCells.length > 0 ? (this.visibleCount / this.allCells.length * 100).toFixed(1) : 0
        };
      }
      /**
       * Manually reveal all remaining cells
       */
      async revealAllCells() {
        const hiddenCells = this.allCells.filter((cell) => cell.classList.contains("notebook-cell--hidden"));
        if (hiddenCells.length === 0) {
          return;
        }
        hiddenCells.forEach((cell, index) => {
          setTimeout(() => {
            cell.classList.remove("notebook-cell--hidden");
            cell.classList.add("notebook-cell--revealing");
            setTimeout(() => {
              cell.classList.remove("notebook-cell--revealing");
            }, 300);
          }, index * 20);
        });
        this.visibleCount = this.allCells.length;
        if (this.loadTrigger) {
          this.observer.unobserve(this.loadTrigger);
          this.loadTrigger.remove();
          this.loadTrigger = null;
        }
        this.emit("notebook:all-revealed", { totalCells: this.allCells.length });
      }
      /**
       * Hide cells that are far off-screen (performance optimization)
       */
      optimizeVisibility() {
        const viewportTop = window.pageYOffset;
        const viewportBottom = viewportTop + window.innerHeight;
        const buffer = window.innerHeight * 2;
        this.allCells.forEach((cell, index) => {
          if (cell.classList.contains("notebook-cell--hidden")) {
            return;
          }
          const rect = cell.getBoundingClientRect();
          const cellTop = rect.top + viewportTop;
          const cellBottom = cellTop + rect.height;
          if (cellBottom < viewportTop - buffer || cellTop > viewportBottom + buffer) {
            cell.style.display = "none";
          } else {
            cell.style.display = "";
          }
        });
      }
      /**
       * Cleanup on destroy
       */
      onDestroy() {
        if (this.observer) {
          this.observer.disconnect();
        }
        if (this.loadTrigger) {
          this.loadTrigger.remove();
        }
        this.emit("notebook:destroyed");
      }
    };
    ComponentManager_default.register("notebook-progressive-reveal", NotebookProgressiveReveal);
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/notebook/NotebookLaunch.js
var NotebookLaunch_exports = {};
__export(NotebookLaunch_exports, {
  NotebookLaunch: () => NotebookLaunch
});
var log11, NotebookLaunch;
var init_NotebookLaunch = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/notebook/NotebookLaunch.js"() {
    init_Component();
    init_accessibility();
    init_Logger();
    init_ComponentManager();
    log11 = logger.component("NotebookLaunch");
    NotebookLaunch = class extends Component {
      constructor(config = {}) {
        super({
          name: "notebook-launch",
          selector: '[data-component="notebook-launch"]',
          ...config
        });
        this.options = {
          animationDuration: 150,
          ...this.options
        };
        this.isOpen = false;
      }
      /**
       * Setup DOM elements
       */
      setupElements() {
        super.setupElements();
        this.toggle = this.element.querySelector("[data-launch-toggle]");
        this.dropdown = this.element.querySelector("[data-launch-dropdown]");
        this.dropdownArrow = this.element.querySelector("[data-dropdown-arrow]");
        if (!this.toggle || !this.dropdown) {
          log11.warn("Required elements not found");
          return;
        }
      }
      /**
       * Bind event listeners
       */
      bindEvents() {
        this.addEventListener(this.toggle, "click", this.handleToggle.bind(this));
        this.addEventListener(document, "click", this.handleOutsideClick.bind(this));
        this.addEventListener(document, "keydown", this.handleKeydown.bind(this));
        this.addEventListener(this.dropdown, "click", (e) => {
          e.stopPropagation();
        });
        const platformLinks = this.dropdown.querySelectorAll('a[href*="colab"], a[href*="binder"], a[href*="nbviewer"]');
        platformLinks.forEach((link) => {
          this.addEventListener(link, "click", (e) => {
            const platform = this.getPlatformFromUrl(link.href);
            this.trackPlatformLaunch(platform);
            this.closeDropdown();
          });
        });
      }
      /**
       * Handle toggle button click
       */
      handleToggle(e) {
        e.preventDefault();
        e.stopPropagation();
        if (this.isOpen) {
          this.closeDropdown();
        } else {
          this.openDropdown();
        }
      }
      /**
       * Handle outside click to close dropdown
       */
      handleOutsideClick(e) {
        if (this.isOpen && !this.element.contains(e.target)) {
          this.closeDropdown();
        }
      }
      /**
       * Handle keyboard navigation
       */
      handleKeydown(e) {
        if (e.key === "Escape" && this.isOpen) {
          this.closeDropdown();
          this.toggle.focus();
        }
      }
      /**
       * Open dropdown menu
       */
      openDropdown() {
        this.isOpen = true;
        this.dropdown.classList.remove("hidden");
        this.toggle.setAttribute("aria-expanded", "true");
        if (this.dropdownArrow) {
          this.dropdownArrow.style.transform = "rotate(180deg)";
        }
        const firstItem = this.dropdown.querySelector("a, button");
        if (firstItem) {
          firstItem.focus();
        }
        this.dropdown.style.opacity = "0";
        this.dropdown.style.transform = "translateY(-10px)";
        requestAnimationFrame(() => {
          this.dropdown.style.transition = `opacity ${this.options.animationDuration}ms ease, transform ${this.options.animationDuration}ms ease`;
          this.dropdown.style.opacity = "1";
          this.dropdown.style.transform = "translateY(0)";
        });
        announceToScreenReader("Notebook launch options opened");
        log11.debug("Launch dropdown opened");
      }
      /**
       * Close dropdown menu
       */
      closeDropdown() {
        this.isOpen = false;
        this.toggle.setAttribute("aria-expanded", "false");
        if (this.dropdownArrow) {
          this.dropdownArrow.style.transform = "rotate(0deg)";
        }
        this.dropdown.style.opacity = "0";
        this.dropdown.style.transform = "translateY(-10px)";
        setTimeout(() => {
          this.dropdown.classList.add("hidden");
          this.dropdown.style.transition = "";
          this.dropdown.style.opacity = "";
          this.dropdown.style.transform = "";
        }, this.options.animationDuration);
        log11.debug("Launch dropdown closed");
      }
      /**
       * Extract platform name from URL for analytics
       */
      getPlatformFromUrl(url) {
        if (url.includes("colab.research.google.com")) return "colab";
        if (url.includes("mybinder.org")) return "binder";
        if (url.includes("nbviewer.jupyter.org")) return "nbviewer";
        if (url.includes("github.dev")) return "github-dev";
        if (url.includes("github.com")) return "github";
        return "unknown";
      }
      /**
       * Track platform launch for analytics (can be enhanced)
       */
      trackPlatformLaunch(platform) {
        this.emit("notebook:platform-launch", {
          platform,
          notebookPath: this.element.dataset.notebookPath,
          timestamp: (/* @__PURE__ */ new Date()).toISOString()
        });
        log11.debug(`Notebook launched on platform: ${platform}`);
      }
      /**
       * Get launch statistics
       */
      getStats() {
        return {
          isOpen: this.isOpen,
          platformCount: this.dropdown.querySelectorAll('a[target="_blank"]').length,
          hasNotebook: !!this.element.dataset.notebookPath
        };
      }
      /**
       * Clean up when component is destroyed
       */
      onDestroy() {
        if (this.isOpen) {
          this.closeDropdown();
        }
      }
    };
    ComponentManager_default.register("notebook-launch", NotebookLaunch);
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/ui/Collapse.js
var Collapse, Collapse_default;
var init_Collapse2 = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/ui/Collapse.js"() {
    init_Component();
    init_AnimationBridge();
    init_storage();
    Collapse = class extends Component {
      constructor(config = {}) {
        super({
          name: "collapse",
          selector: config.selector || ".collapse__header",
          ...config
        });
        this.options = {
          animationDuration: 300,
          storeState: false,
          namespace: "collapse",
          autoInit: true,
          ...config
        };
        this.collapseElements = /* @__PURE__ */ new Map();
      }
      /**
       * Initialize collapse functionality
       */
      async onInit() {
        if (this.options.autoInit) {
          this.setupCollapseElements();
        }
      }
      /**
       * Setup all collapse elements
       */
      setupCollapseElements() {
        const headers = this.findElements();
        headers.forEach((header) => {
          this.initializeCollapseHeader(header);
        });
      }
      /**
       * Initialize a single collapse header
       */
      initializeCollapseHeader(header) {
        if (header.hasAttribute("data-collapse-initialized")) {
          return;
        }
        const target = header.getAttribute("data-target");
        const targetElement = document.getElementById(target);
        if (!targetElement) {
          console.warn(`[${this.name}] Target element not found: ${target}`);
          return;
        }
        header.setAttribute("data-collapse-initialized", "true");
        if (!targetElement.classList.contains("collapse__body")) {
          targetElement.classList.add("collapse__body");
        }
        const collapseData = {
          header,
          target: targetElement,
          targetId: target,
          isExpanded: header.getAttribute("aria-expanded") === "true"
        };
        this.collapseElements.set(target, collapseData);
        this.bindCollapseEvents(header, collapseData);
        if (this.options.storeState) {
          this.restoreState(collapseData);
        }
      }
      /**
       * Bind event listeners for collapse functionality
       */
      bindCollapseEvents(header, collapseData) {
        this.addEventListener(header, "click", (e) => {
          e.preventDefault();
          e.stopPropagation();
          this.toggle(collapseData);
        });
        this.addEventListener(header, "keydown", (e) => {
          if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            this.toggle(collapseData);
          }
        });
      }
      /**
       * Toggle collapse state
       */
      toggle(collapseData) {
        const newState = !collapseData.isExpanded;
        if (newState) {
          this.expand(collapseData);
        } else {
          this.collapse(collapseData);
        }
      }
      /**
       * Expand a collapse element
       */
      async expand(collapseData) {
        const { header, target, targetId } = collapseData;
        collapseData.isExpanded = true;
        await animationBridge.expand(target, { timing: "medium" });
        if (this.options.storeState) {
          this.saveState(targetId, true);
        }
        this.emit("collapse:expanded", { targetId, header, target });
      }
      /**
       * Collapse a collapse element
       */
      async collapse(collapseData) {
        const { header, target, targetId } = collapseData;
        collapseData.isExpanded = false;
        await animationBridge.collapse(target, { timing: "medium" });
        if (this.options.storeState) {
          this.saveState(targetId, false);
        }
        this.emit("collapse:collapsed", { targetId, header, target });
      }
      /**
       * Apply expand animation and visual effects
       */
      applyExpandAnimation(target, header) {
        if (this.options.animationDuration > 0) {
          target.style.maxHeight = target.scrollHeight + "px";
          target.style.transition = `max-height ${this.options.animationDuration}ms cubic-bezier(0.4, 0, 0.2, 1)`;
        }
        const icon = header.querySelector(".chevron, .collapse__icon, .response-toggle svg, .component-toggle svg");
        if (icon) {
          icon.style.transform = "rotate(90deg)";
          icon.style.transition = `transform ${this.options.animationDuration}ms ease`;
        }
      }
      /**
       * Apply collapse animation and visual effects
       */
      applyCollapseAnimation(target, header) {
        if (this.options.animationDuration > 0) {
          target.style.maxHeight = null;
          target.style.transition = `max-height ${this.options.animationDuration}ms cubic-bezier(0.4, 0, 0.2, 1)`;
        }
        const icon = header.querySelector(".chevron, .collapse__icon, .response-toggle svg, .component-toggle svg");
        if (icon) {
          icon.style.transform = "rotate(0deg)";
          icon.style.transition = `transform ${this.options.animationDuration}ms ease`;
        }
      }
      /**
       * Save collapse state to localStorage
       */
      saveState(targetId, isExpanded) {
        try {
          const key = `${this.options.namespace}-${targetId}`;
          localStorage2.set(key, isExpanded ? "expanded" : "collapsed");
        } catch (error) {
          console.warn(`[${this.name}] Could not save state:`, error);
        }
      }
      /**
       * Restore collapse state from localStorage
       */
      restoreState(collapseData) {
        try {
          const key = `${this.options.namespace}-${collapseData.targetId}`;
          const savedState = localStorage2.get(key);
          if (savedState === "expanded" && !collapseData.isExpanded) {
            this.expand(collapseData);
          } else if (savedState === "collapsed" && collapseData.isExpanded) {
            this.collapse(collapseData);
          }
        } catch (error) {
          console.warn(`[${this.name}] Could not restore state:`, error);
        }
      }
      /**
       * Public API: Expand specific element
       */
      expandElement(targetId) {
        const collapseData = this.collapseElements.get(targetId);
        if (collapseData && !collapseData.isExpanded) {
          this.expand(collapseData);
        }
      }
      /**
       * Public API: Collapse specific element
       */
      collapseElement(targetId) {
        const collapseData = this.collapseElements.get(targetId);
        if (collapseData && collapseData.isExpanded) {
          this.collapse(collapseData);
        }
      }
      /**
       * Public API: Expand all elements
       */
      expandAll() {
        this.collapseElements.forEach((collapseData) => {
          if (!collapseData.isExpanded) {
            this.expand(collapseData);
          }
        });
      }
      /**
       * Public API: Collapse all elements
       */
      collapseAll() {
        this.collapseElements.forEach((collapseData) => {
          if (collapseData.isExpanded) {
            this.collapse(collapseData);
          }
        });
      }
      /**
       * Cleanup when component is destroyed
       */
      destroy() {
        this.collapseElements.clear();
        super.destroy();
      }
    };
    Collapse_default = Collapse;
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/notebook/NotebookCollapse.js
var NotebookCollapse_exports = {};
__export(NotebookCollapse_exports, {
  default: () => NotebookCollapse_default
});
var NotebookCollapse, NotebookCollapse_default;
var init_NotebookCollapse = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/notebook/NotebookCollapse.js"() {
    init_Collapse2();
    init_ComponentManager();
    NotebookCollapse = class extends Collapse_default {
      constructor(config = {}) {
        super({
          name: "notebook-collapse",
          selector: config.selector || ".notebook-cell:not(.notebook-cell--markdown) .collapse__header",
          ...config
        });
      }
      async expand(collapseData) {
        const { header, target } = collapseData;
        await super.expand(collapseData);
        const section = header.closest(".collapse");
        if (section) section.setAttribute("data-collapse-state", "expanded");
        if (target) target.setAttribute("data-collapse-state", "expanded");
        header.setAttribute("aria-expanded", "true");
      }
      async collapse(collapseData) {
        const { header, target } = collapseData;
        await super.collapse(collapseData);
        const section = header.closest(".collapse");
        if (section) section.setAttribute("data-collapse-state", "collapsed");
        if (target) target.setAttribute("data-collapse-state", "collapsed");
        header.setAttribute("aria-expanded", "false");
      }
    };
    ComponentManager_default.register("notebook-collapse", NotebookCollapse);
    NotebookCollapse_default = NotebookCollapse;
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/article/OpenAPIViewer.js
var OpenAPIViewer_exports = {};
__export(OpenAPIViewer_exports, {
  OpenAPIViewer: () => OpenAPIViewer
});
var OpenAPIViewer;
var init_OpenAPIViewer = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/article/OpenAPIViewer.js"() {
    init_Component();
    init_ComponentManager();
    init_utils();
    init_AnimationBridge();
    OpenAPIViewer = class extends Component {
      constructor(config = {}) {
        super({
          name: "openapi-viewer",
          selector: config.selector || '[data-component="openapi-viewer"]',
          ...config
        });
        this.currentFilter = "all";
        this.endpoints = /* @__PURE__ */ new Map();
        this.options = {
          autoCollapse: true,
          storePreferences: true,
          namespace: "openapi-viewer",
          ...this.options
        };
      }
      /**
       * Setup elements and initialize OpenAPI viewer
       */
      setupElements() {
        super.setupElements();
        this.endpointElements = $$(".endpoint-item");
        if (this.endpointElements.length === 0) return;
        this.endpointElements.forEach((endpoint) => this.setupEndpoint(endpoint));
        this.loadMetadata();
        if (this.options.storePreferences) {
          this.loadPreferences();
        }
      }
      /**
       * Setup individual endpoint
       */
      setupEndpoint(endpoint) {
        const header = endpoint.querySelector(".endpoint-header");
        const details = endpoint.querySelector(".endpoint-details");
        const method = endpoint.getAttribute("data-method");
        const path = endpoint.getAttribute("data-path");
        if (!header || !details) {
          console.warn("Endpoint missing header or details:", endpoint);
          return;
        }
        if (!endpoint.id) {
          endpoint.id = `endpoint-${method}-${path}`.replace(/[^a-zA-Z0-9-]/g, "-");
        }
        header.setAttribute("aria-controls", details.id || `${endpoint.id}-details`);
        details.id = details.id || `${endpoint.id}-details`;
        this.endpoints.set(endpoint, {
          header,
          details,
          method,
          path,
          isExpanded: false,
          tags: this.getEndpointTags(endpoint)
        });
        endpoint.setAttribute("data-openapi-component", this.id);
      }
      /**
       * Get endpoint tags for filtering
       */
      getEndpointTags(endpoint) {
        const tags = [];
        const tagElements = endpoint.querySelectorAll(".endpoint-tag");
        tagElements.forEach((tag) => {
          tags.push(tag.textContent.trim().toLowerCase());
        });
        return tags;
      }
      /**
       * Load OpenAPI metadata
       */
      loadMetadata() {
        const metadataScript = $("#openapi-metadata");
        if (metadataScript) {
          try {
            this.metadata = JSON.parse(metadataScript.textContent);
          } catch (error) {
            console.warn("Failed to parse OpenAPI metadata:", error);
          }
        }
      }
      /**
       * Bind event listeners
       */
      bindEvents() {
        this.addEventListener(document, "click", (e) => {
          const header = e.target.closest(".endpoint-header");
          if (header) {
            const endpoint = header.closest(".endpoint-item");
            if (endpoint && this.endpoints.has(endpoint)) {
              e.preventDefault();
              this.toggleEndpoint(endpoint);
            }
          }
        });
        this.addEventListener(document, "keydown", (e) => {
          const header = e.target.closest(".endpoint-header");
          if (header && (e.key === "Enter" || e.key === " ")) {
            const endpoint = header.closest(".endpoint-item");
            if (endpoint && this.endpoints.has(endpoint)) {
              e.preventDefault();
              this.toggleEndpoint(endpoint);
            }
          }
        });
        this.addEventListener(document, "click", (e) => {
          const tagFilter = e.target.closest(".tag-filter");
          if (tagFilter) {
            e.preventDefault();
            const tag = tagFilter.getAttribute("data-tag");
            this.filterByTag(tag);
          }
        });
        this.addEventListener(document, "click", (e) => {
          const copyBtn = e.target.closest(".copy-button");
          if (copyBtn) {
            e.preventDefault();
            this.handleCopyClick(copyBtn);
          }
        });
      }
      /**
       * Toggle endpoint expansion
       */
      async toggleEndpoint(endpoint) {
        const endpointData = this.endpoints.get(endpoint);
        if (!endpointData) return;
        const { header, details, isExpanded } = endpointData;
        endpointData.isExpanded = !isExpanded;
        try {
          if (endpointData.isExpanded) {
            await this.expandEndpoint(endpoint, endpointData);
          } else {
            await this.collapseEndpoint(endpoint, endpointData);
          }
          if (this.options.storePreferences) {
            this.savePreferences();
          }
          this.emit("endpoint-toggle", {
            endpoint,
            expanded: endpointData.isExpanded,
            method: endpointData.method,
            path: endpointData.path
          });
        } catch (error) {
          console.error("Toggle animation failed:", error);
          endpointData.isExpanded = !endpointData.isExpanded;
        }
      }
      /**
       * Expand endpoint details
       */
      async expandEndpoint(endpoint, endpointData) {
        const { header, details } = endpointData;
        header.setAttribute("aria-expanded", "true");
        animationBridge.setCollapseState(details, "expanded");
        animationBridge.setComponentState(details, "transitioning");
        const duration = animationBridge.getTiming("medium");
        this.initializeNestedComponents(details);
        setTimeout(() => {
          animationBridge.setComponentState(details, "ready");
        }, duration);
        this.emit("endpoint-expanded", { endpoint, details });
      }
      /**
       * Collapse endpoint details
       */
      async collapseEndpoint(endpoint, endpointData) {
        const { header, details } = endpointData;
        header.setAttribute("aria-expanded", "false");
        animationBridge.setComponentState(details, "transitioning");
        animationBridge.setCollapseState(details, "collapsed");
        const duration = animationBridge.getTiming("medium");
        setTimeout(() => {
          animationBridge.setComponentState(details, "ready");
        }, duration);
        this.emit("endpoint-collapsed", { endpoint, details });
      }
      /**
       * Initialize nested components in expanded sections
       */
      initializeNestedComponents(container) {
        const codeTabs = container.querySelectorAll('[data-component="code-tabs"]');
        codeTabs.forEach((tabs) => {
          if (!tabs.hasAttribute("data-initialized")) {
            this.initializeCodeTabs(tabs);
            tabs.setAttribute("data-initialized", "true");
          }
        });
      }
      /**
       * Initialize code tabs component
       */
      initializeCodeTabs(tabsContainer) {
        const tabButtons = tabsContainer.querySelectorAll(".code-tab");
        const tabPanels = tabsContainer.querySelectorAll(".code-tab-panel");
        tabButtons.forEach((button) => {
          this.addEventListener(button, "click", (e) => {
            e.preventDefault();
            const targetTab = button.getAttribute("data-tab");
            tabButtons.forEach((btn) => btn.classList.remove("code-tab--active"));
            button.classList.add("code-tab--active");
            tabPanels.forEach((panel) => panel.classList.remove("code-tab-panel--active"));
            const targetPanel = tabsContainer.querySelector(`[data-panel="${targetTab}"]`);
            if (targetPanel) {
              targetPanel.classList.add("code-tab-panel--active");
            }
            this.emit("code-tab-changed", { tab: targetTab, container: tabsContainer });
          });
        });
      }
      /**
       * Filter endpoints by tag
       */
      filterByTag(tag) {
        this.currentFilter = tag;
        const filterButtons = $$(".tag-filter");
        filterButtons.forEach((btn) => {
          btn.classList.toggle("tag-filter--active", btn.getAttribute("data-tag") === tag);
        });
        this.endpoints.forEach((data, endpoint) => {
          const shouldShow = tag === "all" || data.tags.includes(tag.toLowerCase());
          if (shouldShow) {
            endpoint.style.display = "";
            endpoint.classList.remove("endpoint-item--filtered");
          } else {
            endpoint.style.display = "none";
            endpoint.classList.add("endpoint-item--filtered");
          }
        });
        if (this.options.storePreferences) {
          this.savePreferences();
        }
        this.emit("filter-changed", { tag, filteredCount: this.getFilteredCount() });
      }
      /**
       * Get count of filtered endpoints
       */
      getFilteredCount() {
        let count = 0;
        this.endpoints.forEach((data, endpoint) => {
          if (endpoint.style.display !== "none") {
            count++;
          }
        });
        return count;
      }
      /**
       * Handle copy button clicks using unified CopyManager
       */
      async handleCopyClick(button) {
        var _a;
        const result = await CopyManager.copy(button, {
          successMessage: `
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M20 6L9 17l-5-5"></path>
        </svg>
      `,
          errorMessage: "\u274C",
          feedbackDuration: 2e3,
          announceMessage: "Code copied to clipboard",
          analytics: {
            component: "openapi-viewer",
            endpointId: ((_a = button.closest(".endpoint-item")) == null ? void 0 : _a.id) || "unknown"
          },
          onSuccess: (text) => {
            this.emit("code-copied", { text, button });
          },
          onError: (error) => {
            this.emit("code-copy-failed", { error, button });
          }
        });
        return result;
      }
      /**
       * Expand all endpoints
       */
      async expandAll() {
        const expandPromises = Array.from(this.endpoints.keys()).filter((endpoint) => !this.endpoints.get(endpoint).isExpanded).map((endpoint) => this.toggleEndpoint(endpoint));
        await Promise.all(expandPromises);
        this.emit("expanded-all");
      }
      /**
       * Collapse all endpoints
       */
      async collapseAll() {
        const collapsePromises = Array.from(this.endpoints.keys()).filter((endpoint) => this.endpoints.get(endpoint).isExpanded).map((endpoint) => this.toggleEndpoint(endpoint));
        await Promise.all(collapsePromises);
        this.emit("collapsed-all");
      }
      /**
       * Save user preferences
       */
      savePreferences() {
        if (!this.options.storePreferences) return;
        const preferences = {
          filter: this.currentFilter,
          expandedEndpoints: [],
          timestamp: Date.now()
        };
        this.endpoints.forEach((data, endpoint) => {
          if (data.isExpanded) {
            preferences.expandedEndpoints.push(endpoint.id);
          }
        });
        try {
          localStorage2.set(`${this.options.namespace}.preferences`, preferences);
        } catch (error) {
          console.warn("Failed to save OpenAPI preferences:", error);
        }
      }
      /**
       * Load user preferences
       */
      loadPreferences() {
        if (!this.options.storePreferences) return;
        try {
          const preferences = localStorage2.get(`${this.options.namespace}.preferences`);
          if (preferences) {
            if (preferences.filter && preferences.filter !== "all") {
              const delay = animationBridge.getTiming("fast") / 4;
              setTimeout(() => this.filterByTag(preferences.filter), delay);
            }
            if (preferences.expandedEndpoints && preferences.expandedEndpoints.length > 0) {
              setTimeout(() => {
                preferences.expandedEndpoints.forEach((endpointId) => {
                  const endpoint = $(`#${endpointId}`);
                  if (endpoint && this.endpoints.has(endpoint)) {
                    const endpointData = this.endpoints.get(endpoint);
                    if (!endpointData.isExpanded) {
                      this.toggleEndpoint(endpoint);
                    }
                  }
                });
              }, 200);
            }
          }
        } catch (error) {
          console.warn("Failed to load OpenAPI preferences:", error);
        }
      }
      /**
       * Get component statistics
       */
      getStats() {
        let expanded = 0;
        let collapsed = 0;
        this.endpoints.forEach((data) => {
          if (data.isExpanded) {
            expanded++;
          } else {
            collapsed++;
          }
        });
        return {
          totalEndpoints: this.endpoints.size,
          expanded,
          collapsed,
          currentFilter: this.currentFilter,
          filteredCount: this.getFilteredCount(),
          metadata: this.metadata
        };
      }
      /**
       * Custom cleanup
       */
      onDestroy() {
        this.endpoints.forEach((data, endpoint) => {
          endpoint.removeAttribute("data-openapi-component");
        });
        this.endpoints.clear();
      }
    };
    ComponentManager_default.register("openapi-viewer", OpenAPIViewer);
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/openapi/OpenAPICollapse.js
var OpenAPICollapse_exports = {};
__export(OpenAPICollapse_exports, {
  OpenAPICollapse: () => OpenAPICollapse,
  default: () => OpenAPICollapse_default
});
var OpenAPICollapse, OpenAPICollapse_default;
var init_OpenAPICollapse = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/openapi/OpenAPICollapse.js"() {
    init_Collapse2();
    init_ComponentManager();
    OpenAPICollapse = class extends Collapse {
      constructor(config = {}) {
        super({
          name: "openapi-collapse",
          selector: ".openapi-spec .collapse__header, .openapi-components .collapse__header, .responses-container .collapse__header, .response-header.collapse__header, .endpoint-group .collapse__header, .component-header.collapse__header",
          ...config
        });
        this.options = {
          animationDuration: 300,
          storeState: true,
          namespace: "openapi-collapse",
          groupBySection: true,
          autoExpandSchemas: false,
          ...this.options
        };
        this.sectionGroups = /* @__PURE__ */ new Map();
      }
      /**
       * Enhanced setup for OpenAPI elements
       */
      setupCollapseElements() {
        super.setupCollapseElements();
        if (this.options.groupBySection) {
          this.organizeBySections();
        }
        if (this.options.autoExpandSchemas) {
          this.autoExpandSchemas();
        }
      }
      /**
       * Initialize OpenAPI-specific collapse header with enhanced metadata
       */
      initializeCollapseHeader(header) {
        super.initializeCollapseHeader(header);
        const target = header.getAttribute("data-target");
        const collapseData = this.collapseElements.get(target);
        if (!collapseData) return;
        collapseData.section = this.identifySection(header);
        collapseData.type = this.identifyType(header);
        collapseData.priority = this.calculatePriority(header);
        this.collapseElements.set(target, collapseData);
      }
      /**
       * Identify which OpenAPI section this collapse belongs to
       */
      identifySection(header) {
        if (header.closest(".responses-container")) return "responses";
        if (header.closest(".openapi-components")) return "components";
        if (header.closest(".endpoint-group")) return "endpoints";
        if (header.closest(".openapi-spec")) return "spec";
        return "unknown";
      }
      /**
       * Identify the type of OpenAPI element
       */
      identifyType(header) {
        if (header.classList.contains("component-header")) {
          const schemaName = header.getAttribute("data-schema-name");
          if (schemaName) return "schema";
        }
        if (header.classList.contains("response-header")) {
          return "response";
        }
        if (header.closest(".endpoint-item")) {
          return "endpoint";
        }
        return "generic";
      }
      /**
       * Calculate priority for auto-expansion logic
       */
      calculatePriority(header) {
        var _a;
        if (header.classList.contains("response-header")) {
          const statusCode = (_a = header.querySelector(".status-code")) == null ? void 0 : _a.textContent;
          if (statusCode == null ? void 0 : statusCode.startsWith("2")) return 10;
          if (statusCode === "default") return 5;
          return 3;
        }
        if (header.classList.contains("component-header")) {
          return 7;
        }
        return 1;
      }
      /**
       * Organize collapse elements by section for bulk operations
       */
      organizeBySections() {
        this.collapseElements.forEach((collapseData, targetId) => {
          const section = collapseData.section;
          if (!this.sectionGroups.has(section)) {
            this.sectionGroups.set(section, []);
          }
          this.sectionGroups.get(section).push(targetId);
        });
      }
      /**
       * Auto-expand schema components if configured
       */
      autoExpandSchemas() {
        const schemaElements = Array.from(this.collapseElements.values()).filter((data) => data.type === "schema").sort((a, b) => b.priority - a.priority);
        schemaElements.slice(0, 3).forEach((collapseData) => {
          if (!collapseData.isExpanded) {
            this.expand(collapseData);
          }
        });
      }
      /**
       * Enhanced expand with OpenAPI-specific logic
       */
      expand(collapseData) {
        super.expand(collapseData);
        if (collapseData.type === "response") {
          this.handleResponseExpansion(collapseData);
        }
        this.initializeExpandedContent(collapseData.target, collapseData.type);
        this.emit("openapi:expanded", {
          targetId: collapseData.targetId,
          section: collapseData.section,
          type: collapseData.type
        });
      }
      /**
       * Handle special response expansion logic using enhanced Component base class
       */
      handleResponseExpansion(collapseData) {
        const { target, header } = collapseData;
        if (target && target.classList.contains("response-details")) {
          target.setAttribute("data-collapse-state", "transitioning");
          header.setAttribute("aria-expanded", "true");
          requestAnimationFrame(() => {
            target.setAttribute("data-collapse-state", "expanded");
          });
        }
      }
      /**
       * Handle response collapse
       */
      handleResponseCollapse(collapseData) {
        const { target, header } = collapseData;
        if (target && target.classList.contains("response-details")) {
          target.setAttribute("data-collapse-state", "transitioning");
          header.setAttribute("aria-expanded", "false");
          requestAnimationFrame(() => {
            target.setAttribute("data-collapse-state", "collapsed");
          });
        }
      }
      /**
       * Enhanced collapse with OpenAPI-specific cleanup
       */
      collapse(collapseData) {
        if (collapseData.type === "response") {
          this.handleResponseCollapse(collapseData);
        }
        super.collapse(collapseData);
        this.emit("openapi:collapsed", {
          targetId: collapseData.targetId,
          section: collapseData.section,
          type: collapseData.type
        });
      }
      /**
       * Initialize components within expanded OpenAPI content
       */
      initializeExpandedContent(target, type) {
        const codeBlocks = target.querySelectorAll('pre code[class*="language-"]');
        if (codeBlocks.length > 0 && window.Prism) {
          codeBlocks.forEach((block) => {
            if (!block.classList.contains("prism-highlighted")) {
              window.Prism.highlightElement(block);
              block.classList.add("prism-highlighted");
            }
          });
        }
        const copyButtons = target.querySelectorAll(".copy-btn:not([data-initialized])");
        copyButtons.forEach((button) => {
          button.setAttribute("data-initialized", "true");
        });
        if (type === "response") {
          this.enhanceResponseSchemas(target);
        }
      }
      /**
       * Enhance schema display within response content
       */
      enhanceResponseSchemas(responseTarget) {
        const schemaContainers = responseTarget.querySelectorAll(".schema-container");
        schemaContainers.forEach((container) => {
          const typeBadge = container.querySelector(".type-badge");
          if (typeBadge) {
            const schemaType = typeBadge.textContent.replace(/[\[\]]/g, "");
            container.classList.add(`schema-type--${schemaType}`);
          }
        });
      }
      /**
       * Public API: Expand all elements in a specific section
       */
      expandSection(sectionName) {
        const sectionElements = this.sectionGroups.get(sectionName) || [];
        sectionElements.forEach((targetId) => {
          this.expandElement(targetId);
        });
      }
      /**
       * Public API: Collapse all elements in a specific section
       */
      collapseSection(sectionName) {
        const sectionElements = this.sectionGroups.get(sectionName) || [];
        sectionElements.forEach((targetId) => {
          this.collapseElement(targetId);
        });
      }
      /**
       * Public API: Get statistics about collapse state
       */
      getStats() {
        const stats = {
          total: this.collapseElements.size,
          expanded: 0,
          collapsed: 0,
          sections: {}
        };
        this.sectionGroups.forEach((elements, section) => {
          stats.sections[section] = {
            total: elements.length,
            expanded: 0,
            collapsed: 0
          };
        });
        this.collapseElements.forEach((collapseData) => {
          if (collapseData.isExpanded) {
            stats.expanded++;
            if (collapseData.section) {
              stats.sections[collapseData.section].expanded++;
            }
          } else {
            stats.collapsed++;
            if (collapseData.section) {
              stats.sections[collapseData.section].collapsed++;
            }
          }
        });
        return stats;
      }
    };
    ComponentManager_default.register("openapi-collapse", OpenAPICollapse);
    OpenAPICollapse_default = OpenAPICollapse;
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/openapi/endpoint/EndpointData.js
var EndpointData_exports = {};
__export(EndpointData_exports, {
  EndpointData: () => EndpointData
});
var EndpointData;
var init_EndpointData = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/openapi/endpoint/EndpointData.js"() {
    init_Component();
    init_ComponentManager();
    EndpointData = class _EndpointData extends Component {
      constructor(config = {}) {
        super({
          name: "endpoint-data",
          selector: config.selector || ".endpoint-item",
          ...config
        });
      }
      /**
       * Initialize endpoint data for all endpoints
       */
      static initializeEndpointData(endpoints, generateEndpointId) {
        endpoints.forEach((endpoint) => {
          const data = {
            element: endpoint,
            id: endpoint.id || generateEndpointId(endpoint),
            tags: _EndpointData.extractTags(endpoint),
            method: _EndpointData.extractMethod(endpoint),
            path: _EndpointData.extractPath(endpoint),
            summary: _EndpointData.extractSummary(endpoint),
            deprecated: _EndpointData.isDeprecated(endpoint),
            visible: true
          };
          endpoint._filterData = data;
        });
      }
      /**
       * Generate a unique ID for an endpoint
       */
      static generateEndpointId(endpoint) {
        const method = _EndpointData.extractMethod(endpoint);
        const path = _EndpointData.extractPath(endpoint);
        return `${method}-${path}`.replace(/[^a-zA-Z0-9-]/g, "-").toLowerCase();
      }
      /**
       * Extract tags from endpoint element
       */
      static extractTags(endpoint) {
        const tags = [];
        const tagElements = endpoint.querySelectorAll(".endpoint-tag");
        tagElements.forEach((tag) => {
          const tagText = tag.textContent.trim().toLowerCase();
          if (tagText) tags.push(tagText);
        });
        return tags;
      }
      /**
       * Extract HTTP method from endpoint
       */
      static extractMethod(endpoint) {
        const methodElement = endpoint.querySelector(".http-method");
        if (methodElement) {
          return methodElement.textContent.trim().toUpperCase();
        }
        return endpoint.getAttribute("data-method") || "UNKNOWN";
      }
      /**
       * Extract path from endpoint
       */
      static extractPath(endpoint) {
        const pathElement = endpoint.querySelector(".endpoint-path");
        if (pathElement) {
          return pathElement.textContent.trim();
        }
        return endpoint.getAttribute("data-path") || "/";
      }
      /**
       * Extract summary from endpoint
       */
      static extractSummary(endpoint) {
        const summaryElement = endpoint.querySelector(".endpoint-summary");
        return summaryElement ? summaryElement.textContent.trim() : "";
      }
      /**
       * Check if endpoint is deprecated
       */
      static isDeprecated(endpoint) {
        return endpoint.querySelector(".deprecated-badge") !== null;
      }
      /**
       * Build statistics for filter options
       */
      static buildFilterStats(endpoints) {
        const filterStats = /* @__PURE__ */ new Map();
        const tagCounts = /* @__PURE__ */ new Map();
        const methodCounts = /* @__PURE__ */ new Map();
        endpoints.forEach((endpoint) => {
          const data = endpoint._filterData;
          data.tags.forEach((tag) => {
            tagCounts.set(tag, (tagCounts.get(tag) || 0) + 1);
          });
          methodCounts.set(data.method, (methodCounts.get(data.method) || 0) + 1);
        });
        filterStats.set("tags", tagCounts);
        filterStats.set("methods", methodCounts);
        return filterStats;
      }
      /**
       * Update filter button labels with statistics
       */
      static updateFilterButtonStats(tagFilters, methodFilters, filterStats) {
        tagFilters.forEach((button) => {
          const tag = button.getAttribute("data-tag");
          if (tag && tag !== "all") {
            const count = filterStats.get("tags").get(tag) || 0;
            const label = button.textContent.replace(/\s*\(\d+\)$/, "");
            button.textContent = `${label} (${count})`;
          }
        });
        methodFilters.forEach((button) => {
          const method = button.getAttribute("data-method");
          if (method && method !== "all") {
            const count = filterStats.get("methods").get(method) || 0;
            const label = button.textContent.replace(/\s*\(\d+\)$/, "");
            button.textContent = `${label} (${count})`;
          }
        });
      }
      /**
       * Get endpoint data for specific endpoint
       */
      static getEndpointData(endpoint) {
        return endpoint._filterData;
      }
      /**
       * Update endpoint data
       */
      static updateEndpointData(endpoint, updates) {
        if (endpoint._filterData) {
          Object.assign(endpoint._filterData, updates);
        }
      }
      /**
       * Clean up endpoint data
       */
      static cleanupEndpointData(endpoints) {
        endpoints.forEach((endpoint) => {
          delete endpoint._filterData;
        });
      }
      /**
       * Get all endpoint data as array
       */
      static getAllEndpointData(endpoints) {
        return endpoints.map((endpoint) => endpoint._filterData).filter((data) => data);
      }
      /**
       * Find endpoints matching criteria
       */
      static findEndpoints(endpoints, criteria) {
        return endpoints.filter((endpoint) => {
          const data = endpoint._filterData;
          if (!data) return false;
          for (const [key, value] of Object.entries(criteria)) {
            if (key === "tags") {
              if (!data.tags.some((tag) => value.includes(tag))) {
                return false;
              }
            } else if (data[key] !== value) {
              return false;
            }
          }
          return true;
        });
      }
      /**
       * Get statistics summary
       */
      static getStatsSummary(endpoints, filterStats) {
        var _a, _b;
        const allData = _EndpointData.getAllEndpointData(endpoints);
        return {
          totalEndpoints: endpoints.length,
          methodDistribution: Object.fromEntries(filterStats.get("methods") || /* @__PURE__ */ new Map()),
          tagDistribution: Object.fromEntries(filterStats.get("tags") || /* @__PURE__ */ new Map()),
          deprecatedCount: allData.filter((data) => data.deprecated).length,
          uniqueTags: ((_a = filterStats.get("tags")) == null ? void 0 : _a.size) || 0,
          uniqueMethods: ((_b = filterStats.get("methods")) == null ? void 0 : _b.size) || 0
        };
      }
      /**
       * Validate endpoint data integrity
       */
      static validateEndpointData(endpoints) {
        const issues = [];
        endpoints.forEach((endpoint, index) => {
          const data = endpoint._filterData;
          if (!data) {
            issues.push(`Endpoint ${index}: Missing filter data`);
            return;
          }
          if (!data.method || data.method === "UNKNOWN") {
            issues.push(`Endpoint ${index}: Invalid or missing HTTP method`);
          }
          if (!data.path || data.path === "/") {
            issues.push(`Endpoint ${index}: Invalid or missing path`);
          }
          if (!Array.isArray(data.tags)) {
            issues.push(`Endpoint ${index}: Invalid tags format`);
          }
        });
        return issues;
      }
      /**
       * Export endpoint data for analysis
       */
      static exportEndpointData(endpoints) {
        const allData = _EndpointData.getAllEndpointData(endpoints);
        return {
          timestamp: (/* @__PURE__ */ new Date()).toISOString(),
          totalCount: allData.length,
          endpoints: allData.map((data) => ({
            id: data.id,
            method: data.method,
            path: data.path,
            tags: data.tags,
            summary: data.summary,
            deprecated: data.deprecated,
            visible: data.visible
          }))
        };
      }
      /**
       * Search endpoints by text
       */
      static searchEndpoints(endpoints, query) {
        if (!query || query.trim().length === 0) {
          return endpoints;
        }
        const searchText = query.toLowerCase().trim();
        return endpoints.filter((endpoint) => {
          const data = endpoint._filterData;
          if (!data) return false;
          const searchableText = `${data.path} ${data.summary} ${data.tags.join(" ")}`.toLowerCase();
          return searchableText.includes(searchText);
        });
      }
    };
    ComponentManager_default.register("endpoint-data", EndpointData);
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/openapi/endpoint/FilterLogic.js
var FilterLogic_exports = {};
__export(FilterLogic_exports, {
  FilterLogic: () => FilterLogic
});
var FilterLogic;
var init_FilterLogic = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/openapi/endpoint/FilterLogic.js"() {
    init_Component();
    init_ComponentManager();
    FilterLogic = class _FilterLogic extends Component {
      constructor(config = {}) {
        super({
          name: "filter-logic",
          selector: config.selector || ".endpoint-filter",
          ...config
        });
      }
      /**
       * Apply all active filters to endpoints
       */
      static applyFilters(endpoints, currentFilters, emit) {
        let visibleCount = 0;
        endpoints.forEach((endpoint) => {
          const data = endpoint._filterData;
          let isVisible = true;
          if (currentFilters.tag !== "all") {
            isVisible = isVisible && data.tags.includes(currentFilters.tag);
          }
          if (currentFilters.method !== "all") {
            isVisible = isVisible && data.method === currentFilters.method;
          }
          if (currentFilters.search) {
            const searchText = currentFilters.search;
            const searchableText = `${data.path} ${data.summary} ${data.tags.join(" ")}`.toLowerCase();
            isVisible = isVisible && searchableText.includes(searchText);
          }
          if (currentFilters.status === "deprecated") {
            isVisible = isVisible && data.deprecated;
          } else if (currentFilters.status === "active") {
            isVisible = isVisible && !data.deprecated;
          }
          data.visible = isVisible;
          if (isVisible) visibleCount++;
        });
        emit("filters-applied", {
          filters: { ...currentFilters },
          visibleCount,
          totalCount: endpoints.length
        });
        return visibleCount;
      }
      /**
       * Filter endpoints by tag
       */
      static filterByTag(tag, currentFilters, updateActiveFilterButton, applyFilters, saveFilters, emit) {
        currentFilters.tag = tag;
        updateActiveFilterButton(".tag-filter", "data-tag", tag);
        const visibleCount = applyFilters();
        saveFilters();
        emit("tag-filter-changed", { tag, activeFilters: { ...currentFilters } });
        return visibleCount;
      }
      /**
       * Filter endpoints by HTTP method
       */
      static filterByMethod(method, currentFilters, updateActiveFilterButton, applyFilters, saveFilters, emit) {
        currentFilters.method = method;
        updateActiveFilterButton(".method-filter", "data-method", method);
        const visibleCount = applyFilters();
        saveFilters();
        emit("method-filter-changed", { method, activeFilters: { ...currentFilters } });
        return visibleCount;
      }
      /**
       * Search endpoints by text
       */
      static searchEndpoints(query, currentFilters, applyFilters, saveFilters, emit) {
        currentFilters.search = query.toLowerCase().trim();
        const visibleCount = applyFilters();
        saveFilters();
        emit("search-changed", { query, activeFilters: { ...currentFilters } });
        return visibleCount;
      }
      /**
       * Clear all active filters
       */
      static clearAllFilters(currentFilters, updateActiveFilterButton, searchInput, applyFilters, saveFilters, emit) {
        currentFilters.tag = "all";
        currentFilters.method = "all";
        currentFilters.status = "all";
        currentFilters.search = "";
        updateActiveFilterButton(".tag-filter", "data-tag", "all");
        updateActiveFilterButton(".method-filter", "data-method", "all");
        if (searchInput) {
          searchInput.value = "";
        }
        const visibleCount = applyFilters();
        saveFilters();
        emit("filters-cleared");
        return visibleCount;
      }
      /**
       * Check if any filters are active
       */
      static hasActiveFilters(currentFilters) {
        return currentFilters.tag !== "all" || currentFilters.method !== "all" || currentFilters.search || currentFilters.status !== "all";
      }
      /**
       * Get filtered endpoints
       */
      static getFilteredEndpoints(endpoints, currentFilters) {
        return endpoints.filter((endpoint) => {
          const data = endpoint._filterData;
          if (!data) return false;
          if (currentFilters.tag !== "all" && !data.tags.includes(currentFilters.tag)) {
            return false;
          }
          if (currentFilters.method !== "all" && data.method !== currentFilters.method) {
            return false;
          }
          if (currentFilters.search) {
            const searchText = currentFilters.search;
            const searchableText = `${data.path} ${data.summary} ${data.tags.join(" ")}`.toLowerCase();
            if (!searchableText.includes(searchText)) {
              return false;
            }
          }
          if (currentFilters.status === "deprecated" && !data.deprecated) {
            return false;
          } else if (currentFilters.status === "active" && data.deprecated) {
            return false;
          }
          return true;
        });
      }
      /**
       * Get visible endpoints count
       */
      static getVisibleCount(endpoints) {
        return endpoints.filter((endpoint) => {
          const data = endpoint._filterData;
          return data && data.visible;
        }).length;
      }
      /**
       * Get filter statistics
       */
      static getFilterStats(endpoints, currentFilters, filterStats) {
        const visibleCount = _FilterLogic.getVisibleCount(endpoints);
        return {
          totalEndpoints: endpoints.length,
          visibleEndpoints: visibleCount,
          hiddenEndpoints: endpoints.length - visibleCount,
          activeFilters: { ...currentFilters },
          filterStats: Object.fromEntries(filterStats),
          hasActiveFilters: _FilterLogic.hasActiveFilters(currentFilters)
        };
      }
      /**
       * Validate filter criteria
       */
      static validateFilters(currentFilters, availableTags, availableMethods) {
        const issues = [];
        if (currentFilters.tag !== "all" && !availableTags.includes(currentFilters.tag)) {
          issues.push(`Invalid tag filter: ${currentFilters.tag}`);
        }
        if (currentFilters.method !== "all" && !availableMethods.includes(currentFilters.method)) {
          issues.push(`Invalid method filter: ${currentFilters.method}`);
        }
        const validStatuses = ["all", "deprecated", "active"];
        if (!validStatuses.includes(currentFilters.status)) {
          issues.push(`Invalid status filter: ${currentFilters.status}`);
        }
        return issues;
      }
      /**
       * Create filter summary
       */
      static createFilterSummary(currentFilters, visibleCount, totalCount) {
        const activeFilters = [];
        if (currentFilters.tag !== "all") {
          activeFilters.push(`Tag: ${currentFilters.tag}`);
        }
        if (currentFilters.method !== "all") {
          activeFilters.push(`Method: ${currentFilters.method}`);
        }
        if (currentFilters.search) {
          activeFilters.push(`Search: "${currentFilters.search}"`);
        }
        if (currentFilters.status !== "all") {
          activeFilters.push(`Status: ${currentFilters.status}`);
        }
        return {
          activeFilters,
          summary: activeFilters.length > 0 ? `Showing ${visibleCount} of ${totalCount} endpoints (${activeFilters.join(", ")})` : `Showing all ${totalCount} endpoints`,
          hasFilters: activeFilters.length > 0
        };
      }
      /**
       * Apply single filter type
       */
      static applySingleFilter(endpoints, filterType, filterValue) {
        return endpoints.filter((endpoint) => {
          const data = endpoint._filterData;
          if (!data) return false;
          switch (filterType) {
            case "tag":
              return filterValue === "all" || data.tags.includes(filterValue);
            case "method":
              return filterValue === "all" || data.method === filterValue;
            case "status":
              if (filterValue === "deprecated") return data.deprecated;
              if (filterValue === "active") return !data.deprecated;
              return true;
            case "search":
              if (!filterValue) return true;
              const searchableText = `${data.path} ${data.summary} ${data.tags.join(" ")}`.toLowerCase();
              return searchableText.includes(filterValue.toLowerCase());
            default:
              return true;
          }
        });
      }
      /**
       * Get available filter values
       */
      static getAvailableFilterValues(endpoints) {
        const tags = /* @__PURE__ */ new Set();
        const methods = /* @__PURE__ */ new Set();
        const statuses = /* @__PURE__ */ new Set(["all", "active", "deprecated"]);
        endpoints.forEach((endpoint) => {
          const data = endpoint._filterData;
          if (!data) return;
          data.tags.forEach((tag) => tags.add(tag));
          methods.add(data.method);
        });
        return {
          tags: ["all", ...Array.from(tags).sort()],
          methods: ["all", ...Array.from(methods).sort()],
          statuses: Array.from(statuses)
        };
      }
      /**
       * Reset filter state
       */
      static resetFilterState() {
        return {
          tag: "all",
          method: "all",
          status: "all",
          search: ""
        };
      }
      /**
       * Clone filter state
       */
      static cloneFilterState(currentFilters) {
        return { ...currentFilters };
      }
      /**
       * Compare filter states
       */
      static compareFilterStates(filters1, filters2) {
        return filters1.tag === filters2.tag && filters1.method === filters2.method && filters1.status === filters2.status && filters1.search === filters2.search;
      }
    };
    ComponentManager_default.register("filter-logic", FilterLogic);
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/openapi/endpoint/FilterUI.js
var FilterUI_exports = {};
__export(FilterUI_exports, {
  FilterUI: () => FilterUI
});
var FilterUI;
var init_FilterUI = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/openapi/endpoint/FilterUI.js"() {
    init_Component();
    init_sanitize();
    init_ComponentManager();
    FilterUI = class _FilterUI extends Component {
      constructor(config = {}) {
        super({
          name: "filter-ui",
          selector: config.selector || ".endpoint-filter",
          ...config
        });
      }
      /**
       * Update active state of filter buttons
       */
      static updateActiveFilterButton(selector, attribute, value) {
        const buttons = document.querySelectorAll(selector);
        buttons.forEach((button) => {
          const isActive = button.getAttribute(attribute) === value;
          button.classList.toggle("tag-filter--active", isActive);
          button.classList.toggle("method-filter--active", isActive);
          button.classList.toggle("filter--active", isActive);
        });
      }
      /**
       * Set endpoint visibility with animation
       */
      static setEndpointVisibility(endpoint, isVisible, animateFiltering = true) {
        if (animateFiltering && !window.matchMedia("(prefers-reduced-motion: reduce)").matches) {
          if (isVisible && endpoint.style.display === "none") {
            endpoint.style.display = "";
            endpoint.style.opacity = "0";
            endpoint.style.transform = "translateY(10px)";
            requestAnimationFrame(() => {
              endpoint.style.opacity = "1";
              endpoint.style.transform = "translateY(0)";
            });
            setTimeout(() => {
              endpoint.style.transition = "";
              endpoint.style.transform = "";
            }, 300);
          } else if (!isVisible && endpoint.style.display !== "none") {
            endpoint.style.opacity = "0";
            endpoint.style.transform = "translateY(-10px)";
            setTimeout(() => {
              endpoint.style.display = "none";
              endpoint.style.transition = "";
              endpoint.style.transform = "";
            }, 300);
          }
        } else {
          endpoint.style.display = isVisible ? "" : "none";
        }
        endpoint.classList.toggle("endpoint-item--filtered", !isVisible);
      }
      /**
       * Update all endpoints visibility
       */
      static updateEndpointsVisibility(endpoints, animateFiltering = true) {
        endpoints.forEach((endpoint) => {
          const data = endpoint._filterData;
          if (data) {
            _FilterUI.setEndpointVisibility(endpoint, data.visible, animateFiltering);
          }
        });
      }
      /**
       * Update results count display
       */
      static updateResultsCount(count, totalCount) {
        const countElement = document.querySelector(".filter-results-count");
        if (countElement) {
          countElement.textContent = `Showing ${count} of ${totalCount} endpoints`;
          countElement.classList.toggle("filter-results-count--filtered", count < totalCount);
        }
      }
      /**
       * Update clear filters button visibility
       */
      static updateClearFiltersVisibility(hasActiveFilters) {
        const clearButton = document.querySelector(".clear-all-filters");
        if (clearButton) {
          clearButton.style.display = hasActiveFilters ? "" : "none";
        }
        const filterIndicator = document.querySelector(".active-filters-indicator");
        if (filterIndicator) {
          filterIndicator.classList.toggle("visible", hasActiveFilters);
        }
      }
      /**
       * Setup filter button event listeners
       */
      static setupFilterButtons(tagFilters, methodFilters, addEventListener, callbacks) {
        tagFilters.forEach((button) => {
          addEventListener(button, "click", (e) => {
            e.preventDefault();
            const tag = button.getAttribute("data-tag");
            callbacks.onTagFilter(tag);
          });
        });
        methodFilters.forEach((button) => {
          addEventListener(button, "click", (e) => {
            e.preventDefault();
            const method = button.getAttribute("data-method");
            callbacks.onMethodFilter(method);
          });
        });
      }
      /**
       * Setup search input event listeners
       */
      static setupSearchInput(searchInput, addEventListener, callbacks) {
        if (!searchInput) return;
        addEventListener(searchInput, "input", (e) => {
          callbacks.onSearch(e.target.value);
        });
        const clearButton = document.querySelector(".search-clear");
        if (clearButton) {
          addEventListener(clearButton, "click", () => {
            searchInput.value = "";
            callbacks.onSearch("");
          });
        }
      }
      /**
       * Setup clear all filters button
       */
      static setupClearAllButton(addEventListener, onClearAll) {
        const clearAllButton = document.querySelector(".clear-all-filters");
        if (clearAllButton) {
          addEventListener(clearAllButton, "click", () => {
            onClearAll();
          });
        }
      }
      /**
       * Setup keyboard shortcuts
       */
      static setupKeyboardShortcuts(addEventListener, onClearAll) {
        addEventListener(document, "keydown", (e) => {
          if (e.target.closest(".endpoint-filter") && e.key === "Escape") {
            onClearAll();
          }
        });
      }
      /**
       * Create filter status indicator
       */
      static createFilterStatusIndicator(currentFilters, visibleCount, totalCount) {
        const container = document.querySelector(".filter-status");
        if (!container) return;
        const activeFilters = [];
        if (currentFilters.tag !== "all") activeFilters.push(`Tag: ${currentFilters.tag}`);
        if (currentFilters.method !== "all") activeFilters.push(`Method: ${currentFilters.method}`);
        if (currentFilters.search) activeFilters.push(`Search: "${currentFilters.search}"`);
        if (currentFilters.status !== "all") activeFilters.push(`Status: ${currentFilters.status}`);
        const active = activeFilters.map(escapeHTML).join(", ");
        const html = `
      <div class="filter-status__count">
        Showing ${visibleCount} of ${totalCount} endpoints
      </div>
      ${activeFilters.length > 0 ? `
        <div class="filter-status__active">
          Active filters: ${active}
        </div>
      ` : ""}
    `;
        container.innerHTML = sanitizeHTML(html);
      }
      /**
       * Highlight matching text in search results
       */
      static highlightSearchText(endpoints, searchQuery) {
        if (!searchQuery) return;
        const searchText = searchQuery.toLowerCase().trim();
        if (!searchText) return;
        endpoints.forEach((endpoint) => {
          const data = endpoint._filterData;
          if (!data || !data.visible) return;
          const pathElement = endpoint.querySelector(".endpoint-path");
          if (pathElement) {
            _FilterUI.highlightTextInElement(pathElement, searchText);
          }
          const summaryElement = endpoint.querySelector(".endpoint-summary");
          if (summaryElement) {
            _FilterUI.highlightTextInElement(summaryElement, searchText);
          }
          const tagElements = endpoint.querySelectorAll(".endpoint-tag");
          tagElements.forEach((tag) => {
            _FilterUI.highlightTextInElement(tag, searchText);
          });
        });
      }
      /**
       * Remove search text highlighting
       */
      static removeSearchHighlighting(endpoints) {
        endpoints.forEach((endpoint) => {
          const highlightedElements = endpoint.querySelectorAll(".search-highlight");
          highlightedElements.forEach((element) => {
            const parent = element.parentNode;
            parent.replaceChild(document.createTextNode(element.textContent), element);
            parent.normalize();
          });
        });
      }
      /**
       * Highlight text in specific element
       */
      static highlightTextInElement(element, searchText) {
        const originalText = element.textContent;
        const regex = new RegExp(`(${searchText})`, "gi");
        if (regex.test(originalText)) {
          const highlightedHTML = originalText.replace(regex, '<span class="search-highlight">$1</span>');
          element.innerHTML = highlightedHTML;
        }
      }
      /**
       * Show filter loading state
       */
      static showFilterLoading() {
        const filterContainer = document.querySelector(".endpoint-filter");
        if (filterContainer) {
          filterContainer.classList.add("filter-loading");
        }
      }
      /**
       * Hide filter loading state
       */
      static hideFilterLoading() {
        const filterContainer = document.querySelector(".endpoint-filter");
        if (filterContainer) {
          filterContainer.classList.remove("filter-loading");
        }
      }
      /**
       * Animate filter application
       */
      static animateFilterApplication(endpoints, delay = 50) {
        endpoints.forEach((endpoint, index) => {
          const data = endpoint._filterData;
          if (data && data.visible) {
            setTimeout(() => {
              endpoint.style.transform = "scale(1.02)";
              setTimeout(() => {
                endpoint.style.transform = "";
              }, 150);
            }, index * delay);
          }
        });
      }
      /**
       * Create filter breadcrumbs
       */
      static createFilterBreadcrumbs(currentFilters, onRemoveFilter) {
        const breadcrumbsContainer = document.querySelector(".filter-breadcrumbs");
        if (!breadcrumbsContainer) return;
        breadcrumbsContainer.innerHTML = "";
        const filters = [];
        if (currentFilters.tag !== "all") {
          filters.push({ type: "tag", value: currentFilters.tag, label: `Tag: ${currentFilters.tag}` });
        }
        if (currentFilters.method !== "all") {
          filters.push({ type: "method", value: currentFilters.method, label: `Method: ${currentFilters.method}` });
        }
        if (currentFilters.search) {
          filters.push({ type: "search", value: currentFilters.search, label: `Search: "${currentFilters.search}"` });
        }
        if (currentFilters.status !== "all") {
          filters.push({ type: "status", value: currentFilters.status, label: `Status: ${currentFilters.status}` });
        }
        filters.forEach((filter) => {
          const breadcrumb = document.createElement("span");
          breadcrumb.className = "filter-breadcrumb";
          const safeLabel = escapeHTML(filter.label);
          breadcrumb.innerHTML = sanitizeHTML(`
        ${safeLabel}
        <button class="filter-breadcrumb__remove" aria-label="Remove ${safeLabel}">\xD7</button>
      `);
          const removeButton = breadcrumb.querySelector(".filter-breadcrumb__remove");
          removeButton.addEventListener("click", () => {
            onRemoveFilter(filter.type);
          });
          breadcrumbsContainer.appendChild(breadcrumb);
        });
      }
      /**
       * Update filter button counts
       */
      static updateFilterButtonCounts(tagFilters, methodFilters, endpoints, currentFilters) {
        tagFilters.forEach((button) => {
          const tag = button.getAttribute("data-tag");
          if (tag && tag !== "all") {
            const tempFilters = { ...currentFilters, tag };
            const count = endpoints.filter((endpoint) => {
              const data = endpoint._filterData;
              return data && data.tags.includes(tag);
            }).length;
            const label = button.textContent.replace(/\s*\(\d+\)$/, "");
            button.textContent = `${label} (${count})`;
            button.disabled = count === 0;
          }
        });
        methodFilters.forEach((button) => {
          const method = button.getAttribute("data-method");
          if (method && method !== "all") {
            const tempFilters = { ...currentFilters, method };
            const count = endpoints.filter((endpoint) => {
              const data = endpoint._filterData;
              return data && data.method === method;
            }).length;
            const label = button.textContent.replace(/\s*\(\d+\)$/, "");
            button.textContent = `${label} (${count})`;
            button.disabled = count === 0;
          }
        });
      }
      /**
       * Reset all visual states
       */
      static resetVisualStates(endpoints) {
        endpoints.forEach((endpoint) => {
          endpoint.style.display = "";
          endpoint.style.opacity = "";
          endpoint.style.transform = "";
          endpoint.style.transition = "";
          endpoint.classList.remove("endpoint-item--filtered");
          if (endpoint._filterData) {
            endpoint._filterData.visible = true;
          }
        });
        _FilterUI.removeSearchHighlighting(endpoints);
        _FilterUI.hideFilterLoading();
        const buttons = document.querySelectorAll(".tag-filter, .method-filter");
        buttons.forEach((button) => {
          button.classList.remove("tag-filter--active", "method-filter--active", "filter--active");
          button.disabled = false;
        });
      }
    };
    ComponentManager_default.register("filter-ui", FilterUI);
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/openapi/endpoint/FilterPersistence.js
var FilterPersistence_exports = {};
__export(FilterPersistence_exports, {
  FilterPersistence: () => FilterPersistence
});
var FilterPersistence;
var init_FilterPersistence = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/openapi/endpoint/FilterPersistence.js"() {
    init_Component();
    init_utils();
    init_ComponentManager();
    FilterPersistence = class _FilterPersistence extends Component {
      constructor(config = {}) {
        super({
          name: "filter-persistence",
          selector: config.selector || ".endpoint-filter",
          ...config
        });
      }
      /**
       * Save current filters to storage
       */
      static saveFilters(currentFilters, namespace = "endpoint-filter") {
        try {
          localStorage2.set(`${namespace}.filters`, {
            filters: currentFilters,
            timestamp: Date.now()
          });
        } catch (error) {
          console.warn("Failed to save endpoint filters:", error);
        }
      }
      /**
       * Load saved filters from storage
       */
      static loadSavedFilters(namespace = "endpoint-filter") {
        try {
          const stored = localStorage2.get(`${namespace}.filters`);
          if (stored) {
            return stored.filters;
          }
        } catch (error) {
          console.warn("Failed to load endpoint filters:", error);
        }
        return null;
      }
      /**
       * Apply loaded filters with callbacks
       */
      static applySavedFilters(savedFilters, callbacks, searchInput) {
        if (!savedFilters) return;
        setTimeout(() => {
          if (savedFilters.tag !== "all") {
            callbacks.onTagFilter(savedFilters.tag);
          }
          if (savedFilters.method !== "all") {
            callbacks.onMethodFilter(savedFilters.method);
          }
          if (savedFilters.search) {
            if (searchInput) {
              searchInput.value = savedFilters.search;
            }
            callbacks.onSearch(savedFilters.search);
          }
          if (savedFilters.status !== "all") {
            callbacks.onStatusFilter(savedFilters.status);
          }
        }, 100);
      }
      /**
       * Clear saved filters
       */
      static clearSavedFilters(namespace = "endpoint-filter") {
        try {
          localStorage2.remove(`${namespace}.filters`);
        } catch (error) {
          console.warn("Failed to clear saved filters:", error);
        }
      }
      /**
       * Save filter history for undo/redo functionality
       */
      static saveFilterHistory(currentFilters, namespace = "endpoint-filter", maxHistory = 10) {
        try {
          const history2 = _FilterPersistence.getFilterHistory(namespace);
          history2.push({
            filters: { ...currentFilters },
            timestamp: Date.now()
          });
          if (history2.length > maxHistory) {
            history2.splice(0, history2.length - maxHistory);
          }
          localStorage2.set(`${namespace}.history`, history2);
        } catch (error) {
          console.warn("Failed to save filter history:", error);
        }
      }
      /**
       * Get filter history
       */
      static getFilterHistory(namespace = "endpoint-filter") {
        try {
          return localStorage2.get(`${namespace}.history`) || [];
        } catch (error) {
          console.warn("Failed to get filter history:", error);
          return [];
        }
      }
      /**
       * Get previous filter state for undo
       */
      static getPreviousFilterState(namespace = "endpoint-filter") {
        const history2 = _FilterPersistence.getFilterHistory(namespace);
        if (history2.length >= 2) {
          return history2[history2.length - 2].filters;
        }
        return null;
      }
      /**
       * Clear filter history
       */
      static clearFilterHistory(namespace = "endpoint-filter") {
        try {
          localStorage2.remove(`${namespace}.history`);
        } catch (error) {
          console.warn("Failed to clear filter history:", error);
        }
      }
      /**
       * Save user preferences
       */
      static saveUserPreferences(preferences, namespace = "endpoint-filter") {
        try {
          localStorage2.set(`${namespace}.preferences`, {
            preferences,
            timestamp: Date.now()
          });
        } catch (error) {
          console.warn("Failed to save user preferences:", error);
        }
      }
      /**
       * Load user preferences
       */
      static loadUserPreferences(namespace = "endpoint-filter") {
        try {
          const stored = localStorage2.get(`${namespace}.preferences`);
          if (stored) {
            return stored.preferences;
          }
        } catch (error) {
          console.warn("Failed to load user preferences:", error);
        }
        return null;
      }
      /**
       * Save filter analytics data
       */
      static saveFilterAnalytics(analyticsData, namespace = "endpoint-filter") {
        try {
          const existing = localStorage2.get(`${namespace}.analytics`) || [];
          existing.push({
            ...analyticsData,
            timestamp: Date.now()
          });
          if (existing.length > 100) {
            existing.splice(0, existing.length - 100);
          }
          localStorage2.set(`${namespace}.analytics`, existing);
        } catch (error) {
          console.warn("Failed to save filter analytics:", error);
        }
      }
      /**
       * Get filter analytics data
       */
      static getFilterAnalytics(namespace = "endpoint-filter") {
        try {
          return localStorage2.get(`${namespace}.analytics`) || [];
        } catch (error) {
          console.warn("Failed to get filter analytics:", error);
          return [];
        }
      }
      /**
       * Export all saved data
       */
      static exportFilterData(namespace = "endpoint-filter") {
        try {
          return {
            filters: localStorage2.get(`${namespace}.filters`),
            history: localStorage2.get(`${namespace}.history`),
            preferences: localStorage2.get(`${namespace}.preferences`),
            analytics: localStorage2.get(`${namespace}.analytics`),
            exportedAt: (/* @__PURE__ */ new Date()).toISOString()
          };
        } catch (error) {
          console.warn("Failed to export filter data:", error);
          return null;
        }
      }
      /**
       * Import filter data
       */
      static importFilterData(data, namespace = "endpoint-filter") {
        try {
          if (data.filters) {
            localStorage2.set(`${namespace}.filters`, data.filters);
          }
          if (data.history) {
            localStorage2.set(`${namespace}.history`, data.history);
          }
          if (data.preferences) {
            localStorage2.set(`${namespace}.preferences`, data.preferences);
          }
          if (data.analytics) {
            localStorage2.set(`${namespace}.analytics`, data.analytics);
          }
          return true;
        } catch (error) {
          console.warn("Failed to import filter data:", error);
          return false;
        }
      }
      /**
       * Clear all saved data
       */
      static clearAllSavedData(namespace = "endpoint-filter") {
        try {
          localStorage2.remove(`${namespace}.filters`);
          localStorage2.remove(`${namespace}.history`);
          localStorage2.remove(`${namespace}.preferences`);
          localStorage2.remove(`${namespace}.analytics`);
        } catch (error) {
          console.warn("Failed to clear all saved data:", error);
        }
      }
      /**
       * Get storage usage statistics
       */
      static getStorageStats(namespace = "endpoint-filter") {
        try {
          const filters = localStorage2.get(`${namespace}.filters`);
          const history2 = localStorage2.get(`${namespace}.history`);
          const preferences = localStorage2.get(`${namespace}.preferences`);
          const analytics = localStorage2.get(`${namespace}.analytics`);
          return {
            hasFilters: !!filters,
            historyEntries: (history2 == null ? void 0 : history2.length) || 0,
            hasPreferences: !!preferences,
            analyticsEntries: (analytics == null ? void 0 : analytics.length) || 0,
            lastSaved: (filters == null ? void 0 : filters.timestamp) ? new Date(filters.timestamp) : null
          };
        } catch (error) {
          console.warn("Failed to get storage stats:", error);
          return null;
        }
      }
      /**
       * Validate stored data integrity
       */
      static validateStoredData(namespace = "endpoint-filter") {
        const issues = [];
        try {
          const filters = localStorage2.get(`${namespace}.filters`);
          if (filters && (!filters.filters || !filters.timestamp)) {
            issues.push("Invalid filters data structure");
          }
          const history2 = localStorage2.get(`${namespace}.history`);
          if (history2 && !Array.isArray(history2)) {
            issues.push("Invalid history data structure");
          }
          const preferences = localStorage2.get(`${namespace}.preferences`);
          if (preferences && (!preferences.preferences || !preferences.timestamp)) {
            issues.push("Invalid preferences data structure");
          }
          const analytics = localStorage2.get(`${namespace}.analytics`);
          if (analytics && !Array.isArray(analytics)) {
            issues.push("Invalid analytics data structure");
          }
        } catch (error) {
          issues.push(`Storage validation error: ${error.message}`);
        }
        return issues;
      }
      /**
       * Cleanup old data
       */
      static cleanupOldData(namespace = "endpoint-filter", maxAge = 30 * 24 * 60 * 60 * 1e3) {
        try {
          const now = Date.now();
          const history2 = localStorage2.get(`${namespace}.history`) || [];
          const recentHistory = history2.filter(
            (entry) => now - entry.timestamp < maxAge
          );
          if (recentHistory.length !== history2.length) {
            localStorage2.set(`${namespace}.history`, recentHistory);
          }
          const analytics = localStorage2.get(`${namespace}.analytics`) || [];
          const recentAnalytics = analytics.filter(
            (entry) => now - entry.timestamp < maxAge
          );
          if (recentAnalytics.length !== analytics.length) {
            localStorage2.set(`${namespace}.analytics`, recentAnalytics);
          }
        } catch (error) {
          console.warn("Failed to cleanup old data:", error);
        }
      }
    };
    ComponentManager_default.register("filter-persistence", FilterPersistence);
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/openapi/EndpointFilter.js
var EndpointFilter_exports = {};
__export(EndpointFilter_exports, {
  EndpointFilter: () => EndpointFilter
});
var EndpointFilter;
var init_EndpointFilter = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/openapi/EndpointFilter.js"() {
    init_Component();
    init_ComponentManager();
    init_utils();
    init_EndpointData();
    init_FilterLogic();
    init_FilterUI();
    init_FilterPersistence();
    EndpointFilter = class extends Component {
      constructor(config = {}) {
        super({
          name: "endpoint-filter",
          selector: config.selector || '[data-component="endpoint-filter"]',
          ...config
        });
        this.currentFilters = {
          tag: "all",
          method: "all",
          status: "all"
        };
        this.endpoints = [];
        this.filterStats = /* @__PURE__ */ new Map();
        this.options = {
          animateFiltering: true,
          showStats: true,
          storeFilters: true,
          namespace: "endpoint-filter",
          ...this.options
        };
      }
      /**
       * Setup filter elements and endpoints
       */
      setupElements() {
        super.setupElements();
        this.endpoints = $$(".endpoint-item");
        if (this.endpoints.length === 0) return;
        this.tagFilters = $$(".tag-filter");
        this.methodFilters = $$(".method-filter");
        this.statusFilters = $$(".status-filter");
        this.searchInput = $(".endpoint-search");
        EndpointData.initializeEndpointData(this.endpoints, EndpointData.generateEndpointId);
        this.filterStats = EndpointData.buildFilterStats(this.endpoints);
        if (this.options.showStats) {
          EndpointData.updateFilterButtonStats(this.tagFilters, this.methodFilters, this.filterStats);
        }
        if (this.options.storeFilters) {
          this.loadSavedFilters();
        }
      }
      /**
       * Bind event listeners using FilterUI component
       */
      bindEvents() {
        FilterUI.setupFilterButtons(
          this.tagFilters,
          this.methodFilters,
          (element, event, handler) => this.addEventListener(element, event, handler),
          {
            onTagFilter: (tag) => this.filterByTag(tag),
            onMethodFilter: (method) => this.filterByMethod(method)
          }
        );
        FilterUI.setupSearchInput(
          this.searchInput,
          (element, event, handler) => this.addEventListener(element, event, handler),
          {
            onSearch: (query) => this.searchEndpoints(query)
          }
        );
        FilterUI.setupClearAllButton(
          (element, event, handler) => this.addEventListener(element, event, handler),
          () => this.clearAllFilters()
        );
        FilterUI.setupKeyboardShortcuts(
          (element, event, handler) => this.addEventListener(element, event, handler),
          () => this.clearAllFilters()
        );
      }
      /**
       * Filter endpoints by tag using FilterLogic
       */
      filterByTag(tag) {
        FilterLogic.filterByTag(
          tag,
          this.currentFilters,
          FilterUI.updateActiveFilterButton,
          () => this.applyFilters(),
          () => this.saveFilters(),
          (event, data) => this.emit(event, data)
        );
      }
      /**
       * Filter endpoints by HTTP method using FilterLogic
       */
      filterByMethod(method) {
        FilterLogic.filterByMethod(
          method,
          this.currentFilters,
          FilterUI.updateActiveFilterButton,
          () => this.applyFilters(),
          () => this.saveFilters(),
          (event, data) => this.emit(event, data)
        );
      }
      /**
       * Search endpoints by text using FilterLogic
       */
      searchEndpoints(query) {
        FilterLogic.searchEndpoints(
          query,
          this.currentFilters,
          () => this.applyFilters(),
          () => this.saveFilters(),
          (event, data) => this.emit(event, data)
        );
      }
      /**
       * Apply all active filters using FilterLogic and FilterUI
       */
      applyFilters() {
        const visibleCount = FilterLogic.applyFilters(
          this.endpoints,
          this.currentFilters,
          (event, data) => this.emit(event, data)
        );
        FilterUI.updateEndpointsVisibility(this.endpoints, this.options.animateFiltering);
        FilterUI.updateResultsCount(visibleCount, this.endpoints.length);
        FilterUI.updateClearFiltersVisibility(FilterLogic.hasActiveFilters(this.currentFilters));
        return visibleCount;
      }
      /**
       * Clear all active filters using FilterLogic
       */
      clearAllFilters() {
        FilterLogic.clearAllFilters(
          this.currentFilters,
          FilterUI.updateActiveFilterButton,
          this.searchInput,
          () => this.applyFilters(),
          () => this.saveFilters(),
          (event, data) => this.emit(event, data)
        );
      }
      /**
       * Save current filters using FilterPersistence
       */
      saveFilters() {
        if (!this.options.storeFilters) return;
        FilterPersistence.saveFilters(this.currentFilters, this.options.namespace);
      }
      /**
       * Load saved filters using FilterPersistence
       */
      loadSavedFilters() {
        if (!this.options.storeFilters) return;
        const savedFilters = FilterPersistence.loadSavedFilters(this.options.namespace);
        if (savedFilters) {
          this.currentFilters = { ...this.currentFilters, ...savedFilters };
          FilterPersistence.applySavedFilters(
            savedFilters,
            {
              onTagFilter: (tag) => this.filterByTag(tag),
              onMethodFilter: (method) => this.filterByMethod(method),
              onSearch: (query) => this.searchEndpoints(query)
            },
            this.searchInput
          );
        }
      }
      /**
       * Get current filter statistics using FilterLogic
       */
      getStats() {
        return FilterLogic.getFilterStats(this.endpoints, this.currentFilters, this.filterStats);
      }
      /**
       * Custom cleanup using split components
       */
      onDestroy() {
        EndpointData.cleanupEndpointData(this.endpoints);
        FilterUI.resetVisualStates(this.endpoints);
        if (this.filterStats) {
          this.filterStats.clear();
        }
      }
    };
    ComponentManager_default.register("endpoint-filter", EndpointFilter);
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/layout/ThemeToggle.js
var ThemeToggle_exports = {};
__export(ThemeToggle_exports, {
  ThemeToggle: () => ThemeToggle
});
var ThemeToggle;
var init_ThemeToggle = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/layout/ThemeToggle.js"() {
    init_Component();
    init_ComponentManager();
    init_storage();
    ThemeToggle = class extends Component {
      constructor(config = {}) {
        super({
          name: "theme-toggle",
          selector: config.selector || "#darkModeToggle",
          ...config
        });
        this.storage = createNamespacedStorage("theme");
        this.themeKey = "mode";
        this.defaultTheme = "dark";
        this.elements = {
          toggle: null,
          moon: null,
          sun: null,
          lightModeHome: null,
          darkModeHome: null
        };
        this.isToggling = false;
        this.debounceTimeout = null;
        this.pendingTheme = null;
      }
      async onInit() {
        this.applyStoredTheme();
        if (!this.element) {
          console.warn("ThemeToggle: Toggle button not found");
          return;
        }
        this.cacheElements();
        this.setupEventListeners();
        this.updateUI();
        this.updateIconSources();
      }
      /**
       * Cache DOM element references
       */
      cacheElements() {
        this.elements.toggle = this.element;
        this.elements.moon = document.getElementById("moon");
        this.elements.sun = document.getElementById("sun");
        this.elements.lightModeHome = document.getElementById("lightModeHome");
        this.elements.darkModeHome = document.getElementById("darkModeHome");
      }
      /**
       * Setup event listeners using modern AbortController pattern
       */
      setupEventListeners() {
        this.addEventListener(this.elements.toggle, "click", () => {
          this.toggleTheme();
        });
        this.addEventListener(this.elements.toggle, "keydown", (e) => {
          if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            this.toggleTheme();
          }
        });
      }
      /**
       * Apply stored theme immediately (before DOM ready)
       * Note: This may be redundant if the head script already applied the theme
       */
      applyStoredTheme() {
        const savedTheme = this.storage.get(this.themeKey, this.defaultTheme);
        const isDarkMode = savedTheme === "dark";
        const currentlyDark = document.documentElement.classList.contains("dark");
        if (isDarkMode && !currentlyDark) {
          document.documentElement.classList.add("dark");
        } else if (!isDarkMode && currentlyDark) {
          document.documentElement.classList.remove("dark");
        }
        this.updateIconsImmediate();
      }
      /**
       * Update icons immediately (for early initialization)
       */
      updateIconsImmediate() {
        const moon = document.getElementById("moon");
        const sun = document.getElementById("sun");
        const isDarkMode = document.documentElement.classList.contains("dark");
        if (moon && sun) {
          if (isDarkMode) {
            moon.classList.remove("hidden");
            sun.classList.add("hidden");
          } else {
            moon.classList.add("hidden");
            sun.classList.remove("hidden");
          }
        }
      }
      /**
       * Toggle between light and dark themes
       */
      toggleTheme() {
        if (this.isToggling) {
          return;
        }
        this.isToggling = true;
        this.setLoadingState(true);
        this.updateComponentState("toggling");
        document.documentElement.classList.add("no-transitions");
        const isDarkMode = document.documentElement.classList.toggle("dark");
        if (this.storage) {
          this.storage.set(this.themeKey, isDarkMode ? "dark" : "light");
        }
        this.updateUI();
        requestAnimationFrame(() => {
          this.updateIconSources();
          setTimeout(() => {
            document.documentElement.classList.remove("no-transitions");
            this.isToggling = false;
            this.setLoadingState(false);
            this.updateComponentState("ready");
          }, 50);
          this.emit("theme:changed", { isDarkMode, theme: isDarkMode ? "dark" : "light" });
          document.dispatchEvent(new CustomEvent("themeChanged", {
            detail: { isDarkMode }
          }));
        });
      }
      /**
       * Update button and UI elements based on current theme
       */
      updateUI() {
        const isDarkMode = this.isDarkMode();
        if (this.elements.moon && this.elements.sun) {
          if (isDarkMode) {
            this.elements.moon.classList.remove("hidden");
            this.elements.sun.classList.add("hidden");
          } else {
            this.elements.moon.classList.add("hidden");
            this.elements.sun.classList.remove("hidden");
          }
        }
        if (this.elements.lightModeHome && this.elements.darkModeHome) {
          if (isDarkMode) {
            this.elements.lightModeHome.classList.add("hidden");
            this.elements.darkModeHome.classList.remove("hidden");
          } else {
            this.elements.lightModeHome.classList.remove("hidden");
            this.elements.darkModeHome.classList.add("hidden");
          }
        }
        if (this.elements.toggle) {
          this.elements.toggle.setAttribute(
            "aria-label",
            `Switch to ${isDarkMode ? "light" : "dark"} mode`
          );
          this.elements.toggle.setAttribute("aria-pressed", isDarkMode.toString());
        }
      }
      /**
       * Update icon sources based on theme
       */
      updateIconSources() {
        const isDarkMode = this.isDarkMode();
        document.querySelectorAll(".icon").forEach((icon) => {
          const currentSrc = icon.getAttribute("src");
          if (currentSrc && currentSrc.includes("icons/")) {
            const iconName = currentSrc.split("/").pop();
            const pathPrefix = currentSrc.substring(0, currentSrc.lastIndexOf("icons/"));
            const iconPath = isDarkMode ? "icons/dark/" : "icons/light/";
            icon.setAttribute("src", pathPrefix + iconPath + iconName);
          }
        });
      }
      /**
       * Check if dark mode is currently active
       */
      isDarkMode() {
        return document.documentElement.classList.contains("dark");
      }
      /**
       * Get current theme
       */
      getCurrentTheme() {
        return this.isDarkMode() ? "dark" : "light";
      }
      /**
       * Set theme programmatically
       */
      setTheme(theme) {
        const isDarkMode = theme === "dark";
        const currentlyDark = this.isDarkMode();
        if (isDarkMode !== currentlyDark) {
          this.toggleTheme();
        }
      }
      /**
       * Set to light theme
       */
      setLightTheme() {
        this.setTheme("light");
      }
      /**
       * Set to dark theme
       */
      setDarkTheme() {
        this.setTheme("dark");
      }
      /**
       * Reset to default theme
       */
      resetTheme() {
        this.setTheme(this.defaultTheme);
        localStorage2.remove(this.themeKey);
      }
      /**
       * Get theme state
       */
      getState() {
        return {
          theme: this.getCurrentTheme(),
          isDarkMode: this.isDarkMode(),
          hasToggle: !!this.elements.toggle,
          hasIcons: !!(this.elements.moon && this.elements.sun)
        };
      }
      /**
       * Component cleanup
       */
      onDestroy() {
      }
    };
    ComponentManager_default.register("theme-toggle", ThemeToggle);
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/layout/OpenAPISidebar.js
var OpenAPISidebar_exports = {};
__export(OpenAPISidebar_exports, {
  OpenAPISidebar: () => OpenAPISidebar,
  default: () => OpenAPISidebar_default
});
var log12, OpenAPISidebar, OpenAPISidebar_default;
var init_OpenAPISidebar = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/layout/OpenAPISidebar.js"() {
    init_Component();
    init_ComponentManager();
    init_components();
    init_Logger();
    log12 = logger.component("OpenAPISidebar");
    OpenAPISidebar = class extends Component {
      constructor(config = {}) {
        super({
          name: "openapi-sidebar",
          selector: config.selector || '[data-component="openapi-sidebar"]',
          ...config
        });
        this.isInitialized = false;
      }
      async onInit() {
        if (!this.element) {
          log12.warn("OpenAPI Sidebar element not found");
          return;
        }
        this.initExpandable({
          toggleSelector: ".openapi-sidebar-tag-toggle",
          contentSelector: ".openapi-sidebar-endpoints-list",
          animationTiming: "fast",
          autoExpand: true
          // OpenAPI tags are expanded by default
        });
        this.initScrollTracking({
          activeClass: "openapi-sidebar-link--active",
          offset: 100,
          smoothScroll: true,
          throttleDelay: 50
        });
        this.setupOpenAPISpecificBehavior();
        this.isInitialized = true;
        log12.info("OpenAPI Sidebar initialized");
      }
      /**
       * Setup OpenAPI-specific behavior that's not covered by mixins
       */
      setupOpenAPISpecificBehavior() {
        if (window.location.hash) {
          setTimeout(() => {
            this.scrollToId(window.location.hash.substring(1));
          }, 100);
        }
        this.on("scroll-target-active", (data) => {
          this.handleOpenAPIActiveLink(data.link);
        });
        this.on("after-toggle", (data) => {
          this.handleOpenAPIToggle(data.toggle, data.expanded);
        });
      }
      /**
       * Handle OpenAPI-specific active link behavior
       * Called when ScrollTrackingMixin detects a new active target
       */
      handleOpenAPIActiveLink(link) {
        const targetId = link.getAttribute("data-scroll-target");
        if (targetId && history.pushState) {
          history.pushState(null, null, `#${targetId}`);
        }
        const isEndpointLink = link.classList.contains("openapi-sidebar-endpoint-link");
        const activeClass = isEndpointLink ? "openapi-sidebar-endpoint-link--active" : "openapi-sidebar-link--active";
        this.element.querySelectorAll(".openapi-sidebar-link--active, .openapi-sidebar-endpoint-link--active").forEach((el) => el.classList.remove("openapi-sidebar-link--active", "openapi-sidebar-endpoint-link--active"));
        link.classList.add(activeClass);
        if (isEndpointLink) {
          this.expandParentTagGroup(link);
        }
      }
      /**
       * Handle OpenAPI-specific toggle behavior
       * Called when ExpandableMixin completes a toggle action
       */
      handleOpenAPIToggle(toggle, expanded) {
        toggle.classList.toggle("openapi-sidebar-tag-toggle--expanded", expanded);
      }
      /**
       * Expand parent tag group for an endpoint link
       * @param {Element} link - The endpoint link element
       */
      expandParentTagGroup(link) {
        const parentGroup = link.closest(".openapi-sidebar-tag-group");
        if (!parentGroup) return;
        const toggle = parentGroup.querySelector(".openapi-sidebar-tag-toggle");
        if (toggle && toggle.getAttribute("aria-expanded") === "false") {
          this.expandToggle(toggle);
        }
      }
      // Public API methods using mixins
      expandAllGroups() {
        this.expandAll();
      }
      collapseAllGroups() {
        this.collapseAll();
      }
      scrollToEndpoint(endpointId) {
        this.scrollToId(endpointId);
      }
    };
    Object.assign(OpenAPISidebar.prototype, ExpandableMixin);
    Object.assign(OpenAPISidebar.prototype, ScrollTrackingMixin);
    ComponentManager_default.register("openapi-sidebar", OpenAPISidebar);
    OpenAPISidebar_default = OpenAPISidebar;
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/layout/MobileNav.js
var MobileNav_exports = {};
__export(MobileNav_exports, {
  MobileNav: () => MobileNav
});
var MobileNav;
var init_MobileNav = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/layout/MobileNav.js"() {
    init_Component();
    init_ComponentManager();
    MobileNav = class extends Component {
      constructor(config = {}) {
        super({
          name: "navigation-mobile-toggle",
          selector: config.selector || '[data-component="navigation-mobile-toggle"]',
          ...config
        });
        this.overlay = null;
        this.sidebarComponent = null;
        this.closeButton = null;
      }
      async onInit() {
        if (!this.element) {
          console.warn("MobileNav: Toggle button not found");
          return;
        }
        this.overlay = document.querySelector("[data-navigation-overlay]");
        this.closeButton = document.querySelector("[data-navigation-close]");
        try {
          if (!this.element.hasAttribute("aria-expanded")) {
            this.element.setAttribute("aria-expanded", "false");
          }
          if (!this.element.hasAttribute("aria-controls")) {
            this.element.setAttribute("aria-controls", "sidebar-left");
          }
        } catch (e) {
        }
        this.findSidebarComponent();
      }
      findSidebarComponent() {
        this.sidebarComponent = ComponentManager_default.getInstances("navigation-sidebar-left")[0];
        if (this.sidebarComponent) {
          this.setupEventListeners();
          return;
        }
        let retryCount = 0;
        const maxRetries = 10;
        const retryInterval = 50;
        const checkForSidebar = () => {
          this.sidebarComponent = ComponentManager_default.getInstances("navigation-sidebar-left")[0];
          if (this.sidebarComponent) {
            this.setupEventListeners();
          } else if (retryCount < maxRetries) {
            retryCount++;
            setTimeout(checkForSidebar, retryInterval);
          } else {
            console.warn("MobileNav: Sidebar component not found after maximum retries - mobile nav may not function properly");
          }
        };
        setTimeout(checkForSidebar, retryInterval);
      }
      setupEventListeners() {
        this.addEventListener(this.element, "click", () => this.openMobileNav());
        if (this.closeButton) {
          this.addEventListener(this.closeButton, "click", () => this.closeMobileNav());
        }
        if (this.overlay) {
          this.addEventListener(this.overlay, "click", () => this.closeMobileNav());
        }
        this.addEventListener(document, "keydown", (e) => {
          if (e.key === "Escape" && this.sidebarComponent && this.sidebarComponent.isOpen) {
            e.preventDefault();
            this.closeMobileNav();
          }
        });
      }
      openMobileNav() {
        var _a, _b;
        if (!this.sidebarComponent) {
          console.warn("MobileNav: Cannot open - sidebar component not available");
          return;
        }
        if (this.sidebarComponent.isOpen) return;
        this.sidebarComponent.open();
        (_a = this.overlay) == null ? void 0 : _a.classList.remove("hidden");
        document.body.style.overflow = "hidden";
        (_b = this.closeButton) == null ? void 0 : _b.focus();
        try {
          this.element.setAttribute("aria-expanded", "true");
        } catch (e) {
        }
        this.announceToScreenReader("Navigation menu opened");
        this.emit("mobileNav:opened");
      }
      closeMobileNav() {
        var _a;
        if (!this.sidebarComponent) {
          console.warn("MobileNav: Cannot close - sidebar component not available");
          return;
        }
        if (!this.sidebarComponent.isOpen) return;
        this.sidebarComponent.close();
        (_a = this.overlay) == null ? void 0 : _a.classList.add("hidden");
        document.body.style.overflow = "";
        this.element.focus();
        try {
          this.element.setAttribute("aria-expanded", "false");
        } catch (e) {
        }
        this.announceToScreenReader("Navigation menu closed");
        this.emit("mobileNav:closed");
      }
      announceToScreenReader(message) {
        if (window.announceToScreenReader) {
          window.announceToScreenReader(message);
        }
      }
      onDestroy() {
        if (this.sidebarComponent && this.sidebarComponent.isOpen) {
          this.closeMobileNav();
        }
      }
    };
    ComponentManager_default.register("navigation-mobile-toggle", MobileNav);
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/layout/Sidebar.js
var Sidebar_exports = {};
__export(Sidebar_exports, {
  Sidebar: () => Sidebar
});
var Sidebar;
var init_Sidebar = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/layout/Sidebar.js"() {
    init_Component();
    init_ComponentManager();
    init_components();
    init_CurrentPageDetection();
    init_AnimationBridge();
    Sidebar = class extends Component {
      constructor(config = {}) {
        super({
          name: "navigation-sidebar-left",
          selector: config.selector || "#sidebar-left",
          ...config
        });
        this.linkTreeElement = null;
        this.isInitialized = false;
        this.currentPageDetector = null;
      }
      async onInit() {
        if (!this.element) {
          console.warn("Sidebar: Sidebar element not found");
          return;
        }
        this.linkTreeElement = this.findChild("[data-link-tree]");
        if (!this.linkTreeElement) {
          console.warn("Sidebar: LinkTree element not found within sidebar");
          return;
        }
        if (!this.linkTreeElement.classList.contains("initialized")) {
          this.linkTreeElement.classList.add("initialized");
        }
        this.initExpandable({
          toggleSelector: ".sidebar__toggle",
          contentSelector: ".nested-content",
          // Prefer snappier interactions in the sidebar
          // animationTiming: 'medium'
          animationTiming: "fast"
        });
        this.initResponsive({
          mobileBreakpoint: 1280,
          overlaySelector: "[data-navigation-overlay]"
        });
        const nestedContents = this.linkTreeElement.querySelectorAll(".nested-content");
        nestedContents.forEach((content) => {
          if (!content.hasAttribute("data-collapse-state")) {
            animationBridge.setCollapseState(content, "collapsed");
          }
        });
        this.currentPageDetector = new CurrentPageDetection({
          activeClass: "sidebar-link--active",
          parentItemSelector: "li",
          toggleSelector: ".sidebar__toggle"
        });
        const found = this.currentPageDetector.init(this.linkTreeElement);
        if (found) {
          await this.currentPageDetector.expandParentSections(async (toggle, expand) => {
            await this.setToggleState(toggle, expand);
          });
        }
        this.setupKeyboardNavigation();
        if (this.linkTreeElement) {
          this.addEventListener(this.linkTreeElement, "click", (event) => {
            const anchor = event.target.closest("a");
            if (!anchor) return;
            if (typeof this.isMobileViewport === "function" && this.isMobileViewport()) {
              this.closeMobile();
            }
          });
        }
        this.element.classList.add("initialized");
        this.isInitialized = true;
        this.updateComponentState("ready");
      }
      /**
       * Setup keyboard navigation for accessibility
       */
      setupKeyboardNavigation() {
        this.addEventListener(this.linkTreeElement, "keydown", async (e) => {
          const focusedElement = document.activeElement;
          if (e.key === "ArrowRight") {
            const toggle = focusedElement.querySelector(".sidebar__toggle");
            if (toggle && toggle.getAttribute("aria-expanded") === "false") {
              e.preventDefault();
              await this.handleToggleClick(toggle);
            }
          } else if (e.key === "ArrowLeft") {
            const toggle = focusedElement.querySelector(".sidebar__toggle");
            if (toggle && toggle.getAttribute("aria-expanded") === "true") {
              e.preventDefault();
              await this.handleToggleClick(toggle);
            }
          }
        });
      }
      // Toggle, responsive behavior, and current page detection are handled by mixins/utilities
      /**
       * Open mobile sidebar
       */
      open() {
        this.openMobile();
      }
      /**
       * Close mobile sidebar
       */
      close() {
        this.closeMobile();
      }
      /**
       * Force close sidebar (useful for cleanup)
       */
      forceClose() {
        this.forceCloseMobile();
      }
      /**
       * Toggle mobile sidebar
       */
      toggle() {
        this.toggleMobile();
      }
      /**
       * Reset sidebar to initial state (useful for debugging)
       */
      reset() {
        this.resetResponsiveState();
        this.emit("sidebar:reset");
      }
      /**
       * Enhanced health check for sidebar component
       * Uses modular health checks from mixins
       */
      isHealthy() {
        if (!super.isHealthy()) {
          return false;
        }
        if (!this.linkTreeElement || !document.contains(this.linkTreeElement)) {
          return false;
        }
        if (!this.isExpandableHealthy()) {
          return false;
        }
        if (this.currentPageDetector && !this.currentPageDetector.getCurrentPageInfo().found) {
        }
        return true;
      }
      /**
       * Component cleanup
       */
      onDestroy() {
      }
      /**
       * Synchronize the sidebar to the current page
       * - Collapse all sections
       * - Expand ancestor sections of the current link
       * - Ensure current link is highlighted
       */
      async syncToCurrentPage() {
        var _a;
        try {
          if (!this.linkTreeElement) return false;
          if (this.currentPageDetector) {
            this.currentPageDetector.updateCurrentPath();
          }
          let currentLink = this.linkTreeElement.querySelector("a.sidebar-item__link--active");
          if (!currentLink) {
            currentLink = this.linkTreeElement.querySelector('a[data-current="true"]');
          }
          if (!currentLink) {
            return false;
          }
          if (typeof this.collapseAll === "function") {
            await this.collapseAll();
          }
          const togglesToExpand = [];
          let parent = currentLink.closest("li");
          while (parent) {
            const toggle = parent.querySelector(":scope > .sidebar__item > .sidebar__toggle");
            if (toggle) togglesToExpand.push(toggle);
            parent = (_a = parent.parentElement) == null ? void 0 : _a.closest("li");
          }
          for (let i = togglesToExpand.length - 1; i >= 0; i--) {
            const toggle = togglesToExpand[i];
            if (typeof this.expandToggle === "function") {
              await this.expandToggle(toggle);
            } else if (typeof this.setToggleState === "function") {
              await this.setToggleState(toggle, true);
            }
          }
          return true;
        } catch (e) {
          return false;
        }
      }
    };
    Object.assign(Sidebar.prototype, ExpandableMixin);
    Object.assign(Sidebar.prototype, ResponsiveMixin);
    ComponentManager_default.register("navigation-sidebar-left", Sidebar);
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/layout/LanguageSwitcher.js
var LanguageSwitcher_exports = {};
__export(LanguageSwitcher_exports, {
  default: () => LanguageSwitcher_default
});
var LanguageSwitcher, LanguageSwitcher_default;
var init_LanguageSwitcher = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/layout/LanguageSwitcher.js"() {
    init_Component();
    init_ComponentManager();
    LanguageSwitcher = class extends Component {
      constructor(config = {}) {
        super({
          name: "language-switcher",
          selector: config.selector || '#language-menu-button[data-component="language-switcher"]',
          ...config
        });
      }
      onInit() {
        const button = this.element;
        const menu = document.getElementById("language-menu");
        if (!button || !menu) return;
        const toggle = () => {
          const isExpanded = button.getAttribute("aria-expanded") === "true";
          button.setAttribute("aria-expanded", String(!isExpanded));
          menu.classList.toggle("hidden");
        };
        const onClickOutside = (event) => {
          if (!button.contains(event.target) && !menu.contains(event.target)) {
            menu.classList.add("hidden");
            button.setAttribute("aria-expanded", "false");
          }
        };
        this.addEventListener(button, "click", toggle);
        this.addEventListener(document, "click", onClickOutside);
        this.addEventListener(button, "keydown", (e) => {
          if (e.key === "Escape") {
            menu.classList.add("hidden");
            button.setAttribute("aria-expanded", "false");
          }
        });
      }
    };
    ComponentManager_default.register("language-switcher", LanguageSwitcher);
    LanguageSwitcher_default = LanguageSwitcher;
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/layout/Glossary.js
var Glossary_exports = {};
__export(Glossary_exports, {
  Glossary: () => Glossary
});
var Glossary;
var init_Glossary = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/layout/Glossary.js"() {
    init_Component();
    init_ComponentManager();
    Glossary = class extends Component {
      constructor(config = {}) {
        super({
          name: "glossary",
          selector: config.selector || ".glossary-entry",
          ...config
        });
        this.cards = [];
        this.positions = { x: 50, y: 50 };
        this.animationId = null;
        this.isAnimating = false;
      }
      async onInit() {
        this.cards = Array.from(document.querySelectorAll(".glossary-entry"));
        if (this.cards.length === 0) {
          console.warn("Glossary: No glossary entries found");
          return;
        }
        this.setupEventListeners();
        this.startAnimation();
      }
      /**
       * Setup event listeners for cards
       */
      setupEventListeners() {
        this.cards.forEach((card) => {
          this.addEventListener(card, "mousemove", (e) => this.handleMouseMove(e));
          this.addEventListener(card, "mouseover", (e) => this.handleMouseOver(e));
          this.addEventListener(card, "mouseout", (e) => this.handleMouseOut(e));
          this.addEventListener(card, "focus", (e) => this.handleFocus(e));
          this.addEventListener(card, "blur", (e) => this.handleBlur(e));
        });
      }
      /**
       * Handle mouse movement for gradient following
       */
      handleMouseMove(e) {
        this.positions.x = e.clientX;
        this.positions.y = e.clientY;
        this.emit("glossary:mouseMove", { x: e.clientX, y: e.clientY });
      }
      /**
       * Handle mouse over effects
       */
      handleMouseOver(e) {
        const card = e.currentTarget;
        card.style.transform = "translateY(-10px) scale(1.05)";
        card.style.boxShadow = "0 20px 30px rgba(0, 0, 0, 0.2)";
        card.style.zIndex = "10";
        this.emit("glossary:cardHovered", { card });
      }
      /**
       * Handle mouse out effects
       */
      handleMouseOut(e) {
        const card = e.currentTarget;
        card.style.transform = "translateY(0) scale(1.0)";
        card.style.boxShadow = "";
        card.style.zIndex = "";
        this.emit("glossary:cardUnhovered", { card });
      }
      /**
       * Handle focus for keyboard accessibility
       */
      handleFocus(e) {
        this.handleMouseOver(e);
      }
      /**
       * Handle blur for keyboard accessibility
       */
      handleBlur(e) {
        this.handleMouseOut(e);
      }
      /**
       * Start the gradient animation
       */
      startAnimation() {
        if (this.isAnimating) return;
        this.isAnimating = true;
        this.animate();
      }
      /**
       * Stop the gradient animation
       */
      stopAnimation() {
        if (this.animationId) {
          cancelAnimationFrame(this.animationId);
          this.animationId = null;
        }
        this.isAnimating = false;
      }
      /**
       * Animation loop for gradient effects
       */
      animate() {
        this.cards.forEach((card) => {
          const rect = card.getBoundingClientRect();
          const mouseX = (this.positions.x - rect.left) / rect.width * 100;
          const mouseY = (this.positions.y - rect.top) / rect.height * 100;
          card.style.background = `radial-gradient(circle at ${mouseX}% ${mouseY}%, var(--primary-gradient-color, #3b82f6), var(--secondary-gradient-color, #1e40af))`;
        });
        if (this.isAnimating) {
          this.animationId = requestAnimationFrame(() => this.animate());
        }
      }
      /**
       * Update gradient colors
       */
      updateGradientColors(primaryColor, secondaryColor) {
        document.documentElement.style.setProperty("--primary-gradient-color", primaryColor);
        document.documentElement.style.setProperty("--secondary-gradient-color", secondaryColor);
        this.emit("glossary:colorsUpdated", { primaryColor, secondaryColor });
      }
      /**
       * Reset card positions and effects
       */
      resetCards() {
        this.cards.forEach((card) => {
          card.style.transform = "";
          card.style.boxShadow = "";
          card.style.zIndex = "";
          card.style.background = "";
        });
        this.emit("glossary:cardsReset");
      }
      /**
       * Component cleanup
       */
      onDestroy() {
        this.stopAnimation();
        this.resetCards();
      }
    };
    ComponentManager_default.register("glossary", Glossary);
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/layout/ChatTocToggle.js
var ChatTocToggle_exports = {};
__export(ChatTocToggle_exports, {
  ChatTocToggle: () => ChatTocToggle
});
var ChatTocToggle;
var init_ChatTocToggle = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/layout/ChatTocToggle.js"() {
    init_Component();
    init_utils();
    init_ComponentManager();
    ChatTocToggle = class extends Component {
      constructor(config = {}) {
        super({
          name: "chat-toc-toggle",
          selector: config.selector || "#chatTocToggle",
          ...config
        });
        this.storageKey = "chatTocSettings";
        this.defaultView = "chat";
        this.initialState = localStorage2.get(this.storageKey) || this.defaultView;
        this.elements = {
          container: null,
          chatButton: null,
          tocButton: null,
          chatContainer: null,
          tocContainer: null
        };
      }
      async onInit() {
        if (!this.element) {
          console.warn("ChatTocToggle: Toggle container not found");
          return;
        }
        if (!this.cacheElements()) {
          console.error("ChatTocToggle: Failed to cache required elements");
          return;
        }
        const alreadyInitialized = this.element.classList.contains("initialized");
        if (!alreadyInitialized) {
          this.setActiveMode(this.initialState, false);
          this.element.classList.add("initialized");
        } else {
          const currentMode = this.getCurrentMode();
          if (this.elements.chatContainer && this.elements.tocContainer) {
            const chatHidden = this.elements.chatContainer.classList.contains("hidden");
            const tocHidden = this.elements.tocContainer.classList.contains("hidden");
            const needsUpdate = currentMode === "chat" && chatHidden || currentMode === "toc" && tocHidden;
            if (needsUpdate) {
              this.setActiveMode(currentMode, false);
            }
          }
        }
        if (!this.elements.chatContainer || !this.elements.tocContainer) {
          console.warn("ChatTocToggle: Chat/TOC containers not found, but toggle will work for state tracking");
        }
        this.setupEventListeners();
      }
      /**
       * Cache DOM element references
       */
      cacheElements() {
        this.elements.container = this.element;
        this.elements.chatButton = this.element.querySelector('[data-mode="chat"]');
        this.elements.tocButton = this.element.querySelector('[data-mode="toc"]');
        this.elements.chatContainer = document.getElementById("chatContainer");
        this.elements.tocContainer = document.getElementById("tocContainer");
        if (!this.elements.chatButton || !this.elements.tocButton) {
          console.error("ChatTocToggle: Required toggle buttons not found!");
          return false;
        }
        return true;
      }
      /**
       * Setup event listeners
       */
      setupEventListeners() {
        this.elements.chatButton.addEventListener("click", (e) => {
          this.setActiveMode("chat");
        });
        this.elements.tocButton.addEventListener("click", (e) => {
          this.setActiveMode("toc");
        });
        this.elements.chatButton.addEventListener("keydown", (e) => {
          if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            this.setActiveMode("chat");
          }
        });
        this.elements.tocButton.addEventListener("keydown", (e) => {
          if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            this.setActiveMode("toc");
          }
        });
      }
      /**
       * Set active mode (chat or toc) and update visual state
       */
      setActiveMode(mode, shouldSave = true) {
        this.elements.chatButton.classList.toggle("chat-toc-toggle__option--active", mode === "chat");
        this.elements.tocButton.classList.toggle("chat-toc-toggle__option--active", mode === "toc");
        if (this.elements.chatContainer && this.elements.tocContainer) {
          if (mode === "chat") {
            this.elements.chatContainer.classList.remove("hidden");
            this.elements.tocContainer.classList.add("hidden");
            this.elements.chatContainer.setAttribute("aria-hidden", "false");
            this.elements.tocContainer.setAttribute("aria-hidden", "true");
          } else {
            this.elements.chatContainer.classList.add("hidden");
            this.elements.tocContainer.classList.remove("hidden");
            this.elements.chatContainer.setAttribute("aria-hidden", "true");
            this.elements.tocContainer.setAttribute("aria-hidden", "false");
          }
        }
        if (shouldSave) {
          localStorage2.set(this.storageKey, mode);
        }
        this.emit("chatTocToggle:changed", { mode });
      }
      /**
       * Get current active mode
       */
      getCurrentMode() {
        if (this.elements.chatButton.classList.contains("chat-toc-toggle__option--active")) {
          return "chat";
        } else if (this.elements.tocButton.classList.contains("chat-toc-toggle__option--active")) {
          return "toc";
        }
        const savedSetting = localStorage2.get(this.storageKey);
        return savedSetting || this.defaultView;
      }
      /**
       * Component cleanup
       */
      onDestroy() {
      }
    };
    ComponentManager_default.register("chat-toc-toggle", ChatTocToggle);
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/ui/Toast.js
var Toast_exports = {};
__export(Toast_exports, {
  Toast: () => Toast
});
var Toast;
var init_Toast = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/ui/Toast.js"() {
    init_sanitize();
    init_Component();
    init_ComponentManager();
    Toast = class extends Component {
      constructor(config = {}) {
        super({
          name: "toast",
          selector: config.selector || "body",
          // Use body as default container
          ...config
        });
        this.toasts = /* @__PURE__ */ new Set();
        this.defaultDuration = 4e3;
        this.maxToasts = 4;
      }
      async onInit() {
        if (!window.MiloUX) {
          window.MiloUX = {};
        }
      }
      /**
       * Show a toast notification
       */
      show(message, type = "info", duration = this.defaultDuration) {
        if (this.toasts.size >= this.maxToasts) {
          const oldestToast = Array.from(this.toasts)[0];
          this.hide(oldestToast);
        }
        const toast2 = this.createToast(message, type, duration);
        this.toasts.add(toast2);
        document.body.appendChild(toast2);
        setTimeout(() => {
          toast2.classList.add("toast-notification--visible");
        }, 50);
        if (duration > 0) {
          setTimeout(() => {
            this.hide(toast2);
          }, duration);
        }
        this.emit("toast:shown", { message, type, duration });
        return toast2;
      }
      /**
       * Hide a specific toast
       */
      hide(toast2) {
        if (!toast2 || !this.toasts.has(toast2)) return;
        toast2.classList.add("toast-notification--hiding");
        setTimeout(() => {
          if (toast2.parentNode) {
            toast2.parentNode.removeChild(toast2);
          }
          this.toasts.delete(toast2);
        }, 500);
        this.emit("toast:hidden", { toast: toast2 });
      }
      /**
       * Create toast DOM element
       */
      createToast(message, type, duration) {
        const toast2 = document.createElement("div");
        toast2.className = `toast-notification toast-notification--${type}`;
        const icons = {
          success: `<svg class="toast-notification__icon" fill="currentColor" viewBox="0 0 20 20">
        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.236 4.53L7.53 10.53a.75.75 0 00-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z" clip-rule="evenodd"/>
      </svg>`,
          error: `<svg class="toast-notification__icon" fill="currentColor" viewBox="0 0 20 20">
        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z" clip-rule="evenodd"/>
      </svg>`,
          warning: `<svg class="toast-notification__icon" fill="currentColor" viewBox="0 0 20 20">
        <path fill-rule="evenodd" d="M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495zM10 5a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 0110 5zm0 9a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"/>
      </svg>`,
          info: `<svg class="toast-notification__icon" fill="currentColor" viewBox="0 0 20 20">
        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z" clip-rule="evenodd"/>
      </svg>`
        };
        const html = `
      <div class="toast-notification__content">
        ${icons[type] || icons.info}
        <div class="toast-notification__message">${escapeHTML(message)}</div>
        <button class="toast-notification__close" aria-label="Close notification">
          <svg fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/>
          </svg>
        </button>
      </div>
    `;
        toast2.innerHTML = sanitizeHTML(html);
        const closeButton = toast2.querySelector(".toast-notification__close");
        this.addEventListener(closeButton, "click", () => {
          this.hide(toast2);
        });
        return toast2;
      }
      /**
       * Hide all toasts
       */
      hideAll() {
        Array.from(this.toasts).forEach((toast2) => {
          this.hide(toast2);
        });
      }
      /**
       * Convenience methods
       */
      success(message, duration) {
        return this.show(message, "success", duration);
      }
      error(message, duration) {
        return this.show(message, "error", duration);
      }
      warning(message, duration) {
        return this.show(message, "warning", duration);
      }
      info(message, duration) {
        return this.show(message, "info", duration);
      }
      /**
       * Component cleanup
       */
      onDestroy() {
        this.hideAll();
        if (window.toast === this.show) {
          delete window.toast;
        }
        if (window.MiloUX && window.MiloUX.showNotification === this.show) {
          delete window.MiloUX.showNotification;
        }
      }
    };
    ComponentManager_default.register("toast", Toast);
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/features/TutorialManager.js
var TutorialManager_exports = {};
__export(TutorialManager_exports, {
  TutorialManager: () => TutorialManager
});
var TutorialManager;
var init_TutorialManager = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/features/TutorialManager.js"() {
    init_Component();
    init_AnimationBridge();
    init_storage();
    init_dom();
    init_ComponentManager();
    TutorialManager = class extends Component {
      constructor(config = {}) {
        super({
          name: "tutorial-manager",
          selector: config.selector || '[data-component="tutorial-progress-enhanced"], .tutorial-overview, .tutorial-step-content',
          ...config
        });
        this.tutorialId = null;
        this.currentStep = 0;
        this.totalSteps = 0;
        this.progressData = {};
        this.autoSaveInterval = null;
        this.intersectionObserver = null;
      }
      async onInit() {
        if (!this.element) {
          console.warn("TutorialManager: No tutorial elements found");
          return;
        }
        this.tutorialId = this.getCurrentTutorialId();
        this.currentStep = this.getCurrentStep();
        this.totalSteps = this.getTotalSteps();
        if (!this.tutorialId) {
          console.warn("TutorialManager: No tutorial ID found");
          return;
        }
        await this.initializeTutorial();
      }
      /**
       * Initialize all tutorial functionality
       */
      async initializeTutorial() {
        this.loadProgress();
        this.setupEventListeners();
        this.updateProgressDisplay();
        this.initializeCodeBlocks();
        this.initializeCollapsibleSections();
        this.initializeStepValidation();
        this.setupAutoSave();
        this.setupScrollTracking();
        this.setupSmoothScrolling();
      }
      /**
       * Get tutorial ID from DOM
       */
      getCurrentTutorialId() {
        const progressElement = document.querySelector("[data-tutorial-id]");
        return progressElement ? progressElement.dataset.tutorialId : null;
      }
      /**
       * Get current step from DOM
       */
      getCurrentStep() {
        const progressElement = document.querySelector("[data-current-step]");
        return progressElement ? parseInt(progressElement.dataset.currentStep) : 0;
      }
      /**
       * Get total steps from DOM
       */
      getTotalSteps() {
        const progressElement = document.querySelector("[data-total-steps]");
        return progressElement ? parseInt(progressElement.dataset.totalSteps) : 0;
      }
      /**
       * Setup event listeners for tutorial interactions
       */
      setupEventListeners() {
        const saveBtn = document.querySelector('[data-action="save-progress"]');
        if (saveBtn) {
          this.addEventListener(saveBtn, "click", () => this.saveProgress());
        }
        const resetBtn = document.querySelector('[data-action="reset-progress"]');
        if (resetBtn) {
          this.addEventListener(resetBtn, "click", () => this.resetProgress());
        }
        document.querySelectorAll(".validation-checkbox").forEach((checkbox) => {
          this.addEventListener(checkbox, "change", () => this.validateStep());
        });
        const validateBtn = document.querySelector(".validate-step");
        if (validateBtn) {
          this.addEventListener(validateBtn, "click", () => this.completeStep());
        }
        document.querySelectorAll('[data-toggle="collapse"]').forEach((trigger) => {
          this.addEventListener(trigger, "click", (e) => this.toggleCollapse(e));
        });
      }
      /**
       * Save tutorial progress to localStorage
       */
      saveProgress() {
        if (!this.tutorialId) return;
        const progress = {
          tutorialId: this.tutorialId,
          currentStep: this.currentStep,
          completedSteps: this.getCompletedSteps(),
          checkedItems: this.getCheckedItems(),
          timestamp: Date.now(),
          lastVisitedStep: this.currentStep
        };
        localStorage2.set(`tutorial-${this.tutorialId}`, progress);
        this.progressData = progress;
        this.showSaveConfirmation();
        this.emit("tutorial:progressSaved", { tutorialId: this.tutorialId, progress });
      }
      /**
       * Load tutorial progress from localStorage
       */
      loadProgress() {
        if (!this.tutorialId) return;
        const saved = localStorage2.get(`tutorial-${this.tutorialId}`);
        if (saved) {
          try {
            this.progressData = saved;
            this.updateUIFromProgress(this.progressData);
            this.emit("tutorial:progressLoaded", { tutorialId: this.tutorialId, progress: this.progressData });
          } catch (error) {
            console.error("TutorialManager: Error loading progress:", error);
          }
        }
      }
      /**
       * Reset tutorial progress
       */
      resetProgress() {
        if (!this.tutorialId) return;
        if (confirm("Are you sure you want to reset your progress? This cannot be undone.")) {
          localStorage2.remove(`tutorial-${this.tutorialId}`);
          this.progressData = {};
          document.querySelectorAll(".validation-checkbox").forEach((cb) => cb.checked = false);
          this.validateStep();
          this.updateProgressDisplay();
          this.emit("tutorial:progressReset", { tutorialId: this.tutorialId });
          this.showNotification("Tutorial progress has been reset", "info");
        }
      }
      /**
       * Update UI from loaded progress data
       */
      updateUIFromProgress(progress) {
        if (progress.checkedItems) {
          progress.checkedItems.forEach((item) => {
            const checkbox = document.querySelector(`[data-checklist-item="${item}"]`);
            if (checkbox) {
              checkbox.checked = true;
            }
          });
          this.validateStep();
        }
      }
      /**
       * Get currently completed steps
       */
      getCompletedSteps() {
        return this.progressData.completedSteps || [];
      }
      /**
       * Get currently checked items
       */
      getCheckedItems() {
        const checkboxes = document.querySelectorAll("[data-checklist-item]");
        return Array.from(checkboxes).filter((cb) => cb.checked).map((cb) => cb.dataset.checklistItem);
      }
      /**
       * Update progress display
       */
      updateProgressDisplay() {
        const completedSteps = this.getCompletedSteps();
        const progressPercentage = this.totalSteps > 0 ? Math.round(completedSteps.length / this.totalSteps * 100) : 0;
        const progressBar = document.querySelector(".tutorial-progress-bar");
        if (progressBar) {
          progressBar.style.width = `${progressPercentage}%`;
        }
        const progressText = document.querySelector(".tutorial-progress-text");
        if (progressText) {
          progressText.textContent = `${completedSteps.length}/${this.totalSteps} steps completed (${progressPercentage}%)`;
        }
      }
      /**
       * Setup auto-save functionality
       */
      setupAutoSave() {
        this.autoSaveInterval = setInterval(() => {
          if (this.hasUnsavedChanges()) {
            this.saveProgress();
          }
        }, 3e4);
        this.addEventListener(window, "beforeunload", () => {
          this.saveProgress();
        });
      }
      /**
       * Check if there are unsaved changes
       */
      hasUnsavedChanges() {
        const currentCheckedItems = this.getCheckedItems();
        const savedCheckedItems = this.progressData.checkedItems || [];
        return JSON.stringify(currentCheckedItems.sort()) !== JSON.stringify(savedCheckedItems.sort());
      }
      /**
       * Initialize step validation
       */
      initializeStepValidation() {
        this.validateStep();
      }
      /**
       * Validate current step requirements
       */
      validateStep() {
        const checkboxes = document.querySelectorAll(".validation-checkbox");
        const allChecked = Array.from(checkboxes).every((cb) => cb.checked);
        const continueBtn = document.querySelector(".validate-step");
        if (continueBtn) {
          continueBtn.disabled = !allChecked;
          continueBtn.classList.toggle("btn--primary", allChecked);
          continueBtn.classList.toggle("btn--secondary", !allChecked);
          if (allChecked) {
            continueBtn.classList.add("pulse-gentle");
            const duration = animationBridge.getTiming("slow") * 6;
            setTimeout(() => continueBtn.classList.remove("pulse-gentle"), duration);
          }
        }
        const completedCount = Array.from(checkboxes).filter((cb) => cb.checked).length;
        const totalCount = checkboxes.length;
        if (totalCount > 0) {
          const progressText = document.querySelector(".validation-progress-text");
          if (progressText) {
            progressText.textContent = `${completedCount}/${totalCount} completed`;
          }
        }
        this.emit("tutorial:stepValidated", {
          allChecked,
          completedCount,
          totalCount
        });
      }
      /**
       * Complete current step
       */
      async completeStep() {
        this.progressData.completedSteps = this.progressData.completedSteps || [];
        if (!this.progressData.completedSteps.includes(this.currentStep)) {
          this.progressData.completedSteps.push(this.currentStep);
        }
        this.saveProgress();
        this.updateProgressDisplay();
        await this.showStepCompletionAnimation();
        this.emit("tutorial:stepCompleted", {
          step: this.currentStep,
          tutorialId: this.tutorialId
        });
        setTimeout(() => {
          this.navigateToNextStep();
        }, 2e3);
      }
      /**
       * Show step completion animation
       */
      async showStepCompletionAnimation() {
        return new Promise((resolve) => {
          const celebration = document.createElement("div");
          celebration.className = "fixed inset-0 flex items-center justify-center z-50 pointer-events-none";
          celebration.innerHTML = `
        <div class="bg-green-500 text-white p-6 rounded-lg shadow-lg transform scale-0 transition-transform duration-500">
          <div class="flex items-center">
            <svg class="w-8 h-8 mr-3" fill="currentColor" viewBox="0 0 20 20">
              <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
            <div>
              <h3 class="font-bold text-lg">Step Completed!</h3>
              <p class="text-green-100">Great job! Moving to the next step...</p>
            </div>
          </div>
        </div>
      `;
          document.body.appendChild(celebration);
          setTimeout(() => {
            celebration.querySelector("div").classList.add("scale-100");
          }, 100);
          setTimeout(() => {
            celebration.remove();
            resolve();
          }, 3e3);
        });
      }
      /**
       * Navigate to next step or completion
       */
      navigateToNextStep() {
        const nextStepBtn = document.querySelector(".btn--primary[href]") || document.querySelector('a[href*="Next:"]') || document.querySelector('a[href]:has-text("Next:")');
        if (nextStepBtn && nextStepBtn.textContent.includes("Next:")) {
          window.location.href = nextStepBtn.href;
        } else {
          this.showTutorialCompletionModal();
        }
      }
      /**
       * Show tutorial completion modal
       */
      showTutorialCompletionModal() {
        this.showNotification("Tutorial completed! \u{1F389}", "success", 5e3);
        this.emit("tutorial:completed", { tutorialId: this.tutorialId });
      }
      /**
       * Initialize code block copy functionality
       * Note: Copy functionality is now handled by the ArticleClipboard component
       */
      initializeCodeBlocks() {
        this.addEventListener(document, "copy-success", (event) => {
          this.emit("tutorial:codeCopied", {
            codeText: event.detail.text.substring(0, 50) + "..."
          });
        });
      }
      /**
       * Initialize collapsible sections
       */
      initializeCollapsibleSections() {
        document.querySelectorAll('[data-toggle="collapse"]').forEach((trigger) => {
          const targetId = trigger.dataset.target;
          const target = document.querySelector(targetId);
          if (target) {
            const isCollapsed = trigger.classList.contains("collapsed");
            target.style.display = isCollapsed ? "none" : "block";
          }
        });
      }
      /**
       * Toggle collapsible section
       */
      toggleCollapse(event) {
        const trigger = event.currentTarget;
        const targetId = trigger.dataset.target;
        const target = document.querySelector(targetId);
        if (!target) return;
        const isCollapsed = trigger.classList.contains("collapsed");
        if (isCollapsed) {
          target.style.display = "block";
          trigger.classList.remove("collapsed");
        } else {
          target.style.display = "none";
          trigger.classList.add("collapsed");
        }
        this.emit("tutorial:sectionToggled", { targetId, isCollapsed: !isCollapsed });
      }
      /**
       * Setup scroll tracking with IntersectionObserver
       */
      setupScrollTracking() {
        if (!("IntersectionObserver" in window)) return;
        this.intersectionObserver = new IntersectionObserver((entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              const sectionId = entry.target.id;
              if (sectionId) {
                this.emit("tutorial:sectionViewed", { sectionId });
              }
            }
          });
        }, {
          threshold: 0.5,
          rootMargin: "-20% 0px -20% 0px"
        });
        document.querySelectorAll("h2, h3, .tutorial-section").forEach((section) => {
          if (section.id) {
            this.intersectionObserver.observe(section);
          }
        });
      }
      /**
       * Setup smooth scrolling for tutorial anchors
       */
      setupSmoothScrolling() {
        document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
          this.addEventListener(anchor, "click", function(e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute("href"));
            if (target) {
              target.scrollIntoView({
                behavior: "smooth",
                block: "start"
              });
            }
          });
        });
      }
      /**
       * Show save confirmation feedback
       */
      showSaveConfirmation() {
        const saveBtn = document.querySelector('[data-action="save-progress"]');
        if (saveBtn) {
          const originalText = saveBtn.innerHTML;
          saveBtn.innerHTML = `
        <svg class="btn__icon" fill="currentColor" viewBox="0 0 20 20">
          <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
        Saved!
      `;
          setTimeout(() => {
            saveBtn.innerHTML = originalText;
          }, 2e3);
        }
        this.showNotification("Progress saved successfully!", "success");
      }
      /**
       * Show notification to user
       */
      showNotification(message, type = "info", duration = 3e3) {
        if (window.MiloUX && window.MiloUX.showNotification) {
          window.MiloUX.showNotification(message, type, duration);
        } else {
        }
      }
      /**
       * Component cleanup
       */
      onDestroy() {
        if (this.autoSaveInterval) {
          clearInterval(this.autoSaveInterval);
        }
        if (this.intersectionObserver) {
          this.intersectionObserver.disconnect();
        }
        console.log("TutorialManager: Component destroyed and cleaned up");
      }
    };
    ComponentManager_default.register("tutorial-manager", TutorialManager);
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/features/PerformanceOptimizer.js
var PerformanceOptimizer_exports = {};
__export(PerformanceOptimizer_exports, {
  PerformanceOptimizer: () => PerformanceOptimizer
});
var log13, PerformanceOptimizer;
var init_PerformanceOptimizer = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/features/PerformanceOptimizer.js"() {
    init_Component();
    init_AnimationBridge();
    init_ComponentManager();
    init_dom();
    init_Logger();
    log13 = logger.component("PerformanceOptimizer");
    PerformanceOptimizer = class extends Component {
      constructor(config = {}) {
        super({
          name: "performance-optimizer",
          selector: config.selector || "body",
          ...config
        });
        this.lazyObserver = null;
        this.performanceObservers = [];
        this.isDebugMode = config.debugMode || window.location.hostname === "localhost";
        this.memoryCheckInterval = null;
        this.touchStartX = 0;
        this.touchStartY = 0;
      }
      async onInit() {
        if (!this.element) {
          log13.warn("Target element not found");
          return;
        }
        await Promise.all([
          this.setupLazyLoading(),
          this.setupLoadingStates(),
          this.setupPerformanceMonitoring(),
          this.setupA11yEnhancements(),
          this.setupMobileOptimizations(),
          this.setupUXUtilities()
        ]);
        log13.debug("All optimizations initialized");
      }
      /**
       * Setup lazy loading for images and components
       */
      async setupLazyLoading() {
        if (!("IntersectionObserver" in window)) {
          log13.warn("IntersectionObserver not supported, skipping lazy loading");
          return;
        }
        this.lazyObserver = new IntersectionObserver((entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              this.handleLazyLoad(entry.target);
            }
          });
        }, {
          rootMargin: "100px",
          threshold: 0.1
        });
        const lazyElements = document.querySelectorAll("[data-src], [data-lazy-component]");
        lazyElements.forEach((el) => this.lazyObserver.observe(el));
        log13.debug(`Observing ${lazyElements.length} lazy load elements`);
      }
      /**
       * Handle lazy loading for a specific element
       */
      async handleLazyLoad(element) {
        try {
          if (element.dataset.src) {
            element.src = element.dataset.src;
            element.removeAttribute("data-src");
            element.classList.add("lazy-loaded");
            this.emit("performance:imageLoaded", { element });
          }
          if (element.dataset.lazyComponent) {
            const componentName = element.dataset.lazyComponent;
            await this.loadLazyComponent(componentName, element);
          }
          this.lazyObserver.unobserve(element);
        } catch (error) {
          log13.error("Lazy loading failed:", error);
        }
      }
      /**
       * Load a lazy component
       */
      async loadLazyComponent(componentName, element) {
        const componentMap = {
          "chat": () => Promise.resolve().then(() => (init_chat(), chat_exports))
          // 'search': temporarily disabled
        };
        const loader = componentMap[componentName];
        if (loader) {
          try {
            await loader();
            element.classList.add("loaded");
            this.emit("performance:componentLoaded", { componentName, element });
          } catch (error) {
            log13.error(`Failed to load component ${componentName}:`, error);
          }
        }
      }
      /**
       * Setup enhanced loading states
       */
      setupLoadingStates() {
        const contentArea = document.getElementById("articleContent");
        if (contentArea && !contentArea.innerHTML.trim()) {
          this.showContentSkeleton(contentArea);
        }
        log13.debug("Loading states configured");
      }
      /**
       * Show content skeleton while loading
       */
      showContentSkeleton(container) {
        const skeleton = `
      <div class="content-skeleton space-y-4" aria-label="Loading content">
        <div class="h-8 bg-gray-200 rounded animate-pulse"></div>
        <div class="space-y-2">
          <div class="h-4 bg-gray-200 rounded animate-pulse"></div>
          <div class="h-4 bg-gray-200 rounded w-5/6 animate-pulse"></div>
          <div class="h-4 bg-gray-200 rounded w-4/6 animate-pulse"></div>
        </div>
        <div class="h-6 bg-gray-200 rounded w-3/4 animate-pulse"></div>
      </div>
    `;
        container.innerHTML = skeleton;
      }
      /**
       * Setup performance monitoring
       */
      setupPerformanceMonitoring() {
        if (!("PerformanceObserver" in window)) {
          log13.warn("PerformanceObserver not supported");
          return;
        }
        try {
          const lcpObserver = new PerformanceObserver((entryList) => {
            const entries = entryList.getEntries();
            const lastEntry = entries[entries.length - 1];
            this.emit("performance:lcp", { value: lastEntry.startTime });
            logger.performance("LCP", lastEntry.startTime);
          });
          lcpObserver.observe({ entryTypes: ["largest-contentful-paint"] });
          this.performanceObservers.push(lcpObserver);
        } catch (error) {
          log13.warn("LCP observer failed:", error);
        }
        try {
          const fidObserver = new PerformanceObserver((entryList) => {
            const entries = entryList.getEntries();
            entries.forEach((entry) => {
              const fid = entry.processingStart - entry.startTime;
              this.emit("performance:fid", { value: fid });
              logger.performance("FID", fid);
            });
          });
          fidObserver.observe({ entryTypes: ["first-input"] });
          this.performanceObservers.push(fidObserver);
        } catch (error) {
          log13.warn("FID observer failed:", error);
        }
        if (this.isDebugMode && "memory" in performance) {
          this.memoryCheckInterval = setInterval(() => {
            const memory = performance.memory;
            const memoryInfo = {
              used: Math.round(memory.usedJSHeapSize / 1048576) + " MB",
              total: Math.round(memory.totalJSHeapSize / 1048576) + " MB"
            };
            this.emit("performance:memory", memoryInfo);
            logger.performance("Memory", `${memoryInfo.used}/${memoryInfo.total}`);
          }, 3e4);
        }
      }
      /**
       * Setup accessibility enhancements
       */
      setupA11yEnhancements() {
        this.setupKeyboardNavigation();
        this.setupFocusManagement();
        this.setupScreenReaderOptimizations();
      }
      /**
       * Enhanced keyboard navigation
       */
      setupKeyboardNavigation() {
        document.addEventListener("keydown", (e) => {
          var _a, _b, _c;
          if (e.target.closest("#linkTree")) {
            if (e.key === "ArrowDown" || e.key === "ArrowUp") {
              e.preventDefault();
              const direction = e.key === "ArrowDown" ? 1 : -1;
              this.navigateSidebar(direction);
            }
          }
          if (e.altKey) {
            switch (e.key) {
              case "s":
                e.preventDefault();
                (_a = document.getElementById("searchInput")) == null ? void 0 : _a.focus();
                this.emit("a11y:searchFocused");
                break;
              case "n":
                e.preventDefault();
                (_b = document.querySelector(".next-link")) == null ? void 0 : _b.focus();
                this.emit("a11y:nextFocused");
                break;
              case "p":
                e.preventDefault();
                (_c = document.querySelector(".prev-link")) == null ? void 0 : _c.focus();
                this.emit("a11y:prevFocused");
                break;
            }
          }
        });
      }
      /**
       * Navigate sidebar with keyboard
       */
      navigateSidebar(direction) {
        var _a;
        const sidebarLinks = document.querySelectorAll("#linkTree a");
        const currentIndex = Array.from(sidebarLinks).indexOf(document.activeElement);
        const nextIndex = Math.max(0, Math.min(sidebarLinks.length - 1, currentIndex + direction));
        (_a = sidebarLinks[nextIndex]) == null ? void 0 : _a.focus();
      }
      /**
       * Focus management for modals and overlays
       */
      setupFocusManagement() {
        document.addEventListener("keydown", (e) => {
          if (e.key === "Tab") {
            const activeModal = document.querySelector(".modal:not(.hidden)");
            if (activeModal) {
              this.trapFocus(e, activeModal);
            }
          }
        });
      }
      /**
       * Trap focus within a container
       */
      trapFocus(e, container) {
        const focusableElements = container.querySelectorAll(
          'a[href], button, input, select, textarea, [tabindex]:not([tabindex="-1"])'
        );
        const firstElement = focusableElements[0];
        const lastElement = focusableElements[focusableElements.length - 1];
        if (e.shiftKey && document.activeElement === firstElement) {
          e.preventDefault();
          lastElement == null ? void 0 : lastElement.focus();
        } else if (!e.shiftKey && document.activeElement === lastElement) {
          e.preventDefault();
          firstElement == null ? void 0 : firstElement.focus();
        }
      }
      /**
       * Screen reader optimizations
       */
      setupScreenReaderOptimizations() {
        const announcer2 = document.createElement("div");
        announcer2.setAttribute("aria-live", "polite");
        announcer2.setAttribute("aria-atomic", "true");
        announcer2.className = "sr-only";
        announcer2.style.position = "absolute";
        announcer2.style.left = "-10000px";
        announcer2.style.width = "1px";
        announcer2.style.height = "1px";
        announcer2.style.overflow = "hidden";
        document.body.appendChild(announcer2);
        window.announceToScreenReader = (message) => {
          announcer2.textContent = message;
          this.emit("a11y:announced", { message });
          const duration = animationBridge.getTiming("slow") * 2;
          setTimeout(() => announcer2.textContent = "", duration);
        };
      }
      /**
       * Mobile optimizations
       */
      setupMobileOptimizations() {
        document.addEventListener("touchstart", (e) => {
          this.touchStartX = e.touches[0].clientX;
          this.touchStartY = e.touches[0].clientY;
        }, { passive: true });
        document.addEventListener("touchend", (e) => {
          var _a, _b;
          const touchEndX = e.changedTouches[0].clientX;
          const touchEndY = e.changedTouches[0].clientY;
          const deltaX = touchEndX - this.touchStartX;
          const deltaY = touchEndY - this.touchStartY;
          if (Math.abs(deltaX) > Math.abs(deltaY) && Math.abs(deltaX) > 50) {
            if (deltaX > 0) {
              (_a = document.querySelector(".prev-link")) == null ? void 0 : _a.click();
              this.emit("mobile:swipeRight");
            } else {
              (_b = document.querySelector(".next-link")) == null ? void 0 : _b.click();
              this.emit("mobile:swipeLeft");
            }
          }
        }, { passive: true });
        const setVH = () => {
          const vh = window.innerHeight * 0.01;
          document.documentElement.style.setProperty("--vh", `${vh}px`);
        };
        setVH();
        window.addEventListener("resize", debounce(setVH, 100));
        window.addEventListener("orientationchange", () => {
          const delay = animationBridge.getTiming("fast") / 2;
          setTimeout(setVH, delay);
        });
      }
      /**
       * Setup UX utilities
       */
      setupUXUtilities() {
        if (!window.MiloUX) {
          window.MiloUX = {};
        }
        window.MiloUX.smoothScrollTo = (element, offset = 0) => {
          this.smoothScrollTo(element, offset);
        };
      }
      // Notification system moved to dedicated Toast component
      /**
       * Smooth scroll to element
       */
      smoothScrollTo(element, offset = 0) {
        if (typeof element === "string") {
          element = document.querySelector(element);
        }
        if (element) {
          const targetPosition = element.offsetTop - offset;
          window.scrollTo({
            top: targetPosition,
            behavior: "smooth"
          });
          this.emit("ux:smoothScrolled", { element, offset });
        }
      }
      /**
       * Component cleanup
       */
      onDestroy() {
        if (this.lazyObserver) {
          this.lazyObserver.disconnect();
        }
        this.performanceObservers.forEach((observer) => {
          observer.disconnect();
        });
        if (this.memoryCheckInterval) {
          clearInterval(this.memoryCheckInterval);
        }
        log13.debug("Component destroyed and cleaned up");
      }
    };
    ComponentManager_default.register("performance-optimizer", PerformanceOptimizer);
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/index.js
var components_exports = {};
__export(components_exports, {
  ExpandableMixin: () => ExpandableMixin,
  FormValidationMixin: () => FormValidationMixin,
  MixinApplicators: () => MixinApplicators,
  MixinManager: () => MixinManager,
  MixinPatterns: () => MixinPatterns,
  MixinUtilities: () => MixinUtilities,
  ModalMixin: () => ModalMixin,
  ResponsiveMixin: () => ResponsiveMixin,
  ScrollTrackingMixin: () => ScrollTrackingMixin,
  componentRegistry: () => componentRegistry,
  loadComponent: () => loadComponent,
  loadComponents: () => loadComponents,
  registerAllComponents: () => registerAllComponents,
  validateMixinInterface: () => validateMixinInterface,
  withMixins: () => withMixins
});
function hasComponentInDOM(name, config = {}) {
  if (config.element) return true;
  if (typeof document !== "undefined") {
    if (document.querySelector(`[data-component="${name}"]`)) return true;
  }
  return false;
}
async function loadComponent(name, config = {}) {
  const loader = componentRegistry[name];
  if (!loader) {
    log14.debug(`Component "${name}" not found in registry`);
    return null;
  }
  if (!config.force && !hasComponentInDOM(name, config)) {
    log14.debug(`Skipping component not present on page: ${name}`);
    return null;
  }
  try {
    log14.debug(`Loading component module: ${name}`);
    const module = await loader();
    log14.trace(`Component module loaded: ${name}`, module);
    const instance = await ComponentManager_default.create(name, config);
    if (instance) {
      log14.trace(`Component instance created and initialized: ${name}`);
      return instance;
    } else {
      log14.debug(`Component not applicable or had no target elements: ${name}`);
      return null;
    }
  } catch (error) {
    log14.error(`Failed to load component "${name}":`, error);
    return null;
  }
}
async function loadComponents(names) {
  const promises = names.map((name) => loadComponent(name));
  const results = await Promise.allSettled(promises);
  return results.filter((result) => result.status === "fulfilled" && result.value).map((result) => result.value);
}
function registerAllComponents() {
  const critical = [
    "tab-aggregator",
    // Build tabs from simple tab shortcodes
    "toast",
    // Must be first for notifications
    "theme-toggle",
    // Must be early for theme application
    "navigation-sidebar-left",
    // Essential for navigation
    // 'search',                 // Commented: search component not present; re-enable when implemented
    "navigation-mobile-toggle",
    // Mobile navigation
    "article-clipboard",
    // Code copying
    "article-collapse",
    // Content collapsing
    "notebook-progressive-reveal",
    // Progressive reveal for notebook cells (must be first)
    "performance-optimizer"
    // Performance enhancements
  ];
  const secondary = [
    "article-toc",
    "article-chat",
    "article-tabs",
    "article-tiles",
    "article-header",
    "article-summarization",
    "article-related-content",
    // Enhanced related content with view toggling
    "copy-page",
    // Copy page functionality
    "mermaid-diagram",
    // Initialize Mermaid diagrams
    "asciinema-embed",
    // Initialize Asciinema embeds
    // Notebook components
    // 'notebook-density',            // Notebook density toggle controls (removed)
    "notebook-launch",
    // Notebook platform launcher dropdown
    "notebook-collapse",
    // Per-cell collapse/expand
    // OpenAPI components
    "openapi-viewer",
    "openapi-collapse",
    "endpoint-filter",
    "glossary",
    "chat-toc-toggle",
    "tutorial-manager"
    // 'theme' component removed - conflicts with 'theme-toggle' loaded above
  ];
  if (window.location.hostname === "localhost") {
    logFeatureSupport();
  }
  log14.info(`Loading ${critical.length} critical components...`);
  return Promise.all(critical.map((name) => {
    log14.debug(`Loading critical component: ${name}`);
    const options = name === "tab-aggregator" ? { force: true } : {};
    return loadComponent(name, options);
  })).then((criticalResults) => {
    const successfulCritical = criticalResults.filter((r) => r).length;
    log14.info(`Critical components loaded: ${successfulCritical}/${critical.length}`);
    loadSecondaryComponentsInIdle(secondary);
    return criticalResults.filter((r) => r);
  });
}
function loadSecondaryComponentsInIdle(secondary) {
  const startTime = performance.now();
  log14.info(`Scheduling ${secondary.length} secondary components for idle loading...`);
  requestIdleTime(
    async () => {
      const idleStartTime = performance.now();
      log14.debug("Browser is idle, loading secondary components...");
      const batchSize = 3;
      const batches = [];
      for (let i = 0; i < secondary.length; i += batchSize) {
        batches.push(secondary.slice(i, i + batchSize));
      }
      for (const [index, batch] of batches.entries()) {
        if (index > 0) {
          await new Promise((resolve) => setTimeout(resolve, 5));
        }
        log14.trace(`Loading batch ${index + 1}/${batches.length}:`, batch);
        const batchPromises = batch.map((name) => {
          log14.trace(`Loading secondary component: ${name}`);
          return loadComponent(name);
        });
        const batchResults = await Promise.allSettled(batchPromises);
        const batchSuccessful = batchResults.filter((r) => r.status === "fulfilled" && r.value);
        log14.trace(`Batch ${index + 1} completed: ${batchSuccessful.length}/${batch.length} successful`);
      }
      const totalTime = performance.now() - startTime;
      const idleTime = performance.now() - idleStartTime;
      log14.info(`Secondary components loaded in ${Math.round(idleTime)}ms (${Math.round(totalTime)}ms total)`);
      Promise.resolve().then(() => (init_EventBus(), EventBus_exports)).then(({ eventBus: eventBus2 }) => {
        eventBus2.emit("components:secondary-loaded", {
          count: secondary.length,
          loadTime: idleTime,
          totalTime
        });
      });
    },
    {
      timeout: 3e3,
      // Maximum wait time
      priority: "low"
      // These are non-critical
    }
  );
}
var log14, componentRegistry;
var init_components = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/components/index.js"() {
    init_ComponentManager();
    init_Logger();
    init_FeatureDetection();
    init_ExpandableMixin();
    init_ResponsiveMixin();
    init_ModalMixin();
    init_ScrollTrackingMixin();
    init_FormValidationMixin();
    init_MixinManager();
    init_MixinBase();
    init_Noop();
    log14 = logger.component("ComponentLoader");
    componentRegistry = {
      // Article components
      "tab-aggregator": () => Promise.resolve().then(() => (init_TabAggregator(), TabAggregator_exports)),
      "article-clipboard": () => Promise.resolve().then(() => (init_Clipboard(), Clipboard_exports)),
      "article-collapse": () => Promise.resolve().then(() => (init_Collapse(), Collapse_exports)),
      "article-chat": () => Promise.resolve().then(() => (init_chat(), chat_exports)),
      "article-header": () => Promise.resolve().then(() => (init_Header(), Header_exports)),
      "article-tabs": () => Promise.resolve().then(() => (init_Tabs(), Tabs_exports)),
      "article-toc": () => Promise.resolve().then(() => (init_TOC(), TOC_exports)),
      "article-tiles": () => Promise.resolve().then(() => (init_Tiles(), Tiles_exports)),
      "article-summarization": () => Promise.resolve().then(() => (init_Summarization(), Summarization_exports)),
      "article-related-content": () => Promise.resolve().then(() => (init_RelatedContent(), RelatedContent_exports)),
      "copy-page": () => Promise.resolve().then(() => (init_CopyPage(), CopyPage_exports)),
      "mermaid-diagram": () => Promise.resolve().then(() => (init_Mermaid(), Mermaid_exports)),
      "video-player": () => Promise.resolve().then(() => (init_Video(), Video_exports)),
      "notebook-viewer": () => Promise.resolve().then(() => (init_NotebookViewer(), NotebookViewer_exports)),
      "notebook-progressive-reveal": () => Promise.resolve().then(() => (init_NotebookProgressiveReveal(), NotebookProgressiveReveal_exports)),
      "notebook-cell": () => Promise.resolve().then(() => (init_NotebookCell(), NotebookCell_exports)),
      "notebook-navigation": () => Promise.resolve().then(() => (init_NotebookNavigation(), NotebookNavigation_exports)),
      "notebook-state": () => Promise.resolve().then(() => (init_NotebookState(), NotebookState_exports)),
      // 'notebook-density': () => import('./notebook/NotebookDensity.js'),
      "notebook-launch": () => Promise.resolve().then(() => (init_NotebookLaunch(), NotebookLaunch_exports)),
      "notebook-collapse": () => Promise.resolve().then(() => (init_NotebookCollapse(), NotebookCollapse_exports)),
      // OpenAPI components
      "openapi-viewer": () => Promise.resolve().then(() => (init_OpenAPIViewer(), OpenAPIViewer_exports)),
      "openapi-collapse": () => Promise.resolve().then(() => (init_OpenAPICollapse(), OpenAPICollapse_exports)),
      "endpoint-filter": () => Promise.resolve().then(() => (init_EndpointFilter(), EndpointFilter_exports)),
      "endpoint-data": () => Promise.resolve().then(() => (init_EndpointData(), EndpointData_exports)),
      "filter-logic": () => Promise.resolve().then(() => (init_FilterLogic(), FilterLogic_exports)),
      "filter-ui": () => Promise.resolve().then(() => (init_FilterUI(), FilterUI_exports)),
      "filter-persistence": () => Promise.resolve().then(() => (init_FilterPersistence(), FilterPersistence_exports)),
      // Layout components
      "theme-toggle": () => Promise.resolve().then(() => (init_ThemeToggle(), ThemeToggle_exports)),
      "openapi-sidebar": () => Promise.resolve().then(() => (init_OpenAPISidebar(), OpenAPISidebar_exports)),
      "navigation-mobile-toggle": () => Promise.resolve().then(() => (init_MobileNav(), MobileNav_exports)),
      "navigation-sidebar-left": () => Promise.resolve().then(() => (init_Sidebar(), Sidebar_exports)),
      "language-switcher": () => Promise.resolve().then(() => (init_LanguageSwitcher(), LanguageSwitcher_exports)),
      "glossary": () => Promise.resolve().then(() => (init_Glossary(), Glossary_exports)),
      "chat-toc-toggle": () => Promise.resolve().then(() => (init_ChatTocToggle(), ChatTocToggle_exports)),
      // UI components
      "toast": () => Promise.resolve().then(() => (init_Toast(), Toast_exports)),
      // Feature components
      "tutorial-manager": () => Promise.resolve().then(() => (init_TutorialManager(), TutorialManager_exports)),
      "performance-optimizer": () => Promise.resolve().then(() => (init_PerformanceOptimizer(), PerformanceOptimizer_exports))
    };
    registerNoop("navigation-topbar");
    registerNoop("navigation-mobile-overlay");
    registerNoop("navigation-sidebar-right");
    registerNoop("quicklinks-shortcode");
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/core/ComponentManager.js
var ComponentManager_exports = {};
__export(ComponentManager_exports, {
  Component: () => Component,
  ComponentManager: () => ComponentManager,
  default: () => ComponentManager_default
});
var log15, ComponentManager, ComponentManager_default;
var init_ComponentManager = __esm({
  "ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/core/ComponentManager.js"() {
    init_Component();
    init_EventBus();
    init_dom();
    init_Logger();
    init_FeatureDetection();
    init_DOMUtils();
    log15 = logger.component("ComponentManager");
    ComponentManager = class {
      /**
       * Register a component class
       */
      static register(name, ComponentClass, options = {}) {
        if (this.components.has(name)) {
          log15.warn(`Component "${name}" is already registered. Overwriting...`);
        }
        this.components.set(name, {
          ComponentClass,
          options: {
            autoInit: true,
            lazy: false,
            ...options
          }
        });
        log15.debug(`Registered component: ${name}`);
      }
      /**
       * Create and initialize a component instance
       */
      static async create(name, config = {}) {
        const componentData = this.components.get(name);
        if (!componentData) {
          log15.error(`Component "${name}" not registered`);
          return null;
        }
        try {
          const { ComponentClass } = componentData;
          const tempInstance = new ComponentClass({
            name,
            ...componentData.options,
            ...config
          });
          if (tempInstance.selector) {
            const existingInstance = this.findInstanceBySelector(name, tempInstance.selector);
            if (existingInstance) {
              const isSingleton = tempInstance.isSingleton || this.isSingletonSelector(tempInstance.selector);
              const logLevel = isSingleton ? "debug" : "warn";
              log15[logLevel](`Component "${name}" instance already exists for selector "${tempInstance.selector}". Returning existing instance.`);
              return existingInstance;
            }
            const elementConflict = this.findInstanceByElement(tempInstance.selector);
            if (elementConflict && (tempInstance.isSingleton || this.isSingletonSelector(tempInstance.selector))) {
              log15.warn(`Singleton element "${tempInstance.selector}" already managed by component "${elementConflict.name}". Returning existing instance.`);
              return elementConflict;
            }
          }
          const instance = tempInstance;
          this.instances.set(instance.id, instance);
          const result = await instance.init();
          if (result) {
            log15.debug(`Component ${name} initialized`);
            eventBus.emit("component:created", { name, instance });
            this.lastActivity = Date.now();
          }
          return result;
        } catch (error) {
          log15.error(`Failed to create instance for: ${name}`, error);
          return null;
        }
      }
      /**
       * Load a component (register if needed, then create instance)
       */
      static async load(name, config = {}) {
        if (!this.components.has(name)) {
          try {
            const componentsIndex = await Promise.resolve().then(() => (init_components(), components_exports));
            if (typeof componentsIndex.loadComponent === "function") {
              return componentsIndex.loadComponent(name, config);
            }
          } catch (e) {
            log15.debug(`Deferred load failed or component not present for: ${name}`);
            return null;
          }
          return null;
        }
        return this.create(name, config);
      }
      /**
       * Get component instance by ID
       */
      static getInstance(id) {
        return this.instances.get(id);
      }
      /**
       * Get all instances of a component by name
       */
      static getInstancesByName(name) {
        return Array.from(this.instances.values()).filter((instance) => instance.name === name);
      }
      /**
       * Find an existing instance by component name and selector
       */
      static findInstanceBySelector(name, selector) {
        return Array.from(this.instances.values()).find(
          (instance) => instance.name === name && instance.selector === selector && instance.state !== "failed"
        );
      }
      /**
       * Find an existing instance by DOM element selector (regardless of component name)
       */
      static findInstanceByElement(selector) {
        return Array.from(this.instances.values()).find(
          (instance) => instance.selector === selector && instance.state !== "failed"
        );
      }
      /**
       * Determine if a selector should be treated as singleton (one instance per DOM element)
       */
      static isSingletonSelector(selector) {
        if (!selector) return false;
        if (selector.startsWith("#")) return true;
        const singletonSelectors = [
          "body",
          "html",
          "head",
          '[data-component="navigation-topbar"]',
          '[data-component="navigation-sidebar-left"]',
          '[data-component="performance-optimizer"]'
        ];
        return singletonSelectors.includes(selector);
      }
      /**
       * Destroy a component instance
       */
      static destroy(id) {
        const instance = this.instances.get(id);
        if (instance) {
          instance.destroy();
          this.instances.delete(id);
          log15.debug(`Destroyed component instance: ${id}`);
        }
      }
      /**
       * Destroy all instances of a component
       */
      static destroyByName(name) {
        const instances = this.getInstancesByName(name);
        instances.forEach((instance) => this.destroy(instance.id));
      }
      /**
       * Destroy all component instances
       */
      static destroyAll() {
        log15.info("Destroying all component instances");
        eventBus.emit("component:destroy-all");
        this.instances.forEach((instance, id) => {
          try {
            instance.destroy();
          } catch (error) {
            log15.warn(`Error destroying component ${id}:`, error);
          }
        });
        this.instances.clear();
      }
      /**
       * Auto-discover components in the DOM
       */
      static autoDiscover() {
        if (!this.autoDiscovery) return;
        requestIdleTime(() => {
          this.discoverAndLoadComponents();
        }, { priority: "low" });
      }
      /**
       * Re-initialize components after page restoration from cache
       * This method specifically handles the case where the page was restored
       * from browser cache and components may not be working properly
       */
      static reinitializeAfterCacheRestore() {
        log15.info("Reinitializing components after cache restoration...");
        const brokenInstances = Array.from(this.instances.values()).filter((instance) => {
          if (!instance.element || !document.contains(instance.element)) {
            log15.debug(`Component ${instance.id} element no longer exists`);
            return true;
          }
          if (instance.state === "failed" || instance.state === "destroyed") {
            log15.debug(`Component ${instance.id} is in failed/destroyed state`);
            return true;
          }
          if (instance.name === "navigation-sidebar-left") {
            if (this.isSidebarBroken(instance)) {
              log15.debug(`Sidebar component ${instance.id} appears broken`);
              return true;
            }
          }
          if (this.hasLostEventListeners(instance)) {
            log15.debug(`Component ${instance.id} appears to have lost event listeners`);
            return true;
          }
          return false;
        });
        const missingComponents = this.findMissingComponents();
        brokenInstances.forEach((instance) => {
          log15.debug(`Destroying broken component instance: ${instance.id}`);
          this.destroy(instance.id);
        });
        this.discoverAndLoadComponents();
        const totalFixed = brokenInstances.length + missingComponents;
        log15.info(`Reinitialized ${brokenInstances.length} broken components, found ${missingComponents} missing components`);
        return totalFixed;
      }
      /**
       * Check if sidebar component is broken
       */
      static isSidebarBroken(instance) {
        try {
          const toggles = instance.element.querySelectorAll(".sidebar-item__toggle");
          if (toggles.length === 0) return false;
          const firstToggle = toggles[0];
          if (instance.toggles && instance.toggles.length === 0) {
            return true;
          }
          if (!firstToggle.hasAttribute("aria-expanded")) {
            return true;
          }
          return false;
        } catch (error) {
          log15.warn(`Error checking sidebar component ${instance.id}:`, error);
          return true;
        }
      }
      /**
       * Check if component has lost its event listeners (enhanced detection)
       */
      static hasLostEventListeners(instance) {
        try {
          if (typeof instance.isHealthy === "function") {
            return !instance.isHealthy();
          }
          if (instance.eventListeners && instance.eventListeners.size === 0) {
            log15.debug(`Component ${instance.id} has no tracked event listeners`);
            return true;
          }
          if (instance.name === "navigation-sidebar-left") {
            return this.isSidebarListenersBroken(instance);
          }
          if (instance.element && instance.element.dataset.componentListeners) {
            const componentIds = instance.element.dataset.componentListeners.split(",");
            if (!componentIds.includes(instance.id)) {
              log15.debug(`Component ${instance.id} not tracked on its DOM element`);
              return true;
            }
          }
          return false;
        } catch (error) {
          log15.debug(`Error checking event listeners for ${instance.id}:`, error);
          return true;
        }
      }
      /**
       * Enhanced sidebar listener health check
       */
      static isSidebarListenersBroken(instance) {
        try {
          if (!instance.element || !instance.toggles) {
            return true;
          }
          for (const toggle of instance.toggles) {
            if (!toggle.dataset.componentListeners || !toggle.dataset.componentListeners.includes(instance.id)) {
              log15.debug(`Sidebar toggle missing listener tracking from ${instance.id}`);
              return true;
            }
          }
          if (instance.eventListeners) {
            const toggleClickListeners = Array.from(instance.eventListeners.values()).filter((listener) => listener.event === "click" && instance.toggles.includes(listener.element));
            if (toggleClickListeners.length !== instance.toggles.length) {
              log15.debug(`Sidebar has ${toggleClickListeners.length} click listeners but ${instance.toggles.length} toggles`);
              return true;
            }
          }
          return false;
        } catch (error) {
          log15.debug(`Error checking sidebar listeners for ${instance.id}:`, error);
          return true;
        }
      }
      /**
       * Find DOM elements that should have components but don't
       */
      static findMissingComponents() {
        const elementsWithComponents = document.querySelectorAll("[data-component]");
        let missingCount = 0;
        elementsWithComponents.forEach((element) => {
          const componentName = element.getAttribute("data-component");
          if (componentName && this.components.has(componentName)) {
            const hasInstance = Array.from(this.instances.values()).some(
              (instance) => instance.element === element && instance.name === componentName
            );
            if (!hasInstance) {
              missingCount++;
              log15.debug(`Found element without component instance: ${componentName}`);
            }
          }
        });
        return missingCount;
      }
      /**
       * Discover and load components from DOM with enhanced cleanup
       */
      static discoverAndLoadComponents() {
        this.cleanupOrphanedListeners();
        const elementsWithComponents = document.querySelectorAll("[data-component]");
        const discoveredComponents = /* @__PURE__ */ new Set();
        elementsWithComponents.forEach((element) => {
          const componentName = element.getAttribute("data-component");
          if (!componentName) return;
          discoveredComponents.add(componentName);
        });
        if (discoveredComponents.size > 0) {
          log15.info(`Discovered ${discoveredComponents.size} components: [${Array.from(discoveredComponents).join(", ")}]`);
        }
        Array.from(discoveredComponents).forEach((componentName) => {
          this.load(componentName);
        });
        log15.info(`Auto-discovered and loaded ${discoveredComponents.size} components`);
      }
      /**
       * Clean up orphaned event listener tracking from destroyed components
       */
      static cleanupOrphanedListeners() {
        const elementsWithListeners = document.querySelectorAll("[data-component-listeners]");
        let cleanedCount = 0;
        elementsWithListeners.forEach((element) => {
          const listenerIds = element.dataset.componentListeners.split(",");
          const validIds = listenerIds.filter((componentId) => {
            const instance = this.instances.get(componentId);
            return instance && instance.state !== "destroyed";
          });
          if (validIds.length !== listenerIds.length) {
            cleanedCount++;
            if (validIds.length > 0) {
              element.dataset.componentListeners = validIds.join(",");
            } else {
              delete element.dataset.componentListeners;
            }
          }
        });
        if (cleanedCount > 0) {
          log15.info(`Cleaned up orphaned listeners from ${cleanedCount} elements`);
        }
      }
      /**
       * Enable reactive DOM discovery
       */
      static enableReactiveDiscovery() {
        if (!window.MutationObserver) {
          log15.warn("MutationObserver not supported, reactive discovery disabled");
          return false;
        }
        if (this.isReactiveEnabled) {
          log15.debug("Reactive discovery already enabled");
          return true;
        }
        log15.info("\u{1F680} Enabling reactive DOM discovery...");
        this.reactiveObserver = new MutationObserver((mutations) => {
          requestIdleTime(() => {
            this.handleDOMMutations(mutations);
          }, { priority: "low" });
        });
        this.reactiveObserver.observe(document.body, {
          childList: true,
          subtree: true,
          attributes: true,
          attributeFilter: ["data-component", "data-component-id"]
        });
        this.isReactiveEnabled = true;
        eventBus.emit("component-manager:reactive-enabled");
        log15.info("\u2705 Reactive DOM discovery enabled");
        return true;
      }
      /**
       * Handle DOM mutations for reactive enhancement
       */
      static handleDOMMutations(mutations) {
        const enhancedElements = /* @__PURE__ */ new Set();
        let newComponentCount = 0;
        const now = Date.now();
        if (now - this.lastActivity < 500) {
          return;
        }
        mutations.forEach((mutation) => {
          if (mutation.type === "childList" && mutation.addedNodes.length > 0) {
            mutation.addedNodes.forEach((node) => {
              var _a, _b;
              if (node.nodeType === 1) {
                const componentName = (_a = node.getAttribute) == null ? void 0 : _a.call(node, "data-component");
                if (componentName && !node.hasAttribute("data-component-id") && !node.hasAttribute("data-component-processing")) {
                  enhancedElements.add(node);
                  newComponentCount++;
                }
                const descendants = (_b = node.querySelectorAll) == null ? void 0 : _b.call(node, "[data-component]:not([data-component-id]):not([data-component-processing])");
                descendants == null ? void 0 : descendants.forEach((descendant) => {
                  const descendantComponent = descendant.getAttribute("data-component");
                  if (descendantComponent && this.components.has(descendantComponent)) {
                    enhancedElements.add(descendant);
                    newComponentCount++;
                  }
                });
              }
            });
          }
          if (mutation.type === "attributes" && mutation.attributeName === "data-component") {
            const element = mutation.target;
            const componentName = element.getAttribute("data-component");
            if (componentName && !element.hasAttribute("data-component-id") && !element.hasAttribute("data-component-processing")) {
              enhancedElements.add(element);
              newComponentCount++;
            }
          }
        });
        if (newComponentCount > 0) {
          log15.info(`Reactively enhanced ${newComponentCount} new components`);
          enhancedElements.forEach((element) => {
            const componentName = element.getAttribute("data-component");
            element.setAttribute("data-component-processing", "true");
            this.load(componentName, { element }).then(() => {
              element.removeAttribute("data-component-processing");
            });
          });
          this.lastActivity = Date.now();
        }
        return true;
      }
      /**
       * Disable reactive discovery and cleanup
       */
      static disableReactiveDiscovery() {
        if (this.reactiveObserver) {
          this.reactiveObserver.disconnect();
          this.reactiveObserver = null;
        }
        this.isReactiveEnabled = false;
        eventBus.emit("component-manager:reactive-disabled");
        log15.info("Reactive DOM discovery disabled");
      }
      /**
       * Get component statistics for debugging
       */
      static getStats() {
        return {
          registered: this.components.size,
          instances: this.instances.size,
          reactive: this.isReactiveEnabled,
          lastActivity: this.lastActivity
        };
      }
      /**
       * Enable/disable auto-discovery
       */
      static setAutoDiscovery(enabled) {
        this.autoDiscovery = enabled;
        log15.info(`Auto-discovery ${enabled ? "enabled" : "disabled"}`);
        if (enabled) {
          this.autoDiscover();
        }
      }
      /**
       * Check if a component is registered
       */
      static isRegistered(name) {
        return this.components.has(name);
      }
      /**
       * Get list of registered component names
       */
      static getRegisteredNames() {
        return Array.from(this.components.keys());
      }
      /**
       * Get component instances by name
       */
      static getInstances(componentName) {
        return Array.from(this.instances.values()).filter((instance) => instance.name === componentName);
      }
    };
    __publicField(ComponentManager, "components", /* @__PURE__ */ new Map());
    __publicField(ComponentManager, "instances", /* @__PURE__ */ new Map());
    __publicField(ComponentManager, "autoDiscovery", true);
    __publicField(ComponentManager, "reactiveObserver", null);
    __publicField(ComponentManager, "isReactiveEnabled", false);
    __publicField(ComponentManager, "lastActivity", Date.now());
    /**
     * Utility methods re-exported for convenience
     */
    __publicField(ComponentManager, "waitForDOM", waitForDOM);
    __publicField(ComponentManager, "waitForElement", waitForElement2);
    __publicField(ComponentManager, "isElementVisible", isElementVisible);
    __publicField(ComponentManager, "scrollToElement", scrollToElement);
    ComponentManager_default = ComponentManager;
  }
});

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/core/MiloCore.js
init_EventBus();
init_ComponentManager();
init_dom();
init_Logger();
var log16 = logger.component("MiloCore");
var MiloCore = class {
  constructor() {
    this.version = "2.0.0";
    this.environment = null;
    this.features = /* @__PURE__ */ new Set();
    this.initialized = false;
    this.performance = {
      startTime: performance.now(),
      initTime: null,
      components: /* @__PURE__ */ new Map()
    };
    this.handleError = this.handleError.bind(this);
    this.handleUnload = this.handleUnload.bind(this);
    window.addEventListener("error", this.handleError);
    window.addEventListener("unhandledrejection", this.handleError);
    window.addEventListener("beforeunload", this.handleUnload);
  }
  /**
   * Initialize the core system
   */
  async init() {
    if (this.initialized) {
      log16.warn("MiloCore already initialized");
      return this;
    }
    const startTime = performance.now();
    try {
      log16.info(`MiloDocs Core v${this.version} initializing...`);
      this.environment = this.detectEnvironment();
      this.logEnvironment();
      await this.initializeCoreFeatures();
      this.setupComponentSystem();
      await this.loadCriticalComponents();
      await this.discoverAndLoadComponents();
      this.setupGlobalEvents();
      this.initialized = true;
      this.performance.initTime = performance.now() - startTime;
      eventBus.emit("milo:ready", {
        version: this.version,
        environment: this.environment,
        performance: this.performance
      });
      log16.info(`MiloDocs initialized in ${this.performance.initTime.toFixed(2)}ms`);
      return this;
    } catch (error) {
      log16.error("MiloDocs initialization failed:", error);
      throw error;
    }
  }
  /**
   * Detect environment and capabilities
   */
  detectEnvironment() {
    const env = window.HugoEnvironment || {};
    return {
      // Hugo environment data
      hugo: {
        environment: env.environment || "development",
        isProduction: env.isProduction || false,
        debug: env.debug || false,
        baseURL: env.baseURL || "",
        version: env.version || "unknown",
        buildTime: env.buildTime ? new Date(parseInt(env.buildTime)) : /* @__PURE__ */ new Date()
      },
      // Browser capabilities
      browser: {
        userAgent: navigator.userAgent,
        language: navigator.language,
        online: navigator.onLine,
        platform: navigator.platform,
        cookieEnabled: navigator.cookieEnabled,
        doNotTrack: navigator.doNotTrack === "1"
      },
      // Feature detection
      features: {
        localStorage: this.testLocalStorage(),
        intersectionObserver: "IntersectionObserver" in window,
        resizeObserver: "ResizeObserver" in window,
        mutationObserver: "MutationObserver" in window,
        performanceObserver: "PerformanceObserver" in window,
        webgl: this.testWebGL(),
        touchEvents: "ontouchstart" in window,
        darkModeQuery: window.matchMedia("(prefers-color-scheme: dark)").matches,
        reducedMotion: window.matchMedia("(prefers-reduced-motion: reduce)").matches,
        highContrast: window.matchMedia("(prefers-contrast: high)").matches
      },
      // Device information
      device: {
        isMobile: /Mobi|Android/i.test(navigator.userAgent),
        isTablet: /Tablet|iPad/i.test(navigator.userAgent),
        isDesktop: !/Mobi|Android|Tablet|iPad/i.test(navigator.userAgent),
        pixelRatio: window.devicePixelRatio || 1,
        viewport: {
          width: window.innerWidth,
          height: window.innerHeight
        }
      }
    };
  }
  /**
   * Test localStorage availability
   */
  testLocalStorage() {
    try {
      const test = "__milo_test__";
      localStorage.setItem(test, test);
      localStorage.removeItem(test);
      return true;
    } catch (e) {
      return false;
    }
  }
  /**
   * Test WebGL availability
   */
  testWebGL() {
    try {
      const canvas = document.createElement("canvas");
      return !!(canvas.getContext("webgl") || canvas.getContext("experimental-webgl"));
    } catch (e) {
      return false;
    }
  }
  /**
   * Log environment information
   */
  logEnvironment() {
    log16.debug("Environment Detection", {
      hugo: this.environment.hugo.environment,
      production: this.environment.hugo.isProduction,
      debug: this.environment.hugo.debug,
      device: {
        mobile: this.environment.device.isMobile,
        tablet: this.environment.device.isTablet,
        desktop: this.environment.device.isDesktop
      },
      features: this.environment.features
    });
  }
  /**
   * Initialize core features based on environment
   */
  async initializeCoreFeatures() {
    const features = [];
    features.push(this.loadCoreUtilities());
    if (!this.environment.hugo.isProduction) {
      features.push(this.initializePerformanceMonitoring());
    }
    if (this.environment.hugo.debug) {
      features.push(this.initializeDebugFeatures());
    }
    features.push(this.initializeEnvironmentFeatures());
    await Promise.all(features);
  }
  /**
   * Load core utilities
   */
  async loadCoreUtilities() {
    try {
      await Promise.all([
        Promise.resolve().then(() => (init_ErrorHandler(), ErrorHandler_exports)),
        // Sets up global error handlers
        Promise.resolve().then(() => (init_NotificationManager(), NotificationManager_exports)),
        // Sets up window.toast
        Promise.resolve().then(() => (init_LoadingStateManager(), LoadingStateManager_exports)),
        // Injects CSS styles
        Promise.resolve().then(() => (init_CopyManager(), CopyManager_exports))
        // Available for components
      ]);
      this.features.add("utilities");
      log16.debug("Core utilities loaded and initialized");
    } catch (error) {
      log16.warn("Failed to load core utilities:", error);
    }
  }
  /**
   * Initialize performance monitoring
   */
  async initializePerformanceMonitoring() {
    if (!this.environment.features.performanceObserver) return;
    try {
      const observer = new PerformanceObserver((list) => {
        list.getEntries().forEach((entry) => {
          var _a;
          this.performance.components.set(entry.name, entry);
          logger.performance(entry.name, `${(_a = entry.duration) == null ? void 0 : _a.toFixed(2)}ms` || "N/A", "MiloCore");
        });
      });
      observer.observe({ entryTypes: ["measure", "navigation", "resource"] });
      this.features.add("performance-monitoring");
    } catch (error) {
      log16.warn("Performance monitoring failed to initialize:", error);
    }
  }
  /**
   * Initialize debug features
   */
  async initializeDebugFeatures() {
    window.MiloDebug = {
      core: this,
      eventBus,
      ComponentManager: ComponentManager_default,
      environment: this.environment,
      performance: this.performance,
      // Debug helpers
      listComponents: () => ComponentManager_default.getAllInstances(),
      getComponent: (id) => ComponentManager_default.getInstance(id),
      destroyComponent: (id) => ComponentManager_default.destroy(id),
      emit: (event, data) => eventBus.emit(event, data),
      // Performance helpers
      getMetrics: () => this.performance,
      measureComponent: (name, fn) => {
        const start = performance.now();
        const result = fn();
        const end = performance.now();
        console.log(`\u{1F4CA} ${name}: ${(end - start).toFixed(2)}ms`);
        return result;
      }
    };
    this.setupDebugKeyboards();
    this.features.add("debug");
    log16.debug("Debug features initialized");
  }
  /**
   * Setup debug keyboard shortcuts
   */
  setupDebugKeyboards() {
    document.addEventListener("keydown", (e) => {
      if (e.ctrlKey && e.shiftKey) {
        switch (e.key) {
          case "D":
            e.preventDefault();
            console.table(this.environment);
            break;
          case "C":
            e.preventDefault();
            console.table(ComponentManager_default.getAllInstances().map((c) => c.getState()));
            break;
          case "P":
            e.preventDefault();
            console.table(this.performance);
            break;
          case "E":
            e.preventDefault();
            console.log(eventBus.getEvents());
            break;
        }
      }
    });
  }
  /**
   * Initialize environment-specific features
   */
  async initializeEnvironmentFeatures() {
    const env = this.environment.hugo.environment;
    switch (env) {
      case "nvidia":
        await this.initializeNvidiaFeatures();
        break;
      case "enterprise":
        await this.initializeEnterpriseFeatures();
        break;
      case "open-source":
        await this.initializeOpenSourceFeatures();
        break;
      default:
        await this.initializeDefaultFeatures();
    }
  }
  /**
   * NVIDIA-specific initialization
   */
  async initializeNvidiaFeatures() {
    document.documentElement.style.setProperty("--brand-primary", "#76b900");
    this.features.add("nvidia-branding");
  }
  /**
   * Enterprise-specific initialization
   */
  async initializeEnterpriseFeatures() {
    document.documentElement.style.setProperty("--brand-primary", "#6366f1");
    this.features.add("enterprise-features");
  }
  /**
   * Open source-specific initialization
   */
  async initializeOpenSourceFeatures() {
    document.documentElement.style.setProperty("--brand-primary", "#ff6b6b");
    this.features.add("open-source-features");
  }
  /**
   * Default feature initialization
   */
  async initializeDefaultFeatures() {
    document.documentElement.style.setProperty("--brand-primary", "#3b82f6");
    this.features.add("default-features");
  }
  /**
   * Setup component system
   */
  setupComponentSystem() {
    const reactiveEnabled = ComponentManager_default.enableReactiveDiscovery();
    if (reactiveEnabled) {
      this.features.add("reactive-discovery");
      log16.debug("\u2705 Reactive DOM discovery enabled");
    }
    log16.debug("Component system ready");
  }
  /**
   * Load critical components that should always be available
   */
  async loadCriticalComponents() {
    const critical = [];
    await Promise.all(critical);
  }
  /**
   * Auto-discover and load components
   */
  async discoverAndLoadComponents() {
    ComponentManager_default.autoDiscover();
    log16.debug("Component auto-discovery initiated");
  }
  /**
   * Reinitialize components after page cache restoration
   * This method is exposed for external access and debugging
   */
  reinitializeComponents() {
    if (!this.initialized) {
      log16.warn("Core system not initialized, cannot reinitialize components");
      return 0;
    }
    return ComponentManager_default.reinitializeAfterCacheRestore();
  }
  /**
   * Setup global events and shortcuts
   */
  setupGlobalEvents() {
    document.addEventListener("keydown", (e) => {
      var _a;
      if (e.altKey) {
        switch (e.key) {
          case "s":
            e.preventDefault();
            (_a = document.getElementById("searchInput")) == null ? void 0 : _a.focus();
            break;
          case "h":
            e.preventDefault();
            const homeLink = document.querySelector('a[href="/"], a[href="./"], a[href="./index.html"], a[href="index.html"]');
            if (homeLink) {
              window.location.href = homeLink.href;
            } else {
              window.location.href = "./";
            }
            break;
        }
      }
    });
    this.setupPerformanceTracking();
    window.addEventListener("online", () => {
      eventBus.emit("milo:online");
      log16.info("Connection restored");
    });
    window.addEventListener("offline", () => {
      eventBus.emit("milo:offline");
      log16.info("Connection lost");
    });
  }
  /**
   * Setup performance tracking
   */
  setupPerformanceTracking() {
    eventBus.on("component:ready", (data) => {
      const { component } = data;
      this.performance.components.set(component.id, {
        name: component.name,
        initTime: performance.now() - this.performance.startTime
      });
    });
  }
  /**
   * Handle global errors
   */
  handleError(event) {
    log16.error("Global error caught:", event.error || event.reason);
    eventBus.emit("milo:error", {
      error: event.error || event.reason,
      type: event.type
    });
  }
  /**
   * Handle page unload
   */
  handleUnload() {
    ComponentManager_default.destroyAll();
    log16.debug("Cleanup completed");
  }
  /**
   * Get system information
   */
  getInfo() {
    return {
      version: this.version,
      environment: this.environment,
      features: Array.from(this.features),
      performance: this.performance,
      initialized: this.initialized
    };
  }
};
var milo = new MiloCore();
if (typeof window !== "undefined") {
  window.Milo = milo;
}

// <stdin>
init_dom();
init_components();
init_Logger();

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/utils/LoggingConfig.js
init_Logger();
function configureLogging() {
  var _a, _b, _c, _d, _e, _f;
  try {
    const explicitLevel = ((_a = window.HugoEnvironment) == null ? void 0 : _a.logLevel) || ((_c = (_b = document.documentElement) == null ? void 0 : _b.dataset) == null ? void 0 : _c.logLevel);
    if (explicitLevel) {
      logger.setLogLevel(explicitLevel);
    }
    const isDebug = ((_d = window.HugoEnvironment) == null ? void 0 : _d.debug) || /^(DEBUG|TRACE)$/i.test(((_f = (_e = document.documentElement) == null ? void 0 : _e.dataset) == null ? void 0 : _f.logLevel) || "");
    if (isDebug && !window.__miloConsoleShimInstalled && !window.MiloDocsDisableConsoleShim) {
      const originalWarn = console.warn.bind(console);
      const originalError = console.error.bind(console);
      console.warn = (...args) => {
        const [message, ...rest] = args;
        const formatted = typeof message === "string" ? logger.formatMessage("WARN", "Console", message, ...rest) : logger.formatMessage("WARN", "Console", "Warning:", message, ...rest);
        originalWarn(...formatted);
      };
      console.error = (...args) => {
        const [message, ...rest] = args;
        const formatted = typeof message === "string" ? logger.formatMessage("ERROR", "Console", message, ...rest) : logger.formatMessage("ERROR", "Console", "Error:", message, ...rest);
        originalError(...formatted);
      };
      window.__miloConsoleShimInstalled = true;
    }
  } catch (e) {
  }
}
var LoggingConfig_default = configureLogging;

// <stdin>
init_AnimationBridge();
init_ComponentManager();

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/init/ErrorGuards.js
init_Logger();
function installGlobalErrorGuards() {
  window.addEventListener("unhandledrejection", (event) => {
    var _a;
    try {
      logger.error("Global", "Unhandled promise rejection", event.reason);
    } catch (_) {
    }
    if (!((_a = window.HugoEnvironment) == null ? void 0 : _a.debug)) event.preventDefault();
  });
  window.addEventListener("error", (event) => {
    try {
      logger.error("Global", "Unhandled error", event.error || event.message);
    } catch (_) {
    }
  });
}
var ErrorGuards_default = installGlobalErrorGuards;

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/ui/GlobalEnhancements.js
async function setupGlobalEnhancements() {
  const { createRipple: createRipple2 } = await Promise.resolve().then(() => (init_dom(), dom_exports));
  const { showLoading: showLoading2, hideLoading: hideLoading2 } = await Promise.resolve().then(() => (init_LoadingStateManager(), LoadingStateManager_exports));
  const config = {
    ripples: true,
    hovers: true,
    forms: true,
    scroll: true,
    ...window.MiloUX || {}
  };
  if (config.ripples) {
    const clickableElements = document.querySelectorAll(`
    button, .btn, .topbar__button,
    .article-next-prev__link, .breadcrumb__link, .toc-link,
    .quicklinks__link, .quicklinks__item,
    .tile, .card, .resource-card,
    .topbar__logo-link, .dropdown-link,
    .sidebar__link, .sidebar__toggle
  `);
    clickableElements.forEach((element) => {
      element.addEventListener("click", (e) => createRipple2(element, e));
    });
  }
  if (config.hovers) {
    const hoverElements = document.querySelectorAll(".tile, .card, .quicklinks__item");
    hoverElements.forEach((element) => {
      element.addEventListener("mouseenter", () => {
        element.style.transform = "translateY(-2px)";
        element.style.boxShadow = "0 8px 25px rgba(0,0,0,0.15)";
      });
      element.addEventListener("mouseleave", () => {
        element.style.transform = "translateY(0)";
        element.style.boxShadow = "";
      });
    });
  }
  if (config.forms) {
    const forms = document.querySelectorAll("form");
    forms.forEach((form) => {
      form.addEventListener("submit", function() {
        const submitButton = form.querySelector('button[type="submit"]');
        if (!submitButton) return;
        submitButton.disabled = true;
        const originalContent = submitButton.innerHTML;
        submitButton.setAttribute("data-original-content", originalContent);
        const loaderId = showLoading2(submitButton, {
          type: "dots",
          message: "Processing...",
          size: "small"
        });
        submitButton.setAttribute("data-loader-id", loaderId);
      });
      form.addEventListener("reset", function() {
        const submitButton = form.querySelector('button[type="submit"]');
        if (!submitButton) return;
        const loaderId = submitButton.getAttribute("data-loader-id");
        const originalContent = submitButton.getAttribute("data-original-content");
        if (loaderId) {
          hideLoading2(loaderId);
          submitButton.removeAttribute("data-loader-id");
        }
        if (originalContent) {
          submitButton.innerHTML = originalContent;
          submitButton.removeAttribute("data-original-content");
        }
        submitButton.disabled = false;
      });
    });
  }
  if (config.scroll) {
    await setupScrollEnhancements();
  }
}
async function setupScrollEnhancements() {
  const { throttle: throttle2 } = await Promise.resolve().then(() => (init_dom(), dom_exports));
  let lastScrollY = window.scrollY;
  let scheduled = false;
  function onScroll() {
    if (scheduled) return;
    scheduled = true;
    requestAnimationFrame(() => {
      const currentScrollY = window.scrollY;
      const scrollDirection = currentScrollY > lastScrollY ? "down" : "up";
      document.body.setAttribute("data-scroll-direction", scrollDirection);
      const scrolled = window.pageYOffset;
      document.querySelectorAll(".hero-parallax").forEach((hero) => {
        const parallax = scrolled * 0.5;
        hero.style.transform = `translateY(${parallax}px)`;
      });
      document.querySelectorAll(".fade-in-on-scroll").forEach((element) => {
        const rect = element.getBoundingClientRect();
        if (rect.top < window.innerHeight && rect.bottom > 0) {
          element.classList.add("visible");
        }
      });
      lastScrollY = currentScrollY;
      scheduled = false;
    });
  }
  window.addEventListener("scroll", onScroll, { passive: true });
}

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/nav/StaticNavigation.js
init_ComponentManager();
init_Logger();
var log17 = logger.component("StaticNav");
function isStaticDeployment() {
  var _a, _b, _c;
  const hasUglyURLs = window.location.pathname.includes(".html");
  const hasBaseURL = ((_a = window.HugoEnvironment) == null ? void 0 : _a.baseURL) === "/" || ((_c = (_b = window.HugoEnvironment) == null ? void 0 : _b.baseURL) == null ? void 0 : _c.endsWith("/"));
  return hasUglyURLs || hasBaseURL;
}
function syncSidebarComponent() {
  try {
    const instance = Array.from(ComponentManager_default.instances.values()).find((inst) => inst.name === "navigation-sidebar-left");
    if (instance && typeof instance.syncToCurrentPage === "function") {
      instance.syncToCurrentPage();
      return true;
    }
    return false;
  } catch (e) {
    log17.debug("syncSidebarComponent failed:", e);
    return false;
  }
}
function testSidebarInteractivity(toggle) {
  try {
    return toggle.hasAttribute("aria-expanded");
  } catch (error) {
    log17.debug("Sidebar interactivity test failed:", error);
    return false;
  }
}
function hasOrphanedEventListeners() {
  try {
    const elementsWithListeners = document.querySelectorAll("[data-component-listeners]");
    for (const element of elementsWithListeners) {
      const listenerIds = element.dataset.componentListeners.split(",");
      for (const componentId of listenerIds) {
        const instance = ComponentManager_default.instances.get(componentId);
        if (!instance || instance.state === "destroyed") {
          log17.debug(`Found orphaned listeners from component ${componentId}`);
          return true;
        }
      }
    }
    return false;
  } catch (error) {
    log17.debug("Error checking for orphaned listeners:", error);
    return false;
  }
}
function checkComponentHealth() {
  return new Promise((resolve) => {
    setTimeout(() => {
      if (!milo.initialized) {
        log17.warn("Core system not initialized after navigation");
        resolve("needs_full_init");
        return;
      }
      const sidebarElement = document.getElementById("sidebar-left");
      if (sidebarElement) {
        const toggles = sidebarElement.querySelectorAll(".sidebar__toggle");
        if (toggles.length > 0) {
          const firstToggle = toggles[0];
          if (!firstToggle.hasAttribute("aria-expanded")) {
            log17.info("Sidebar toggles missing aria-expanded attributes");
            resolve("needs_component_reinit");
            return;
          }
          if (!firstToggle.dataset.componentListeners) {
            log17.info("Sidebar toggles missing event listener tracking");
            resolve("needs_component_reinit");
            return;
          }
          if (!testSidebarInteractivity(firstToggle)) {
            log17.info("Sidebar toggles not responsive to events");
            resolve("needs_component_reinit");
            return;
          }
        }
      }
      if (hasOrphanedEventListeners()) {
        log17.info("Detected orphaned event listeners");
        resolve("needs_component_reinit");
        return;
      }
      resolve("healthy");
    }, 150);
  });
}
function attachStaticNavigationHandlers({ onInit }) {
  const MAX_REINIT_ATTEMPTS2 = 3;
  let isCurrentPageInitialized2 = false;
  let lastURL2 = window.location.href;
  let reinitializationAttempts2 = 0;
  async function handleStaticNavigation2(event) {
    const currentURL = window.location.href;
    const isNewPage = currentURL !== lastURL2;
    if (isNewPage || (event == null ? void 0 : event.persisted) || !isCurrentPageInitialized2) {
      log17.info(`Static navigation detected: ${isNewPage ? "new page" : "cached page"}`);
      lastURL2 = currentURL;
      if (isNewPage) reinitializationAttempts2 = 0;
      const healthStatus = await checkComponentHealth();
      if (healthStatus === "needs_full_init") {
        if (reinitializationAttempts2 < MAX_REINIT_ATTEMPTS2) {
          reinitializationAttempts2++;
          log17.info(`Performing full initialization (attempt ${reinitializationAttempts2})`);
          await onInit();
          isCurrentPageInitialized2 = true;
          syncSidebarComponent();
        }
      } else if (healthStatus === "needs_component_reinit") {
        if (reinitializationAttempts2 < MAX_REINIT_ATTEMPTS2) {
          reinitializationAttempts2++;
          log17.info(`Reinitializing components (attempt ${reinitializationAttempts2})`);
          const reinitialized = ComponentManager_default.reinitializeAfterCacheRestore();
          log17.info(`Static navigation: ${reinitialized} components reinitialized`);
          isCurrentPageInitialized2 = true;
          syncSidebarComponent();
        }
      } else {
        log17.info("Components appear healthy after navigation");
        isCurrentPageInitialized2 = true;
        syncSidebarComponent();
      }
    }
  }
  window.addEventListener("pageshow", handleStaticNavigation2);
  window.addEventListener("popstate", (event) => {
    log17.info("Static site popstate navigation");
    handleStaticNavigation2(event);
  });
  window.addEventListener("focus", () => {
    setTimeout(() => handleStaticNavigation2({ type: "focus" }), 100);
  });
  return { handleStaticNavigation: handleStaticNavigation2 };
}
function attachDynamicNavigationHandlers({ onInit }) {
  let isCurrentPageInitialized2 = false;
  window.addEventListener("pageshow", (event) => {
    if (event.persisted || !isCurrentPageInitialized2) {
      log17.info("Page restored/loaded, checking component state...");
      if (!milo.initialized) {
        onInit().then(() => {
          isCurrentPageInitialized2 = true;
          syncSidebarComponent();
        });
      } else {
        const reinitialized = ComponentManager_default.reinitializeAfterCacheRestore();
        log17.info(`Page navigation handled: ${reinitialized} components reinitialized`);
        isCurrentPageInitialized2 = true;
        syncSidebarComponent();
      }
    }
  });
  window.addEventListener("popstate", () => {
    log17.info("Navigation detected (popstate), reinitializing components...");
    setTimeout(() => {
      if (milo.initialized) {
        const reinitialized = ComponentManager_default.reinitializeAfterCacheRestore();
        log17.info(`Back/forward navigation handled: ${reinitialized} components reinitialized`);
        syncSidebarComponent();
      } else {
        onInit();
      }
    }, 100);
  });
}

// ns-hugo-imp:/Users/burso/Library/Caches/hugo_cache/modules/filecache/modules/pkg/mod/github.com/lbliii/milodocs@v0.0.0-20250815150625-269077e840bc/assets/js/debug/DevTools.js
init_ComponentManager();
init_Logger();
var log18 = logger.component("DevTools");
function installDebugTools() {
  var _a, _b, _c;
  if (typeof window === "undefined") return;
  if (!((_a = window.HugoEnvironment) == null ? void 0 : _a.debug) && !/^(DEBUG|TRACE)$/i.test(((_c = (_b = document.documentElement) == null ? void 0 : _b.dataset) == null ? void 0 : _c.logLevel) || "")) {
    return;
  }
  window.reinitializeComponents = () => {
    log18.info("Manual component reinitialization triggered");
    const count = milo.reinitializeComponents();
    log18.info(`Reinitialized ${count} components`);
    return count;
  };
  window.testStaticNavigation = () => {
    log18.info("Testing static navigation handling...");
    log18.info(`Current URL: ${window.location.href}`);
    log18.info(`Is static deployment: ${isStaticDeployment()}`);
    log18.info(`Core initialized: ${milo.initialized}`);
    return checkComponentHealth();
  };
  window.checkComponentHealth = async () => {
    log18.info("Checking component health...");
    const health = await checkComponentHealth();
    log18.info(`Component health status: ${health}`);
    return health;
  };
  window.testSidebarFunctionality = () => {
    log18.info("Testing sidebar functionality...");
    const sidebarElement = document.getElementById("sidebar-left");
    if (!sidebarElement) {
      log18.error("Sidebar element not found");
      return false;
    }
    const style = window.getComputedStyle(sidebarElement);
    const isVisible = style.display !== "none" && style.opacity !== "0";
    log18.info(`Sidebar visibility: ${isVisible ? "\u2705 VISIBLE" : "\u274C HIDDEN"}`);
    return isVisible;
  };
}
var DevTools_default = installDebugTools;

// <stdin>
(function() {
  try {
    let enableTransitions = function() {
      if (!transitionsEnabled) {
        transitionsEnabled = true;
        docEl.classList.remove("no-transitions");
      }
    }, bindCssLoadListener = function() {
      var link = document.getElementById("main-css");
      if (link) {
        link.addEventListener("load", enableTransitions, { once: true });
        return true;
      }
      return false;
    };
    var docEl = document.documentElement;
    docEl.classList.remove("no-js");
    docEl.classList.add("js");
    if (!docEl.classList.contains("no-transitions")) {
      docEl.classList.add("no-transitions");
    }
    try {
      var saved = localStorage.getItem("theme.mode") || localStorage.getItem("theme-mode");
      if (!saved) {
        var body = document.body;
        saved = body && body.dataset && body.dataset.theme ? body.dataset.theme : "dark";
      }
      if (saved === "dark") {
        docEl.classList.add("dark");
      } else {
        docEl.classList.remove("dark");
      }
    } catch (e) {
      docEl.classList.add("dark");
    }
    var transitionsEnabled = false;
    if (!bindCssLoadListener()) {
      document.addEventListener("DOMContentLoaded", function() {
        requestAnimationFrame(function() {
          if (!bindCssLoadListener()) {
            setTimeout(enableTransitions, 250);
          }
        });
      });
    }
    setTimeout(enableTransitions, 1e3);
  } catch (e) {
  }
})();
(function() {
  try {
    if (getComputedStyle(document.documentElement).getPropertyValue("--hugo-environment").includes("nvidia") || document.body.classList.contains("env-nvidia")) {
      document.documentElement.classList.add("fonts-loading");
      if ("fonts" in document) {
        Promise.all([
          document.fonts.load("400 1rem NVIDIA"),
          document.fonts.load("700 1rem NVIDIA")
        ]).then(function() {
          document.documentElement.classList.remove("fonts-loading");
          document.documentElement.classList.add("fonts-loaded");
        }).catch(function() {
          setTimeout(function() {
            document.documentElement.classList.remove("fonts-loading");
            document.documentElement.classList.add("fonts-loaded");
          }, 2e3);
        });
      } else {
        setTimeout(function() {
          document.documentElement.classList.remove("fonts-loading");
          document.documentElement.classList.add("fonts-loaded");
        }, 1e3);
      }
    }
  } catch (e) {
  }
})();
(function() {
  try {
    var script = document.getElementById("hugo-environment-json");
    if (!script) return;
    var data = JSON.parse(script.textContent || "{}");
    window.HugoEnvironment = data;
  } catch (e) {
  }
})();
var log19 = logger.component("MiloDocs");
async function initializeMiloDocs() {
  try {
    try {
      LoggingConfig_default();
    } catch (_) {
    }
    ErrorGuards_default();
    await milo.init();
    animationBridge.init();
    animationBridge.migrateExistingComponents();
    await registerAllComponents();
    await setupGlobalEnhancements();
    log19.info("MiloDocs fully initialized");
    log19.debug("Debug utilities available:");
    log19.debug("  - window.resetNavigation() - Reset sidebar state");
    log19.debug("  - window.debugSidebar() - Debug sidebar info + auto-fix");
    log19.debug("  - window.debugComponents() - Show all registered components");
    log19.debug("  - window.reinitializeComponents() - Reinitialize broken components (simulates cache restore)");
    DevTools_default();
  } catch (error) {
    log19.error("MiloDocs initialization failed:", error);
    throw error;
  }
}
async function handlePageInitialization() {
  var _a;
  const env = ((_a = window.HugoEnvironment) == null ? void 0 : _a.environment) || "development";
  document.body.classList.add(`env-${env}`);
  await initializeMiloDocs();
}
ready(() => {
  handlePageInitialization();
});
var isCurrentPageInitialized = false;
var lastURL = window.location.href;
var reinitializationAttempts = 0;
var MAX_REINIT_ATTEMPTS = 3;
async function handleStaticNavigation(event) {
  const currentURL = window.location.href;
  const isNewPage = currentURL !== lastURL;
  if (isNewPage || (event == null ? void 0 : event.persisted) || !isCurrentPageInitialized) {
    log19.info(`Static navigation detected: ${isNewPage ? "new page" : "cached page"}`);
    lastURL = currentURL;
    if (isNewPage) {
      reinitializationAttempts = 0;
    }
    const healthStatus = await checkComponentHealth();
    if (healthStatus === "needs_full_init") {
      if (reinitializationAttempts < MAX_REINIT_ATTEMPTS) {
        reinitializationAttempts++;
        log19.info(`Performing full initialization (attempt ${reinitializationAttempts})`);
        await handlePageInitialization();
        isCurrentPageInitialized = true;
        syncSidebarComponent();
      }
    } else if (healthStatus === "needs_component_reinit") {
      if (reinitializationAttempts < MAX_REINIT_ATTEMPTS) {
        reinitializationAttempts++;
        log19.info(`Reinitializing components (attempt ${reinitializationAttempts})`);
        const reinitialized = ComponentManager_default.reinitializeAfterCacheRestore();
        log19.info(`Static navigation: ${reinitialized} components reinitialized`);
        isCurrentPageInitialized = true;
        syncSidebarComponent();
      }
    } else {
      log19.info("Components appear healthy after navigation");
      isCurrentPageInitialized = true;
      syncSidebarComponent();
    }
  }
}
if (isStaticDeployment()) {
  log19.info("Static deployment detected, using enhanced navigation handling");
  attachStaticNavigationHandlers({ onInit: handlePageInitialization });
} else {
  log19.info("Dynamic deployment detected, using standard navigation handling");
  attachDynamicNavigationHandlers({ onInit: handlePageInitialization });
}
if (typeof window !== "undefined") {
  window.reinitializeComponents = () => {
    log19.info("Manual component reinitialization triggered");
    const count = milo.reinitializeComponents();
    log19.info(`Reinitialized ${count} components`);
    return count;
  };
  window.testStaticNavigation = () => {
    log19.info("Testing static navigation handling...");
    log19.info(`Current URL: ${window.location.href}`);
    log19.info(`Is static deployment: ${isStaticDeployment()}`);
    log19.info(`Core initialized: ${milo.initialized}`);
    log19.info(`Page initialized: ${isCurrentPageInitialized}`);
    handleStaticNavigation({ type: "manual_test" });
  };
  window.checkComponentHealth = async () => {
    log19.info("Checking component health...");
    const health = await checkComponentHealth();
    log19.info(`Component health status: ${health}`);
    return health;
  };
  window.testSidebarFunctionality = () => {
    log19.info("Testing sidebar functionality...");
    const sidebarElement = document.getElementById("sidebar-left");
    if (!sidebarElement) {
      log19.error("Sidebar element not found");
      return false;
    }
    const sidebarStyle = window.getComputedStyle(sidebarElement);
    const isVisible = sidebarStyle.display !== "none" && sidebarStyle.opacity !== "0";
    log19.info(`Sidebar visibility: ${isVisible ? "\u2705 VISIBLE" : "\u274C HIDDEN"}`);
    log19.info(`Sidebar opacity: ${sidebarStyle.opacity}`);
    log19.info(`Sidebar display: ${sidebarStyle.display}`);
    log19.info(`Sidebar transform: ${sidebarStyle.transform}`);
    log19.info(`Sidebar component state: ${sidebarElement.dataset.componentState || "none"}`);
    const toggles = sidebarElement.querySelectorAll(".sidebar-item__toggle");
    log19.info(`Found ${toggles.length} sidebar toggles`);
    if (toggles.length === 0) {
      log19.error("No sidebar toggles found");
      return { isVisible, toggleCount: 0 };
    }
    const firstToggle = toggles[0];
    const hasAria = firstToggle.hasAttribute("aria-expanded");
    const hasListeners = !!firstToggle.dataset.componentListeners;
    log19.info(`Toggle has aria-expanded: ${hasAria}`);
    log19.info(`Toggle has listener tracking: ${hasListeners}`);
    log19.info(`Toggle listener IDs: ${firstToggle.dataset.componentListeners}`);
    const originalState = firstToggle.getAttribute("aria-expanded");
    log19.info(`Original toggle state: ${originalState}`);
    const clickEvent = new Event("click", { bubbles: true, cancelable: true });
    firstToggle.dispatchEvent(clickEvent);
    setTimeout(() => {
      const newState = firstToggle.getAttribute("aria-expanded");
      log19.info(`New toggle state after click: ${newState}`);
      const isWorking = newState !== originalState;
      log19.info(`Sidebar click functionality: ${isWorking ? "\u2705 WORKING" : "\u274C BROKEN"}`);
      firstToggle.setAttribute("aria-expanded", originalState);
    }, 100);
    return {
      isVisible,
      hasAria,
      hasListeners,
      toggleCount: toggles.length,
      componentState: sidebarElement.dataset.componentState
    };
  };
}
export {
  initializeMiloDocs,
  milo
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibnMtaHVnby1pbXA6L1VzZXJzL2J1cnNvL0xpYnJhcnkvQ2FjaGVzL2h1Z29fY2FjaGUvbW9kdWxlcy9maWxlY2FjaGUvbW9kdWxlcy9wa2cvbW9kL2dpdGh1Yi5jb20vbGJsaWlpL21pbG9kb2NzQHYwLjAuMC0yMDI1MDgxNTE1MDYyNS0yNjkwNzdlODQwYmMvYXNzZXRzL2pzL3V0aWxzL0xvZ2dlci5qcyIsICJucy1odWdvLWltcDovVXNlcnMvYnVyc28vTGlicmFyeS9DYWNoZXMvaHVnb19jYWNoZS9tb2R1bGVzL2ZpbGVjYWNoZS9tb2R1bGVzL3BrZy9tb2QvZ2l0aHViLmNvbS9sYmxpaWkvbWlsb2RvY3NAdjAuMC4wLTIwMjUwODE1MTUwNjI1LTI2OTA3N2U4NDBiYy9hc3NldHMvanMvdXRpbHMvRmVhdHVyZURldGVjdGlvbi5qcyIsICJucy1odWdvLWltcDovVXNlcnMvYnVyc28vTGlicmFyeS9DYWNoZXMvaHVnb19jYWNoZS9tb2R1bGVzL2ZpbGVjYWNoZS9tb2R1bGVzL3BrZy9tb2QvZ2l0aHViLmNvbS9sYmxpaWkvbWlsb2RvY3NAdjAuMC4wLTIwMjUwODE1MTUwNjI1LTI2OTA3N2U4NDBiYy9hc3NldHMvanMvY29yZS9FdmVudEJ1cy5qcyIsICJucy1odWdvLWltcDovVXNlcnMvYnVyc28vTGlicmFyeS9DYWNoZXMvaHVnb19jYWNoZS9tb2R1bGVzL2ZpbGVjYWNoZS9tb2R1bGVzL3BrZy9tb2QvZ2l0aHViLmNvbS9sYmxpaWkvbWlsb2RvY3NAdjAuMC4wLTIwMjUwODE1MTUwNjI1LTI2OTA3N2U4NDBiYy9hc3NldHMvanMvY29yZS9Db21wb25lbnQuanMiLCAibnMtaHVnby1pbXA6L1VzZXJzL2J1cnNvL0xpYnJhcnkvQ2FjaGVzL2h1Z29fY2FjaGUvbW9kdWxlcy9maWxlY2FjaGUvbW9kdWxlcy9wa2cvbW9kL2dpdGh1Yi5jb20vbGJsaWlpL21pbG9kb2NzQHYwLjAuMC0yMDI1MDgxNTE1MDYyNS0yNjkwNzdlODQwYmMvYXNzZXRzL2pzL3V0aWxzL3Nhbml0aXplLmpzIiwgIm5zLWh1Z28taW1wOi9Vc2Vycy9idXJzby9MaWJyYXJ5L0NhY2hlcy9odWdvX2NhY2hlL21vZHVsZXMvZmlsZWNhY2hlL21vZHVsZXMvcGtnL21vZC9naXRodWIuY29tL2xibGlpaS9taWxvZG9jc0B2MC4wLjAtMjAyNTA4MTUxNTA2MjUtMjY5MDc3ZTg0MGJjL2Fzc2V0cy9qcy91dGlscy9kb20uanMiLCAibnMtaHVnby1pbXA6L1VzZXJzL2J1cnNvL0xpYnJhcnkvQ2FjaGVzL2h1Z29fY2FjaGUvbW9kdWxlcy9maWxlY2FjaGUvbW9kdWxlcy9wa2cvbW9kL2dpdGh1Yi5jb20vbGJsaWlpL21pbG9kb2NzQHYwLjAuMC0yMDI1MDgxNTE1MDYyNS0yNjkwNzdlODQwYmMvYXNzZXRzL2pzL2NvcmUvdXRpbHMvRE9NVXRpbHMuanMiLCAibnMtaHVnby1pbXA6L1VzZXJzL2J1cnNvL0xpYnJhcnkvQ2FjaGVzL2h1Z29fY2FjaGUvbW9kdWxlcy9maWxlY2FjaGUvbW9kdWxlcy9wa2cvbW9kL2dpdGh1Yi5jb20vbGJsaWlpL21pbG9kb2NzQHYwLjAuMC0yMDI1MDgxNTE1MDYyNS0yNjkwNzdlODQwYmMvYXNzZXRzL2pzL2NvcmUvQW5pbWF0aW9uQnJpZGdlLmpzIiwgIm5zLWh1Z28taW1wOi9Vc2Vycy9idXJzby9MaWJyYXJ5L0NhY2hlcy9odWdvX2NhY2hlL21vZHVsZXMvZmlsZWNhY2hlL21vZHVsZXMvcGtnL21vZC9naXRodWIuY29tL2xibGlpaS9taWxvZG9jc0B2MC4wLjAtMjAyNTA4MTUxNTA2MjUtMjY5MDc3ZTg0MGJjL2Fzc2V0cy9qcy9taXhpbnMvTWl4aW5CYXNlLmpzIiwgIm5zLWh1Z28taW1wOi9Vc2Vycy9idXJzby9MaWJyYXJ5L0NhY2hlcy9odWdvX2NhY2hlL21vZHVsZXMvZmlsZWNhY2hlL21vZHVsZXMvcGtnL21vZC9naXRodWIuY29tL2xibGlpaS9taWxvZG9jc0B2MC4wLjAtMjAyNTA4MTUxNTA2MjUtMjY5MDc3ZTg0MGJjL2Fzc2V0cy9qcy9taXhpbnMvRXhwYW5kYWJsZU1peGluLmpzIiwgIm5zLWh1Z28taW1wOi9Vc2Vycy9idXJzby9MaWJyYXJ5L0NhY2hlcy9odWdvX2NhY2hlL21vZHVsZXMvZmlsZWNhY2hlL21vZHVsZXMvcGtnL21vZC9naXRodWIuY29tL2xibGlpaS9taWxvZG9jc0B2MC4wLjAtMjAyNTA4MTUxNTA2MjUtMjY5MDc3ZTg0MGJjL2Fzc2V0cy9qcy9taXhpbnMvUmVzcG9uc2l2ZU1peGluLmpzIiwgIm5zLWh1Z28taW1wOi9Vc2Vycy9idXJzby9MaWJyYXJ5L0NhY2hlcy9odWdvX2NhY2hlL21vZHVsZXMvZmlsZWNhY2hlL21vZHVsZXMvcGtnL21vZC9naXRodWIuY29tL2xibGlpaS9taWxvZG9jc0B2MC4wLjAtMjAyNTA4MTUxNTA2MjUtMjY5MDc3ZTg0MGJjL2Fzc2V0cy9qcy9taXhpbnMvTW9kYWxNaXhpbi5qcyIsICJucy1odWdvLWltcDovVXNlcnMvYnVyc28vTGlicmFyeS9DYWNoZXMvaHVnb19jYWNoZS9tb2R1bGVzL2ZpbGVjYWNoZS9tb2R1bGVzL3BrZy9tb2QvZ2l0aHViLmNvbS9sYmxpaWkvbWlsb2RvY3NAdjAuMC4wLTIwMjUwODE1MTUwNjI1LTI2OTA3N2U4NDBiYy9hc3NldHMvanMvdXRpbHMvc3RvcmFnZS5qcyIsICJucy1odWdvLWltcDovVXNlcnMvYnVyc28vTGlicmFyeS9DYWNoZXMvaHVnb19jYWNoZS9tb2R1bGVzL2ZpbGVjYWNoZS9tb2R1bGVzL3BrZy9tb2QvZ2l0aHViLmNvbS9sYmxpaWkvbWlsb2RvY3NAdjAuMC4wLTIwMjUwODE1MTUwNjI1LTI2OTA3N2U4NDBiYy9hc3NldHMvanMvdXRpbHMvYW5pbWF0aW9uLmpzIiwgIm5zLWh1Z28taW1wOi9Vc2Vycy9idXJzby9MaWJyYXJ5L0NhY2hlcy9odWdvX2NhY2hlL21vZHVsZXMvZmlsZWNhY2hlL21vZHVsZXMvcGtnL21vZC9naXRodWIuY29tL2xibGlpaS9taWxvZG9jc0B2MC4wLjAtMjAyNTA4MTUxNTA2MjUtMjY5MDc3ZTg0MGJjL2Fzc2V0cy9qcy91dGlscy9hY2Nlc3NpYmlsaXR5LmpzIiwgIm5zLWh1Z28taW1wOi9Vc2Vycy9idXJzby9MaWJyYXJ5L0NhY2hlcy9odWdvX2NhY2hlL21vZHVsZXMvZmlsZWNhY2hlL21vZHVsZXMvcGtnL21vZC9naXRodWIuY29tL2xibGlpaS9taWxvZG9jc0B2MC4wLjAtMjAyNTA4MTUxNTA2MjUtMjY5MDc3ZTg0MGJjL2Fzc2V0cy9qcy91dGlscy9Db3B5TWFuYWdlci5qcyIsICJucy1odWdvLWltcDovVXNlcnMvYnVyc28vTGlicmFyeS9DYWNoZXMvaHVnb19jYWNoZS9tb2R1bGVzL2ZpbGVjYWNoZS9tb2R1bGVzL3BrZy9tb2QvZ2l0aHViLmNvbS9sYmxpaWkvbWlsb2RvY3NAdjAuMC4wLTIwMjUwODE1MTUwNjI1LTI2OTA3N2U4NDBiYy9hc3NldHMvanMvdXRpbHMvTG9hZGluZ1N0YXRlTWFuYWdlci5qcyIsICJucy1odWdvLWltcDovVXNlcnMvYnVyc28vTGlicmFyeS9DYWNoZXMvaHVnb19jYWNoZS9tb2R1bGVzL2ZpbGVjYWNoZS9tb2R1bGVzL3BrZy9tb2QvZ2l0aHViLmNvbS9sYmxpaWkvbWlsb2RvY3NAdjAuMC4wLTIwMjUwODE1MTUwNjI1LTI2OTA3N2U4NDBiYy9hc3NldHMvanMvdXRpbHMvRXJyb3JIYW5kbGVyLmpzIiwgIm5zLWh1Z28taW1wOi9Vc2Vycy9idXJzby9MaWJyYXJ5L0NhY2hlcy9odWdvX2NhY2hlL21vZHVsZXMvZmlsZWNhY2hlL21vZHVsZXMvcGtnL21vZC9naXRodWIuY29tL2xibGlpaS9taWxvZG9jc0B2MC4wLjAtMjAyNTA4MTUxNTA2MjUtMjY5MDc3ZTg0MGJjL2Fzc2V0cy9qcy91dGlscy9Ob3RpZmljYXRpb25NYW5hZ2VyLmpzIiwgIm5zLWh1Z28taW1wOi9Vc2Vycy9idXJzby9MaWJyYXJ5L0NhY2hlcy9odWdvX2NhY2hlL21vZHVsZXMvZmlsZWNhY2hlL21vZHVsZXMvcGtnL21vZC9naXRodWIuY29tL2xibGlpaS9taWxvZG9jc0B2MC4wLjAtMjAyNTA4MTUxNTA2MjUtMjY5MDc3ZTg0MGJjL2Fzc2V0cy9qcy91dGlscy9OYXZpZ2F0aW9uVXRpbHMuanMiLCAibnMtaHVnby1pbXA6L1VzZXJzL2J1cnNvL0xpYnJhcnkvQ2FjaGVzL2h1Z29fY2FjaGUvbW9kdWxlcy9maWxlY2FjaGUvbW9kdWxlcy9wa2cvbW9kL2dpdGh1Yi5jb20vbGJsaWlpL21pbG9kb2NzQHYwLjAuMC0yMDI1MDgxNTE1MDYyNS0yNjkwNzdlODQwYmMvYXNzZXRzL2pzL3V0aWxzL0N1cnJlbnRQYWdlRGV0ZWN0aW9uLmpzIiwgIm5zLWh1Z28taW1wOi9Vc2Vycy9idXJzby9MaWJyYXJ5L0NhY2hlcy9odWdvX2NhY2hlL21vZHVsZXMvZmlsZWNhY2hlL21vZHVsZXMvcGtnL21vZC9naXRodWIuY29tL2xibGlpaS9taWxvZG9jc0B2MC4wLjAtMjAyNTA4MTUxNTA2MjUtMjY5MDc3ZTg0MGJjL2Fzc2V0cy9qcy91dGlscy9pbmRleC5qcyIsICJucy1odWdvLWltcDovVXNlcnMvYnVyc28vTGlicmFyeS9DYWNoZXMvaHVnb19jYWNoZS9tb2R1bGVzL2ZpbGVjYWNoZS9tb2R1bGVzL3BrZy9tb2QvZ2l0aHViLmNvbS9sYmxpaWkvbWlsb2RvY3NAdjAuMC4wLTIwMjUwODE1MTUwNjI1LTI2OTA3N2U4NDBiYy9hc3NldHMvanMvbWl4aW5zL1Njcm9sbFRyYWNraW5nTWl4aW4uanMiLCAibnMtaHVnby1pbXA6L1VzZXJzL2J1cnNvL0xpYnJhcnkvQ2FjaGVzL2h1Z29fY2FjaGUvbW9kdWxlcy9maWxlY2FjaGUvbW9kdWxlcy9wa2cvbW9kL2dpdGh1Yi5jb20vbGJsaWlpL21pbG9kb2NzQHYwLjAuMC0yMDI1MDgxNTE1MDYyNS0yNjkwNzdlODQwYmMvYXNzZXRzL2pzL21peGlucy9Gb3JtVmFsaWRhdGlvbk1peGluLmpzIiwgIm5zLWh1Z28taW1wOi9Vc2Vycy9idXJzby9MaWJyYXJ5L0NhY2hlcy9odWdvX2NhY2hlL21vZHVsZXMvZmlsZWNhY2hlL21vZHVsZXMvcGtnL21vZC9naXRodWIuY29tL2xibGlpaS9taWxvZG9jc0B2MC4wLjAtMjAyNTA4MTUxNTA2MjUtMjY5MDc3ZTg0MGJjL2Fzc2V0cy9qcy9taXhpbnMvTWl4aW5NYW5hZ2VyLmpzIiwgIm5zLWh1Z28taW1wOi9Vc2Vycy9idXJzby9MaWJyYXJ5L0NhY2hlcy9odWdvX2NhY2hlL21vZHVsZXMvZmlsZWNhY2hlL21vZHVsZXMvcGtnL21vZC9naXRodWIuY29tL2xibGlpaS9taWxvZG9jc0B2MC4wLjAtMjAyNTA4MTUxNTA2MjUtMjY5MDc3ZTg0MGJjL2Fzc2V0cy9qcy9jb21wb25lbnRzL3VpL05vb3AuanMiLCAibnMtaHVnby1pbXA6L1VzZXJzL2J1cnNvL0xpYnJhcnkvQ2FjaGVzL2h1Z29fY2FjaGUvbW9kdWxlcy9maWxlY2FjaGUvbW9kdWxlcy9wa2cvbW9kL2dpdGh1Yi5jb20vbGJsaWlpL21pbG9kb2NzQHYwLjAuMC0yMDI1MDgxNTE1MDYyNS0yNjkwNzdlODQwYmMvYXNzZXRzL2pzL2NvbXBvbmVudHMvYXJ0aWNsZS9UYWJBZ2dyZWdhdG9yLmpzIiwgIm5zLWh1Z28taW1wOi9Vc2Vycy9idXJzby9MaWJyYXJ5L0NhY2hlcy9odWdvX2NhY2hlL21vZHVsZXMvZmlsZWNhY2hlL21vZHVsZXMvcGtnL21vZC9naXRodWIuY29tL2xibGlpaS9taWxvZG9jc0B2MC4wLjAtMjAyNTA4MTUxNTA2MjUtMjY5MDc3ZTg0MGJjL2Fzc2V0cy9qcy9jb21wb25lbnRzL2FydGljbGUvQ2xpcGJvYXJkLmpzIiwgIm5zLWh1Z28taW1wOi9Vc2Vycy9idXJzby9MaWJyYXJ5L0NhY2hlcy9odWdvX2NhY2hlL21vZHVsZXMvZmlsZWNhY2hlL21vZHVsZXMvcGtnL21vZC9naXRodWIuY29tL2xibGlpaS9taWxvZG9jc0B2MC4wLjAtMjAyNTA4MTUxNTA2MjUtMjY5MDc3ZTg0MGJjL2Fzc2V0cy9qcy9jb21wb25lbnRzL2FydGljbGUvQ29sbGFwc2UuanMiLCAibnMtaHVnby1pbXA6L1VzZXJzL2J1cnNvL0xpYnJhcnkvQ2FjaGVzL2h1Z29fY2FjaGUvbW9kdWxlcy9maWxlY2FjaGUvbW9kdWxlcy9wa2cvbW9kL2dpdGh1Yi5jb20vbGJsaWlpL21pbG9kb2NzQHYwLjAuMC0yMDI1MDgxNTE1MDYyNS0yNjkwNzdlODQwYmMvYXNzZXRzL2pzL2NvbXBvbmVudHMvY2hhdC9DaGF0VUkuanMiLCAibnMtaHVnby1pbXA6L1VzZXJzL2J1cnNvL0xpYnJhcnkvQ2FjaGVzL2h1Z29fY2FjaGUvbW9kdWxlcy9maWxlY2FjaGUvbW9kdWxlcy9wa2cvbW9kL2dpdGh1Yi5jb20vbGJsaWlpL21pbG9kb2NzQHYwLjAuMC0yMDI1MDgxNTE1MDYyNS0yNjkwNzdlODQwYmMvYXNzZXRzL2pzL2NvbXBvbmVudHMvY2hhdC9DaGF0QVBJLmpzIiwgIm5zLWh1Z28taW1wOi9Vc2Vycy9idXJzby9MaWJyYXJ5L0NhY2hlcy9odWdvX2NhY2hlL21vZHVsZXMvZmlsZWNhY2hlL21vZHVsZXMvcGtnL21vZC9naXRodWIuY29tL2xibGlpaS9taWxvZG9jc0B2MC4wLjAtMjAyNTA4MTUxNTA2MjUtMjY5MDc3ZTg0MGJjL2Fzc2V0cy9qcy9jb21wb25lbnRzL2NoYXQvQ2hhdEhpc3RvcnkuanMiLCAibnMtaHVnby1pbXA6L1VzZXJzL2J1cnNvL0xpYnJhcnkvQ2FjaGVzL2h1Z29fY2FjaGUvbW9kdWxlcy9maWxlY2FjaGUvbW9kdWxlcy9wa2cvbW9kL2dpdGh1Yi5jb20vbGJsaWlpL21pbG9kb2NzQHYwLjAuMC0yMDI1MDgxNTE1MDYyNS0yNjkwNzdlODQwYmMvYXNzZXRzL2pzL2NvbXBvbmVudHMvY2hhdC9DaGF0QnViYmxlcy5qcyIsICJucy1odWdvLWltcDovVXNlcnMvYnVyc28vTGlicmFyeS9DYWNoZXMvaHVnb19jYWNoZS9tb2R1bGVzL2ZpbGVjYWNoZS9tb2R1bGVzL3BrZy9tb2QvZ2l0aHViLmNvbS9sYmxpaWkvbWlsb2RvY3NAdjAuMC4wLTIwMjUwODE1MTUwNjI1LTI2OTA3N2U4NDBiYy9hc3NldHMvanMvY29tcG9uZW50cy9jaGF0L0NoYXRNYW5hZ2VyLmpzIiwgIm5zLWh1Z28taW1wOi9Vc2Vycy9idXJzby9MaWJyYXJ5L0NhY2hlcy9odWdvX2NhY2hlL21vZHVsZXMvZmlsZWNhY2hlL21vZHVsZXMvcGtnL21vZC9naXRodWIuY29tL2xibGlpaS9taWxvZG9jc0B2MC4wLjAtMjAyNTA4MTUxNTA2MjUtMjY5MDc3ZTg0MGJjL2Fzc2V0cy9qcy9jb21wb25lbnRzL2NoYXQvaW5kZXguanMiLCAibnMtaHVnby1pbXA6L1VzZXJzL2J1cnNvL0xpYnJhcnkvQ2FjaGVzL2h1Z29fY2FjaGUvbW9kdWxlcy9maWxlY2FjaGUvbW9kdWxlcy9wa2cvbW9kL2dpdGh1Yi5jb20vbGJsaWlpL21pbG9kb2NzQHYwLjAuMC0yMDI1MDgxNTE1MDYyNS0yNjkwNzdlODQwYmMvYXNzZXRzL2pzL2NvbXBvbmVudHMvYXJ0aWNsZS9IZWFkZXIuanMiLCAibnMtaHVnby1pbXA6L1VzZXJzL2J1cnNvL0xpYnJhcnkvQ2FjaGVzL2h1Z29fY2FjaGUvbW9kdWxlcy9maWxlY2FjaGUvbW9kdWxlcy9wa2cvbW9kL2dpdGh1Yi5jb20vbGJsaWlpL21pbG9kb2NzQHYwLjAuMC0yMDI1MDgxNTE1MDYyNS0yNjkwNzdlODQwYmMvYXNzZXRzL2pzL2NvbXBvbmVudHMvYXJ0aWNsZS9UYWJzLmpzIiwgIm5zLWh1Z28taW1wOi9Vc2Vycy9idXJzby9MaWJyYXJ5L0NhY2hlcy9odWdvX2NhY2hlL21vZHVsZXMvZmlsZWNhY2hlL21vZHVsZXMvcGtnL21vZC9naXRodWIuY29tL2xibGlpaS9taWxvZG9jc0B2MC4wLjAtMjAyNTA4MTUxNTA2MjUtMjY5MDc3ZTg0MGJjL2Fzc2V0cy9qcy9jb21wb25lbnRzL2FydGljbGUvVE9DLmpzIiwgIm5zLWh1Z28taW1wOi9Vc2Vycy9idXJzby9MaWJyYXJ5L0NhY2hlcy9odWdvX2NhY2hlL21vZHVsZXMvZmlsZWNhY2hlL21vZHVsZXMvcGtnL21vZC9naXRodWIuY29tL2xibGlpaS9taWxvZG9jc0B2MC4wLjAtMjAyNTA4MTUxNTA2MjUtMjY5MDc3ZTg0MGJjL2Fzc2V0cy9qcy9jb21wb25lbnRzL2FydGljbGUvVGlsZXMuanMiLCAibnMtaHVnby1pbXA6L1VzZXJzL2J1cnNvL0xpYnJhcnkvQ2FjaGVzL2h1Z29fY2FjaGUvbW9kdWxlcy9maWxlY2FjaGUvbW9kdWxlcy9wa2cvbW9kL2dpdGh1Yi5jb20vbGJsaWlpL21pbG9kb2NzQHYwLjAuMC0yMDI1MDgxNTE1MDYyNS0yNjkwNzdlODQwYmMvYXNzZXRzL2pzL2NvbXBvbmVudHMvYXJ0aWNsZS9TdW1tYXJpemF0aW9uLmpzIiwgIm5zLWh1Z28taW1wOi9Vc2Vycy9idXJzby9MaWJyYXJ5L0NhY2hlcy9odWdvX2NhY2hlL21vZHVsZXMvZmlsZWNhY2hlL21vZHVsZXMvcGtnL21vZC9naXRodWIuY29tL2xibGlpaS9taWxvZG9jc0B2MC4wLjAtMjAyNTA4MTUxNTA2MjUtMjY5MDc3ZTg0MGJjL2Fzc2V0cy9qcy9jb21wb25lbnRzL2FydGljbGUvUmVsYXRlZENvbnRlbnQuanMiLCAibnMtaHVnby1pbXA6L1VzZXJzL2J1cnNvL0xpYnJhcnkvQ2FjaGVzL2h1Z29fY2FjaGUvbW9kdWxlcy9maWxlY2FjaGUvbW9kdWxlcy9wa2cvbW9kL2dpdGh1Yi5jb20vbGJsaWlpL21pbG9kb2NzQHYwLjAuMC0yMDI1MDgxNTE1MDYyNS0yNjkwNzdlODQwYmMvYXNzZXRzL2pzL2NvbXBvbmVudHMvYXJ0aWNsZS9Db3B5UGFnZS5qcyIsICJucy1odWdvLWltcDovVXNlcnMvYnVyc28vTGlicmFyeS9DYWNoZXMvaHVnb19jYWNoZS9tb2R1bGVzL2ZpbGVjYWNoZS9tb2R1bGVzL3BrZy9tb2QvZ2l0aHViLmNvbS9sYmxpaWkvbWlsb2RvY3NAdjAuMC4wLTIwMjUwODE1MTUwNjI1LTI2OTA3N2U4NDBiYy9hc3NldHMvanMvY29tcG9uZW50cy9hcnRpY2xlL01lcm1haWQuanMiLCAibnMtaHVnby1pbXA6L1VzZXJzL2J1cnNvL0xpYnJhcnkvQ2FjaGVzL2h1Z29fY2FjaGUvbW9kdWxlcy9maWxlY2FjaGUvbW9kdWxlcy9wa2cvbW9kL2dpdGh1Yi5jb20vbGJsaWlpL21pbG9kb2NzQHYwLjAuMC0yMDI1MDgxNTE1MDYyNS0yNjkwNzdlODQwYmMvYXNzZXRzL2pzL2NvbXBvbmVudHMvYXJ0aWNsZS9WaWRlby5qcyIsICJucy1odWdvLWltcDovVXNlcnMvYnVyc28vTGlicmFyeS9DYWNoZXMvaHVnb19jYWNoZS9tb2R1bGVzL2ZpbGVjYWNoZS9tb2R1bGVzL3BrZy9tb2QvZ2l0aHViLmNvbS9sYmxpaWkvbWlsb2RvY3NAdjAuMC4wLTIwMjUwODE1MTUwNjI1LTI2OTA3N2U4NDBiYy9hc3NldHMvanMvY29tcG9uZW50cy9ub3RlYm9vay9Ob3RlYm9va0NlbGwuanMiLCAibnMtaHVnby1pbXA6L1VzZXJzL2J1cnNvL0xpYnJhcnkvQ2FjaGVzL2h1Z29fY2FjaGUvbW9kdWxlcy9maWxlY2FjaGUvbW9kdWxlcy9wa2cvbW9kL2dpdGh1Yi5jb20vbGJsaWlpL21pbG9kb2NzQHYwLjAuMC0yMDI1MDgxNTE1MDYyNS0yNjkwNzdlODQwYmMvYXNzZXRzL2pzL2NvbXBvbmVudHMvbm90ZWJvb2svTm90ZWJvb2tOYXZpZ2F0aW9uLmpzIiwgIm5zLWh1Z28taW1wOi9Vc2Vycy9idXJzby9MaWJyYXJ5L0NhY2hlcy9odWdvX2NhY2hlL21vZHVsZXMvZmlsZWNhY2hlL21vZHVsZXMvcGtnL21vZC9naXRodWIuY29tL2xibGlpaS9taWxvZG9jc0B2MC4wLjAtMjAyNTA4MTUxNTA2MjUtMjY5MDc3ZTg0MGJjL2Fzc2V0cy9qcy9jb21wb25lbnRzL25vdGVib29rL05vdGVib29rU3RhdGUuanMiLCAibnMtaHVnby1pbXA6L1VzZXJzL2J1cnNvL0xpYnJhcnkvQ2FjaGVzL2h1Z29fY2FjaGUvbW9kdWxlcy9maWxlY2FjaGUvbW9kdWxlcy9wa2cvbW9kL2dpdGh1Yi5jb20vbGJsaWlpL21pbG9kb2NzQHYwLjAuMC0yMDI1MDgxNTE1MDYyNS0yNjkwNzdlODQwYmMvYXNzZXRzL2pzL2NvbXBvbmVudHMvbm90ZWJvb2svTm90ZWJvb2tWaWV3ZXIuanMiLCAibnMtaHVnby1pbXA6L1VzZXJzL2J1cnNvL0xpYnJhcnkvQ2FjaGVzL2h1Z29fY2FjaGUvbW9kdWxlcy9maWxlY2FjaGUvbW9kdWxlcy9wa2cvbW9kL2dpdGh1Yi5jb20vbGJsaWlpL21pbG9kb2NzQHYwLjAuMC0yMDI1MDgxNTE1MDYyNS0yNjkwNzdlODQwYmMvYXNzZXRzL2pzL2NvbXBvbmVudHMvYXJ0aWNsZS9Ob3RlYm9va1Byb2dyZXNzaXZlUmV2ZWFsLmpzIiwgIm5zLWh1Z28taW1wOi9Vc2Vycy9idXJzby9MaWJyYXJ5L0NhY2hlcy9odWdvX2NhY2hlL21vZHVsZXMvZmlsZWNhY2hlL21vZHVsZXMvcGtnL21vZC9naXRodWIuY29tL2xibGlpaS9taWxvZG9jc0B2MC4wLjAtMjAyNTA4MTUxNTA2MjUtMjY5MDc3ZTg0MGJjL2Fzc2V0cy9qcy9jb21wb25lbnRzL25vdGVib29rL05vdGVib29rTGF1bmNoLmpzIiwgIm5zLWh1Z28taW1wOi9Vc2Vycy9idXJzby9MaWJyYXJ5L0NhY2hlcy9odWdvX2NhY2hlL21vZHVsZXMvZmlsZWNhY2hlL21vZHVsZXMvcGtnL21vZC9naXRodWIuY29tL2xibGlpaS9taWxvZG9jc0B2MC4wLjAtMjAyNTA4MTUxNTA2MjUtMjY5MDc3ZTg0MGJjL2Fzc2V0cy9qcy9jb21wb25lbnRzL3VpL0NvbGxhcHNlLmpzIiwgIm5zLWh1Z28taW1wOi9Vc2Vycy9idXJzby9MaWJyYXJ5L0NhY2hlcy9odWdvX2NhY2hlL21vZHVsZXMvZmlsZWNhY2hlL21vZHVsZXMvcGtnL21vZC9naXRodWIuY29tL2xibGlpaS9taWxvZG9jc0B2MC4wLjAtMjAyNTA4MTUxNTA2MjUtMjY5MDc3ZTg0MGJjL2Fzc2V0cy9qcy9jb21wb25lbnRzL25vdGVib29rL05vdGVib29rQ29sbGFwc2UuanMiLCAibnMtaHVnby1pbXA6L1VzZXJzL2J1cnNvL0xpYnJhcnkvQ2FjaGVzL2h1Z29fY2FjaGUvbW9kdWxlcy9maWxlY2FjaGUvbW9kdWxlcy9wa2cvbW9kL2dpdGh1Yi5jb20vbGJsaWlpL21pbG9kb2NzQHYwLjAuMC0yMDI1MDgxNTE1MDYyNS0yNjkwNzdlODQwYmMvYXNzZXRzL2pzL2NvbXBvbmVudHMvYXJ0aWNsZS9PcGVuQVBJVmlld2VyLmpzIiwgIm5zLWh1Z28taW1wOi9Vc2Vycy9idXJzby9MaWJyYXJ5L0NhY2hlcy9odWdvX2NhY2hlL21vZHVsZXMvZmlsZWNhY2hlL21vZHVsZXMvcGtnL21vZC9naXRodWIuY29tL2xibGlpaS9taWxvZG9jc0B2MC4wLjAtMjAyNTA4MTUxNTA2MjUtMjY5MDc3ZTg0MGJjL2Fzc2V0cy9qcy9jb21wb25lbnRzL29wZW5hcGkvT3BlbkFQSUNvbGxhcHNlLmpzIiwgIm5zLWh1Z28taW1wOi9Vc2Vycy9idXJzby9MaWJyYXJ5L0NhY2hlcy9odWdvX2NhY2hlL21vZHVsZXMvZmlsZWNhY2hlL21vZHVsZXMvcGtnL21vZC9naXRodWIuY29tL2xibGlpaS9taWxvZG9jc0B2MC4wLjAtMjAyNTA4MTUxNTA2MjUtMjY5MDc3ZTg0MGJjL2Fzc2V0cy9qcy9jb21wb25lbnRzL29wZW5hcGkvZW5kcG9pbnQvRW5kcG9pbnREYXRhLmpzIiwgIm5zLWh1Z28taW1wOi9Vc2Vycy9idXJzby9MaWJyYXJ5L0NhY2hlcy9odWdvX2NhY2hlL21vZHVsZXMvZmlsZWNhY2hlL21vZHVsZXMvcGtnL21vZC9naXRodWIuY29tL2xibGlpaS9taWxvZG9jc0B2MC4wLjAtMjAyNTA4MTUxNTA2MjUtMjY5MDc3ZTg0MGJjL2Fzc2V0cy9qcy9jb21wb25lbnRzL29wZW5hcGkvZW5kcG9pbnQvRmlsdGVyTG9naWMuanMiLCAibnMtaHVnby1pbXA6L1VzZXJzL2J1cnNvL0xpYnJhcnkvQ2FjaGVzL2h1Z29fY2FjaGUvbW9kdWxlcy9maWxlY2FjaGUvbW9kdWxlcy9wa2cvbW9kL2dpdGh1Yi5jb20vbGJsaWlpL21pbG9kb2NzQHYwLjAuMC0yMDI1MDgxNTE1MDYyNS0yNjkwNzdlODQwYmMvYXNzZXRzL2pzL2NvbXBvbmVudHMvb3BlbmFwaS9lbmRwb2ludC9GaWx0ZXJVSS5qcyIsICJucy1odWdvLWltcDovVXNlcnMvYnVyc28vTGlicmFyeS9DYWNoZXMvaHVnb19jYWNoZS9tb2R1bGVzL2ZpbGVjYWNoZS9tb2R1bGVzL3BrZy9tb2QvZ2l0aHViLmNvbS9sYmxpaWkvbWlsb2RvY3NAdjAuMC4wLTIwMjUwODE1MTUwNjI1LTI2OTA3N2U4NDBiYy9hc3NldHMvanMvY29tcG9uZW50cy9vcGVuYXBpL2VuZHBvaW50L0ZpbHRlclBlcnNpc3RlbmNlLmpzIiwgIm5zLWh1Z28taW1wOi9Vc2Vycy9idXJzby9MaWJyYXJ5L0NhY2hlcy9odWdvX2NhY2hlL21vZHVsZXMvZmlsZWNhY2hlL21vZHVsZXMvcGtnL21vZC9naXRodWIuY29tL2xibGlpaS9taWxvZG9jc0B2MC4wLjAtMjAyNTA4MTUxNTA2MjUtMjY5MDc3ZTg0MGJjL2Fzc2V0cy9qcy9jb21wb25lbnRzL29wZW5hcGkvRW5kcG9pbnRGaWx0ZXIuanMiLCAibnMtaHVnby1pbXA6L1VzZXJzL2J1cnNvL0xpYnJhcnkvQ2FjaGVzL2h1Z29fY2FjaGUvbW9kdWxlcy9maWxlY2FjaGUvbW9kdWxlcy9wa2cvbW9kL2dpdGh1Yi5jb20vbGJsaWlpL21pbG9kb2NzQHYwLjAuMC0yMDI1MDgxNTE1MDYyNS0yNjkwNzdlODQwYmMvYXNzZXRzL2pzL2NvbXBvbmVudHMvbGF5b3V0L1RoZW1lVG9nZ2xlLmpzIiwgIm5zLWh1Z28taW1wOi9Vc2Vycy9idXJzby9MaWJyYXJ5L0NhY2hlcy9odWdvX2NhY2hlL21vZHVsZXMvZmlsZWNhY2hlL21vZHVsZXMvcGtnL21vZC9naXRodWIuY29tL2xibGlpaS9taWxvZG9jc0B2MC4wLjAtMjAyNTA4MTUxNTA2MjUtMjY5MDc3ZTg0MGJjL2Fzc2V0cy9qcy9jb21wb25lbnRzL2xheW91dC9PcGVuQVBJU2lkZWJhci5qcyIsICJucy1odWdvLWltcDovVXNlcnMvYnVyc28vTGlicmFyeS9DYWNoZXMvaHVnb19jYWNoZS9tb2R1bGVzL2ZpbGVjYWNoZS9tb2R1bGVzL3BrZy9tb2QvZ2l0aHViLmNvbS9sYmxpaWkvbWlsb2RvY3NAdjAuMC4wLTIwMjUwODE1MTUwNjI1LTI2OTA3N2U4NDBiYy9hc3NldHMvanMvY29tcG9uZW50cy9sYXlvdXQvTW9iaWxlTmF2LmpzIiwgIm5zLWh1Z28taW1wOi9Vc2Vycy9idXJzby9MaWJyYXJ5L0NhY2hlcy9odWdvX2NhY2hlL21vZHVsZXMvZmlsZWNhY2hlL21vZHVsZXMvcGtnL21vZC9naXRodWIuY29tL2xibGlpaS9taWxvZG9jc0B2MC4wLjAtMjAyNTA4MTUxNTA2MjUtMjY5MDc3ZTg0MGJjL2Fzc2V0cy9qcy9jb21wb25lbnRzL2xheW91dC9TaWRlYmFyLmpzIiwgIm5zLWh1Z28taW1wOi9Vc2Vycy9idXJzby9MaWJyYXJ5L0NhY2hlcy9odWdvX2NhY2hlL21vZHVsZXMvZmlsZWNhY2hlL21vZHVsZXMvcGtnL21vZC9naXRodWIuY29tL2xibGlpaS9taWxvZG9jc0B2MC4wLjAtMjAyNTA4MTUxNTA2MjUtMjY5MDc3ZTg0MGJjL2Fzc2V0cy9qcy9jb21wb25lbnRzL2xheW91dC9MYW5ndWFnZVN3aXRjaGVyLmpzIiwgIm5zLWh1Z28taW1wOi9Vc2Vycy9idXJzby9MaWJyYXJ5L0NhY2hlcy9odWdvX2NhY2hlL21vZHVsZXMvZmlsZWNhY2hlL21vZHVsZXMvcGtnL21vZC9naXRodWIuY29tL2xibGlpaS9taWxvZG9jc0B2MC4wLjAtMjAyNTA4MTUxNTA2MjUtMjY5MDc3ZTg0MGJjL2Fzc2V0cy9qcy9jb21wb25lbnRzL2xheW91dC9HbG9zc2FyeS5qcyIsICJucy1odWdvLWltcDovVXNlcnMvYnVyc28vTGlicmFyeS9DYWNoZXMvaHVnb19jYWNoZS9tb2R1bGVzL2ZpbGVjYWNoZS9tb2R1bGVzL3BrZy9tb2QvZ2l0aHViLmNvbS9sYmxpaWkvbWlsb2RvY3NAdjAuMC4wLTIwMjUwODE1MTUwNjI1LTI2OTA3N2U4NDBiYy9hc3NldHMvanMvY29tcG9uZW50cy9sYXlvdXQvQ2hhdFRvY1RvZ2dsZS5qcyIsICJucy1odWdvLWltcDovVXNlcnMvYnVyc28vTGlicmFyeS9DYWNoZXMvaHVnb19jYWNoZS9tb2R1bGVzL2ZpbGVjYWNoZS9tb2R1bGVzL3BrZy9tb2QvZ2l0aHViLmNvbS9sYmxpaWkvbWlsb2RvY3NAdjAuMC4wLTIwMjUwODE1MTUwNjI1LTI2OTA3N2U4NDBiYy9hc3NldHMvanMvY29tcG9uZW50cy91aS9Ub2FzdC5qcyIsICJucy1odWdvLWltcDovVXNlcnMvYnVyc28vTGlicmFyeS9DYWNoZXMvaHVnb19jYWNoZS9tb2R1bGVzL2ZpbGVjYWNoZS9tb2R1bGVzL3BrZy9tb2QvZ2l0aHViLmNvbS9sYmxpaWkvbWlsb2RvY3NAdjAuMC4wLTIwMjUwODE1MTUwNjI1LTI2OTA3N2U4NDBiYy9hc3NldHMvanMvY29tcG9uZW50cy9mZWF0dXJlcy9UdXRvcmlhbE1hbmFnZXIuanMiLCAibnMtaHVnby1pbXA6L1VzZXJzL2J1cnNvL0xpYnJhcnkvQ2FjaGVzL2h1Z29fY2FjaGUvbW9kdWxlcy9maWxlY2FjaGUvbW9kdWxlcy9wa2cvbW9kL2dpdGh1Yi5jb20vbGJsaWlpL21pbG9kb2NzQHYwLjAuMC0yMDI1MDgxNTE1MDYyNS0yNjkwNzdlODQwYmMvYXNzZXRzL2pzL2NvbXBvbmVudHMvZmVhdHVyZXMvUGVyZm9ybWFuY2VPcHRpbWl6ZXIuanMiLCAibnMtaHVnby1pbXA6L1VzZXJzL2J1cnNvL0xpYnJhcnkvQ2FjaGVzL2h1Z29fY2FjaGUvbW9kdWxlcy9maWxlY2FjaGUvbW9kdWxlcy9wa2cvbW9kL2dpdGh1Yi5jb20vbGJsaWlpL21pbG9kb2NzQHYwLjAuMC0yMDI1MDgxNTE1MDYyNS0yNjkwNzdlODQwYmMvYXNzZXRzL2pzL2NvbXBvbmVudHMvaW5kZXguanMiLCAibnMtaHVnby1pbXA6L1VzZXJzL2J1cnNvL0xpYnJhcnkvQ2FjaGVzL2h1Z29fY2FjaGUvbW9kdWxlcy9maWxlY2FjaGUvbW9kdWxlcy9wa2cvbW9kL2dpdGh1Yi5jb20vbGJsaWlpL21pbG9kb2NzQHYwLjAuMC0yMDI1MDgxNTE1MDYyNS0yNjkwNzdlODQwYmMvYXNzZXRzL2pzL2NvcmUvQ29tcG9uZW50TWFuYWdlci5qcyIsICJucy1odWdvLWltcDovVXNlcnMvYnVyc28vTGlicmFyeS9DYWNoZXMvaHVnb19jYWNoZS9tb2R1bGVzL2ZpbGVjYWNoZS9tb2R1bGVzL3BrZy9tb2QvZ2l0aHViLmNvbS9sYmxpaWkvbWlsb2RvY3NAdjAuMC4wLTIwMjUwODE1MTUwNjI1LTI2OTA3N2U4NDBiYy9hc3NldHMvanMvY29yZS9NaWxvQ29yZS5qcyIsICI8c3RkaW4+IiwgIm5zLWh1Z28taW1wOi9Vc2Vycy9idXJzby9MaWJyYXJ5L0NhY2hlcy9odWdvX2NhY2hlL21vZHVsZXMvZmlsZWNhY2hlL21vZHVsZXMvcGtnL21vZC9naXRodWIuY29tL2xibGlpaS9taWxvZG9jc0B2MC4wLjAtMjAyNTA4MTUxNTA2MjUtMjY5MDc3ZTg0MGJjL2Fzc2V0cy9qcy91dGlscy9Mb2dnaW5nQ29uZmlnLmpzIiwgIm5zLWh1Z28taW1wOi9Vc2Vycy9idXJzby9MaWJyYXJ5L0NhY2hlcy9odWdvX2NhY2hlL21vZHVsZXMvZmlsZWNhY2hlL21vZHVsZXMvcGtnL21vZC9naXRodWIuY29tL2xibGlpaS9taWxvZG9jc0B2MC4wLjAtMjAyNTA4MTUxNTA2MjUtMjY5MDc3ZTg0MGJjL2Fzc2V0cy9qcy9pbml0L0Vycm9yR3VhcmRzLmpzIiwgIm5zLWh1Z28taW1wOi9Vc2Vycy9idXJzby9MaWJyYXJ5L0NhY2hlcy9odWdvX2NhY2hlL21vZHVsZXMvZmlsZWNhY2hlL21vZHVsZXMvcGtnL21vZC9naXRodWIuY29tL2xibGlpaS9taWxvZG9jc0B2MC4wLjAtMjAyNTA4MTUxNTA2MjUtMjY5MDc3ZTg0MGJjL2Fzc2V0cy9qcy91aS9HbG9iYWxFbmhhbmNlbWVudHMuanMiLCAibnMtaHVnby1pbXA6L1VzZXJzL2J1cnNvL0xpYnJhcnkvQ2FjaGVzL2h1Z29fY2FjaGUvbW9kdWxlcy9maWxlY2FjaGUvbW9kdWxlcy9wa2cvbW9kL2dpdGh1Yi5jb20vbGJsaWlpL21pbG9kb2NzQHYwLjAuMC0yMDI1MDgxNTE1MDYyNS0yNjkwNzdlODQwYmMvYXNzZXRzL2pzL25hdi9TdGF0aWNOYXZpZ2F0aW9uLmpzIiwgIm5zLWh1Z28taW1wOi9Vc2Vycy9idXJzby9MaWJyYXJ5L0NhY2hlcy9odWdvX2NhY2hlL21vZHVsZXMvZmlsZWNhY2hlL21vZHVsZXMvcGtnL21vZC9naXRodWIuY29tL2xibGlpaS9taWxvZG9jc0B2MC4wLjAtMjAyNTA4MTUxNTA2MjUtMjY5MDc3ZTg0MGJjL2Fzc2V0cy9qcy9kZWJ1Zy9EZXZUb29scy5qcyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiLyoqXG4gKiBDZW50cmFsaXplZCBsb2dnaW5nIHV0aWxpdHkgZm9yIE1pbG9Eb2NzXG4gKiBQcm92aWRlcyBjb25maWd1cmFibGUgbG9nIGxldmVscyBhbmQgcmVkdWNlcyBjb25zb2xlIG5vaXNlXG4gKi9cblxuLy8gTG9nIGxldmVscyBpbiBvcmRlciBvZiBzZXZlcml0eVxuY29uc3QgTE9HX0xFVkVMUyA9IHtcbiAgRVJST1I6IDAsXG4gIFdBUk46IDEsXG4gIElORk86IDIsXG4gIERFQlVHOiAzLFxuICBUUkFDRTogNFxufTtcblxuY2xhc3MgTG9nZ2VyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5jdXJyZW50TGV2ZWwgPSB0aGlzLmdldExvZ0xldmVsKCk7XG4gICAgdGhpcy5wcmVmaXggPSAnW01pbG9Eb2NzXSc7XG4gICAgdGhpcy5jb2xvcnMgPSB7XG4gICAgICBFUlJPUjogJyNmZjVmNTYnLFxuICAgICAgV0FSTjogJyNmZmJkMmUnLCBcbiAgICAgIElORk86ICcjNGVjZGM0JyxcbiAgICAgIERFQlVHOiAnIzc5YzBmZicsXG4gICAgICBUUkFDRTogJyM3YzNhZWQnXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmUgY3VycmVudCBsb2cgbGV2ZWwgYmFzZWQgb24gZW52aXJvbm1lbnRcbiAgICovXG4gIGdldExvZ0xldmVsKCkge1xuICAgIC8vIENoZWNrIGZvciBleHBsaWNpdCBsb2cgbGV2ZWwgc2V0dGluZ1xuICAgIGlmICh3aW5kb3cuTWlsb0RvY3NMb2dMZXZlbCkge1xuICAgICAgcmV0dXJuIExPR19MRVZFTFNbd2luZG93Lk1pbG9Eb2NzTG9nTGV2ZWwudG9VcHBlckNhc2UoKV0gPz8gTE9HX0xFVkVMUy5JTkZPO1xuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBkZWJ1ZyBtb2RlIHNldHRpbmdzXG4gICAgaWYgKHdpbmRvdy5IdWdvRW52aXJvbm1lbnQ/LmRlYnVnKSB7XG4gICAgICByZXR1cm4gTE9HX0xFVkVMUy5ERUJVRztcbiAgICB9XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgbG9jYWxob3N0IChkZXZlbG9wbWVudClcbiAgICBpZiAod2luZG93LmxvY2F0aW9uLmhvc3RuYW1lID09PSAnbG9jYWxob3N0JyB8fCB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgPT09ICcxMjcuMC4wLjEnKSB7XG4gICAgICByZXR1cm4gTE9HX0xFVkVMUy5JTkZPO1xuICAgIH1cbiAgICBcbiAgICAvLyBQcm9kdWN0aW9uIC0gb25seSBlcnJvcnMgYW5kIHdhcm5pbmdzXG4gICAgcmV0dXJuIExPR19MRVZFTFMuV0FSTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIGxvZyBsZXZlbCBzaG91bGQgYmUgb3V0cHV0XG4gICAqL1xuICBzaG91bGRMb2cobGV2ZWwpIHtcbiAgICByZXR1cm4gTE9HX0xFVkVMU1tsZXZlbF0gPD0gdGhpcy5jdXJyZW50TGV2ZWw7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IGxvZyBtZXNzYWdlIHdpdGggY29uc2lzdGVudCBzdHlsaW5nXG4gICAqL1xuICBmb3JtYXRNZXNzYWdlKGxldmVsLCBjb21wb25lbnQsIG1lc3NhZ2UsIC4uLmFyZ3MpIHtcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZygpO1xuICAgIGNvbnN0IGNvbXBvbmVudE5hbWUgPSBjb21wb25lbnQgPyBgWyR7Y29tcG9uZW50fV1gIDogJyc7XG4gICAgY29uc3QgY29sb3IgPSB0aGlzLmNvbG9yc1tsZXZlbF07XG4gICAgXG4gICAgcmV0dXJuIFtcbiAgICAgIGAlYyR7dGhpcy5wcmVmaXh9JWMgJHtjb21wb25lbnROYW1lfSAlYyR7bWVzc2FnZX1gLFxuICAgICAgYGNvbG9yOiAke2NvbG9yfTsgZm9udC13ZWlnaHQ6IGJvbGQ7YCxcbiAgICAgIGBjb2xvcjogIzY2NjsgZm9udC1zdHlsZTogaXRhbGljO2AsXG4gICAgICBgY29sb3I6IGluaGVyaXQ7YCxcbiAgICAgIC4uLmFyZ3NcbiAgICBdO1xuICB9XG5cbiAgLyoqXG4gICAqIExvZyBtZXRob2RzIGZvciBkaWZmZXJlbnQgbGV2ZWxzXG4gICAqL1xuICBlcnJvcihjb21wb25lbnQsIG1lc3NhZ2UsIC4uLmFyZ3MpIHtcbiAgICBpZiAodGhpcy5zaG91bGRMb2coJ0VSUk9SJykpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoLi4udGhpcy5mb3JtYXRNZXNzYWdlKCdFUlJPUicsIGNvbXBvbmVudCwgbWVzc2FnZSwgLi4uYXJncykpO1xuICAgIH1cbiAgfVxuXG4gIHdhcm4oY29tcG9uZW50LCBtZXNzYWdlLCAuLi5hcmdzKSB7XG4gICAgaWYgKHRoaXMuc2hvdWxkTG9nKCdXQVJOJykpIHtcbiAgICAgIGNvbnNvbGUud2FybiguLi50aGlzLmZvcm1hdE1lc3NhZ2UoJ1dBUk4nLCBjb21wb25lbnQsIG1lc3NhZ2UsIC4uLmFyZ3MpKTtcbiAgICB9XG4gIH1cblxuICBpbmZvKGNvbXBvbmVudCwgbWVzc2FnZSwgLi4uYXJncykge1xuICAgIGlmICh0aGlzLnNob3VsZExvZygnSU5GTycpKSB7XG4gICAgICBjb25zb2xlLmxvZyguLi50aGlzLmZvcm1hdE1lc3NhZ2UoJ0lORk8nLCBjb21wb25lbnQsIG1lc3NhZ2UsIC4uLmFyZ3MpKTtcbiAgICB9XG4gIH1cblxuICBkZWJ1Zyhjb21wb25lbnQsIG1lc3NhZ2UsIC4uLmFyZ3MpIHtcbiAgICBpZiAodGhpcy5zaG91bGRMb2coJ0RFQlVHJykpIHtcbiAgICAgIGNvbnNvbGUubG9nKC4uLnRoaXMuZm9ybWF0TWVzc2FnZSgnREVCVUcnLCBjb21wb25lbnQsIG1lc3NhZ2UsIC4uLmFyZ3MpKTtcbiAgICB9XG4gIH1cblxuICB0cmFjZShjb21wb25lbnQsIG1lc3NhZ2UsIC4uLmFyZ3MpIHtcbiAgICBpZiAodGhpcy5zaG91bGRMb2coJ1RSQUNFJykpIHtcbiAgICAgIGNvbnNvbGUubG9nKC4uLnRoaXMuZm9ybWF0TWVzc2FnZSgnVFJBQ0UnLCBjb21wb25lbnQsIG1lc3NhZ2UsIC4uLmFyZ3MpKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ29tcG9uZW50LXNwZWNpZmljIGxvZ2dlcnNcbiAgICovXG4gIGNvbXBvbmVudChjb21wb25lbnROYW1lKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVycm9yOiAobWVzc2FnZSwgLi4uYXJncykgPT4gdGhpcy5lcnJvcihjb21wb25lbnROYW1lLCBtZXNzYWdlLCAuLi5hcmdzKSxcbiAgICAgIHdhcm46IChtZXNzYWdlLCAuLi5hcmdzKSA9PiB0aGlzLndhcm4oY29tcG9uZW50TmFtZSwgbWVzc2FnZSwgLi4uYXJncyksXG4gICAgICBpbmZvOiAobWVzc2FnZSwgLi4uYXJncykgPT4gdGhpcy5pbmZvKGNvbXBvbmVudE5hbWUsIG1lc3NhZ2UsIC4uLmFyZ3MpLFxuICAgICAgZGVidWc6IChtZXNzYWdlLCAuLi5hcmdzKSA9PiB0aGlzLmRlYnVnKGNvbXBvbmVudE5hbWUsIG1lc3NhZ2UsIC4uLmFyZ3MpLFxuICAgICAgdHJhY2U6IChtZXNzYWdlLCAuLi5hcmdzKSA9PiB0aGlzLnRyYWNlKGNvbXBvbmVudE5hbWUsIG1lc3NhZ2UsIC4uLmFyZ3MpXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtYW5jZSBsb2dnaW5nIGhlbHBlclxuICAgKi9cbiAgcGVyZm9ybWFuY2UobWV0cmljLCB2YWx1ZSwgY29tcG9uZW50ID0gJ1BlcmZvcm1hbmNlJykge1xuICAgIGlmICh0aGlzLnNob3VsZExvZygnREVCVUcnKSkge1xuICAgICAgY29uc29sZS5sb2coLi4udGhpcy5mb3JtYXRNZXNzYWdlKCdERUJVRycsIGNvbXBvbmVudCwgYCR7bWV0cmljfTogJHt2YWx1ZX1gKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEV2ZW50IGxvZ2dpbmcgaGVscGVyXG4gICAqL1xuICBldmVudChldmVudE5hbWUsIGRhdGEsIGNvbXBvbmVudCA9ICdFdmVudEJ1cycpIHtcbiAgICBpZiAodGhpcy5zaG91bGRMb2coJ1RSQUNFJykpIHtcbiAgICAgIGNvbnNvbGUubG9nKC4uLnRoaXMuZm9ybWF0TWVzc2FnZSgnVFJBQ0UnLCBjb21wb25lbnQsIGBFdmVudDogJHtldmVudE5hbWV9YCwgZGF0YSkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTdWNjZXNzIGxvZ2dpbmcgd2l0aCBlbW9qaSAob25seSBmb3IgaW1wb3J0YW50IHN1Y2Nlc3NlcylcbiAgICovXG4gIHN1Y2Nlc3MoY29tcG9uZW50LCBtZXNzYWdlLCAuLi5hcmdzKSB7XG4gICAgaWYgKHRoaXMuc2hvdWxkTG9nKCdJTkZPJykpIHtcbiAgICAgIGNvbnNvbGUubG9nKC4uLnRoaXMuZm9ybWF0TWVzc2FnZSgnSU5GTycsIGNvbXBvbmVudCwgYFx1MjcwNSAke21lc3NhZ2V9YCwgLi4uYXJncykpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgbG9nIGxldmVsIGF0IHJ1bnRpbWVcbiAgICovXG4gIHNldExvZ0xldmVsKGxldmVsKSB7XG4gICAgY29uc3QgbmV3TGV2ZWwgPSB0eXBlb2YgbGV2ZWwgPT09ICdzdHJpbmcnID8gbGV2ZWwudG9VcHBlckNhc2UoKSA6IGxldmVsO1xuICAgIGlmIChMT0dfTEVWRUxTW25ld0xldmVsXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLmN1cnJlbnRMZXZlbCA9IExPR19MRVZFTFNbbmV3TGV2ZWxdO1xuICAgICAgdGhpcy5pbmZvKCdMb2dnZXInLCBgTG9nIGxldmVsIGNoYW5nZWQgdG8gJHtuZXdMZXZlbH1gKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy53YXJuKCdMb2dnZXInLCBgSW52YWxpZCBsb2cgbGV2ZWw6ICR7bGV2ZWx9YCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjdXJyZW50IGxvZyBsZXZlbCBuYW1lXG4gICAqL1xuICBnZXRDdXJyZW50TGV2ZWwoKSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKExPR19MRVZFTFMpLmZpbmQoa2V5ID0+IExPR19MRVZFTFNba2V5XSA9PT0gdGhpcy5jdXJyZW50TGV2ZWwpO1xuICB9XG59XG5cbi8vIENyZWF0ZSBnbG9iYWwgaW5zdGFuY2VcbmV4cG9ydCBjb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKCk7XG5cbi8vIEdsb2JhbCB1dGlsaXRpZXMgZm9yIGRlYnVnZ2luZ1xuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gIHdpbmRvdy5NaWxvTG9nZ2VyID0ge1xuICAgIHNldExldmVsOiAobGV2ZWwpID0+IGxvZ2dlci5zZXRMb2dMZXZlbChsZXZlbCksXG4gICAgZ2V0TGV2ZWw6ICgpID0+IGxvZ2dlci5nZXRDdXJyZW50TGV2ZWwoKSxcbiAgICBsZXZlbHM6IE9iamVjdC5rZXlzKExPR19MRVZFTFMpXG4gIH07XG59IiwgIi8qKlxuICogTW9kZXJuIEZlYXR1cmUgRGV0ZWN0aW9uICYgUHJvZ3Jlc3NpdmUgRW5oYW5jZW1lbnRcbiAqIERldGVjdHMgY3V0dGluZy1lZGdlIGJyb3dzZXIgQVBJcyBhbmQgcHJvdmlkZXMgc2FmZSBmYWxsYmFja3NcbiAqL1xuXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuL0xvZ2dlci5qcyc7XG5cbmNvbnN0IGxvZyA9IGxvZ2dlci5jb21wb25lbnQoJ0ZlYXR1cmVEZXRlY3Rpb24nKTtcblxuLyoqXG4gKiBDb21wcmVoZW5zaXZlIGZlYXR1cmUgZGV0ZWN0aW9uIGZvciBtb2Rlcm4gdmFuaWxsYSBKUyBBUElzXG4gKi9cbmV4cG9ydCBjb25zdCBtb2Rlcm5GZWF0dXJlcyA9IHtcbiAgLy8gT2JzZXJ2ZXIgQVBJc1xuICBpbnRlcnNlY3Rpb25PYnNlcnZlcjogJ0ludGVyc2VjdGlvbk9ic2VydmVyJyBpbiB3aW5kb3csXG4gIG11dGF0aW9uT2JzZXJ2ZXI6ICdNdXRhdGlvbk9ic2VydmVyJyBpbiB3aW5kb3csXG4gIHJlc2l6ZU9ic2VydmVyOiAnUmVzaXplT2JzZXJ2ZXInIGluIHdpbmRvdyxcbiAgcGVyZm9ybWFuY2VPYnNlcnZlcjogJ1BlcmZvcm1hbmNlT2JzZXJ2ZXInIGluIHdpbmRvdyxcbiAgXG4gIC8vIFBlcmZvcm1hbmNlIEFQSXNcbiAgcmVxdWVzdElkbGVDYWxsYmFjazogJ3JlcXVlc3RJZGxlQ2FsbGJhY2snIGluIHdpbmRvdyxcbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lOiAncmVxdWVzdEFuaW1hdGlvbkZyYW1lJyBpbiB3aW5kb3csXG4gIFxuICAvLyBNb2Rlcm4gSlMgQVBJc1xuICBzdHJ1Y3R1cmVkQ2xvbmU6ICdzdHJ1Y3R1cmVkQ2xvbmUnIGluIHdpbmRvdyxcbiAgXG4gIC8vIENTUyBGZWF0dXJlc1xuICBjc3NIYXM6ICgoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBDU1Muc3VwcG9ydHMoJ3NlbGVjdG9yKDpoYXMocCkpJyk7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9KSgpLFxuICBcbiAgLy8gRm9ybSBBUElzXG4gIGVsZW1lbnRJbnRlcm5hbHM6ICdFbGVtZW50SW50ZXJuYWxzJyBpbiB3aW5kb3csXG4gIGN1c3RvbUVsZW1lbnRzOiAnY3VzdG9tRWxlbWVudHMnIGluIHdpbmRvdyxcbiAgXG4gIC8vIEV4cGVyaW1lbnRhbCBBUElzXG4gIG5hdmlnYXRpb25BUEk6ICduYXZpZ2F0aW9uJyBpbiB3aW5kb3csXG4gIFxuICAvLyBQZXJmb3JtYW5jZSBGZWF0dXJlc1xuICBtZW1vcnk6ICdtZW1vcnknIGluIHBlcmZvcm1hbmNlLFxuICBcbiAgLy8gVG91Y2gvSW50ZXJhY3Rpb25cbiAgdG91Y2hFdmVudHM6ICdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdyxcbiAgcG9pbnRlckV2ZW50czogJ1BvaW50ZXJFdmVudCcgaW4gd2luZG93LFxufTtcblxuLyoqXG4gKiBFeGVjdXRlIG1vZGVybiBpbXBsZW1lbnRhdGlvbiB3aXRoIGF1dG9tYXRpYyBmYWxsYmFja1xuICogQHBhcmFtIHtzdHJpbmd9IGZlYXR1cmUgLSBGZWF0dXJlIG5hbWUgZnJvbSBtb2Rlcm5GZWF0dXJlc1xuICogQHBhcmFtIHtGdW5jdGlvbn0gbW9kZXJuSW1wbCAtIE1vZGVybiBpbXBsZW1lbnRhdGlvbiBmdW5jdGlvblxuICogQHBhcmFtIHtGdW5jdGlvbn0gZmFsbGJhY2sgLSBGYWxsYmFjayBpbXBsZW1lbnRhdGlvbiBmdW5jdGlvblxuICogQHJldHVybnMgeyp9IFJlc3VsdCBmcm9tIG1vZGVybiBvciBmYWxsYmFjayBpbXBsZW1lbnRhdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gd2l0aEZhbGxiYWNrKGZlYXR1cmUsIG1vZGVybkltcGwsIGZhbGxiYWNrKSB7XG4gIGlmIChtb2Rlcm5GZWF0dXJlc1tmZWF0dXJlXSkge1xuICAgIHRyeSB7XG4gICAgICBsb2cudHJhY2UoYFVzaW5nIG1vZGVybiAke2ZlYXR1cmV9IGltcGxlbWVudGF0aW9uYCk7XG4gICAgICByZXR1cm4gbW9kZXJuSW1wbCgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2cud2FybihgTW9kZXJuICR7ZmVhdHVyZX0gZmFpbGVkLCBmYWxsaW5nIGJhY2s6YCwgZXJyb3IpO1xuICAgICAgcmV0dXJuIGZhbGxiYWNrKCk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGxvZy5kZWJ1ZyhgJHtmZWF0dXJlfSBub3Qgc3VwcG9ydGVkLCB1c2luZyBmYWxsYmFja2ApO1xuICAgIHJldHVybiBmYWxsYmFjaygpO1xuICB9XG59XG5cbi8qKlxuICogRW5oYW5jZWQgcmVxdWVzdElkbGVDYWxsYmFjayB3aXRoIHRpbWVvdXQgYW5kIGZhbGxiYWNrXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayAtIEZ1bmN0aW9uIHRvIGV4ZWN1dGUgZHVyaW5nIGlkbGUgdGltZVxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBPcHRpb25zIGluY2x1ZGluZyB0aW1lb3V0XG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXF1ZXN0IElEIGZvciBjYW5jZWxsYXRpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlcXVlc3RJZGxlVGltZShjYWxsYmFjaywgb3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IHsgdGltZW91dCA9IDUwMDAsIHByaW9yaXR5ID0gJ25vcm1hbCcgfSA9IG9wdGlvbnM7XG4gIFxuICByZXR1cm4gd2l0aEZhbGxiYWNrKFxuICAgICdyZXF1ZXN0SWRsZUNhbGxiYWNrJyxcbiAgICAoKSA9PiB7XG4gICAgICBsb2cudHJhY2UoJ1NjaGVkdWxpbmcgdGFzayBmb3IgaWRsZSB0aW1lJyk7XG4gICAgICByZXR1cm4gcmVxdWVzdElkbGVDYWxsYmFjayhjYWxsYmFjaywgeyB0aW1lb3V0IH0pO1xuICAgIH0sXG4gICAgKCkgPT4ge1xuICAgICAgLy8gRmFsbGJhY2sgZm9yIFNhZmFyaSBhbmQgb2xkZXIgYnJvd3NlcnNcbiAgICAgIGNvbnN0IGRlbGF5ID0gcHJpb3JpdHkgPT09ICdoaWdoJyA/IDE2IDogcHJpb3JpdHkgPT09ICdsb3cnID8gMTAwIDogNTA7XG4gICAgICBsb2cudHJhY2UoYEZhbGxiYWNrOiBzY2hlZHVsaW5nIHdpdGggJHtkZWxheX1tcyBkZWxheWApO1xuICAgICAgcmV0dXJuIHNldFRpbWVvdXQoY2FsbGJhY2ssIGRlbGF5KTtcbiAgICB9XG4gICk7XG59XG5cbi8qKlxuICogRW5oYW5jZWQgc3RydWN0dXJlZCBjbG9uZSB3aXRoIGZhbGxiYWNrIGFuZCBET00gZWxlbWVudCBoYW5kbGluZ1xuICogQHBhcmFtIHsqfSBvYmogLSBPYmplY3QgdG8gY2xvbmVcbiAqIEByZXR1cm5zIHsqfSBEZWVwIGNsb25lIG9mIHRoZSBvYmplY3RcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZXBDbG9uZShvYmopIHtcbiAgLy8gSGFuZGxlIHByaW1pdGl2ZXMgYW5kIG51bGwvdW5kZWZpbmVkXG4gIGlmIChvYmogPT09IG51bGwgfHwgdHlwZW9mIG9iaiAhPT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gb2JqO1xuICB9XG5cbiAgLy8gRXhwbGljaXRseSBhdm9pZCBjbG9uaW5nIEFib3J0Q29udHJvbGxlci9BYm9ydFNpZ25hbCB3aGljaCBhcmUgbm90IGNsb25lYWJsZVxuICBpZiAodHlwZW9mIEFib3J0Q29udHJvbGxlciAhPT0gJ3VuZGVmaW5lZCcgJiYgb2JqIGluc3RhbmNlb2YgQWJvcnRDb250cm9sbGVyKSB7XG4gICAgcmV0dXJuIG9iajtcbiAgfVxuICBpZiAodHlwZW9mIEFib3J0U2lnbmFsICE9PSAndW5kZWZpbmVkJyAmJiBvYmogaW5zdGFuY2VvZiBBYm9ydFNpZ25hbCkge1xuICAgIHJldHVybiBvYmo7XG4gIH1cblxuICAvLyBIYW5kbGUgRE9NIGVsZW1lbnRzIC0gZG9uJ3QgY2xvbmUgdGhlbSwganVzdCByZXR1cm4gcmVmZXJlbmNlXG4gIGlmIChvYmogaW5zdGFuY2VvZiBFbGVtZW50IHx8IG9iaiBpbnN0YW5jZW9mIE5vZGUpIHtcbiAgICBsb2cudHJhY2UoJ1ByZXNlcnZpbmcgRE9NIGVsZW1lbnQgcmVmZXJlbmNlIGluc3RlYWQgb2YgY2xvbmluZycpO1xuICAgIHJldHVybiBvYmo7XG4gIH1cblxuICAvLyBIYW5kbGUgYXJyYXlzXG4gIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHtcbiAgICByZXR1cm4gb2JqLm1hcChpdGVtID0+IGRlZXBDbG9uZShpdGVtKSk7XG4gIH1cblxuICAvLyBIYW5kbGUgRGF0ZSBvYmplY3RzXG4gIGlmIChvYmogaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKG9iai5nZXRUaW1lKCkpO1xuICB9XG5cbiAgLy8gSGFuZGxlIFJlZ0V4cCBvYmplY3RzXG4gIGlmIChvYmogaW5zdGFuY2VvZiBSZWdFeHApIHtcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChvYmopO1xuICB9XG5cbiAgLy8gSGFuZGxlIG9iamVjdHMgd2l0aCBwb3RlbnRpYWwgRE9NIGVsZW1lbnRzXG4gIGlmICh0eXBlb2Ygb2JqID09PSAnb2JqZWN0Jykge1xuICAgIC8vIENoZWNrIGlmIG9iamVjdCBjb250YWlucyBET00gZWxlbWVudHNcbiAgICBjb25zdCBoYXNET01FbGVtZW50cyA9IE9iamVjdC52YWx1ZXMob2JqKS5zb21lKHZhbHVlID0+IFxuICAgICAgdmFsdWUgaW5zdGFuY2VvZiBFbGVtZW50IHx8IHZhbHVlIGluc3RhbmNlb2YgTm9kZVxuICAgICk7XG5cbiAgICBpZiAoaGFzRE9NRWxlbWVudHMpIHtcbiAgICAgIC8vIFNtYXJ0IGNsb25lOiBjbG9uZSBwcmltaXRpdmUgdmFsdWVzLCBwcmVzZXJ2ZSBET00gZWxlbWVudCByZWZlcmVuY2VzXG4gICAgICBjb25zdCBjbG9uZWQgPSB7fTtcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKG9iaikpIHtcbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRWxlbWVudCB8fCB2YWx1ZSBpbnN0YW5jZW9mIE5vZGUpIHtcbiAgICAgICAgICBjbG9uZWRba2V5XSA9IHZhbHVlOyAvLyBQcmVzZXJ2ZSBET00gZWxlbWVudCByZWZlcmVuY2VcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjbG9uZWRba2V5XSA9IGRlZXBDbG9uZSh2YWx1ZSk7IC8vIFJlY3Vyc2l2ZWx5IGNsb25lIG90aGVyIHZhbHVlc1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gY2xvbmVkO1xuICAgIH1cblxuICAgIC8vIFRyeSBtb2Rlcm4gc3RydWN0dXJlZENsb25lIGZvciBjb21wbGV4IG9iamVjdHMgd2l0aG91dCBET00gZWxlbWVudHNcbiAgICAgIHJldHVybiB3aXRoRmFsbGJhY2soXG4gICAgICAnc3RydWN0dXJlZENsb25lJyxcbiAgICAgICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4gc3RydWN0dXJlZENsb25lKG9iaik7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgbG9nLnRyYWNlKCdzdHJ1Y3R1cmVkQ2xvbmUgZmFpbGVkLCB1c2luZyBtYW51YWwgY2xvbmU6JywgZXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAoKSA9PiB7XG4gICAgICAgIC8vIE1hbnVhbCBkZWVwIGNsb25lIGZhbGxiYWNrXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gRmlyc3QgdHJ5IEpTT04gKGZhc3QgYnV0IGxpbWl0ZWQpXG4gICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2JqKSk7XG4gICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgIC8vIE1hbnVhbCBvYmplY3QgY2xvbmluZyBmb3IgY29tcGxleCBjYXNlc1xuICAgICAgICAgIGNvbnN0IGNsb25lZCA9IHt9O1xuICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKG9iaikpIHtcbiAgICAgICAgICAgIGNsb25lZFtrZXldID0gZGVlcENsb25lKHZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGNsb25lZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG4gIH1cblxuICByZXR1cm4gb2JqO1xufVxuXG4vKipcbiAqIExvZyBmZWF0dXJlIHN1cHBvcnQgc3RhdHVzIC0gdXNlZnVsIGZvciBkZWJ1Z2dpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxvZ0ZlYXR1cmVTdXBwb3J0KCkge1xuICBjb25zdCBzdXBwb3J0ZWQgPSBPYmplY3QuZW50cmllcyhtb2Rlcm5GZWF0dXJlcylcbiAgICAuZmlsdGVyKChbXywgaXNTdXBwb3J0ZWRdKSA9PiBpc1N1cHBvcnRlZClcbiAgICAubWFwKChbZmVhdHVyZV0pID0+IGZlYXR1cmUpO1xuICAgIFxuICBjb25zdCB1bnN1cHBvcnRlZCA9IE9iamVjdC5lbnRyaWVzKG1vZGVybkZlYXR1cmVzKVxuICAgIC5maWx0ZXIoKFtfLCBpc1N1cHBvcnRlZF0pID0+ICFpc1N1cHBvcnRlZClcbiAgICAubWFwKChbZmVhdHVyZV0pID0+IGZlYXR1cmUpO1xuICBcbiAgbG9nLmluZm8oYE1vZGVybiBmZWF0dXJlcyBzdXBwb3J0ZWQ6ICR7c3VwcG9ydGVkLmxlbmd0aH0vJHtPYmplY3Qua2V5cyhtb2Rlcm5GZWF0dXJlcykubGVuZ3RofWApO1xuICBsb2cuZGVidWcoJ1N1cHBvcnRlZDonLCBzdXBwb3J0ZWQpO1xuICBcbiAgaWYgKHVuc3VwcG9ydGVkLmxlbmd0aCA+IDApIHtcbiAgICBsb2cuZGVidWcoJ1VzaW5nIGZhbGxiYWNrcyBmb3I6JywgdW5zdXBwb3J0ZWQpO1xuICB9XG4gIFxuICByZXR1cm4geyBzdXBwb3J0ZWQsIHVuc3VwcG9ydGVkIH07XG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZSBmZWF0dXJlIGRldGVjdGlvbiBsb2dnaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbml0RmVhdHVyZURldGVjdGlvbigpIHtcbiAgLy8gTG9nIG9uIHN0YXJ0dXAgaW4gZGVidWcgbW9kZVxuICBpZiAod2luZG93LmxvY2F0aW9uLmhvc3RuYW1lID09PSAnbG9jYWxob3N0JyB8fCBcbiAgICAgIG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCkuaGFzKCdkZWJ1ZycpKSB7XG4gICAgbG9nRmVhdHVyZVN1cHBvcnQoKTtcbiAgfVxufSIsICIvKipcbiAqIEV2ZW50QnVzIC0gQ2VudHJhbCBldmVudCBtYW5hZ2VtZW50IHN5c3RlbVxuICogUHJvdmlkZXMgcHViL3N1YiBmdW5jdGlvbmFsaXR5IGZvciBjb21wb25lbnQgY29tbXVuaWNhdGlvblxuICogRW5oYW5jZWQgd2l0aCBtb2Rlcm4gc3RydWN0dXJlZENsb25lIGZvciBzYWZlIGRhdGEgaGFuZGxpbmdcbiAqL1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnLi4vdXRpbHMvTG9nZ2VyLmpzJztcbmltcG9ydCB7IGRlZXBDbG9uZSB9IGZyb20gJy4uL3V0aWxzL0ZlYXR1cmVEZXRlY3Rpb24uanMnO1xuXG5leHBvcnQgY2xhc3MgRXZlbnRCdXMge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmV2ZW50cyA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLmdsb2JhbExpc3RlbmVycyA9IG5ldyBTZXQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdWJzY3JpYmUgdG8gYW4gZXZlbnRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50IC0gRXZlbnQgbmFtZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayAtIEV2ZW50IGhhbmRsZXJcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBFdmVudCBvcHRpb25zXG4gICAqL1xuICBvbihldmVudCwgY2FsbGJhY2ssIG9wdGlvbnMgPSB7fSkge1xuICAgIGlmICghdGhpcy5ldmVudHMuaGFzKGV2ZW50KSkge1xuICAgICAgdGhpcy5ldmVudHMuc2V0KGV2ZW50LCBuZXcgU2V0KCkpO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBsaXN0ZW5lciA9IHtcbiAgICAgIGNhbGxiYWNrLFxuICAgICAgb25jZTogb3B0aW9ucy5vbmNlIHx8IGZhbHNlLFxuICAgICAgY29udGV4dDogb3B0aW9ucy5jb250ZXh0IHx8IG51bGxcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuZXZlbnRzLmdldChldmVudCkuYWRkKGxpc3RlbmVyKTtcbiAgICBcbiAgICAvLyBSZXR1cm4gdW5zdWJzY3JpYmUgZnVuY3Rpb25cbiAgICByZXR1cm4gKCkgPT4gdGhpcy5vZmYoZXZlbnQsIGxpc3RlbmVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdWJzY3JpYmUgdG8gYW4gZXZlbnQgb25jZVxuICAgKi9cbiAgb25jZShldmVudCwgY2FsbGJhY2ssIGNvbnRleHQgPSBudWxsKSB7XG4gICAgcmV0dXJuIHRoaXMub24oZXZlbnQsIGNhbGxiYWNrLCB7IG9uY2U6IHRydWUsIGNvbnRleHQgfSk7XG4gIH1cblxuICAvKipcbiAgICogVW5zdWJzY3JpYmUgZnJvbSBhbiBldmVudFxuICAgKi9cbiAgb2ZmKGV2ZW50LCBsaXN0ZW5lck9yQ2FsbGJhY2spIHtcbiAgICBpZiAoIXRoaXMuZXZlbnRzLmhhcyhldmVudCkpIHJldHVybjtcbiAgICBcbiAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLmV2ZW50cy5nZXQoZXZlbnQpO1xuICAgIFxuICAgIGlmICh0eXBlb2YgbGlzdGVuZXJPckNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAvLyBGaW5kIGxpc3RlbmVyIGJ5IGNhbGxiYWNrXG4gICAgICBmb3IgKGNvbnN0IGxpc3RlbmVyIG9mIGxpc3RlbmVycykge1xuICAgICAgICBpZiAobGlzdGVuZXIuY2FsbGJhY2sgPT09IGxpc3RlbmVyT3JDYWxsYmFjaykge1xuICAgICAgICAgIGxpc3RlbmVycy5kZWxldGUobGlzdGVuZXIpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIERpcmVjdCBsaXN0ZW5lciBvYmplY3RcbiAgICAgIGxpc3RlbmVycy5kZWxldGUobGlzdGVuZXJPckNhbGxiYWNrKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKGxpc3RlbmVycy5zaXplID09PSAwKSB7XG4gICAgICB0aGlzLmV2ZW50cy5kZWxldGUoZXZlbnQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFbWl0IGFuIGV2ZW50IHdpdGggZW5oYW5jZWQgZGF0YSBzYWZldHlcbiAgICogXHVEODNEXHVERTgwIFVzZXMgc3RydWN0dXJlZENsb25lIHRvIHByZXZlbnQgYWNjaWRlbnRhbCBkYXRhIG11dGF0aW9uc1xuICAgKi9cbiAgZW1pdChldmVudCwgZGF0YSA9IG51bGwsIG9wdGlvbnMgPSB7fSkge1xuICAgIGlmICghdGhpcy5ldmVudHMuaGFzKGV2ZW50KSkgcmV0dXJuO1xuICAgIFxuICAgIGNvbnN0IHsgXG4gICAgICBjbG9uZSA9IHRydWUsICAgICAgICAvLyBXaGV0aGVyIHRvIGNsb25lIGRhdGEgZm9yIHNhZmV0eVxuICAgICAgYXN5bmMgPSBmYWxzZSwgICAgICAgLy8gV2hldGhlciB0byBlbWl0IGFzeW5jaHJvbm91c2x5ICBcbiAgICAgIG1heExpc3RlbmVycyA9IDEwMCAgIC8vIFNhZmV0eSBsaW1pdCBmb3IgbGlzdGVuZXJzXG4gICAgfSA9IG9wdGlvbnM7XG4gICAgXG4gICAgY29uc3QgbGlzdGVuZXJzID0gQXJyYXkuZnJvbSh0aGlzLmV2ZW50cy5nZXQoZXZlbnQpKTtcbiAgICBcbiAgICAvLyBTYWZldHkgY2hlY2sgZm9yIHJ1bmF3YXkgZXZlbnQgbGlzdGVuZXJzXG4gICAgaWYgKGxpc3RlbmVycy5sZW5ndGggPiBtYXhMaXN0ZW5lcnMpIHtcbiAgICAgIGxvZ2dlci53YXJuKCdFdmVudEJ1cycsIGBFdmVudCBcIiR7ZXZlbnR9XCIgaGFzICR7bGlzdGVuZXJzLmxlbmd0aH0gbGlzdGVuZXJzIChtYXg6ICR7bWF4TGlzdGVuZXJzfSlgKTtcbiAgICB9XG4gICAgXG4gICAgLy8gXHVEODNEXHVERTgwIENsb25lIGRhdGEgdG8gcHJldmVudCBtdXRhdGlvbnMgYmV0d2VlbiBsaXN0ZW5lcnNcbiAgICAvLyBTa2lwIGNsb25pbmcgaWYgZGF0YSBjb250YWlucyBET00gZWxlbWVudHMgKHRoZXkgc2hvdWxkIGJlIHBhc3NlZCBieSByZWZlcmVuY2UpXG4gICAgY29uc3Qgc2hvdWxkQ2xvbmUgPSBjbG9uZSAmJiBkYXRhICYmIHR5cGVvZiBkYXRhID09PSAnb2JqZWN0JyAmJiAhdGhpcy5jb250YWluc0RPTUVsZW1lbnRzKGRhdGEpO1xuICAgIGNvbnN0IHNhZmVEYXRhID0gc2hvdWxkQ2xvbmUgPyBkZWVwQ2xvbmUoZGF0YSkgOiBkYXRhO1xuICAgIFxuICAgIGNvbnN0IGV4ZWN1dGVMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHRzID0gW107XG4gICAgICBcbiAgICAgIGZvciAoY29uc3QgbGlzdGVuZXIgb2YgbGlzdGVuZXJzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gR2l2ZSBlYWNoIGxpc3RlbmVyIGluZGVwZW5kZW50IGRhdGEgY29weSBpZiBjbG9uaW5nIGVuYWJsZWRcbiAgICAgICAgICAvLyBPbmx5IGNsb25lIGlmIHdlIHN1Y2Nlc3NmdWxseSBjbG9uZWQgdGhlIGluaXRpYWwgZGF0YVxuICAgICAgICAgIGNvbnN0IGxpc3RlbmVyRGF0YSA9IHNob3VsZENsb25lID8gZGVlcENsb25lKHNhZmVEYXRhKSA6IHNhZmVEYXRhO1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGxpc3RlbmVyLmNvbnRleHQgXG4gICAgICAgICAgICA/IGxpc3RlbmVyLmNhbGxiYWNrLmNhbGwobGlzdGVuZXIuY29udGV4dCwgbGlzdGVuZXJEYXRhLCBldmVudClcbiAgICAgICAgICAgIDogbGlzdGVuZXIuY2FsbGJhY2sobGlzdGVuZXJEYXRhLCBldmVudCk7XG4gICAgICAgICAgXG4gICAgICAgICAgcmVzdWx0cy5wdXNoKHJlc3VsdCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gUmVtb3ZlIG9uY2UgbGlzdGVuZXJzXG4gICAgICAgICAgaWYgKGxpc3RlbmVyLm9uY2UpIHtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLmdldChldmVudCkuZGVsZXRlKGxpc3RlbmVyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgbG9nZ2VyLmVycm9yKCdFdmVudEJ1cycsIGBFcnJvciBpbiBldmVudCBsaXN0ZW5lciBmb3IgXCIke2V2ZW50fVwiOmAsIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9O1xuICAgIFxuICAgIC8vIEdsb2JhbCBldmVudCBsb2dnaW5nIGZvciB0cmFjZSBtb2RlIG9ubHlcbiAgICBpZiAoY2xvbmUgJiYgIXNob3VsZENsb25lKSB7XG4gICAgICBsb2dnZXIuZXZlbnQoZXZlbnQsICdkYXRhIChET00gZWxlbWVudHMgcHJlc2VydmVkLCBub3QgY2xvbmVkKScpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsb2dnZXIuZXZlbnQoZXZlbnQsIHNob3VsZENsb25lID8gJ2RhdGEgKGNsb25lZCknIDogZGF0YSk7XG4gICAgfVxuICAgIFxuICAgIC8vIEV4ZWN1dGUgc3luY2hyb25vdXNseSBvciBhc3luY2hyb25vdXNseVxuICAgIGlmIChhc3luYykge1xuICAgICAgLy8gVXNlIG1pY3JvdGFzayBmb3IgYXN5bmMgZW1pc3Npb25cbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKGV4ZWN1dGVMaXN0ZW5lcnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZXhlY3V0ZUxpc3RlbmVycygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYWxsIGxpc3RlbmVycyBmb3IgYW4gZXZlbnQgb3IgYWxsIGV2ZW50c1xuICAgKi9cbiAgY2xlYXIoZXZlbnQgPSBudWxsKSB7XG4gICAgaWYgKGV2ZW50KSB7XG4gICAgICB0aGlzLmV2ZW50cy5kZWxldGUoZXZlbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmV2ZW50cy5jbGVhcigpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgbGlzdCBvZiBhbGwgZXZlbnRzXG4gICAqL1xuICBnZXRFdmVudHMoKSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5ldmVudHMua2V5cygpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgbGlzdGVuZXIgY291bnQgZm9yIGFuIGV2ZW50XG4gICAqL1xuICBsaXN0ZW5lckNvdW50KGV2ZW50KSB7XG4gICAgcmV0dXJuIHRoaXMuZXZlbnRzLmhhcyhldmVudCkgPyB0aGlzLmV2ZW50cy5nZXQoZXZlbnQpLnNpemUgOiAwO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1RDgzRFx1REU4MCBFbWl0IGV2ZW50IHdpdGhvdXQgY2xvbmluZyAoZm9yIHBlcmZvcm1hbmNlLWNyaXRpY2FsIGNhc2VzKVxuICAgKi9cbiAgZW1pdEZhc3QoZXZlbnQsIGRhdGEgPSBudWxsKSB7XG4gICAgcmV0dXJuIHRoaXMuZW1pdChldmVudCwgZGF0YSwgeyBjbG9uZTogZmFsc2UgfSk7XG4gIH1cblxuICAvKipcbiAgICogXHVEODNEXHVERTgwIEVtaXQgZXZlbnQgYXN5bmNocm9ub3VzbHkgKG5vbi1ibG9ja2luZylcbiAgICovXG4gIGVtaXRBc3luYyhldmVudCwgZGF0YSA9IG51bGwsIG9wdGlvbnMgPSB7fSkge1xuICAgIHJldHVybiB0aGlzLmVtaXQoZXZlbnQsIGRhdGEsIHsgLi4ub3B0aW9ucywgYXN5bmM6IHRydWUgfSk7XG4gIH1cblxuICAvKipcbiAgICogXHVEODNEXHVERTgwIEVtaXQgZXZlbnQgd2l0aCBsYXJnZSBkYXRhIHNhZmVseSAob3B0aW1pemVkIGZvciBsYXJnZSBvYmplY3RzKVxuICAgKi9cbiAgZW1pdFNhZmUoZXZlbnQsIGRhdGEgPSBudWxsLCBvcHRpb25zID0ge30pIHtcbiAgICByZXR1cm4gdGhpcy5lbWl0KGV2ZW50LCBkYXRhLCB7IC4uLm9wdGlvbnMsIGNsb25lOiB0cnVlIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGRhdGEgY29udGFpbnMgRE9NIGVsZW1lbnRzIHRoYXQgc2hvdWxkbid0IGJlIGNsb25lZFxuICAgKi9cbiAgY29udGFpbnNET01FbGVtZW50cyhkYXRhKSB7XG4gICAgaWYgKCFkYXRhIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGZhbHNlO1xuICAgIFxuICAgIC8vIERpcmVjdCBET00gZWxlbWVudFxuICAgIGlmIChkYXRhIGluc3RhbmNlb2YgRWxlbWVudCB8fCBkYXRhIGluc3RhbmNlb2YgTm9kZSkgcmV0dXJuIHRydWU7XG4gICAgXG4gICAgLy8gQ2hlY2sgb2JqZWN0IHByb3BlcnRpZXMgZm9yIERPTSBlbGVtZW50c1xuICAgIHJldHVybiBPYmplY3QudmFsdWVzKGRhdGEpLnNvbWUodmFsdWUgPT4ge1xuICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRWxlbWVudCB8fCB2YWx1ZSBpbnN0YW5jZW9mIE5vZGUpIHJldHVybiB0cnVlO1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgIT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGFpbnNET01FbGVtZW50cyh2YWx1ZSk7IC8vIFJlY3Vyc2l2ZSBjaGVja1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFBlcmZvcm1hbmNlIHN0YXRpc3RpY3MgZm9yIGRlYnVnZ2luZ1xuICAgKi9cbiAgZ2V0U3RhdHMoKSB7XG4gICAgY29uc3Qgc3RhdHMgPSB7XG4gICAgICB0b3RhbEV2ZW50czogdGhpcy5ldmVudHMuc2l6ZSxcbiAgICAgIHRvdGFsTGlzdGVuZXJzOiAwLFxuICAgICAgZXZlbnRCcmVha2Rvd246IHt9XG4gICAgfTtcblxuICAgIGZvciAoY29uc3QgW2V2ZW50LCBsaXN0ZW5lcnNdIG9mIHRoaXMuZXZlbnRzKSB7XG4gICAgICBjb25zdCBjb3VudCA9IGxpc3RlbmVycy5zaXplO1xuICAgICAgc3RhdHMudG90YWxMaXN0ZW5lcnMgKz0gY291bnQ7XG4gICAgICBzdGF0cy5ldmVudEJyZWFrZG93bltldmVudF0gPSBjb3VudDtcbiAgICB9XG5cbiAgICByZXR1cm4gc3RhdHM7XG4gIH1cbn1cblxuLy8gQ3JlYXRlIGdsb2JhbCBpbnN0YW5jZVxuZXhwb3J0IGNvbnN0IGV2ZW50QnVzID0gbmV3IEV2ZW50QnVzKCk7IiwgIi8qKlxuICogQmFzZSBDb21wb25lbnQgQ2xhc3NcbiAqIFByb3ZpZGVzIHN0YW5kYXJkaXplZCBjb21wb25lbnQgbGlmZWN5Y2xlIGFuZCBjb21tb24gdXRpbGl0aWVzXG4gKiBBbGwgdGhlbWUgY29tcG9uZW50cyBzaG91bGQgZXh0ZW5kIHRoaXMgYmFzZSBjbGFzc1xuICovXG5cbmltcG9ydCB7IGV2ZW50QnVzIH0gZnJvbSAnLi9FdmVudEJ1cy5qcyc7XG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuLi91dGlscy9Mb2dnZXIuanMnO1xuXG5jb25zdCBsb2cgPSBsb2dnZXIuY29tcG9uZW50KCdDb21wb25lbnQnKTtcblxuLyoqXG4gKiBCYXNlIENvbXBvbmVudCBjbGFzcyB0aGF0IGFsbCBjb21wb25lbnRzIHNob3VsZCBleHRlbmRcbiAqL1xuZXhwb3J0IGNsYXNzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZyA9IHt9KSB7XG4gICAgdGhpcy5uYW1lID0gY29uZmlnLm5hbWUgfHwgdGhpcy5jb25zdHJ1Y3Rvci5uYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgdGhpcy5zZWxlY3RvciA9IGNvbmZpZy5zZWxlY3RvcjtcbiAgICB0aGlzLmVsZW1lbnQgPSBjb25maWcuZWxlbWVudCB8fCAoY29uZmlnLnNlbGVjdG9yID8gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb25maWcuc2VsZWN0b3IpIDogbnVsbCk7XG4gICAgdGhpcy5kZXBlbmRlbmNpZXMgPSBjb25maWcuZGVwZW5kZW5jaWVzIHx8IFtdO1xuICAgIHRoaXMub3B0aW9ucyA9IGNvbmZpZy5vcHRpb25zIHx8IHt9O1xuICAgIHRoaXMuc3RhdGUgPSAndW5pbml0aWFsaXplZCc7XG4gICAgdGhpcy5jaGlsZENvbXBvbmVudHMgPSBuZXcgTWFwKCk7XG4gICAgXG4gICAgLy8gTW9kZXJuIGV2ZW50IG1hbmFnZW1lbnQgd2l0aCBBYm9ydENvbnRyb2xsZXJcbiAgICB0aGlzLmFib3J0Q29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICB0aGlzLnNpZ25hbCA9IHRoaXMuYWJvcnRDb250cm9sbGVyLnNpZ25hbDtcbiAgICBcbiAgICAvLyBTaW5nbGV0b24gYmVoYXZpb3IgbWV0YWRhdGFcbiAgICB0aGlzLmlzU2luZ2xldG9uID0gY29uZmlnLmlzU2luZ2xldG9uICE9PSB1bmRlZmluZWQgPyBjb25maWcuaXNTaW5nbGV0b24gOiB0aGlzLmRldGVjdFNpbmdsZXRvbkJlaGF2aW9yKCk7XG4gICAgdGhpcy5hbGxvd011bHRpcGxlSW5zdGFuY2VzID0gY29uZmlnLmFsbG93TXVsdGlwbGVJbnN0YW5jZXMgfHwgZmFsc2U7XG4gICAgXG4gICAgLy8gQXV0by1nZW5lcmF0ZSB1bmlxdWUgaW5zdGFuY2UgSURcbiAgICB0aGlzLmlkID0gYCR7dGhpcy5uYW1lfS0ke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDUpfWA7XG4gICAgXG4gICAgLy8gQmluZCBjb250ZXh0IGZvciBldmVudCBoYW5kbGVyc1xuICAgIHRoaXMuaGFuZGxlRGVzdHJveSA9IHRoaXMuaGFuZGxlRGVzdHJveS5iaW5kKHRoaXMpO1xuICAgIFxuICAgIC8vIExpc3RlbiBmb3IgZ2xvYmFsIGRlc3RydWN0aW9uIGV2ZW50c1xuICAgIGV2ZW50QnVzLm9uKCdjb21wb25lbnQ6ZGVzdHJveS1hbGwnLCB0aGlzLmhhbmRsZURlc3Ryb3kpO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgdGhlIGNvbXBvbmVudFxuICAgKi9cbiAgYXN5bmMgaW5pdCgpIHtcbiAgICBpZiAodGhpcy5zdGF0ZSAhPT0gJ3VuaW5pdGlhbGl6ZWQnKSB7XG4gICAgICBsb2cud2FybihgQ29tcG9uZW50ICR7dGhpcy5uYW1lfSBhbHJlYWR5IGluaXRpYWxpemVkYCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgdGhpcy5zdGF0ZSA9ICdpbml0aWFsaXppbmcnO1xuICAgICAgXG4gICAgICAvLyBDaGVjayBpZiBlbGVtZW50IGV4aXN0cyAoZm9yIERPTS1kZXBlbmRlbnQgY29tcG9uZW50cylcbiAgICAgIGlmICh0aGlzLnNlbGVjdG9yICYmICF0aGlzLmVsZW1lbnQpIHtcbiAgICAgICAgbG9nLnRyYWNlKGAke3RoaXMubmFtZX06IE5vIGVsZW1lbnRzIGZvdW5kIGZvciBzZWxlY3RvciBcIiR7dGhpcy5zZWxlY3Rvcn1cIiAtIGNvbXBvbmVudCB3aWxsIHJlbWFpbiBpbmFjdGl2ZWApO1xuICAgICAgICB0aGlzLnN0YXRlID0gJ2ZhaWxlZCc7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICAvLyBMb2FkIGRlcGVuZGVuY2llcyBmaXJzdFxuICAgICAgYXdhaXQgdGhpcy5sb2FkRGVwZW5kZW5jaWVzKCk7XG4gICAgICBcbiAgICAgIC8vIFNldHVwIERPTSBlbGVtZW50cyBhbmQgc3RhdGVcbiAgICAgIHRoaXMuc2V0dXBFbGVtZW50cygpO1xuICAgICAgXG4gICAgICAvLyBCaW5kIGV2ZW50c1xuICAgICAgdGhpcy5iaW5kRXZlbnRzKCk7XG4gICAgICBcbiAgICAgIC8vIENhbGwgY3VzdG9tIGluaXRpYWxpemF0aW9uXG4gICAgICBhd2FpdCB0aGlzLm9uSW5pdCgpO1xuICAgICAgXG4gICAgICB0aGlzLnN0YXRlID0gJ3JlYWR5JztcbiAgICAgIFxuICAgICAgLy8gRW1pdCByZWFkeSBldmVudFxuICAgICAgZXZlbnRCdXMuZW1pdChgY29tcG9uZW50OiR7dGhpcy5uYW1lfTpyZWFkeWAsIHRoaXMpO1xuICAgICAgZXZlbnRCdXMuZW1pdCgnY29tcG9uZW50OnJlYWR5JywgeyBjb21wb25lbnQ6IHRoaXMgfSk7XG4gICAgICBcbiAgICAgIGxvZy5kZWJ1ZyhgQ29tcG9uZW50ICR7dGhpcy5uYW1lfSBpbml0aWFsaXplZGApO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nLmVycm9yKGBDb21wb25lbnQgJHt0aGlzLm5hbWV9IGluaXRpYWxpemF0aW9uIGZhaWxlZDpgLCBlcnJvcik7XG4gICAgICB0aGlzLnN0YXRlID0gJ2ZhaWxlZCc7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGV0ZWN0IGlmIHRoaXMgY29tcG9uZW50IHNob3VsZCBiZWhhdmUgYXMgYSBzaW5nbGV0b25cbiAgICovXG4gIGRldGVjdFNpbmdsZXRvbkJlaGF2aW9yKCkge1xuICAgIC8vIElEIHNlbGVjdG9ycyB0eXBpY2FsbHkgaW5kaWNhdGUgc2luZ2xldG9uIGJlaGF2aW9yXG4gICAgaWYgKHRoaXMuc2VsZWN0b3IgJiYgdGhpcy5zZWxlY3Rvci5zdGFydHNXaXRoKCcjJykpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBcbiAgICAvLyBTcGVjaWZpYyBjb21wb25lbnQgcGF0dGVybnMgdGhhdCBzaG91bGQgYmUgc2luZ2xldG9uXG4gICAgY29uc3Qgc2luZ2xldG9uUGF0dGVybnMgPSBbXG4gICAgICAndGhlbWUtdG9nZ2xlJyxcbiAgICAgICduYXZpZ2F0aW9uLXNpZGViYXItbGVmdCcsXG4gICAgICAnbmF2aWdhdGlvbi1tb2JpbGUtdG9nZ2xlJyxcbiAgICAgICdjaGF0LXRvYy10b2dnbGUnLFxuICAgICAgJ3BlcmZvcm1hbmNlLW9wdGltaXplcicsXG4gICAgICAnc2VhcmNoJ1xuICAgIF07XG4gICAgXG4gICAgcmV0dXJuIHNpbmdsZXRvblBhdHRlcm5zLmluY2x1ZGVzKHRoaXMubmFtZSk7XG4gIH1cblxuICAvKipcbiAgICogTG9hZCBjb21wb25lbnQgZGVwZW5kZW5jaWVzXG4gICAqL1xuICBhc3luYyBsb2FkRGVwZW5kZW5jaWVzKCkge1xuICAgIGlmICghdGhpcy5kZXBlbmRlbmNpZXMubGVuZ3RoKSByZXR1cm47XG4gICAgXG4gICAgLy8gSW1wb3J0IENvbXBvbmVudE1hbmFnZXIgaGVyZSB0byBhdm9pZCBjaXJjdWxhciBkZXBlbmRlbmN5XG4gICAgY29uc3QgeyBDb21wb25lbnRNYW5hZ2VyIH0gPSBhd2FpdCBpbXBvcnQoJy4vQ29tcG9uZW50TWFuYWdlci5qcycpO1xuICAgIFxuICAgIGNvbnN0IGxvYWRQcm9taXNlcyA9IHRoaXMuZGVwZW5kZW5jaWVzLm1hcChhc3luYyBkZXAgPT4ge1xuICAgICAgaWYgKHR5cGVvZiBkZXAgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIC8vIExvYWQgYnkgY29tcG9uZW50IG5hbWVcbiAgICAgICAgcmV0dXJuIENvbXBvbmVudE1hbmFnZXIubG9hZChkZXApO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZGVwID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIC8vIExvYWQgYnkgYXN5bmMgZnVuY3Rpb25cbiAgICAgICAgcmV0dXJuIGF3YWl0IGRlcCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRlcDtcbiAgICB9KTtcbiAgICBcbiAgICBhd2FpdCBQcm9taXNlLmFsbChsb2FkUHJvbWlzZXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIERPTSBlbGVtZW50cyAtIG92ZXJyaWRlIGluIHN1YmNsYXNzZXNcbiAgICovXG4gIHNldHVwRWxlbWVudHMoKSB7XG4gICAgLy8gRGVmYXVsdCBpbXBsZW1lbnRhdGlvbiAtIGNhbiBiZSBvdmVycmlkZGVuXG4gICAgaWYgKHRoaXMuZWxlbWVudCkge1xuICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1jb21wb25lbnQnLCB0aGlzLm5hbWUpO1xuICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1jb21wb25lbnQtaWQnLCB0aGlzLmlkKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQmluZCBjb21wb25lbnQgZXZlbnRzIC0gb3ZlcnJpZGUgaW4gc3ViY2xhc3Nlc1xuICAgKi9cbiAgYmluZEV2ZW50cygpIHtcbiAgICAvLyBEZWZhdWx0IGltcGxlbWVudGF0aW9uIC0gY2FuIGJlIG92ZXJyaWRkZW5cbiAgfVxuXG4gIC8qKlxuICAgKiBDdXN0b20gaW5pdGlhbGl6YXRpb24gaG9vayAtIG92ZXJyaWRlIGluIHN1YmNsYXNzZXNcbiAgICovXG4gIGFzeW5jIG9uSW5pdCgpIHtcbiAgICAvLyBEZWZhdWx0IGltcGxlbWVudGF0aW9uIC0gY2FuIGJlIG92ZXJyaWRkZW5cbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gRE9NIFVUSUxJVElFU1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgLyoqXG4gICAqIEZpbmQgbXVsdGlwbGUgZWxlbWVudHMgbWF0Y2hpbmcgdGhlIGNvbXBvbmVudCdzIHNlbGVjdG9yXG4gICAqIFVzZWZ1bCBmb3IgY29tcG9uZW50cyB0aGF0IG5lZWQgdG8gd29yayB3aXRoIG11bHRpcGxlIERPTSBlbGVtZW50c1xuICAgKi9cbiAgZmluZEVsZW1lbnRzKGN1c3RvbVNlbGVjdG9yID0gbnVsbCkge1xuICAgIGNvbnN0IHNlbGVjdG9yID0gY3VzdG9tU2VsZWN0b3IgfHwgdGhpcy5zZWxlY3RvcjtcbiAgICBpZiAoIXNlbGVjdG9yKSByZXR1cm4gW107XG4gICAgXG4gICAgcmV0dXJuIEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmQgZWxlbWVudHMgd2l0aGluIGEgc3BlY2lmaWMgY29udGFpbmVyXG4gICAqL1xuICBmaW5kRWxlbWVudHNJbihjb250YWluZXIsIHNlbGVjdG9yKSB7XG4gICAgaWYgKCFjb250YWluZXIgfHwgIXNlbGVjdG9yKSByZXR1cm4gW107XG4gICAgcmV0dXJuIEFycmF5LmZyb20oY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kIHRoZSBjbG9zZXN0IHBhcmVudCBlbGVtZW50IG1hdGNoaW5nIGEgc2VsZWN0b3JcbiAgICovXG4gIGZpbmRQYXJlbnQoZWxlbWVudCwgc2VsZWN0b3IpIHtcbiAgICBpZiAoIWVsZW1lbnQgfHwgIXNlbGVjdG9yKSByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gZWxlbWVudC5jbG9zZXN0KHNlbGVjdG9yKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhbiBlbGVtZW50IG1hdGNoZXMgdGhlIGNvbXBvbmVudCdzIHNlbGVjdG9yXG4gICAqL1xuICBtYXRjaGVzU2VsZWN0b3IoZWxlbWVudCwgY3VzdG9tU2VsZWN0b3IgPSBudWxsKSB7XG4gICAgaWYgKCFlbGVtZW50KSByZXR1cm4gZmFsc2U7XG4gICAgY29uc3Qgc2VsZWN0b3IgPSBjdXN0b21TZWxlY3RvciB8fCB0aGlzLnNlbGVjdG9yO1xuICAgIHJldHVybiBzZWxlY3RvciA/IGVsZW1lbnQubWF0Y2hlcyhzZWxlY3RvcikgOiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kIGEgY2hpbGQgZWxlbWVudCB3aXRoaW4gdGhlIGNvbXBvbmVudCdzIGVsZW1lbnRcbiAgICovXG4gIGZpbmRDaGlsZChzZWxlY3Rvcikge1xuICAgIGlmICghdGhpcy5lbGVtZW50KSByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmQgbXVsdGlwbGUgY2hpbGQgZWxlbWVudHMgd2l0aGluIHRoZSBjb21wb25lbnQncyBlbGVtZW50XG4gICAqL1xuICBmaW5kQ2hpbGRyZW4oc2VsZWN0b3IpIHtcbiAgICBpZiAoIXRoaXMuZWxlbWVudCkgcmV0dXJuIFtdO1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSk7XG4gIH1cblxuICAvKipcbiAgICogVmFsaWRhdGUgcmVxdWlyZWQgZWxlbWVudHMgZXhpc3RcbiAgICovXG4gIHZhbGlkYXRlRWxlbWVudHMoZWxlbWVudHMgPSB7fSkge1xuICAgIGNvbnN0IG1pc3NpbmcgPSBbXTtcbiAgICBcbiAgICBPYmplY3QuZW50cmllcyhlbGVtZW50cykuZm9yRWFjaCgoW25hbWUsIHNlbGVjdG9yXSkgPT4ge1xuICAgICAgY29uc3QgZWxlbWVudCA9IHR5cGVvZiBzZWxlY3RvciA9PT0gJ3N0cmluZycgXG4gICAgICAgID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcikgXG4gICAgICAgIDogc2VsZWN0b3I7XG4gICAgICAgIFxuICAgICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICAgIG1pc3NpbmcucHVzaChuYW1lKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICBpZiAobWlzc2luZy5sZW5ndGggPiAwKSB7XG4gICAgICBsb2cud2FybihgJHt0aGlzLm5hbWV9OiBNaXNzaW5nIHJlcXVpcmVkIGVsZW1lbnRzOmAsIG1pc3NpbmcpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gRVZFTlQgVVRJTElUSUVTXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuXG5cbiAgLyoqXG4gICAqIFx1RDgzRFx1REU4MCBFbmhhbmNlZCBldmVudCBsaXN0ZW5lciB3aXRoIHJvYnVzdCBjbGVhbnVwIGZvciBuYXZpZ2F0aW9uIHNjZW5hcmlvc1xuICAgKiBcbiAgICogQmVuZWZpdHM6XG4gICAqIC0gRGVmZW5zaXZlIGNsZWFudXAgKGV4cGxpY2l0ICsgQWJvcnRDb250cm9sbGVyKVxuICAgKiAtIE5hdmlnYXRpb24tc2FmZSBldmVudCBiaW5kaW5nXG4gICAqIC0gQmV0dGVyIG1lbW9yeSBtYW5hZ2VtZW50IHdpdGggZXhwbGljaXQgdHJhY2tpbmdcbiAgICogLSBIYW5kbGVzIGVkZ2UgY2FzZXMgaW4gc3RhdGljIGRlcGxveW1lbnRzXG4gICAqIFxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnQgLSBUYXJnZXQgZWxlbWVudFxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnQgLSBFdmVudCBuYW1lXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXIgLSBFdmVudCBoYW5kbGVyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gRXZlbnQgb3B0aW9ucyAocGFzc2l2ZSwgb25jZSwgZXRjLilcbiAgICogQHJldHVybnMge09iamVjdH0gLSBPYmplY3Qgd2l0aCByZW1vdmUoKSBtZXRob2QgZm9yIG1hbnVhbCBjbGVhbnVwXG4gICAqL1xuICBhZGRFdmVudExpc3RlbmVyKGVsZW1lbnQsIGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zID0ge30pIHtcbiAgICBpZiAoIWVsZW1lbnQgfHwgIWV2ZW50IHx8ICFoYW5kbGVyKSByZXR1cm4gbnVsbDtcbiAgICBcbiAgICAvLyBUcmFjayBsaXN0ZW5lcnMgZm9yIGRlZmVuc2l2ZSBjbGVhbnVwXG4gICAgaWYgKCF0aGlzLmV2ZW50TGlzdGVuZXJzKSB7XG4gICAgICB0aGlzLmV2ZW50TGlzdGVuZXJzID0gbmV3IE1hcCgpO1xuICAgIH1cbiAgICBcbiAgICAvLyBDcmVhdGUgdW5pcXVlIGtleSBmb3IgdGhpcyBsaXN0ZW5lclxuICAgIGNvbnN0IGxpc3RlbmVyS2V5ID0gYCR7ZWxlbWVudC50YWdOYW1lfS0ke2VsZW1lbnQuaWQgfHwgZWxlbWVudC5jbGFzc05hbWV9LSR7ZXZlbnR9LSR7RGF0ZS5ub3coKX1gO1xuICAgIFxuICAgIC8vIFN0b3JlIGxpc3RlbmVyIGluZm8gZm9yIGV4cGxpY2l0IGNsZWFudXBcbiAgICBjb25zdCBsaXN0ZW5lckluZm8gPSB7XG4gICAgICBlbGVtZW50LFxuICAgICAgZXZlbnQsXG4gICAgICBoYW5kbGVyLFxuICAgICAgb3B0aW9uczogeyAuLi5vcHRpb25zIH0sXG4gICAgICBzaWduYWw6IHRoaXMuc2lnbmFsXG4gICAgfTtcbiAgICBcbiAgICAvLyBcdUQ4M0RcdUREMjcgREVGRU5TSVZFIENMRUFOVVA6IFJlbW92ZSBhbnkgZXhpc3RpbmcgbGlzdGVuZXJzIG9uIHRoaXMgZWxlbWVudC9ldmVudCBjb21ibyBmaXJzdFxuICAgIHRoaXMucmVtb3ZlRXhpc3RpbmdMaXN0ZW5lcnMoZWxlbWVudCwgZXZlbnQpO1xuICAgIFxuICAgIC8vIEFkZCB0aGUgbmV3IGxpc3RlbmVyIHdpdGggQWJvcnRDb250cm9sbGVyXG4gICAgY29uc3QgcGFzc2l2ZUV2ZW50cyA9IG5ldyBTZXQoWydzY3JvbGwnLCAnd2hlZWwnLCAnbW91c2V3aGVlbCcsICd0b3VjaHN0YXJ0JywgJ3RvdWNobW92ZScsICd0b3VjaGVuZCddKTtcbiAgICBjb25zdCBmaW5hbE9wdGlvbnMgPSB7XG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgLi4uKG9wdGlvbnMucGFzc2l2ZSA9PT0gdW5kZWZpbmVkICYmIHBhc3NpdmVFdmVudHMuaGFzKGV2ZW50KSA/IHsgcGFzc2l2ZTogdHJ1ZSB9IDoge30pLFxuICAgICAgc2lnbmFsOiB0aGlzLnNpZ25hbFxuICAgIH07XG4gICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyLCBmaW5hbE9wdGlvbnMpO1xuICAgIFxuICAgIC8vIFRyYWNrIGZvciBleHBsaWNpdCBjbGVhbnVwIGlmIG5lZWRlZFxuICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMuc2V0KGxpc3RlbmVyS2V5LCBsaXN0ZW5lckluZm8pO1xuICAgIFxuICAgIC8vIE1hcmsgZWxlbWVudCBhcyBoYXZpbmcgbGlzdGVuZXJzIGZyb20gdGhpcyBjb21wb25lbnQgKG9ubHkgZm9yIERPTSBlbGVtZW50cylcbiAgICBpZiAoZWxlbWVudCAmJiBlbGVtZW50LmRhdGFzZXQpIHtcbiAgICAgIGlmICghZWxlbWVudC5kYXRhc2V0LmNvbXBvbmVudExpc3RlbmVycykge1xuICAgICAgICBlbGVtZW50LmRhdGFzZXQuY29tcG9uZW50TGlzdGVuZXJzID0gdGhpcy5pZDtcbiAgICAgIH0gZWxzZSBpZiAoIWVsZW1lbnQuZGF0YXNldC5jb21wb25lbnRMaXN0ZW5lcnMuaW5jbHVkZXModGhpcy5pZCkpIHtcbiAgICAgICAgZWxlbWVudC5kYXRhc2V0LmNvbXBvbmVudExpc3RlbmVycyArPSBgLCR7dGhpcy5pZH1gO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgcmVtb3ZlOiAoKSA9PiB7XG4gICAgICAgIHRoaXMucmVtb3ZlU3BlY2lmaWNMaXN0ZW5lcihsaXN0ZW5lcktleSk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgZXhpc3RpbmcgbGlzdGVuZXJzIG9uIGVsZW1lbnQgdG8gcHJldmVudCBjb25mbGljdHNcbiAgICovXG4gIHJlbW92ZUV4aXN0aW5nTGlzdGVuZXJzKGVsZW1lbnQsIGV2ZW50KSB7XG4gICAgaWYgKCF0aGlzLmV2ZW50TGlzdGVuZXJzKSByZXR1cm47XG4gICAgXG4gICAgLy8gRmluZCBhbmQgcmVtb3ZlIGNvbmZsaWN0aW5nIGxpc3RlbmVyc1xuICAgIGZvciAoY29uc3QgW2tleSwgbGlzdGVuZXJJbmZvXSBvZiB0aGlzLmV2ZW50TGlzdGVuZXJzLmVudHJpZXMoKSkge1xuICAgICAgaWYgKGxpc3RlbmVySW5mby5lbGVtZW50ID09PSBlbGVtZW50ICYmIGxpc3RlbmVySW5mby5ldmVudCA9PT0gZXZlbnQpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVTcGVjaWZpY0xpc3RlbmVyKGtleSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhIHNwZWNpZmljIGxpc3RlbmVyIGJ5IGtleVxuICAgKi9cbiAgcmVtb3ZlU3BlY2lmaWNMaXN0ZW5lcihsaXN0ZW5lcktleSkge1xuICAgIGlmICghdGhpcy5ldmVudExpc3RlbmVycyB8fCAhdGhpcy5ldmVudExpc3RlbmVycy5oYXMobGlzdGVuZXJLZXkpKSByZXR1cm47XG4gICAgXG4gICAgY29uc3QgbGlzdGVuZXJJbmZvID0gdGhpcy5ldmVudExpc3RlbmVycy5nZXQobGlzdGVuZXJLZXkpO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICAvLyBFeHBsaWNpdCByZW1vdmFsICh3b3JrcyBldmVuIGlmIEFib3J0Q29udHJvbGxlciB3YXMgY2FsbGVkKVxuICAgICAgbGlzdGVuZXJJbmZvLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgbGlzdGVuZXJJbmZvLmV2ZW50LCBcbiAgICAgICAgbGlzdGVuZXJJbmZvLmhhbmRsZXIsIFxuICAgICAgICBsaXN0ZW5lckluZm8ub3B0aW9uc1xuICAgICAgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nLnRyYWNlKGBOb24tY3JpdGljYWwgY2xlYW51cCBlcnJvciBmb3IgJHt0aGlzLm5hbWV9OmAsIGVycm9yKTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5ldmVudExpc3RlbmVycy5kZWxldGUobGlzdGVuZXJLZXkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBtdWx0aXBsZSBtb2Rlcm4gZXZlbnQgbGlzdGVuZXJzXG4gICAqL1xuICBhZGRNdWx0aXBsZUV2ZW50TGlzdGVuZXJzKGVsZW1lbnQsIGV2ZW50cywgaGFuZGxlciwgb3B0aW9ucyA9IHt9KSB7XG4gICAgaWYgKCFlbGVtZW50IHx8ICFldmVudHMgfHwgIWhhbmRsZXIpIHJldHVybiBbXTtcbiAgICBcbiAgICBjb25zdCBldmVudExpc3QgPSBBcnJheS5pc0FycmF5KGV2ZW50cykgPyBldmVudHMgOiBbZXZlbnRzXTtcbiAgICByZXR1cm4gZXZlbnRMaXN0Lm1hcChldmVudCA9PiB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoZWxlbWVudCwgZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpKTtcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gUEVSRk9STUFOQ0UgVVRJTElUSUVTXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAvKipcbiAgICogVGhyb3R0bGUgYSBmdW5jdGlvbiBjYWxsXG4gICAqL1xuICB0aHJvdHRsZShmdW5jLCBkZWxheSA9IDI1MCkge1xuICAgIGxldCB0aW1lb3V0SWQ7XG4gICAgbGV0IGxhc3RFeGVjVGltZSA9IDA7XG4gICAgXG4gICAgcmV0dXJuICguLi5hcmdzKSA9PiB7XG4gICAgICBjb25zdCBjdXJyZW50VGltZSA9IERhdGUubm93KCk7XG4gICAgICBcbiAgICAgIGlmIChjdXJyZW50VGltZSAtIGxhc3RFeGVjVGltZSA+IGRlbGF5KSB7XG4gICAgICAgIGZ1bmMuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgIGxhc3RFeGVjVGltZSA9IGN1cnJlbnRUaW1lO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICAgIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGZ1bmMuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgICAgbGFzdEV4ZWNUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgfSwgZGVsYXkgLSAoY3VycmVudFRpbWUgLSBsYXN0RXhlY1RpbWUpKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIERlYm91bmNlIGEgZnVuY3Rpb24gY2FsbFxuICAgKi9cbiAgZGVib3VuY2UoZnVuYywgZGVsYXkgPSAyNTApIHtcbiAgICBsZXQgdGltZW91dElkO1xuICAgIFxuICAgIHJldHVybiAoLi4uYXJncykgPT4ge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IGZ1bmMuYXBwbHkodGhpcywgYXJncyksIGRlbGF5KTtcbiAgICB9O1xuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBDT01QT05FTlQgTUFOQUdFTUVOVFxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIGNoaWxkIGNvbXBvbmVudFxuICAgKi9cbiAgYWRkQ2hpbGQobmFtZSwgY29tcG9uZW50KSB7XG4gICAgdGhpcy5jaGlsZENvbXBvbmVudHMuc2V0KG5hbWUsIGNvbXBvbmVudCk7XG4gICAgcmV0dXJuIGNvbXBvbmVudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY2hpbGQgY29tcG9uZW50XG4gICAqL1xuICBnZXRDaGlsZChuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMuY2hpbGRDb21wb25lbnRzLmdldChuYW1lKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgY29tcG9uZW50IG9wdGlvbnNcbiAgICovXG4gIHVwZGF0ZU9wdGlvbnMobmV3T3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IHsgLi4udGhpcy5vcHRpb25zLCAuLi5uZXdPcHRpb25zIH07XG4gICAgdGhpcy5lbWl0KCdvcHRpb25zLXVwZGF0ZWQnLCB7IG9wdGlvbnM6IHRoaXMub3B0aW9ucyB9KTtcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gQ1NTIElOVEVHUkFUSU9OIChQVVJFIFZBTklMTEEgSlMpXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAvKipcbiAgICogU2V0IENTUyBjdXN0b20gcHJvcGVydHkgb24gdGhlIGNvbXBvbmVudCBlbGVtZW50XG4gICAqIEVuYWJsZXMgZHluYW1pYyBzdHlsaW5nIGZyb20gSmF2YVNjcmlwdFxuICAgKi9cbiAgc2V0Q1NTUHJvcGVydHkocHJvcGVydHksIHZhbHVlKSB7XG4gICAgaWYgKCF0aGlzLmVsZW1lbnQpIHJldHVybjtcbiAgICBcbiAgICBjb25zdCBjc3NQcm9wZXJ0eSA9IHByb3BlcnR5LnN0YXJ0c1dpdGgoJy0tJykgPyBwcm9wZXJ0eSA6IGAtLWNvbXBvbmVudC0ke3Byb3BlcnR5fWA7XG4gICAgdGhpcy5lbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KGNzc1Byb3BlcnR5LCB2YWx1ZSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IENTUyBjdXN0b20gcHJvcGVydHkgdmFsdWVcbiAgICovXG4gIGdldENTU1Byb3BlcnR5KHByb3BlcnR5KSB7XG4gICAgaWYgKCF0aGlzLmVsZW1lbnQpIHJldHVybiBudWxsO1xuICAgIFxuICAgIGNvbnN0IGNzc1Byb3BlcnR5ID0gcHJvcGVydHkuc3RhcnRzV2l0aCgnLS0nKSA/IHByb3BlcnR5IDogYC0tY29tcG9uZW50LSR7cHJvcGVydHl9YDtcbiAgICByZXR1cm4gZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmVsZW1lbnQpLmdldFByb3BlcnR5VmFsdWUoY3NzUHJvcGVydHkpLnRyaW0oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgY29tcG9uZW50IHN0YXRlIGZvciBDU1MgOmhhcygpIHBhdHRlcm5zXG4gICAqIExldmVyYWdlcyB5b3VyIGV4aXN0aW5nIDpoYXMoKSBDU1MgYXV0b21hdGljYWxseVxuICAgKi9cbiAgdXBkYXRlQ29tcG9uZW50U3RhdGUoc3RhdGUpIHtcbiAgICBpZiAoIXRoaXMuZWxlbWVudCkgcmV0dXJuO1xuICAgIFxuICAgIHRoaXMuZWxlbWVudC5kYXRhc2V0LmNvbXBvbmVudFN0YXRlID0gc3RhdGU7XG4gICAgdGhpcy5zZXRDU1NQcm9wZXJ0eSgnc3RhdGUnLCBzdGF0ZSk7XG4gICAgdGhpcy5lbWl0KCdzdGF0ZS1jaGFuZ2VkJywgeyBzdGF0ZSB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgY29tcG9uZW50IGxvYWRpbmcgc3RhdGUgd2l0aCBDU1NcbiAgICovXG4gIHNldExvYWRpbmdTdGF0ZShpc0xvYWRpbmcpIHtcbiAgICB0aGlzLnVwZGF0ZUNvbXBvbmVudFN0YXRlKGlzTG9hZGluZyA/ICdsb2FkaW5nJyA6ICdyZWFkeScpO1xuICB9XG5cbiAgLyoqXG4gICAqIEVuYWJsZS9kaXNhYmxlIGNvbXBvbmVudCB3aXRoIENTUyBmZWVkYmFja1xuICAgKi9cbiAgc2V0RW5hYmxlZChpc0VuYWJsZWQpIHtcbiAgICB0aGlzLnVwZGF0ZUNvbXBvbmVudFN0YXRlKGlzRW5hYmxlZCA/ICdyZWFkeScgOiAnZGlzYWJsZWQnKTtcbiAgICBpZiAodGhpcy5lbGVtZW50KSB7XG4gICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWRpc2FibGVkJywgKCFpc0VuYWJsZWQpLnRvU3RyaW5nKCkpO1xuICAgIH1cbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gRVZFTlQgU1lTVEVNXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAvKipcbiAgICogRW1pdCBjb21wb25lbnQtc3BlY2lmaWMgZXZlbnRcbiAgICovXG4gIGVtaXQoZXZlbnQsIGRhdGEgPSBudWxsKSB7XG4gICAgY29uc3QgZXZlbnROYW1lID0gYGNvbXBvbmVudDoke3RoaXMubmFtZX06JHtldmVudH1gO1xuICAgIHJldHVybiBldmVudEJ1cy5lbWl0KGV2ZW50TmFtZSwgeyAuLi5kYXRhLCBjb21wb25lbnQ6IHRoaXMgfSk7XG4gIH1cblxuICAvKipcbiAgICogTGlzdGVuIHRvIGNvbXBvbmVudCBldmVudHNcbiAgICovXG4gIG9uKGV2ZW50LCBoYW5kbGVyLCBjb250ZXh0ID0gbnVsbCkge1xuICAgIGNvbnN0IGV2ZW50TmFtZSA9IGV2ZW50LmluY2x1ZGVzKCc6JykgPyBldmVudCA6IGBjb21wb25lbnQ6JHt0aGlzLm5hbWV9OiR7ZXZlbnR9YDtcbiAgICByZXR1cm4gZXZlbnRCdXMub24oZXZlbnROYW1lLCBoYW5kbGVyLCB7IGNvbnRleHQgfSk7XG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIFNUQVRFIE1BTkFHRU1FTlRcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIC8qKlxuICAgKiBTZXQgY29sbGFwc2Ugc3RhdGUgdXNpbmcgdGhlIHVuaWZpZWQgc3RhdGUgc3lzdGVtXG4gICAqL1xuICBzZXRDb2xsYXBzZVN0YXRlKHN0YXRlKSB7XG4gICAgY29uc3QgdmFsaWRTdGF0ZXMgPSBbJ2NvbGxhcHNlZCcsICdleHBhbmRlZCcsICd0cmFuc2l0aW9uaW5nJ107XG4gICAgaWYgKCF2YWxpZFN0YXRlcy5pbmNsdWRlcyhzdGF0ZSkpIHtcbiAgICAgIGxvZy53YXJuKGBJbnZhbGlkIGNvbGxhcHNlIHN0YXRlIFwiJHtzdGF0ZX1cIiBmb3IgY29tcG9uZW50ICR7dGhpcy5uYW1lfWApO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIGRhdGEgYXR0cmlidXRlIGZvciBDU1NcbiAgICBpZiAodGhpcy5lbGVtZW50KSB7XG4gICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLWNvbGxhcHNlLXN0YXRlJywgc3RhdGUpO1xuICAgICAgXG4gICAgICAvLyBBbHNvIHVwZGF0ZSBhcmlhLWV4cGFuZGVkIGZvciBhY2Nlc3NpYmlsaXR5XG4gICAgICBpZiAoc3RhdGUgPT09ICdleHBhbmRlZCcpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICd0cnVlJyk7XG4gICAgICB9IGVsc2UgaWYgKHN0YXRlID09PSAnY29sbGFwc2VkJykge1xuICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRW1pdCBzdGF0ZSBjaGFuZ2UgZXZlbnRcbiAgICB0aGlzLmVtaXQoJ2NvbGxhcHNlLXN0YXRlLWNoYW5nZWQnLCB7IFxuICAgICAgcHJldmlvdXM6IHRoaXMuZWxlbWVudD8uZ2V0QXR0cmlidXRlKCdkYXRhLWNvbGxhcHNlLXN0YXRlJyksXG4gICAgICBjdXJyZW50OiBzdGF0ZSBcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB2aXNpYmlsaXR5IHN0YXRlIHVzaW5nIHRoZSB1bmlmaWVkIHN0YXRlIHN5c3RlbVxuICAgKi9cbiAgc2V0VmlzaWJpbGl0eVN0YXRlKHN0YXRlKSB7XG4gICAgY29uc3QgdmFsaWRTdGF0ZXMgPSBbJ2hpZGRlbicsICd2aXNpYmxlJywgJ3BhcnRpYWwnXTtcbiAgICBpZiAoIXZhbGlkU3RhdGVzLmluY2x1ZGVzKHN0YXRlKSkge1xuICAgICAgbG9nLndhcm4oYEludmFsaWQgdmlzaWJpbGl0eSBzdGF0ZSBcIiR7c3RhdGV9XCIgZm9yIGNvbXBvbmVudCAke3RoaXMubmFtZX1gKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmVsZW1lbnQpIHtcbiAgICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdmlzaWJpbGl0eS1zdGF0ZScsIHN0YXRlKTtcbiAgICB9XG5cbiAgICB0aGlzLmVtaXQoJ3Zpc2liaWxpdHktc3RhdGUtY2hhbmdlZCcsIHsgXG4gICAgICBwcmV2aW91czogdGhpcy5lbGVtZW50Py5nZXRBdHRyaWJ1dGUoJ2RhdGEtdmlzaWJpbGl0eS1zdGF0ZScpLFxuICAgICAgY3VycmVudDogc3RhdGUgXG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHBhbmQgYSBjb2xsYXBzaWJsZSBlbGVtZW50IHdpdGggcHJvcGVyIHN0YXRlIG1hbmFnZW1lbnRcbiAgICovXG4gIGFzeW5jIGV4cGFuZChvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCB7XG4gICAgICBzaG93Rmlyc3QgPSBmYWxzZSxcbiAgICAgIGR1cmF0aW9uID0gMzAwXG4gICAgfSA9IG9wdGlvbnM7XG5cbiAgICB0aGlzLnNldENvbGxhcHNlU3RhdGUoJ3RyYW5zaXRpb25pbmcnKTtcblxuICAgIGlmIChzaG93Rmlyc3QpIHtcbiAgICAgIHRoaXMuc2V0VmlzaWJpbGl0eVN0YXRlKCd2aXNpYmxlJyk7XG4gICAgICB0aGlzLmVsZW1lbnQ/Lm9mZnNldEhlaWdodDtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5zZXRDb2xsYXBzZVN0YXRlKCdleHBhbmRlZCcpO1xuICAgICAgICBpZiAoIXNob3dGaXJzdCkge1xuICAgICAgICAgIHRoaXMuc2V0VmlzaWJpbGl0eVN0YXRlKCd2aXNpYmxlJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfSwgMTApO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbGxhcHNlIGEgY29sbGFwc2libGUgZWxlbWVudCB3aXRoIHByb3BlciBzdGF0ZSBtYW5hZ2VtZW50XG4gICAqL1xuICBhc3luYyBjb2xsYXBzZShvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCB7XG4gICAgICBoaWRlQWZ0ZXIgPSBmYWxzZSxcbiAgICAgIGR1cmF0aW9uID0gbnVsbFxuICAgIH0gPSBvcHRpb25zO1xuXG4gICAgdGhpcy5zZXRDb2xsYXBzZVN0YXRlKCd0cmFuc2l0aW9uaW5nJyk7XG5cbiAgICBjb25zdCBhbmltYXRpb25EdXJhdGlvbiA9IGR1cmF0aW9uIHx8IHBhcnNlRmxvYXQodGhpcy5nZXRDU1NQcm9wZXJ0eSgnLS1jb2xsYXBzZS10aW1pbmcnKSB8fCAnMC4zJykgKiAxMDAwO1xuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMuc2V0Q29sbGFwc2VTdGF0ZSgnY29sbGFwc2VkJyk7XG4gICAgICAgIGlmIChoaWRlQWZ0ZXIpIHtcbiAgICAgICAgICB0aGlzLnNldFZpc2liaWxpdHlTdGF0ZSgnaGlkZGVuJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfSwgYW5pbWF0aW9uRHVyYXRpb24pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFRvZ2dsZSBjb2xsYXBzZSBzdGF0ZVxuICAgKi9cbiAgYXN5bmMgdG9nZ2xlKG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGlzRXhwYW5kZWQgPSB0aGlzLmVsZW1lbnQ/LmdldEF0dHJpYnV0ZSgnZGF0YS1jb2xsYXBzZS1zdGF0ZScpID09PSAnZXhwYW5kZWQnO1xuICAgIFxuICAgIGlmIChpc0V4cGFuZGVkKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb2xsYXBzZShvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuZXhwYW5kKG9wdGlvbnMpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDb25maWd1cmUgY29sbGFwc2UgYmVoYXZpb3IgYnkgc2V0dGluZyBDU1MgY3VzdG9tIHByb3BlcnRpZXNcbiAgICogVGhpcyBhbGxvd3MgY29tcG9uZW50cyB0byBjdXN0b21pemUgaG93IGNvbXBvbmVudC1zdGF0ZXMuY3NzIGhhbmRsZXMgdGhlbVxuICAgKi9cbiAgY29uZmlndXJlQ29sbGFwc2VCZWhhdmlvcihjb25maWcgPSB7fSkge1xuICAgIGNvbnN0IHtcbiAgICAgIGhlaWdodENvbGxhcHNlZCA9ICcwJyxcbiAgICAgIGhlaWdodEV4cGFuZGVkID0gJ25vbmUnLFxuICAgICAgb3BhY2l0eUNvbGxhcHNlZCA9ICcxJyxcbiAgICAgIG9wYWNpdHlFeHBhbmRlZCA9ICcxJyxcbiAgICAgIG92ZXJmbG93Q29sbGFwc2VkID0gJ2hpZGRlbicsXG4gICAgICBvdmVyZmxvd0V4cGFuZGVkID0gJ3Zpc2libGUnLFxuICAgICAgcGFkZGluZ0NvbGxhcHNlZCA9ICcwJyxcbiAgICAgIHBhZGRpbmdFeHBhbmRlZCA9ICdpbml0aWFsJyxcbiAgICAgIHRpbWluZyA9ICcwLjNzJyxcbiAgICAgIGVhc2luZyA9ICdlYXNlJyxcbiAgICAgIGRpc3BsYXkgPSAnYmxvY2snXG4gICAgfSA9IGNvbmZpZztcblxuICAgIC8vIFNldCBDU1MgY3VzdG9tIHByb3BlcnRpZXMgdGhhdCBjb21wb25lbnQtc3RhdGVzLmNzcyB3aWxsIHVzZVxuICAgIGNvbnN0IHByb3BlcnRpZXMgPSB7XG4gICAgICAnLS1jb2xsYXBzZS1oZWlnaHQtY29sbGFwc2VkJzogaGVpZ2h0Q29sbGFwc2VkLFxuICAgICAgJy0tY29sbGFwc2UtaGVpZ2h0LWV4cGFuZGVkJzogaGVpZ2h0RXhwYW5kZWQsXG4gICAgICAnLS1jb2xsYXBzZS1vcGFjaXR5LWNvbGxhcHNlZCc6IG9wYWNpdHlDb2xsYXBzZWQsXG4gICAgICAnLS1jb2xsYXBzZS1vcGFjaXR5LWV4cGFuZGVkJzogb3BhY2l0eUV4cGFuZGVkLFxuICAgICAgJy0tY29sbGFwc2Utb3ZlcmZsb3ctY29sbGFwc2VkJzogb3ZlcmZsb3dDb2xsYXBzZWQsXG4gICAgICAnLS1jb2xsYXBzZS1vdmVyZmxvdy1leHBhbmRlZCc6IG92ZXJmbG93RXhwYW5kZWQsXG4gICAgICAnLS1jb2xsYXBzZS1wYWRkaW5nLWNvbGxhcHNlZCc6IHBhZGRpbmdDb2xsYXBzZWQsXG4gICAgICAnLS1jb2xsYXBzZS1wYWRkaW5nLWV4cGFuZGVkJzogcGFkZGluZ0V4cGFuZGVkLFxuICAgICAgJy0tY29sbGFwc2UtdGltaW5nJzogdGltaW5nLFxuICAgICAgJy0tY29sbGFwc2UtZWFzaW5nJzogZWFzaW5nLFxuICAgICAgJy0tY29tcG9uZW50LWRpc3BsYXknOiBkaXNwbGF5XG4gICAgfTtcblxuICAgIE9iamVjdC5lbnRyaWVzKHByb3BlcnRpZXMpLmZvckVhY2goKFtwcm9wZXJ0eSwgdmFsdWVdKSA9PiB7XG4gICAgICB0aGlzLnNldENTU1Byb3BlcnR5KHByb3BlcnR5LCB2YWx1ZSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBjb21wb25lbnQgaXMgcmVhZHlcbiAgICovXG4gIGlzUmVhZHkoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUgPT09ICdyZWFkeSc7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgY29tcG9uZW50IGhhcyBmYWlsZWRcbiAgICovXG4gIGhhc0ZhaWxlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZSA9PT0gJ2ZhaWxlZCc7XG4gIH1cblxuICAvKipcbiAgICogRW5oYW5jZWQgaGVhbHRoIGNoZWNrIGZvciBuYXZpZ2F0aW9uIHNjZW5hcmlvc1xuICAgKiBPdmVycmlkZSB0aGlzIG1ldGhvZCBpbiBzdWJjbGFzc2VzIHRvIHByb3ZpZGUgY29tcG9uZW50LXNwZWNpZmljIGhlYWx0aCBjaGVja3NcbiAgICovXG4gIGlzSGVhbHRoeSgpIHtcbiAgICAvLyBCYXNpYyBoZWFsdGggY2hlY2tcbiAgICBpZiAodGhpcy5zdGF0ZSAhPT0gJ3JlYWR5JykgcmV0dXJuIGZhbHNlO1xuICAgIGlmICghdGhpcy5lbGVtZW50IHx8ICFkb2N1bWVudC5jb250YWlucyh0aGlzLmVsZW1lbnQpKSByZXR1cm4gZmFsc2U7XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgZXZlbnQgbGlzdGVuZXJzIGFyZSBwcm9wZXJseSB0cmFja2VkXG4gICAgaWYgKHRoaXMuZXZlbnRMaXN0ZW5lcnMgJiYgdGhpcy5ldmVudExpc3RlbmVycy5zaXplID09PSAwKSB7XG4gICAgICBsb2cuZGVidWcoYENvbXBvbmVudCAke3RoaXMuaWR9IGhhcyBubyB0cmFja2VkIGV2ZW50IGxpc3RlbmVyc2ApO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBpZiBlbGVtZW50IHN0aWxsIGhhcyBsaXN0ZW5lciB0cmFja2luZyBmb3IgdGhpcyBjb21wb25lbnRcbiAgICBpZiAodGhpcy5lbGVtZW50ICYmIHRoaXMuZWxlbWVudC5kYXRhc2V0ICYmIHRoaXMuZWxlbWVudC5kYXRhc2V0LmNvbXBvbmVudExpc3RlbmVycykge1xuICAgICAgY29uc3QgY29tcG9uZW50SWRzID0gdGhpcy5lbGVtZW50LmRhdGFzZXQuY29tcG9uZW50TGlzdGVuZXJzLnNwbGl0KCcsJyk7XG4gICAgICBpZiAoIWNvbXBvbmVudElkcy5pbmNsdWRlcyh0aGlzLmlkKSkge1xuICAgICAgICBsb2cuZGVidWcoYENvbXBvbmVudCAke3RoaXMuaWR9IG5vdCB0cmFja2VkIG9uIGl0cyBET00gZWxlbWVudGApO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjdXJyZW50IHN0YXRlXG4gICAqL1xuICBnZXRTdGF0ZSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgaWQ6IHRoaXMuaWQsXG4gICAgICBzdGF0ZTogdGhpcy5zdGF0ZSxcbiAgICAgIGVsZW1lbnQ6ICEhdGhpcy5lbGVtZW50LFxuICAgICAgZGVwZW5kZW5jaWVzOiB0aGlzLmRlcGVuZGVuY2llcy5sZW5ndGgsXG4gICAgICBjaGlsZHJlbjogdGhpcy5jaGlsZENvbXBvbmVudHMuc2l6ZSxcbiAgICAgIG9wdGlvbnM6IHRoaXMub3B0aW9uc1xuICAgIH07XG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIENMRUFOVVBcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgZGVzdHJveSBldmVudFxuICAgKi9cbiAgaGFuZGxlRGVzdHJveSgpIHtcbiAgICB0aGlzLmRlc3Ryb3koKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbnVwIGNvbXBvbmVudCByZXNvdXJjZXMgd2l0aCBlbmhhbmNlZCBuYXZpZ2F0aW9uIHNhZmV0eVxuICAgKi9cbiAgZGVzdHJveSgpIHtcbiAgICBpZiAodGhpcy5zdGF0ZSA9PT0gJ2Rlc3Ryb3llZCcpIHJldHVybjtcbiAgICBcbiAgICBsb2cuZGVidWcoYERlc3Ryb3lpbmcgY29tcG9uZW50ICR7dGhpcy5uYW1lfSAoJHt0aGlzLmlkfSlgKTtcbiAgICBcbiAgICAvLyBcdUQ4M0RcdUREMjcgRU5IQU5DRUQ6IEV4cGxpY2l0IGNsZWFudXAgb2YgdHJhY2tlZCBsaXN0ZW5lcnMgZmlyc3RcbiAgICB0aGlzLmNsZWFudXBFeHBsaWNpdExpc3RlbmVycygpO1xuICAgIFxuICAgIC8vIENsZWFudXAgZXZlbnQgbGlzdGVuZXJzIChBYm9ydENvbnRyb2xsZXIpIC0gc2Vjb25kYXJ5IHNhZmV0eSBuZXRcbiAgICB0cnkge1xuICAgICAgdGhpcy5hYm9ydENvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgIGxvZy50cmFjZShgQWJvcnRlZCBhbGwgZXZlbnQgbGlzdGVuZXJzIGZvciAke3RoaXMubmFtZX1gKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nLndhcm4oYEZhaWxlZCB0byBhYm9ydCBldmVudCBsaXN0ZW5lcnMgaW4gJHt0aGlzLm5hbWV9OmAsIGVycm9yKTtcbiAgICB9XG4gICAgXG4gICAgLy8gRGVzdHJveSBjaGlsZCBjb21wb25lbnRzXG4gICAgdGhpcy5jaGlsZENvbXBvbmVudHMuZm9yRWFjaChjaGlsZCA9PiB7XG4gICAgICBpZiAoY2hpbGQgJiYgdHlwZW9mIGNoaWxkLmRlc3Ryb3kgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgY2hpbGQuZGVzdHJveSgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMuY2hpbGRDb21wb25lbnRzLmNsZWFyKCk7XG4gICAgXG4gICAgLy8gUmVtb3ZlIGdsb2JhbCBldmVudCBsaXN0ZW5lclxuICAgIGV2ZW50QnVzLm9mZignY29tcG9uZW50OmRlc3Ryb3ktYWxsJywgdGhpcy5oYW5kbGVEZXN0cm95KTtcbiAgICBcbiAgICAvLyBDbGVhbiB1cCBET00gcmVmZXJlbmNlcyBhbmQgY29tcG9uZW50IHRyYWNraW5nXG4gICAgaWYgKHRoaXMuZWxlbWVudCkge1xuICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1jb21wb25lbnQnKTtcbiAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtY29tcG9uZW50LWlkJyk7XG4gICAgICBcbiAgICAgIC8vIENsZWFuIHVwIGxpc3RlbmVyIHRyYWNraW5nXG4gICAgICBpZiAodGhpcy5lbGVtZW50LmRhdGFzZXQgJiYgdGhpcy5lbGVtZW50LmRhdGFzZXQuY29tcG9uZW50TGlzdGVuZXJzKSB7XG4gICAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuZWxlbWVudC5kYXRhc2V0LmNvbXBvbmVudExpc3RlbmVycy5zcGxpdCgnLCcpO1xuICAgICAgICBjb25zdCBmaWx0ZXJlZExpc3RlbmVycyA9IGxpc3RlbmVycy5maWx0ZXIoaWQgPT4gaWQgIT09IHRoaXMuaWQpO1xuICAgICAgICBpZiAoZmlsdGVyZWRMaXN0ZW5lcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHRoaXMuZWxlbWVudC5kYXRhc2V0LmNvbXBvbmVudExpc3RlbmVycyA9IGZpbHRlcmVkTGlzdGVuZXJzLmpvaW4oJywnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZWxldGUgdGhpcy5lbGVtZW50LmRhdGFzZXQuY29tcG9uZW50TGlzdGVuZXJzO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHRoaXMuc3RhdGUgPSAnZGVzdHJveWVkJztcbiAgICB0aGlzLmVtaXQoJ2Rlc3Ryb3llZCcpO1xuICAgIFxuICAgIGxvZy5kZWJ1ZyhgQ29tcG9uZW50ICR7dGhpcy5uYW1lfSBkZXN0cm95ZWQgc3VjY2Vzc2Z1bGx5YCk7XG4gIH1cblxuICAvKipcbiAgICogRXhwbGljaXRseSBjbGVhbnVwIHRyYWNrZWQgZXZlbnQgbGlzdGVuZXJzXG4gICAqL1xuICBjbGVhbnVwRXhwbGljaXRMaXN0ZW5lcnMoKSB7XG4gICAgaWYgKCF0aGlzLmV2ZW50TGlzdGVuZXJzKSByZXR1cm47XG4gICAgXG4gICAgbG9nLnRyYWNlKGBDbGVhbmluZyB1cCAke3RoaXMuZXZlbnRMaXN0ZW5lcnMuc2l6ZX0gdHJhY2tlZCBsaXN0ZW5lcnMgZm9yICR7dGhpcy5uYW1lfWApO1xuICAgIFxuICAgIGZvciAoY29uc3QgW2tleSwgbGlzdGVuZXJJbmZvXSBvZiB0aGlzLmV2ZW50TGlzdGVuZXJzLmVudHJpZXMoKSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgbGlzdGVuZXJJbmZvLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICBsaXN0ZW5lckluZm8uZXZlbnQsIFxuICAgICAgICAgIGxpc3RlbmVySW5mby5oYW5kbGVyLCBcbiAgICAgICAgICBsaXN0ZW5lckluZm8ub3B0aW9uc1xuICAgICAgICApO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbG9nLnRyYWNlKGBOb24tY3JpdGljYWwgY2xlYW51cCBlcnJvciBmb3IgbGlzdGVuZXIgJHtrZXl9OmAsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgdGhpcy5ldmVudExpc3RlbmVycy5jbGVhcigpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENvbXBvbmVudDsiLCAiLyoqXG4gKiBNaW5pbWFsIEhUTUwgc2FuaXRpemF0aW9uIHV0aWxpdGllcyAobm8gZXh0ZXJuYWwgZGVwcylcbiAqIC0gUmVtb3ZlcyA8c2NyaXB0PiB0YWdzXG4gKiAtIFN0cmlwcyBldmVudCBoYW5kbGVyIGF0dHJpYnV0ZXMgKG9uKilcbiAqIC0gRGlzYWxsb3dzIGphdmFzY3JpcHQ6LCBkYXRhOiBpbiBocmVmL3NyYyAoa2VlcHMgaHR0cChzKSwgbWFpbHRvLCB0ZWwpXG4gKiAtIFByZXNlcnZlcyBiYXNpYyBtYXJrdXAgcHJvZHVjZWQgYnkgb3VyIHJlbmRlcmVyc1xuICovXG5cbi8qKlxuICogU2FuaXRpemUgYW4gSFRNTCBzdHJpbmcgYW5kIHJldHVybiBhIHNhZmUgc3RyaW5nXG4gKiBAcGFyYW0ge3N0cmluZ30gaHRtbFxuICogQHJldHVybnMge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNhbml0aXplSFRNTChodG1sKSB7XG4gIGlmICghaHRtbCB8fCB0eXBlb2YgaHRtbCAhPT0gJ3N0cmluZycpIHJldHVybiAnJztcblxuICB0cnkge1xuICAgIGNvbnN0IHBhcnNlciA9IG5ldyBET01QYXJzZXIoKTtcbiAgICBjb25zdCBkb2MgPSBwYXJzZXIucGFyc2VGcm9tU3RyaW5nKGh0bWwsICd0ZXh0L2h0bWwnKTtcblxuICAgIC8vIFJlbW92ZSBzY3JpcHQsIG5vc2NyaXB0XG4gICAgZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoJ3NjcmlwdCwgbm9zY3JpcHQnKS5mb3JFYWNoKChlbCkgPT4gZWwucmVtb3ZlKCkpO1xuXG4gICAgLy8gV2FsayBhbGwgZWxlbWVudHMgYW5kIHNhbml0aXplIGF0dHJpYnV0ZXNcbiAgICBjb25zdCB3YWxrZXIgPSBkb2MuY3JlYXRlVHJlZVdhbGtlcihkb2MuYm9keSwgTm9kZUZpbHRlci5TSE9XX0VMRU1FTlQsIG51bGwpO1xuICAgIHdoaWxlICh3YWxrZXIubmV4dE5vZGUoKSkge1xuICAgICAgY29uc3QgZWwgPSB3YWxrZXIuY3VycmVudE5vZGU7XG4gICAgICAvLyBSZW1vdmUgZXZlbnQgaGFuZGxlcnNcbiAgICAgIFsuLi5lbC5hdHRyaWJ1dGVzXS5mb3JFYWNoKChhdHRyKSA9PiB7XG4gICAgICAgIGNvbnN0IG5hbWUgPSBhdHRyLm5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgaWYgKG5hbWUuc3RhcnRzV2l0aCgnb24nKSkge1xuICAgICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyLm5hbWUpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHZhbHVlID0gYXR0ci52YWx1ZS50cmltKCk7XG4gICAgICAgIGlmIChuYW1lID09PSAnaHJlZicgfHwgbmFtZSA9PT0gJ3NyYycpIHtcbiAgICAgICAgICBjb25zdCBsb3dlciA9IHZhbHVlLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgLy8gQWxsb3cgaHR0cChzKSwgbWFpbHRvLCB0ZWwsIHJlbGF0aXZlIFVSTHNcbiAgICAgICAgICBjb25zdCBhbGxvd2VkID0gL14oaHR0cHM/OnxtYWlsdG86fHRlbDp8XFwvfFxcLlxcL3wjfCQpLy50ZXN0KGxvd2VyKTtcbiAgICAgICAgICBpZiAoIWFsbG93ZWQpIHtcbiAgICAgICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyLm5hbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRvYy5ib2R5LmlubmVySFRNTDtcbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIEluIGNhc2UgRE9NUGFyc2VyIGZhaWxzLCBmYWxsIGJhY2sgdG8gcGxhaW4gdGV4dFxuICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRpdi50ZXh0Q29udGVudCA9IGh0bWw7XG4gICAgcmV0dXJuIGRpdi5pbm5lckhUTUw7XG4gIH1cbn1cblxuLyoqXG4gKiBTZXQgc2FuaXRpemVkIEhUTUwgaW50byBhbiBlbGVtZW50XG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gaHRtbFxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0U2FmZUhUTUwoZWxlbWVudCwgaHRtbCkge1xuICBpZiAoIWVsZW1lbnQpIHJldHVybjtcbiAgZWxlbWVudC5pbm5lckhUTUwgPSBzYW5pdGl6ZUhUTUwoaHRtbCk7XG59XG5cbi8qKlxuICogRXNjYXBlIHBsYWluIHRleHQgdG8gSFRNTCBlbnRpdGllc1xuICogQHBhcmFtIHtzdHJpbmd9IHRleHRcbiAqIEByZXR1cm5zIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlc2NhcGVIVE1MKHRleHQpIHtcbiAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGRpdi50ZXh0Q29udGVudCA9IHRleHQgPz8gJyc7XG4gIHJldHVybiBkaXYuaW5uZXJIVE1MO1xufVxuXG5cbiIsICIvKipcbiAqIERPTSB1dGlsaXRpZXMgLSBDb21tb24gRE9NIG9wZXJhdGlvbnMgYW5kIGhlbHBlcnNcbiAqIENvbnNvbGlkYXRlcyBwYXR0ZXJucyBmcm9tIG1haW4uanMsIHBlcmZvcm1hbmNlLW9wdGltaXphdGlvbnMuanMgYW5kIG90aGVyIGZpbGVzXG4gKi9cbmltcG9ydCB7IHNldFNhZmVIVE1MIH0gZnJvbSAnLi9zYW5pdGl6ZS5qcyc7XG5cbi8qKlxuICogRE9NIHJlYWR5IHV0aWxpdHkgLSBzaW5nbGUgcG9pbnQgZm9yIERPTUNvbnRlbnRMb2FkZWQgaGFuZGxpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlYWR5KGNhbGxiYWNrKSB7XG4gIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnbG9hZGluZycpIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgY2FsbGJhY2spO1xuICB9IGVsc2Uge1xuICAgIGNhbGxiYWNrKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBFbGVtZW50IHNlbGVjdGlvbiB3aXRoIGVycm9yIGhhbmRsaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiAkKHNlbGVjdG9yLCBjb250ZXh0ID0gZG9jdW1lbnQpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gY29udGV4dC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLndhcm4oYEludmFsaWQgc2VsZWN0b3I6IFwiJHtzZWxlY3Rvcn1cImAsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gJCQoc2VsZWN0b3IsIGNvbnRleHQgPSBkb2N1bWVudCkge1xuICB0cnkge1xuICAgIHJldHVybiBBcnJheS5mcm9tKGNvbnRleHQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUud2FybihgSW52YWxpZCBzZWxlY3RvcjogXCIke3NlbGVjdG9yfVwiYCwgZXJyb3IpO1xuICAgIHJldHVybiBbXTtcbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZSByaXBwbGUgZWZmZWN0IC0gZXh0cmFjdGVkIGZyb20gbWFpbi5qc1xuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUmlwcGxlKGVsZW1lbnQsIGV2ZW50KSB7XG4gIGNvbnN0IHJpcHBsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgY29uc3QgcmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIGNvbnN0IHNpemUgPSBNYXRoLm1heChyZWN0LndpZHRoLCByZWN0LmhlaWdodCk7XG4gIGNvbnN0IHggPSBldmVudC5jbGllbnRYIC0gcmVjdC5sZWZ0IC0gc2l6ZSAvIDI7XG4gIGNvbnN0IHkgPSBldmVudC5jbGllbnRZIC0gcmVjdC50b3AgLSBzaXplIC8gMjtcbiAgXG4gIHJpcHBsZS5zdHlsZS5jc3NUZXh0ID0gYFxuICAgIHdpZHRoOiAke3NpemV9cHg7XG4gICAgaGVpZ2h0OiAke3NpemV9cHg7XG4gICAgbGVmdDogJHt4fXB4O1xuICAgIHRvcDogJHt5fXB4O1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgYmFja2dyb3VuZDogY3VycmVudENvbG9yO1xuICAgIG9wYWNpdHk6IDAuMjU7XG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgdHJhbnNmb3JtOiBzY2FsZSgwKTtcbiAgICBhbmltYXRpb246IHJpcHBsZSAwLjZzIGxpbmVhcjtcbiAgYDtcbiAgXG4gIHJpcHBsZS5jbGFzc0xpc3QuYWRkKCdyaXBwbGUnKTtcbiAgZWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9IGVsZW1lbnQuc3R5bGUucG9zaXRpb24gfHwgJ3JlbGF0aXZlJztcbiAgZWxlbWVudC5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuICBlbGVtZW50LmFwcGVuZENoaWxkKHJpcHBsZSk7XG4gIFxuICAvLyBVc2UgQ1NTIHRpbWluZyB0b2tlbiBmb3IgcmlwcGxlIGR1cmF0aW9uXG4gIGNvbnN0IHJpcHBsZUR1cmF0aW9uID0gZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLmdldFByb3BlcnR5VmFsdWUoJy0tdGltaW5nLXNsb3cnKTtcbiAgY29uc3QgZHVyYXRpb24gPSBwYXJzZUZsb2F0KHJpcHBsZUR1cmF0aW9uKSAqIDEwMDAgfHwgNTAwOyAvLyBEZWZhdWx0IHRvIDUwMG1zIGlmIHRva2VuIHVuYXZhaWxhYmxlXG4gIHNldFRpbWVvdXQoKCkgPT4gcmlwcGxlLnJlbW92ZSgpLCBkdXJhdGlvbik7XG59XG5cbi8qKlxuICogU21vb3RoIHNjcm9sbGluZyB1dGlsaXR5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzbW9vdGhTY3JvbGxUbyh0YXJnZXQsIG9mZnNldCA9IDAsIGJlaGF2aW9yID0gJ3Ntb290aCcpIHtcbiAgbGV0IGVsZW1lbnQ7XG4gIFxuICBpZiAodHlwZW9mIHRhcmdldCA9PT0gJ3N0cmluZycpIHtcbiAgICBlbGVtZW50ID0gJCh0YXJnZXQpO1xuICB9IGVsc2UgaWYgKHRhcmdldCBpbnN0YW5jZW9mIEVsZW1lbnQpIHtcbiAgICBlbGVtZW50ID0gdGFyZ2V0O1xuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUud2FybignSW52YWxpZCBzY3JvbGwgdGFyZ2V0OicsIHRhcmdldCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIFxuICBpZiAoIWVsZW1lbnQpIHtcbiAgICBjb25zb2xlLndhcm4oJ1Njcm9sbCB0YXJnZXQgbm90IGZvdW5kOicsIHRhcmdldCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIFxuICBjb25zdCB0YXJnZXRQb3NpdGlvbiA9IGVsZW1lbnQub2Zmc2V0VG9wIC0gb2Zmc2V0O1xuICB3aW5kb3cuc2Nyb2xsVG8oe1xuICAgIHRvcDogdGFyZ2V0UG9zaXRpb24sXG4gICAgYmVoYXZpb3JcbiAgfSk7XG59XG5cbi8qKlxuICogRGVib3VuY2UgZnVuY3Rpb24gZm9yIHBlcmZvcm1hbmNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWJvdW5jZShmdW5jLCB3YWl0LCBpbW1lZGlhdGUgPSBmYWxzZSkge1xuICBsZXQgdGltZW91dDtcbiAgcmV0dXJuIGZ1bmN0aW9uIGV4ZWN1dGVkRnVuY3Rpb24oLi4uYXJncykge1xuICAgIGNvbnN0IGxhdGVyID0gKCkgPT4ge1xuICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICBpZiAoIWltbWVkaWF0ZSkgZnVuYy5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB9O1xuICAgIGNvbnN0IGNhbGxOb3cgPSBpbW1lZGlhdGUgJiYgIXRpbWVvdXQ7XG4gICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcbiAgICBpZiAoY2FsbE5vdykgZnVuYy5hcHBseSh0aGlzLCBhcmdzKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBUaHJvdHRsZSBmdW5jdGlvbiBmb3IgcGVyZm9ybWFuY2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRocm90dGxlKGZ1bmMsIGxpbWl0KSB7XG4gIGxldCBpblRocm90dGxlO1xuICByZXR1cm4gZnVuY3Rpb24gZXhlY3V0ZWRGdW5jdGlvbiguLi5hcmdzKSB7XG4gICAgaWYgKCFpblRocm90dGxlKSB7XG4gICAgICBmdW5jLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgaW5UaHJvdHRsZSA9IHRydWU7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IGluVGhyb3R0bGUgPSBmYWxzZSwgbGltaXQpO1xuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBlbGVtZW50IGlzIGluIHZpZXdwb3J0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0luVmlld3BvcnQoZWxlbWVudCwgdGhyZXNob2xkID0gMCkge1xuICBjb25zdCByZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgY29uc3Qgd2luZG93SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7XG4gIGNvbnN0IHdpbmRvd1dpZHRoID0gd2luZG93LmlubmVyV2lkdGggfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoO1xuICBcbiAgcmV0dXJuIChcbiAgICByZWN0LnRvcCA+PSAtdGhyZXNob2xkICYmXG4gICAgcmVjdC5sZWZ0ID49IC10aHJlc2hvbGQgJiZcbiAgICByZWN0LmJvdHRvbSA8PSB3aW5kb3dIZWlnaHQgKyB0aHJlc2hvbGQgJiZcbiAgICByZWN0LnJpZ2h0IDw9IHdpbmRvd1dpZHRoICsgdGhyZXNob2xkXG4gICk7XG59XG5cbi8qKlxuICogV2FpdCBmb3IgZWxlbWVudCB0byBleGlzdCBpbiBET01cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdhaXRGb3JFbGVtZW50KHNlbGVjdG9yLCB0aW1lb3V0ID0gNTAwMCkge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IGVsZW1lbnQgPSAkKHNlbGVjdG9yKTtcbiAgICBpZiAoZWxlbWVudCkge1xuICAgICAgcmVzb2x2ZShlbGVtZW50KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25zLCBvYnMpID0+IHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSAkKHNlbGVjdG9yKTtcbiAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgIG9icy5kaXNjb25uZWN0KCk7XG4gICAgICAgIHJlc29sdmUoZWxlbWVudCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgb2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudC5ib2R5LCB7XG4gICAgICBjaGlsZExpc3Q6IHRydWUsXG4gICAgICBzdWJ0cmVlOiB0cnVlXG4gICAgfSk7XG4gICAgXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICByZWplY3QobmV3IEVycm9yKGBFbGVtZW50IFwiJHtzZWxlY3Rvcn1cIiBub3QgZm91bmQgd2l0aGluICR7dGltZW91dH1tc2ApKTtcbiAgICB9LCB0aW1lb3V0KTtcbiAgfSk7XG59XG5cbi8qKlxuICogQWRkIGV2ZW50IGxpc3RlbmVyIHdpdGggYXV0b21hdGljIGNsZWFudXBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXJXaXRoQ2xlYW51cChlbGVtZW50LCBldmVudCwgaGFuZGxlciwgb3B0aW9ucyA9IHt9KSB7XG4gIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7XG4gIFxuICByZXR1cm4ge1xuICAgIHJlbW92ZSgpIHtcbiAgICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7XG4gICAgfVxuICB9O1xufVxuXG4vKipcbiAqIERlbGVnYXRlIGV2ZW50IGhhbmRsaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWxlZ2F0ZShwYXJlbnQsIHNlbGVjdG9yLCBldmVudCwgaGFuZGxlcikge1xuICBjb25zdCBkZWxlZ2F0ZWRIYW5kbGVyID0gKGUpID0+IHtcbiAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldC5jbG9zZXN0KHNlbGVjdG9yKTtcbiAgICBpZiAodGFyZ2V0ICYmIHBhcmVudC5jb250YWlucyh0YXJnZXQpKSB7XG4gICAgICBoYW5kbGVyLmNhbGwodGFyZ2V0LCBlKTtcbiAgICB9XG4gIH07XG4gIFxuICBwYXJlbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgZGVsZWdhdGVkSGFuZGxlcik7XG4gIFxuICByZXR1cm4ge1xuICAgIHJlbW92ZSgpIHtcbiAgICAgIHBhcmVudC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBkZWxlZ2F0ZWRIYW5kbGVyKTtcbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogQ3JlYXRlIGVsZW1lbnQgd2l0aCBhdHRyaWJ1dGVzIGFuZCBjb250ZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFbGVtZW50KHRhZywgYXR0cmlidXRlcyA9IHt9LCBjb250ZW50ID0gJycpIHtcbiAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnKTtcbiAgXG4gIE9iamVjdC5lbnRyaWVzKGF0dHJpYnV0ZXMpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgIGlmIChrZXkgPT09ICdjbGFzc05hbWUnIHx8IGtleSA9PT0gJ2NsYXNzJykge1xuICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSB2YWx1ZTtcbiAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ2RhdGFzZXQnKSB7XG4gICAgICBPYmplY3QuZW50cmllcyh2YWx1ZSkuZm9yRWFjaCgoW2RhdGFLZXksIGRhdGFWYWx1ZV0pID0+IHtcbiAgICAgICAgZWxlbWVudC5kYXRhc2V0W2RhdGFLZXldID0gZGF0YVZhbHVlO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChrZXkuc3RhcnRzV2l0aCgnb24nKSAmJiB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihrZXkuc2xpY2UoMikudG9Mb3dlckNhc2UoKSwgdmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShrZXksIHZhbHVlKTtcbiAgICB9XG4gIH0pO1xuICBcbiAgaWYgKGNvbnRlbnQpIHtcbiAgICBpZiAodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAvLyBVc2Ugc2FuaXRpemVkIEhUTUwgd2hlbiBzdHJpbmcgY29udGVudCBpcyBwcm92aWRlZFxuICAgICAgdHJ5IHtcbiAgICAgICAgc2V0U2FmZUhUTUwoZWxlbWVudCwgY29udGVudCk7XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgLy8gRmFsbGJhY2sgdG8gdGV4dENvbnRlbnQgaWYgc2FuaXRpemVyIGltcG9ydCBmYWlscyB1bmV4cGVjdGVkbHlcbiAgICAgICAgZWxlbWVudC50ZXh0Q29udGVudCA9IGNvbnRlbnQ7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChjb250ZW50IGluc3RhbmNlb2YgRWxlbWVudCkge1xuICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChjb250ZW50KTtcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoY29udGVudCkpIHtcbiAgICAgIGNvbnRlbnQuZm9yRWFjaChjaGlsZCA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgY2hpbGQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjaGlsZCkpO1xuICAgICAgICB9IGVsc2UgaWYgKGNoaWxkIGluc3RhbmNlb2YgRWxlbWVudCkge1xuICAgICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgXG4gIHJldHVybiBlbGVtZW50O1xufVxuXG4vKipcbiAqIENvcHkgdGV4dCB0byBjbGlwYm9hcmQgd2l0aCBmYWxsYmFja1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29weVRvQ2xpcGJvYXJkKHRleHQpIHtcbiAgLy8gTW9kZXJuIGNsaXBib2FyZCBBUElcbiAgaWYgKG5hdmlnYXRvci5jbGlwYm9hcmQgJiYgd2luZG93LmlzU2VjdXJlQ29udGV4dCkge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dCh0ZXh0KTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS53YXJuKCdDbGlwYm9hcmQgQVBJIGZhaWxlZCwgdXNpbmcgZmFsbGJhY2s6JywgZXJyKTtcbiAgICB9XG4gIH1cbiAgXG4gIC8vIEZhbGxiYWNrIGZvciBvbGRlciBicm93c2Vyc1xuICB0cnkge1xuICAgIGNvbnN0IHRleHRBcmVhID0gY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnLCB7XG4gICAgICB2YWx1ZTogdGV4dCxcbiAgICAgIHN0eWxlOiAncG9zaXRpb246IGZpeGVkOyBvcGFjaXR5OiAwOyBwb2ludGVyLWV2ZW50czogbm9uZTsnXG4gICAgfSk7XG4gICAgXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0ZXh0QXJlYSk7XG4gICAgdGV4dEFyZWEuc2VsZWN0KCk7XG4gICAgY29uc3Qgc3VjY2Vzc2Z1bCA9IGRvY3VtZW50LmV4ZWNDb21tYW5kKCdjb3B5Jyk7XG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0ZXh0QXJlYSk7XG4gICAgXG4gICAgcmV0dXJuIHN1Y2Nlc3NmdWw7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0NsaXBib2FyZCBmYWxsYmFjayBmYWlsZWQ6JywgZXJyKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn0iLCAiLyoqXG4gKiBET00gVXRpbGl0aWVzXG4gKiBSZXVzYWJsZSBET00gbWFuaXB1bGF0aW9uIGFuZCBxdWVyeSB1dGlsaXRpZXNcbiAqL1xuXG4vKipcbiAqIFdhaXQgZm9yIERPTSB0byBiZSByZWFkeVxuICovXG5leHBvcnQgZnVuY3Rpb24gd2FpdEZvckRPTSgpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnbG9hZGluZycpIHtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCByZXNvbHZlLCB7IG9uY2U6IHRydWUgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc29sdmUoKTtcbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIFdhaXQgZm9yIGFuIGVsZW1lbnQgdG8gYXBwZWFyIGluIHRoZSBET01cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdhaXRGb3JFbGVtZW50KHNlbGVjdG9yLCB0aW1lb3V0ID0gNTAwMCkge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICBpZiAoZWxlbWVudCkge1xuICAgICAgcmVzb2x2ZShlbGVtZW50KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChtdXRhdGlvbnMpID0+IHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgcmVzb2x2ZShlbGVtZW50KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIG9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQuYm9keSwge1xuICAgICAgY2hpbGRMaXN0OiB0cnVlLFxuICAgICAgc3VidHJlZTogdHJ1ZVxuICAgIH0pO1xuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICByZWplY3QobmV3IEVycm9yKGBFbGVtZW50ICR7c2VsZWN0b3J9IG5vdCBmb3VuZCB3aXRoaW4gJHt0aW1lb3V0fW1zYCkpO1xuICAgIH0sIHRpbWVvdXQpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhbiBlbGVtZW50IGlzIHZpc2libGUgaW4gdmlld3BvcnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRWxlbWVudFZpc2libGUoZWxlbWVudCwgdGhyZXNob2xkID0gMCkge1xuICBpZiAoIWVsZW1lbnQpIHJldHVybiBmYWxzZTtcblxuICBjb25zdCByZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgY29uc3Qgdmlld0hlaWdodCA9IE1hdGgubWF4KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQsIHdpbmRvdy5pbm5lckhlaWdodCk7XG4gIGNvbnN0IHZpZXdXaWR0aCA9IE1hdGgubWF4KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCwgd2luZG93LmlubmVyV2lkdGgpO1xuXG4gIHJldHVybiAoXG4gICAgcmVjdC5ib3R0b20gPj0gdGhyZXNob2xkICYmXG4gICAgcmVjdC5yaWdodCA+PSB0aHJlc2hvbGQgJiZcbiAgICByZWN0LnRvcCA8PSB2aWV3SGVpZ2h0IC0gdGhyZXNob2xkICYmXG4gICAgcmVjdC5sZWZ0IDw9IHZpZXdXaWR0aCAtIHRocmVzaG9sZFxuICApO1xufVxuXG4vKipcbiAqIFNtb290aCBzY3JvbGwgdG8gZWxlbWVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gc2Nyb2xsVG9FbGVtZW50KGVsZW1lbnQsIG9wdGlvbnMgPSB7fSkge1xuICBpZiAoIWVsZW1lbnQpIHJldHVybjtcblxuICBjb25zdCBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgICBiZWhhdmlvcjogJ3Ntb290aCcsXG4gICAgYmxvY2s6ICdzdGFydCcsXG4gICAgaW5saW5lOiAnbmVhcmVzdCcsXG4gICAgLi4ub3B0aW9uc1xuICB9O1xuXG4gIGVsZW1lbnQuc2Nyb2xsSW50b1ZpZXcoZGVmYXVsdE9wdGlvbnMpO1xufVxuXG4vKipcbiAqIEdldCBlbGVtZW50J3Mgb2Zmc2V0IHBvc2l0aW9uIHJlbGF0aXZlIHRvIGRvY3VtZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbGVtZW50T2Zmc2V0KGVsZW1lbnQpIHtcbiAgaWYgKCFlbGVtZW50KSByZXR1cm4geyB0b3A6IDAsIGxlZnQ6IDAgfTtcblxuICBjb25zdCByZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgY29uc3Qgc2Nyb2xsVG9wID0gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XG4gIGNvbnN0IHNjcm9sbExlZnQgPSB3aW5kb3cucGFnZVhPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQ7XG5cbiAgcmV0dXJuIHtcbiAgICB0b3A6IHJlY3QudG9wICsgc2Nyb2xsVG9wLFxuICAgIGxlZnQ6IHJlY3QubGVmdCArIHNjcm9sbExlZnRcbiAgfTtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBlbGVtZW50IGhhcyBhbnkgb2YgdGhlIHNwZWNpZmllZCBjbGFzc2VzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYXNBbnlDbGFzcyhlbGVtZW50LCBjbGFzc05hbWVzKSB7XG4gIGlmICghZWxlbWVudCB8fCAhY2xhc3NOYW1lcykgcmV0dXJuIGZhbHNlO1xuICBcbiAgY29uc3QgY2xhc3NlcyA9IEFycmF5LmlzQXJyYXkoY2xhc3NOYW1lcykgPyBjbGFzc05hbWVzIDogW2NsYXNzTmFtZXNdO1xuICByZXR1cm4gY2xhc3Nlcy5zb21lKGNsYXNzTmFtZSA9PiBlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpKTtcbn1cblxuLyoqXG4gKiBUb2dnbGUgbXVsdGlwbGUgY2xhc3NlcyBvbiBhbiBlbGVtZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b2dnbGVDbGFzc2VzKGVsZW1lbnQsIGNsYXNzTmFtZXMsIGZvcmNlID0gdW5kZWZpbmVkKSB7XG4gIGlmICghZWxlbWVudCB8fCAhY2xhc3NOYW1lcykgcmV0dXJuO1xuICBcbiAgY29uc3QgY2xhc3NlcyA9IEFycmF5LmlzQXJyYXkoY2xhc3NOYW1lcykgPyBjbGFzc05hbWVzIDogW2NsYXNzTmFtZXNdO1xuICBjbGFzc2VzLmZvckVhY2goY2xhc3NOYW1lID0+IHtcbiAgICBlbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoY2xhc3NOYW1lLCBmb3JjZSk7XG4gIH0pO1xufVxuXG4vKipcbiAqIEZpbmQgdGhlIGNsb3Nlc3Qgc2Nyb2xsYWJsZSBwYXJlbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmRTY3JvbGxhYmxlUGFyZW50KGVsZW1lbnQpIHtcbiAgaWYgKCFlbGVtZW50KSByZXR1cm4gbnVsbDtcblxuICBjb25zdCBvdmVyZmxvd1JlZ2V4ID0gLyhhdXRvfHNjcm9sbCkvO1xuICBsZXQgcGFyZW50ID0gZWxlbWVudC5wYXJlbnRFbGVtZW50O1xuXG4gIHdoaWxlIChwYXJlbnQpIHtcbiAgICBjb25zdCBzdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHBhcmVudCk7XG4gICAgaWYgKG92ZXJmbG93UmVnZXgudGVzdChzdHlsZS5vdmVyZmxvdyArIHN0eWxlLm92ZXJmbG93WSArIHN0eWxlLm92ZXJmbG93WCkpIHtcbiAgICAgIHJldHVybiBwYXJlbnQ7XG4gICAgfVxuICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnRFbGVtZW50O1xuICB9XG5cbiAgcmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbn1cblxuLyoqXG4gKiBDcmVhdGUgZWxlbWVudCB3aXRoIGF0dHJpYnV0ZXMgYW5kIGNvbnRlbnRcbiAqL1xuaW1wb3J0IHsgc2V0U2FmZUhUTUwgfSBmcm9tICcuLi8uLi91dGlscy9zYW5pdGl6ZS5qcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFbGVtZW50KHRhZywgYXR0cmlidXRlcyA9IHt9LCBjb250ZW50ID0gJycpIHtcbiAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnKTtcbiAgXG4gIE9iamVjdC5lbnRyaWVzKGF0dHJpYnV0ZXMpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgIGlmIChrZXkgPT09ICdjbGFzc05hbWUnKSB7XG4gICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IHZhbHVlO1xuICAgIH0gZWxzZSBpZiAoa2V5ID09PSAnZGF0YXNldCcpIHtcbiAgICAgIE9iamVjdC5lbnRyaWVzKHZhbHVlKS5mb3JFYWNoKChbZGF0YUtleSwgZGF0YVZhbHVlXSkgPT4ge1xuICAgICAgICBlbGVtZW50LmRhdGFzZXRbZGF0YUtleV0gPSBkYXRhVmFsdWU7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoa2V5LCB2YWx1ZSk7XG4gICAgfVxuICB9KTtcbiAgXG4gIGlmIChjb250ZW50KSB7XG4gICAgaWYgKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgc2V0U2FmZUhUTUwoZWxlbWVudCwgY29udGVudCk7XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgZWxlbWVudC50ZXh0Q29udGVudCA9IGNvbnRlbnQ7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoY29udGVudCk7XG4gICAgfVxuICB9XG4gIFxuICByZXR1cm4gZWxlbWVudDtcbn1cblxuLyoqXG4gKiBSZW1vdmUgZWxlbWVudCBzYWZlbHkgd2l0aCBjbGVhbnVwXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVFbGVtZW50KGVsZW1lbnQpIHtcbiAgaWYgKCFlbGVtZW50IHx8ICFlbGVtZW50LnBhcmVudE5vZGUpIHJldHVybjtcbiAgXG4gIC8vIEVtaXQgY2xlYW51cCBldmVudCBmb3IgY29tcG9uZW50c1xuICBlbGVtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdlbGVtZW50OnJlbW92aW5nJywgeyBidWJibGVzOiB0cnVlIH0pKTtcbiAgXG4gIC8vIFJlbW92ZSBmcm9tIERPTVxuICBlbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWxlbWVudCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgd2FpdEZvckRPTSxcbiAgd2FpdEZvckVsZW1lbnQsXG4gIGlzRWxlbWVudFZpc2libGUsXG4gIHNjcm9sbFRvRWxlbWVudCxcbiAgZ2V0RWxlbWVudE9mZnNldCxcbiAgaGFzQW55Q2xhc3MsXG4gIHRvZ2dsZUNsYXNzZXMsXG4gIGZpbmRTY3JvbGxhYmxlUGFyZW50LFxuICBjcmVhdGVFbGVtZW50LFxuICByZW1vdmVFbGVtZW50XG59OyIsICIvKiBcdUQ4M0NcdURGQUYgQW5pbWF0aW9uIEJyaWRnZSAtIEphdmFTY3JpcHQgSW50ZWdyYXRpb24gTGF5ZXJcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIFxuICogVGhpcyBtb2R1bGUgYnJpZGdlcyBvdXIgbmV3IENTUyBhbmltYXRpb24gc3lzdGVtIHdpdGggSmF2YVNjcmlwdCxcbiAqIHByb3ZpZGluZyBhIHVuaWZpZWQgQVBJIGZvciBjb21wb25lbnRzIHRvIHVzZSBDU1MgdG9rZW5zIGFuZCBkYXRhIGF0dHJpYnV0ZXMuXG4gKi9cblxuZXhwb3J0IGNsYXNzIEFuaW1hdGlvbkJyaWRnZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMudGltaW5nVG9rZW5zID0ge1xuICAgICAgaW5zdGFudDogJ3ZhcigtLXRpbWluZy1pbnN0YW50KScsXG4gICAgICBmYXN0OiAndmFyKC0tdGltaW5nLWZhc3QpJywgXG4gICAgICBtZWRpdW06ICd2YXIoLS10aW1pbmctbWVkaXVtKScsXG4gICAgICBzbG93OiAndmFyKC0tdGltaW5nLXNsb3cpJ1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5lYXNpbmdUb2tlbnMgPSB7XG4gICAgICBzdGFuZGFyZDogJ3ZhcigtLWVhc2luZy1zdGFuZGFyZCknLFxuICAgICAgZW1waGFzaXplZDogJ3ZhcigtLWVhc2luZy1lbXBoYXNpemVkKScsXG4gICAgICBzbW9vdGg6ICd2YXIoLS1lYXNpbmctc21vb3RoKSdcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBDU1MgdGltaW5nIHZhbHVlIGluIG1pbGxpc2Vjb25kcyBmcm9tIENTUyBjdXN0b20gcHJvcGVydHlcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRva2VuTmFtZSAtIFRva2VuIG5hbWUgKGluc3RhbnQsIGZhc3QsIG1lZGl1bSwgc2xvdylcbiAgICogQHJldHVybnMge251bWJlcn0gRHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzXG4gICAqL1xuICBnZXRUaW1pbmcodG9rZW5OYW1lID0gJ21lZGl1bScpIHtcbiAgICBjb25zdCBjc3NWYXJpYWJsZSA9IHRoaXMudGltaW5nVG9rZW5zW3Rva2VuTmFtZV0gfHwgdGhpcy50aW1pbmdUb2tlbnMubWVkaXVtO1xuICAgIGNvbnN0IHZhbHVlID0gdGhpcy5nZXRDU1NWYWx1ZShjc3NWYXJpYWJsZSk7XG4gICAgcmV0dXJuIHBhcnNlRmxvYXQodmFsdWUpICogMTAwMDsgLy8gQ29udmVydCBzZWNvbmRzIHRvIG1pbGxpc2Vjb25kc1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBDU1MgZWFzaW5nIHZhbHVlIGZyb20gQ1NTIGN1c3RvbSBwcm9wZXJ0eVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9rZW5OYW1lIC0gVG9rZW4gbmFtZSAoc3RhbmRhcmQsIGVtcGhhc2l6ZWQsIHNtb290aClcbiAgICogQHJldHVybnMge3N0cmluZ30gQ1NTIGVhc2luZyBmdW5jdGlvblxuICAgKi9cbiAgZ2V0RWFzaW5nKHRva2VuTmFtZSA9ICdzdGFuZGFyZCcpIHtcbiAgICBjb25zdCBjc3NWYXJpYWJsZSA9IHRoaXMuZWFzaW5nVG9rZW5zW3Rva2VuTmFtZV0gfHwgdGhpcy5lYXNpbmdUb2tlbnMuc3RhbmRhcmQ7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q1NTVmFsdWUoY3NzVmFyaWFibGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjb21wdXRlZCBDU1MgY3VzdG9tIHByb3BlcnR5IHZhbHVlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjc3NWYXIgLSBDU1MgdmFyaWFibGUgKGUuZy4sICd2YXIoLS10aW1pbmctbWVkaXVtKScpXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IENvbXB1dGVkIHZhbHVlXG4gICAqL1xuICBnZXRDU1NWYWx1ZShjc3NWYXIpIHtcbiAgICBjb25zdCBwcm9wTmFtZSA9IGNzc1Zhci5tYXRjaCgvdmFyXFwoKFteKV0rKVxcKS8pPy5bMV07XG4gICAgaWYgKHByb3BOYW1lKSB7XG4gICAgICByZXR1cm4gZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLmdldFByb3BlcnR5VmFsdWUocHJvcE5hbWUpLnRyaW0oKTtcbiAgICB9XG4gICAgcmV0dXJuIGNzc1ZhcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgY29sbGFwc2Ugc3RhdGUgdXNpbmcgbmV3IGRhdGEgYXR0cmlidXRlIHN5c3RlbVxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnQgLSBUYXJnZXQgZWxlbWVudFxuICAgKiBAcGFyYW0ge3N0cmluZ30gc3RhdGUgLSBTdGF0ZTogJ2NvbGxhcHNlZCcsICd0cmFuc2l0aW9uaW5nJywgJ2V4cGFuZGVkJ1xuICAgKi9cbiAgc2V0Q29sbGFwc2VTdGF0ZShlbGVtZW50LCBzdGF0ZSkge1xuICAgIGlmICghZWxlbWVudCkgcmV0dXJuO1xuICAgIFxuICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLWNvbGxhcHNlLXN0YXRlJywgc3RhdGUpO1xuICAgIFxuICAgIC8vIEJhY2t3YXJkIGNvbXBhdGliaWxpdHk6IGFsc28gc2V0IG9sZCBjbGFzc2VzIGZvciBleGlzdGluZyBDU1NcbiAgICBpZiAoc3RhdGUgPT09ICdleHBhbmRlZCcpIHtcbiAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZXhwYW5kZWQnKTtcbiAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnY29sbGFwc2VkJyk7XG4gICAgfSBlbHNlIGlmIChzdGF0ZSA9PT0gJ2NvbGxhcHNlZCcpIHtcbiAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZXhwYW5kZWQnKTtcbiAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnY29sbGFwc2VkJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjdXJyZW50IGNvbGxhcHNlIHN0YXRlXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudCAtIFRhcmdldCBlbGVtZW50XG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IEN1cnJlbnQgc3RhdGVcbiAgICovXG4gIGdldENvbGxhcHNlU3RhdGUoZWxlbWVudCkge1xuICAgIGlmICghZWxlbWVudCkgcmV0dXJuICdjb2xsYXBzZWQnO1xuICAgIHJldHVybiBlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1jb2xsYXBzZS1zdGF0ZScpIHx8ICdjb2xsYXBzZWQnO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBjb21wb25lbnQgc3RhdGUgdXNpbmcgbmV3IGRhdGEgYXR0cmlidXRlIHN5c3RlbVxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnQgLSBUYXJnZXQgZWxlbWVudFxuICAgKiBAcGFyYW0ge3N0cmluZ30gc3RhdGUgLSBTdGF0ZTogJ2xvYWRpbmcnLCAncmVhZHknLCAnZGlzYWJsZWQnLCAnZXJyb3InXG4gICAqL1xuICBzZXRDb21wb25lbnRTdGF0ZShlbGVtZW50LCBzdGF0ZSkge1xuICAgIGlmICghZWxlbWVudCkgcmV0dXJuO1xuICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLWNvbXBvbmVudC1zdGF0ZScsIHN0YXRlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHBhbmQgZWxlbWVudCB3aXRoIHByb3BlciBhbmltYXRpb24gYW5kIHN0YXRlIG1hbmFnZW1lbnRcbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50IC0gRWxlbWVudCB0byBleHBhbmRcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBBbmltYXRpb24gb3B0aW9uc1xuICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gUmVzb2x2ZXMgd2hlbiBhbmltYXRpb24gY29tcGxldGVzXG4gICAqL1xuICBhc3luYyBleHBhbmQoZWxlbWVudCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgaWYgKCFlbGVtZW50KSByZXR1cm47XG5cbiAgICBjb25zdCB7XG4gICAgICB0aW1pbmcgPSAnbWVkaXVtJyxcbiAgICAgIGVhc2luZyA9ICdzdGFuZGFyZCcsXG4gICAgICBoZWlnaHQgPSBudWxsXG4gICAgfSA9IG9wdGlvbnM7XG5cbiAgICAvLyBTZXQgdHJhbnNpdGlvbmluZyBzdGF0ZVxuICAgIHRoaXMuc2V0Q29sbGFwc2VTdGF0ZShlbGVtZW50LCAndHJhbnNpdGlvbmluZycpO1xuICAgIFxuICAgIC8vIFVwZGF0ZSBBUklBIGF0dHJpYnV0ZXNcbiAgICBjb25zdCBoZWFkZXIgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1thcmlhLWV4cGFuZGVkXScpO1xuICAgIGlmIChoZWFkZXIpIHtcbiAgICAgIGhlYWRlci5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAndHJ1ZScpO1xuICAgIH1cblxuICAgIC8vIEdldCBhbmltYXRpb24gZHVyYXRpb24gZnJvbSBDU1NcbiAgICBjb25zdCBkdXJhdGlvbiA9IHRoaXMuZ2V0VGltaW5nKHRpbWluZyk7XG4gICAgXG4gICAgLy8gU2V0IGV4cGFuZGVkIHN0YXRlIChDU1MgaGFuZGxlcyB0aGUgYW5pbWF0aW9uKVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5zZXRDb2xsYXBzZVN0YXRlKGVsZW1lbnQsICdleHBhbmRlZCcpO1xuICAgIH0sIDEwKTtcblxuICAgIC8vIFJldHVybiBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiBhbmltYXRpb24gY29tcGxldGVzXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH0sIGR1cmF0aW9uKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb2xsYXBzZSBlbGVtZW50IHdpdGggcHJvcGVyIGFuaW1hdGlvbiBhbmQgc3RhdGUgbWFuYWdlbWVudFxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnQgLSBFbGVtZW50IHRvIGNvbGxhcHNlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gQW5pbWF0aW9uIG9wdGlvbnNcbiAgICogQHJldHVybnMge1Byb21pc2V9IFJlc29sdmVzIHdoZW4gYW5pbWF0aW9uIGNvbXBsZXRlc1xuICAgKi9cbiAgYXN5bmMgY29sbGFwc2UoZWxlbWVudCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgaWYgKCFlbGVtZW50KSByZXR1cm47XG5cbiAgICBjb25zdCB7XG4gICAgICB0aW1pbmcgPSAnbWVkaXVtJyxcbiAgICAgIGVhc2luZyA9ICdzdGFuZGFyZCdcbiAgICB9ID0gb3B0aW9ucztcblxuICAgIC8vIFNldCB0cmFuc2l0aW9uaW5nIHN0YXRlXG4gICAgdGhpcy5zZXRDb2xsYXBzZVN0YXRlKGVsZW1lbnQsICd0cmFuc2l0aW9uaW5nJyk7XG4gICAgXG4gICAgLy8gVXBkYXRlIEFSSUEgYXR0cmlidXRlc1xuICAgIGNvbnN0IGhlYWRlciA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignW2FyaWEtZXhwYW5kZWRdJyk7XG4gICAgaWYgKGhlYWRlcikge1xuICAgICAgaGVhZGVyLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICdmYWxzZScpO1xuICAgIH1cblxuICAgIC8vIEdldCBhbmltYXRpb24gZHVyYXRpb24gZnJvbSBDU1NcbiAgICBjb25zdCBkdXJhdGlvbiA9IHRoaXMuZ2V0VGltaW5nKHRpbWluZyk7XG4gICAgXG4gICAgLy8gU2V0IGNvbGxhcHNlZCBzdGF0ZSAoQ1NTIGhhbmRsZXMgdGhlIGFuaW1hdGlvbilcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuc2V0Q29sbGFwc2VTdGF0ZShlbGVtZW50LCAnY29sbGFwc2VkJyk7XG4gICAgfSwgMTApO1xuXG4gICAgLy8gUmV0dXJuIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIGFuaW1hdGlvbiBjb21wbGV0ZXNcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfSwgZHVyYXRpb24pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFRvZ2dsZSBlbGVtZW50IGJldHdlZW4gZXhwYW5kZWQvY29sbGFwc2VkIHN0YXRlc1xuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnQgLSBFbGVtZW50IHRvIHRvZ2dsZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIEFuaW1hdGlvbiBvcHRpb25zXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfSBSZXNvbHZlcyB3aGVuIGFuaW1hdGlvbiBjb21wbGV0ZXNcbiAgICovXG4gIGFzeW5jIHRvZ2dsZShlbGVtZW50LCBvcHRpb25zID0ge30pIHtcbiAgICBpZiAoIWVsZW1lbnQpIHJldHVybjtcblxuICAgIGNvbnN0IGN1cnJlbnRTdGF0ZSA9IHRoaXMuZ2V0Q29sbGFwc2VTdGF0ZShlbGVtZW50KTtcbiAgICBjb25zdCBpc0V4cGFuZGVkID0gY3VycmVudFN0YXRlID09PSAnZXhwYW5kZWQnO1xuXG4gICAgaWYgKGlzRXhwYW5kZWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbGxhcHNlKGVsZW1lbnQsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5leHBhbmQoZWxlbWVudCwgb3B0aW9ucyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFwcGx5IGxvYWRpbmcgc3RhdGUgd2l0aCBDU1MgdG9rZW5zXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudCAtIEVsZW1lbnQgdG8gYXBwbHkgbG9hZGluZyBzdGF0ZVxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzTG9hZGluZyAtIFdoZXRoZXIgZWxlbWVudCBpcyBsb2FkaW5nXG4gICAqL1xuICBzZXRMb2FkaW5nU3RhdGUoZWxlbWVudCwgaXNMb2FkaW5nKSB7XG4gICAgaWYgKCFlbGVtZW50KSByZXR1cm47XG5cbiAgICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgICB0aGlzLnNldENvbXBvbmVudFN0YXRlKGVsZW1lbnQsICdsb2FkaW5nJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0Q29tcG9uZW50U3RhdGUoZWxlbWVudCwgJ3JlYWR5Jyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSB1bml2ZXJzYWwgdG9nZ2xlIGZ1bmN0aW9uIGZvciB1c2UgaW4gdGVtcGxhdGVzXG4gICAqIFRoaXMgcmVwbGFjZXMgdGhlIG9sZCB0b2dnbGVDb2xsYXBzZSgpIGZ1bmN0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBlbGVtZW50SWQgLSBJRCBvZiBlbGVtZW50IHRvIHRvZ2dsZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIEFuaW1hdGlvbiBvcHRpb25zXG4gICAqL1xuICBjcmVhdGVUb2dnbGVGdW5jdGlvbigpIHtcbiAgICAvLyBDcmVhdGUgZ2xvYmFsIGZ1bmN0aW9uIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG4gICAgd2luZG93LnRvZ2dsZUNvbGxhcHNlID0gYXN5bmMgKGVsZW1lbnRJZCwgb3B0aW9ucyA9IHt9KSA9PiB7XG4gICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudElkKTtcbiAgICAgIGlmICghZWxlbWVudCkge1xuICAgICAgICBjb25zb2xlLndhcm4oYEVsZW1lbnQgd2l0aCBJRCAnJHtlbGVtZW50SWR9JyBub3QgZm91bmRgKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy50b2dnbGUoZWxlbWVudCwgb3B0aW9ucyk7XG4gICAgfTtcblxuICAgIC8vIEVuaGFuY2VkIHZlcnNpb24gd2l0aCBtb3JlIG9wdGlvbnNcbiAgICB3aW5kb3cuYW5pbWF0aW9uQnJpZGdlID0gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIHRoZSBhbmltYXRpb24gYnJpZGdlIHN5c3RlbVxuICAgKiBDYWxsIHRoaXMgb25jZSB3aGVuIHRoZSBwYWdlIGxvYWRzXG4gICAqL1xuICBpbml0KCkge1xuICAgIC8vIENyZWF0ZSBnbG9iYWwgdG9nZ2xlIGZ1bmN0aW9uXG4gICAgdGhpcy5jcmVhdGVUb2dnbGVGdW5jdGlvbigpO1xuXG4gICAgLy8gU2V0IGluaXRpYWwgc3RhdGVzIGZvciBlbGVtZW50cyB0aGF0IGRvbid0IGhhdmUgdGhlbVxuICAgIHRoaXMuaW5pdGlhbGl6ZVN0YXRlcygpO1xuXG4gICAgY29uc29sZS5sb2coJ1x1RDgzQ1x1REZBRiBBbmltYXRpb24gQnJpZGdlIGluaXRpYWxpemVkIHdpdGggQ1NTIHRva2VuIGludGVncmF0aW9uJyk7XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBzdGF0ZXMgZm9yIGV4aXN0aW5nIGVsZW1lbnRzXG4gICAqL1xuICBpbml0aWFsaXplU3RhdGVzKCkge1xuICAgIC8vIEZpbmQgYWxsIGNvbGxhcHNlIGVsZW1lbnRzIGFuZCBzZXQgaW5pdGlhbCBzdGF0ZXNcbiAgICBjb25zdCBjb2xsYXBzZUVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNvbGxhcHNlJyk7XG4gICAgY29sbGFwc2VFbGVtZW50cy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgLy8gSWYgbm8gZGF0YS1jb2xsYXBzZS1zdGF0ZSwgaW5mZXIgZnJvbSBjbGFzc2VzXG4gICAgICBpZiAoIWVsZW1lbnQuaGFzQXR0cmlidXRlKCdkYXRhLWNvbGxhcHNlLXN0YXRlJykpIHtcbiAgICAgICAgY29uc3QgaXNFeHBhbmRlZCA9IGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdleHBhbmRlZCcpO1xuICAgICAgICB0aGlzLnNldENvbGxhcHNlU3RhdGUoZWxlbWVudCwgaXNFeHBhbmRlZCA/ICdleHBhbmRlZCcgOiAnY29sbGFwc2VkJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNldCBjb21wb25lbnQgc3RhdGUgdG8gcmVhZHlcbiAgICAgIGlmICghZWxlbWVudC5oYXNBdHRyaWJ1dGUoJ2RhdGEtY29tcG9uZW50LXN0YXRlJykpIHtcbiAgICAgICAgdGhpcy5zZXRDb21wb25lbnRTdGF0ZShlbGVtZW50LCAncmVhZHknKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNaWdyYXRlIGV4aXN0aW5nIGNvbXBvbmVudHMgdG8gdXNlIG5ldyBzeXN0ZW1cbiAgICogVGhpcyBjYW4gYmUgY2FsbGVkIHRvIHVwZGF0ZSBvbGQgY29tcG9uZW50c1xuICAgKi9cbiAgbWlncmF0ZUV4aXN0aW5nQ29tcG9uZW50cygpIHtcbiAgICAvLyBGaW5kIGVsZW1lbnRzIHVzaW5nIG9sZCAuZXhwYW5kZWQvLmNvbGxhcHNlZCBjbGFzc2VzXG4gICAgY29uc3QgZXhwYW5kZWRFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5leHBhbmRlZCcpO1xuICAgIGV4cGFuZGVkRWxlbWVudHMuZm9yRWFjaChlbCA9PiB7XG4gICAgICBpZiAoIWVsLmhhc0F0dHJpYnV0ZSgnZGF0YS1jb2xsYXBzZS1zdGF0ZScpKSB7XG4gICAgICAgIHRoaXMuc2V0Q29sbGFwc2VTdGF0ZShlbCwgJ2V4cGFuZGVkJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBjb25zdCBjb2xsYXBzZWRFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jb2xsYXBzZWQnKTtcbiAgICBjb2xsYXBzZWRFbGVtZW50cy5mb3JFYWNoKGVsID0+IHtcbiAgICAgIGlmICghZWwuaGFzQXR0cmlidXRlKCdkYXRhLWNvbGxhcHNlLXN0YXRlJykpIHtcbiAgICAgICAgdGhpcy5zZXRDb2xsYXBzZVN0YXRlKGVsLCAnY29sbGFwc2VkJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBjb25zb2xlLmxvZygnXHVEODNEXHVERDA0IE1pZ3JhdGVkIGV4aXN0aW5nIGNvbXBvbmVudHMgdG8gbmV3IGFuaW1hdGlvbiBzeXN0ZW0nKTtcbiAgfVxufVxuXG4vLyBDcmVhdGUgZ2xvYmFsIGluc3RhbmNlXG5leHBvcnQgY29uc3QgYW5pbWF0aW9uQnJpZGdlID0gbmV3IEFuaW1hdGlvbkJyaWRnZSgpO1xuXG4vLyBBdXRvLWluaXRpYWxpemUgd2hlbiBET00gaXMgcmVhZHlcbmlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnbG9hZGluZycpIHtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcbiAgICBhbmltYXRpb25CcmlkZ2UuaW5pdCgpO1xuICB9KTtcbn0gZWxzZSB7XG4gIGFuaW1hdGlvbkJyaWRnZS5pbml0KCk7XG59IiwgIi8qKlxuICogTWl4aW5CYXNlIC0gU2hhcmVkIHV0aWxpdGllcyBmb3IgY3JlYXRpbmcgY29uc2lzdGVudCBtaXhpbnNcbiAqIE5PVCBhIGJhc2UgY2xhc3MgLSB0aGVzZSBhcmUgaGVscGVyIGZ1bmN0aW9ucyBmb3IgbWl4aW4gY3JlYXRpb25cbiAqL1xuXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuLi91dGlscy9Mb2dnZXIuanMnO1xuXG4vKipcbiAqIE1peGluIGNyZWF0aW9uIHV0aWxpdGllcyAtIHNoYXJlZCBwYXR0ZXJucyBhY3Jvc3MgYWxsIG1peGluc1xuICovXG5leHBvcnQgY29uc3QgTWl4aW5VdGlsaXRpZXMgPSB7XG4gIFxuICAvKipcbiAgICogQ3JlYXRlIGEgc3RhbmRhcmRpemVkIG1peGluIGluaXRpYWxpemF0aW9uIGZ1bmN0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtaXhpbk5hbWUgLSBOYW1lIG9mIHRoZSBtaXhpbiBmb3IgbG9nZ2luZ1xuICAgKiBAcGFyYW0ge09iamVjdH0gZGVmYXVsdE9wdGlvbnMgLSBEZWZhdWx0IGNvbmZpZ3VyYXRpb24gb3B0aW9uc1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBzZXR1cEZ1bmN0aW9uIC0gRnVuY3Rpb24gdG8gY2FsbCBhZnRlciBvcHRpb25zIGFyZSBzZXRcbiAgICogQHJldHVybnMge0Z1bmN0aW9ufSBTdGFuZGFyZGl6ZWQgaW5pdCBmdW5jdGlvblxuICAgKi9cbiAgY3JlYXRlSW5pdEZ1bmN0aW9uKG1peGluTmFtZSwgZGVmYXVsdE9wdGlvbnMsIHNldHVwRnVuY3Rpb24pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24ob3B0aW9ucyA9IHt9KSB7XG4gICAgICBjb25zdCBsb2cgPSBsb2dnZXIuY29tcG9uZW50KG1peGluTmFtZSk7XG4gICAgICBcbiAgICAgIC8vIERlcml2ZSBjb252ZW50aW9uYWwgb3B0aW9ucyBwcm9wZXJ0eSBuYW1lOiBFeHBhbmRhYmxlTWl4aW4gLT4gZXhwYW5kYWJsZU9wdGlvbnNcbiAgICAgIGNvbnN0IGJhc2VOYW1lID0gbWl4aW5OYW1lLmVuZHNXaXRoKCdNaXhpbicpID8gbWl4aW5OYW1lLnNsaWNlKDAsIC01KSA6IG1peGluTmFtZTtcbiAgICAgIGNvbnN0IGNhbm9uaWNhbCA9IGJhc2VOYW1lLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpICsgYmFzZU5hbWUuc2xpY2UoMSk7XG4gICAgICBjb25zdCBvcHRpb25zUHJvcGVydHkgPSBgJHtjYW5vbmljYWx9T3B0aW9uc2A7XG4gICAgICBcbiAgICAgIC8vIE1lcmdlIG9wdGlvbnMgd2l0aCBkZWZhdWx0c1xuICAgICAgdGhpc1tvcHRpb25zUHJvcGVydHldID0ge1xuICAgICAgICAuLi5kZWZhdWx0T3B0aW9ucyxcbiAgICAgICAgLi4ub3B0aW9uc1xuICAgICAgfTtcbiAgICAgIFxuICAgICAgLy8gQ2FsbCB0aGUgc2V0dXAgZnVuY3Rpb24gd2l0aCBjb250ZXh0XG4gICAgICBpZiAodHlwZW9mIHNldHVwRnVuY3Rpb24gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgc2V0dXBGdW5jdGlvbi5jYWxsKHRoaXMpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBsb2cuZGVidWcoYCR7bWl4aW5OYW1lfSBpbml0aWFsaXplZCBmb3IgJHt0aGlzLm5hbWUgfHwgJ2NvbXBvbmVudCd9YCk7XG4gICAgfTtcbiAgfSxcblxuICAvKipcbiAgICogQ3JlYXRlIGEgc3RhbmRhcmRpemVkIGVsZW1lbnQgc2V0dXAgZnVuY3Rpb25cbiAgICogQHBhcmFtIHtPYmplY3R9IHNlbGVjdG9ycyAtIE1hcCBvZiBlbGVtZW50IG5hbWVzIHRvIHNlbGVjdG9yc1xuICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IEVsZW1lbnQgc2V0dXAgZnVuY3Rpb25cbiAgICovXG4gIGNyZWF0ZUVsZW1lbnRTZXR1cChzZWxlY3RvcnMpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoIXRoaXMuZWxlbWVudCkgcmV0dXJuO1xuICAgICAgXG4gICAgICBPYmplY3QuZW50cmllcyhzZWxlY3RvcnMpLmZvckVhY2goKFtuYW1lLCBzZWxlY3Rvcl0pID0+IHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc2VsZWN0b3IpKSB7XG4gICAgICAgICAgLy8gTXVsdGlwbGUgZWxlbWVudHNcbiAgICAgICAgICB0aGlzW25hbWVdID0gQXJyYXkuZnJvbSh0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvclswXSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFNpbmdsZSBlbGVtZW50XG4gICAgICAgICAgdGhpc1tuYW1lXSA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcbiAgfSxcblxuICAvKipcbiAgICogQ3JlYXRlIGEgc3RhbmRhcmRpemVkIGV2ZW50IHNldHVwIGZ1bmN0aW9uIHdpdGggYXV0b21hdGljIGNsZWFudXBcbiAgICogQHBhcmFtIHtPYmplY3R9IGV2ZW50TWFwIC0gTWFwIG9mIGVsZW1lbnRzIHRvIGV2ZW50IGhhbmRsZXJzXG4gICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gRXZlbnQgc2V0dXAgZnVuY3Rpb25cbiAgICovXG4gIGNyZWF0ZUV2ZW50U2V0dXAoZXZlbnRNYXApIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICBPYmplY3QuZW50cmllcyhldmVudE1hcCkuZm9yRWFjaCgoW2VsZW1lbnROYW1lLCBldmVudHNdKSA9PiB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnRzID0gQXJyYXkuaXNBcnJheSh0aGlzW2VsZW1lbnROYW1lXSkgPyB0aGlzW2VsZW1lbnROYW1lXSA6IFt0aGlzW2VsZW1lbnROYW1lXV07XG4gICAgICAgIFxuICAgICAgICBlbGVtZW50cy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgICAgIGlmICghZWxlbWVudCkgcmV0dXJuO1xuICAgICAgICAgIFxuICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGV2ZW50cykuZm9yRWFjaCgoW2V2ZW50VHlwZSwgaGFuZGxlcl0pID0+IHtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihlbGVtZW50LCBldmVudFR5cGUsIGhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSxcblxuICAvKipcbiAgICogQ3JlYXRlIGEgc3RhbmRhcmRpemVkIGhlYWx0aCBjaGVjayBmdW5jdGlvblxuICAgKiBAcGFyYW0ge0Z1bmN0aW9uW119IGNoZWNrcyAtIEFycmF5IG9mIGhlYWx0aCBjaGVjayBmdW5jdGlvbnNcbiAgICogQHJldHVybnMge0Z1bmN0aW9ufSBIZWFsdGggY2hlY2sgZnVuY3Rpb25cbiAgICovXG4gIGNyZWF0ZUhlYWx0aENoZWNrKGNoZWNrcykge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBjaGVja3MuZXZlcnkoY2hlY2sgPT4gY2hlY2suY2FsbCh0aGlzKSk7XG4gICAgfTtcbiAgfSxcblxuICAvKipcbiAgICogQ3JlYXRlIGEgc3RhbmRhcmRpemVkIGNsZWFudXAgZnVuY3Rpb25cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY3VzdG9tQ2xlYW51cCAtIE9wdGlvbmFsIGN1c3RvbSBjbGVhbnVwIGZ1bmN0aW9uXG4gICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gQ2xlYW51cCBmdW5jdGlvblxuICAgKi9cbiAgY3JlYXRlQ2xlYW51cChjdXN0b21DbGVhbnVwKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgLy8gQ2FsbCBjdXN0b20gY2xlYW51cCBpZiBwcm92aWRlZFxuICAgICAgaWYgKHR5cGVvZiBjdXN0b21DbGVhbnVwID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGN1c3RvbUNsZWFudXAuY2FsbCh0aGlzKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gU3RhbmRhcmQgY2xlYW51cCBwYXR0ZXJucyBjYW4gZ28gaGVyZVxuICAgICAgLy8gKE1vc3QgY2xlYW51cCBpcyBoYW5kbGVkIGJ5IENvbXBvbmVudCBiYXNlIGNsYXNzKVxuICAgIH07XG4gIH1cbn07XG5cbi8qKlxuICogQ29tbW9uIG1peGluIHBhdHRlcm5zIGFuZCB0ZW1wbGF0ZXNcbiAqL1xuZXhwb3J0IGNvbnN0IE1peGluUGF0dGVybnMgPSB7XG4gIFxuICAvKipcbiAgICogU3RhdGUgbWFuYWdlbWVudCBwYXR0ZXJuIGZvciBtaXhpbnNcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0YXRlTmFtZSAtIE5hbWUgb2YgdGhlIHN0YXRlIHByb3BlcnR5XG4gICAqIEBwYXJhbSB7Kn0gaW5pdGlhbFZhbHVlIC0gSW5pdGlhbCBzdGF0ZSB2YWx1ZVxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBTdGF0ZSBtYW5hZ2VtZW50IGZ1bmN0aW9uc1xuICAgKi9cbiAgY3JlYXRlU3RhdGUoc3RhdGVOYW1lLCBpbml0aWFsVmFsdWUpIHtcbiAgICBjb25zdCBnZXR0ZXJOYW1lID0gYGdldCR7c3RhdGVOYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RhdGVOYW1lLnNsaWNlKDEpfWA7XG4gICAgY29uc3Qgc2V0dGVyTmFtZSA9IGBzZXQke3N0YXRlTmFtZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0YXRlTmFtZS5zbGljZSgxKX1gO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBbZ2V0dGVyTmFtZV0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzW2BfJHtzdGF0ZU5hbWV9YF0gfHwgaW5pdGlhbFZhbHVlO1xuICAgICAgfSxcbiAgICAgIFxuICAgICAgW3NldHRlck5hbWVdKHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IG9sZFZhbHVlID0gdGhpc1tgXyR7c3RhdGVOYW1lfWBdO1xuICAgICAgICB0aGlzW2BfJHtzdGF0ZU5hbWV9YF0gPSB2YWx1ZTtcbiAgICAgICAgXG4gICAgICAgIC8vIEVtaXQgc3RhdGUgY2hhbmdlIGV2ZW50IGlmIGNvbXBvbmVudCBzdXBwb3J0cyBpdFxuICAgICAgICBpZiAodGhpcy5lbWl0KSB7XG4gICAgICAgICAgdGhpcy5lbWl0KGAke3N0YXRlTmFtZX0tY2hhbmdlZGAsIHsgb2xkVmFsdWUsIG5ld1ZhbHVlOiB2YWx1ZSB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH0sXG5cbiAgLyoqXG4gICAqIE9wdGlvbnMgdmFsaWRhdGlvbiBwYXR0ZXJuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzY2hlbWEgLSBPcHRpb25zIHNjaGVtYSBmb3IgdmFsaWRhdGlvblxuICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFZhbGlkYXRpb24gZnVuY3Rpb25cbiAgICovXG4gIGNyZWF0ZU9wdGlvbnNWYWxpZGF0b3Ioc2NoZW1hKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIGNvbnN0IGVycm9ycyA9IFtdO1xuICAgICAgXG4gICAgICBPYmplY3QuZW50cmllcyhzY2hlbWEpLmZvckVhY2goKFtrZXksIGNvbmZpZ10pID0+IHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBvcHRpb25zW2tleV07XG4gICAgICAgIFxuICAgICAgICBpZiAoY29uZmlnLnJlcXVpcmVkICYmIHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBlcnJvcnMucHVzaChgUmVxdWlyZWQgb3B0aW9uICcke2tleX0nIGlzIG1pc3NpbmdgKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQgJiYgY29uZmlnLnR5cGUgJiYgdHlwZW9mIHZhbHVlICE9PSBjb25maWcudHlwZSkge1xuICAgICAgICAgIGVycm9ycy5wdXNoKGBPcHRpb24gJyR7a2V5fScgbXVzdCBiZSBvZiB0eXBlICR7Y29uZmlnLnR5cGV9LCBnb3QgJHt0eXBlb2YgdmFsdWV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChjb25maWcudmFsaWRhdGUgJiYgIWNvbmZpZy52YWxpZGF0ZSh2YWx1ZSkpIHtcbiAgICAgICAgICBlcnJvcnMucHVzaChgT3B0aW9uICcke2tleX0nIGZhaWxlZCB2YWxpZGF0aW9uYCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBpZiAoZXJyb3JzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBPcHRpb25zIHZhbGlkYXRpb24gZmFpbGVkOiAke2Vycm9ycy5qb2luKCcsICcpfWApO1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICB9LFxuXG4gIC8qKlxuICAgKiBFdmVudCBkZWxlZ2F0aW9uIHBhdHRlcm4gZm9yIG1peGluc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gY29udGFpbmVyU2VsZWN0b3IgLSBDb250YWluZXIgZWxlbWVudCBzZWxlY3RvclxuICAgKiBAcGFyYW0ge09iamVjdH0gZGVsZWdhdGlvbk1hcCAtIE1hcCBvZiBzZWxlY3RvcnMgdG8gaGFuZGxlcnNcbiAgICogQHJldHVybnMge09iamVjdH0gRGVsZWdhdGlvbiBzZXR1cCBmdW5jdGlvbnNcbiAgICovXG4gIGNyZWF0ZUV2ZW50RGVsZWdhdGlvbihjb250YWluZXJTZWxlY3RvciwgZGVsZWdhdGlvbk1hcCkge1xuICAgIHJldHVybiB7XG4gICAgICBzZXR1cERlbGVnYXRpb24oKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKSB8fCB0aGlzLmVsZW1lbnQ7XG4gICAgICAgIFxuICAgICAgICBPYmplY3QuZW50cmllcyhkZWxlZ2F0aW9uTWFwKS5mb3JFYWNoKChbc2VsZWN0b3IsIGhhbmRsZXJdKSA9PiB7XG4gICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGNvbnRhaW5lciwgJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0LmNsb3Nlc3Qoc2VsZWN0b3IpO1xuICAgICAgICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICAgICAgICBoYW5kbGVyLmNhbGwodGhpcywgZSwgdGFyZ2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxufTtcblxuLyoqXG4gKiBNaXhpbiBjb21wb3NpdGlvbiBoZWxwZXIgLSBjb21iaW5lIG11bHRpcGxlIG1peGluIHV0aWxpdGllc1xuICogQHBhcmFtIHtPYmplY3RbXX0gdXRpbGl0aWVzIC0gQXJyYXkgb2YgdXRpbGl0eSBvYmplY3RzIHRvIGNvbWJpbmVcbiAqIEByZXR1cm5zIHtPYmplY3R9IENvbWJpbmVkIHV0aWxpdHkgb2JqZWN0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb21iaW5lTWl4aW5VdGlsaXRpZXMoLi4udXRpbGl0aWVzKSB7XG4gIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCAuLi51dGlsaXRpZXMpO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlIG1peGluIGludGVyZmFjZSAtIGVuc3VyZSBtaXhpbiBmb2xsb3dzIGNvbnZlbnRpb25zXG4gKiBAcGFyYW0ge09iamVjdH0gbWl4aW4gLSBNaXhpbiBvYmplY3QgdG8gdmFsaWRhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSByZXF1aXJlbWVudHMgLSBSZXF1aXJlZCBwcm9wZXJ0aWVzL21ldGhvZHNcbiAqIEByZXR1cm5zIHtib29sZWFufSBXaGV0aGVyIG1peGluIGlzIHZhbGlkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZU1peGluSW50ZXJmYWNlKG1peGluLCByZXF1aXJlbWVudHMgPSB7fSkge1xuICBjb25zdCBsb2cgPSBsb2dnZXIuY29tcG9uZW50KCdNaXhpblZhbGlkYXRvcicpO1xuICBcbiAgLy8gQ2hlY2sgZm9yIHJlcXVpcmVkIG1ldGhvZHNcbiAgaWYgKHJlcXVpcmVtZW50cy5tZXRob2RzKSB7XG4gICAgY29uc3QgbWlzc2luZyA9IHJlcXVpcmVtZW50cy5tZXRob2RzLmZpbHRlcihtZXRob2QgPT4gIShtZXRob2QgaW4gbWl4aW4pKTtcbiAgICBpZiAobWlzc2luZy5sZW5ndGggPiAwKSB7XG4gICAgICBsb2cuZXJyb3IoYE1peGluIG1pc3NpbmcgcmVxdWlyZWQgbWV0aG9kczogJHttaXNzaW5nLmpvaW4oJywgJyl9YCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIFxuICAvLyBDaGVjayBmb3IgaW5pdCBmdW5jdGlvbiBuYW1pbmcgY29udmVudGlvblxuICBjb25zdCBpbml0TWV0aG9kcyA9IE9iamVjdC5rZXlzKG1peGluKS5maWx0ZXIoa2V5ID0+IGtleS5zdGFydHNXaXRoKCdpbml0JykpO1xuICBpZiAoaW5pdE1ldGhvZHMubGVuZ3RoID09PSAwKSB7XG4gICAgbG9nLndhcm4oJ01peGluIGRvZXMgbm90IGZvbGxvdyBpbml0KiBuYW1pbmcgY29udmVudGlvbicpO1xuICB9XG4gIFxuICAvLyBDaGVjayBmb3IgaGVhbHRoIGNoZWNrIG1ldGhvZFxuICBjb25zdCBoZWFsdGhNZXRob2RzID0gT2JqZWN0LmtleXMobWl4aW4pLmZpbHRlcihrZXkgPT4ga2V5LmluY2x1ZGVzKCdIZWFsdGgnKSk7XG4gIGlmIChoZWFsdGhNZXRob2RzLmxlbmd0aCA9PT0gMCkge1xuICAgIGxvZy53YXJuKCdNaXhpbiBkb2VzIG5vdCBwcm92aWRlIGhlYWx0aCBjaGVjayBtZXRob2QnKTtcbiAgfVxuICBcbiAgcmV0dXJuIHRydWU7XG59XG4iLCAiLyoqXG4gKiBFeHBhbmRhYmxlTWl4aW4gLSBNaXhpbiBmb3IgY29tcG9uZW50cyB0aGF0IG5lZWQgZXhwYW5kL2NvbGxhcHNlIGZ1bmN0aW9uYWxpdHlcbiAqIFByb3ZpZGVzIHN0YW5kYXJkaXplZCB0b2dnbGUgYmVoYXZpb3IsIGFjY2Vzc2liaWxpdHksIGFuZCBhbmltYXRpb24gaW50ZWdyYXRpb25cbiAqIFJlZmFjdG9yZWQgdG8gdXNlIE1peGluQmFzZSB1dGlsaXRpZXMgZm9yIGNvbnNpc3RlbmN5XG4gKi9cblxuaW1wb3J0IHsgYW5pbWF0aW9uQnJpZGdlIH0gZnJvbSAnLi4vY29yZS9BbmltYXRpb25CcmlkZ2UuanMnO1xuaW1wb3J0IHsgTWl4aW5VdGlsaXRpZXMsIE1peGluUGF0dGVybnMgfSBmcm9tICcuL01peGluQmFzZS5qcyc7XG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuLi91dGlscy9Mb2dnZXIuanMnO1xuY29uc3QgbG9nID0gbG9nZ2VyLmNvbXBvbmVudCgnRXhwYW5kYWJsZU1peGluJyk7XG5cbi8qKlxuICogTWl4aW4gdGhhdCBhZGRzIGV4cGFuZC9jb2xsYXBzZSBmdW5jdGlvbmFsaXR5IHRvIGNvbXBvbmVudHNcbiAqIFVzYWdlOiBPYmplY3QuYXNzaWduKFlvdXJDb21wb25lbnQucHJvdG90eXBlLCBFeHBhbmRhYmxlTWl4aW4pO1xuICovXG5leHBvcnQgY29uc3QgRXhwYW5kYWJsZU1peGluID0ge1xuICBcbiAgLyoqXG4gICAqIEluaXRpYWxpemUgZXhwYW5kYWJsZSBmdW5jdGlvbmFsaXR5IHVzaW5nIE1peGluQmFzZSB1dGlsaXRpZXNcbiAgICogQ2FsbCB0aGlzIGZyb20geW91ciBjb21wb25lbnQncyBvbkluaXQgbWV0aG9kXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gQ29uZmlndXJhdGlvbiBvcHRpb25zXG4gICAqL1xuICBpbml0RXhwYW5kYWJsZTogTWl4aW5VdGlsaXRpZXMuY3JlYXRlSW5pdEZ1bmN0aW9uKFxuICAgICdFeHBhbmRhYmxlTWl4aW4nLFxuICAgIHtcbiAgICAgIHRvZ2dsZVNlbGVjdG9yOiAnLnNpZGViYXJfX3RvZ2dsZScsXG4gICAgICBjb250ZW50U2VsZWN0b3I6ICcubmVzdGVkLWNvbnRlbnQnLFxuICAgICAgYW5pbWF0aW9uVGltaW5nOiAnbWVkaXVtJyxcbiAgICAgIGF1dG9FeHBhbmQ6IGZhbHNlXG4gICAgfSxcbiAgICBmdW5jdGlvbiBzZXR1cEV4cGFuZGFibGUoKSB7XG4gICAgICB0aGlzLnNldHVwRXhwYW5kYWJsZUVsZW1lbnRzKCk7XG4gICAgICB0aGlzLnNldHVwRXhwYW5kYWJsZUV2ZW50cygpO1xuICAgICAgdGhpcy5zZXR1cEV4cGFuZGFibGVBY2Nlc3NpYmlsaXR5KCk7XG4gICAgfVxuICApLFxuXG4gIC8qKlxuICAgKiBGaW5kIGFuZCBjYWNoZSBleHBhbmRhYmxlIGVsZW1lbnRzIHVzaW5nIHN0YW5kYXJkaXplZCBzZXR1cFxuICAgKi9cbiAgc2V0dXBFeHBhbmRhYmxlRWxlbWVudHMoKSB7XG4gICAgaWYgKCF0aGlzLmVsZW1lbnQpIHJldHVybjtcbiAgICBcbiAgICAvLyBVc2UgZXhwYW5kYWJsZSBvcHRpb25zIHNldCBieSBNaXhpblV0aWxpdGllcy5jcmVhdGVJbml0RnVuY3Rpb25cbiAgICBjb25zdCB0b2dnbGVTZWxlY3RvciA9IHRoaXMuZXhwYW5kYWJsZU9wdGlvbnMudG9nZ2xlU2VsZWN0b3I7XG4gICAgdGhpcy50b2dnbGVzID0gQXJyYXkuZnJvbSh0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0b2dnbGVTZWxlY3RvcikpO1xuICAgIFxuICAgIC8vIENhY2hlIGNvbnRlbnQgZWxlbWVudHMgZm9yIGVhY2ggdG9nZ2xlXG4gICAgdGhpcy50b2dnbGVDb250ZW50TWFwID0gbmV3IE1hcCgpO1xuICAgIFxuICAgIHRoaXMudG9nZ2xlcy5mb3JFYWNoKHRvZ2dsZSA9PiB7XG4gICAgICBjb25zdCBsaXN0SXRlbSA9IHRvZ2dsZS5jbG9zZXN0KCdsaScpO1xuICAgICAgY29uc3QgY29udGVudCA9IGxpc3RJdGVtPy5xdWVyeVNlbGVjdG9yKHRoaXMuZXhwYW5kYWJsZU9wdGlvbnMuY29udGVudFNlbGVjdG9yKTtcbiAgICAgIFxuICAgICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgICAgdGhpcy50b2dnbGVDb250ZW50TWFwLnNldCh0b2dnbGUsIGNvbnRlbnQpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTZXR1cCBldmVudCBsaXN0ZW5lcnMgZm9yIHRvZ2dsZXNcbiAgICovXG4gIHNldHVwRXhwYW5kYWJsZUV2ZW50cygpIHtcbiAgICBpZiAoIXRoaXMudG9nZ2xlcykgcmV0dXJuO1xuICAgIFxuICAgIHRoaXMudG9nZ2xlcy5mb3JFYWNoKHRvZ2dsZSA9PiB7XG4gICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIodG9nZ2xlLCAnY2xpY2snLCBhc3luYyAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuaGFuZGxlVG9nZ2xlQ2xpY2sodG9nZ2xlKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTZXR1cCBhY2Nlc3NpYmlsaXR5IGF0dHJpYnV0ZXMgZm9yIHRvZ2dsZXNcbiAgICovXG4gIHNldHVwRXhwYW5kYWJsZUFjY2Vzc2liaWxpdHkoKSB7XG4gICAgaWYgKCF0aGlzLnRvZ2dsZXMpIHJldHVybjtcbiAgICBcbiAgICB0aGlzLnRvZ2dsZXMuZm9yRWFjaCh0b2dnbGUgPT4ge1xuICAgICAgLy8gU2V0IGluaXRpYWwgQVJJQSBhdHRyaWJ1dGVzIGlmIG5vdCBhbHJlYWR5IHNldFxuICAgICAgaWYgKCF0b2dnbGUuaGFzQXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJykpIHtcbiAgICAgICAgdG9nZ2xlLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICdmYWxzZScpO1xuICAgICAgfVxuICAgICAgaWYgKCF0b2dnbGUuaGFzQXR0cmlidXRlKCdyb2xlJykpIHtcbiAgICAgICAgdG9nZ2xlLnNldEF0dHJpYnV0ZSgncm9sZScsICdidXR0b24nKTtcbiAgICAgIH1cbiAgICAgIGlmICghdG9nZ2xlLmhhc0F0dHJpYnV0ZSgndGFiaW5kZXgnKSkge1xuICAgICAgICB0b2dnbGUuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICcwJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEhhbmRsZSB0b2dnbGUgYnV0dG9uIGNsaWNrc1xuICAgKiBAcGFyYW0ge0VsZW1lbnR9IHRvZ2dsZSAtIFRvZ2dsZSBidXR0b24gZWxlbWVudFxuICAgKi9cbiAgYXN5bmMgaGFuZGxlVG9nZ2xlQ2xpY2sodG9nZ2xlKSB7XG4gICAgY29uc3QgaXNFeHBhbmRlZCA9IHRvZ2dsZS5nZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnKSA9PT0gJ3RydWUnO1xuICAgIGNvbnN0IG5ld1N0YXRlID0gIWlzRXhwYW5kZWQ7XG4gICAgXG4gICAgLy8gRW1pdCBldmVudCBiZWZvcmUgdG9nZ2xlXG4gICAgdGhpcy5lbWl0KCdiZWZvcmUtdG9nZ2xlJywge1xuICAgICAgdG9nZ2xlLFxuICAgICAgZXhwYW5kaW5nOiBuZXdTdGF0ZSxcbiAgICAgIGNvbGxhcHNpbmc6ICFuZXdTdGF0ZVxuICAgIH0pO1xuICAgIFxuICAgIC8vIEZpcmUtYW5kLWZvcmdldCB0aGUgYW5pbWF0aW9uIHRvIGF2b2lkIHNlcmlhbGl6aW5nIHJhcGlkIGludGVyYWN0aW9uc1xuICAgIC8vIGF3YWl0IHRoaXMuc2V0VG9nZ2xlU3RhdGUodG9nZ2xlLCBuZXdTdGF0ZSk7XG4gICAgY29uc3QgX3Byb21pc2UgPSB0aGlzLnNldFRvZ2dsZVN0YXRlKHRvZ2dsZSwgbmV3U3RhdGUpO1xuICAgIFxuICAgIC8vIEVtaXQgZXZlbnQgYWZ0ZXIgdG9nZ2xlXG4gICAgdGhpcy5lbWl0KCdhZnRlci10b2dnbGUnLCB7XG4gICAgICB0b2dnbGUsXG4gICAgICBleHBhbmRlZDogbmV3U3RhdGUsXG4gICAgICBjb2xsYXBzZWQ6ICFuZXdTdGF0ZVxuICAgIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGV4cGFuZC9jb2xsYXBzZSBzdGF0ZSBvZiBhIHRvZ2dsZVxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IHRvZ2dsZSAtIFRvZ2dsZSBidXR0b24gZWxlbWVudFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGV4cGFuZCAtIFdoZXRoZXIgdG8gZXhwYW5kICh0cnVlKSBvciBjb2xsYXBzZSAoZmFsc2UpXG4gICAqL1xuICBhc3luYyBzZXRUb2dnbGVTdGF0ZSh0b2dnbGUsIGV4cGFuZCkge1xuICAgIGNvbnN0IGNvbnRlbnQgPSB0aGlzLnRvZ2dsZUNvbnRlbnRNYXAuZ2V0KHRvZ2dsZSk7XG4gICAgaWYgKCFjb250ZW50KSB7XG4gICAgICBsb2cud2FybignTm8gY29udGVudCBmb3VuZCBmb3IgdG9nZ2xlOicsIHRvZ2dsZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIEFSSUEgYW5kIHZpc3VhbCBzdGF0ZSBpbW1lZGlhdGVseSBmb3IgYmV0dGVyIFVYXG4gICAgdG9nZ2xlLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsIGV4cGFuZC50b1N0cmluZygpKTtcbiAgICBcbiAgICAvLyBVcGRhdGUgdmlzdWFsIGluZGljYXRvciAoY2hldnJvbiByb3RhdGlvbilcbiAgICBjb25zdCBjaGV2cm9uID0gdG9nZ2xlLnF1ZXJ5U2VsZWN0b3IoJ3N2ZywgLmNoZXZyb24sIC5pY29uJyk7XG4gICAgaWYgKGNoZXZyb24pIHtcbiAgICAgIGlmIChleHBhbmQpIHtcbiAgICAgICAgY2hldnJvbi5jbGFzc0xpc3QuYWRkKCdyb3RhdGUtOTAnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNoZXZyb24uY2xhc3NMaXN0LnJlbW92ZSgncm90YXRlLTkwJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUGVyZm9ybSBhbmltYXRpb25cbiAgICBpZiAoZXhwYW5kKSB7XG4gICAgICBpZiAodGhpcy5pc0luaXRpYWxpemVkKSB7XG4gICAgICAgIGF3YWl0IGFuaW1hdGlvbkJyaWRnZS5leHBhbmQoY29udGVudCwgeyB0aW1pbmc6IHRoaXMuZXhwYW5kYWJsZU9wdGlvbnMuYW5pbWF0aW9uVGltaW5nIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSW5zdGFudCBleHBhbnNpb24gZHVyaW5nIGluaXRpYWxpemF0aW9uXG4gICAgICAgIGFuaW1hdGlvbkJyaWRnZS5zZXRDb2xsYXBzZVN0YXRlKGNvbnRlbnQsICdleHBhbmRlZCcpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5pc0luaXRpYWxpemVkKSB7XG4gICAgICAgIGF3YWl0IGFuaW1hdGlvbkJyaWRnZS5jb2xsYXBzZShjb250ZW50LCB7IHRpbWluZzogdGhpcy5leHBhbmRhYmxlT3B0aW9ucy5hbmltYXRpb25UaW1pbmcgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBJbnN0YW50IGNvbGxhcHNlIGR1cmluZyBpbml0aWFsaXphdGlvblxuICAgICAgICBhbmltYXRpb25CcmlkZ2Uuc2V0Q29sbGFwc2VTdGF0ZShjb250ZW50LCAnY29sbGFwc2VkJyk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBFeHBhbmQgYSBzcGVjaWZpYyB0b2dnbGVcbiAgICogQHBhcmFtIHtFbGVtZW50fSB0b2dnbGUgLSBUb2dnbGUgYnV0dG9uIGVsZW1lbnRcbiAgICovXG4gIGFzeW5jIGV4cGFuZFRvZ2dsZSh0b2dnbGUpIHtcbiAgICBpZiAodG9nZ2xlLmdldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcpICE9PSAndHJ1ZScpIHtcbiAgICAgIGF3YWl0IHRoaXMuc2V0VG9nZ2xlU3RhdGUodG9nZ2xlLCB0cnVlKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIENvbGxhcHNlIGEgc3BlY2lmaWMgdG9nZ2xlXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gdG9nZ2xlIC0gVG9nZ2xlIGJ1dHRvbiBlbGVtZW50XG4gICAqL1xuICBhc3luYyBjb2xsYXBzZVRvZ2dsZSh0b2dnbGUpIHtcbiAgICBpZiAodG9nZ2xlLmdldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcpID09PSAndHJ1ZScpIHtcbiAgICAgIGF3YWl0IHRoaXMuc2V0VG9nZ2xlU3RhdGUodG9nZ2xlLCBmYWxzZSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBFeHBhbmQgYWxsIHRvZ2dsZXNcbiAgICovXG4gIGFzeW5jIGV4cGFuZEFsbCgpIHtcbiAgICBpZiAoIXRoaXMudG9nZ2xlcykgcmV0dXJuO1xuICAgIFxuICAgIGNvbnN0IGV4cGFuZFByb21pc2VzID0gdGhpcy50b2dnbGVzLm1hcCh0b2dnbGUgPT4ge1xuICAgICAgaWYgKHRvZ2dsZS5nZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnKSA9PT0gJ2ZhbHNlJykge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRUb2dnbGVTdGF0ZSh0b2dnbGUsIHRydWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH0pO1xuICAgIFxuICAgIGF3YWl0IFByb21pc2UuYWxsKGV4cGFuZFByb21pc2VzKTtcbiAgICB0aGlzLmVtaXQoJ2V4cGFuZGVkLWFsbCcpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDb2xsYXBzZSBhbGwgdG9nZ2xlc1xuICAgKi9cbiAgYXN5bmMgY29sbGFwc2VBbGwoKSB7XG4gICAgaWYgKCF0aGlzLnRvZ2dsZXMpIHJldHVybjtcbiAgICBcbiAgICBjb25zdCBjb2xsYXBzZVByb21pc2VzID0gdGhpcy50b2dnbGVzLm1hcCh0b2dnbGUgPT4ge1xuICAgICAgaWYgKHRvZ2dsZS5nZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnKSA9PT0gJ3RydWUnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldFRvZ2dsZVN0YXRlKHRvZ2dsZSwgZmFsc2UpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH0pO1xuICAgIFxuICAgIGF3YWl0IFByb21pc2UuYWxsKGNvbGxhcHNlUHJvbWlzZXMpO1xuICAgIHRoaXMuZW1pdCgnY29sbGFwc2VkLWFsbCcpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgZXhwYW5kZWQgdG9nZ2xlc1xuICAgKiBAcmV0dXJucyB7RWxlbWVudFtdfSBBcnJheSBvZiBleHBhbmRlZCB0b2dnbGUgZWxlbWVudHNcbiAgICovXG4gIGdldEV4cGFuZGVkVG9nZ2xlcygpIHtcbiAgICBpZiAoIXRoaXMudG9nZ2xlcykgcmV0dXJuIFtdO1xuICAgIHJldHVybiB0aGlzLnRvZ2dsZXMuZmlsdGVyKHRvZ2dsZSA9PiB0b2dnbGUuZ2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJykgPT09ICd0cnVlJyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCBjb2xsYXBzZWQgdG9nZ2xlc1xuICAgKiBAcmV0dXJucyB7RWxlbWVudFtdfSBBcnJheSBvZiBjb2xsYXBzZWQgdG9nZ2xlIGVsZW1lbnRzXG4gICAqL1xuICBnZXRDb2xsYXBzZWRUb2dnbGVzKCkge1xuICAgIGlmICghdGhpcy50b2dnbGVzKSByZXR1cm4gW107XG4gICAgcmV0dXJuIHRoaXMudG9nZ2xlcy5maWx0ZXIodG9nZ2xlID0+IHRvZ2dsZS5nZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnKSA9PT0gJ2ZhbHNlJyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGV4cGFuZGFibGUgZnVuY3Rpb25hbGl0eSBpcyBoZWFsdGh5IHVzaW5nIHN0YW5kYXJkaXplZCBjaGVja3NcbiAgICogQHJldHVybnMge2Jvb2xlYW59IFdoZXRoZXIgZXhwYW5kYWJsZSBmdW5jdGlvbmFsaXR5IGlzIHdvcmtpbmdcbiAgICovXG4gIGlzRXhwYW5kYWJsZUhlYWx0aHk6IE1peGluVXRpbGl0aWVzLmNyZWF0ZUhlYWx0aENoZWNrKFtcbiAgICBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMudG9nZ2xlcyAmJiB0aGlzLnRvZ2dsZXMubGVuZ3RoID4gMDsgfSxcbiAgICBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuZXhwYW5kYWJsZU9wdGlvbnMgIT09IHVuZGVmaW5lZDsgfSxcbiAgICBmdW5jdGlvbigpIHtcbiAgICAgIC8vIENoZWNrIGlmIHRvZ2dsZXMgaGF2ZSBwcm9wZXIgaW5pdGlhbGl6YXRpb25cbiAgICAgIHJldHVybiB0aGlzLnRvZ2dsZXMuZXZlcnkodG9nZ2xlID0+IHRvZ2dsZS5oYXNBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnKSk7XG4gICAgfSxcbiAgICBmdW5jdGlvbigpIHtcbiAgICAgIC8vIENoZWNrIGlmIHRvZ2dsZSBoYXMgZXZlbnQgbGlzdGVuZXIgdHJhY2tpbmdcbiAgICAgIHJldHVybiB0aGlzLnRvZ2dsZXMuZXZlcnkodG9nZ2xlID0+IHtcbiAgICAgICAgaWYgKCF0b2dnbGUuZGF0YXNldCB8fCAhdG9nZ2xlLmRhdGFzZXQuY29tcG9uZW50TGlzdGVuZXJzKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0b2dnbGUuZGF0YXNldC5jb21wb25lbnRMaXN0ZW5lcnMuaW5jbHVkZXModGhpcy5pZCk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGZ1bmN0aW9uKCkge1xuICAgICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSB0aGUgcmlnaHQgbnVtYmVyIG9mIGNsaWNrIGxpc3RlbmVyc1xuICAgICAgaWYgKCF0aGlzLmV2ZW50TGlzdGVuZXJzKSByZXR1cm4gZmFsc2U7XG4gICAgICBjb25zdCB0b2dnbGVDbGlja0xpc3RlbmVycyA9IEFycmF5LmZyb20odGhpcy5ldmVudExpc3RlbmVycy52YWx1ZXMoKSlcbiAgICAgICAgLmZpbHRlcihsaXN0ZW5lciA9PiBsaXN0ZW5lci5ldmVudCA9PT0gJ2NsaWNrJyAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVzLmluY2x1ZGVzKGxpc3RlbmVyLmVsZW1lbnQpKTtcbiAgICAgIHJldHVybiB0b2dnbGVDbGlja0xpc3RlbmVycy5sZW5ndGggPT09IHRoaXMudG9nZ2xlcy5sZW5ndGg7XG4gICAgfVxuICBdKVxufTtcblxuLy8gVmFsaWRhdGUgbWl4aW4gaW50ZXJmYWNlIHVzaW5nIE1peGluQmFzZSB1dGlsaXRpZXNcbmltcG9ydCB7IHZhbGlkYXRlTWl4aW5JbnRlcmZhY2UgfSBmcm9tICcuL01peGluQmFzZS5qcyc7XG52YWxpZGF0ZU1peGluSW50ZXJmYWNlKEV4cGFuZGFibGVNaXhpbiwge1xuICBtZXRob2RzOiBbJ2luaXRFeHBhbmRhYmxlJywgJ2lzRXhwYW5kYWJsZUhlYWx0aHknXVxufSk7XG4iLCAiLyoqXG4gKiBSZXNwb25zaXZlTWl4aW4gLSBNaXhpbiBmb3IgY29tcG9uZW50cyB0aGF0IG5lZWQgcmVzcG9uc2l2ZSBtb2JpbGUvZGVza3RvcCBiZWhhdmlvclxuICogUHJvdmlkZXMgc3RhbmRhcmRpemVkIHJlc3BvbnNpdmUgc3RhdGUgbWFuYWdlbWVudCBhbmQgZXZlbnQgaGFuZGxpbmdcbiAqIFJlZmFjdG9yZWQgdG8gdXNlIE1peGluQmFzZSB1dGlsaXRpZXMgZm9yIGNvbnNpc3RlbmN5XG4gKi9cblxuaW1wb3J0IHsgTWl4aW5VdGlsaXRpZXMsIHZhbGlkYXRlTWl4aW5JbnRlcmZhY2UgfSBmcm9tICcuL01peGluQmFzZS5qcyc7XG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuLi91dGlscy9Mb2dnZXIuanMnO1xuY29uc3QgbG9nID0gbG9nZ2VyLmNvbXBvbmVudCgnUmVzcG9uc2l2ZU1peGluJyk7XG5cbi8qKlxuICogTWl4aW4gdGhhdCBhZGRzIHJlc3BvbnNpdmUgYmVoYXZpb3IgdG8gY29tcG9uZW50c1xuICogVXNhZ2U6IE9iamVjdC5hc3NpZ24oWW91ckNvbXBvbmVudC5wcm90b3R5cGUsIFJlc3BvbnNpdmVNaXhpbik7XG4gKi9cbmV4cG9ydCBjb25zdCBSZXNwb25zaXZlTWl4aW4gPSB7XG4gIFxuICAvKipcbiAgICogSW5pdGlhbGl6ZSByZXNwb25zaXZlIGZ1bmN0aW9uYWxpdHkgdXNpbmcgTWl4aW5CYXNlIHV0aWxpdGllc1xuICAgKiBDYWxsIHRoaXMgZnJvbSB5b3VyIGNvbXBvbmVudCdzIG9uSW5pdCBtZXRob2RcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBDb25maWd1cmF0aW9uIG9wdGlvbnNcbiAgICovXG4gIGluaXRSZXNwb25zaXZlOiBNaXhpblV0aWxpdGllcy5jcmVhdGVJbml0RnVuY3Rpb24oXG4gICAgJ1Jlc3BvbnNpdmVNaXhpbicsXG4gICAge1xuICAgICAgbW9iaWxlQnJlYWtwb2ludDogNzY4LFxuICAgICAgb3ZlcmxheVNlbGVjdG9yOiAnI21vYmlsZU5hdk92ZXJsYXknLFxuICAgICAgb3ZlcmxheVRvZ2dsZUNsYXNzOiAnaGlkZGVuJyxcbiAgICAgIGRlYm91bmNlRGVsYXk6IDE1MFxuICAgIH0sXG4gICAgZnVuY3Rpb24gc2V0dXBSZXNwb25zaXZlKCkge1xuICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZTsgLy8gVHJhY2sgbW9iaWxlIHN0YXRlXG4gICAgICB0aGlzLnJlc2l6ZVRpbWVvdXQgPSBudWxsOyAvLyBGb3IgZGVib3VuY2luZyByZXNpemUgZXZlbnRzXG4gICAgICBcbiAgICAgIHRoaXMuaW5pdGlhbGl6ZU1vYmlsZVN0YXRlKCk7XG4gICAgICB0aGlzLnNldHVwUmVzcG9uc2l2ZUhhbmRsaW5nKCk7XG4gICAgfVxuICApLFxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIG1vYmlsZSBzaWRlYmFyIHN0YXRlIHdpdGhvdXQgaW50ZXJmZXJpbmcgd2l0aCBkZXNrdG9wIENTU1xuICAgKi9cbiAgaW5pdGlhbGl6ZU1vYmlsZVN0YXRlKCkge1xuICAgIGNvbnN0IGlzTW9iaWxlID0gdGhpcy5pc01vYmlsZVZpZXdwb3J0KCk7XG4gICAgXG4gICAgaWYgKGlzTW9iaWxlKSB7XG4gICAgICAvLyBPbiBtb2JpbGUsIGNoZWNrIGlmIGNvbXBvbmVudCBpcyBjdXJyZW50bHkgb3BlblxuICAgICAgdGhpcy5pc09wZW4gPSB0aGlzLmVsZW1lbnQ/LmNsYXNzTGlzdC5jb250YWlucygndHJhbnNsYXRlLXgtMCcpICYmIFxuICAgICAgICAgICAgICAgICAgICAhdGhpcy5lbGVtZW50Py5jbGFzc0xpc3QuY29udGFpbnMoJy10cmFuc2xhdGUteC1mdWxsJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE9uIGRlc2t0b3AsIGNvbXBvbmVudCB2aXNpYmlsaXR5IGlzIGhhbmRsZWQgYnkgQ1NTLCBqdXN0IHRyYWNrIG1vYmlsZSBvdmVybGF5IHN0YXRlXG4gICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlOyAvLyBObyBtb2JpbGUgb3ZlcmxheSBzaG91bGQgYmUgYWN0aXZlIG9uIGRlc2t0b3BcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNldHVwIHJlc3BvbnNpdmUgaGFuZGxpbmcgd2l0aG91dCBmb3JjaW5nIGluaXRpYWwgc3RhdGVcbiAgICovXG4gIHNldHVwUmVzcG9uc2l2ZUhhbmRsaW5nKCkge1xuICAgIC8vIExpc3RlbiBmb3Igd2luZG93IHJlc2l6ZSB0byBoYW5kbGUgcmVzcG9uc2l2ZSBiZWhhdmlvclxuICAgIC8vIEJ1dCBkb24ndCBmb3JjZSBhbnkgaW5pdGlhbCBzdGF0ZSAtIGxldCBDU1MgaGFuZGxlIGl0XG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKHdpbmRvdywgJ3Jlc2l6ZScsICgpID0+IHtcbiAgICAgIC8vIERlYm91bmNlIHJlc2l6ZSBldmVudHNcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnJlc2l6ZVRpbWVvdXQpO1xuICAgICAgdGhpcy5yZXNpemVUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMuaGFuZGxlUmVzcG9uc2l2ZUNoYW5nZSgpO1xuICAgICAgfSwgdGhpcy5yZXNwb25zaXZlT3B0aW9ucy5kZWJvdW5jZURlbGF5KTtcbiAgICB9KTtcbiAgfSxcblxuICAvKipcbiAgICogSGFuZGxlIHJlc3BvbnNpdmUgY2hhbmdlcyB3aXRob3V0IGZvcmNpbmcgaW5pdGlhbCBkZXNrdG9wIHN0YXRlXG4gICAqL1xuICBoYW5kbGVSZXNwb25zaXZlQ2hhbmdlKCkge1xuICAgIGNvbnN0IGlzTW9iaWxlID0gdGhpcy5pc01vYmlsZVZpZXdwb3J0KCk7XG4gICAgXG4gICAgaWYgKGlzTW9iaWxlKSB7XG4gICAgICAvLyBPbiBtb2JpbGU6IGVuc3VyZSBhbnkgb3BlbiBvdmVybGF5IGlzIGNsb3NlZFxuICAgICAgdGhpcy5jbG9zZU92ZXJsYXlJZk9wZW4oKTtcbiAgICAgIGxvZy5kZWJ1ZyhgJHt0aGlzLm5hbWV9OiBSZXNwb25zaXZlIGNoYW5nZSB0byBtb2JpbGVgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gT24gZGVza3RvcDoganVzdCBlbnN1cmUgb3ZlcmxheXMgYXJlIGhpZGRlbiwgYnV0IGRvbid0IHRvdWNoIGNvbXBvbmVudCB2aXNpYmlsaXR5XG4gICAgICB0aGlzLmNsb3NlT3ZlcmxheUlmT3BlbigpO1xuICAgIH1cbiAgICBcbiAgICAvLyBFbWl0IHJlc3BvbnNpdmUgY2hhbmdlIGV2ZW50XG4gICAgdGhpcy5lbWl0KCdyZXNwb25zaXZlLWNoYW5nZScsIHtcbiAgICAgIGlzTW9iaWxlLFxuICAgICAgYnJlYWtwb2ludDogdGhpcy5yZXNwb25zaXZlT3B0aW9ucy5tb2JpbGVCcmVha3BvaW50XG4gICAgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGN1cnJlbnQgdmlld3BvcnQgaXMgbW9iaWxlXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBXaGV0aGVyIHZpZXdwb3J0IGlzIG1vYmlsZSBzaXplXG4gICAqL1xuICBpc01vYmlsZVZpZXdwb3J0KCkge1xuICAgIHJldHVybiB3aW5kb3cuaW5uZXJXaWR0aCA8IHRoaXMucmVzcG9uc2l2ZU9wdGlvbnMubW9iaWxlQnJlYWtwb2ludDtcbiAgfSxcblxuICAvKipcbiAgICogQ2xvc2Ugb3ZlcmxheSBhbmQgY2xlYW4gdXAgbW9iaWxlLXNwZWNpZmljIHN0YXRlIHdpdGhvdXQgdG91Y2hpbmcgY29tcG9uZW50IHZpc2liaWxpdHlcbiAgICovXG4gIGNsb3NlT3ZlcmxheUlmT3BlbigpIHtcbiAgICAvLyBIaWRlIG92ZXJsYXkgaWYgaXQgZXhpc3RzXG4gICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5yZXNwb25zaXZlT3B0aW9ucy5vdmVybGF5U2VsZWN0b3IpO1xuICAgIGlmIChvdmVybGF5ICYmICFvdmVybGF5LmNsYXNzTGlzdC5jb250YWlucyh0aGlzLnJlc3BvbnNpdmVPcHRpb25zLm92ZXJsYXlUb2dnbGVDbGFzcykpIHtcbiAgICAgIG92ZXJsYXkuY2xhc3NMaXN0LmFkZCh0aGlzLnJlc3BvbnNpdmVPcHRpb25zLm92ZXJsYXlUb2dnbGVDbGFzcyk7XG4gICAgfVxuICAgIFxuICAgIC8vIFJlc2V0IGJvZHkgb3ZlcmZsb3dcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJyc7XG4gICAgXG4gICAgLy8gUmVzZXQgbW9iaWxlIG9wZW4gc3RhdGVcbiAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBPcGVuIG1vYmlsZSBjb21wb25lbnRcbiAgICovXG4gIG9wZW5Nb2JpbGUoKSB7XG4gICAgaWYgKHRoaXMuaXNPcGVuIHx8ICF0aGlzLmlzTW9iaWxlVmlld3BvcnQoKSkgcmV0dXJuO1xuICAgIFxuICAgIC8vIFVwZGF0ZSBjb21wb25lbnQgc3RhdGVcbiAgICB0aGlzLnVwZGF0ZUNvbXBvbmVudFN0YXRlKCdvcGVuaW5nJyk7XG4gICAgXG4gICAgaWYgKHRoaXMuZWxlbWVudCkge1xuICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJy10cmFuc2xhdGUteC1mdWxsJyk7XG4gICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgndHJhbnNsYXRlLXgtMCcpO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLmlzT3BlbiA9IHRydWU7XG4gICAgXG4gICAgLy8gU2hvdyBvdmVybGF5IGlmIGNvbmZpZ3VyZWRcbiAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLnJlc3BvbnNpdmVPcHRpb25zLm92ZXJsYXlTZWxlY3Rvcik7XG4gICAgaWYgKG92ZXJsYXkpIHtcbiAgICAgIG92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLnJlc3BvbnNpdmVPcHRpb25zLm92ZXJsYXlUb2dnbGVDbGFzcyk7XG4gICAgfVxuICAgIFxuICAgIC8vIFByZXZlbnQgYm9keSBzY3JvbGxcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG4gICAgXG4gICAgLy8gU2V0IGZpbmFsIHN0YXRlIGFmdGVyIGFuaW1hdGlvblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy51cGRhdGVDb21wb25lbnRTdGF0ZSgnb3BlbicpO1xuICAgIH0sIDMwMCk7XG4gICAgXG4gICAgdGhpcy5lbWl0KCdtb2JpbGUtb3BlbmVkJyk7XG4gICAgbG9nLmRlYnVnKGAke3RoaXMubmFtZX06IE1vYmlsZSBjb21wb25lbnQgb3BlbmVkYCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENsb3NlIG1vYmlsZSBjb21wb25lbnRcbiAgICovXG4gIGNsb3NlTW9iaWxlKCkge1xuICAgIGlmICghdGhpcy5pc09wZW4pIHJldHVybjtcbiAgICBcbiAgICAvLyBVcGRhdGUgY29tcG9uZW50IHN0YXRlXG4gICAgdGhpcy51cGRhdGVDb21wb25lbnRTdGF0ZSgnY2xvc2luZycpO1xuICAgIFxuICAgIGlmICh0aGlzLmVsZW1lbnQpIHtcbiAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCctdHJhbnNsYXRlLXgtZnVsbCcpO1xuICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3RyYW5zbGF0ZS14LTAnKTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcbiAgICBcbiAgICAvLyBIaWRlIG92ZXJsYXlcbiAgICB0aGlzLmNsb3NlT3ZlcmxheUlmT3BlbigpO1xuICAgIFxuICAgIC8vIFNldCBmaW5hbCBzdGF0ZSBhZnRlciBhbmltYXRpb25cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMudXBkYXRlQ29tcG9uZW50U3RhdGUoJ2Nsb3NlZCcpO1xuICAgIH0sIDMwMCk7XG4gICAgXG4gICAgdGhpcy5lbWl0KCdtb2JpbGUtY2xvc2VkJyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRvZ2dsZSBtb2JpbGUgY29tcG9uZW50XG4gICAqL1xuICB0b2dnbGVNb2JpbGUoKSB7XG4gICAgaWYgKHRoaXMuaXNPcGVuKSB7XG4gICAgICB0aGlzLmNsb3NlTW9iaWxlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMub3Blbk1vYmlsZSgpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogRm9yY2UgY2xvc2UgbW9iaWxlIGNvbXBvbmVudCAodXNlZnVsIGZvciBjbGVhbnVwKVxuICAgKi9cbiAgZm9yY2VDbG9zZU1vYmlsZSgpIHtcbiAgICBpZiAodGhpcy5lbGVtZW50KSB7XG4gICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnLXRyYW5zbGF0ZS14LWZ1bGwnKTtcbiAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCd0cmFuc2xhdGUteC0wJyk7XG4gICAgfVxuICAgIFxuICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG4gICAgdGhpcy5jbG9zZU92ZXJsYXlJZk9wZW4oKTtcbiAgICBcbiAgICB0aGlzLmVtaXQoJ21vYmlsZS1jbG9zZWQnKTtcbiAgICBsb2cuZGVidWcoYCR7dGhpcy5uYW1lfTogTW9iaWxlIGNvbXBvbmVudCBmb3JjZSBjbG9zZWRgKTtcbiAgfSxcblxuICAvKipcbiAgICogUmVzZXQgY29tcG9uZW50IHRvIGluaXRpYWwgcmVzcG9uc2l2ZSBzdGF0ZSAodXNlZnVsIGZvciBkZWJ1Z2dpbmcpXG4gICAqL1xuICByZXNldFJlc3BvbnNpdmVTdGF0ZSgpIHtcbiAgICB0aGlzLmZvcmNlQ2xvc2VNb2JpbGUoKTtcbiAgICBcbiAgICAvLyBSZXNldCBhbnkgcmVzcG9uc2l2ZS1zcGVjaWZpYyBjbGFzc2VzXG4gICAgaWYgKHRoaXMuZWxlbWVudCkge1xuICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3RyYW5zbGF0ZS14LTAnKTtcbiAgICB9XG4gICAgXG4gICAgbG9nLmRlYnVnKGAke3RoaXMubmFtZX06IFJlc2V0IHRvIGluaXRpYWwgcmVzcG9uc2l2ZSBzdGF0ZWApO1xuICAgIHRoaXMuZW1pdCgncmVzcG9uc2l2ZS1yZXNldCcpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgY3VycmVudCByZXNwb25zaXZlIHN0YXRlXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IEN1cnJlbnQgcmVzcG9uc2l2ZSBzdGF0ZSBpbmZvcm1hdGlvblxuICAgKi9cbiAgZ2V0UmVzcG9uc2l2ZVN0YXRlKCkge1xuICAgIHJldHVybiB7XG4gICAgICBpc01vYmlsZTogdGhpcy5pc01vYmlsZVZpZXdwb3J0KCksXG4gICAgICBpc09wZW46IHRoaXMuaXNPcGVuLFxuICAgICAgYnJlYWtwb2ludDogdGhpcy5yZXNwb25zaXZlT3B0aW9ucy5tb2JpbGVCcmVha3BvaW50LFxuICAgICAgdmlld3BvcnRXaWR0aDogd2luZG93LmlubmVyV2lkdGhcbiAgICB9O1xuICB9LFxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiByZXNwb25zaXZlIGZ1bmN0aW9uYWxpdHkgaXMgaGVhbHRoeSB1c2luZyBzdGFuZGFyZGl6ZWQgY2hlY2tzXG4gICAqL1xuICBpc1Jlc3BvbnNpdmVIZWFsdGh5OiBNaXhpblV0aWxpdGllcy5jcmVhdGVIZWFsdGhDaGVjayhbXG4gICAgZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLnJlc3BvbnNpdmVPcHRpb25zICE9PSB1bmRlZmluZWQ7IH0sXG4gICAgZnVuY3Rpb24oKSB7IHJldHVybiB0eXBlb2YgdGhpcy5pc01vYmlsZVZpZXdwb3J0ID09PSAnZnVuY3Rpb24nOyB9LFxuICAgIGZ1bmN0aW9uKCkgeyByZXR1cm4gdHlwZW9mIHRoaXMucmVzcG9uc2l2ZU9wdGlvbnMubW9iaWxlQnJlYWtwb2ludCA9PT0gJ251bWJlcic7IH1cbiAgXSlcbn07XG5cbi8vIFZhbGlkYXRlIG1peGluIGludGVyZmFjZVxudmFsaWRhdGVNaXhpbkludGVyZmFjZShSZXNwb25zaXZlTWl4aW4sIHtcbiAgbWV0aG9kczogWydpbml0UmVzcG9uc2l2ZScsICdpc1Jlc3BvbnNpdmVIZWFsdGh5J11cbn0pO1xuIiwgIi8qKlxuICogTW9kYWxNaXhpbiAtIE1peGluIGZvciBjb21wb25lbnRzIHRoYXQgbmVlZCBtb2RhbC9vdmVybGF5IGZ1bmN0aW9uYWxpdHlcbiAqIFByb3ZpZGVzIHN0YW5kYXJkaXplZCBtb2RhbCBiZWhhdmlvciwgZm9jdXMgbWFuYWdlbWVudCwgYW5kIGFjY2Vzc2liaWxpdHlcbiAqIFJlZmFjdG9yZWQgdG8gdXNlIE1peGluQmFzZSB1dGlsaXRpZXMgZm9yIGNvbnNpc3RlbmN5XG4gKi9cblxuaW1wb3J0IHsgTWl4aW5VdGlsaXRpZXMsIHZhbGlkYXRlTWl4aW5JbnRlcmZhY2UgfSBmcm9tICcuL01peGluQmFzZS5qcyc7XG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuLi91dGlscy9Mb2dnZXIuanMnO1xuY29uc3QgbG9nID0gbG9nZ2VyLmNvbXBvbmVudCgnTW9kYWxNaXhpbicpO1xuXG4vKipcbiAqIE1peGluIHRoYXQgYWRkcyBtb2RhbC9vdmVybGF5IGZ1bmN0aW9uYWxpdHkgdG8gY29tcG9uZW50c1xuICogVXNhZ2U6IE9iamVjdC5hc3NpZ24oWW91ckNvbXBvbmVudC5wcm90b3R5cGUsIE1vZGFsTWl4aW4pO1xuICovXG5leHBvcnQgY29uc3QgTW9kYWxNaXhpbiA9IHtcbiAgXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIG1vZGFsIGZ1bmN0aW9uYWxpdHkgdXNpbmcgTWl4aW5CYXNlIHV0aWxpdGllc1xuICAgKiBDYWxsIHRoaXMgZnJvbSB5b3VyIGNvbXBvbmVudCdzIG9uSW5pdCBtZXRob2RcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBDb25maWd1cmF0aW9uIG9wdGlvbnNcbiAgICovXG4gIGluaXRNb2RhbDogTWl4aW5VdGlsaXRpZXMuY3JlYXRlSW5pdEZ1bmN0aW9uKFxuICAgICdNb2RhbE1peGluJyxcbiAgICB7XG4gICAgICBvdmVybGF5U2VsZWN0b3I6ICcubW9kYWwtb3ZlcmxheScsXG4gICAgICBjbG9zZVNlbGVjdG9yOiAnLm1vZGFsLWNsb3NlJyxcbiAgICAgIGVzY2FwZVRvQ2xvc2U6IHRydWUsXG4gICAgICBjbGlja091dHNpZGVUb0Nsb3NlOiB0cnVlLFxuICAgICAgdHJhcEZvY3VzOiB0cnVlLFxuICAgICAgYm9keVNjcm9sbExvY2s6IHRydWUsXG4gICAgICBhbmltYXRpb25EdXJhdGlvbjogMzAwXG4gICAgfSxcbiAgICBmdW5jdGlvbiBzZXR1cE1vZGFsKCkge1xuICAgICAgdGhpcy5pc01vZGFsT3BlbiA9IGZhbHNlO1xuICAgICAgdGhpcy5wcmV2aW91c0ZvY3VzID0gbnVsbDtcbiAgICAgIHRoaXMuZm9jdXNhYmxlRWxlbWVudHMgPSBbXTtcbiAgICAgIFxuICAgICAgdGhpcy5zZXR1cE1vZGFsRWxlbWVudHMoKTtcbiAgICAgIHRoaXMuc2V0dXBNb2RhbEV2ZW50cygpO1xuICAgICAgdGhpcy5zZXR1cE1vZGFsQWNjZXNzaWJpbGl0eSgpO1xuICAgIH1cbiAgKSxcblxuICAvKipcbiAgICogRmluZCBhbmQgY2FjaGUgbW9kYWwgZWxlbWVudHNcbiAgICovXG4gIHNldHVwTW9kYWxFbGVtZW50cygpIHtcbiAgICBpZiAoIXRoaXMuZWxlbWVudCkgcmV0dXJuO1xuICAgIFxuICAgIC8vIEZpbmQgb3ZlcmxheSBlbGVtZW50XG4gICAgdGhpcy5vdmVybGF5ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5tb2RhbE9wdGlvbnMub3ZlcmxheVNlbGVjdG9yKSB8fFxuICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5tb2RhbE9wdGlvbnMub3ZlcmxheVNlbGVjdG9yKTtcbiAgICBcbiAgICAvLyBGaW5kIGNsb3NlIGJ1dHRvbnNcbiAgICB0aGlzLmNsb3NlQnV0dG9ucyA9IEFycmF5LmZyb20odGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5tb2RhbE9wdGlvbnMuY2xvc2VTZWxlY3RvcikpO1xuICAgIFxuICAgIC8vIENhY2hlIGZvY3VzYWJsZSBlbGVtZW50cyBmb3IgZm9jdXMgdHJhcHBpbmdcbiAgICB0aGlzLnVwZGF0ZUZvY3VzYWJsZUVsZW1lbnRzKCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNldHVwIGV2ZW50IGxpc3RlbmVycyBmb3IgbW9kYWwgZnVuY3Rpb25hbGl0eVxuICAgKi9cbiAgc2V0dXBNb2RhbEV2ZW50cygpIHtcbiAgICAvLyBDbG9zZSBidXR0b24gZXZlbnRzXG4gICAgdGhpcy5jbG9zZUJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4ge1xuICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGJ1dHRvbiwgJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLmNsb3NlTW9kYWwoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIFxuICAgIC8vIE92ZXJsYXkgY2xpY2sgdG8gY2xvc2VcbiAgICBpZiAodGhpcy5vdmVybGF5ICYmIHRoaXMubW9kYWxPcHRpb25zLmNsaWNrT3V0c2lkZVRvQ2xvc2UpIHtcbiAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLm92ZXJsYXksICdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGlmIChlLnRhcmdldCA9PT0gdGhpcy5vdmVybGF5KSB7XG4gICAgICAgICAgdGhpcy5jbG9zZU1vZGFsKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBFc2NhcGUga2V5IHRvIGNsb3NlXG4gICAgaWYgKHRoaXMubW9kYWxPcHRpb25zLmVzY2FwZVRvQ2xvc2UpIHtcbiAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihkb2N1bWVudCwgJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgICAgICBpZiAoZS5rZXkgPT09ICdFc2NhcGUnICYmIHRoaXMuaXNNb2RhbE9wZW4pIHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgdGhpcy5jbG9zZU1vZGFsKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBGb2N1cyB0cmFwXG4gICAgaWYgKHRoaXMubW9kYWxPcHRpb25zLnRyYXBGb2N1cykge1xuICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGRvY3VtZW50LCAna2V5ZG93bicsIChlKSA9PiB7XG4gICAgICAgIGlmIChlLmtleSA9PT0gJ1RhYicgJiYgdGhpcy5pc01vZGFsT3Blbikge1xuICAgICAgICAgIHRoaXMuaGFuZGxlRm9jdXNUcmFwKGUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNldHVwIGFjY2Vzc2liaWxpdHkgYXR0cmlidXRlc1xuICAgKi9cbiAgc2V0dXBNb2RhbEFjY2Vzc2liaWxpdHkoKSB7XG4gICAgaWYgKCF0aGlzLmVsZW1lbnQpIHJldHVybjtcbiAgICBcbiAgICAvLyBTZXQgbW9kYWwgcm9sZSBhbmQgYXR0cmlidXRlc1xuICAgIGlmICghdGhpcy5lbGVtZW50Lmhhc0F0dHJpYnV0ZSgncm9sZScpKSB7XG4gICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdyb2xlJywgJ2RpYWxvZycpO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuZWxlbWVudC5oYXNBdHRyaWJ1dGUoJ2FyaWEtbW9kYWwnKSkge1xuICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1tb2RhbCcsICd0cnVlJyk7XG4gICAgfVxuICAgIGlmICghdGhpcy5lbGVtZW50Lmhhc0F0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nKSkge1xuICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogT3BlbiB0aGUgbW9kYWxcbiAgICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyAtIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gZm9yIHRoaXMgb3BlblxuICAgKi9cbiAgYXN5bmMgb3Blbk1vZGFsKGNvbmZpZyA9IHt9KSB7XG4gICAgaWYgKHRoaXMuaXNNb2RhbE9wZW4pIHJldHVybjtcbiAgICBcbiAgICBjb25zdCBvcHRpb25zID0geyAuLi50aGlzLm1vZGFsT3B0aW9ucywgLi4uY29uZmlnIH07XG4gICAgXG4gICAgLy8gRW1pdCBiZWZvcmUtb3BlbiBldmVudFxuICAgIHRoaXMuZW1pdCgnYmVmb3JlLW1vZGFsLW9wZW4nLCB7IG9wdGlvbnMgfSk7XG4gICAgXG4gICAgLy8gU3RvcmUgY3VycmVudCBmb2N1c1xuICAgIHRoaXMucHJldmlvdXNGb2N1cyA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgXG4gICAgLy8gTG9jayBib2R5IHNjcm9sbCBpZiBjb25maWd1cmVkXG4gICAgaWYgKG9wdGlvbnMuYm9keVNjcm9sbExvY2spIHtcbiAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcbiAgICB9XG4gICAgXG4gICAgLy8gU2hvdyBtb2RhbCBlbGVtZW50c1xuICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ2ZhbHNlJyk7XG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgIFxuICAgIGlmICh0aGlzLm92ZXJsYXkpIHtcbiAgICAgIHRoaXMub3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICB9XG4gICAgXG4gICAgLy8gVXBkYXRlIHN0YXRlXG4gICAgdGhpcy5pc01vZGFsT3BlbiA9IHRydWU7XG4gICAgdGhpcy51cGRhdGVDb21wb25lbnRTdGF0ZSgnbW9kYWwtb3BlbicpO1xuICAgIFxuICAgIC8vIEZvY3VzIG1hbmFnZW1lbnRcbiAgICB0aGlzLnVwZGF0ZUZvY3VzYWJsZUVsZW1lbnRzKCk7XG4gICAgdGhpcy5mb2N1c0ZpcnN0RWxlbWVudCgpO1xuICAgIFxuICAgIC8vIFdhaXQgZm9yIGFuaW1hdGlvbiBpZiBjb25maWd1cmVkXG4gICAgaWYgKG9wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb24gPiAwKSB7XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvbikpO1xuICAgIH1cbiAgICBcbiAgICAvLyBFbWl0IGFmdGVyLW9wZW4gZXZlbnRcbiAgICB0aGlzLmVtaXQoJ2FmdGVyLW1vZGFsLW9wZW4nLCB7IG9wdGlvbnMgfSk7XG4gICAgXG4gICAgbG9nLmRlYnVnKGAke3RoaXMubmFtZX06IE1vZGFsIG9wZW5lZGApO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDbG9zZSB0aGUgbW9kYWxcbiAgICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyAtIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gZm9yIHRoaXMgY2xvc2VcbiAgICovXG4gIGFzeW5jIGNsb3NlTW9kYWwoY29uZmlnID0ge30pIHtcbiAgICBpZiAoIXRoaXMuaXNNb2RhbE9wZW4pIHJldHVybjtcbiAgICBcbiAgICBjb25zdCBvcHRpb25zID0geyAuLi50aGlzLm1vZGFsT3B0aW9ucywgLi4uY29uZmlnIH07XG4gICAgXG4gICAgLy8gRW1pdCBiZWZvcmUtY2xvc2UgZXZlbnRcbiAgICB0aGlzLmVtaXQoJ2JlZm9yZS1tb2RhbC1jbG9zZScsIHsgb3B0aW9ucyB9KTtcbiAgICBcbiAgICAvLyBIaWRlIG1vZGFsIGVsZW1lbnRzXG4gICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xuICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICBcbiAgICBpZiAodGhpcy5vdmVybGF5KSB7XG4gICAgICB0aGlzLm92ZXJsYXkuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgfVxuICAgIFxuICAgIC8vIFVwZGF0ZSBzdGF0ZVxuICAgIHRoaXMuaXNNb2RhbE9wZW4gPSBmYWxzZTtcbiAgICB0aGlzLnVwZGF0ZUNvbXBvbmVudFN0YXRlKCdtb2RhbC1jbG9zZWQnKTtcbiAgICBcbiAgICAvLyBSZXN0b3JlIGJvZHkgc2Nyb2xsXG4gICAgaWYgKG9wdGlvbnMuYm9keVNjcm9sbExvY2spIHtcbiAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnJztcbiAgICB9XG4gICAgXG4gICAgLy8gUmVzdG9yZSBmb2N1c1xuICAgIGlmICh0aGlzLnByZXZpb3VzRm9jdXMgJiYgZG9jdW1lbnQuY29udGFpbnModGhpcy5wcmV2aW91c0ZvY3VzKSkge1xuICAgICAgdGhpcy5wcmV2aW91c0ZvY3VzLmZvY3VzKCk7XG4gICAgfVxuICAgIFxuICAgIC8vIFdhaXQgZm9yIGFuaW1hdGlvbiBpZiBjb25maWd1cmVkXG4gICAgaWYgKG9wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb24gPiAwKSB7XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvbikpO1xuICAgIH1cbiAgICBcbiAgICAvLyBFbWl0IGFmdGVyLWNsb3NlIGV2ZW50XG4gICAgdGhpcy5lbWl0KCdhZnRlci1tb2RhbC1jbG9zZScsIHsgb3B0aW9ucyB9KTtcbiAgICBcbiAgICBsb2cuZGVidWcoYCR7dGhpcy5uYW1lfTogTW9kYWwgY2xvc2VkYCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRvZ2dsZSBtb2RhbCBzdGF0ZVxuICAgKi9cbiAgdG9nZ2xlTW9kYWwoKSB7XG4gICAgaWYgKHRoaXMuaXNNb2RhbE9wZW4pIHtcbiAgICAgIHRoaXMuY2xvc2VNb2RhbCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm9wZW5Nb2RhbCgpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogVXBkYXRlIGxpc3Qgb2YgZm9jdXNhYmxlIGVsZW1lbnRzXG4gICAqL1xuICB1cGRhdGVGb2N1c2FibGVFbGVtZW50cygpIHtcbiAgICBpZiAoIXRoaXMuZWxlbWVudCkgcmV0dXJuO1xuICAgIFxuICAgIGNvbnN0IGZvY3VzYWJsZVNlbGVjdG9yID0gJ2J1dHRvbiwgW2hyZWZdLCBpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYSwgW3RhYmluZGV4XTpub3QoW3RhYmluZGV4PVwiLTFcIl0pJztcbiAgICB0aGlzLmZvY3VzYWJsZUVsZW1lbnRzID0gQXJyYXkuZnJvbSh0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChmb2N1c2FibGVTZWxlY3RvcikpXG4gICAgICAuZmlsdGVyKGVsID0+ICFlbC5kaXNhYmxlZCAmJiAhZWwuaGlkZGVuICYmIGVsLm9mZnNldFBhcmVudCAhPT0gbnVsbCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEZvY3VzIHRoZSBmaXJzdCBmb2N1c2FibGUgZWxlbWVudFxuICAgKi9cbiAgZm9jdXNGaXJzdEVsZW1lbnQoKSB7XG4gICAgdGhpcy51cGRhdGVGb2N1c2FibGVFbGVtZW50cygpO1xuICAgIGlmICh0aGlzLmZvY3VzYWJsZUVsZW1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuZm9jdXNhYmxlRWxlbWVudHNbMF0uZm9jdXMoKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEhhbmRsZSBmb2N1cyB0cmFwcGluZyB3aXRoaW4gbW9kYWxcbiAgICogQHBhcmFtIHtLZXlib2FyZEV2ZW50fSBlIC0gVGFiIGtleSBldmVudFxuICAgKi9cbiAgaGFuZGxlRm9jdXNUcmFwKGUpIHtcbiAgICBpZiAodGhpcy5mb2N1c2FibGVFbGVtZW50cy5sZW5ndGggPT09IDApIHJldHVybjtcbiAgICBcbiAgICBjb25zdCBmaXJzdEVsZW1lbnQgPSB0aGlzLmZvY3VzYWJsZUVsZW1lbnRzWzBdO1xuICAgIGNvbnN0IGxhc3RFbGVtZW50ID0gdGhpcy5mb2N1c2FibGVFbGVtZW50c1t0aGlzLmZvY3VzYWJsZUVsZW1lbnRzLmxlbmd0aCAtIDFdO1xuICAgIFxuICAgIGlmIChlLnNoaWZ0S2V5KSB7XG4gICAgICAvLyBTaGlmdCArIFRhYjogZ29pbmcgYmFja3dhcmRzXG4gICAgICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gZmlyc3RFbGVtZW50KSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgbGFzdEVsZW1lbnQuZm9jdXMoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVGFiOiBnb2luZyBmb3J3YXJkc1xuICAgICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IGxhc3RFbGVtZW50KSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZmlyc3RFbGVtZW50LmZvY3VzKCk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIFxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBtb2RhbCBmdW5jdGlvbmFsaXR5IGlzIGhlYWx0aHkgdXNpbmcgc3RhbmRhcmRpemVkIGNoZWNrc1xuICAgKi9cbiAgaXNNb2RhbEhlYWx0aHk6IE1peGluVXRpbGl0aWVzLmNyZWF0ZUhlYWx0aENoZWNrKFtcbiAgICBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuZWxlbWVudCAhPT0gbnVsbDsgfSxcbiAgICBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMubW9kYWxPcHRpb25zICE9PSB1bmRlZmluZWQ7IH0sXG4gICAgZnVuY3Rpb24oKSB7XG4gICAgICAvLyBDaGVjayBpZiBtb2RhbCBoYXMgcHJvcGVyIEFSSUEgYXR0cmlidXRlc1xuICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC5oYXNBdHRyaWJ1dGUoJ3JvbGUnKSAmJiB0aGlzLmVsZW1lbnQuaGFzQXR0cmlidXRlKCdhcmlhLW1vZGFsJyk7XG4gICAgfSxcbiAgICBmdW5jdGlvbigpIHtcbiAgICAgIC8vIENoZWNrIGlmIGNsb3NlIGJ1dHRvbnMgaGF2ZSBldmVudCBsaXN0ZW5lcnMgKGlmIGFueSBleGlzdClcbiAgICAgIGlmICghdGhpcy5jbG9zZUJ1dHRvbnMgfHwgdGhpcy5jbG9zZUJ1dHRvbnMubGVuZ3RoID09PSAwKSByZXR1cm4gdHJ1ZTtcbiAgICAgIHJldHVybiB0aGlzLmNsb3NlQnV0dG9ucy5ldmVyeShidXR0b24gPT4ge1xuICAgICAgICByZXR1cm4gYnV0dG9uLmRhdGFzZXQgJiYgYnV0dG9uLmRhdGFzZXQuY29tcG9uZW50TGlzdGVuZXJzICYmXG4gICAgICAgICAgICAgICBidXR0b24uZGF0YXNldC5jb21wb25lbnRMaXN0ZW5lcnMuaW5jbHVkZXModGhpcy5pZCk7XG4gICAgICB9KTtcbiAgICB9XG4gIF0pXG59O1xuXG4vLyBWYWxpZGF0ZSBtaXhpbiBpbnRlcmZhY2VcbnZhbGlkYXRlTWl4aW5JbnRlcmZhY2UoTW9kYWxNaXhpbiwge1xuICBtZXRob2RzOiBbJ2luaXRNb2RhbCcsICdpc01vZGFsSGVhbHRoeSddXG59KTtcbiIsICIvKipcbiAqIFN0b3JhZ2UgdXRpbGl0aWVzIC0gU2FmZSBsb2NhbFN0b3JhZ2Uvc2Vzc2lvblN0b3JhZ2UgYWNjZXNzXG4gKiBFeHRyYWN0ZWQgZnJvbSBsYXlvdXQtdGhlbWUuanMgYW5kIG90aGVyIGZpbGVzXG4gKi9cbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4vTG9nZ2VyLmpzJztcblxuLy8gSW4tbWVtb3J5IGZhbGxiYWNrIHN0b3JhZ2VcbmxldCBpbk1lbW9yeVN0b3JhZ2UgPSBuZXcgTWFwKCk7XG5cbi8qKlxuICogQ2hlY2sgaWYgbG9jYWxTdG9yYWdlIGlzIGF2YWlsYWJsZSBhbmQgd3JpdGFibGVcbiAqL1xuZnVuY3Rpb24gaXNTdG9yYWdlQXZhaWxhYmxlKHR5cGUgPSAnbG9jYWxTdG9yYWdlJykge1xuICB0cnkge1xuICAgIGNvbnN0IHN0b3JhZ2UgPSB3aW5kb3dbdHlwZV07XG4gICAgY29uc3QgdGVzdEtleSA9ICdfX3N0b3JhZ2VfdGVzdF9fJztcbiAgICBzdG9yYWdlLnNldEl0ZW0odGVzdEtleSwgdGVzdEtleSk7XG4gICAgc3RvcmFnZS5yZW1vdmVJdGVtKHRlc3RLZXkpO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8qKlxuICogU2FmZSBzdG9yYWdlIHdyYXBwZXIgd2l0aCBmYWxsYmFja1xuICovXG5jbGFzcyBTYWZlU3RvcmFnZSB7XG4gIGNvbnN0cnVjdG9yKHR5cGUgPSAnbG9jYWxTdG9yYWdlJykge1xuICAgIHRoaXMuc3RvcmFnZVR5cGUgPSB0eXBlO1xuICAgIHRoaXMuaXNBdmFpbGFibGUgPSBpc1N0b3JhZ2VBdmFpbGFibGUodHlwZSk7XG4gICAgdGhpcy5zdG9yYWdlID0gdGhpcy5pc0F2YWlsYWJsZSA/IHdpbmRvd1t0eXBlXSA6IG51bGw7XG4gIH1cblxuICBnZXQoa2V5LCBmYWxsYmFjayA9IG51bGwpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKHRoaXMuaXNBdmFpbGFibGUpIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xuICAgICAgICBpZiAodmFsdWUgPT09IG51bGwpIHJldHVybiBmYWxsYmFjaztcbiAgICAgICAgXG4gICAgICAgIC8vIFRyeSB0byBwYXJzZSBKU09OLCByZXR1cm4gc3RyaW5nIGlmIHBhcnNpbmcgZmFpbHNcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZSh2YWx1ZSk7XG4gICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGluTWVtb3J5U3RvcmFnZS5oYXMoa2V5KSA/IGluTWVtb3J5U3RvcmFnZS5nZXQoa2V5KSA6IGZhbGxiYWNrO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIud2FybignU3RvcmFnZScsIGBTdG9yYWdlIGdldCBlcnJvciBmb3Iga2V5IFwiJHtrZXl9XCI6YCwgZXJyb3IpO1xuICAgICAgcmV0dXJuIGZhbGxiYWNrO1xuICAgIH1cbiAgfVxuXG4gIHNldChrZXksIHZhbHVlKSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICh0aGlzLmlzQXZhaWxhYmxlKSB7XG4gICAgICAgIGNvbnN0IHNlcmlhbGl6ZWQgPSB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gdmFsdWUgOiBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG4gICAgICAgIHRoaXMuc3RvcmFnZS5zZXRJdGVtKGtleSwgc2VyaWFsaXplZCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5NZW1vcnlTdG9yYWdlLnNldChrZXksIHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci53YXJuKCdTdG9yYWdlJywgYFN0b3JhZ2Ugc2V0IGVycm9yIGZvciBrZXkgXCIke2tleX1cIjpgLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcmVtb3ZlKGtleSkge1xuICAgIHRyeSB7XG4gICAgICBpZiAodGhpcy5pc0F2YWlsYWJsZSkge1xuICAgICAgICB0aGlzLnN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5NZW1vcnlTdG9yYWdlLmRlbGV0ZShrZXkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci53YXJuKCdTdG9yYWdlJywgYFN0b3JhZ2UgcmVtb3ZlIGVycm9yIGZvciBrZXkgXCIke2tleX1cIjpgLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgY2xlYXIoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICh0aGlzLmlzQXZhaWxhYmxlKSB7XG4gICAgICAgIHRoaXMuc3RvcmFnZS5jbGVhcigpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5NZW1vcnlTdG9yYWdlLmNsZWFyKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLndhcm4oJ1N0b3JhZ2UnLCAnU3RvcmFnZSBjbGVhciBlcnJvcjonLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAga2V5cygpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKHRoaXMuaXNBdmFpbGFibGUpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuc3RvcmFnZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShpbk1lbW9yeVN0b3JhZ2Uua2V5cygpKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLndhcm4oJ1N0b3JhZ2UnLCAnU3RvcmFnZSBrZXlzIGVycm9yOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH1cblxuICBoYXMoa2V5KSB7XG4gICAgaWYgKHRoaXMuaXNBdmFpbGFibGUpIHtcbiAgICAgIHJldHVybiB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShrZXkpICE9PSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gaW5NZW1vcnlTdG9yYWdlLmhhcyhrZXkpO1xuICAgIH1cbiAgfVxufVxuXG4vLyBFeHBvcnQgc3RvcmFnZSBpbnN0YW5jZXNcbmV4cG9ydCBjb25zdCBsb2NhbFN0b3JhZ2UgPSBuZXcgU2FmZVN0b3JhZ2UoJ2xvY2FsU3RvcmFnZScpO1xuZXhwb3J0IGNvbnN0IHNlc3Npb25TdG9yYWdlID0gbmV3IFNhZmVTdG9yYWdlKCdzZXNzaW9uU3RvcmFnZScpO1xuXG5cblxuLy8gVXRpbGl0eSBmdW5jdGlvbnNcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVOYW1lc3BhY2VkU3RvcmFnZShuYW1lc3BhY2UpIHtcbiAgcmV0dXJuIHtcbiAgICBnZXQoa2V5LCBmYWxsYmFjaykge1xuICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXQoYCR7bmFtZXNwYWNlfS4ke2tleX1gLCBmYWxsYmFjayk7XG4gICAgfSxcbiAgICBzZXQoa2V5LCB2YWx1ZSkge1xuICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5zZXQoYCR7bmFtZXNwYWNlfS4ke2tleX1gLCB2YWx1ZSk7XG4gICAgfSxcbiAgICByZW1vdmUoa2V5KSB7XG4gICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLnJlbW92ZShgJHtuYW1lc3BhY2V9LiR7a2V5fWApO1xuICAgIH0sXG4gICAgY2xlYXIoKSB7XG4gICAgICBjb25zdCBrZXlzID0gbG9jYWxTdG9yYWdlLmtleXMoKS5maWx0ZXIoayA9PiBrLnN0YXJ0c1dpdGgoYCR7bmFtZXNwYWNlfS5gKSk7XG4gICAgICBrZXlzLmZvckVhY2goa2V5ID0+IGxvY2FsU3RvcmFnZS5yZW1vdmUoa2V5KSk7XG4gICAgfVxuICB9O1xufSIsICIvKipcbiAqIEFuaW1hdGlvbiB1dGlsaXRpZXMgLSBDb21tb24gYW5pbWF0aW9uIHBhdHRlcm5zIGFuZCBoZWxwZXJzXG4gKiBDb25zb2xpZGF0ZXMgYW5pbWF0aW9uIGxvZ2ljIGZyb20gdmFyaW91cyBjb21wb25lbnRzXG4gKi9cblxuaW1wb3J0IHsgYW5pbWF0aW9uQnJpZGdlIH0gZnJvbSAnLi4vY29yZS9BbmltYXRpb25CcmlkZ2UuanMnO1xuXG4vKipcbiAqIENTUyB0cmFuc2l0aW9uIHV0aWxpdGllc1xuICovXG5leHBvcnQgY29uc3QgdHJhbnNpdGlvbnMgPSB7XG4gIC8qKlxuICAgKiBTbGlkZSBkb3duIGFuaW1hdGlvblxuICAgKi9cbiAgc2xpZGVEb3duKGVsZW1lbnQsIGR1cmF0aW9uID0gbnVsbCkge1xuICAgIGNvbnN0IGFuaW1EdXJhdGlvbiA9IGR1cmF0aW9uIHx8IGFuaW1hdGlvbkJyaWRnZS5nZXRUaW1pbmcoJ21lZGl1bScpO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gJzAnO1xuICAgICAgZWxlbWVudC5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuICAgICAgLy8gQ1NTIGhhbmRsZXMgdHJhbnNpdGlvbnMgdmlhIGFuaW1hdGlvbiB0b2tlbnNcbiAgICAgIFxuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgZWxlbWVudC5zdHlsZS5oZWlnaHQgPSBlbGVtZW50LnNjcm9sbEhlaWdodCArICdweCc7XG4gICAgICAgIFxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBlbGVtZW50LnN0eWxlLmhlaWdodCA9ICcnO1xuICAgICAgICAgIGVsZW1lbnQuc3R5bGUub3ZlcmZsb3cgPSAnJztcbiAgICAgICAgICBlbGVtZW50LnN0eWxlLnRyYW5zaXRpb24gPSAnJztcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH0sIGR1cmF0aW9uKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTbGlkZSB1cCBhbmltYXRpb25cbiAgICovXG4gIHNsaWRlVXAoZWxlbWVudCwgZHVyYXRpb24gPSBudWxsKSB7XG4gICAgY29uc3QgYW5pbUR1cmF0aW9uID0gZHVyYXRpb24gfHwgYW5pbWF0aW9uQnJpZGdlLmdldFRpbWluZygnbWVkaXVtJyk7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgZWxlbWVudC5zdHlsZS5oZWlnaHQgPSBlbGVtZW50LnNjcm9sbEhlaWdodCArICdweCc7XG4gICAgICBlbGVtZW50LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG4gICAgICAvLyBDU1MgaGFuZGxlcyB0cmFuc2l0aW9ucyB2aWEgYW5pbWF0aW9uIHRva2Vuc1xuICAgICAgXG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICBlbGVtZW50LnN0eWxlLmhlaWdodCA9ICcwJztcbiAgICAgICAgXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gJyc7XG4gICAgICAgICAgZWxlbWVudC5zdHlsZS5vdmVyZmxvdyA9ICcnO1xuICAgICAgICAgIGVsZW1lbnQuc3R5bGUudHJhbnNpdGlvbiA9ICcnO1xuICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfSwgZHVyYXRpb24pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEZhZGUgaW4gYW5pbWF0aW9uXG4gICAqL1xuICBmYWRlSW4oZWxlbWVudCwgZHVyYXRpb24gPSAzMDApIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBlbGVtZW50LnN0eWxlLm9wYWNpdHkgPSAnMCc7XG4gICAgICBlbGVtZW50LnN0eWxlLnRyYW5zaXRpb24gPSBgb3BhY2l0eSAke2R1cmF0aW9ufW1zIGVhc2VgO1xuICAgICAgXG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICBlbGVtZW50LnN0eWxlLm9wYWNpdHkgPSAnMSc7XG4gICAgICAgIFxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBlbGVtZW50LnN0eWxlLnRyYW5zaXRpb24gPSAnJztcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH0sIGR1cmF0aW9uKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBGYWRlIG91dCBhbmltYXRpb25cbiAgICovXG4gIGZhZGVPdXQoZWxlbWVudCwgZHVyYXRpb24gPSAzMDApIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBlbGVtZW50LnN0eWxlLnRyYW5zaXRpb24gPSBgb3BhY2l0eSAke2R1cmF0aW9ufW1zIGVhc2VgO1xuICAgICAgZWxlbWVudC5zdHlsZS5vcGFjaXR5ID0gJzAnO1xuICAgICAgXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgZWxlbWVudC5zdHlsZS50cmFuc2l0aW9uID0gJyc7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH0sIGR1cmF0aW9uKTtcbiAgICB9KTtcbiAgfSxcblxuICAvKipcbiAgICogU2NhbGUgaW4gYW5pbWF0aW9uXG4gICAqL1xuICBzY2FsZUluKGVsZW1lbnQsIGR1cmF0aW9uID0gMzAwKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSAnc2NhbGUoMCknO1xuICAgICAgZWxlbWVudC5zdHlsZS50cmFuc2l0aW9uID0gYHRyYW5zZm9ybSAke2R1cmF0aW9ufW1zIGVhc2VgO1xuICAgICAgXG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICBlbGVtZW50LnN0eWxlLnRyYW5zZm9ybSA9ICdzY2FsZSgxKSc7XG4gICAgICAgIFxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBlbGVtZW50LnN0eWxlLnRyYW5zaXRpb24gPSAnJztcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH0sIGR1cmF0aW9uKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59O1xuXG4vKipcbiAqIFR5cGluZyBhbmltYXRpb24gdXRpbGl0eVxuICovXG5leHBvcnQgZnVuY3Rpb24gdHlwZVdyaXRlcihlbGVtZW50LCB0ZXh0LCBzcGVlZCA9IDUwKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICBlbGVtZW50LnRleHRDb250ZW50ID0gJyc7XG4gICAgbGV0IGkgPSAwO1xuICAgIFxuICAgIGNvbnN0IHR5cGVJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIGVsZW1lbnQudGV4dENvbnRlbnQgKz0gdGV4dC5jaGFyQXQoaSk7XG4gICAgICBpKys7XG4gICAgICBcbiAgICAgIGlmIChpID49IHRleHQubGVuZ3RoKSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwodHlwZUludGVydmFsKTtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfVxuICAgIH0sIHNwZWVkKTtcbiAgfSk7XG59XG5cbi8qKlxuICogU3RhZ2dlciBhbmltYXRpb24gZm9yIG11bHRpcGxlIGVsZW1lbnRzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdGFnZ2VyZWRBbmltYXRpb24oZWxlbWVudHMsIGFuaW1hdGlvbkZuLCBkZWxheSA9IDEwMCkge1xuICByZXR1cm4gUHJvbWlzZS5hbGwoXG4gICAgZWxlbWVudHMubWFwKChlbGVtZW50LCBpbmRleCkgPT4ge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcbiAgICAgICAgICBhd2FpdCBhbmltYXRpb25GbihlbGVtZW50KTtcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH0sIGluZGV4ICogZGVsYXkpO1xuICAgICAgfSk7XG4gICAgfSlcbiAgKTtcbn1cblxuLyoqXG4gKiBJbnRlcnNlY3Rpb24gT2JzZXJ2ZXIgZm9yIHNjcm9sbCBhbmltYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBTY3JvbGxBbmltYXRpb25PYnNlcnZlciB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMub3B0aW9ucyA9IHtcbiAgICAgIHRocmVzaG9sZDogb3B0aW9ucy50aHJlc2hvbGQgfHwgMC4xLFxuICAgICAgcm9vdE1hcmdpbjogb3B0aW9ucy5yb290TWFyZ2luIHx8ICcwcHggMHB4IC0xMCUgMHB4JyxcbiAgICAgIGFuaW1hdGlvbkNsYXNzOiBvcHRpb25zLmFuaW1hdGlvbkNsYXNzIHx8ICdhbmltYXRlLWluJyxcbiAgICAgIC4uLm9wdGlvbnNcbiAgICB9O1xuICAgIFxuICAgIHRoaXMub2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoXG4gICAgICB0aGlzLmhhbmRsZUludGVyc2VjdGlvbi5iaW5kKHRoaXMpLFxuICAgICAge1xuICAgICAgICB0aHJlc2hvbGQ6IHRoaXMub3B0aW9ucy50aHJlc2hvbGQsXG4gICAgICAgIHJvb3RNYXJnaW46IHRoaXMub3B0aW9ucy5yb290TWFyZ2luXG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIGhhbmRsZUludGVyc2VjdGlvbihlbnRyaWVzKSB7XG4gICAgZW50cmllcy5mb3JFYWNoKGVudHJ5ID0+IHtcbiAgICAgIGlmIChlbnRyeS5pc0ludGVyc2VjdGluZykge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gZW50cnkudGFyZ2V0O1xuICAgICAgICBjb25zdCBhbmltYXRpb24gPSBlbGVtZW50LmRhdGFzZXQuYW5pbWF0aW9uIHx8IHRoaXMub3B0aW9ucy5hbmltYXRpb25DbGFzcztcbiAgICAgICAgXG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChhbmltYXRpb24pO1xuICAgICAgICBcbiAgICAgICAgLy8gUmVtb3ZlIGZyb20gb2JzZXJ2ZXIgaWYgb25lLXRpbWUgYW5pbWF0aW9uXG4gICAgICAgIGlmICghZWxlbWVudC5kYXRhc2V0LnJlcGVhdEFuaW1hdGlvbikge1xuICAgICAgICAgIHRoaXMub2JzZXJ2ZXIudW5vYnNlcnZlKGVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGVudHJ5LnRhcmdldC5kYXRhc2V0LnJlcGVhdEFuaW1hdGlvbikge1xuICAgICAgICAvLyBSZW1vdmUgYW5pbWF0aW9uIGNsYXNzIGlmIHJlcGVhdCBpcyBlbmFibGVkXG4gICAgICAgIGNvbnN0IGFuaW1hdGlvbiA9IGVudHJ5LnRhcmdldC5kYXRhc2V0LmFuaW1hdGlvbiB8fCB0aGlzLm9wdGlvbnMuYW5pbWF0aW9uQ2xhc3M7XG4gICAgICAgIGVudHJ5LnRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKGFuaW1hdGlvbik7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBvYnNlcnZlKGVsZW1lbnQpIHtcbiAgICB0aGlzLm9ic2VydmVyLm9ic2VydmUoZWxlbWVudCk7XG4gIH1cblxuICB1bm9ic2VydmUoZWxlbWVudCkge1xuICAgIHRoaXMub2JzZXJ2ZXIudW5vYnNlcnZlKGVsZW1lbnQpO1xuICB9XG5cbiAgZGlzY29ubmVjdCgpIHtcbiAgICB0aGlzLm9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgfVxufVxuXG4vKipcbiAqIFNtb290aCBjb3VudGVyIGFuaW1hdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gYW5pbWF0ZUNvdW50ZXIoZWxlbWVudCwgZW5kVmFsdWUsIGR1cmF0aW9uID0gMTAwMCwgc3RhcnRWYWx1ZSA9IDApIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgIGNvbnN0IHJhbmdlID0gZW5kVmFsdWUgLSBzdGFydFZhbHVlO1xuICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgIFxuICAgIGZ1bmN0aW9uIHVwZGF0ZUNvdW50ZXIoY3VycmVudFRpbWUpIHtcbiAgICAgIGNvbnN0IGVsYXBzZWQgPSBjdXJyZW50VGltZSAtIHN0YXJ0VGltZTtcbiAgICAgIGNvbnN0IHByb2dyZXNzID0gTWF0aC5taW4oZWxhcHNlZCAvIGR1cmF0aW9uLCAxKTtcbiAgICAgIFxuICAgICAgLy8gRWFzaW5nIGZ1bmN0aW9uIChlYXNlIG91dClcbiAgICAgIGNvbnN0IGVhc2VPdXQgPSAxIC0gTWF0aC5wb3coMSAtIHByb2dyZXNzLCAzKTtcbiAgICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IE1hdGgucm91bmQoc3RhcnRWYWx1ZSArIChyYW5nZSAqIGVhc2VPdXQpKTtcbiAgICAgIFxuICAgICAgZWxlbWVudC50ZXh0Q29udGVudCA9IGN1cnJlbnRWYWx1ZS50b0xvY2FsZVN0cmluZygpO1xuICAgICAgXG4gICAgICBpZiAocHJvZ3Jlc3MgPCAxKSB7XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSh1cGRhdGVDb3VudGVyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHVwZGF0ZUNvdW50ZXIpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBQYXJhbGxheCBlZmZlY3QgdXRpbGl0eVxuICovXG5leHBvcnQgY2xhc3MgUGFyYWxsYXhDb250cm9sbGVyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5lbGVtZW50cyA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLmlzUnVubmluZyA9IGZhbHNlO1xuICAgIHRoaXMuaGFuZGxlU2Nyb2xsID0gdGhpcy5oYW5kbGVTY3JvbGwuYmluZCh0aGlzKTtcbiAgfVxuXG4gIGFkZChlbGVtZW50LCBzcGVlZCA9IDAuNSwgZGlyZWN0aW9uID0gJ3ZlcnRpY2FsJykge1xuICAgIHRoaXMuZWxlbWVudHMuc2V0KGVsZW1lbnQsIHsgc3BlZWQsIGRpcmVjdGlvbiB9KTtcbiAgICBcbiAgICBpZiAoIXRoaXMuaXNSdW5uaW5nKSB7XG4gICAgICB0aGlzLnN0YXJ0KCk7XG4gICAgfVxuICB9XG5cbiAgcmVtb3ZlKGVsZW1lbnQpIHtcbiAgICB0aGlzLmVsZW1lbnRzLmRlbGV0ZShlbGVtZW50KTtcbiAgICBcbiAgICBpZiAodGhpcy5lbGVtZW50cy5zaXplID09PSAwKSB7XG4gICAgICB0aGlzLnN0b3AoKTtcbiAgICB9XG4gIH1cblxuICBzdGFydCgpIHtcbiAgICBpZiAodGhpcy5pc1J1bm5pbmcpIHJldHVybjtcbiAgICBcbiAgICB0aGlzLmlzUnVubmluZyA9IHRydWU7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuaGFuZGxlU2Nyb2xsLCB7IHBhc3NpdmU6IHRydWUgfSk7XG4gIH1cblxuICBzdG9wKCkge1xuICAgIHRoaXMuaXNSdW5uaW5nID0gZmFsc2U7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuaGFuZGxlU2Nyb2xsKTtcbiAgfVxuXG4gIGhhbmRsZVNjcm9sbCgpIHtcbiAgICBjb25zdCBzY3JvbGxZID0gd2luZG93LnBhZ2VZT2Zmc2V0O1xuICAgIFxuICAgIHRoaXMuZWxlbWVudHMuZm9yRWFjaCgoY29uZmlnLCBlbGVtZW50KSA9PiB7XG4gICAgICBjb25zdCB7IHNwZWVkLCBkaXJlY3Rpb24gfSA9IGNvbmZpZztcbiAgICAgIGNvbnN0IHRyYW5zZm9ybSA9IGRpcmVjdGlvbiA9PT0gJ3ZlcnRpY2FsJyBcbiAgICAgICAgPyBgdHJhbnNsYXRlWSgke3Njcm9sbFkgKiBzcGVlZH1weClgXG4gICAgICAgIDogYHRyYW5zbGF0ZVgoJHtzY3JvbGxZICogc3BlZWR9cHgpYDtcbiAgICAgIFxuICAgICAgZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSB0cmFuc2Zvcm07XG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gKiBMb2FkaW5nIHNwaW5uZXIgdXRpbGl0eVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTG9hZGluZ1NwaW5uZXIoc2l6ZSA9ICdtZWRpdW0nLCBjb2xvciA9ICdjdXJyZW50Q29sb3InKSB7XG4gIGNvbnN0IHNpemVzID0ge1xuICAgIHNtYWxsOiAndy00IGgtNCcsXG4gICAgbWVkaXVtOiAndy02IGgtNicsIFxuICAgIGxhcmdlOiAndy04IGgtOCdcbiAgfTtcbiAgXG4gIGNvbnN0IHNwaW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgc3Bpbm5lci5jbGFzc05hbWUgPSBgYW5pbWF0ZS1zcGluICR7c2l6ZXNbc2l6ZV19IGJvcmRlci0yIGJvcmRlci10cmFuc3BhcmVudCBib3JkZXItdC1jdXJyZW50IHJvdW5kZWQtZnVsbGA7XG4gIHNwaW5uZXIuc3R5bGUuYm9yZGVyVG9wQ29sb3IgPSBjb2xvcjtcbiAgc3Bpbm5lci5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnc3RhdHVzJyk7XG4gIHNwaW5uZXIuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ0xvYWRpbmcnKTtcbiAgXG4gIHJldHVybiBzcGlubmVyO1xufVxuXG4vKipcbiAqIFByb2dyZXNzIGJhciBhbmltYXRpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFuaW1hdGVQcm9ncmVzc0JhcihlbGVtZW50LCB0YXJnZXRQZXJjZW50LCBkdXJhdGlvbiA9IDEwMDApIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgIGNvbnN0IHN0YXJ0UGVyY2VudCA9IHBhcnNlRmxvYXQoZWxlbWVudC5zdHlsZS53aWR0aCkgfHwgMDtcbiAgICBjb25zdCByYW5nZSA9IHRhcmdldFBlcmNlbnQgLSBzdGFydFBlcmNlbnQ7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgXG4gICAgZnVuY3Rpb24gdXBkYXRlUHJvZ3Jlc3MoY3VycmVudFRpbWUpIHtcbiAgICAgIGNvbnN0IGVsYXBzZWQgPSBjdXJyZW50VGltZSAtIHN0YXJ0VGltZTtcbiAgICAgIGNvbnN0IHByb2dyZXNzID0gTWF0aC5taW4oZWxhcHNlZCAvIGR1cmF0aW9uLCAxKTtcbiAgICAgIFxuICAgICAgLy8gRWFzaW5nIGZ1bmN0aW9uXG4gICAgICBjb25zdCBlYXNlT3V0ID0gMSAtIE1hdGgucG93KDEgLSBwcm9ncmVzcywgMik7XG4gICAgICBjb25zdCBjdXJyZW50UGVyY2VudCA9IHN0YXJ0UGVyY2VudCArIChyYW5nZSAqIGVhc2VPdXQpO1xuICAgICAgXG4gICAgICBlbGVtZW50LnN0eWxlLndpZHRoID0gYCR7Y3VycmVudFBlcmNlbnR9JWA7XG4gICAgICBcbiAgICAgIGlmIChwcm9ncmVzcyA8IDEpIHtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHVwZGF0ZVByb2dyZXNzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHVwZGF0ZVByb2dyZXNzKTtcbiAgfSk7XG59IiwgIi8qKlxuICogQWNjZXNzaWJpbGl0eSB1dGlsaXRpZXMgLSBBMTF5IGhlbHBlcnMgYW5kIHBhdHRlcm5zXG4gKiBDb25zb2xpZGF0ZXMgYWNjZXNzaWJpbGl0eSBmZWF0dXJlcyBmcm9tIHBlcmZvcm1hbmNlLW9wdGltaXphdGlvbnMuanMgYW5kIG90aGVyIGZpbGVzXG4gKi9cblxuLyoqXG4gKiBTY3JlZW4gcmVhZGVyIGFubm91bmNlbWVudHNcbiAqL1xuY2xhc3MgU2NyZWVuUmVhZGVyQW5ub3VuY2VyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5hbm5vdW5jZXIgPSBudWxsO1xuICAgIHRoaXMuaW5pdCgpO1xuICB9XG5cbiAgaW5pdCgpIHtcbiAgICBpZiAodGhpcy5hbm5vdW5jZXIpIHJldHVybjtcbiAgICBcbiAgICB0aGlzLmFubm91bmNlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuYW5ub3VuY2VyLmlkID0gJ3NyLWFubm91bmNlcic7XG4gICAgdGhpcy5hbm5vdW5jZXIuY2xhc3NOYW1lID0gJ3NyLW9ubHknO1xuICAgIFxuICAgIHRoaXMuYW5ub3VuY2VyLnNldEF0dHJpYnV0ZSgnYXJpYS1saXZlJywgJ3BvbGl0ZScpO1xuICAgIHRoaXMuYW5ub3VuY2VyLnNldEF0dHJpYnV0ZSgnYXJpYS1hdG9taWMnLCAndHJ1ZScpO1xuICAgIFxuICAgIC8vIFZpc3VhbGx5IGhpZGRlbiBidXQgYWNjZXNzaWJsZSB0byBzY3JlZW4gcmVhZGVyc1xuICAgIE9iamVjdC5hc3NpZ24odGhpcy5hbm5vdW5jZXIuc3R5bGUsIHtcbiAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgbGVmdDogJy0xMDAwMHB4JyxcbiAgICAgIHdpZHRoOiAnMXB4JyxcbiAgICAgIGhlaWdodDogJzFweCcsXG4gICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgICBjbGlwOiAncmVjdCgwLCAwLCAwLCAwKScsXG4gICAgICB3aGl0ZVNwYWNlOiAnbm93cmFwJyxcbiAgICAgIGJvcmRlcjogJzAnXG4gICAgfSk7XG4gICAgXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmFubm91bmNlcik7XG4gIH1cblxuICBhbm5vdW5jZShtZXNzYWdlLCBwcmlvcml0eSA9ICdwb2xpdGUnKSB7XG4gICAgaWYgKCF0aGlzLmFubm91bmNlcikgdGhpcy5pbml0KCk7XG4gICAgXG4gICAgdGhpcy5hbm5vdW5jZXIuc2V0QXR0cmlidXRlKCdhcmlhLWxpdmUnLCBwcmlvcml0eSk7XG4gICAgdGhpcy5hbm5vdW5jZXIudGV4dENvbnRlbnQgPSBtZXNzYWdlO1xuICAgIFxuICAgIC8vIENsZWFyIGFmdGVyIGFubm91bmNlbWVudFxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5hbm5vdW5jZXIudGV4dENvbnRlbnQgPSAnJztcbiAgICB9LCAxMDAwKTtcbiAgfVxuXG4gIGFzc2VydGl2ZShtZXNzYWdlKSB7XG4gICAgdGhpcy5hbm5vdW5jZShtZXNzYWdlLCAnYXNzZXJ0aXZlJyk7XG4gIH1cbn1cblxuLy8gR2xvYmFsIGluc3RhbmNlXG5jb25zdCBhbm5vdW5jZXIgPSBuZXcgU2NyZWVuUmVhZGVyQW5ub3VuY2VyKCk7XG5cbi8qKlxuICogQW5ub3VuY2UgdG8gc2NyZWVuIHJlYWRlcnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFubm91bmNlVG9TY3JlZW5SZWFkZXIobWVzc2FnZSwgcHJpb3JpdHkgPSAncG9saXRlJykge1xuICBhbm5vdW5jZXIuYW5ub3VuY2UobWVzc2FnZSwgcHJpb3JpdHkpO1xufVxuXG4vKipcbiAqIEZvY3VzIG1hbmFnZW1lbnQgdXRpbGl0aWVzXG4gKi9cbmV4cG9ydCBjb25zdCBmb2N1cyA9IHtcbiAgLyoqXG4gICAqIEZvY3VzIHRyYXAgZm9yIG1vZGFscyBhbmQgb3ZlcmxheXNcbiAgICovXG4gIHRyYXAoY29udGFpbmVyLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBmb2N1c2FibGVFbGVtZW50cyA9IHRoaXMuZ2V0Rm9jdXNhYmxlRWxlbWVudHMoY29udGFpbmVyKTtcbiAgICBjb25zdCBmaXJzdEVsZW1lbnQgPSBmb2N1c2FibGVFbGVtZW50c1swXTtcbiAgICBjb25zdCBsYXN0RWxlbWVudCA9IGZvY3VzYWJsZUVsZW1lbnRzW2ZvY3VzYWJsZUVsZW1lbnRzLmxlbmd0aCAtIDFdO1xuICAgIFxuICAgIGNvbnN0IGhhbmRsZVRhYktleSA9IChlKSA9PiB7XG4gICAgICBpZiAoZS5rZXkgIT09ICdUYWInKSByZXR1cm47XG4gICAgICBcbiAgICAgIGlmIChlLnNoaWZ0S2V5KSB7XG4gICAgICAgIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSBmaXJzdEVsZW1lbnQpIHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgbGFzdEVsZW1lbnQ/LmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSBsYXN0RWxlbWVudCkge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBmaXJzdEVsZW1lbnQ/LmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIGNvbnN0IGhhbmRsZUVzY2FwZUtleSA9IChlKSA9PiB7XG4gICAgICBpZiAoZS5rZXkgPT09ICdFc2NhcGUnICYmIG9wdGlvbnMub25Fc2NhcGUpIHtcbiAgICAgICAgb3B0aW9ucy5vbkVzY2FwZSgpO1xuICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVUYWJLZXkpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVFc2NhcGVLZXkpO1xuICAgIFxuICAgIC8vIEZvY3VzIGZpcnN0IGVsZW1lbnRcbiAgICBmaXJzdEVsZW1lbnQ/LmZvY3VzKCk7XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIHJlbGVhc2UoKSB7XG4gICAgICAgIGNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlVGFiS2V5KTtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUVzY2FwZUtleSk7XG4gICAgICB9XG4gICAgfTtcbiAgfSxcblxuICAvKipcbiAgICogR2V0IGFsbCBmb2N1c2FibGUgZWxlbWVudHMgd2l0aGluIGEgY29udGFpbmVyXG4gICAqL1xuICBnZXRGb2N1c2FibGVFbGVtZW50cyhjb250YWluZXIpIHtcbiAgICBjb25zdCBzZWxlY3RvciA9IFtcbiAgICAgICdhW2hyZWZdJyxcbiAgICAgICdidXR0b24nLFxuICAgICAgJ2lucHV0JyxcbiAgICAgICdzZWxlY3QnLFxuICAgICAgJ3RleHRhcmVhJyxcbiAgICAgICdbdGFiaW5kZXhdOm5vdChbdGFiaW5kZXg9XCItMVwiXSknLFxuICAgICAgJ1tjb250ZW50ZWRpdGFibGU9XCJ0cnVlXCJdJ1xuICAgIF0uam9pbignLCAnKTtcbiAgICBcbiAgICByZXR1cm4gQXJyYXkuZnJvbShjb250YWluZXIucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpXG4gICAgICAuZmlsdGVyKGVsZW1lbnQgPT4ge1xuICAgICAgICByZXR1cm4gIWVsZW1lbnQuZGlzYWJsZWQgJiYgXG4gICAgICAgICAgICAgICAhZWxlbWVudC5oaWRkZW4gJiYgXG4gICAgICAgICAgICAgICBlbGVtZW50Lm9mZnNldFdpZHRoID4gMCAmJiBcbiAgICAgICAgICAgICAgIGVsZW1lbnQub2Zmc2V0SGVpZ2h0ID4gMDtcbiAgICAgIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTYXZlIGFuZCByZXN0b3JlIGZvY3VzXG4gICAqL1xuICBzYXZlKCkge1xuICAgIHJldHVybiBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuICB9LFxuXG4gIHJlc3RvcmUoZWxlbWVudCkge1xuICAgIGlmIChlbGVtZW50ICYmIHR5cGVvZiBlbGVtZW50LmZvY3VzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBlbGVtZW50LmZvY3VzKCk7XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIEtleWJvYXJkIG5hdmlnYXRpb24gdXRpbGl0aWVzXG4gKi9cbmV4cG9ydCBjb25zdCBrZXlib2FyZCA9IHtcbiAgLyoqXG4gICAqIEFycm93IGtleSBuYXZpZ2F0aW9uIGZvciBsaXN0cy9ncmlkc1xuICAgKi9cbiAgc2V0dXBBcnJvd05hdmlnYXRpb24oY29udGFpbmVyLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCB7XG4gICAgICBpdGVtU2VsZWN0b3IgPSAnW3JvbGU9XCJvcHRpb25cIl0sIGJ1dHRvbiwgYScsXG4gICAgICBkaXJlY3Rpb24gPSAnYm90aCcsIC8vICdob3Jpem9udGFsJywgJ3ZlcnRpY2FsJywgJ2JvdGgnXG4gICAgICB3cmFwID0gdHJ1ZSxcbiAgICAgIG9uQWN0aXZhdGUgPSBudWxsXG4gICAgfSA9IG9wdGlvbnM7XG4gICAgXG4gICAgY29uc3QgaGFuZGxlS2V5RG93biA9IChlKSA9PiB7XG4gICAgICBjb25zdCBpdGVtcyA9IEFycmF5LmZyb20oY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoaXRlbVNlbGVjdG9yKSk7XG4gICAgICBjb25zdCBjdXJyZW50SW5kZXggPSBpdGVtcy5pbmRleE9mKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpO1xuICAgICAgXG4gICAgICBpZiAoY3VycmVudEluZGV4ID09PSAtMSkgcmV0dXJuO1xuICAgICAgXG4gICAgICBsZXQgbmV4dEluZGV4ID0gY3VycmVudEluZGV4O1xuICAgICAgXG4gICAgICBzd2l0Y2ggKGUua2V5KSB7XG4gICAgICAgIGNhc2UgJ0Fycm93RG93bic6XG4gICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ3ZlcnRpY2FsJyB8fCBkaXJlY3Rpb24gPT09ICdib3RoJykge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgbmV4dEluZGV4ID0gd3JhcCA/IChjdXJyZW50SW5kZXggKyAxKSAlIGl0ZW1zLmxlbmd0aCA6IE1hdGgubWluKGN1cnJlbnRJbmRleCArIDEsIGl0ZW1zLmxlbmd0aCAtIDEpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnQXJyb3dVcCc6XG4gICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ3ZlcnRpY2FsJyB8fCBkaXJlY3Rpb24gPT09ICdib3RoJykge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgbmV4dEluZGV4ID0gd3JhcCA/IChjdXJyZW50SW5kZXggLSAxICsgaXRlbXMubGVuZ3RoKSAlIGl0ZW1zLmxlbmd0aCA6IE1hdGgubWF4KGN1cnJlbnRJbmRleCAtIDEsIDApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnQXJyb3dSaWdodCc6XG4gICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnIHx8IGRpcmVjdGlvbiA9PT0gJ2JvdGgnKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBuZXh0SW5kZXggPSB3cmFwID8gKGN1cnJlbnRJbmRleCArIDEpICUgaXRlbXMubGVuZ3RoIDogTWF0aC5taW4oY3VycmVudEluZGV4ICsgMSwgaXRlbXMubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdBcnJvd0xlZnQnOlxuICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdob3Jpem9udGFsJyB8fCBkaXJlY3Rpb24gPT09ICdib3RoJykge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgbmV4dEluZGV4ID0gd3JhcCA/IChjdXJyZW50SW5kZXggLSAxICsgaXRlbXMubGVuZ3RoKSAlIGl0ZW1zLmxlbmd0aCA6IE1hdGgubWF4KGN1cnJlbnRJbmRleCAtIDEsIDApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnSG9tZSc6XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIG5leHRJbmRleCA9IDA7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0VuZCc6XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIG5leHRJbmRleCA9IGl0ZW1zLmxlbmd0aCAtIDE7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0VudGVyJzpcbiAgICAgICAgY2FzZSAnICc6XG4gICAgICAgICAgaWYgKG9uQWN0aXZhdGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIG9uQWN0aXZhdGUoaXRlbXNbY3VycmVudEluZGV4XSwgY3VycmVudEluZGV4KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChuZXh0SW5kZXggIT09IGN1cnJlbnRJbmRleCAmJiBpdGVtc1tuZXh0SW5kZXhdKSB7XG4gICAgICAgIGl0ZW1zW25leHRJbmRleF0uZm9jdXMoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlS2V5RG93bik7XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlS2V5RG93bik7XG4gICAgICB9XG4gICAgfTtcbiAgfSxcblxuICAvKipcbiAgICogR2xvYmFsIGtleWJvYXJkIHNob3J0Y3V0c1xuICAgKi9cbiAgYWRkU2hvcnRjdXQoa2V5LCBjYWxsYmFjaywgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3Qge1xuICAgICAgY3RybCA9IGZhbHNlLFxuICAgICAgYWx0ID0gZmFsc2UsXG4gICAgICBzaGlmdCA9IGZhbHNlLFxuICAgICAgbWV0YSA9IGZhbHNlLFxuICAgICAgcHJldmVudERlZmF1bHQgPSB0cnVlXG4gICAgfSA9IG9wdGlvbnM7XG4gICAgXG4gICAgY29uc3QgaGFuZGxlS2V5RG93biA9IChlKSA9PiB7XG4gICAgICBpZiAoZS5rZXkgPT09IGtleSAmJlxuICAgICAgICAgIGUuY3RybEtleSA9PT0gY3RybCAmJlxuICAgICAgICAgIGUuYWx0S2V5ID09PSBhbHQgJiZcbiAgICAgICAgICBlLnNoaWZ0S2V5ID09PSBzaGlmdCAmJlxuICAgICAgICAgIGUubWV0YUtleSA9PT0gbWV0YSkge1xuICAgICAgICBcbiAgICAgICAgaWYgKHByZXZlbnREZWZhdWx0KSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjYWxsYmFjayhlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXlEb3duKTtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgcmVtb3ZlKCkge1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlS2V5RG93bik7XG4gICAgICB9XG4gICAgfTtcbiAgfVxufTtcblxuLyoqXG4gKiBBUklBIHV0aWxpdGllc1xuICovXG5leHBvcnQgY29uc3QgYXJpYSA9IHtcbiAgLyoqXG4gICAqIFVwZGF0ZSBBUklBIGF0dHJpYnV0ZXNcbiAgICovXG4gIHNldChlbGVtZW50LCBhdHRyaWJ1dGVzKSB7XG4gICAgT2JqZWN0LmVudHJpZXMoYXR0cmlidXRlcykuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICBjb25zdCBhcmlhS2V5ID0ga2V5LnN0YXJ0c1dpdGgoJ2FyaWEtJykgPyBrZXkgOiBgYXJpYS0ke2tleX1gO1xuICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoYXJpYUtleSwgdmFsdWUpO1xuICAgIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBUb2dnbGUgQVJJQSBzdGF0ZVxuICAgKi9cbiAgdG9nZ2xlKGVsZW1lbnQsIGF0dHJpYnV0ZSwgdmFsdWUxID0gJ3RydWUnLCB2YWx1ZTIgPSAnZmFsc2UnKSB7XG4gICAgY29uc3QgYXJpYUtleSA9IGF0dHJpYnV0ZS5zdGFydHNXaXRoKCdhcmlhLScpID8gYXR0cmlidXRlIDogYGFyaWEtJHthdHRyaWJ1dGV9YDtcbiAgICBjb25zdCBjdXJyZW50VmFsdWUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShhcmlhS2V5KTtcbiAgICBjb25zdCBuZXdWYWx1ZSA9IGN1cnJlbnRWYWx1ZSA9PT0gdmFsdWUxID8gdmFsdWUyIDogdmFsdWUxO1xuICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKGFyaWFLZXksIG5ld1ZhbHVlKTtcbiAgICByZXR1cm4gbmV3VmFsdWU7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNldHVwIGV4cGFuZGFibGUgY29udGVudCBBUklBXG4gICAqL1xuICBzZXR1cEV4cGFuZGFibGUodHJpZ2dlciwgY29udGVudCwgZXhwYW5kZWQgPSBmYWxzZSkge1xuICAgIGNvbnN0IGNvbnRlbnRJZCA9IGNvbnRlbnQuaWQgfHwgYGV4cGFuZGFibGUtJHtEYXRlLm5vdygpfWA7XG4gICAgY29udGVudC5pZCA9IGNvbnRlbnRJZDtcbiAgICBcbiAgICB0cmlnZ2VyLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsIFN0cmluZyhleHBhbmRlZCkpO1xuICAgIHRyaWdnZXIuc2V0QXR0cmlidXRlKCdhcmlhLWNvbnRyb2xzJywgY29udGVudElkKTtcbiAgICBjb250ZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCBTdHJpbmcoIWV4cGFuZGVkKSk7XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIGV4cGFuZCgpIHtcbiAgICAgICAgdHJpZ2dlci5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAndHJ1ZScpO1xuICAgICAgICBjb250ZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAnZmFsc2UnKTtcbiAgICAgIH0sXG4gICAgICBjb2xsYXBzZSgpIHtcbiAgICAgICAgdHJpZ2dlci5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnKTtcbiAgICAgICAgY29udGVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKTtcbiAgICAgIH0sXG4gICAgICB0b2dnbGUoKSB7XG4gICAgICAgIGNvbnN0IGlzRXhwYW5kZWQgPSB0cmlnZ2VyLmdldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcpID09PSAndHJ1ZSc7XG4gICAgICAgIHJldHVybiBpc0V4cGFuZGVkID8gdGhpcy5jb2xsYXBzZSgpIDogdGhpcy5leHBhbmQoKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG59O1xuXG4vKipcbiAqIFJlZHVjZWQgbW90aW9uIHV0aWxpdGllc1xuICovXG5leHBvcnQgY29uc3QgbW90aW9uID0ge1xuICAvKipcbiAgICogQ2hlY2sgaWYgdXNlciBwcmVmZXJzIHJlZHVjZWQgbW90aW9uXG4gICAqL1xuICBwcmVmZXJzUmVkdWNlZCgpIHtcbiAgICByZXR1cm4gd2luZG93Lm1hdGNoTWVkaWEoJyhwcmVmZXJzLXJlZHVjZWQtbW90aW9uOiByZWR1Y2UpJykubWF0Y2hlcztcbiAgfSxcblxuICAvKipcbiAgICogUmVzcGVjdCByZWR1Y2VkIG1vdGlvbiBwcmVmZXJlbmNlXG4gICAqL1xuICByZXNwZWN0UHJlZmVyZW5jZShub3JtYWxBbmltYXRpb24sIHJlZHVjZWRBbmltYXRpb24gPSBudWxsKSB7XG4gICAgcmV0dXJuIHRoaXMucHJlZmVyc1JlZHVjZWQoKSA/IChyZWR1Y2VkQW5pbWF0aW9uIHx8ICgoKSA9PiB7fSkpIDogbm9ybWFsQW5pbWF0aW9uO1xuICB9XG59O1xuXG4vKipcbiAqIENvbG9yIGNvbnRyYXN0IHV0aWxpdGllc1xuICovXG5leHBvcnQgY29uc3QgY29udHJhc3QgPSB7XG4gIC8qKlxuICAgKiBDaGVjayBpZiB1c2VyIHByZWZlcnMgaGlnaCBjb250cmFzdFxuICAgKi9cbiAgcHJlZmVyc0hpZ2goKSB7XG4gICAgcmV0dXJuIHdpbmRvdy5tYXRjaE1lZGlhKCcocHJlZmVycy1jb250cmFzdDogaGlnaCknKS5tYXRjaGVzO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgbHVtaW5hbmNlIG9mIGEgY29sb3JcbiAgICovXG4gIGdldEx1bWluYW5jZShyLCBnLCBiKSB7XG4gICAgY29uc3QgW3JzLCBncywgYnNdID0gW3IsIGcsIGJdLm1hcChjID0+IHtcbiAgICAgIGMgPSBjIC8gMjU1O1xuICAgICAgcmV0dXJuIGMgPD0gMC4wMzkyOCA/IGMgLyAxMi45MiA6IE1hdGgucG93KChjICsgMC4wNTUpIC8gMS4wNTUsIDIuNCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIDAuMjEyNiAqIHJzICsgMC43MTUyICogZ3MgKyAwLjA3MjIgKiBicztcbiAgfSxcblxuICAvKipcbiAgICogQ2FsY3VsYXRlIGNvbnRyYXN0IHJhdGlvIGJldHdlZW4gdHdvIGNvbG9yc1xuICAgKi9cbiAgZ2V0Q29udHJhc3RSYXRpbyhjb2xvcjEsIGNvbG9yMikge1xuICAgIGNvbnN0IGwxID0gdGhpcy5nZXRMdW1pbmFuY2UoLi4uY29sb3IxKTtcbiAgICBjb25zdCBsMiA9IHRoaXMuZ2V0THVtaW5hbmNlKC4uLmNvbG9yMik7XG4gICAgY29uc3QgbGlnaHRlciA9IE1hdGgubWF4KGwxLCBsMik7XG4gICAgY29uc3QgZGFya2VyID0gTWF0aC5taW4obDEsIGwyKTtcbiAgICByZXR1cm4gKGxpZ2h0ZXIgKyAwLjA1KSAvIChkYXJrZXIgKyAwLjA1KTtcbiAgfVxufTtcblxuLyoqXG4gKiBIaWdoIGNvbnRyYXN0IG1vZGUgZGV0ZWN0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZXRlY3RIaWdoQ29udHJhc3RNb2RlKCkge1xuICAvLyBDcmVhdGUgYSB0ZXN0IGVsZW1lbnQgdG8gZGV0ZWN0IGhpZ2ggY29udHJhc3QgbW9kZVxuICBjb25zdCB0ZXN0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICB0ZXN0RWxlbWVudC5zdHlsZS5jc3NUZXh0ID0gYFxuICAgIGJvcmRlcjogMXB4IHNvbGlkO1xuICAgIGJvcmRlci1jb2xvcjogcmVkIGdyZWVuO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICBoZWlnaHQ6IDVweDtcbiAgICB0b3A6IC05OTlweDtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCJkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhBUUFCQUlBQUFQLy8vd0FBQUNINUJBRUFBQUFBTEFBQUFBQUJBQUVBQUFJQ1JBRUFPdz09XCIpO1xuICBgO1xuICBcbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0ZXN0RWxlbWVudCk7XG4gIFxuICBjb25zdCBjb21wdXRlZFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGVzdEVsZW1lbnQpO1xuICBjb25zdCBpc0hpZ2hDb250cmFzdCA9IGNvbXB1dGVkU3R5bGUuYm9yZGVyVG9wQ29sb3IgPT09IGNvbXB1dGVkU3R5bGUuYm9yZGVyUmlnaHRDb2xvcjtcbiAgXG4gIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGVzdEVsZW1lbnQpO1xuICBcbiAgcmV0dXJuIGlzSGlnaENvbnRyYXN0O1xufVxuXG4vLyBNYWtlIGdsb2JhbCBhbm5vdW5jZXIgYXZhaWxhYmxlXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgd2luZG93LmFubm91bmNlVG9TY3JlZW5SZWFkZXIgPSBhbm5vdW5jZVRvU2NyZWVuUmVhZGVyO1xufSIsICIvKipcbiAqIENvcHlNYW5hZ2VyIC0gVW5pZmllZCBjb3B5IGZ1bmN0aW9uYWxpdHkgZm9yIGFsbCBjb21wb25lbnRzXG4gKiBDb25zb2xpZGF0ZXMgY29weSBwYXR0ZXJucywgdmlzdWFsIGZlZWRiYWNrLCBhbmQgZXJyb3IgaGFuZGxpbmdcbiAqL1xuXG5pbXBvcnQgeyBjb3B5VG9DbGlwYm9hcmQgfSBmcm9tICcuL2RvbS5qcyc7XG5pbXBvcnQgeyBhbm5vdW5jZVRvU2NyZWVuUmVhZGVyIH0gZnJvbSAnLi9hY2Nlc3NpYmlsaXR5LmpzJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBDb3B5T3B0aW9uc1xuICogQHByb3BlcnR5IHtIVE1MRWxlbWVudH0gW2J1dHRvbl0gLSBCdXR0b24gZWxlbWVudCBmb3IgdmlzdWFsIGZlZWRiYWNrXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3N1Y2Nlc3NNZXNzYWdlXSAtIFN1Y2Nlc3MgZmVlZGJhY2sgdGV4dFxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtlcnJvck1lc3NhZ2VdIC0gRXJyb3IgZmVlZGJhY2sgdGV4dFxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtmZWVkYmFja0R1cmF0aW9uXSAtIER1cmF0aW9uIGZvciB2aXN1YWwgZmVlZGJhY2sgKG1zKVxuICogQHByb3BlcnR5IHtib29sZWFufSBbYW5ub3VuY2VdIC0gV2hldGhlciB0byBhbm5vdW5jZSB0byBzY3JlZW4gcmVhZGVyc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IFthbm5vdW5jZU1lc3NhZ2VdIC0gQ3VzdG9tIHNjcmVlbiByZWFkZXIgbWVzc2FnZVxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gW29uU3VjY2Vzc10gLSBTdWNjZXNzIGNhbGxiYWNrXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBbb25FcnJvcl0gLSBFcnJvciBjYWxsYmFja1xuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gW3ByZXByb2Nlc3NUZXh0XSAtIFRleHQgcHJlcHJvY2Vzc2luZyBmdW5jdGlvblxuICogQHByb3BlcnR5IHtPYmplY3R9IFthbmFseXRpY3NdIC0gQW5hbHl0aWNzIGRhdGEgdG8gdHJhY2tcbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IENvcHlSZXN1bHRcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gc3VjY2VzcyAtIFdoZXRoZXIgY29weSB3YXMgc3VjY2Vzc2Z1bFxuICogQHByb3BlcnR5IHtzdHJpbmd9IHRleHQgLSBUaGUgdGV4dCB0aGF0IHdhcyBjb3BpZWRcbiAqIEBwcm9wZXJ0eSB7RXJyb3J9IFtlcnJvcl0gLSBFcnJvciBpZiBjb3B5IGZhaWxlZFxuICovXG5cbmV4cG9ydCBjbGFzcyBDb3B5TWFuYWdlciB7XG4gIHN0YXRpYyBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgICBzdWNjZXNzTWVzc2FnZTogJ1x1MjcwNSBDb3BpZWQhJyxcbiAgICBlcnJvck1lc3NhZ2U6ICdcdTI3NEMgRmFpbGVkJyxcbiAgICBmZWVkYmFja0R1cmF0aW9uOiAyMDAwLFxuICAgIGFubm91bmNlOiB0cnVlLFxuICAgIGFubm91bmNlTWVzc2FnZTogJ0NvcGllZCB0byBjbGlwYm9hcmQnXG4gIH07XG5cbiAgLyoqXG4gICAqIENvcHkgdGV4dCB3aXRoIHVuaWZpZWQgZmVlZGJhY2sgYW5kIGVycm9yIGhhbmRsaW5nXG4gICAqIEBwYXJhbSB7c3RyaW5nfEhUTUxFbGVtZW50fSBzb3VyY2UgLSBUZXh0IG9yIGVsZW1lbnQgdG8gY29weSBmcm9tXG4gICAqIEBwYXJhbSB7Q29weU9wdGlvbnN9IG9wdGlvbnMgLSBDb3B5IGNvbmZpZ3VyYXRpb25cbiAgICogQHJldHVybnMge1Byb21pc2U8Q29weVJlc3VsdD59XG4gICAqL1xuICBzdGF0aWMgYXN5bmMgY29weShzb3VyY2UsIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGNvbmZpZyA9IHsgLi4udGhpcy5kZWZhdWx0T3B0aW9ucywgLi4ub3B0aW9ucyB9O1xuICAgIFxuICAgIHRyeSB7XG4gICAgICAvLyBFeHRyYWN0IHRleHQgZnJvbSBzb3VyY2VcbiAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCB0aGlzLmV4dHJhY3RUZXh0KHNvdXJjZSwgY29uZmlnKTtcbiAgICAgIFxuICAgICAgaWYgKCF0ZXh0KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdGV4dCBmb3VuZCB0byBjb3B5Jyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFBlcmZvcm0gdGhlIGNvcHkgb3BlcmF0aW9uXG4gICAgICBjb25zdCBzdWNjZXNzID0gYXdhaXQgY29weVRvQ2xpcGJvYXJkKHRleHQpO1xuICAgICAgXG4gICAgICBpZiAoIXN1Y2Nlc3MpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb3B5IG9wZXJhdGlvbiBmYWlsZWQnKTtcbiAgICAgIH1cblxuICAgICAgLy8gSGFuZGxlIHN1Y2Nlc3MgZmVlZGJhY2tcbiAgICAgIGF3YWl0IHRoaXMuaGFuZGxlU3VjY2Vzcyh0ZXh0LCBjb25maWcpO1xuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICB0ZXh0XG4gICAgICB9O1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIEhhbmRsZSBlcnJvciBmZWVkYmFja1xuICAgICAgYXdhaXQgdGhpcy5oYW5kbGVFcnJvcihlcnJvciwgY29uZmlnKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIHRleHQ6ICcnLFxuICAgICAgICBlcnJvclxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRXh0cmFjdCB0ZXh0IGNvbnRlbnQgZnJvbSB2YXJpb3VzIHNvdXJjZSB0eXBlc1xuICAgKiBAcGFyYW0ge3N0cmluZ3xIVE1MRWxlbWVudH0gc291cmNlIC0gU291cmNlIHRvIGV4dHJhY3QgZnJvbVxuICAgKiBAcGFyYW0ge0NvcHlPcHRpb25zfSBvcHRpb25zIC0gQ29uZmlndXJhdGlvbiBvcHRpb25zXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZz59XG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZXh0cmFjdFRleHQoc291cmNlLCBvcHRpb25zKSB7XG4gICAgLy8gSWYgc291cmNlIGlzIGFscmVhZHkgYSBzdHJpbmdcbiAgICBpZiAodHlwZW9mIHNvdXJjZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiBvcHRpb25zLnByZXByb2Nlc3NUZXh0ID8gb3B0aW9ucy5wcmVwcm9jZXNzVGV4dChzb3VyY2UpIDogc291cmNlO1xuICAgIH1cblxuICAgIC8vIElmIHNvdXJjZSBpcyBhbiBlbGVtZW50XG4gICAgaWYgKHNvdXJjZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICByZXR1cm4gdGhpcy5leHRyYWN0RnJvbUVsZW1lbnQoc291cmNlLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICAvLyBUcnkgdG8gZmluZCBlbGVtZW50IGJ5IHNlbGVjdG9yXG4gICAgaWYgKHR5cGVvZiBzb3VyY2UgPT09ICdzdHJpbmcnICYmIHNvdXJjZS5zdGFydHNXaXRoKCcuJykgfHwgc291cmNlLnN0YXJ0c1dpdGgoJyMnKSkge1xuICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc291cmNlKTtcbiAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmV4dHJhY3RGcm9tRWxlbWVudChlbGVtZW50LCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY29weSBzb3VyY2UnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRyYWN0IHRleHQgZnJvbSBIVE1MIGVsZW1lbnRzIHdpdGggc21hcnQgZGV0ZWN0aW9uXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnQgLSBFbGVtZW50IHRvIGV4dHJhY3QgZnJvbVxuICAgKiBAcGFyYW0ge0NvcHlPcHRpb25zfSBvcHRpb25zIC0gQ29uZmlndXJhdGlvbiBvcHRpb25zXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuICBzdGF0aWMgZXh0cmFjdEZyb21FbGVtZW50KGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICBsZXQgdGV4dCA9ICcnO1xuXG4gICAgLy8gU3RyYXRlZ3kgMTogQ2hlY2sgZm9yIGRhdGEtY29weS10ZXh0IGF0dHJpYnV0ZVxuICAgIGlmIChlbGVtZW50Lmhhc0F0dHJpYnV0ZSgnZGF0YS1jb3B5LXRleHQnKSkge1xuICAgICAgdGV4dCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWNvcHktdGV4dCcpO1xuICAgIH1cbiAgICAvLyBTdHJhdGVneSAyOiBDaGVjayBmb3IgZGF0YS1jb3B5LXRhcmdldCAobGVnYWN5KSBvciBkYXRhLWNsaXBib2FyZC10YXJnZXQgKGN1cnJlbnQpIGF0dHJpYnV0ZVxuICAgIGVsc2UgaWYgKGVsZW1lbnQuaGFzQXR0cmlidXRlKCdkYXRhLWNvcHktdGFyZ2V0JykgfHwgZWxlbWVudC5oYXNBdHRyaWJ1dGUoJ2RhdGEtY2xpcGJvYXJkLXRhcmdldCcpKSB7XG4gICAgICBjb25zdCB0YXJnZXRTZWxlY3RvciA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWNvcHktdGFyZ2V0JykgfHwgZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY2xpcGJvYXJkLXRhcmdldCcpO1xuICAgICAgY29uc3QgdGFyZ2V0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0U2VsZWN0b3IpO1xuICAgICAgaWYgKHRhcmdldEVsZW1lbnQpIHtcbiAgICAgICAgdGV4dCA9IHRoaXMuZ2V0RWxlbWVudFRleHQodGFyZ2V0RWxlbWVudCk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIFN0cmF0ZWd5IDM6IEV4dHJhY3QgZnJvbSBlbGVtZW50IGl0c2VsZiBvciBmaW5kIGNvZGUgYmxvY2tcbiAgICBlbHNlIHtcbiAgICAgIHRleHQgPSB0aGlzLmdldEVsZW1lbnRUZXh0KGVsZW1lbnQpIHx8IHRoaXMuZmluZENvZGVCbG9jayhlbGVtZW50KTtcbiAgICB9XG5cbiAgICAvLyBDbGVhbiBhbmQgcHJlcHJvY2VzcyB0ZXh0XG4gICAgdGV4dCA9IHRoaXMuY2xlYW5UZXh0KHRleHQpO1xuICAgIFxuICAgIHJldHVybiBvcHRpb25zLnByZXByb2Nlc3NUZXh0ID8gb3B0aW9ucy5wcmVwcm9jZXNzVGV4dCh0ZXh0KSA6IHRleHQ7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGNsZWFuIHRleHQgY29udGVudCBmcm9tIGVsZW1lbnRcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudCAtIEVsZW1lbnQgdG8gZ2V0IHRleHQgZnJvbVxuICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgKi9cbiAgc3RhdGljIGdldEVsZW1lbnRUZXh0KGVsZW1lbnQpIHtcbiAgICBpZiAoIWVsZW1lbnQpIHJldHVybiAnJztcbiAgICBcbiAgICAvLyBGb3IgY29kZSBlbGVtZW50cywgcHJlc2VydmUgZm9ybWF0dGluZ1xuICAgIGlmIChlbGVtZW50LnRhZ05hbWUgPT09ICdDT0RFJyB8fCBlbGVtZW50LnRhZ05hbWUgPT09ICdQUkUnKSB7XG4gICAgICByZXR1cm4gZWxlbWVudC50ZXh0Q29udGVudCB8fCBlbGVtZW50LmlubmVyVGV4dCB8fCAnJztcbiAgICB9XG4gICAgXG4gICAgLy8gRm9yIG90aGVyIGVsZW1lbnRzLCBnZXQgY2xlYW4gdGV4dFxuICAgIHJldHVybiBlbGVtZW50LnRleHRDb250ZW50IHx8IGVsZW1lbnQuaW5uZXJUZXh0IHx8ICcnO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmQgYXNzb2NpYXRlZCBjb2RlIGJsb2NrIGZvciBjb3B5IGJ1dHRvbnNcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gYnV0dG9uIC0gQnV0dG9uIGVsZW1lbnRcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG4gIHN0YXRpYyBmaW5kQ29kZUJsb2NrKGJ1dHRvbikge1xuICAgIC8vIFN0cmF0ZWd5IDE6IExvb2sgaW4gcGFyZW50IGNvbnRhaW5lclxuICAgIGxldCBjb2RlRWxlbWVudCA9IGJ1dHRvbi5wYXJlbnRFbGVtZW50Py5xdWVyeVNlbGVjdG9yKCdjb2RlJyk7XG4gICAgaWYgKGNvZGVFbGVtZW50KSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRFbGVtZW50VGV4dChjb2RlRWxlbWVudCk7XG4gICAgfVxuXG4gICAgLy8gU3RyYXRlZ3kgMjogQ2hlY2sgcHJldmlvdXMgc2libGluZ3NcbiAgICBsZXQgc2libGluZyA9IGJ1dHRvbi5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuICAgIHdoaWxlIChzaWJsaW5nKSB7XG4gICAgICBjb2RlRWxlbWVudCA9IHNpYmxpbmcucXVlcnlTZWxlY3RvcignY29kZScpIHx8IChzaWJsaW5nLnRhZ05hbWUgPT09ICdDT0RFJyA/IHNpYmxpbmcgOiBudWxsKTtcbiAgICAgIGlmIChjb2RlRWxlbWVudCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRFbGVtZW50VGV4dChjb2RlRWxlbWVudCk7XG4gICAgICB9XG4gICAgICBzaWJsaW5nID0gc2libGluZy5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuICAgIH1cblxuICAgIC8vIFN0cmF0ZWd5IDM6IExvb2sgaW4gY2xvc2VzdCBwcmUgZWxlbWVudFxuICAgIGNvbnN0IHByZUVsZW1lbnQgPSBidXR0b24uY2xvc2VzdCgncHJlJykgfHwgYnV0dG9uLnBhcmVudEVsZW1lbnQ/LnF1ZXJ5U2VsZWN0b3IoJ3ByZScpO1xuICAgIGlmIChwcmVFbGVtZW50KSB7XG4gICAgICBjb2RlRWxlbWVudCA9IHByZUVsZW1lbnQucXVlcnlTZWxlY3RvcignY29kZScpO1xuICAgICAgaWYgKGNvZGVFbGVtZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEVsZW1lbnRUZXh0KGNvZGVFbGVtZW50KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYW4gdGV4dCBjb250ZW50IChyZW1vdmUgbGluZSBudW1iZXJzLCBwcm9tcHRzLCBldGMuKVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIFJhdyB0ZXh0XG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuICBzdGF0aWMgY2xlYW5UZXh0KHRleHQpIHtcbiAgICBpZiAoIXRleHQpIHJldHVybiAnJztcblxuICAgIHJldHVybiB0ZXh0XG4gICAgICAucmVwbGFjZSgvXlxcZCtcXHMrL2dtLCAnJykgIC8vIFJlbW92ZSBsaW5lIG51bWJlcnNcbiAgICAgIC5yZXBsYWNlKC9eXFwkXFxzKy9nbSwgJycpICAgLy8gUmVtb3ZlIHNoZWxsIHByb21wdHNcbiAgICAgIC5yZXBsYWNlKC9ePlxccysvZ20sICcnKSAgICAvLyBSZW1vdmUgcXVvdGUgbWFya2Vyc1xuICAgICAgLnJlcGxhY2UoL14jXFxzKy9nbSwgJycpICAgIC8vIFJlbW92ZSBjb21tZW50IG1hcmtlcnNcbiAgICAgIC50cmltKCk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHN1Y2Nlc3NmdWwgY29weSB3aXRoIHZpc3VhbCBhbmQgYXVkaW8gZmVlZGJhY2tcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSBUaGUgY29waWVkIHRleHRcbiAgICogQHBhcmFtIHtDb3B5T3B0aW9uc30gb3B0aW9ucyAtIENvbmZpZ3VyYXRpb24gb3B0aW9uc1xuICAgKi9cbiAgc3RhdGljIGFzeW5jIGhhbmRsZVN1Y2Nlc3ModGV4dCwgb3B0aW9ucykge1xuICAgIC8vIFZpc3VhbCBmZWVkYmFjayBvbiBidXR0b25cbiAgICBpZiAob3B0aW9ucy5idXR0b24pIHtcbiAgICAgIGF3YWl0IHRoaXMuc2hvd0J1dHRvblN1Y2Nlc3Mob3B0aW9ucy5idXR0b24sIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIC8vIFNjcmVlbiByZWFkZXIgYW5ub3VuY2VtZW50XG4gICAgaWYgKG9wdGlvbnMuYW5ub3VuY2UpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBvcHRpb25zLmFubm91bmNlTWVzc2FnZSB8fCBgJHt0aGlzLmRlZmF1bHRPcHRpb25zLmFubm91bmNlTWVzc2FnZX06ICR7dGV4dC5zdWJzdHJpbmcoMCwgNTApfSR7dGV4dC5sZW5ndGggPiA1MCA/ICcuLi4nIDogJyd9YDtcbiAgICAgIGFubm91bmNlVG9TY3JlZW5SZWFkZXIobWVzc2FnZSk7XG4gICAgfVxuXG4gICAgLy8gU2hvdyBub3RpZmljYXRpb24gaWYgYXZhaWxhYmxlXG4gICAgaWYgKHdpbmRvdy50b2FzdCkge1xuICAgICAgd2luZG93LnRvYXN0KG9wdGlvbnMuc3VjY2Vzc01lc3NhZ2UsICdzdWNjZXNzJywgb3B0aW9ucy5mZWVkYmFja0R1cmF0aW9uKTtcbiAgICB9XG5cbiAgICAvLyBBbmFseXRpY3MgdHJhY2tpbmdcbiAgICBpZiAob3B0aW9ucy5hbmFseXRpY3MpIHtcbiAgICAgIHRoaXMudHJhY2tDb3B5RXZlbnQoJ3N1Y2Nlc3MnLCB0ZXh0LCBvcHRpb25zLmFuYWx5dGljcyk7XG4gICAgfVxuXG4gICAgLy8gU3VjY2VzcyBjYWxsYmFja1xuICAgIGlmIChvcHRpb25zLm9uU3VjY2Vzcykge1xuICAgICAgb3B0aW9ucy5vblN1Y2Nlc3ModGV4dCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBjb3B5IGVycm9yIHdpdGggYXBwcm9wcmlhdGUgZmVlZGJhY2tcbiAgICogQHBhcmFtIHtFcnJvcn0gZXJyb3IgLSBUaGUgZXJyb3IgdGhhdCBvY2N1cnJlZFxuICAgKiBAcGFyYW0ge0NvcHlPcHRpb25zfSBvcHRpb25zIC0gQ29uZmlndXJhdGlvbiBvcHRpb25zXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgaGFuZGxlRXJyb3IoZXJyb3IsIG9wdGlvbnMpIHtcbiAgICBjb25zb2xlLmVycm9yKCdDb3B5IGZhaWxlZDonLCBlcnJvcik7XG5cbiAgICAvLyBWaXN1YWwgZmVlZGJhY2sgb24gYnV0dG9uXG4gICAgaWYgKG9wdGlvbnMuYnV0dG9uKSB7XG4gICAgICBhd2FpdCB0aGlzLnNob3dCdXR0b25FcnJvcihvcHRpb25zLmJ1dHRvbiwgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgLy8gU2NyZWVuIHJlYWRlciBhbm5vdW5jZW1lbnRcbiAgICBpZiAob3B0aW9ucy5hbm5vdW5jZSkge1xuICAgICAgYW5ub3VuY2VUb1NjcmVlblJlYWRlcignRmFpbGVkIHRvIGNvcHkgdG8gY2xpcGJvYXJkJyk7XG4gICAgfVxuXG4gICAgLy8gU2hvdyBlcnJvciBub3RpZmljYXRpb24gaWYgYXZhaWxhYmxlXG4gICAgaWYgKHdpbmRvdy50b2FzdCkge1xuICAgICAgd2luZG93LnRvYXN0KG9wdGlvbnMuZXJyb3JNZXNzYWdlLCAnZXJyb3InLCBvcHRpb25zLmZlZWRiYWNrRHVyYXRpb24pO1xuICAgIH1cblxuICAgIC8vIEFuYWx5dGljcyB0cmFja2luZ1xuICAgIGlmIChvcHRpb25zLmFuYWx5dGljcykge1xuICAgICAgdGhpcy50cmFja0NvcHlFdmVudCgnZXJyb3InLCAnJywgeyAuLi5vcHRpb25zLmFuYWx5dGljcywgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSk7XG4gICAgfVxuXG4gICAgLy8gRXJyb3IgY2FsbGJhY2tcbiAgICBpZiAob3B0aW9ucy5vbkVycm9yKSB7XG4gICAgICBvcHRpb25zLm9uRXJyb3IoZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93IHN1Y2Nlc3MgZmVlZGJhY2sgb24gYnV0dG9uXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGJ1dHRvbiAtIEJ1dHRvbiBlbGVtZW50XG4gICAqIEBwYXJhbSB7Q29weU9wdGlvbnN9IG9wdGlvbnMgLSBDb25maWd1cmF0aW9uIG9wdGlvbnNcbiAgICovXG4gIHN0YXRpYyBhc3luYyBzaG93QnV0dG9uU3VjY2VzcyhidXR0b24sIG9wdGlvbnMpIHtcbiAgICBjb25zdCBvcmlnaW5hbENvbnRlbnQgPSBidXR0b24uaW5uZXJIVE1MO1xuICAgIGNvbnN0IG9yaWdpbmFsQ2xhc3NlcyA9IGJ1dHRvbi5jbGFzc05hbWU7XG5cbiAgICAvLyBVcGRhdGUgYnV0dG9uIGFwcGVhcmFuY2VcbiAgICBidXR0b24udGV4dENvbnRlbnQgPSBvcHRpb25zLnN1Y2Nlc3NNZXNzYWdlO1xuICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdjb3B5LWJ1dHRvbi0tc3VjY2VzcycsICdiZy1ncmVlbi02MDAnKTtcbiAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnY29weS1idXR0b24tLWVycm9yJywgJ2JnLXJlZC02MDAnLCAnYmctemluYy02MDAnKTtcblxuICAgIC8vIFJlc2V0IGFmdGVyIGR1cmF0aW9uXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBidXR0b24uaW5uZXJIVE1MID0gb3JpZ2luYWxDb250ZW50O1xuICAgICAgYnV0dG9uLmNsYXNzTmFtZSA9IG9yaWdpbmFsQ2xhc3NlcztcbiAgICB9LCBvcHRpb25zLmZlZWRiYWNrRHVyYXRpb24pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNob3cgZXJyb3IgZmVlZGJhY2sgb24gYnV0dG9uXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGJ1dHRvbiAtIEJ1dHRvbiBlbGVtZW50XG4gICAqIEBwYXJhbSB7Q29weU9wdGlvbnN9IG9wdGlvbnMgLSBDb25maWd1cmF0aW9uIG9wdGlvbnNcbiAgICovXG4gIHN0YXRpYyBhc3luYyBzaG93QnV0dG9uRXJyb3IoYnV0dG9uLCBvcHRpb25zKSB7XG4gICAgY29uc3Qgb3JpZ2luYWxDb250ZW50ID0gYnV0dG9uLmlubmVySFRNTDtcbiAgICBjb25zdCBvcmlnaW5hbENsYXNzZXMgPSBidXR0b24uY2xhc3NOYW1lO1xuXG4gICAgLy8gVXBkYXRlIGJ1dHRvbiBhcHBlYXJhbmNlXG4gICAgYnV0dG9uLnRleHRDb250ZW50ID0gb3B0aW9ucy5lcnJvck1lc3NhZ2U7XG4gICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2NvcHktYnV0dG9uLS1lcnJvcicsICdiZy1yZWQtNjAwJyk7XG4gICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2NvcHktYnV0dG9uLS1zdWNjZXNzJywgJ2JnLWdyZWVuLTYwMCcsICdiZy16aW5jLTYwMCcpO1xuXG4gICAgLy8gUmVzZXQgYWZ0ZXIgZHVyYXRpb25cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGJ1dHRvbi5pbm5lckhUTUwgPSBvcmlnaW5hbENvbnRlbnQ7XG4gICAgICBidXR0b24uY2xhc3NOYW1lID0gb3JpZ2luYWxDbGFzc2VzO1xuICAgIH0sIG9wdGlvbnMuZmVlZGJhY2tEdXJhdGlvbik7XG4gIH1cblxuICAvKipcbiAgICogVHJhY2sgY29weSBldmVudHMgZm9yIGFuYWx5dGljc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gc3RhdHVzIC0gJ3N1Y2Nlc3MnIG9yICdlcnJvcidcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSBDb3BpZWQgdGV4dFxuICAgKiBAcGFyYW0ge09iamVjdH0gYW5hbHl0aWNzIC0gQW5hbHl0aWNzIGRhdGFcbiAgICovXG4gIHN0YXRpYyB0cmFja0NvcHlFdmVudChzdGF0dXMsIHRleHQsIGFuYWx5dGljcykge1xuICAgIGNvbnN0IGV2ZW50ID0ge1xuICAgICAgdHlwZTogJ2NvcHknLFxuICAgICAgc3RhdHVzLFxuICAgICAgdGV4dExlbmd0aDogdGV4dC5sZW5ndGgsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIC4uLmFuYWx5dGljc1xuICAgIH07XG5cbiAgICAvLyBFbWl0IGZvciBjb21wb25lbnQgdHJhY2tpbmdcbiAgICBpZiAod2luZG93LmV2ZW50QnVzKSB7XG4gICAgICB3aW5kb3cuZXZlbnRCdXMuZW1pdCgnY29weTp0cmFja2VkJywgZXZlbnQpO1xuICAgIH1cblxuICAgIC8vIENvbnNvbGUgbG9nZ2luZyBmb3IgZGVidWdcbiAgICBpZiAod2luZG93Lk1pbG9EZWJ1Zykge1xuICAgICAgY29uc29sZS5sb2coYFx1RDgzRFx1RENDQiBDb3B5ICR7c3RhdHVzfTpgLCBldmVudCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENvcHkgZnJvbSBjb2RlIGJsb2NrcyB3aXRoIGVuaGFuY2VkIGRldGVjdGlvblxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBidXR0b24gLSBDb3B5IGJ1dHRvblxuICAgKiBAcGFyYW0ge0NvcHlPcHRpb25zfSBvcHRpb25zIC0gQ29uZmlndXJhdGlvbiBvcHRpb25zXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPENvcHlSZXN1bHQ+fVxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGNvcHlDb2RlKGJ1dHRvbiwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgY29kZU9wdGlvbnMgPSB7XG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgcHJlcHJvY2Vzc1RleHQ6ICh0ZXh0KSA9PiB0aGlzLmNsZWFuQ29kZVRleHQodGV4dCksXG4gICAgICBhbmFseXRpY3M6IHtcbiAgICAgICAgdHlwZTogJ2NvZGUnLFxuICAgICAgICBsYW5ndWFnZTogdGhpcy5kZXRlY3RMYW5ndWFnZShidXR0b24pLFxuICAgICAgICAuLi5vcHRpb25zLmFuYWx5dGljc1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gdGhpcy5jb3B5KGJ1dHRvbiwgY29kZU9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEVuaGFuY2VkIGNvZGUgdGV4dCBjbGVhbmluZ1xuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIFJhdyBjb2RlIHRleHRcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG4gIHN0YXRpYyBjbGVhbkNvZGVUZXh0KHRleHQpIHtcbiAgICByZXR1cm4gdGhpcy5jbGVhblRleHQodGV4dClcbiAgICAgIC5yZXBsYWNlKC9eXFwvXFwvLiokL2dtLCAnJykgICAgIC8vIFJlbW92ZSBjb21tZW50IGxpbmVzIChvcHRpb25hbClcbiAgICAgIC5yZXBsYWNlKC9eXFxzKltcXHJcXG5dL2dtLCAnJykgICAvLyBSZW1vdmUgZW1wdHkgbGluZXNcbiAgICAgIC50cmltKCk7XG4gIH1cblxuICAvKipcbiAgICogRGV0ZWN0IHByb2dyYW1taW5nIGxhbmd1YWdlIGZyb20gY29udGV4dFxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50IC0gRWxlbWVudCBjb250ZXh0XG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuICBzdGF0aWMgZGV0ZWN0TGFuZ3VhZ2UoZWxlbWVudCkge1xuICAgIC8vIExvb2sgZm9yIGxhbmd1YWdlIGNsYXNzIGluIGNvZGUgYmxvY2tcbiAgICBjb25zdCBjb2RlQmxvY2sgPSBlbGVtZW50LmNsb3Nlc3QoJ3ByZScpPy5xdWVyeVNlbGVjdG9yKCdjb2RlJykgfHwgXG4gICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnBhcmVudEVsZW1lbnQ/LnF1ZXJ5U2VsZWN0b3IoJ2NvZGUnKTtcbiAgICBcbiAgICBpZiAoY29kZUJsb2NrKSB7XG4gICAgICBjb25zdCBjbGFzc05hbWUgPSBjb2RlQmxvY2suY2xhc3NOYW1lO1xuICAgICAgY29uc3QgbGFuZ01hdGNoID0gY2xhc3NOYW1lLm1hdGNoKC9sYW5ndWFnZS0oXFx3KykvKTtcbiAgICAgIGlmIChsYW5nTWF0Y2gpIHtcbiAgICAgICAgcmV0dXJuIGxhbmdNYXRjaFsxXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gJ3Vua25vd24nO1xuICB9XG5cbiAgLyoqXG4gICAqIEJ1bGsgY29weSBzZXR1cCBmb3IgbXVsdGlwbGUgZWxlbWVudHNcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNlbGVjdG9yIC0gQ1NTIHNlbGVjdG9yIGZvciBjb3B5IGJ1dHRvbnNcbiAgICogQHBhcmFtIHtDb3B5T3B0aW9uc30gb3B0aW9ucyAtIERlZmF1bHQgb3B0aW9ucyBmb3IgYWxsIGJ1dHRvbnNcbiAgICovXG4gIHN0YXRpYyBzZXR1cENvcHlCdXR0b25zKHNlbGVjdG9yID0gJ1tkYXRhLWNvcHldLCAuY29weS1idG4sIC5jb3B5LWNvZGUnLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBidXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG4gICAgXG4gICAgYnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgICAvLyBTa2lwIGlmIGFscmVhZHkgc2V0dXBcbiAgICAgIGlmIChidXR0b24uaGFzQXR0cmlidXRlKCdkYXRhLWNvcHktbWFuYWdlcicpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgYnV0dG9uLnNldEF0dHJpYnV0ZSgnZGF0YS1jb3B5LW1hbmFnZXInLCAndHJ1ZScpO1xuICAgICAgXG4gICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBidXR0b25PcHRpb25zID0ge1xuICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgYnV0dG9uLFxuICAgICAgICAgIC8vIEV4dHJhY3QgYnV0dG9uLXNwZWNpZmljIG9wdGlvbnMgZnJvbSBkYXRhIGF0dHJpYnV0ZXNcbiAgICAgICAgICBzdWNjZXNzTWVzc2FnZTogYnV0dG9uLmdldEF0dHJpYnV0ZSgnZGF0YS1zdWNjZXNzLW1lc3NhZ2UnKSB8fCBvcHRpb25zLnN1Y2Nlc3NNZXNzYWdlLFxuICAgICAgICAgIGVycm9yTWVzc2FnZTogYnV0dG9uLmdldEF0dHJpYnV0ZSgnZGF0YS1lcnJvci1tZXNzYWdlJykgfHwgb3B0aW9ucy5lcnJvck1lc3NhZ2UsXG4gICAgICAgICAgYW5ub3VuY2VNZXNzYWdlOiBidXR0b24uZ2V0QXR0cmlidXRlKCdkYXRhLWFubm91bmNlLW1lc3NhZ2UnKSB8fCBvcHRpb25zLmFubm91bmNlTWVzc2FnZVxuICAgICAgICB9O1xuXG4gICAgICAgIGF3YWl0IHRoaXMuY29weUNvZGUoYnV0dG9uLCBidXR0b25PcHRpb25zKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgY29uc29sZS5sb2coYFx1RDgzRFx1RENDQiBDb3B5TWFuYWdlcjogU2V0dXAgJHtidXR0b25zLmxlbmd0aH0gY29weSBidXR0b25zYCk7XG4gICAgcmV0dXJuIGJ1dHRvbnMubGVuZ3RoO1xuICB9XG59XG5cblxuZXhwb3J0IGNvbnN0IGNvcHlUZXh0ID0gKHRleHQsIG9wdGlvbnMpID0+IENvcHlNYW5hZ2VyLmNvcHkodGV4dCwgb3B0aW9ucyk7XG5leHBvcnQgY29uc3QgY29weUZyb21FbGVtZW50ID0gKGVsZW1lbnQsIG9wdGlvbnMpID0+IENvcHlNYW5hZ2VyLmNvcHkoZWxlbWVudCwgb3B0aW9ucyk7XG5leHBvcnQgY29uc3Qgc2V0dXBDb3B5QnV0dG9ucyA9IChzZWxlY3Rvciwgb3B0aW9ucykgPT4gQ29weU1hbmFnZXIuc2V0dXBDb3B5QnV0dG9ucyhzZWxlY3Rvciwgb3B0aW9ucyk7IiwgIi8qKlxuICogTG9hZGluZ1N0YXRlTWFuYWdlciAtIFVuaWZpZWQgbG9hZGluZyBzdGF0ZXMgYW5kIHNrZWxldG9uIHNjcmVlbnNcbiAqIFByb3ZpZGVzIGNvbnNpc3RlbnQgbG9hZGluZyBpbmRpY2F0b3JzIHdpdGggYWNjZXNzaWJpbGl0eSBzdXBwb3J0XG4gKi9cblxuaW1wb3J0IHsgbW90aW9uIH0gZnJvbSAnLi9hY2Nlc3NpYmlsaXR5LmpzJztcbmltcG9ydCB7IGFuaW1hdGlvbkJyaWRnZSB9IGZyb20gJy4uL2NvcmUvQW5pbWF0aW9uQnJpZGdlLmpzJztcbmltcG9ydCB7IHNhbml0aXplSFRNTCB9IGZyb20gJy4vc2FuaXRpemUuanMnO1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IExvYWRpbmdPcHRpb25zXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3R5cGVdIC0gVHlwZSBvZiBsb2FkaW5nIGluZGljYXRvciAoJ3NwaW5uZXInLCAnc2tlbGV0b24nLCAncHJvZ3Jlc3MnLCAnZG90cycpXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW21lc3NhZ2VdIC0gTG9hZGluZyBtZXNzYWdlXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3NpemVdIC0gU2l6ZSAoJ3NtYWxsJywgJ21lZGl1bScsICdsYXJnZScpXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3ZhcmlhbnRdIC0gU3R5bGUgdmFyaWFudCAoJ3ByaW1hcnknLCAnc2Vjb25kYXJ5JywgJ21pbmltYWwnKVxuICogQHByb3BlcnR5IHtib29sZWFufSBbb3ZlcmxheV0gLSBXaGV0aGVyIHRvIHNob3cgYXMgb3ZlcmxheVxuICogQHByb3BlcnR5IHtib29sZWFufSBbYmxvY2tpbmddIC0gV2hldGhlciB0byBibG9jayB1c2VyIGludGVyYWN0aW9uXG4gKiBAcHJvcGVydHkge09iamVjdH0gW3NrZWxldG9uXSAtIFNrZWxldG9uIGNvbmZpZ3VyYXRpb25cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcHJvZ3Jlc3NdIC0gUHJvZ3Jlc3MgcGVyY2VudGFnZSAoMC0xMDApXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFthbmltYXRlXSAtIFdoZXRoZXIgdG8gYW5pbWF0ZSAocmVzcGVjdHMgbW90aW9uIHByZWZlcmVuY2VzKVxuICogQHByb3BlcnR5IHtzdHJpbmd9IFthcmlhTGFiZWxdIC0gQ3VzdG9tIGFyaWEtbGFiZWxcbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFNrZWxldG9uQ29uZmlnXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2xpbmVzXSAtIE51bWJlciBvZiBza2VsZXRvbiBsaW5lc1xuICogQHByb3BlcnR5IHtzdHJpbmdbXX0gW3dpZHRoc10gLSBXaWR0aCBwZXJjZW50YWdlcyBmb3IgZWFjaCBsaW5lXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFthdmF0YXJdIC0gSW5jbHVkZSBhdmF0YXIgcGxhY2Vob2xkZXJcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3RpdGxlXSAtIEluY2x1ZGUgdGl0bGUgcGxhY2Vob2xkZXJcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3BhcmFncmFwaF0gLSBJbmNsdWRlIHBhcmFncmFwaCBwbGFjZWhvbGRlclxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt0ZW1wbGF0ZV0gLSBQcmVkZWZpbmVkIHRlbXBsYXRlICgnYXJ0aWNsZScsICdjYXJkJywgJ2xpc3QnKVxuICovXG5cbmV4cG9ydCBjbGFzcyBMb2FkaW5nU3RhdGVNYW5hZ2VyIHtcbiAgc3RhdGljIGFjdGl2ZUxvYWRlcnMgPSBuZXcgTWFwKCk7XG4gIHN0YXRpYyBsb2FkZXJJZCA9IDA7XG5cbiAgLyoqXG4gICAqIFNob3cgbG9hZGluZyBzdGF0ZSBpbiBjb250YWluZXJcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudHxzdHJpbmd9IGNvbnRhaW5lciAtIENvbnRhaW5lciBlbGVtZW50IG9yIHNlbGVjdG9yXG4gICAqIEBwYXJhbSB7TG9hZGluZ09wdGlvbnN9IG9wdGlvbnMgLSBMb2FkaW5nIGNvbmZpZ3VyYXRpb25cbiAgICogQHJldHVybnMge3N0cmluZ30gLSBVbmlxdWUgbG9hZGVyIElEIGZvciBsYXRlciByZW1vdmFsXG4gICAqL1xuICBzdGF0aWMgc2hvdyhjb250YWluZXIsIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGVsZW1lbnQgPSB0eXBlb2YgY29udGFpbmVyID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyKSA6IGNvbnRhaW5lcjtcbiAgICBcbiAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgIGNvbnNvbGUud2FybignTG9hZGluZ1N0YXRlTWFuYWdlcjogQ29udGFpbmVyIG5vdCBmb3VuZCcpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgY29uZmlnID0ge1xuICAgICAgdHlwZTogJ3NwaW5uZXInLFxuICAgICAgbWVzc2FnZTogJ0xvYWRpbmcuLi4nLFxuICAgICAgc2l6ZTogJ21lZGl1bScsXG4gICAgICB2YXJpYW50OiAncHJpbWFyeScsXG4gICAgICBvdmVybGF5OiBmYWxzZSxcbiAgICAgIGJsb2NraW5nOiBmYWxzZSxcbiAgICAgIGFuaW1hdGU6ICFtb3Rpb24ucHJlZmVyc1JlZHVjZWQoKSxcbiAgICAgIGFyaWFMYWJlbDogJ0xvYWRpbmcgY29udGVudCcsXG4gICAgICAuLi5vcHRpb25zXG4gICAgfTtcblxuICAgIGNvbnN0IGxvYWRlcklkID0gYGxvYWRlci0keysrdGhpcy5sb2FkZXJJZH1gO1xuICAgIGNvbnN0IGxvYWRlckVsZW1lbnQgPSB0aGlzLmNyZWF0ZUxvYWRlcihjb25maWcsIGxvYWRlcklkKTtcbiAgICBcbiAgICAvLyBTdG9yZSBvcmlnaW5hbCBjb250ZW50IGZvciByZXN0b3JhdGlvblxuICAgIGNvbnN0IG9yaWdpbmFsQ29udGVudCA9IGVsZW1lbnQuaW5uZXJIVE1MO1xuICAgIGNvbnN0IG9yaWdpbmFsQXJpYUF0dHJpYnV0ZXMgPSB0aGlzLmdldEFyaWFBdHRyaWJ1dGVzKGVsZW1lbnQpO1xuICAgIFxuICAgIC8vIEFwcGx5IGxvYWRpbmcgc3RhdGVcbiAgICBpZiAoY29uZmlnLm92ZXJsYXkpIHtcbiAgICAgIHRoaXMuc2hvd0FzT3ZlcmxheShlbGVtZW50LCBsb2FkZXJFbGVtZW50LCBjb25maWcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbGVtZW50LmlubmVySFRNTCA9ICcnO1xuICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChsb2FkZXJFbGVtZW50KTtcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgYWNjZXNzaWJpbGl0eSBhdHRyaWJ1dGVzXG4gICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtYnVzeScsICd0cnVlJyk7XG4gICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGl2ZScsICdwb2xpdGUnKTtcbiAgICBpZiAoY29uZmlnLmFyaWFMYWJlbCkge1xuICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBjb25maWcuYXJpYUxhYmVsKTtcbiAgICB9XG5cbiAgICAvLyBTdG9yZSBsb2FkZXIgc3RhdGVcbiAgICB0aGlzLmFjdGl2ZUxvYWRlcnMuc2V0KGxvYWRlcklkLCB7XG4gICAgICBlbGVtZW50LFxuICAgICAgbG9hZGVyRWxlbWVudCxcbiAgICAgIG9yaWdpbmFsQ29udGVudCxcbiAgICAgIG9yaWdpbmFsQXJpYUF0dHJpYnV0ZXMsXG4gICAgICBjb25maWdcbiAgICB9KTtcblxuICAgIC8vIFRyYWNrIGxvYWRpbmcgZm9yIGFuYWx5dGljc1xuICAgIHRoaXMudHJhY2tMb2FkaW5nRXZlbnQoJ3Nob3cnLCBjb25maWcpO1xuXG4gICAgcmV0dXJuIGxvYWRlcklkO1xuICB9XG5cbiAgLyoqXG4gICAqIEhpZGUgbG9hZGluZyBzdGF0ZSBhbmQgcmVzdG9yZSBjb250ZW50XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBsb2FkZXJJZCAtIExvYWRlciBJRCByZXR1cm5lZCBmcm9tIHNob3coKVxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBbbmV3Q29udGVudF0gLSBPcHRpb25hbCBuZXcgY29udGVudCB0byByZXBsYWNlIHdpdGhcbiAgICovXG4gIHN0YXRpYyBoaWRlKGxvYWRlcklkLCBuZXdDb250ZW50ID0gbnVsbCkge1xuICAgIGNvbnN0IGxvYWRlciA9IHRoaXMuYWN0aXZlTG9hZGVycy5nZXQobG9hZGVySWQpO1xuICAgIGlmICghbG9hZGVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgeyBlbGVtZW50LCBvcmlnaW5hbENvbnRlbnQsIG9yaWdpbmFsQXJpYUF0dHJpYnV0ZXMsIGNvbmZpZyB9ID0gbG9hZGVyO1xuXG4gICAgLy8gUmVzdG9yZSBjb250ZW50IHdpdGggb3B0aW9uYWwgYW5pbWF0aW9uXG4gICAgaWYgKGNvbmZpZy5hbmltYXRlICYmICFtb3Rpb24ucHJlZmVyc1JlZHVjZWQoKSkge1xuICAgICAgdGhpcy5hbmltYXRlQ29udGVudFJlc3RvcmUoZWxlbWVudCwgb3JpZ2luYWxDb250ZW50LCBuZXdDb250ZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKG5ld0NvbnRlbnQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gc2FuaXRpemVIVE1MKG5ld0NvbnRlbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChuZXdDb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSBvcmlnaW5hbENvbnRlbnQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmVzdG9yZSBhY2Nlc3NpYmlsaXR5IGF0dHJpYnV0ZXNcbiAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1idXN5Jyk7XG4gICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtbGl2ZScpO1xuICAgIHRoaXMucmVzdG9yZUFyaWFBdHRyaWJ1dGVzKGVsZW1lbnQsIG9yaWdpbmFsQXJpYUF0dHJpYnV0ZXMpO1xuXG4gICAgLy8gQ2xlYW4gdXBcbiAgICB0aGlzLmFjdGl2ZUxvYWRlcnMuZGVsZXRlKGxvYWRlcklkKTtcbiAgICB0aGlzLnRyYWNrTG9hZGluZ0V2ZW50KCdoaWRlJywgY29uZmlnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgbG9hZGluZyBwcm9ncmVzcyBmb3IgcHJvZ3Jlc3MtdHlwZSBsb2FkZXJzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBsb2FkZXJJZCAtIExvYWRlciBJRFxuICAgKiBAcGFyYW0ge251bWJlcn0gcHJvZ3Jlc3MgLSBQcm9ncmVzcyBwZXJjZW50YWdlICgwLTEwMClcbiAgICogQHBhcmFtIHtzdHJpbmd9IFttZXNzYWdlXSAtIE9wdGlvbmFsIG1lc3NhZ2UgdXBkYXRlXG4gICAqL1xuICBzdGF0aWMgdXBkYXRlUHJvZ3Jlc3MobG9hZGVySWQsIHByb2dyZXNzLCBtZXNzYWdlID0gbnVsbCkge1xuICAgIGNvbnN0IGxvYWRlciA9IHRoaXMuYWN0aXZlTG9hZGVycy5nZXQobG9hZGVySWQpO1xuICAgIGlmICghbG9hZGVyIHx8IGxvYWRlci5jb25maWcudHlwZSAhPT0gJ3Byb2dyZXNzJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHByb2dyZXNzQmFyID0gbG9hZGVyLmxvYWRlckVsZW1lbnQucXVlcnlTZWxlY3RvcignLmxvYWRpbmctcHJvZ3Jlc3MtYmFyJyk7XG4gICAgY29uc3QgcHJvZ3Jlc3NUZXh0ID0gbG9hZGVyLmxvYWRlckVsZW1lbnQucXVlcnlTZWxlY3RvcignLmxvYWRpbmctcHJvZ3Jlc3MtdGV4dCcpO1xuICAgIGNvbnN0IG1lc3NhZ2VFbGVtZW50ID0gbG9hZGVyLmxvYWRlckVsZW1lbnQucXVlcnlTZWxlY3RvcignLmxvYWRpbmctbWVzc2FnZScpO1xuXG4gICAgaWYgKHByb2dyZXNzQmFyKSB7XG4gICAgICBwcm9ncmVzc0Jhci5zdHlsZS53aWR0aCA9IGAke01hdGgubWF4KDAsIE1hdGgubWluKDEwMCwgcHJvZ3Jlc3MpKX0lYDtcbiAgICAgIHByb2dyZXNzQmFyLnNldEF0dHJpYnV0ZSgnYXJpYS12YWx1ZW5vdycsIHByb2dyZXNzKTtcbiAgICB9XG5cbiAgICBpZiAocHJvZ3Jlc3NUZXh0KSB7XG4gICAgICBwcm9ncmVzc1RleHQudGV4dENvbnRlbnQgPSBgJHtNYXRoLnJvdW5kKHByb2dyZXNzKX0lYDtcbiAgICB9XG5cbiAgICBpZiAobWVzc2FnZSAmJiBtZXNzYWdlRWxlbWVudCkge1xuICAgICAgbWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBtZXNzYWdlO1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBsb2FkZXIgc3RhdGVcbiAgICBsb2FkZXIuY29uZmlnLnByb2dyZXNzID0gcHJvZ3Jlc3M7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGxvYWRlciBlbGVtZW50IGJhc2VkIG9uIGNvbmZpZ3VyYXRpb25cbiAgICogQHBhcmFtIHtMb2FkaW5nT3B0aW9uc30gY29uZmlnIC0gTG9hZGluZyBjb25maWd1cmF0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBsb2FkZXJJZCAtIFVuaXF1ZSBsb2FkZXIgSURcbiAgICogQHJldHVybnMge0hUTUxFbGVtZW50fVxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZUxvYWRlcihjb25maWcsIGxvYWRlcklkKSB7XG4gICAgY29uc3Qgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHdyYXBwZXIuY2xhc3NOYW1lID0gYGxvYWRpbmctc3RhdGUgbG9hZGluZy1zdGF0ZS0tJHtjb25maWcudHlwZX0gbG9hZGluZy1zdGF0ZS0tJHtjb25maWcuc2l6ZX1gO1xuICAgIHdyYXBwZXIuc2V0QXR0cmlidXRlKCdkYXRhLWxvYWRlci1pZCcsIGxvYWRlcklkKTtcbiAgICB3cmFwcGVyLnNldEF0dHJpYnV0ZSgncm9sZScsICdzdGF0dXMnKTtcbiAgICB3cmFwcGVyLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGNvbmZpZy5hcmlhTGFiZWwpO1xuXG4gICAgc3dpdGNoIChjb25maWcudHlwZSkge1xuICAgICAgY2FzZSAnc3Bpbm5lcic6XG4gICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVTcGlubmVyKGNvbmZpZykpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3NrZWxldG9uJzpcbiAgICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVNrZWxldG9uKGNvbmZpZykpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3Byb2dyZXNzJzpcbiAgICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVByb2dyZXNzKGNvbmZpZykpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2RvdHMnOlxuICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlRG90cyhjb25maWcpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlU3Bpbm5lcihjb25maWcpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gd3JhcHBlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgc3Bpbm5lciBsb2FkaW5nIGluZGljYXRvclxuICAgKiBAcGFyYW0ge0xvYWRpbmdPcHRpb25zfSBjb25maWcgLSBDb25maWd1cmF0aW9uXG4gICAqIEByZXR1cm5zIHtIVE1MRWxlbWVudH1cbiAgICovXG4gIHN0YXRpYyBjcmVhdGVTcGlubmVyKGNvbmZpZykge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnRhaW5lci5jbGFzc05hbWUgPSBgbG9hZGluZy1zcGlubmVyIGxvYWRpbmctc3Bpbm5lci0tJHtjb25maWcudmFyaWFudH1gO1xuXG4gICAgY29uc3Qgc2l6ZXMgPSB7XG4gICAgICBzbWFsbDogJzFyZW0nLFxuICAgICAgbWVkaXVtOiAnMnJlbScsXG4gICAgICBsYXJnZTogJzNyZW0nXG4gICAgfTtcblxuICAgIGNvbnN0IHNwaW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBzcGlubmVyLmNsYXNzTmFtZSA9ICdsb2FkaW5nLXNwaW5uZXJfX2NpcmNsZSc7XG4gICAgc3Bpbm5lci5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgd2lkdGg6ICR7c2l6ZXNbY29uZmlnLnNpemVdfTtcbiAgICAgIGhlaWdodDogJHtzaXplc1tjb25maWcuc2l6ZV19O1xuICAgICAgYm9yZGVyOiAycHggc29saWQgdmFyKC0tY29sb3ItYm9yZGVyLWxpZ2h0LCAjZTVlN2ViKTtcbiAgICAgIGJvcmRlci10b3A6IDJweCBzb2xpZCB2YXIoLS1jb2xvci1icmFuZCwgIzNiODJmNik7XG4gICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICAke2NvbmZpZy5hbmltYXRlID8gJ2FuaW1hdGlvbjogbG9hZGluZy1zcGluIDFzIGxpbmVhciBpbmZpbml0ZTsnIDogJyd9XG4gICAgYDtcblxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChzcGlubmVyKTtcblxuICAgIGlmIChjb25maWcubWVzc2FnZSkge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgbWVzc2FnZS5jbGFzc05hbWUgPSAnbG9hZGluZy1tZXNzYWdlJztcbiAgICAgIG1lc3NhZ2UudGV4dENvbnRlbnQgPSBjb25maWcubWVzc2FnZTtcbiAgICAgIG1lc3NhZ2Uuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgICAgbWFyZ2luLXRvcDogMC43NXJlbTtcbiAgICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTtcbiAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLXRleHQtc2Vjb25kYXJ5LCAjNmI3MjgwKTtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgYDtcbiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChtZXNzYWdlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY29udGFpbmVyO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBza2VsZXRvbiBsb2FkaW5nIHNjcmVlblxuICAgKiBAcGFyYW0ge0xvYWRpbmdPcHRpb25zfSBjb25maWcgLSBDb25maWd1cmF0aW9uXG4gICAqIEByZXR1cm5zIHtIVE1MRWxlbWVudH1cbiAgICovXG4gIHN0YXRpYyBjcmVhdGVTa2VsZXRvbihjb25maWcpIHtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb250YWluZXIuY2xhc3NOYW1lID0gJ2xvYWRpbmctc2tlbGV0b24nO1xuICAgIGNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAnTG9hZGluZyBjb250ZW50IHN0cnVjdHVyZScpO1xuXG4gICAgY29uc3Qgc2tlbGV0b24gPSBjb25maWcuc2tlbGV0b24gfHwge307XG4gICAgXG4gICAgLy8gVXNlIHByZWRlZmluZWQgdGVtcGxhdGUgaWYgc3BlY2lmaWVkXG4gICAgaWYgKHNrZWxldG9uLnRlbXBsYXRlKSB7XG4gICAgICByZXR1cm4gdGhpcy5jcmVhdGVTa2VsZXRvblRlbXBsYXRlKHNrZWxldG9uLnRlbXBsYXRlLCBjb25maWcpO1xuICAgIH1cblxuICAgIC8vIEF2YXRhclxuICAgIGlmIChza2VsZXRvbi5hdmF0YXIpIHtcbiAgICAgIGNvbnN0IGF2YXRhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgYXZhdGFyLmNsYXNzTmFtZSA9ICdza2VsZXRvbi1hdmF0YXInO1xuICAgICAgYXZhdGFyLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICAgIHdpZHRoOiAzcmVtO1xuICAgICAgICBoZWlnaHQ6IDNyZW07XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tc2tlbGV0b24tY29sb3IsICNlNWU3ZWIpO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxcmVtO1xuICAgICAgICAke2NvbmZpZy5hbmltYXRlID8gJ2FuaW1hdGlvbjogc2tlbGV0b24tcHVsc2UgMnMgY3ViaWMtYmV6aWVyKDAuNCwgMCwgMC42LCAxKSBpbmZpbml0ZTsnIDogJyd9XG4gICAgICBgO1xuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGF2YXRhcik7XG4gICAgfVxuXG4gICAgLy8gVGl0bGVcbiAgICBpZiAoc2tlbGV0b24udGl0bGUpIHtcbiAgICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICB0aXRsZS5jbGFzc05hbWUgPSAnc2tlbGV0b24tdGl0bGUnO1xuICAgICAgdGl0bGUuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgICAgaGVpZ2h0OiAxLjVyZW07XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLXNrZWxldG9uLWNvbG9yLCAjZTVlN2ViKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMC4yNXJlbTtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMC43NXJlbTtcbiAgICAgICAgd2lkdGg6IDc1JTtcbiAgICAgICAgJHtjb25maWcuYW5pbWF0ZSA/ICdhbmltYXRpb246IHNrZWxldG9uLXB1bHNlIDJzIGN1YmljLWJlemllcigwLjQsIDAsIDAuNiwgMSkgaW5maW5pdGU7JyA6ICcnfVxuICAgICAgYDtcbiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aXRsZSk7XG4gICAgfVxuXG4gICAgLy8gUGFyYWdyYXBoIGxpbmVzXG4gICAgY29uc3QgbGluZXMgPSBza2VsZXRvbi5saW5lcyB8fCAzO1xuICAgIGNvbnN0IHdpZHRocyA9IHNrZWxldG9uLndpZHRocyB8fCBbJzEwMCUnLCAnODUlJywgJzYwJSddO1xuICAgIFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXM7IGkrKykge1xuICAgICAgY29uc3QgbGluZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgbGluZS5jbGFzc05hbWUgPSAnc2tlbGV0b24tbGluZSc7XG4gICAgICBsaW5lLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICAgIGhlaWdodDogMXJlbTtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tc2tlbGV0b24tY29sb3IsICNlNWU3ZWIpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiAwLjI1cmVtO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAwLjVyZW07XG4gICAgICAgIHdpZHRoOiAke3dpZHRoc1tpXSB8fCAnOTAlJ307XG4gICAgICAgICR7Y29uZmlnLmFuaW1hdGUgPyBgYW5pbWF0aW9uOiBza2VsZXRvbi1wdWxzZSAycyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjYsIDEpIGluZmluaXRlO2AgOiAnJ31cbiAgICAgICAgYW5pbWF0aW9uLWRlbGF5OiAke2kgKiAwLjF9cztcbiAgICAgIGA7XG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobGluZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgcHJlZGVmaW5lZCBza2VsZXRvbiB0ZW1wbGF0ZXNcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRlbXBsYXRlIC0gVGVtcGxhdGUgbmFtZVxuICAgKiBAcGFyYW0ge0xvYWRpbmdPcHRpb25zfSBjb25maWcgLSBDb25maWd1cmF0aW9uXG4gICAqIEByZXR1cm5zIHtIVE1MRWxlbWVudH1cbiAgICovXG4gIHN0YXRpYyBjcmVhdGVTa2VsZXRvblRlbXBsYXRlKHRlbXBsYXRlLCBjb25maWcpIHtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb250YWluZXIuY2xhc3NOYW1lID0gYGxvYWRpbmctc2tlbGV0b24gbG9hZGluZy1za2VsZXRvbi0tJHt0ZW1wbGF0ZX1gO1xuXG4gICAgc3dpdGNoICh0ZW1wbGF0ZSkge1xuICAgICAgY2FzZSAnYXJ0aWNsZSc6XG4gICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInNrZWxldG9uLXRpdGxlIHNrZWxldG9uLWVsZW1lbnRcIj48L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwic2tlbGV0b24tbWV0YSBza2VsZXRvbi1lbGVtZW50XCI+PC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInNrZWxldG9uLWxpbmUgc2tlbGV0b24tZWxlbWVudFwiIHN0eWxlPVwid2lkdGg6IDEwMCVcIj48L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwic2tlbGV0b24tbGluZSBza2VsZXRvbi1lbGVtZW50XCIgc3R5bGU9XCJ3aWR0aDogODUlXCI+PC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInNrZWxldG9uLWxpbmUgc2tlbGV0b24tZWxlbWVudFwiIHN0eWxlPVwid2lkdGg6IDYwJVwiPjwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJza2VsZXRvbi1oZWFkaW5nIHNrZWxldG9uLWVsZW1lbnRcIiBzdHlsZT1cIndpZHRoOiA0MCU7IG1hcmdpbi10b3A6IDEuNXJlbTtcIj48L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwic2tlbGV0b24tbGluZSBza2VsZXRvbi1lbGVtZW50XCIgc3R5bGU9XCJ3aWR0aDogOTAlXCI+PC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInNrZWxldG9uLWxpbmUgc2tlbGV0b24tZWxlbWVudFwiIHN0eWxlPVwid2lkdGg6IDc1JVwiPjwvZGl2PlxuICAgICAgICBgO1xuICAgICAgICBicmVhaztcbiAgICAgIFxuICAgICAgY2FzZSAnY2FyZCc6XG4gICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInNrZWxldG9uLWltYWdlIHNrZWxldG9uLWVsZW1lbnRcIiBzdHlsZT1cImhlaWdodDogOHJlbTsgd2lkdGg6IDEwMCU7IG1hcmdpbi1ib3R0b206IDFyZW07XCI+PC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInNrZWxldG9uLXRpdGxlIHNrZWxldG9uLWVsZW1lbnRcIiBzdHlsZT1cIndpZHRoOiA4MCVcIj48L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwic2tlbGV0b24tbGluZSBza2VsZXRvbi1lbGVtZW50XCIgc3R5bGU9XCJ3aWR0aDogMTAwJVwiPjwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJza2VsZXRvbi1saW5lIHNrZWxldG9uLWVsZW1lbnRcIiBzdHlsZT1cIndpZHRoOiA3MCVcIj48L2Rpdj5cbiAgICAgICAgYDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBcbiAgICAgIGNhc2UgJ2xpc3QnOlxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKykge1xuICAgICAgICAgIGNvbnN0IGl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICBpdGVtLmNsYXNzTmFtZSA9ICdza2VsZXRvbi1saXN0LWl0ZW0nO1xuICAgICAgICAgIGl0ZW0uc3R5bGUuY3NzVGV4dCA9ICdkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBtYXJnaW4tYm90dG9tOiAxcmVtOyc7XG4gICAgICAgICAgaXRlbS5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2tlbGV0b24tYXZhdGFyIHNrZWxldG9uLWVsZW1lbnRcIiBzdHlsZT1cIndpZHRoOiAyLjVyZW07IGhlaWdodDogMi41cmVtOyBib3JkZXItcmFkaXVzOiA1MCU7IG1hcmdpbi1yaWdodDogMC43NXJlbTtcIj48L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJmbGV4OiAxO1wiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2tlbGV0b24tbGluZSBza2VsZXRvbi1lbGVtZW50XCIgc3R5bGU9XCJ3aWR0aDogNjAlOyBtYXJnaW4tYm90dG9tOiAwLjVyZW07XCI+PC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJza2VsZXRvbi1saW5lIHNrZWxldG9uLWVsZW1lbnRcIiBzdHlsZT1cIndpZHRoOiA0MCU7XCI+PC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICBgO1xuICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChpdGVtKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICAvLyBBcHBseSBhbmltYXRpb24gaWYgZW5hYmxlZFxuICAgIGlmIChjb25maWcuYW5pbWF0ZSkge1xuICAgICAgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5za2VsZXRvbi1lbGVtZW50JykuZm9yRWFjaCgoZWwsIGluZGV4KSA9PiB7XG4gICAgICAgIGVsLnN0eWxlLmFuaW1hdGlvbiA9IGBza2VsZXRvbi1wdWxzZSAycyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjYsIDEpIGluZmluaXRlYDtcbiAgICAgICAgZWwuc3R5bGUuYW5pbWF0aW9uRGVsYXkgPSBgJHtpbmRleCAqIDAuMX1zYDtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBjb250YWluZXI7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIHByb2dyZXNzIGluZGljYXRvclxuICAgKiBAcGFyYW0ge0xvYWRpbmdPcHRpb25zfSBjb25maWcgLSBDb25maWd1cmF0aW9uXG4gICAqIEByZXR1cm5zIHtIVE1MRWxlbWVudH1cbiAgICovXG4gIHN0YXRpYyBjcmVhdGVQcm9ncmVzcyhjb25maWcpIHtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb250YWluZXIuY2xhc3NOYW1lID0gJ2xvYWRpbmctcHJvZ3Jlc3MnO1xuXG4gICAgY29uc3QgcHJvZ3Jlc3MgPSBjb25maWcucHJvZ3Jlc3MgfHwgMDtcblxuICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBgXG4gICAgICA8ZGl2IGNsYXNzPVwibG9hZGluZy1wcm9ncmVzcy10cmFja1wiIHN0eWxlPVwiXG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBoZWlnaHQ6IDAuNXJlbTtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItYm9yZGVyLWxpZ2h0LCAjZTVlN2ViKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMC4yNXJlbTtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgIFwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwibG9hZGluZy1wcm9ncmVzcy1iYXJcIiBzdHlsZT1cIlxuICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1icmFuZCwgIzNiODJmNik7XG4gICAgICAgICAgd2lkdGg6ICR7cHJvZ3Jlc3N9JTtcbiAgICAgICAgICB0cmFuc2l0aW9uOiB3aWR0aCB2YXIoLS10aW1pbmctbWVkaXVtKSB2YXIoLS1lYXNpbmctc3RhbmRhcmQpO1xuICAgICAgICAgICR7Y29uZmlnLmFuaW1hdGUgPyAnYW5pbWF0aW9uOiBwcm9ncmVzcy1zaGltbWVyIDJzIGluZmluaXRlOycgOiAnJ31cbiAgICAgICAgXCIgcm9sZT1cInByb2dyZXNzYmFyXCIgYXJpYS12YWx1ZW5vdz1cIiR7cHJvZ3Jlc3N9XCIgYXJpYS12YWx1ZW1pbj1cIjBcIiBhcmlhLXZhbHVlbWF4PVwiMTAwXCI+PC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgICR7Y29uZmlnLm1lc3NhZ2UgPyBgPGRpdiBjbGFzcz1cXFwibG9hZGluZy1tZXNzYWdlXFxcIiBzdHlsZT1cXFwibWFyZ2luLXRvcDogMC43NXJlbTsgdGV4dC1hbGlnbjogY2VudGVyOyBmb250LXNpemU6IDAuODc1cmVtO1xcXCI+JHtzYW5pdGl6ZUhUTUwoY29uZmlnLm1lc3NhZ2UpfTwvZGl2PmAgOiAnJ31cbiAgICAgIDxkaXYgY2xhc3M9XCJsb2FkaW5nLXByb2dyZXNzLXRleHRcIiBzdHlsZT1cIm1hcmdpbi10b3A6IDAuNXJlbTsgdGV4dC1hbGlnbjogY2VudGVyOyBmb250LXNpemU6IDAuNzVyZW07IGNvbG9yOiB2YXIoLS1jb2xvci10ZXh0LXNlY29uZGFyeSk7XCI+JHtNYXRoLnJvdW5kKHByb2dyZXNzKX0lPC9kaXY+XG4gICAgYDtcblxuICAgIHJldHVybiBjb250YWluZXI7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGFuaW1hdGVkIGRvdHMgaW5kaWNhdG9yXG4gICAqIEBwYXJhbSB7TG9hZGluZ09wdGlvbnN9IGNvbmZpZyAtIENvbmZpZ3VyYXRpb25cbiAgICogQHJldHVybnMge0hUTUxFbGVtZW50fVxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZURvdHMoY29uZmlnKSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29udGFpbmVyLmNsYXNzTmFtZSA9ICdsb2FkaW5nLWRvdHMnO1xuICAgIGNvbnRhaW5lci5zdHlsZS5jc3NUZXh0ID0gJ2Rpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGp1c3RpZnktY29udGVudDogY2VudGVyOyBnYXA6IDAuMjVyZW07JztcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSB7XG4gICAgICBjb25zdCBkb3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIGRvdC5jbGFzc05hbWUgPSAnbG9hZGluZy1kb3QnO1xuICAgICAgZG90LnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICAgIHdpZHRoOiAwLjVyZW07XG4gICAgICAgIGhlaWdodDogMC41cmVtO1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1icmFuZCwgIzNiODJmNik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICAgICAgJHtjb25maWcuYW5pbWF0ZSA/IGBhbmltYXRpb246IGRvdC1ib3VuY2UgMS40cyBpbmZpbml0ZSBlYXNlLWluLW91dDsgYW5pbWF0aW9uLWRlbGF5OiAke2kgKiAwLjE2fXM7YCA6ICcnfVxuICAgICAgYDtcbiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChkb3QpO1xuICAgIH1cblxuICAgIGlmIChjb25maWcubWVzc2FnZSkge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgbWVzc2FnZS5jbGFzc05hbWUgPSAnbG9hZGluZy1tZXNzYWdlJztcbiAgICAgIG1lc3NhZ2UudGV4dENvbnRlbnQgPSBjb25maWcubWVzc2FnZTtcbiAgICAgIG1lc3NhZ2Uuc3R5bGUuY3NzVGV4dCA9ICdtYXJnaW4tbGVmdDogMC43NXJlbTsgZm9udC1zaXplOiAwLjg3NXJlbTsnO1xuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKG1lc3NhZ2UpO1xuICAgIH1cblxuICAgIHJldHVybiBjb250YWluZXI7XG4gIH1cblxuICAvKipcbiAgICogU2hvdyBsb2FkZXIgYXMgb3ZlcmxheVxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50IC0gVGFyZ2V0IGVsZW1lbnRcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gbG9hZGVyRWxlbWVudCAtIExvYWRlciB0byBzaG93XG4gICAqIEBwYXJhbSB7TG9hZGluZ09wdGlvbnN9IGNvbmZpZyAtIENvbmZpZ3VyYXRpb25cbiAgICovXG4gIHN0YXRpYyBzaG93QXNPdmVybGF5KGVsZW1lbnQsIGxvYWRlckVsZW1lbnQsIGNvbmZpZykge1xuICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBvdmVybGF5LmNsYXNzTmFtZSA9ICdsb2FkaW5nLW92ZXJsYXknO1xuICAgIG92ZXJsYXkuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIHRvcDogMDtcbiAgICAgIGxlZnQ6IDA7XG4gICAgICByaWdodDogMDtcbiAgICAgIGJvdHRvbTogMDtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC45KTtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICB6LWluZGV4OiAxMDAwO1xuICAgICAgJHtjb25maWcuYmxvY2tpbmcgPyAncG9pbnRlci1ldmVudHM6IGF1dG87JyA6ICdwb2ludGVyLWV2ZW50czogbm9uZTsnfVxuICAgIGA7XG5cbiAgICBvdmVybGF5LmFwcGVuZENoaWxkKGxvYWRlckVsZW1lbnQpO1xuICAgIFxuICAgIC8vIEVuc3VyZSBwYXJlbnQgaXMgcG9zaXRpb25lZFxuICAgIGNvbnN0IHBvc2l0aW9uID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KS5wb3NpdGlvbjtcbiAgICBpZiAocG9zaXRpb24gPT09ICdzdGF0aWMnKSB7XG4gICAgICBlbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcbiAgICB9XG5cbiAgICBlbGVtZW50LmFwcGVuZENoaWxkKG92ZXJsYXkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFuaW1hdGUgY29udGVudCByZXN0b3JhdGlvblxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50IC0gVGFyZ2V0IGVsZW1lbnRcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9yaWdpbmFsQ29udGVudCAtIE9yaWdpbmFsIEhUTUwgY29udGVudFxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fHN0cmluZ30gW25ld0NvbnRlbnRdIC0gTmV3IGNvbnRlbnQgdG8gc2hvd1xuICAgKi9cbiAgc3RhdGljIGFuaW1hdGVDb250ZW50UmVzdG9yZShlbGVtZW50LCBvcmlnaW5hbENvbnRlbnQsIG5ld0NvbnRlbnQgPSBudWxsKSB7XG4gICAgY29uc3QgY29udGVudCA9IG5ld0NvbnRlbnQgfHwgb3JpZ2luYWxDb250ZW50O1xuICAgIFxuICAgIC8vIEZhZGUgb3V0IGN1cnJlbnQgY29udGVudFxuICAgIC8vIENTUyBoYW5kbGVzIHRyYW5zaXRpb25zIHZpYSBhbmltYXRpb24gdG9rZW5zXG4gICAgZWxlbWVudC5zdHlsZS5vcGFjaXR5ID0gJzAnO1xuXG4gICAgY29uc3QgZHVyYXRpb24gPSBhbmltYXRpb25CcmlkZ2UuZ2V0VGltaW5nKCdmYXN0Jyk7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAvLyBVcGRhdGUgY29udGVudFxuICAgICAgaWYgKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9IHNhbml0aXplSFRNTChjb250ZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoY29udGVudCk7XG4gICAgICB9XG5cbiAgICAgIC8vIEZhZGUgaW4gbmV3IGNvbnRlbnRcbiAgICAgIGVsZW1lbnQuc3R5bGUub3BhY2l0eSA9ICcxJztcbiAgICAgIFxuICAgICAgLy8gQ2xlYW4gdXAgdHJhbnNpdGlvblxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUudHJhbnNpdGlvbiA9ICcnO1xuICAgICAgfSwgMjAwKTtcbiAgICB9LCAyMDApO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjdXJyZW50IEFSSUEgYXR0cmlidXRlcyBmcm9tIGVsZW1lbnRcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudCAtIFRhcmdldCBlbGVtZW50XG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0QXJpYUF0dHJpYnV0ZXMoZWxlbWVudCkge1xuICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGF0dHIgb2YgZWxlbWVudC5hdHRyaWJ1dGVzKSB7XG4gICAgICBpZiAoYXR0ci5uYW1lLnN0YXJ0c1dpdGgoJ2FyaWEtJykpIHtcbiAgICAgICAgYXR0cmlidXRlc1thdHRyLm5hbWVdID0gYXR0ci52YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGF0dHJpYnV0ZXM7XG4gIH1cblxuICAvKipcbiAgICogUmVzdG9yZSBBUklBIGF0dHJpYnV0ZXMgdG8gZWxlbWVudFxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50IC0gVGFyZ2V0IGVsZW1lbnQgIFxuICAgKiBAcGFyYW0ge09iamVjdH0gYXR0cmlidXRlcyAtIEF0dHJpYnV0ZXMgdG8gcmVzdG9yZVxuICAgKi9cbiAgc3RhdGljIHJlc3RvcmVBcmlhQXR0cmlidXRlcyhlbGVtZW50LCBhdHRyaWJ1dGVzKSB7XG4gICAgZm9yIChjb25zdCBbbmFtZSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGF0dHJpYnV0ZXMpKSB7XG4gICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRyYWNrIGxvYWRpbmcgZXZlbnRzIGZvciBhbmFseXRpY3NcbiAgICogQHBhcmFtIHtzdHJpbmd9IGFjdGlvbiAtIEFjdGlvbiBwZXJmb3JtZWRcbiAgICogQHBhcmFtIHtMb2FkaW5nT3B0aW9uc30gY29uZmlnIC0gQ29uZmlndXJhdGlvbiB1c2VkXG4gICAqL1xuICBzdGF0aWMgdHJhY2tMb2FkaW5nRXZlbnQoYWN0aW9uLCBjb25maWcpIHtcbiAgICBpZiAod2luZG93LmV2ZW50QnVzKSB7XG4gICAgICB3aW5kb3cuZXZlbnRCdXMuZW1pdCgnbG9hZGluZzp0cmFja2VkJywge1xuICAgICAgICBhY3Rpb24sXG4gICAgICAgIHR5cGU6IGNvbmZpZy50eXBlLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhpZGUgYWxsIGFjdGl2ZSBsb2FkZXJzXG4gICAqL1xuICBzdGF0aWMgaGlkZUFsbCgpIHtcbiAgICBmb3IgKGNvbnN0IGxvYWRlcklkIG9mIHRoaXMuYWN0aXZlTG9hZGVycy5rZXlzKCkpIHtcbiAgICAgIHRoaXMuaGlkZShsb2FkZXJJZCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhY3RpdmUgbG9hZGVyIGNvdW50XG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICBzdGF0aWMgZ2V0QWN0aXZlQ291bnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0aXZlTG9hZGVycy5zaXplO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgQ1NTIGFuaW1hdGlvbnMgZm9yIGxvYWRpbmcgc3RhdGVzXG4gICAqL1xuICBzdGF0aWMgaW5pdGlhbGl6ZVN0eWxlcygpIHtcbiAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmctc3RhdGUtc3R5bGVzJykpIHtcbiAgICAgIHJldHVybjsgLy8gQWxyZWFkeSBpbml0aWFsaXplZFxuICAgIH1cblxuICAgIGNvbnN0IHN0eWxlcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgc3R5bGVzLmlkID0gJ2xvYWRpbmctc3RhdGUtc3R5bGVzJztcbiAgICBzdHlsZXMudGV4dENvbnRlbnQgPSBgXG4gICAgICBAa2V5ZnJhbWVzIGxvYWRpbmctc3BpbiB7XG4gICAgICAgIDAlIHsgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7IH1cbiAgICAgICAgMTAwJSB7IHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7IH1cbiAgICAgIH1cblxuICAgICAgQGtleWZyYW1lcyBza2VsZXRvbi1wdWxzZSB7XG4gICAgICAgIDAlLCAxMDAlIHsgb3BhY2l0eTogMTsgfVxuICAgICAgICA1MCUgeyBvcGFjaXR5OiAwLjU7IH1cbiAgICAgIH1cblxuICAgICAgQGtleWZyYW1lcyBwcm9ncmVzcy1zaGltbWVyIHtcbiAgICAgICAgMCUgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMjAwcHggMDsgfVxuICAgICAgICAxMDAlIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogY2FsYygyMDBweCArIDEwMCUpIDA7IH1cbiAgICAgIH1cblxuICAgICAgQGtleWZyYW1lcyBkb3QtYm91bmNlIHtcbiAgICAgICAgMCUsIDgwJSwgMTAwJSB7IHRyYW5zZm9ybTogc2NhbGUoMCk7IH1cbiAgICAgICAgNDAlIHsgdHJhbnNmb3JtOiBzY2FsZSgxKTsgfVxuICAgICAgfVxuXG4gICAgICAubG9hZGluZy1zdGF0ZSB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICBwYWRkaW5nOiAycmVtO1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICB9XG5cbiAgICAgIC5sb2FkaW5nLXNrZWxldG9uIC5za2VsZXRvbi1lbGVtZW50IHtcbiAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDkwZGVnLCAjZjBmMGYwIDI1JSwgI2UwZTBlMCA1MCUsICNmMGYwZjAgNzUlKTtcbiAgICAgICAgYmFja2dyb3VuZC1zaXplOiAyMDAlIDEwMCU7XG4gICAgICB9XG5cbiAgICAgIEBtZWRpYSAocHJlZmVycy1yZWR1Y2VkLW1vdGlvbjogcmVkdWNlKSB7XG4gICAgICAgIC5sb2FkaW5nLXN0YXRlICosXG4gICAgICAgIC5za2VsZXRvbi1lbGVtZW50IHtcbiAgICAgICAgICBhbmltYXRpb246IG5vbmUgIWltcG9ydGFudDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIGA7XG5cbiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlcyk7XG4gIH1cbn1cblxuLy8gSW5pdGlhbGl6ZSBzdHlsZXMgd2hlbiBtb2R1bGUgbG9hZHNcbkxvYWRpbmdTdGF0ZU1hbmFnZXIuaW5pdGlhbGl6ZVN0eWxlcygpO1xuXG4vLyBDb252ZW5pZW5jZSBmdW5jdGlvbnMgZm9yIGNvbW1vbiBwYXR0ZXJuc1xuZXhwb3J0IGNvbnN0IHNob3dMb2FkaW5nID0gKGNvbnRhaW5lciwgb3B0aW9ucykgPT4gTG9hZGluZ1N0YXRlTWFuYWdlci5zaG93KGNvbnRhaW5lciwgb3B0aW9ucyk7XG5leHBvcnQgY29uc3QgaGlkZUxvYWRpbmcgPSAobG9hZGVySWQsIG5ld0NvbnRlbnQpID0+IExvYWRpbmdTdGF0ZU1hbmFnZXIuaGlkZShsb2FkZXJJZCwgbmV3Q29udGVudCk7XG5leHBvcnQgY29uc3Qgc2hvd1NwaW5uZXIgPSAoY29udGFpbmVyLCBtZXNzYWdlKSA9PiBMb2FkaW5nU3RhdGVNYW5hZ2VyLnNob3coY29udGFpbmVyLCB7IHR5cGU6ICdzcGlubmVyJywgbWVzc2FnZSB9KTtcbmV4cG9ydCBjb25zdCBzaG93U2tlbGV0b24gPSAoY29udGFpbmVyLCB0ZW1wbGF0ZSkgPT4gTG9hZGluZ1N0YXRlTWFuYWdlci5zaG93KGNvbnRhaW5lciwgeyB0eXBlOiAnc2tlbGV0b24nLCBza2VsZXRvbjogeyB0ZW1wbGF0ZSB9IH0pO1xuZXhwb3J0IGNvbnN0IHVwZGF0ZVByb2dyZXNzID0gKGxvYWRlcklkLCBwcm9ncmVzcywgbWVzc2FnZSkgPT4gTG9hZGluZ1N0YXRlTWFuYWdlci51cGRhdGVQcm9ncmVzcyhsb2FkZXJJZCwgcHJvZ3Jlc3MsIG1lc3NhZ2UpOyIsICIvKipcbiAqIEVycm9ySGFuZGxlciAtIFVuaWZpZWQgZXJyb3IgaGFuZGxpbmcgYW5kIHJlY292ZXJ5IHN5c3RlbVxuICogUHJvdmlkZXMgY29uc2lzdGVudCBlcnJvciBwcm9jZXNzaW5nLCB1c2VyIGZlZWRiYWNrLCBhbmQgcmVjb3ZlcnkgbWVjaGFuaXNtc1xuICovXG5cbmltcG9ydCB7IGFubm91bmNlVG9TY3JlZW5SZWFkZXIgfSBmcm9tICcuL2FjY2Vzc2liaWxpdHkuanMnO1xuaW1wb3J0IHsgaGlkZUxvYWRpbmcgfSBmcm9tICcuL0xvYWRpbmdTdGF0ZU1hbmFnZXIuanMnO1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEVycm9yT3B0aW9uc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IFt1c2VyTWVzc2FnZV0gLSBVc2VyLWZyaWVuZGx5IGVycm9yIG1lc3NhZ2VcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY29udGV4dF0gLSBDb21wb25lbnQgb3Igb3BlcmF0aW9uIGNvbnRleHRcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3NpbGVudF0gLSBXaGV0aGVyIHRvIHN1cHByZXNzIHVzZXIgbm90aWZpY2F0aW9uc1xuICogQHByb3BlcnR5IHtib29sZWFufSBbcmVjb3ZlcmFibGVdIC0gV2hldGhlciBlcnJvciBpcyByZWNvdmVyYWJsZVxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gW29uUmV0cnldIC0gUmV0cnkgZnVuY3Rpb24gZm9yIHJlY292ZXJhYmxlIGVycm9yc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhSZXRyaWVzXSAtIE1heGltdW0gcmV0cnkgYXR0ZW1wdHNcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBbbWV0YWRhdGFdIC0gQWRkaXRpb25hbCBlcnJvciBtZXRhZGF0YVxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtsb2FkZXJJZF0gLSBMb2FkaW5nIHN0YXRlIHRvIGhpZGUgb24gZXJyb3JcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2Fubm91bmNlXSAtIFdoZXRoZXIgdG8gYW5ub3VuY2UgdG8gc2NyZWVuIHJlYWRlcnNcbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEVycm9yUmVzdWx0XG4gKiBAcHJvcGVydHkge3N0cmluZ30gaWQgLSBVbmlxdWUgZXJyb3IgSURcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB0eXBlIC0gRXJyb3IgY2xhc3NpZmljYXRpb25cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBtZXNzYWdlIC0gVXNlciBtZXNzYWdlXG4gKiBAcHJvcGVydHkge0Vycm9yfSBvcmlnaW5hbEVycm9yIC0gT3JpZ2luYWwgZXJyb3Igb2JqZWN0XG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGhhbmRsZWQgLSBXaGV0aGVyIGVycm9yIHdhcyBoYW5kbGVkXG4gKiBAcHJvcGVydHkge09iamVjdH0gbWV0YWRhdGEgLSBFcnJvciBtZXRhZGF0YVxuICovXG5cbmV4cG9ydCBjbGFzcyBFcnJvckhhbmRsZXIge1xuICBzdGF0aWMgZXJyb3JMb2cgPSBbXTtcbiAgc3RhdGljIGVycm9yQ2FsbGJhY2tzID0gbmV3IE1hcCgpO1xuICBzdGF0aWMgcmV0cnlBdHRlbXB0cyA9IG5ldyBNYXAoKTtcblxuICAvLyBFcnJvciB0eXBlIGNsYXNzaWZpY2F0aW9uc1xuICBzdGF0aWMgRXJyb3JUeXBlcyA9IHtcbiAgICBORVRXT1JLOiAnbmV0d29yaycsXG4gICAgVkFMSURBVElPTjogJ3ZhbGlkYXRpb24nLFxuICAgIEFVVEhFTlRJQ0FUSU9OOiAnYXV0aGVudGljYXRpb24nLFxuICAgIFBFUk1JU1NJT046ICdwZXJtaXNzaW9uJyxcbiAgICBOT1RfRk9VTkQ6ICdub3RfZm91bmQnLFxuICAgIFNFUlZFUjogJ3NlcnZlcicsXG4gICAgQ0xJRU5UOiAnY2xpZW50JyxcbiAgICBUSU1FT1VUOiAndGltZW91dCcsXG4gICAgQUJPUlQ6ICdhYm9ydCcsXG4gICAgVU5LTk9XTjogJ3Vua25vd24nXG4gIH07XG5cbiAgLy8gRGVmYXVsdCBlcnJvciBtZXNzYWdlc1xuICBzdGF0aWMgRGVmYXVsdE1lc3NhZ2VzID0ge1xuICAgIFt0aGlzLkVycm9yVHlwZXMuTkVUV09SS106ICdOZXR3b3JrIGNvbm5lY3Rpb24gZmFpbGVkLiBQbGVhc2UgY2hlY2sgeW91ciBpbnRlcm5ldCBjb25uZWN0aW9uIGFuZCB0cnkgYWdhaW4uJyxcbiAgICBbdGhpcy5FcnJvclR5cGVzLlZBTElEQVRJT05dOiAnUGxlYXNlIGNoZWNrIHlvdXIgaW5wdXQgYW5kIHRyeSBhZ2Fpbi4nLFxuICAgIFt0aGlzLkVycm9yVHlwZXMuQVVUSEVOVElDQVRJT05dOiAnQXV0aGVudGljYXRpb24gZmFpbGVkLiBQbGVhc2UgbG9nIGluIGFuZCB0cnkgYWdhaW4uJyxcbiAgICBbdGhpcy5FcnJvclR5cGVzLlBFUk1JU1NJT05dOiAnWW91IGRvIG5vdCBoYXZlIHBlcm1pc3Npb24gdG8gcGVyZm9ybSB0aGlzIGFjdGlvbi4nLFxuICAgIFt0aGlzLkVycm9yVHlwZXMuTk9UX0ZPVU5EXTogJ1RoZSByZXF1ZXN0ZWQgcmVzb3VyY2Ugd2FzIG5vdCBmb3VuZC4nLFxuICAgIFt0aGlzLkVycm9yVHlwZXMuU0VSVkVSXTogJ1NlcnZlciBlcnJvciBvY2N1cnJlZC4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nLFxuICAgIFt0aGlzLkVycm9yVHlwZXMuQ0xJRU5UXTogJ0FuIGVycm9yIG9jY3VycmVkIGluIHRoZSBhcHBsaWNhdGlvbi4nLFxuICAgIFt0aGlzLkVycm9yVHlwZXMuVElNRU9VVF06ICdSZXF1ZXN0IHRpbWVkIG91dC4gUGxlYXNlIHRyeSBhZ2Fpbi4nLFxuICAgIFt0aGlzLkVycm9yVHlwZXMuQUJPUlRdOiAnT3BlcmF0aW9uIHdhcyBjYW5jZWxsZWQuJyxcbiAgICBbdGhpcy5FcnJvclR5cGVzLlVOS05PV05dOiAnQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZC4gUGxlYXNlIHRyeSBhZ2Fpbi4nXG4gIH07XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBhbiBlcnJvciB3aXRoIHVuaWZpZWQgcHJvY2Vzc2luZyBhbmQgdXNlciBmZWVkYmFja1xuICAgKiBAcGFyYW0ge0Vycm9yfHN0cmluZ30gZXJyb3IgLSBFcnJvciB0byBoYW5kbGVcbiAgICogQHBhcmFtIHtFcnJvck9wdGlvbnN9IG9wdGlvbnMgLSBFcnJvciBoYW5kbGluZyBvcHRpb25zXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPEVycm9yUmVzdWx0Pn1cbiAgICovXG4gIHN0YXRpYyBhc3luYyBoYW5kbGUoZXJyb3IsIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGNvbmZpZyA9IHtcbiAgICAgIHVzZXJNZXNzYWdlOiBudWxsLFxuICAgICAgY29udGV4dDogJ3Vua25vd24nLFxuICAgICAgc2lsZW50OiBmYWxzZSxcbiAgICAgIHJlY292ZXJhYmxlOiBmYWxzZSxcbiAgICAgIG9uUmV0cnk6IG51bGwsXG4gICAgICBtYXhSZXRyaWVzOiAzLFxuICAgICAgbWV0YWRhdGE6IHt9LFxuICAgICAgbG9hZGVySWQ6IG51bGwsXG4gICAgICBhbm5vdW5jZTogdHJ1ZSxcbiAgICAgIC4uLm9wdGlvbnNcbiAgICB9O1xuXG4gICAgLy8gQ3JlYXRlIGVycm9yIG9iamVjdCBpZiBzdHJpbmcgcHJvdmlkZWRcbiAgICBjb25zdCBlcnJvck9iaiA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvcihlcnJvcik7XG4gICAgXG4gICAgLy8gR2VuZXJhdGUgdW5pcXVlIGVycm9yIElEXG4gICAgY29uc3QgZXJyb3JJZCA9IGBlcnJvci0ke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDUpfWA7XG4gICAgXG4gICAgLy8gQ2xhc3NpZnkgZXJyb3IgdHlwZVxuICAgIGNvbnN0IGVycm9yVHlwZSA9IHRoaXMuY2xhc3NpZnlFcnJvcihlcnJvck9iaik7XG4gICAgXG4gICAgLy8gRGV0ZXJtaW5lIHVzZXIgbWVzc2FnZVxuICAgIGNvbnN0IHVzZXJNZXNzYWdlID0gY29uZmlnLnVzZXJNZXNzYWdlIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFVzZXJNZXNzYWdlKGVycm9yVHlwZSwgZXJyb3JPYmopIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICB0aGlzLkRlZmF1bHRNZXNzYWdlc1tlcnJvclR5cGVdO1xuXG4gICAgLy8gQ3JlYXRlIGVycm9yIHJlc3VsdFxuICAgIGNvbnN0IGVycm9yUmVzdWx0ID0ge1xuICAgICAgaWQ6IGVycm9ySWQsXG4gICAgICB0eXBlOiBlcnJvclR5cGUsXG4gICAgICBtZXNzYWdlOiB1c2VyTWVzc2FnZSxcbiAgICAgIG9yaWdpbmFsRXJyb3I6IGVycm9yT2JqLFxuICAgICAgaGFuZGxlZDogZmFsc2UsXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICBjb250ZXh0OiBjb25maWcuY29udGV4dCxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIHVzZXJBZ2VudDogbmF2aWdhdG9yLnVzZXJBZ2VudCxcbiAgICAgICAgdXJsOiB3aW5kb3cubG9jYXRpb24uaHJlZixcbiAgICAgICAgLi4uY29uZmlnLm1ldGFkYXRhXG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIExvZyBlcnJvciBmb3IgZGVidWdnaW5nXG4gICAgdGhpcy5sb2dFcnJvcihlcnJvclJlc3VsdCwgY29uZmlnKTtcblxuICAgIC8vIEhpZGUgbG9hZGluZyBzdGF0ZSBpZiBwcm92aWRlZFxuICAgIGlmIChjb25maWcubG9hZGVySWQpIHtcbiAgICAgIGhpZGVMb2FkaW5nKGNvbmZpZy5sb2FkZXJJZCk7XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIGVycm9yIGJhc2VkIG9uIHR5cGUgYW5kIGNvbmZpZ3VyYXRpb25cbiAgICBpZiAoIWNvbmZpZy5zaWxlbnQpIHtcbiAgICAgIGF3YWl0IHRoaXMuc2hvd1VzZXJGZWVkYmFjayhlcnJvclJlc3VsdCwgY29uZmlnKTtcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgcmV0cnkgbG9naWMgZm9yIHJlY292ZXJhYmxlIGVycm9yc1xuICAgIGlmIChjb25maWcucmVjb3ZlcmFibGUgJiYgY29uZmlnLm9uUmV0cnkpIHtcbiAgICAgIGF3YWl0IHRoaXMuaGFuZGxlUmV0cnkoZXJyb3JSZXN1bHQsIGNvbmZpZyk7XG4gICAgfVxuXG4gICAgLy8gU3RvcmUgZXJyb3IgZm9yIGFuYWx5dGljc1xuICAgIHRoaXMuZXJyb3JMb2cucHVzaChlcnJvclJlc3VsdCk7XG4gICAgXG4gICAgLy8gRW1pdCBlcnJvciBldmVudFxuICAgIHRoaXMuZW1pdEVycm9yRXZlbnQoZXJyb3JSZXN1bHQsIGNvbmZpZyk7XG4gICAgXG4gICAgZXJyb3JSZXN1bHQuaGFuZGxlZCA9IHRydWU7XG4gICAgcmV0dXJuIGVycm9yUmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIENsYXNzaWZ5IGVycm9yIGludG8gc3RhbmRhcmQgdHlwZXNcbiAgICogQHBhcmFtIHtFcnJvcn0gZXJyb3IgLSBFcnJvciB0byBjbGFzc2lmeVxuICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgKi9cbiAgc3RhdGljIGNsYXNzaWZ5RXJyb3IoZXJyb3IpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZXJyb3IubWVzc2FnZS50b0xvd2VyQ2FzZSgpO1xuICAgIGNvbnN0IG5hbWUgPSBlcnJvci5uYW1lLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAvLyBOZXR3b3JrLXJlbGF0ZWQgZXJyb3JzXG4gICAgaWYgKG5hbWUgPT09ICdhYm9ydGVycm9yJyB8fCBtZXNzYWdlLmluY2x1ZGVzKCdhYm9ydCcpKSB7XG4gICAgICByZXR1cm4gdGhpcy5FcnJvclR5cGVzLkFCT1JUO1xuICAgIH1cbiAgICBcbiAgICBpZiAobmFtZSA9PT0gJ3RpbWVvdXRlcnJvcicgfHwgbWVzc2FnZS5pbmNsdWRlcygndGltZW91dCcpKSB7XG4gICAgICByZXR1cm4gdGhpcy5FcnJvclR5cGVzLlRJTUVPVVQ7XG4gICAgfVxuXG4gICAgaWYgKG1lc3NhZ2UuaW5jbHVkZXMoJ25ldHdvcmsnKSB8fCBtZXNzYWdlLmluY2x1ZGVzKCdmZXRjaCcpIHx8IFxuICAgICAgICBtZXNzYWdlLmluY2x1ZGVzKCdjb25uZWN0aW9uJykgfHwgIW5hdmlnYXRvci5vbkxpbmUpIHtcbiAgICAgIHJldHVybiB0aGlzLkVycm9yVHlwZXMuTkVUV09SSztcbiAgICB9XG5cbiAgICAvLyBIVFRQIHN0YXR1cy1iYXNlZCBjbGFzc2lmaWNhdGlvblxuICAgIGlmIChlcnJvci5zdGF0dXMpIHtcbiAgICAgIGlmIChlcnJvci5zdGF0dXMgPT09IDQwMSkgcmV0dXJuIHRoaXMuRXJyb3JUeXBlcy5BVVRIRU5USUNBVElPTjtcbiAgICAgIGlmIChlcnJvci5zdGF0dXMgPT09IDQwMykgcmV0dXJuIHRoaXMuRXJyb3JUeXBlcy5QRVJNSVNTSU9OO1xuICAgICAgaWYgKGVycm9yLnN0YXR1cyA9PT0gNDA0KSByZXR1cm4gdGhpcy5FcnJvclR5cGVzLk5PVF9GT1VORDtcbiAgICAgIGlmIChlcnJvci5zdGF0dXMgPj0gNDAwICYmIGVycm9yLnN0YXR1cyA8IDUwMCkgcmV0dXJuIHRoaXMuRXJyb3JUeXBlcy5DTElFTlQ7XG4gICAgICBpZiAoZXJyb3Iuc3RhdHVzID49IDUwMCkgcmV0dXJuIHRoaXMuRXJyb3JUeXBlcy5TRVJWRVI7XG4gICAgfVxuXG4gICAgLy8gVmFsaWRhdGlvbiBlcnJvcnNcbiAgICBpZiAobmFtZS5pbmNsdWRlcygndmFsaWRhdGlvbicpIHx8IG1lc3NhZ2UuaW5jbHVkZXMoJ2ludmFsaWQnKSB8fCBcbiAgICAgICAgbWVzc2FnZS5pbmNsdWRlcygncmVxdWlyZWQnKSB8fCBtZXNzYWdlLmluY2x1ZGVzKCdmb3JtYXQnKSkge1xuICAgICAgcmV0dXJuIHRoaXMuRXJyb3JUeXBlcy5WQUxJREFUSU9OO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLkVycm9yVHlwZXMuVU5LTk9XTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY29udGV4dC1zcGVjaWZpYyB1c2VyIG1lc3NhZ2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IGVycm9yVHlwZSAtIENsYXNzaWZpZWQgZXJyb3IgdHlwZVxuICAgKiBAcGFyYW0ge0Vycm9yfSBlcnJvciAtIE9yaWdpbmFsIGVycm9yXG4gICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH1cbiAgICovXG4gIHN0YXRpYyBnZXRVc2VyTWVzc2FnZShlcnJvclR5cGUsIGVycm9yKSB7XG4gICAgLy8gU3BlY2lhbCBoYW5kbGluZyBmb3IgY29tbW9uIGVycm9yIHNjZW5hcmlvc1xuICAgIGlmIChlcnJvclR5cGUgPT09IHRoaXMuRXJyb3JUeXBlcy5ORVRXT1JLICYmICFuYXZpZ2F0b3Iub25MaW5lKSB7XG4gICAgICByZXR1cm4gJ1lvdSBhcHBlYXIgdG8gYmUgb2ZmbGluZS4gUGxlYXNlIGNoZWNrIHlvdXIgaW50ZXJuZXQgY29ubmVjdGlvbi4nO1xuICAgIH1cblxuICAgIGlmIChlcnJvclR5cGUgPT09IHRoaXMuRXJyb3JUeXBlcy5USU1FT1VUKSB7XG4gICAgICByZXR1cm4gJ1RoZSByZXF1ZXN0IGlzIHRha2luZyBsb25nZXIgdGhhbiBleHBlY3RlZC4gUGxlYXNlIHRyeSBhZ2Fpbi4nO1xuICAgIH1cblxuICAgIC8vIEZvciBzZXJ2ZXIgZXJyb3JzLCBwcm92aWRlIG1vcmUgc3BlY2lmaWMgZ3VpZGFuY2VcbiAgICBpZiAoZXJyb3JUeXBlID09PSB0aGlzLkVycm9yVHlwZXMuU0VSVkVSKSB7XG4gICAgICByZXR1cm4gJ091ciBzZXJ2ZXJzIGFyZSBleHBlcmllbmNpbmcgaXNzdWVzLiBQbGVhc2UgdHJ5IGFnYWluIGluIGEgZmV3IG1pbnV0ZXMuJztcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBMb2cgZXJyb3IgZm9yIGRlYnVnZ2luZyBhbmQgYW5hbHl0aWNzXG4gICAqIEBwYXJhbSB7RXJyb3JSZXN1bHR9IGVycm9yUmVzdWx0IC0gRXJyb3IgcmVzdWx0IG9iamVjdFxuICAgKiBAcGFyYW0ge0Vycm9yT3B0aW9uc30gY29uZmlnIC0gQ29uZmlndXJhdGlvblxuICAgKi9cbiAgc3RhdGljIGxvZ0Vycm9yKGVycm9yUmVzdWx0LCBjb25maWcpIHtcbiAgICBjb25zdCBsb2dMZXZlbCA9IHRoaXMuZ2V0TG9nTGV2ZWwoZXJyb3JSZXN1bHQudHlwZSk7XG4gICAgXG4gICAgY29uc3QgbG9nTWVzc2FnZSA9IGBbJHtlcnJvclJlc3VsdC50eXBlLnRvVXBwZXJDYXNlKCl9XSAke2NvbmZpZy5jb250ZXh0fTogJHtlcnJvclJlc3VsdC5vcmlnaW5hbEVycm9yLm1lc3NhZ2V9YDtcbiAgICBcbiAgICBzd2l0Y2ggKGxvZ0xldmVsKSB7XG4gICAgICBjYXNlICdlcnJvcic6XG4gICAgICAgIGNvbnNvbGUuZXJyb3IobG9nTWVzc2FnZSwge1xuICAgICAgICAgIGVycm9ySWQ6IGVycm9yUmVzdWx0LmlkLFxuICAgICAgICAgIGVycm9yOiBlcnJvclJlc3VsdC5vcmlnaW5hbEVycm9yLFxuICAgICAgICAgIG1ldGFkYXRhOiBlcnJvclJlc3VsdC5tZXRhZGF0YVxuICAgICAgICB9KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd3YXJuJzpcbiAgICAgICAgY29uc29sZS53YXJuKGxvZ01lc3NhZ2UsIGVycm9yUmVzdWx0Lm1ldGFkYXRhKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdpbmZvJzpcbiAgICAgICAgY29uc29sZS5pbmZvKGxvZ01lc3NhZ2UsIGVycm9yUmVzdWx0Lm1ldGFkYXRhKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgLy8gTG9nIHRvIGV4dGVybmFsIHNlcnZpY2UgaWYgYXZhaWxhYmxlXG4gICAgaWYgKHdpbmRvdy5lcnJvckxvZ2dlcikge1xuICAgICAgd2luZG93LmVycm9yTG9nZ2VyLmxvZyhlcnJvclJlc3VsdCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhcHByb3ByaWF0ZSBsb2cgbGV2ZWwgZm9yIGVycm9yIHR5cGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IGVycm9yVHlwZSAtIEVycm9yIHR5cGVcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG4gIHN0YXRpYyBnZXRMb2dMZXZlbChlcnJvclR5cGUpIHtcbiAgICBzd2l0Y2ggKGVycm9yVHlwZSkge1xuICAgICAgY2FzZSB0aGlzLkVycm9yVHlwZXMuU0VSVkVSOlxuICAgICAgY2FzZSB0aGlzLkVycm9yVHlwZXMuVU5LTk9XTjpcbiAgICAgICAgcmV0dXJuICdlcnJvcic7XG4gICAgICBjYXNlIHRoaXMuRXJyb3JUeXBlcy5ORVRXT1JLOlxuICAgICAgY2FzZSB0aGlzLkVycm9yVHlwZXMuVElNRU9VVDpcbiAgICAgICAgcmV0dXJuICd3YXJuJztcbiAgICAgIGNhc2UgdGhpcy5FcnJvclR5cGVzLlZBTElEQVRJT046XG4gICAgICBjYXNlIHRoaXMuRXJyb3JUeXBlcy5BQk9SVDpcbiAgICAgICAgcmV0dXJuICdpbmZvJztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiAnd2Fybic7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNob3cgdXNlciBmZWVkYmFjayBmb3IgZXJyb3JcbiAgICogQHBhcmFtIHtFcnJvclJlc3VsdH0gZXJyb3JSZXN1bHQgLSBFcnJvciByZXN1bHRcbiAgICogQHBhcmFtIHtFcnJvck9wdGlvbnN9IGNvbmZpZyAtIENvbmZpZ3VyYXRpb25cbiAgICovXG4gIHN0YXRpYyBhc3luYyBzaG93VXNlckZlZWRiYWNrKGVycm9yUmVzdWx0LCBjb25maWcpIHtcbiAgICAvLyBTY3JlZW4gcmVhZGVyIGFubm91bmNlbWVudFxuICAgIGlmIChjb25maWcuYW5ub3VuY2UpIHtcbiAgICAgIGFubm91bmNlVG9TY3JlZW5SZWFkZXIoYEVycm9yOiAke2Vycm9yUmVzdWx0Lm1lc3NhZ2V9YCk7XG4gICAgfVxuXG4gICAgLy8gVG9hc3Qgbm90aWZpY2F0aW9uIGlmIGF2YWlsYWJsZVxuICAgIGlmICh3aW5kb3cudG9hc3QpIHtcbiAgICAgIGNvbnN0IGR1cmF0aW9uID0gdGhpcy5nZXROb3RpZmljYXRpb25EdXJhdGlvbihlcnJvclJlc3VsdC50eXBlKTtcbiAgICAgIHdpbmRvdy50b2FzdChlcnJvclJlc3VsdC5tZXNzYWdlLCAnZXJyb3InLCBkdXJhdGlvbik7XG4gICAgfVxuXG4gICAgLy8gQ29uc29sZSBmZWVkYmFjayBmb3IgZGV2ZWxvcG1lbnRcbiAgICBpZiAod2luZG93Lk1pbG9EZWJ1Zykge1xuICAgICAgY29uc29sZS5ncm91cChgXHVEODNEXHVERUE4IEVycm9yIGluICR7Y29uZmlnLmNvbnRleHR9YCk7XG4gICAgICBjb25zb2xlLmVycm9yKCdNZXNzYWdlOicsIGVycm9yUmVzdWx0Lm1lc3NhZ2UpO1xuICAgICAgY29uc29sZS5lcnJvcignVHlwZTonLCBlcnJvclJlc3VsdC50eXBlKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ09yaWdpbmFsOicsIGVycm9yUmVzdWx0Lm9yaWdpbmFsRXJyb3IpO1xuICAgICAgY29uc29sZS5lcnJvcignTWV0YWRhdGE6JywgZXJyb3JSZXN1bHQubWV0YWRhdGEpO1xuICAgICAgY29uc29sZS5ncm91cEVuZCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgbm90aWZpY2F0aW9uIGR1cmF0aW9uIGJhc2VkIG9uIGVycm9yIHNldmVyaXR5XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBlcnJvclR5cGUgLSBFcnJvciB0eXBlXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICBzdGF0aWMgZ2V0Tm90aWZpY2F0aW9uRHVyYXRpb24oZXJyb3JUeXBlKSB7XG4gICAgc3dpdGNoIChlcnJvclR5cGUpIHtcbiAgICAgIGNhc2UgdGhpcy5FcnJvclR5cGVzLlZBTElEQVRJT046XG4gICAgICBjYXNlIHRoaXMuRXJyb3JUeXBlcy5BQk9SVDpcbiAgICAgICAgcmV0dXJuIDMwMDA7IC8vIFNob3J0IGR1cmF0aW9uIGZvciB1c2VyLWNhdXNlZCBlcnJvcnNcbiAgICAgIGNhc2UgdGhpcy5FcnJvclR5cGVzLk5FVFdPUks6XG4gICAgICBjYXNlIHRoaXMuRXJyb3JUeXBlcy5USU1FT1VUOlxuICAgICAgICByZXR1cm4gNTAwMDsgLy8gTWVkaXVtIGR1cmF0aW9uIGZvciBuZXR3b3JrIGlzc3Vlc1xuICAgICAgY2FzZSB0aGlzLkVycm9yVHlwZXMuU0VSVkVSOlxuICAgICAgY2FzZSB0aGlzLkVycm9yVHlwZXMuVU5LTk9XTjpcbiAgICAgICAgcmV0dXJuIDcwMDA7IC8vIExvbmdlciBkdXJhdGlvbiBmb3Igc2VyaW91cyBlcnJvcnNcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiA0MDAwO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgcmV0cnkgbG9naWMgZm9yIHJlY292ZXJhYmxlIGVycm9yc1xuICAgKiBAcGFyYW0ge0Vycm9yUmVzdWx0fSBlcnJvclJlc3VsdCAtIEVycm9yIHJlc3VsdFxuICAgKiBAcGFyYW0ge0Vycm9yT3B0aW9uc30gY29uZmlnIC0gQ29uZmlndXJhdGlvblxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGhhbmRsZVJldHJ5KGVycm9yUmVzdWx0LCBjb25maWcpIHtcbiAgICBjb25zdCByZXRyeUtleSA9IGAke2NvbmZpZy5jb250ZXh0fS0ke2Vycm9yUmVzdWx0LnR5cGV9YDtcbiAgICBjb25zdCBjdXJyZW50QXR0ZW1wdHMgPSB0aGlzLnJldHJ5QXR0ZW1wdHMuZ2V0KHJldHJ5S2V5KSB8fCAwO1xuXG4gICAgaWYgKGN1cnJlbnRBdHRlbXB0cyA+PSBjb25maWcubWF4UmV0cmllcykge1xuICAgICAgY29uc29sZS53YXJuKGBNYXggcmV0cmllcyAoJHtjb25maWcubWF4UmV0cmllc30pIGV4Y2VlZGVkIGZvciAke2NvbmZpZy5jb250ZXh0fWApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENhbGN1bGF0ZSBleHBvbmVudGlhbCBiYWNrb2ZmIGRlbGF5XG4gICAgY29uc3QgYmFzZURlbGF5ID0gMTAwMDsgLy8gMSBzZWNvbmRcbiAgICBjb25zdCBkZWxheSA9IGJhc2VEZWxheSAqIE1hdGgucG93KDIsIGN1cnJlbnRBdHRlbXB0cyk7XG4gICAgXG4gICAgY29uc29sZS5sb2coYFJldHJ5aW5nICR7Y29uZmlnLmNvbnRleHR9IGluICR7ZGVsYXl9bXMgKGF0dGVtcHQgJHtjdXJyZW50QXR0ZW1wdHMgKyAxfS8ke2NvbmZpZy5tYXhSZXRyaWVzfSlgKTtcblxuICAgIC8vIFVwZGF0ZSByZXRyeSBjb3VudFxuICAgIHRoaXMucmV0cnlBdHRlbXB0cy5zZXQocmV0cnlLZXksIGN1cnJlbnRBdHRlbXB0cyArIDEpO1xuXG4gICAgLy8gU2hvdyByZXRyeSBub3RpZmljYXRpb25cbiAgICBpZiAod2luZG93LnRvYXN0KSB7XG4gICAgICB3aW5kb3cudG9hc3QoYFJldHJ5aW5nLi4uICgke2N1cnJlbnRBdHRlbXB0cyArIDF9LyR7Y29uZmlnLm1heFJldHJpZXN9KWAsICdpbmZvJywgMjAwMCk7XG4gICAgfVxuXG4gICAgLy8gRXhlY3V0ZSByZXRyeSBhZnRlciBkZWxheVxuICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgY29uZmlnLm9uUmV0cnkoKTtcbiAgICAgICAgLy8gUmVzZXQgcmV0cnkgY291bnQgb24gc3VjY2Vzc1xuICAgICAgICB0aGlzLnJldHJ5QXR0ZW1wdHMuZGVsZXRlKHJldHJ5S2V5KTtcbiAgICAgIH0gY2F0Y2ggKHJldHJ5RXJyb3IpIHtcbiAgICAgICAgLy8gSGFuZGxlIHJldHJ5IGZhaWx1cmVcbiAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGUocmV0cnlFcnJvciwge1xuICAgICAgICAgIC4uLmNvbmZpZyxcbiAgICAgICAgICB1c2VyTWVzc2FnZTogYFJldHJ5IGZhaWxlZDogJHtyZXRyeUVycm9yLm1lc3NhZ2V9YFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LCBkZWxheSk7XG4gIH1cblxuICAvKipcbiAgICogRW1pdCBlcnJvciBldmVudCBmb3IgY29tcG9uZW50IHRyYWNraW5nXG4gICAqIEBwYXJhbSB7RXJyb3JSZXN1bHR9IGVycm9yUmVzdWx0IC0gRXJyb3IgcmVzdWx0XG4gICAqIEBwYXJhbSB7RXJyb3JPcHRpb25zfSBjb25maWcgLSBDb25maWd1cmF0aW9uXG4gICAqL1xuICBzdGF0aWMgZW1pdEVycm9yRXZlbnQoZXJyb3JSZXN1bHQsIGNvbmZpZykge1xuICAgIGlmICh3aW5kb3cuZXZlbnRCdXMpIHtcbiAgICAgIHdpbmRvdy5ldmVudEJ1cy5lbWl0KCdlcnJvcjpoYW5kbGVkJywge1xuICAgICAgICBlcnJvcklkOiBlcnJvclJlc3VsdC5pZCxcbiAgICAgICAgdHlwZTogZXJyb3JSZXN1bHQudHlwZSxcbiAgICAgICAgY29udGV4dDogY29uZmlnLmNvbnRleHQsXG4gICAgICAgIHJlY292ZXJhYmxlOiBjb25maWcucmVjb3ZlcmFibGUsXG4gICAgICAgIHRpbWVzdGFtcDogZXJyb3JSZXN1bHQubWV0YWRhdGEudGltZXN0YW1wXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGVycm9yIGJvdW5kYXJ5IGZvciBjb21wb25lbnQgZXJyb3IgaGFuZGxpbmdcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gb3BlcmF0aW9uIC0gT3BlcmF0aW9uIHRvIHdyYXBcbiAgICogQHBhcmFtIHtFcnJvck9wdGlvbnN9IG9wdGlvbnMgLSBFcnJvciBoYW5kbGluZyBvcHRpb25zXG4gICAqIEByZXR1cm5zIHtGdW5jdGlvbn1cbiAgICovXG4gIHN0YXRpYyBjcmVhdGVFcnJvckJvdW5kYXJ5KG9wZXJhdGlvbiwgb3B0aW9ucyA9IHt9KSB7XG4gICAgcmV0dXJuIGFzeW5jICguLi5hcmdzKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gYXdhaXQgb3BlcmF0aW9uKC4uLmFyZ3MpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc3QgZXJyb3JSZXN1bHQgPSBhd2FpdCB0aGlzLmhhbmRsZShlcnJvciwgb3B0aW9ucyk7XG4gICAgICAgIFxuICAgICAgICAvLyBSZS10aHJvdyBpZiBlcnJvciBpcyBjcml0aWNhbCBhbmQgc2hvdWxkIGJ1YmJsZSB1cFxuICAgICAgICBpZiAob3B0aW9ucy5jcml0aWNhbCkge1xuICAgICAgICAgIHRocm93IGVycm9yUmVzdWx0Lm9yaWdpbmFsRXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXIgZ2xvYmFsIGVycm9yIGNhbGxiYWNrIGZvciBzcGVjaWZpYyBlcnJvciB0eXBlc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gZXJyb3JUeXBlIC0gRXJyb3IgdHlwZSB0byBoYW5kbGVcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgLSBDYWxsYmFjayBmdW5jdGlvblxuICAgKi9cbiAgc3RhdGljIG9uRXJyb3IoZXJyb3JUeXBlLCBjYWxsYmFjaykge1xuICAgIGlmICghdGhpcy5lcnJvckNhbGxiYWNrcy5oYXMoZXJyb3JUeXBlKSkge1xuICAgICAgdGhpcy5lcnJvckNhbGxiYWNrcy5zZXQoZXJyb3JUeXBlLCBbXSk7XG4gICAgfVxuICAgIHRoaXMuZXJyb3JDYWxsYmFja3MuZ2V0KGVycm9yVHlwZSkucHVzaChjYWxsYmFjayk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIGZldGNoIGVycm9ycyB3aXRoIGF1dG9tYXRpYyBjbGFzc2lmaWNhdGlvblxuICAgKiBAcGFyYW0ge1Jlc3BvbnNlfSByZXNwb25zZSAtIEZldGNoIHJlc3BvbnNlXG4gICAqIEBwYXJhbSB7RXJyb3JPcHRpb25zfSBvcHRpb25zIC0gRXJyb3IgaGFuZGxpbmcgb3B0aW9uc1xuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxFcnJvclJlc3VsdD59XG4gICAqL1xuICBzdGF0aWMgYXN5bmMgaGFuZGxlRmV0Y2hFcnJvcihyZXNwb25zZSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgbGV0IGVycm9yO1xuICAgIFxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKS5jYXRjaCgoKSA9PiAnVW5rbm93biBlcnJvcicpO1xuICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoYEhUVFAgJHtyZXNwb25zZS5zdGF0dXN9OiAke2Vycm9yVGV4dH1gKTtcbiAgICAgIGVycm9yLnN0YXR1cyA9IHJlc3BvbnNlLnN0YXR1cztcbiAgICAgIGVycm9yLnN0YXR1c1RleHQgPSByZXNwb25zZS5zdGF0dXNUZXh0O1xuICAgIH0gZWxzZSB7XG4gICAgICBlcnJvciA9IG5ldyBFcnJvcignRmV0Y2ggb3BlcmF0aW9uIGZhaWxlZCcpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmhhbmRsZShlcnJvciwge1xuICAgICAgY29udGV4dDogJ2ZldGNoJyxcbiAgICAgIHJlY292ZXJhYmxlOiByZXNwb25zZS5zdGF0dXMgPj0gNTAwLCAvLyBTZXJ2ZXIgZXJyb3JzIGFyZSByZWNvdmVyYWJsZVxuICAgICAgLi4ub3B0aW9uc1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFyIGVycm9yIGxvZyAoZm9yIG1lbW9yeSBtYW5hZ2VtZW50KVxuICAgKiBAcGFyYW0ge251bWJlcn0gW21heEFnZV0gLSBNYXhpbXVtIGFnZSBpbiBtaWxsaXNlY29uZHNcbiAgICovXG4gIHN0YXRpYyBjbGVhckVycm9yTG9nKG1heEFnZSA9IDI0ICogNjAgKiA2MCAqIDEwMDApIHsgLy8gMjQgaG91cnMgZGVmYXVsdFxuICAgIGNvbnN0IGN1dG9mZiA9IERhdGUubm93KCkgLSBtYXhBZ2U7XG4gICAgdGhpcy5lcnJvckxvZyA9IHRoaXMuZXJyb3JMb2cuZmlsdGVyKGVycm9yID0+IFxuICAgICAgbmV3IERhdGUoZXJyb3IubWV0YWRhdGEudGltZXN0YW1wKS5nZXRUaW1lKCkgPiBjdXRvZmZcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBlcnJvciBzdGF0aXN0aWNzXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbdGltZWZyYW1lXSAtIFRpbWVmcmFtZSBpbiBtaWxsaXNlY29uZHNcbiAgICogQHJldHVybnMge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXRFcnJvclN0YXRzKHRpbWVmcmFtZSA9IDYwICogNjAgKiAxMDAwKSB7IC8vIDEgaG91ciBkZWZhdWx0XG4gICAgY29uc3QgY3V0b2ZmID0gRGF0ZS5ub3coKSAtIHRpbWVmcmFtZTtcbiAgICBjb25zdCByZWNlbnRFcnJvcnMgPSB0aGlzLmVycm9yTG9nLmZpbHRlcihlcnJvciA9PiBcbiAgICAgIG5ldyBEYXRlKGVycm9yLm1ldGFkYXRhLnRpbWVzdGFtcCkuZ2V0VGltZSgpID4gY3V0b2ZmXG4gICAgKTtcblxuICAgIGNvbnN0IHN0YXRzID0ge1xuICAgICAgdG90YWw6IHJlY2VudEVycm9ycy5sZW5ndGgsXG4gICAgICBieVR5cGU6IHt9LFxuICAgICAgYnlDb250ZXh0OiB7fSxcbiAgICAgIHJlY292ZXJhYmxlOiAwXG4gICAgfTtcblxuICAgIHJlY2VudEVycm9ycy5mb3JFYWNoKGVycm9yID0+IHtcbiAgICAgIC8vIENvdW50IGJ5IHR5cGVcbiAgICAgIHN0YXRzLmJ5VHlwZVtlcnJvci50eXBlXSA9IChzdGF0cy5ieVR5cGVbZXJyb3IudHlwZV0gfHwgMCkgKyAxO1xuICAgICAgXG4gICAgICAvLyBDb3VudCBieSBjb250ZXh0XG4gICAgICBjb25zdCBjb250ZXh0ID0gZXJyb3IubWV0YWRhdGEuY29udGV4dDtcbiAgICAgIHN0YXRzLmJ5Q29udGV4dFtjb250ZXh0XSA9IChzdGF0cy5ieUNvbnRleHRbY29udGV4dF0gfHwgMCkgKyAxO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHN0YXRzO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIGdsb2JhbCBlcnJvciBoYW5kbGVyc1xuICAgKi9cbiAgc3RhdGljIHNldHVwR2xvYmFsSGFuZGxlcnMoKSB7XG4gICAgLy8gSGFuZGxlIHVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvbnNcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndW5oYW5kbGVkcmVqZWN0aW9uJywgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLmhhbmRsZShldmVudC5yZWFzb24sIHtcbiAgICAgICAgY29udGV4dDogJ3VuaGFuZGxlZC1wcm9taXNlJyxcbiAgICAgICAgdXNlck1lc3NhZ2U6ICdBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VycmVkLicsXG4gICAgICAgIHNpbGVudDogZmFsc2VcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gSGFuZGxlIEphdmFTY3JpcHQgZXJyb3JzXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLmhhbmRsZShldmVudC5lcnJvciB8fCBuZXcgRXJyb3IoZXZlbnQubWVzc2FnZSksIHtcbiAgICAgICAgY29udGV4dDogJ2phdmFzY3JpcHQtZXJyb3InLFxuICAgICAgICB1c2VyTWVzc2FnZTogJ0Egc2NyaXB0IGVycm9yIG9jY3VycmVkLiBQbGVhc2UgcmVmcmVzaCB0aGUgcGFnZS4nLFxuICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgIGZpbGVuYW1lOiBldmVudC5maWxlbmFtZSxcbiAgICAgICAgICBsaW5lbm86IGV2ZW50LmxpbmVubyxcbiAgICAgICAgICBjb2xubzogZXZlbnQuY29sbm9cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBjb25zb2xlLmxvZygnRXJyb3JIYW5kbGVyOiBHbG9iYWwgZXJyb3IgaGFuZGxlcnMgaW5pdGlhbGl6ZWQnKTtcbiAgfVxufVxuXG4vLyBDb252ZW5pZW5jZSBmdW5jdGlvbnMgZm9yIGNvbW1vbiBlcnJvciBzY2VuYXJpb3NcbmV4cG9ydCBjb25zdCBoYW5kbGVFcnJvciA9IChlcnJvciwgb3B0aW9ucykgPT4gRXJyb3JIYW5kbGVyLmhhbmRsZShlcnJvciwgb3B0aW9ucyk7XG5leHBvcnQgY29uc3QgaGFuZGxlTmV0d29ya0Vycm9yID0gKGVycm9yLCBvcHRpb25zID0ge30pID0+IFxuICBFcnJvckhhbmRsZXIuaGFuZGxlKGVycm9yLCB7IC4uLm9wdGlvbnMsIGNvbnRleHQ6ICduZXR3b3JrJyB9KTtcbmV4cG9ydCBjb25zdCBoYW5kbGVWYWxpZGF0aW9uRXJyb3IgPSAoZXJyb3IsIG9wdGlvbnMgPSB7fSkgPT4gXG4gIEVycm9ySGFuZGxlci5oYW5kbGUoZXJyb3IsIHsgLi4ub3B0aW9ucywgY29udGV4dDogJ3ZhbGlkYXRpb24nIH0pO1xuZXhwb3J0IGNvbnN0IGNyZWF0ZUVycm9yQm91bmRhcnkgPSAob3BlcmF0aW9uLCBvcHRpb25zKSA9PiBcbiAgRXJyb3JIYW5kbGVyLmNyZWF0ZUVycm9yQm91bmRhcnkob3BlcmF0aW9uLCBvcHRpb25zKTtcbmV4cG9ydCBjb25zdCBoYW5kbGVGZXRjaEVycm9yID0gKHJlc3BvbnNlLCBvcHRpb25zKSA9PiBcbiAgRXJyb3JIYW5kbGVyLmhhbmRsZUZldGNoRXJyb3IocmVzcG9uc2UsIG9wdGlvbnMpO1xuXG4vLyBJbml0aWFsaXplIGdsb2JhbCBoYW5kbGVycyB3aGVuIG1vZHVsZSBsb2Fkc1xuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gIEVycm9ySGFuZGxlci5zZXR1cEdsb2JhbEhhbmRsZXJzKCk7XG59IiwgIi8qKlxuICogTm90aWZpY2F0aW9uTWFuYWdlciAtIFVuaWZpZWQgdG9hc3Qgbm90aWZpY2F0aW9uIHN5c3RlbVxuICogUHJvdmlkZXMgY29uc2lzdGVudCBub3RpZmljYXRpb25zIHdpdGggYWNjZXNzaWJpbGl0eSBhbmQgY3VzdG9taXphdGlvblxuICovXG5cbmltcG9ydCB7IGFubm91bmNlVG9TY3JlZW5SZWFkZXIsIG1vdGlvbiB9IGZyb20gJy4vYWNjZXNzaWJpbGl0eS5qcyc7XG5pbXBvcnQgeyBhbmltYXRpb25CcmlkZ2UgfSBmcm9tICcuLi9jb3JlL0FuaW1hdGlvbkJyaWRnZS5qcyc7XG5pbXBvcnQgeyBzYW5pdGl6ZUhUTUwsIGVzY2FwZUhUTUwgfSBmcm9tICcuL3Nhbml0aXplLmpzJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBOb3RpZmljYXRpb25PcHRpb25zXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3R5cGVdIC0gTm90aWZpY2F0aW9uIHR5cGUgKCdzdWNjZXNzJywgJ2Vycm9yJywgJ3dhcm5pbmcnLCAnaW5mbycpXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uXSAtIEF1dG8tZGlzbWlzcyBkdXJhdGlvbiBpbiBtcyAoMCA9IG5vIGF1dG8tZGlzbWlzcylcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbcG9zaXRpb25dIC0gUG9zaXRpb24gKCd0b3AtcmlnaHQnLCAndG9wLWxlZnQnLCAnYm90dG9tLXJpZ2h0JywgJ2JvdHRvbS1sZWZ0JywgJ3RvcC1jZW50ZXInLCAnYm90dG9tLWNlbnRlcicpXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtwZXJzaXN0ZW50XSAtIFdoZXRoZXIgbm90aWZpY2F0aW9uIHJlcXVpcmVzIG1hbnVhbCBkaXNtaXNzYWxcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2Rpc21pc3NpYmxlXSAtIFdoZXRoZXIgbm90aWZpY2F0aW9uIGNhbiBiZSBkaXNtaXNzZWRcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbYWN0aW9uXSAtIEFjdGlvbiBidXR0b24gdGV4dFxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gW29uQWN0aW9uXSAtIEFjdGlvbiBidXR0b24gY2FsbGJhY2tcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IFtvbkRpc21pc3NdIC0gRGlzbWlzcyBjYWxsYmFja1xuICogQHByb3BlcnR5IHtib29sZWFufSBbYW5ub3VuY2VdIC0gV2hldGhlciB0byBhbm5vdW5jZSB0byBzY3JlZW4gcmVhZGVyc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IFtpY29uXSAtIEN1c3RvbSBpY29uIEhUTUwgb3IgaWNvbiBjbGFzc1xuICogQHByb3BlcnR5IHtPYmplY3R9IFttZXRhZGF0YV0gLSBBZGRpdGlvbmFsIG1ldGFkYXRhIGZvciB0cmFja2luZ1xuICovXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gTm90aWZpY2F0aW9uSW5zdGFuY2VcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBpZCAtIFVuaXF1ZSBub3RpZmljYXRpb24gSURcbiAqIEBwcm9wZXJ0eSB7SFRNTEVsZW1lbnR9IGVsZW1lbnQgLSBOb3RpZmljYXRpb24gRE9NIGVsZW1lbnRcbiAqIEBwcm9wZXJ0eSB7Tm90aWZpY2F0aW9uT3B0aW9uc30gb3B0aW9ucyAtIENvbmZpZ3VyYXRpb24gb3B0aW9uc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IHRpbWVzdGFtcCAtIENyZWF0aW9uIHRpbWVzdGFtcFxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0aW1lb3V0SWRdIC0gQXV0by1kaXNtaXNzIHRpbWVvdXQgSURcbiAqL1xuXG5leHBvcnQgY2xhc3MgTm90aWZpY2F0aW9uTWFuYWdlciB7XG4gIHN0YXRpYyBub3RpZmljYXRpb25zID0gbmV3IE1hcCgpO1xuICBzdGF0aWMgY29udGFpbmVycyA9IG5ldyBNYXAoKTtcbiAgc3RhdGljIG5vdGlmaWNhdGlvbklkID0gMDtcbiAgc3RhdGljIG1heE5vdGlmaWNhdGlvbnMgPSA1O1xuICBzdGF0aWMgaW5pdGlhbGl6ZWQgPSBmYWxzZTtcblxuICAvLyBEZWZhdWx0IGR1cmF0aW9ucyBieSB0eXBlIChtaWxsaXNlY29uZHMpXG4gIHN0YXRpYyBEZWZhdWx0RHVyYXRpb25zID0ge1xuICAgIHN1Y2Nlc3M6IDQwMDAsXG4gICAgZXJyb3I6IDYwMDAsXG4gICAgd2FybmluZzogNTAwMCxcbiAgICBpbmZvOiA0MDAwXG4gIH07XG5cbiAgLy8gRGVmYXVsdCBpY29ucyBieSB0eXBlXG4gIHN0YXRpYyBEZWZhdWx0SWNvbnMgPSB7XG4gICAgc3VjY2VzczogYDxzdmcgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIGNsYXNzPVwidy01IGgtNVwiPlxuICAgICAgPHBhdGggZD1cIk0yMCA2TDkgMTdsLTUtNVwiPjwvcGF0aD5cbiAgICA8L3N2Zz5gLFxuICAgIGVycm9yOiBgPHN2ZyB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIgY2xhc3M9XCJ3LTUgaC01XCI+XG4gICAgICA8Y2lyY2xlIGN4PVwiMTJcIiBjeT1cIjEyXCIgcj1cIjEwXCI+PC9jaXJjbGU+XG4gICAgICA8bGluZSB4MT1cIjE1XCIgeTE9XCI5XCIgeDI9XCI5XCIgeTI9XCIxNVwiPjwvbGluZT5cbiAgICAgIDxsaW5lIHgxPVwiOVwiIHkxPVwiOVwiIHgyPVwiMTVcIiB5Mj1cIjE1XCI+PC9saW5lPlxuICAgIDwvc3ZnPmAsXG4gICAgd2FybmluZzogYDxzdmcgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIGNsYXNzPVwidy01IGgtNVwiPlxuICAgICAgPHBhdGggZD1cIk0xMC4yOSAzLjg2TDEuODIgMThhMiAyIDAgMCAwIDEuNzEgM2gxNi45NGEyIDIgMCAwIDAgMS43MS0zTDEzLjcxIDMuODZhMiAyIDAgMCAwLTMuNDIgMHpcIj48L3BhdGg+XG4gICAgICA8bGluZSB4MT1cIjEyXCIgeTE9XCI5XCIgeDI9XCIxMlwiIHkyPVwiMTNcIj48L2xpbmU+XG4gICAgICA8bGluZSB4MT1cIjEyXCIgeTE9XCIxN1wiIHgyPVwiMTIuMDFcIiB5Mj1cIjE3XCI+PC9saW5lPlxuICAgIDwvc3ZnPmAsXG4gICAgaW5mbzogYDxzdmcgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIGNsYXNzPVwidy01IGgtNVwiPlxuICAgICAgPGNpcmNsZSBjeD1cIjEyXCIgY3k9XCIxMlwiIHI9XCIxMFwiPjwvY2lyY2xlPlxuICAgICAgPGxpbmUgeDE9XCIxMlwiIHkxPVwiMTZcIiB4Mj1cIjEyXCIgeTI9XCIxMlwiPjwvbGluZT5cbiAgICAgIDxsaW5lIHgxPVwiMTJcIiB5MT1cIjhcIiB4Mj1cIjEyLjAxXCIgeTI9XCI4XCI+PC9saW5lPlxuICAgIDwvc3ZnPmBcbiAgfTtcblxuICAvKipcbiAgICogU2hvdyBhIG5vdGlmaWNhdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSAtIE5vdGlmaWNhdGlvbiBtZXNzYWdlXG4gICAqIEBwYXJhbSB7c3RyaW5nfE5vdGlmaWNhdGlvbk9wdGlvbnN9IHR5cGVPck9wdGlvbnMgLSBUeXBlIHN0cmluZyBvciBmdWxsIG9wdGlvbnMgb2JqZWN0XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbZHVyYXRpb25dIC0gRHVyYXRpb24gb3ZlcnJpZGVcbiAgICogQHJldHVybnMge3N0cmluZ30gLSBOb3RpZmljYXRpb24gSURcbiAgICovXG4gIHN0YXRpYyBzaG93KG1lc3NhZ2UsIHR5cGVPck9wdGlvbnMgPSAnaW5mbycsIGR1cmF0aW9uID0gbnVsbCkge1xuICAgIC8vIEhhbmRsZSBsZWdhY3kgQVBJIChtZXNzYWdlLCB0eXBlLCBkdXJhdGlvbilcbiAgICBjb25zdCBvcHRpb25zID0gdHlwZW9mIHR5cGVPck9wdGlvbnMgPT09ICdzdHJpbmcnIFxuICAgICAgPyB7IHR5cGU6IHR5cGVPck9wdGlvbnMsIGR1cmF0aW9uIH1cbiAgICAgIDogdHlwZU9yT3B0aW9ucztcblxuICAgIGNvbnN0IGNvbmZpZyA9IHtcbiAgICAgIHR5cGU6ICdpbmZvJyxcbiAgICAgIGR1cmF0aW9uOiBudWxsLCAvLyBXaWxsIHVzZSBkZWZhdWx0IGJhc2VkIG9uIHR5cGVcbiAgICAgIHBvc2l0aW9uOiAndG9wLXJpZ2h0JyxcbiAgICAgIHBlcnNpc3RlbnQ6IGZhbHNlLFxuICAgICAgZGlzbWlzc2libGU6IHRydWUsXG4gICAgICBhbm5vdW5jZTogdHJ1ZSxcbiAgICAgIGljb246IG51bGwsXG4gICAgICBhY3Rpb246IG51bGwsXG4gICAgICBvbkFjdGlvbjogbnVsbCxcbiAgICAgIG9uRGlzbWlzczogbnVsbCxcbiAgICAgIG1ldGFkYXRhOiB7fSxcbiAgICAgIC4uLm9wdGlvbnNcbiAgICB9O1xuXG4gICAgLy8gU2V0IGRlZmF1bHQgZHVyYXRpb24gaWYgbm90IHNwZWNpZmllZFxuICAgIGlmIChjb25maWcuZHVyYXRpb24gPT09IG51bGwpIHtcbiAgICAgIGNvbmZpZy5kdXJhdGlvbiA9IGNvbmZpZy5wZXJzaXN0ZW50ID8gMCA6IHRoaXMuRGVmYXVsdER1cmF0aW9uc1tjb25maWcudHlwZV07XG4gICAgfVxuXG4gICAgLy8gSW5pdGlhbGl6ZSBpZiBuZWVkZWRcbiAgICBpZiAoIXRoaXMuaW5pdGlhbGl6ZWQpIHtcbiAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgIH1cblxuICAgIC8vIEdlbmVyYXRlIHVuaXF1ZSBJRFxuICAgIGNvbnN0IG5vdGlmaWNhdGlvbklkID0gYG5vdGlmaWNhdGlvbi0keysrdGhpcy5ub3RpZmljYXRpb25JZH1gO1xuICAgIFxuICAgIC8vIENyZWF0ZSBub3RpZmljYXRpb24gZWxlbWVudFxuICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLmNyZWF0ZUVsZW1lbnQobm90aWZpY2F0aW9uSWQsIG1lc3NhZ2UsIGNvbmZpZyk7XG4gICAgXG4gICAgLy8gR2V0IG9yIGNyZWF0ZSBjb250YWluZXIgZm9yIHBvc2l0aW9uXG4gICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5nZXRDb250YWluZXIoY29uZmlnLnBvc2l0aW9uKTtcbiAgICBcbiAgICAvLyBNYW5hZ2Ugbm90aWZpY2F0aW9uIHF1ZXVlXG4gICAgdGhpcy5tYW5hZ2VRdWV1ZShjb25maWcucG9zaXRpb24pO1xuICAgIFxuICAgIC8vIEFkZCB0byBjb250YWluZXIgd2l0aCBhbmltYXRpb25cbiAgICB0aGlzLmFkZFRvQ29udGFpbmVyKGNvbnRhaW5lciwgZWxlbWVudCwgY29uZmlnKTtcbiAgICBcbiAgICAvLyBTZXR1cCBhdXRvLWRpc21pc3NcbiAgICBsZXQgdGltZW91dElkID0gbnVsbDtcbiAgICBpZiAoY29uZmlnLmR1cmF0aW9uID4gMCkge1xuICAgICAgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMuZGlzbWlzcyhub3RpZmljYXRpb25JZCk7XG4gICAgICB9LCBjb25maWcuZHVyYXRpb24pO1xuICAgIH1cbiAgICBcbiAgICAvLyBTdG9yZSBub3RpZmljYXRpb24gaW5zdGFuY2VcbiAgICBjb25zdCBub3RpZmljYXRpb24gPSB7XG4gICAgICBpZDogbm90aWZpY2F0aW9uSWQsXG4gICAgICBlbGVtZW50LFxuICAgICAgb3B0aW9uczogY29uZmlnLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgdGltZW91dElkXG4gICAgfTtcbiAgICBcbiAgICB0aGlzLm5vdGlmaWNhdGlvbnMuc2V0KG5vdGlmaWNhdGlvbklkLCBub3RpZmljYXRpb24pO1xuICAgIFxuICAgIC8vIEFubm91bmNlIHRvIHNjcmVlbiByZWFkZXJzXG4gICAgaWYgKGNvbmZpZy5hbm5vdW5jZSkge1xuICAgICAgY29uc3QgYW5ub3VuY2VtZW50ID0gYCR7Y29uZmlnLnR5cGV9IG5vdGlmaWNhdGlvbjogJHttZXNzYWdlfWA7XG4gICAgICBhbm5vdW5jZVRvU2NyZWVuUmVhZGVyKGFubm91bmNlbWVudCk7XG4gICAgfVxuICAgIFxuICAgIC8vIFRyYWNrIG5vdGlmaWNhdGlvbiBmb3IgYW5hbHl0aWNzXG4gICAgdGhpcy50cmFja05vdGlmaWNhdGlvbignc2hvdycsIG5vdGlmaWNhdGlvbik7XG4gICAgXG4gICAgcmV0dXJuIG5vdGlmaWNhdGlvbklkO1xuICB9XG5cbiAgLyoqXG4gICAqIERpc21pc3MgYSBub3RpZmljYXRpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IG5vdGlmaWNhdGlvbklkIC0gTm90aWZpY2F0aW9uIElEIHRvIGRpc21pc3NcbiAgICogQHBhcmFtIHtib29sZWFufSBbdXNlclRyaWdnZXJlZF0gLSBXaGV0aGVyIGRpc21pc3NhbCB3YXMgdXNlci10cmlnZ2VyZWRcbiAgICovXG4gIHN0YXRpYyBkaXNtaXNzKG5vdGlmaWNhdGlvbklkLCB1c2VyVHJpZ2dlcmVkID0gZmFsc2UpIHtcbiAgICBjb25zdCBub3RpZmljYXRpb24gPSB0aGlzLm5vdGlmaWNhdGlvbnMuZ2V0KG5vdGlmaWNhdGlvbklkKTtcbiAgICBpZiAoIW5vdGlmaWNhdGlvbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHsgZWxlbWVudCwgb3B0aW9ucywgdGltZW91dElkIH0gPSBub3RpZmljYXRpb247XG5cbiAgICAvLyBDbGVhciBhdXRvLWRpc21pc3MgdGltZW91dFxuICAgIGlmICh0aW1lb3V0SWQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgIH1cblxuICAgIC8vIENhbGwgZGlzbWlzcyBjYWxsYmFja1xuICAgIGlmIChvcHRpb25zLm9uRGlzbWlzcykge1xuICAgICAgb3B0aW9ucy5vbkRpc21pc3Mobm90aWZpY2F0aW9uSWQsIHVzZXJUcmlnZ2VyZWQpO1xuICAgIH1cblxuICAgIC8vIEFuaW1hdGUgb3V0XG4gICAgdGhpcy5hbmltYXRlT3V0KGVsZW1lbnQsICgpID0+IHtcbiAgICAgIC8vIFJlbW92ZSBmcm9tIERPTVxuICAgICAgaWYgKGVsZW1lbnQucGFyZW50Tm9kZSkge1xuICAgICAgICBlbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWxlbWVudCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENsZWFuIHVwIGNvbnRhaW5lciBpZiBlbXB0eVxuICAgICAgdGhpcy5jbGVhbnVwQ29udGFpbmVyKGVsZW1lbnQuY2xvc2VzdCgnLm5vdGlmaWNhdGlvbi1jb250YWluZXInKSk7XG4gICAgfSk7XG5cbiAgICAvLyBSZW1vdmUgZnJvbSB0cmFja2luZ1xuICAgIHRoaXMubm90aWZpY2F0aW9ucy5kZWxldGUobm90aWZpY2F0aW9uSWQpO1xuICAgIFxuICAgIC8vIFRyYWNrIGRpc21pc3NhbFxuICAgIHRoaXMudHJhY2tOb3RpZmljYXRpb24oJ2Rpc21pc3MnLCBub3RpZmljYXRpb24sIHsgdXNlclRyaWdnZXJlZCB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNtaXNzIGFsbCBub3RpZmljYXRpb25zXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbcG9zaXRpb25dIC0gU3BlY2lmaWMgcG9zaXRpb24gdG8gY2xlYXIgKG9wdGlvbmFsKVxuICAgKi9cbiAgc3RhdGljIGRpc21pc3NBbGwocG9zaXRpb24gPSBudWxsKSB7XG4gICAgZm9yIChjb25zdCBbaWQsIG5vdGlmaWNhdGlvbl0gb2YgdGhpcy5ub3RpZmljYXRpb25zKSB7XG4gICAgICBpZiAoIXBvc2l0aW9uIHx8IG5vdGlmaWNhdGlvbi5vcHRpb25zLnBvc2l0aW9uID09PSBwb3NpdGlvbikge1xuICAgICAgICB0aGlzLmRpc21pc3MoaWQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgbm90aWZpY2F0aW9uIGVsZW1lbnRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIC0gTm90aWZpY2F0aW9uIElEXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIC0gTWVzc2FnZSB0ZXh0XG4gICAqIEBwYXJhbSB7Tm90aWZpY2F0aW9uT3B0aW9uc30gb3B0aW9ucyAtIENvbmZpZ3VyYXRpb25cbiAgICogQHJldHVybnMge0hUTUxFbGVtZW50fVxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZUVsZW1lbnQoaWQsIG1lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBub3RpZmljYXRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBub3RpZmljYXRpb24uaWQgPSBpZDtcbiAgICBub3RpZmljYXRpb24uY2xhc3NOYW1lID0gYG5vdGlmaWNhdGlvbiBub3RpZmljYXRpb24tLSR7b3B0aW9ucy50eXBlfWA7XG4gICAgbm90aWZpY2F0aW9uLnNldEF0dHJpYnV0ZSgncm9sZScsICdhbGVydCcpO1xuICAgIG5vdGlmaWNhdGlvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGl2ZScsICdwb2xpdGUnKTtcblxuICAgIC8vIEFkZCBpY29uXG4gICAgY29uc3QgaWNvbiA9IG9wdGlvbnMuaWNvbiB8fCB0aGlzLkRlZmF1bHRJY29uc1tvcHRpb25zLnR5cGVdO1xuICAgIFxuICAgIC8vIEFkZCBhY3Rpb24gYnV0dG9uIGlmIHNwZWNpZmllZFxuICAgIGNvbnN0IGFjdGlvbkJ1dHRvbiA9IG9wdGlvbnMuYWN0aW9uID8gYFxuICAgICAgPGJ1dHRvbiBjbGFzcz1cIm5vdGlmaWNhdGlvbl9fYWN0aW9uXCIgYXJpYS1sYWJlbD1cIiR7ZXNjYXBlSFRNTChvcHRpb25zLmFjdGlvbil9XCI+XG4gICAgICAgICR7ZXNjYXBlSFRNTChvcHRpb25zLmFjdGlvbil9XG4gICAgICA8L2J1dHRvbj5cbiAgICBgIDogJyc7XG5cbiAgICAvLyBBZGQgZGlzbWlzcyBidXR0b24gaWYgZGlzbWlzc2libGVcbiAgICBjb25zdCBkaXNtaXNzQnV0dG9uID0gb3B0aW9ucy5kaXNtaXNzaWJsZSA/IGBcbiAgICAgIDxidXR0b24gY2xhc3M9XCJub3RpZmljYXRpb25fX2Rpc21pc3NcIiBhcmlhLWxhYmVsPVwiRGlzbWlzcyBub3RpZmljYXRpb25cIj5cbiAgICAgICAgPHN2ZyB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIgY2xhc3M9XCJ3LTQgaC00XCI+XG4gICAgICAgICAgPGxpbmUgeDE9XCIxOFwiIHkxPVwiNlwiIHgyPVwiNlwiIHkyPVwiMThcIj48L2xpbmU+XG4gICAgICAgICAgPGxpbmUgeDE9XCI2XCIgeTE9XCI2XCIgeDI9XCIxOFwiIHkyPVwiMThcIj48L2xpbmU+XG4gICAgICAgIDwvc3ZnPlxuICAgICAgPC9idXR0b24+XG4gICAgYCA6ICcnO1xuXG4gICAgLy8gQnVpbGQgaW5uZXIgY29udGVudCBzYWZlbHlcbiAgICBjb25zdCBjb250ZW50SFRNTCA9IGBcbiAgICAgIDxkaXYgY2xhc3M9XCJub3RpZmljYXRpb25fX2NvbnRlbnRcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cIm5vdGlmaWNhdGlvbl9faWNvblwiPiR7aWNvbn08L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cIm5vdGlmaWNhdGlvbl9fbWVzc2FnZVwiPiR7ZXNjYXBlSFRNTChtZXNzYWdlKX08L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cIm5vdGlmaWNhdGlvbl9fYWN0aW9uc1wiPlxuICAgICAgICAke2FjdGlvbkJ1dHRvbn1cbiAgICAgICAgJHtkaXNtaXNzQnV0dG9ufVxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgICBub3RpZmljYXRpb24uaW5uZXJIVE1MID0gc2FuaXRpemVIVE1MKGNvbnRlbnRIVE1MKTtcblxuICAgIC8vIEJpbmQgZXZlbnQgaGFuZGxlcnNcbiAgICB0aGlzLmJpbmRFdmVudEhhbmRsZXJzKG5vdGlmaWNhdGlvbiwgaWQsIG9wdGlvbnMpO1xuXG4gICAgcmV0dXJuIG5vdGlmaWNhdGlvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBCaW5kIGV2ZW50IGhhbmRsZXJzIHRvIG5vdGlmaWNhdGlvblxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50IC0gTm90aWZpY2F0aW9uIGVsZW1lbnRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIC0gTm90aWZpY2F0aW9uIElEXG4gICAqIEBwYXJhbSB7Tm90aWZpY2F0aW9uT3B0aW9uc30gb3B0aW9ucyAtIENvbmZpZ3VyYXRpb25cbiAgICovXG4gIHN0YXRpYyBiaW5kRXZlbnRIYW5kbGVycyhlbGVtZW50LCBpZCwgb3B0aW9ucykge1xuICAgIC8vIEFjdGlvbiBidXR0b25cbiAgICBjb25zdCBhY3Rpb25CdXR0b24gPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ub3RpZmljYXRpb25fX2FjdGlvbicpO1xuICAgIGlmIChhY3Rpb25CdXR0b24gJiYgb3B0aW9ucy5vbkFjdGlvbikge1xuICAgICAgYWN0aW9uQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBvcHRpb25zLm9uQWN0aW9uKGlkKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIERpc21pc3MgYnV0dG9uXG4gICAgY29uc3QgZGlzbWlzc0J1dHRvbiA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLm5vdGlmaWNhdGlvbl9fZGlzbWlzcycpO1xuICAgIGlmIChkaXNtaXNzQnV0dG9uKSB7XG4gICAgICBkaXNtaXNzQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLmRpc21pc3MoaWQsIHRydWUpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gUGF1c2UgYXV0by1kaXNtaXNzIG9uIGhvdmVyXG4gICAgaWYgKG9wdGlvbnMuZHVyYXRpb24gPiAwKSB7XG4gICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiB7XG4gICAgICAgIHRoaXMucGF1c2VBdXRvRGlzbWlzcyhpZCk7XG4gICAgICB9KTtcblxuICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4ge1xuICAgICAgICB0aGlzLnJlc3VtZUF1dG9EaXNtaXNzKGlkKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEtleWJvYXJkIG5hdmlnYXRpb25cbiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgICAgaWYgKGUua2V5ID09PSAnRXNjYXBlJyAmJiBvcHRpb25zLmRpc21pc3NpYmxlKSB7XG4gICAgICAgIHRoaXMuZGlzbWlzcyhpZCwgdHJ1ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IG9yIGNyZWF0ZSBjb250YWluZXIgZm9yIHBvc2l0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwb3NpdGlvbiAtIENvbnRhaW5lciBwb3NpdGlvblxuICAgKiBAcmV0dXJucyB7SFRNTEVsZW1lbnR9XG4gICAqL1xuICBzdGF0aWMgZ2V0Q29udGFpbmVyKHBvc2l0aW9uKSB7XG4gICAgaWYgKHRoaXMuY29udGFpbmVycy5oYXMocG9zaXRpb24pKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb250YWluZXJzLmdldChwb3NpdGlvbik7XG4gICAgfVxuXG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29udGFpbmVyLmNsYXNzTmFtZSA9IGBub3RpZmljYXRpb24tY29udGFpbmVyIG5vdGlmaWNhdGlvbi1jb250YWluZXItLSR7cG9zaXRpb259YDtcbiAgICBjb250YWluZXIuc2V0QXR0cmlidXRlKCdhcmlhLWxpdmUnLCAncG9saXRlJyk7XG4gICAgY29udGFpbmVyLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsICdOb3RpZmljYXRpb25zJyk7XG5cbiAgICAvLyBQb3NpdGlvbiBjb250YWluZXJcbiAgICB0aGlzLnBvc2l0aW9uQ29udGFpbmVyKGNvbnRhaW5lciwgcG9zaXRpb24pO1xuXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuICAgIHRoaXMuY29udGFpbmVycy5zZXQocG9zaXRpb24sIGNvbnRhaW5lcik7XG5cbiAgICByZXR1cm4gY29udGFpbmVyO1xuICB9XG5cbiAgLyoqXG4gICAqIFBvc2l0aW9uIGNvbnRhaW5lciBiYXNlZCBvbiBwb3NpdGlvbiBzdHJpbmdcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY29udGFpbmVyIC0gQ29udGFpbmVyIGVsZW1lbnRcbiAgICogQHBhcmFtIHtzdHJpbmd9IHBvc2l0aW9uIC0gUG9zaXRpb24gaWRlbnRpZmllclxuICAgKi9cbiAgc3RhdGljIHBvc2l0aW9uQ29udGFpbmVyKGNvbnRhaW5lciwgcG9zaXRpb24pIHtcbiAgICBjb25zdCBiYXNlU3R5bGVzID0ge1xuICAgICAgcG9zaXRpb246ICdmaXhlZCcsXG4gICAgICB6SW5kZXg6ICc5OTk5JyxcbiAgICAgIHBvaW50ZXJFdmVudHM6ICdub25lJyxcbiAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLFxuICAgICAgZ2FwOiAnMC43NXJlbScsXG4gICAgICBwYWRkaW5nOiAnMXJlbScsXG4gICAgICBtYXhXaWR0aDogJzI0cmVtJ1xuICAgIH07XG5cbiAgICBjb25zdCBwb3NpdGlvblN0eWxlcyA9IHtcbiAgICAgICd0b3AtcmlnaHQnOiB7IHRvcDogJzAnLCByaWdodDogJzAnIH0sXG4gICAgICAndG9wLWxlZnQnOiB7IHRvcDogJzAnLCBsZWZ0OiAnMCcgfSxcbiAgICAgICdib3R0b20tcmlnaHQnOiB7IGJvdHRvbTogJzAnLCByaWdodDogJzAnLCBmbGV4RGlyZWN0aW9uOiAnY29sdW1uLXJldmVyc2UnIH0sXG4gICAgICAnYm90dG9tLWxlZnQnOiB7IGJvdHRvbTogJzAnLCBsZWZ0OiAnMCcsIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4tcmV2ZXJzZScgfSxcbiAgICAgICd0b3AtY2VudGVyJzogeyB0b3A6ICcwJywgbGVmdDogJzUwJScsIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoLTUwJSknIH0sXG4gICAgICAnYm90dG9tLWNlbnRlcic6IHsgYm90dG9tOiAnMCcsIGxlZnQ6ICc1MCUnLCB0cmFuc2Zvcm06ICd0cmFuc2xhdGVYKC01MCUpJywgZmxleERpcmVjdGlvbjogJ2NvbHVtbi1yZXZlcnNlJyB9XG4gICAgfTtcblxuICAgIGNvbnN0IHN0eWxlcyA9IHsgLi4uYmFzZVN0eWxlcywgLi4ucG9zaXRpb25TdHlsZXNbcG9zaXRpb25dIH07XG4gICAgXG4gICAgT2JqZWN0LmFzc2lnbihjb250YWluZXIuc3R5bGUsIHN0eWxlcyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIG5vdGlmaWNhdGlvbiB0byBjb250YWluZXIgd2l0aCBhbmltYXRpb25cbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY29udGFpbmVyIC0gVGFyZ2V0IGNvbnRhaW5lclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50IC0gTm90aWZpY2F0aW9uIGVsZW1lbnRcbiAgICogQHBhcmFtIHtOb3RpZmljYXRpb25PcHRpb25zfSBvcHRpb25zIC0gQ29uZmlndXJhdGlvblxuICAgKi9cbiAgc3RhdGljIGFkZFRvQ29udGFpbmVyKGNvbnRhaW5lciwgZWxlbWVudCwgb3B0aW9ucykge1xuICAgIC8vIEVuYWJsZSBwb2ludGVyIGV2ZW50cyBmb3IgdGhlIG5vdGlmaWNhdGlvblxuICAgIGVsZW1lbnQuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdhdXRvJztcbiAgICBcbiAgICAvLyBJbnNlcnQgYmFzZWQgb24gY29udGFpbmVyIG9yZGVyXG4gICAgaWYgKG9wdGlvbnMucG9zaXRpb24uaW5jbHVkZXMoJ2JvdHRvbScpKSB7XG4gICAgICBjb250YWluZXIuaW5zZXJ0QmVmb3JlKGVsZW1lbnQsIGNvbnRhaW5lci5maXJzdENoaWxkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgIH1cblxuICAgIC8vIEFuaW1hdGUgaW5cbiAgICB0aGlzLmFuaW1hdGVJbihlbGVtZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbmltYXRlIG5vdGlmaWNhdGlvbiBpblxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50IC0gTm90aWZpY2F0aW9uIGVsZW1lbnRcbiAgICovXG4gIHN0YXRpYyBhbmltYXRlSW4oZWxlbWVudCkge1xuICAgIGlmIChtb3Rpb24ucHJlZmVyc1JlZHVjZWQoKSkge1xuICAgICAgZWxlbWVudC5zdHlsZS5vcGFjaXR5ID0gJzEnO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFNldCBpbml0aWFsIHN0YXRlXG4gICAgZWxlbWVudC5zdHlsZS5vcGFjaXR5ID0gJzAnO1xuICAgIGVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVgoMTAwJSknO1xuICAgIC8vIENTUyBoYW5kbGVzIHRyYW5zaXRpb25zIHZpYSBhbmltYXRpb24gdG9rZW5zXG5cbiAgICAvLyBUcmlnZ2VyIGFuaW1hdGlvblxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICBlbGVtZW50LnN0eWxlLm9wYWNpdHkgPSAnMSc7XG4gICAgICBlbGVtZW50LnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVYKDApJztcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbmltYXRlIG5vdGlmaWNhdGlvbiBvdXRcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudCAtIE5vdGlmaWNhdGlvbiBlbGVtZW50XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIC0gQ29tcGxldGlvbiBjYWxsYmFja1xuICAgKi9cbiAgc3RhdGljIGFuaW1hdGVPdXQoZWxlbWVudCwgY2FsbGJhY2spIHtcbiAgICBpZiAobW90aW9uLnByZWZlcnNSZWR1Y2VkKCkpIHtcbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ1NTIGhhbmRsZXMgdHJhbnNpdGlvbnMgdmlhIGFuaW1hdGlvbiB0b2tlbnNcbiAgICBlbGVtZW50LnN0eWxlLm9wYWNpdHkgPSAnMCc7XG4gICAgZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWCgxMDAlKSc7XG5cbiAgICBjb25zdCBkdXJhdGlvbiA9IGFuaW1hdGlvbkJyaWRnZS5nZXRUaW1pbmcoJ21lZGl1bScpO1xuICAgIHNldFRpbWVvdXQoY2FsbGJhY2ssIGR1cmF0aW9uKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYW5hZ2Ugbm90aWZpY2F0aW9uIHF1ZXVlIHRvIHByZXZlbnQgb3ZlcmZsb3dcbiAgICogQHBhcmFtIHtzdHJpbmd9IHBvc2l0aW9uIC0gQ29udGFpbmVyIHBvc2l0aW9uXG4gICAqL1xuICBzdGF0aWMgbWFuYWdlUXVldWUocG9zaXRpb24pIHtcbiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lcnMuZ2V0KHBvc2l0aW9uKTtcbiAgICBpZiAoIWNvbnRhaW5lcikgcmV0dXJuO1xuXG4gICAgY29uc3Qgbm90aWZpY2F0aW9ucyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcubm90aWZpY2F0aW9uJyk7XG4gICAgXG4gICAgaWYgKG5vdGlmaWNhdGlvbnMubGVuZ3RoID49IHRoaXMubWF4Tm90aWZpY2F0aW9ucykge1xuICAgICAgLy8gUmVtb3ZlIG9sZGVzdCBub3RpZmljYXRpb25cbiAgICAgIGNvbnN0IG9sZGVzdCA9IG5vdGlmaWNhdGlvbnNbMF07XG4gICAgICBjb25zdCBvbGRlc3RJZCA9IG9sZGVzdC5pZDtcbiAgICAgIHRoaXMuZGlzbWlzcyhvbGRlc3RJZCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFBhdXNlIGF1dG8tZGlzbWlzcyBmb3Igbm90aWZpY2F0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBub3RpZmljYXRpb25JZCAtIE5vdGlmaWNhdGlvbiBJRFxuICAgKi9cbiAgc3RhdGljIHBhdXNlQXV0b0Rpc21pc3Mobm90aWZpY2F0aW9uSWQpIHtcbiAgICBjb25zdCBub3RpZmljYXRpb24gPSB0aGlzLm5vdGlmaWNhdGlvbnMuZ2V0KG5vdGlmaWNhdGlvbklkKTtcbiAgICBpZiAobm90aWZpY2F0aW9uICYmIG5vdGlmaWNhdGlvbi50aW1lb3V0SWQpIHtcbiAgICAgIGNsZWFyVGltZW91dChub3RpZmljYXRpb24udGltZW91dElkKTtcbiAgICAgIG5vdGlmaWNhdGlvbi50aW1lb3V0SWQgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXN1bWUgYXV0by1kaXNtaXNzIGZvciBub3RpZmljYXRpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IG5vdGlmaWNhdGlvbklkIC0gTm90aWZpY2F0aW9uIElEXG4gICAqL1xuICBzdGF0aWMgcmVzdW1lQXV0b0Rpc21pc3Mobm90aWZpY2F0aW9uSWQpIHtcbiAgICBjb25zdCBub3RpZmljYXRpb24gPSB0aGlzLm5vdGlmaWNhdGlvbnMuZ2V0KG5vdGlmaWNhdGlvbklkKTtcbiAgICBpZiAobm90aWZpY2F0aW9uICYmIG5vdGlmaWNhdGlvbi5vcHRpb25zLmR1cmF0aW9uID4gMCkge1xuICAgICAgY29uc3QgZWxhcHNlZCA9IERhdGUubm93KCkgLSBub3RpZmljYXRpb24udGltZXN0YW1wO1xuICAgICAgY29uc3QgcmVtYWluaW5nID0gbm90aWZpY2F0aW9uLm9wdGlvbnMuZHVyYXRpb24gLSBlbGFwc2VkO1xuICAgICAgXG4gICAgICBpZiAocmVtYWluaW5nID4gMCkge1xuICAgICAgICBub3RpZmljYXRpb24udGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5kaXNtaXNzKG5vdGlmaWNhdGlvbklkKTtcbiAgICAgICAgfSwgcmVtYWluaW5nKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2xlYW4gdXAgZW1wdHkgY29udGFpbmVyXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNvbnRhaW5lciAtIENvbnRhaW5lciB0byBjaGVja1xuICAgKi9cbiAgc3RhdGljIGNsZWFudXBDb250YWluZXIoY29udGFpbmVyKSB7XG4gICAgaWYgKGNvbnRhaW5lciAmJiBjb250YWluZXIuY2hpbGRyZW4ubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zdCBwb3NpdGlvbiA9IEFycmF5LmZyb20odGhpcy5jb250YWluZXJzLmVudHJpZXMoKSlcbiAgICAgICAgLmZpbmQoKFssIGNdKSA9PiBjID09PSBjb250YWluZXIpPy5bMF07XG4gICAgICBcbiAgICAgIGlmIChwb3NpdGlvbikge1xuICAgICAgICB0aGlzLmNvbnRhaW5lcnMuZGVsZXRlKHBvc2l0aW9uKTtcbiAgICAgICAgY29udGFpbmVyLnJlbW92ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFjayBub3RpZmljYXRpb24gZXZlbnRzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhY3Rpb24gLSBBY3Rpb24gcGVyZm9ybWVkXG4gICAqIEBwYXJhbSB7Tm90aWZpY2F0aW9uSW5zdGFuY2V9IG5vdGlmaWNhdGlvbiAtIE5vdGlmaWNhdGlvbiBpbnN0YW5jZVxuICAgKiBAcGFyYW0ge09iamVjdH0gW2V4dHJhXSAtIEFkZGl0aW9uYWwgZGF0YVxuICAgKi9cbiAgc3RhdGljIHRyYWNrTm90aWZpY2F0aW9uKGFjdGlvbiwgbm90aWZpY2F0aW9uLCBleHRyYSA9IHt9KSB7XG4gICAgaWYgKHdpbmRvdy5ldmVudEJ1cykge1xuICAgICAgd2luZG93LmV2ZW50QnVzLmVtaXQoJ25vdGlmaWNhdGlvbjp0cmFja2VkJywge1xuICAgICAgICBhY3Rpb24sXG4gICAgICAgIGlkOiBub3RpZmljYXRpb24uaWQsXG4gICAgICAgIHR5cGU6IG5vdGlmaWNhdGlvbi5vcHRpb25zLnR5cGUsXG4gICAgICAgIHBvc2l0aW9uOiBub3RpZmljYXRpb24ub3B0aW9ucy5wb3NpdGlvbixcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIC4uLmV4dHJhXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSB0aGUgbm90aWZpY2F0aW9uIHN5c3RlbVxuICAgKi9cbiAgc3RhdGljIGluaXRpYWxpemUoKSB7XG4gICAgaWYgKHRoaXMuaW5pdGlhbGl6ZWQpIHJldHVybjtcblxuICAgIC8vIEFkZCBnbG9iYWwgc3R5bGVzXG4gICAgdGhpcy5pbmplY3RTdHlsZXMoKTtcbiAgICBcbiAgICAvLyBTZXR1cCBnbG9iYWwga2V5Ym9hcmQgaGFuZGxlcnNcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcbiAgICAgIGlmIChlLmtleSA9PT0gJ0VzY2FwZScgJiYgZS5jdHJsS2V5KSB7XG4gICAgICAgIHRoaXMuZGlzbWlzc0FsbCgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5pbml0aWFsaXplZCA9IHRydWU7XG4gICAgY29uc29sZS5sb2coJ05vdGlmaWNhdGlvbk1hbmFnZXI6IEluaXRpYWxpemVkJyk7XG4gIH1cblxuICAvKipcbiAgICogSW5qZWN0IENTUyBzdHlsZXMgZm9yIG5vdGlmaWNhdGlvbnNcbiAgICovXG4gIHN0YXRpYyBpbmplY3RTdHlsZXMoKSB7XG4gICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdub3RpZmljYXRpb24tc3R5bGVzJykpIHtcbiAgICAgIHJldHVybjsgLy8gQWxyZWFkeSBpbmplY3RlZFxuICAgIH1cblxuICAgIGNvbnN0IHN0eWxlcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgc3R5bGVzLmlkID0gJ25vdGlmaWNhdGlvbi1zdHlsZXMnO1xuICAgIHN0eWxlcy50ZXh0Q29udGVudCA9IGBcbiAgICAgIC5ub3RpZmljYXRpb24ge1xuICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMC41cmVtO1xuICAgICAgICBib3gtc2hhZG93OiAwIDEwcHggMjVweCByZ2JhKDAsIDAsIDAsIDAuMSk7XG4gICAgICAgIHBhZGRpbmc6IDFyZW07XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0O1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgIG1pbi13aWR0aDogMjByZW07XG4gICAgICAgIG1heC13aWR0aDogMjRyZW07XG4gICAgICAgIGJvcmRlci1sZWZ0OiA0cHggc29saWQ7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCB2YXIoLS10aW1pbmctbWVkaXVtKSB2YXIoLS1lYXNpbmctc3RhbmRhcmQpO1xuICAgICAgfVxuXG4gICAgICAubm90aWZpY2F0aW9uOmhvdmVyIHtcbiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0ycHgpO1xuICAgICAgICBib3gtc2hhZG93OiAwIDE1cHggMzVweCByZ2JhKDAsIDAsIDAsIDAuMTUpO1xuICAgICAgfVxuXG4gICAgICAubm90aWZpY2F0aW9uLS1zdWNjZXNzIHtcbiAgICAgICAgYm9yZGVyLWxlZnQtY29sb3I6ICMxMGI5ODE7XG4gICAgICAgIGJhY2tncm91bmQ6ICNmMGZkZjQ7XG4gICAgICB9XG5cbiAgICAgIC5ub3RpZmljYXRpb24tLWVycm9yIHtcbiAgICAgICAgYm9yZGVyLWxlZnQtY29sb3I6ICNlZjQ0NDQ7XG4gICAgICAgIGJhY2tncm91bmQ6ICNmZWYyZjI7XG4gICAgICB9XG5cbiAgICAgIC5ub3RpZmljYXRpb24tLXdhcm5pbmcge1xuICAgICAgICBib3JkZXItbGVmdC1jb2xvcjogI2Y1OWUwYjtcbiAgICAgICAgYmFja2dyb3VuZDogI2ZmZmJlYjtcbiAgICAgIH1cblxuICAgICAgLm5vdGlmaWNhdGlvbi0taW5mbyB7XG4gICAgICAgIGJvcmRlci1sZWZ0LWNvbG9yOiAjM2I4MmY2O1xuICAgICAgICBiYWNrZ3JvdW5kOiAjZWZmNmZmO1xuICAgICAgfVxuXG4gICAgICAubm90aWZpY2F0aW9uX19jb250ZW50IHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7XG4gICAgICAgIGdhcDogMC43NXJlbTtcbiAgICAgICAgZmxleDogMTtcbiAgICAgIH1cblxuICAgICAgLm5vdGlmaWNhdGlvbl9faWNvbiB7XG4gICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICBtYXJnaW4tdG9wOiAwLjEyNXJlbTtcbiAgICAgIH1cblxuICAgICAgLm5vdGlmaWNhdGlvbi0tc3VjY2VzcyAubm90aWZpY2F0aW9uX19pY29uIHtcbiAgICAgICAgY29sb3I6ICMxMGI5ODE7XG4gICAgICB9XG5cbiAgICAgIC5ub3RpZmljYXRpb24tLWVycm9yIC5ub3RpZmljYXRpb25fX2ljb24ge1xuICAgICAgICBjb2xvcjogI2VmNDQ0NDtcbiAgICAgIH1cblxuICAgICAgLm5vdGlmaWNhdGlvbi0td2FybmluZyAubm90aWZpY2F0aW9uX19pY29uIHtcbiAgICAgICAgY29sb3I6ICNmNTllMGI7XG4gICAgICB9XG5cbiAgICAgIC5ub3RpZmljYXRpb24tLWluZm8gLm5vdGlmaWNhdGlvbl9faWNvbiB7XG4gICAgICAgIGNvbG9yOiAjM2I4MmY2O1xuICAgICAgfVxuXG4gICAgICAubm90aWZpY2F0aW9uX19tZXNzYWdlIHtcbiAgICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDEuNTtcbiAgICAgICAgY29sb3I6ICMzNzQxNTE7XG4gICAgICB9XG5cbiAgICAgIC5ub3RpZmljYXRpb25fX2FjdGlvbnMge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBnYXA6IDAuNXJlbTtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IDAuNzVyZW07XG4gICAgICB9XG5cbiAgICAgIC5ub3RpZmljYXRpb25fX2FjdGlvbiB7XG4gICAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCBjdXJyZW50Q29sb3I7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDAuMjVyZW07XG4gICAgICAgIHBhZGRpbmc6IDAuMjVyZW0gMC41cmVtO1xuICAgICAgICBmb250LXNpemU6IDAuNzVyZW07XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIHZhcigtLXRpbWluZy1mYXN0KSB2YXIoLS1lYXNpbmctc3RhbmRhcmQpO1xuICAgICAgfVxuXG4gICAgICAubm90aWZpY2F0aW9uX19hY3Rpb246aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiBjdXJyZW50Q29sb3I7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgIH1cblxuICAgICAgLm5vdGlmaWNhdGlvbl9fZGlzbWlzcyB7XG4gICAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgIHBhZGRpbmc6IDAuMjVyZW07XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMC4yNXJlbTtcbiAgICAgICAgY29sb3I6ICM2YjcyODA7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCB2YXIoLS10aW1pbmctZmFzdCkgdmFyKC0tZWFzaW5nLXN0YW5kYXJkKTtcbiAgICAgIH1cblxuICAgICAgLm5vdGlmaWNhdGlvbl9fZGlzbWlzczpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgICAgICAgY29sb3I6ICMzNzQxNTE7XG4gICAgICB9XG5cbiAgICAgIEBtZWRpYSAocHJlZmVycy1yZWR1Y2VkLW1vdGlvbjogcmVkdWNlKSB7XG4gICAgICAgIC5ub3RpZmljYXRpb24sXG4gICAgICAgIC5ub3RpZmljYXRpb24gKiB7XG4gICAgICAgICAgdHJhbnNpdGlvbjogbm9uZSAhaW1wb3J0YW50O1xuICAgICAgICAgIGFuaW1hdGlvbjogbm9uZSAhaW1wb3J0YW50O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIEBtZWRpYSAobWF4LXdpZHRoOiA2NDBweCkge1xuICAgICAgICAubm90aWZpY2F0aW9uLWNvbnRhaW5lciB7XG4gICAgICAgICAgbGVmdDogMC41cmVtICFpbXBvcnRhbnQ7XG4gICAgICAgICAgcmlnaHQ6IDAuNXJlbSAhaW1wb3J0YW50O1xuICAgICAgICAgIG1heC13aWR0aDogbm9uZSAhaW1wb3J0YW50O1xuICAgICAgICAgIHRyYW5zZm9ybTogbm9uZSAhaW1wb3J0YW50O1xuICAgICAgICB9XG5cbiAgICAgICAgLm5vdGlmaWNhdGlvbiB7XG4gICAgICAgICAgbWluLXdpZHRoOiBhdXRvO1xuICAgICAgICAgIG1heC13aWR0aDogbm9uZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIGA7XG5cbiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlcyk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IG5vdGlmaWNhdGlvbiBzdGF0aXN0aWNzXG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0U3RhdHMoKSB7XG4gICAgY29uc3Qgc3RhdHMgPSB7XG4gICAgICBhY3RpdmU6IHRoaXMubm90aWZpY2F0aW9ucy5zaXplLFxuICAgICAgYnlUeXBlOiB7fSxcbiAgICAgIGJ5UG9zaXRpb246IHt9LFxuICAgICAgY29udGFpbmVyczogdGhpcy5jb250YWluZXJzLnNpemVcbiAgICB9O1xuXG4gICAgZm9yIChjb25zdCBub3RpZmljYXRpb24gb2YgdGhpcy5ub3RpZmljYXRpb25zLnZhbHVlcygpKSB7XG4gICAgICBjb25zdCB0eXBlID0gbm90aWZpY2F0aW9uLm9wdGlvbnMudHlwZTtcbiAgICAgIGNvbnN0IHBvc2l0aW9uID0gbm90aWZpY2F0aW9uLm9wdGlvbnMucG9zaXRpb247XG4gICAgICBcbiAgICAgIHN0YXRzLmJ5VHlwZVt0eXBlXSA9IChzdGF0cy5ieVR5cGVbdHlwZV0gfHwgMCkgKyAxO1xuICAgICAgc3RhdHMuYnlQb3NpdGlvbltwb3NpdGlvbl0gPSAoc3RhdHMuYnlQb3NpdGlvbltwb3NpdGlvbl0gfHwgMCkgKyAxO1xuICAgIH1cblxuICAgIHJldHVybiBzdGF0cztcbiAgfVxufVxuXG4vLyBDb252ZW5pZW5jZSBmdW5jdGlvbnMgZm9yIGNvbW1vbiBub3RpZmljYXRpb24gdHlwZXNcbmV4cG9ydCBjb25zdCB0b2FzdCA9IChtZXNzYWdlLCB0eXBlID0gJ2luZm8nLCBkdXJhdGlvbiA9IG51bGwpID0+IFxuICBOb3RpZmljYXRpb25NYW5hZ2VyLnNob3cobWVzc2FnZSwgdHlwZSwgZHVyYXRpb24pO1xuXG5leHBvcnQgY29uc3Qgc2hvd1N1Y2Nlc3MgPSAobWVzc2FnZSwgb3B0aW9ucyA9IHt9KSA9PiBcbiAgTm90aWZpY2F0aW9uTWFuYWdlci5zaG93KG1lc3NhZ2UsIHsgdHlwZTogJ3N1Y2Nlc3MnLCAuLi5vcHRpb25zIH0pO1xuXG5leHBvcnQgY29uc3Qgc2hvd0Vycm9yID0gKG1lc3NhZ2UsIG9wdGlvbnMgPSB7fSkgPT4gXG4gIE5vdGlmaWNhdGlvbk1hbmFnZXIuc2hvdyhtZXNzYWdlLCB7IHR5cGU6ICdlcnJvcicsIC4uLm9wdGlvbnMgfSk7XG5cbmV4cG9ydCBjb25zdCBzaG93V2FybmluZyA9IChtZXNzYWdlLCBvcHRpb25zID0ge30pID0+IFxuICBOb3RpZmljYXRpb25NYW5hZ2VyLnNob3cobWVzc2FnZSwgeyB0eXBlOiAnd2FybmluZycsIC4uLm9wdGlvbnMgfSk7XG5cbmV4cG9ydCBjb25zdCBzaG93SW5mbyA9IChtZXNzYWdlLCBvcHRpb25zID0ge30pID0+IFxuICBOb3RpZmljYXRpb25NYW5hZ2VyLnNob3cobWVzc2FnZSwgeyB0eXBlOiAnaW5mbycsIC4uLm9wdGlvbnMgfSk7XG5cbmV4cG9ydCBjb25zdCBkaXNtaXNzTm90aWZpY2F0aW9uID0gKGlkKSA9PiBOb3RpZmljYXRpb25NYW5hZ2VyLmRpc21pc3MoaWQpO1xuZXhwb3J0IGNvbnN0IGRpc21pc3NBbGxOb3RpZmljYXRpb25zID0gKCkgPT4gTm90aWZpY2F0aW9uTWFuYWdlci5kaXNtaXNzQWxsKCk7XG5cbi8vIE1ha2UgdG9hc3QgZnVuY3Rpb24gZ2xvYmFsbHkgYXZhaWxhYmxlIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG4vLyBPbmx5IHNldCBpZiBub3QgYWxyZWFkeSBkZWZpbmVkIChhdm9pZCBjb25mbGljdHMgd2l0aCBleGlzdGluZyBUb2FzdCBjb21wb25lbnQpXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgIXdpbmRvdy50b2FzdCkge1xuICB3aW5kb3cudG9hc3QgPSB0b2FzdDtcbiAgY29uc29sZS5sb2coJ05vdGlmaWNhdGlvbk1hbmFnZXI6IEdsb2JhbCB0b2FzdCBmdW5jdGlvbiByZWdpc3RlcmVkJyk7XG59IGVsc2UgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gIGNvbnNvbGUubG9nKCdOb3RpZmljYXRpb25NYW5hZ2VyOiBHbG9iYWwgdG9hc3QgYWxyZWFkeSBleGlzdHMsIHNraXBwaW5nIHJlZ2lzdHJhdGlvbicpO1xufVxuXG4vLyBQcm92aWRlIE1pbG9VWC5zaG93Tm90aWZpY2F0aW9uIGFsaWFzIGZvciBjb21wYXRpYmlsaXR5XG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgaWYgKCF3aW5kb3cuTWlsb1VYKSB7XG4gICAgd2luZG93Lk1pbG9VWCA9IHt9O1xuICB9XG4gIGlmICghd2luZG93Lk1pbG9VWC5zaG93Tm90aWZpY2F0aW9uKSB7XG4gICAgd2luZG93Lk1pbG9VWC5zaG93Tm90aWZpY2F0aW9uID0gKG1lc3NhZ2UsIHR5cGUgPSAnaW5mbycsIGR1cmF0aW9uID0gbnVsbCkgPT4gXG4gICAgICBOb3RpZmljYXRpb25NYW5hZ2VyLnNob3cobWVzc2FnZSwgdHlwZSwgZHVyYXRpb24pO1xuICB9XG59IiwgIi8qKlxuICogTmF2aWdhdGlvblV0aWxzIC0gVXRpbGl0aWVzIGZvciBuYXZpZ2F0aW9uIHBhdGggbWF0Y2hpbmcgYW5kIGxpbmsgZGV0ZWN0aW9uXG4gKiBFeHRyYWN0ZWQgZnJvbSBTaWRlYmFyIGNvbXBvbmVudCBmb3IgcmV1c2FiaWxpdHkgYWNyb3NzIG5hdmlnYXRpb24gY29tcG9uZW50c1xuICovXG5cbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4vTG9nZ2VyLmpzJztcblxuY29uc3QgbG9nID0gbG9nZ2VyLmNvbXBvbmVudCgnTmF2aWdhdGlvblV0aWxzJyk7XG5cbi8qKlxuICogTmF2aWdhdGlvbiB1dGlsaXRpZXMgZm9yIHBhdGggbWF0Y2hpbmcgYW5kIGxpbmsgZGV0ZWN0aW9uXG4gKi9cbmV4cG9ydCBjbGFzcyBOYXZpZ2F0aW9uVXRpbHMge1xuICBcbiAgLyoqXG4gICAqIE5vcm1hbGl6ZSBwYXRoIGZvciBjb21wYXJpc29uIChoYW5kbGVzIHN0YXRpYyBkZXBsb3ltZW50cylcbiAgICogQHBhcmFtIHtzdHJpbmd9IHBhdGggLSBQYXRoIHRvIG5vcm1hbGl6ZVxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBOb3JtYWxpemVkIHBhdGhcbiAgICovXG4gIHN0YXRpYyBub3JtYWxpemVQYXRoKHBhdGgpIHtcbiAgICBpZiAoIXBhdGgpIHJldHVybiAnJztcbiAgICBcbiAgICBpZiAocGF0aC5zdGFydHNXaXRoKCcuLycpKSB7XG4gICAgICByZXR1cm4gcGF0aC5zdWJzdHJpbmcoMik7XG4gICAgfVxuICAgIGlmIChwYXRoLnN0YXJ0c1dpdGgoJy8nKSkge1xuICAgICAgcmV0dXJuIHBhdGguc3Vic3RyaW5nKDEpO1xuICAgIH1cbiAgICByZXR1cm4gcGF0aDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB0d28gcGF0aHMgbWF0Y2gsIGFjY291bnRpbmcgZm9yIHJlbGF0aXZlIHZzIGFic29sdXRlIHBhdGhzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjdXJyZW50UGF0aCAtIEN1cnJlbnQgcGFnZSBwYXRoXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBsaW5rUGF0aCAtIExpbmsgaHJlZiBwYXRoXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBXaGV0aGVyIHBhdGhzIG1hdGNoXG4gICAqL1xuICBzdGF0aWMgcGF0aHNNYXRjaChjdXJyZW50UGF0aCwgbGlua1BhdGgpIHtcbiAgICBpZiAoIWN1cnJlbnRQYXRoIHx8ICFsaW5rUGF0aCkgcmV0dXJuIGZhbHNlO1xuICAgIFxuICAgIGNvbnN0IG5vcm1hbGl6ZWRDdXJyZW50ID0gdGhpcy5ub3JtYWxpemVQYXRoKGN1cnJlbnRQYXRoKTtcbiAgICBjb25zdCBub3JtYWxpemVkTGluayA9IHRoaXMubm9ybWFsaXplUGF0aChsaW5rUGF0aCk7XG4gICAgXG4gICAgLy8gRGlyZWN0IG1hdGNoXG4gICAgaWYgKG5vcm1hbGl6ZWRDdXJyZW50ID09PSBub3JtYWxpemVkTGluaykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIFxuICAgIC8vIEhhbmRsZSBpbmRleC5odG1sIGNhc2VzXG4gICAgaWYgKG5vcm1hbGl6ZWRDdXJyZW50LmVuZHNXaXRoKCcvaW5kZXguaHRtbCcpICYmIG5vcm1hbGl6ZWRMaW5rLmVuZHNXaXRoKCcvJykpIHtcbiAgICAgIHJldHVybiBub3JtYWxpemVkQ3VycmVudC5yZXBsYWNlKCcvaW5kZXguaHRtbCcsICcvJykgPT09IG5vcm1hbGl6ZWRMaW5rO1xuICAgIH1cbiAgICBcbiAgICBpZiAobm9ybWFsaXplZExpbmsuZW5kc1dpdGgoJy9pbmRleC5odG1sJykgJiYgbm9ybWFsaXplZEN1cnJlbnQuZW5kc1dpdGgoJy8nKSkge1xuICAgICAgcmV0dXJuIG5vcm1hbGl6ZWRMaW5rLnJlcGxhY2UoJy9pbmRleC5odG1sJywgJy8nKSA9PT0gbm9ybWFsaXplZEN1cnJlbnQ7XG4gICAgfVxuICAgIFxuICAgIC8vIEhhbmRsZSBkaXJlY3RvcnkgdnMgaW5kZXggZmlsZVxuICAgIGlmIChub3JtYWxpemVkQ3VycmVudC5lbmRzV2l0aCgnLycpICYmIG5vcm1hbGl6ZWRMaW5rID09PSBub3JtYWxpemVkQ3VycmVudCArICdpbmRleC5odG1sJykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIFxuICAgIGlmIChub3JtYWxpemVkTGluay5lbmRzV2l0aCgnLycpICYmIG5vcm1hbGl6ZWRDdXJyZW50ID09PSBub3JtYWxpemVkTGluayArICdpbmRleC5odG1sJykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kIGN1cnJlbnQgbGluayB1c2luZyBtdWx0aXBsZSBkZXRlY3Rpb24gc3RyYXRlZ2llc1xuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGNvbnRhaW5lciAtIENvbnRhaW5lciBlbGVtZW50IHRvIHNlYXJjaCB3aXRoaW5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGN1cnJlbnRQYXRoIC0gQ3VycmVudCBwYWdlIHBhdGhcbiAgICogQHJldHVybnMge0VsZW1lbnR8bnVsbH0gRm91bmQgbGluayBlbGVtZW50IG9yIG51bGxcbiAgICovXG4gIHN0YXRpYyBmaW5kQ3VycmVudExpbmsoY29udGFpbmVyLCBjdXJyZW50UGF0aCkge1xuICAgIGlmICghY29udGFpbmVyIHx8ICFjdXJyZW50UGF0aCkgcmV0dXJuIG51bGw7XG4gICAgXG4gICAgbGV0IGN1cnJlbnRMaW5rID0gbnVsbDtcbiAgICBcbiAgICAvLyBTdHJhdGVneSAxOiBVc2UgZGF0YS1jdXJyZW50PVwidHJ1ZVwiIGFzIHByaW1hcnkgbWV0aG9kIChzZXQgYnkgSHVnbylcbiAgICBjdXJyZW50TGluayA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdhW2RhdGEtY3VycmVudD1cInRydWVcIl0nKTtcbiAgICBcbiAgICBpZiAoY3VycmVudExpbmspIHtcbiAgICAgIGxvZy5kZWJ1ZygnRm91bmQgY3VycmVudCBsaW5rIHZpYSBkYXRhLWN1cnJlbnQgYXR0cmlidXRlOicsIGN1cnJlbnRMaW5rLmhyZWYpO1xuICAgICAgcmV0dXJuIGN1cnJlbnRMaW5rO1xuICAgIH1cbiAgICBcbiAgICBsb2cuZGVidWcoJ05vIGRhdGEtY3VycmVudCBsaW5rIGZvdW5kLCB0cnlpbmcgcGF0aCBtYXRjaGluZy4uLicpO1xuICAgIFxuICAgIC8vIFN0cmF0ZWd5IDI6IEV4YWN0IG1hdGNoIHdpdGggY3VycmVudCBwYXRoXG4gICAgY3VycmVudExpbmsgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihgYVtocmVmPVwiJHtjdXJyZW50UGF0aH1cIl1gKTtcbiAgICBcbiAgICBpZiAoY3VycmVudExpbmspIHtcbiAgICAgIGxvZy5kZWJ1ZygnRm91bmQgY3VycmVudCBsaW5rIHZpYSBleGFjdCBwYXRoIG1hdGNoOicsIGN1cnJlbnRMaW5rLmhyZWYpO1xuICAgICAgcmV0dXJuIGN1cnJlbnRMaW5rO1xuICAgIH1cbiAgICBcbiAgICAvLyBTdHJhdGVneSAzOiBSZWxhdGl2ZSBwYXRoIGZvcm1hdCAoZm9yIHN0YXRpYyBkZXBsb3ltZW50cylcbiAgICBjb25zdCByZWxhdGl2ZVBhdGggPSBgLiR7Y3VycmVudFBhdGh9YDtcbiAgICBjdXJyZW50TGluayA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKGBhW2hyZWY9XCIke3JlbGF0aXZlUGF0aH1cIl1gKTtcbiAgICBcbiAgICBpZiAoY3VycmVudExpbmspIHtcbiAgICAgIGxvZy5kZWJ1ZygnRm91bmQgY3VycmVudCBsaW5rIHZpYSByZWxhdGl2ZSBwYXRoIG1hdGNoOicsIGN1cnJlbnRMaW5rLmhyZWYpO1xuICAgICAgcmV0dXJuIGN1cnJlbnRMaW5rO1xuICAgIH1cbiAgICBcbiAgICAvLyBTdHJhdGVneSA0OiBXaXRob3V0IGxlYWRpbmcgc2xhc2hcbiAgICBpZiAoY3VycmVudFBhdGguc3RhcnRzV2l0aCgnLycpKSB7XG4gICAgICBjb25zdCBwYXRoV2l0aG91dFNsYXNoID0gY3VycmVudFBhdGguc3Vic3RyaW5nKDEpO1xuICAgICAgY3VycmVudExpbmsgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihgYVtocmVmPVwiJHtwYXRoV2l0aG91dFNsYXNofVwiXWApO1xuICAgICAgXG4gICAgICBpZiAoY3VycmVudExpbmspIHtcbiAgICAgICAgbG9nLmRlYnVnKCdGb3VuZCBjdXJyZW50IGxpbmsgdmlhIHBhdGggd2l0aG91dCBzbGFzaDonLCBjdXJyZW50TGluay5ocmVmKTtcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRMaW5rO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBTdHJhdGVneSA1OiBGdXp6eSBtYXRjaGluZyB1c2luZyBwYXRoc01hdGNoIGZ1bmN0aW9uXG4gICAgY29uc3QgYWxsTGlua3MgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnYVtocmVmXScpO1xuICAgIGZvciAoY29uc3QgbGluayBvZiBhbGxMaW5rcykge1xuICAgICAgY29uc3QgbGlua1BhdGggPSBsaW5rLmdldEF0dHJpYnV0ZSgnaHJlZicpO1xuICAgICAgaWYgKHRoaXMucGF0aHNNYXRjaChjdXJyZW50UGF0aCwgbGlua1BhdGgpKSB7XG4gICAgICAgIGxvZy5kZWJ1ZygnRm91bmQgY3VycmVudCBsaW5rIHZpYSBmdXp6eSBwYXRoIG1hdGNoaW5nOicsIGxpbmtQYXRoKTtcbiAgICAgICAgcmV0dXJuIGxpbms7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGxvZy5kZWJ1ZygnTm8gY3VycmVudCBsaW5rIGZvdW5kIGZvciBwYXRoOicsIGN1cnJlbnRQYXRoKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY3VycmVudCBwYWdlIHBhdGggd2l0aCBub3JtYWxpemF0aW9uIGZvciBzdGF0aWMgZGVwbG95bWVudHNcbiAgICogQHJldHVybnMge3N0cmluZ30gQ3VycmVudCBwYWdlIHBhdGhcbiAgICovXG4gIHN0YXRpYyBnZXRDdXJyZW50UGF0aCgpIHtcbiAgICBsZXQgY3VycmVudFBhdGggPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWU7XG4gICAgXG4gICAgLy8gTm9ybWFsaXplIGN1cnJlbnQgcGF0aCBmb3Igc3RhdGljIGRlcGxveW1lbnRzXG4gICAgaWYgKGN1cnJlbnRQYXRoLmVuZHNXaXRoKCcvJykpIHtcbiAgICAgIGN1cnJlbnRQYXRoICs9ICdpbmRleC5odG1sJztcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGN1cnJlbnRQYXRoO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmQgcGFyZW50IG5hdmlnYXRpb24gaXRlbXMgZm9yIGEgZ2l2ZW4gbGlua1xuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGxpbmsgLSBMaW5rIGVsZW1lbnQgdG8gZmluZCBwYXJlbnRzIGZvclxuICAgKiBAcGFyYW0ge3N0cmluZ30gcGFyZW50U2VsZWN0b3IgLSBTZWxlY3RvciBmb3IgcGFyZW50IGl0ZW1zIChkZWZhdWx0OiAnbGknKVxuICAgKiBAcmV0dXJucyB7RWxlbWVudFtdfSBBcnJheSBvZiBwYXJlbnQgZWxlbWVudHNcbiAgICovXG4gIHN0YXRpYyBmaW5kUGFyZW50TmF2aWdhdGlvbkl0ZW1zKGxpbmssIHBhcmVudFNlbGVjdG9yID0gJ2xpJykge1xuICAgIGNvbnN0IHBhcmVudHMgPSBbXTtcbiAgICBsZXQgcGFyZW50ID0gbGluay5jbG9zZXN0KHBhcmVudFNlbGVjdG9yKTtcbiAgICBcbiAgICB3aGlsZSAocGFyZW50KSB7XG4gICAgICBwYXJlbnRzLnB1c2gocGFyZW50KTtcbiAgICAgIC8vIE1vdmUgdXAgdG8gcGFyZW50IChza2lwIG5lc3RlZCB1bClcbiAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnRFbGVtZW50Py5jbG9zZXN0KHBhcmVudFNlbGVjdG9yKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHBhcmVudHM7XG4gIH1cblxuICAvKipcbiAgICogR2V0IG5hdmlnYXRpb24gaXRlbSBpbmZvIChsaW5rIHRleHQsIHNlY3Rpb24gbmFtZSwgZXRjLilcbiAgICogQHBhcmFtIHtFbGVtZW50fSBuYXZpZ2F0aW9uSXRlbSAtIE5hdmlnYXRpb24gaXRlbSBlbGVtZW50XG4gICAqIEByZXR1cm5zIHtPYmplY3R9IE5hdmlnYXRpb24gaXRlbSBpbmZvcm1hdGlvblxuICAgKi9cbiAgc3RhdGljIGdldE5hdmlnYXRpb25JdGVtSW5mbyhuYXZpZ2F0aW9uSXRlbSkge1xuICAgIGNvbnN0IGxpbmsgPSBuYXZpZ2F0aW9uSXRlbS5xdWVyeVNlbGVjdG9yKCdhJyk7XG4gICAgY29uc3QgdG9nZ2xlID0gbmF2aWdhdGlvbkl0ZW0ucXVlcnlTZWxlY3RvcignLmV4cGFuZC10b2dnbGUnKTtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgbGluayxcbiAgICAgIHRvZ2dsZSxcbiAgICAgIGhyZWY6IGxpbms/LmdldEF0dHJpYnV0ZSgnaHJlZicpLFxuICAgICAgdGV4dDogbGluaz8udGV4dENvbnRlbnQ/LnRyaW0oKSxcbiAgICAgIHNlY3Rpb25OYW1lOiB0b2dnbGU/LmdldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcpIHx8IGxpbms/LnRleHRDb250ZW50Py50cmltKCksXG4gICAgICBoYXNUb2dnbGU6ICEhdG9nZ2xlLFxuICAgICAgaXNFeHBhbmRlZDogdG9nZ2xlPy5nZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnKSA9PT0gJ3RydWUnLFxuICAgICAgaXNTZWN0aW9uOiBsaW5rPy5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2VjdGlvbicpID09PSAndHJ1ZSdcbiAgICB9O1xuICB9XG59XG5cbi8vIFV0aWxpdHkgZnVuY3Rpb25zIGZvciBlYXN5IGltcG9ydFxuZXhwb3J0IGNvbnN0IHtcbiAgbm9ybWFsaXplUGF0aCxcbiAgcGF0aHNNYXRjaCxcbiAgZmluZEN1cnJlbnRMaW5rLFxuICBnZXRDdXJyZW50UGF0aCxcbiAgZmluZFBhcmVudE5hdmlnYXRpb25JdGVtcyxcbiAgZ2V0TmF2aWdhdGlvbkl0ZW1JbmZvXG59ID0gTmF2aWdhdGlvblV0aWxzO1xuIiwgIi8qKlxuICogQ3VycmVudFBhZ2VEZXRlY3Rpb24gLSBVdGlsaXR5IGZvciBkZXRlY3RpbmcgYW5kIGhpZ2hsaWdodGluZyBjdXJyZW50IHBhZ2UgaW4gbmF2aWdhdGlvblxuICogSGFuZGxlcyBjb21wbGV4IHNjZW5hcmlvcyBsaWtlIHN0YXRpYyBkZXBsb3ltZW50cywgcmVsYXRpdmUgcGF0aHMsIGFuZCBIdWdvIGRhdGEgYXR0cmlidXRlc1xuICovXG5cbmltcG9ydCB7IE5hdmlnYXRpb25VdGlscyB9IGZyb20gJy4vTmF2aWdhdGlvblV0aWxzLmpzJztcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4vTG9nZ2VyLmpzJztcblxuY29uc3QgbG9nID0gbG9nZ2VyLmNvbXBvbmVudCgnQ3VycmVudFBhZ2VEZXRlY3Rpb24nKTtcblxuLyoqXG4gKiBDdXJyZW50IHBhZ2UgZGV0ZWN0aW9uIGFuZCBoaWdobGlnaHRpbmcgdXRpbGl0eVxuICovXG5leHBvcnQgY2xhc3MgQ3VycmVudFBhZ2VEZXRlY3Rpb24ge1xuICBcbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBDdXJyZW50UGFnZURldGVjdGlvbiBpbnN0YW5jZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIENvbmZpZ3VyYXRpb24gb3B0aW9uc1xuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgdGhpcy5vcHRpb25zID0ge1xuICAgICAgY29udGFpbmVyU2VsZWN0b3I6IG51bGwsIC8vIE11c3QgYmUgcHJvdmlkZWRcbiAgICAgIGFjdGl2ZUNsYXNzOiAnc2lkZWJhci1saW5rLS1hY3RpdmUnLFxuICAgICAgcGFyZW50SXRlbVNlbGVjdG9yOiAnbGknLFxuICAgICAgdG9nZ2xlU2VsZWN0b3I6ICcuc2lkZWJhcl9fdG9nZ2xlJyxcbiAgICAgIGxpbmtTZWxlY3RvcjogJ2EnLFxuICAgICAgLi4ub3B0aW9uc1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5jdXJyZW50UGF0aCA9IE5hdmlnYXRpb25VdGlscy5nZXRDdXJyZW50UGF0aCgpO1xuICAgIHRoaXMuY29udGFpbmVyID0gbnVsbDtcbiAgICB0aGlzLmN1cnJlbnRMaW5rID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIGN1cnJlbnQgcGFnZSBkZXRlY3Rpb25cbiAgICogQHBhcmFtIHtFbGVtZW50fSBjb250YWluZXIgLSBDb250YWluZXIgZWxlbWVudCB0byBzZWFyY2ggd2l0aGluXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBXaGV0aGVyIGluaXRpYWxpemF0aW9uIHdhcyBzdWNjZXNzZnVsXG4gICAqL1xuICBpbml0KGNvbnRhaW5lcikge1xuICAgIGlmICghY29udGFpbmVyKSB7XG4gICAgICBsb2cuZXJyb3IoJ0NvbnRhaW5lciBlbGVtZW50IGlzIHJlcXVpcmVkIGZvciBjdXJyZW50IHBhZ2UgZGV0ZWN0aW9uJyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgIHJldHVybiB0aGlzLmRldGVjdEFuZEhpZ2hsaWdodEN1cnJlbnRQYWdlKCk7XG4gIH1cblxuICAvKipcbiAgICogRGV0ZWN0IGN1cnJlbnQgcGFnZSBhbmQgaGlnaGxpZ2h0IGl0IGluIG5hdmlnYXRpb25cbiAgICogQHJldHVybnMge2Jvb2xlYW59IFdoZXRoZXIgY3VycmVudCBwYWdlIHdhcyBmb3VuZCBhbmQgaGlnaGxpZ2h0ZWRcbiAgICovXG4gIGRldGVjdEFuZEhpZ2hsaWdodEN1cnJlbnRQYWdlKCkge1xuICAgIGxvZy5kZWJ1ZygnRGV0ZWN0aW5nIGN1cnJlbnQgcGFnZSBmb3IgcGF0aDonLCB0aGlzLmN1cnJlbnRQYXRoKTtcbiAgICBcbiAgICAvLyBGaW5kIHRoZSBjdXJyZW50IGxpbmtcbiAgICB0aGlzLmN1cnJlbnRMaW5rID0gTmF2aWdhdGlvblV0aWxzLmZpbmRDdXJyZW50TGluayh0aGlzLmNvbnRhaW5lciwgdGhpcy5jdXJyZW50UGF0aCk7XG4gICAgXG4gICAgaWYgKCF0aGlzLmN1cnJlbnRMaW5rKSB7XG4gICAgICBsb2cuZGVidWcoJ05vIGN1cnJlbnQgbGluayBmb3VuZCBmb3IgcGF0aDonLCB0aGlzLmN1cnJlbnRQYXRoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgbG9nLmRlYnVnKCdGb3VuZCBjdXJyZW50IGxpbms6JywgdGhpcy5jdXJyZW50TGluay5ocmVmLCB0aGlzLmN1cnJlbnRMaW5rLnRleHRDb250ZW50LnRyaW0oKSk7XG4gICAgXG4gICAgLy8gSGlnaGxpZ2h0IHRoZSBjdXJyZW50IGxpbmtcbiAgICB0aGlzLmhpZ2hsaWdodEN1cnJlbnRMaW5rKCk7XG4gICAgXG4gICAgLy8gRXhwYW5kIHBhcmVudCBzZWN0aW9uc1xuICAgIHRoaXMuZXhwYW5kUGFyZW50U2VjdGlvbnMoKTtcbiAgICBcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIaWdobGlnaHQgdGhlIGN1cnJlbnQgbGluayB3aXRoIGFjdGl2ZSBjbGFzc1xuICAgKi9cbiAgaGlnaGxpZ2h0Q3VycmVudExpbmsoKSB7XG4gICAgaWYgKCF0aGlzLmN1cnJlbnRMaW5rKSByZXR1cm47XG4gICAgXG4gICAgLy8gUmVtb3ZlIGV4aXN0aW5nIGFjdGl2ZSBjbGFzc2VzIGZyb20gb3RoZXIgbGlua3NcbiAgICB0aGlzLmNsZWFyQWN0aXZlTGlua3MoKTtcbiAgICBcbiAgICAvLyBBZGQgYWN0aXZlIGNsYXNzIHRvIGN1cnJlbnQgbGlua1xuICAgIGlmICghdGhpcy5jdXJyZW50TGluay5jbGFzc0xpc3QuY29udGFpbnModGhpcy5vcHRpb25zLmFjdGl2ZUNsYXNzKSkge1xuICAgICAgdGhpcy5jdXJyZW50TGluay5jbGFzc0xpc3QuYWRkKHRoaXMub3B0aW9ucy5hY3RpdmVDbGFzcyk7XG4gICAgICBsb2cuZGVidWcoJ0FkZGVkIGFjdGl2ZSBjbGFzcyB0byBjdXJyZW50IGxpbmsnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXIgYWN0aXZlIGNsYXNzZXMgZnJvbSBhbGwgbGlua3MgaW4gY29udGFpbmVyXG4gICAqL1xuICBjbGVhckFjdGl2ZUxpbmtzKCkge1xuICAgIGNvbnN0IGFjdGl2ZUxpbmtzID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvckFsbChgLiR7dGhpcy5vcHRpb25zLmFjdGl2ZUNsYXNzfWApO1xuICAgIGFjdGl2ZUxpbmtzLmZvckVhY2gobGluayA9PiB7XG4gICAgICBsaW5rLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5vcHRpb25zLmFjdGl2ZUNsYXNzKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHBhbmQgcGFyZW50IHNlY3Rpb25zIHRvIHNob3cgdGhlIGN1cnJlbnQgcGFnZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBleHBhbmRGdW5jdGlvbiAtIEZ1bmN0aW9uIHRvIGV4cGFuZCBhIHRvZ2dsZSAob3B0aW9uYWwpXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IE51bWJlciBvZiBzZWN0aW9ucyBleHBhbmRlZFxuICAgKi9cbiAgZXhwYW5kUGFyZW50U2VjdGlvbnMoZXhwYW5kRnVuY3Rpb24gPSBudWxsKSB7XG4gICAgaWYgKCF0aGlzLmN1cnJlbnRMaW5rKSByZXR1cm4gMDtcbiAgICBcbiAgICBjb25zdCBwYXJlbnRzID0gTmF2aWdhdGlvblV0aWxzLmZpbmRQYXJlbnROYXZpZ2F0aW9uSXRlbXModGhpcy5jdXJyZW50TGluaywgdGhpcy5vcHRpb25zLnBhcmVudEl0ZW1TZWxlY3Rvcik7XG4gICAgbGV0IGV4cGFuZGVkQ291bnQgPSAwO1xuICAgIFxuICAgIHBhcmVudHMuZm9yRWFjaChwYXJlbnQgPT4ge1xuICAgICAgY29uc3QgdG9nZ2xlID0gcGFyZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5vcHRpb25zLnRvZ2dsZVNlbGVjdG9yKTtcbiAgICAgIGlmICh0b2dnbGUgJiYgdG9nZ2xlLmdldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcpICE9PSAndHJ1ZScpIHtcbiAgICAgICAgY29uc3QgbmF2SW5mbyA9IE5hdmlnYXRpb25VdGlscy5nZXROYXZpZ2F0aW9uSXRlbUluZm8ocGFyZW50KTtcbiAgICAgICAgbG9nLmRlYnVnKGBFeHBhbmRpbmcgcGFyZW50IHNlY3Rpb246ICR7bmF2SW5mby5zZWN0aW9uTmFtZX1gKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChleHBhbmRGdW5jdGlvbiAmJiB0eXBlb2YgZXhwYW5kRnVuY3Rpb24gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAvLyBVc2UgcHJvdmlkZWQgZXhwYW5kIGZ1bmN0aW9uIChmb3IgY29tcG9uZW50cyB3aXRoIGN1c3RvbSBsb2dpYylcbiAgICAgICAgICBleHBhbmRGdW5jdGlvbih0b2dnbGUsIHRydWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIERlZmF1bHQgZXhwYW5kIGJlaGF2aW9yXG4gICAgICAgICAgdGhpcy5kZWZhdWx0RXhwYW5kVG9nZ2xlKHRvZ2dsZSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGV4cGFuZGVkQ291bnQrKztcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICBsb2cuZGVidWcoYEV4cGFuZGVkICR7ZXhwYW5kZWRDb3VudH0gcGFyZW50IHNlY3Rpb25zIGZvciBjdXJyZW50IHBhZ2VgKTtcbiAgICByZXR1cm4gZXhwYW5kZWRDb3VudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWZhdWx0IHRvZ2dsZSBleHBhbnNpb24gKGZhbGxiYWNrIHdoZW4gbm8gY3VzdG9tIGZ1bmN0aW9uIHByb3ZpZGVkKVxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IHRvZ2dsZSAtIFRvZ2dsZSBlbGVtZW50IHRvIGV4cGFuZFxuICAgKi9cbiAgZGVmYXVsdEV4cGFuZFRvZ2dsZSh0b2dnbGUpIHtcbiAgICB0b2dnbGUuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ3RydWUnKTtcbiAgICBcbiAgICAvLyBVcGRhdGUgdmlzdWFsIGluZGljYXRvclxuICAgIGNvbnN0IGNoZXZyb24gPSB0b2dnbGUucXVlcnlTZWxlY3Rvcignc3ZnLCAuY2hldnJvbiwgLmljb24nKTtcbiAgICBpZiAoY2hldnJvbikge1xuICAgICAgY2hldnJvbi5jbGFzc0xpc3QuYWRkKCdyb3RhdGUtOTAnKTtcbiAgICB9XG4gICAgXG4gICAgLy8gU2hvdyBjb250ZW50XG4gICAgY29uc3QgcGFyZW50ID0gdG9nZ2xlLmNsb3Nlc3QodGhpcy5vcHRpb25zLnBhcmVudEl0ZW1TZWxlY3Rvcik7XG4gICAgY29uc3QgY29udGVudCA9IHBhcmVudD8ucXVlcnlTZWxlY3RvcignLm5lc3RlZC1jb250ZW50LCAuY29sbGFwc2UtY29udGVudCcpO1xuICAgIGlmIChjb250ZW50KSB7XG4gICAgICBjb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LmFkZCgnZXhwYW5kZWQnKTtcbiAgICAgIGNvbnRlbnQuc2V0QXR0cmlidXRlKCdkYXRhLWNvbGxhcHNlLXN0YXRlJywgJ2V4cGFuZGVkJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBjdXJyZW50IHBhdGggYW5kIHJlLWRldGVjdFxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmV3UGF0aCAtIE5ldyBwYXRoIHRvIGRldGVjdFxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gV2hldGhlciBuZXcgcGF0aCB3YXMgZm91bmQgYW5kIGhpZ2hsaWdodGVkXG4gICAqL1xuICB1cGRhdGVDdXJyZW50UGF0aChuZXdQYXRoKSB7XG4gICAgdGhpcy5jdXJyZW50UGF0aCA9IG5ld1BhdGggfHwgTmF2aWdhdGlvblV0aWxzLmdldEN1cnJlbnRQYXRoKCk7XG4gICAgcmV0dXJuIHRoaXMuZGV0ZWN0QW5kSGlnaGxpZ2h0Q3VycmVudFBhZ2UoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY3VycmVudCBwYWdlIGluZm9ybWF0aW9uXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IEN1cnJlbnQgcGFnZSBpbmZvcm1hdGlvblxuICAgKi9cbiAgZ2V0Q3VycmVudFBhZ2VJbmZvKCkge1xuICAgIGlmICghdGhpcy5jdXJyZW50TGluaykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZm91bmQ6IGZhbHNlLFxuICAgICAgICBwYXRoOiB0aGlzLmN1cnJlbnRQYXRoLFxuICAgICAgICBsaW5rOiBudWxsLFxuICAgICAgICB0ZXh0OiBudWxsLFxuICAgICAgICBocmVmOiBudWxsXG4gICAgICB9O1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgZm91bmQ6IHRydWUsXG4gICAgICBwYXRoOiB0aGlzLmN1cnJlbnRQYXRoLFxuICAgICAgbGluazogdGhpcy5jdXJyZW50TGluayxcbiAgICAgIHRleHQ6IHRoaXMuY3VycmVudExpbmsudGV4dENvbnRlbnQudHJpbSgpLFxuICAgICAgaHJlZjogdGhpcy5jdXJyZW50TGluay5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSxcbiAgICAgIHBhcmVudHM6IE5hdmlnYXRpb25VdGlscy5maW5kUGFyZW50TmF2aWdhdGlvbkl0ZW1zKHRoaXMuY3VycmVudExpbmssIHRoaXMub3B0aW9ucy5wYXJlbnRJdGVtU2VsZWN0b3IpXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNldCBjdXJyZW50IHBhZ2UgZGV0ZWN0aW9uIChjbGVhciBoaWdobGlnaHRzIGFuZCBjb2xsYXBzZSlcbiAgICovXG4gIHJlc2V0KCkge1xuICAgIHRoaXMuY2xlYXJBY3RpdmVMaW5rcygpO1xuICAgIHRoaXMuY3VycmVudExpbmsgPSBudWxsO1xuICAgIGxvZy5kZWJ1ZygnQ3VycmVudCBwYWdlIGRldGVjdGlvbiByZXNldCcpO1xuICB9XG59XG5cbi8qKlxuICogVXRpbGl0eSBmdW5jdGlvbiB0byBxdWlja2x5IGRldGVjdCBjdXJyZW50IHBhZ2UgaW4gYSBjb250YWluZXJcbiAqIEBwYXJhbSB7RWxlbWVudH0gY29udGFpbmVyIC0gQ29udGFpbmVyIHRvIHNlYXJjaCB3aXRoaW5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gQ29uZmlndXJhdGlvbiBvcHRpb25zXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBleHBhbmRGdW5jdGlvbiAtIE9wdGlvbmFsIGN1c3RvbSBleHBhbmQgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtPYmplY3R9IERldGVjdGlvbiByZXN1bHRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRldGVjdEN1cnJlbnRQYWdlKGNvbnRhaW5lciwgb3B0aW9ucyA9IHt9LCBleHBhbmRGdW5jdGlvbiA9IG51bGwpIHtcbiAgY29uc3QgZGV0ZWN0b3IgPSBuZXcgQ3VycmVudFBhZ2VEZXRlY3Rpb24ob3B0aW9ucyk7XG4gIGNvbnN0IHN1Y2Nlc3MgPSBkZXRlY3Rvci5pbml0KGNvbnRhaW5lcik7XG4gIFxuICBpZiAoc3VjY2VzcyAmJiBleHBhbmRGdW5jdGlvbikge1xuICAgIGRldGVjdG9yLmV4cGFuZFBhcmVudFNlY3Rpb25zKGV4cGFuZEZ1bmN0aW9uKTtcbiAgfVxuICBcbiAgcmV0dXJuIHtcbiAgICBzdWNjZXNzLFxuICAgIGRldGVjdG9yLFxuICAgIHBhZ2VJbmZvOiBkZXRlY3Rvci5nZXRDdXJyZW50UGFnZUluZm8oKVxuICB9O1xufVxuIiwgIi8qKlxuICogVXRpbGl0aWVzIGluZGV4IC0gQ2VudHJhbCBleHBvcnQgZm9yIGFsbCB1dGlsaXR5IG1vZHVsZXNcbiAqL1xuXG4vLyBET00gdXRpbGl0aWVzXG5leHBvcnQge1xuICByZWFkeSxcbiAgJCxcbiAgJCQsXG4gIGNyZWF0ZVJpcHBsZSxcbiAgc21vb3RoU2Nyb2xsVG8sXG4gIGRlYm91bmNlLFxuICB0aHJvdHRsZSxcbiAgaXNJblZpZXdwb3J0LFxuICB3YWl0Rm9yRWxlbWVudCxcbiAgYWRkRXZlbnRMaXN0ZW5lcldpdGhDbGVhbnVwLFxuICBkZWxlZ2F0ZSxcbiAgY3JlYXRlRWxlbWVudCxcbiAgY29weVRvQ2xpcGJvYXJkXG59IGZyb20gJy4vZG9tLmpzJztcblxuLy8gU3RvcmFnZSB1dGlsaXRpZXNcbmV4cG9ydCB7XG4gIGxvY2FsU3RvcmFnZSxcbiAgc2Vzc2lvblN0b3JhZ2UsXG4gIGNyZWF0ZU5hbWVzcGFjZWRTdG9yYWdlXG59IGZyb20gJy4vc3RvcmFnZS5qcyc7XG5cbi8vIEFuaW1hdGlvbiB1dGlsaXRpZXNcbmV4cG9ydCB7XG4gIHRyYW5zaXRpb25zLFxuICB0eXBlV3JpdGVyLFxuICBzdGFnZ2VyZWRBbmltYXRpb24sXG4gIFNjcm9sbEFuaW1hdGlvbk9ic2VydmVyLFxuICBhbmltYXRlQ291bnRlcixcbiAgUGFyYWxsYXhDb250cm9sbGVyLFxuICBjcmVhdGVMb2FkaW5nU3Bpbm5lcixcbiAgYW5pbWF0ZVByb2dyZXNzQmFyXG59IGZyb20gJy4vYW5pbWF0aW9uLmpzJztcblxuLy8gQWNjZXNzaWJpbGl0eSB1dGlsaXRpZXNcbmV4cG9ydCB7XG4gIGFubm91bmNlVG9TY3JlZW5SZWFkZXIsXG4gIGZvY3VzLFxuICBrZXlib2FyZCxcbiAgYXJpYSxcbiAgbW90aW9uLFxuICBjb250cmFzdCxcbiAgZGV0ZWN0SGlnaENvbnRyYXN0TW9kZVxufSBmcm9tICcuL2FjY2Vzc2liaWxpdHkuanMnO1xuXG4vLyBDb3B5IG1hbmFnZW1lbnQgdXRpbGl0aWVzXG5leHBvcnQge1xuICBDb3B5TWFuYWdlcixcbiAgY29weVRleHQsXG4gIGNvcHlGcm9tRWxlbWVudCxcbiAgc2V0dXBDb3B5QnV0dG9uc1xufSBmcm9tICcuL0NvcHlNYW5hZ2VyLmpzJztcblxuLy8gTG9hZGluZyBzdGF0ZSBtYW5hZ2VtZW50IHV0aWxpdGllc1xuZXhwb3J0IHtcbiAgTG9hZGluZ1N0YXRlTWFuYWdlcixcbiAgc2hvd0xvYWRpbmcsXG4gIGhpZGVMb2FkaW5nLFxuICBzaG93U3Bpbm5lcixcbiAgc2hvd1NrZWxldG9uLFxuICB1cGRhdGVQcm9ncmVzc1xufSBmcm9tICcuL0xvYWRpbmdTdGF0ZU1hbmFnZXIuanMnO1xuXG4vLyBFcnJvciBoYW5kbGluZyB1dGlsaXRpZXNcbmV4cG9ydCB7XG4gIEVycm9ySGFuZGxlcixcbiAgaGFuZGxlRXJyb3IsXG4gIGhhbmRsZU5ldHdvcmtFcnJvcixcbiAgaGFuZGxlVmFsaWRhdGlvbkVycm9yLFxuICBjcmVhdGVFcnJvckJvdW5kYXJ5LFxuICBoYW5kbGVGZXRjaEVycm9yXG59IGZyb20gJy4vRXJyb3JIYW5kbGVyLmpzJztcblxuLy8gTm90aWZpY2F0aW9uIG1hbmFnZW1lbnQgdXRpbGl0aWVzXG5leHBvcnQge1xuICBOb3RpZmljYXRpb25NYW5hZ2VyLFxuICB0b2FzdCxcbiAgc2hvd1N1Y2Nlc3MsXG4gIHNob3dFcnJvcixcbiAgc2hvd1dhcm5pbmcsXG4gIHNob3dJbmZvLFxuICBkaXNtaXNzTm90aWZpY2F0aW9uLFxuICBkaXNtaXNzQWxsTm90aWZpY2F0aW9uc1xufSBmcm9tICcuL05vdGlmaWNhdGlvbk1hbmFnZXIuanMnO1xuXG4vLyBcdUQ4M0RcdURFODAgTW9kZXJuIEZlYXR1cmUgRGV0ZWN0aW9uIHV0aWxpdGllc1xuZXhwb3J0IHtcbiAgbW9kZXJuRmVhdHVyZXMsXG4gIHdpdGhGYWxsYmFjayxcbiAgcmVxdWVzdElkbGVUaW1lLFxuICBkZWVwQ2xvbmUsXG4gIGxvZ0ZlYXR1cmVTdXBwb3J0LFxuICBpbml0RmVhdHVyZURldGVjdGlvblxufSBmcm9tICcuL0ZlYXR1cmVEZXRlY3Rpb24uanMnO1xuXG4vLyBOYXZpZ2F0aW9uIHV0aWxpdGllc1xuZXhwb3J0IHtcbiAgTmF2aWdhdGlvblV0aWxzLFxuICBub3JtYWxpemVQYXRoLFxuICBwYXRoc01hdGNoLFxuICBmaW5kQ3VycmVudExpbmssXG4gIGdldEN1cnJlbnRQYXRoLFxuICBmaW5kUGFyZW50TmF2aWdhdGlvbkl0ZW1zLFxuICBnZXROYXZpZ2F0aW9uSXRlbUluZm9cbn0gZnJvbSAnLi9OYXZpZ2F0aW9uVXRpbHMuanMnO1xuXG4vLyBDdXJyZW50IHBhZ2UgZGV0ZWN0aW9uIHV0aWxpdGllc1xuZXhwb3J0IHtcbiAgQ3VycmVudFBhZ2VEZXRlY3Rpb24sXG4gIGRldGVjdEN1cnJlbnRQYWdlXG59IGZyb20gJy4vQ3VycmVudFBhZ2VEZXRlY3Rpb24uanMnO1xuXG4vLyBDb21tb24gdXRpbGl0eSBwYXR0ZXJuc1xuZXhwb3J0IGNvbnN0IHV0aWxzID0ge1xuICAvLyBHZW5lcmF0ZSB1bmlxdWUgSURzXG4gIGdlbmVyYXRlSWQocHJlZml4ID0gJ21pbG8nKSB7XG4gICAgcmV0dXJuIGAke3ByZWZpeH0tJHtEYXRlLm5vdygpfS0ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gO1xuICB9LFxuXG4gIC8vIEZvcm1hdCBkYXRlcyBjb25zaXN0ZW50bHlcbiAgZm9ybWF0RGF0ZShkYXRlLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBkZWZhdWx0cyA9IHtcbiAgICAgIHllYXI6ICdudW1lcmljJyxcbiAgICAgIG1vbnRoOiAnbG9uZycsXG4gICAgICBkYXk6ICdudW1lcmljJ1xuICAgIH07XG4gICAgcmV0dXJuIG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KCdlbi1VUycsIHsgLi4uZGVmYXVsdHMsIC4uLm9wdGlvbnMgfSkuZm9ybWF0KGRhdGUpO1xuICB9LFxuXG4gIC8vIEVzY2FwZSBIVE1MIHRvIHByZXZlbnQgWFNTXG4gIGVzY2FwZUh0bWwodGV4dCkge1xuICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRpdi50ZXh0Q29udGVudCA9IHRleHQ7XG4gICAgcmV0dXJuIGRpdi5pbm5lckhUTUw7XG4gIH0sXG5cbiAgLy8gUGFyc2UgcXVlcnkgcGFyYW1ldGVyc1xuICBwYXJzZVF1ZXJ5UGFyYW1zKHVybCA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpIHtcbiAgICByZXR1cm4gbmV3IFVSTFNlYXJjaFBhcmFtcyh1cmwpO1xuICB9LFxuXG4gIC8vIENsYW1wIG51bWJlciBiZXR3ZWVuIG1pbiBhbmQgbWF4XG4gIGNsYW1wKHZhbHVlLCBtaW4sIG1heCkge1xuICAgIHJldHVybiBNYXRoLm1pbihNYXRoLm1heCh2YWx1ZSwgbWluKSwgbWF4KTtcbiAgfSxcblxuICAvLyBDaGVjayBpZiBvYmplY3QgaXMgZW1wdHlcbiAgaXNFbXB0eShvYmopIHtcbiAgICByZXR1cm4gb2JqID09IG51bGwgfHwgKHR5cGVvZiBvYmogPT09ICdvYmplY3QnICYmIE9iamVjdC5rZXlzKG9iaikubGVuZ3RoID09PSAwKTtcbiAgfSxcblxuICAvLyBEZWVwIG1lcmdlIG9iamVjdHNcbiAgZGVlcE1lcmdlKHRhcmdldCwgLi4uc291cmNlcykge1xuICAgIGlmICghc291cmNlcy5sZW5ndGgpIHJldHVybiB0YXJnZXQ7XG4gICAgY29uc3Qgc291cmNlID0gc291cmNlcy5zaGlmdCgpO1xuXG4gICAgaWYgKHRoaXMuaXNPYmplY3QodGFyZ2V0KSAmJiB0aGlzLmlzT2JqZWN0KHNvdXJjZSkpIHtcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIHNvdXJjZSkge1xuICAgICAgICBpZiAodGhpcy5pc09iamVjdChzb3VyY2Vba2V5XSkpIHtcbiAgICAgICAgICBpZiAoIXRhcmdldFtrZXldKSBPYmplY3QuYXNzaWduKHRhcmdldCwgeyBba2V5XToge30gfSk7XG4gICAgICAgICAgdGhpcy5kZWVwTWVyZ2UodGFyZ2V0W2tleV0sIHNvdXJjZVtrZXldKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBPYmplY3QuYXNzaWduKHRhcmdldCwgeyBba2V5XTogc291cmNlW2tleV0gfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5kZWVwTWVyZ2UodGFyZ2V0LCAuLi5zb3VyY2VzKTtcbiAgfSxcblxuICAvLyBDaGVjayBpZiB2YWx1ZSBpcyBvYmplY3RcbiAgaXNPYmplY3QoaXRlbSkge1xuICAgIHJldHVybiBpdGVtICYmIHR5cGVvZiBpdGVtID09PSAnb2JqZWN0JyAmJiAhQXJyYXkuaXNBcnJheShpdGVtKTtcbiAgfSxcblxuICAvLyBGb3JtYXQgZmlsZSBzaXplXG4gIGZvcm1hdEZpbGVTaXplKGJ5dGVzLCBkZWNpbWFscyA9IDIpIHtcbiAgICBpZiAoYnl0ZXMgPT09IDApIHJldHVybiAnMCBCeXRlcyc7XG4gICAgY29uc3QgayA9IDEwMjQ7XG4gICAgY29uc3QgZG0gPSBkZWNpbWFscyA8IDAgPyAwIDogZGVjaW1hbHM7XG4gICAgY29uc3Qgc2l6ZXMgPSBbJ0J5dGVzJywgJ0tCJywgJ01CJywgJ0dCJywgJ1RCJ107XG4gICAgY29uc3QgaSA9IE1hdGguZmxvb3IoTWF0aC5sb2coYnl0ZXMpIC8gTWF0aC5sb2coaykpO1xuICAgIHJldHVybiBwYXJzZUZsb2F0KChieXRlcyAvIE1hdGgucG93KGssIGkpKS50b0ZpeGVkKGRtKSkgKyAnICcgKyBzaXplc1tpXTtcbiAgfVxufTsiLCAiLyoqXG4gKiBTY3JvbGxUcmFja2luZ01peGluIC0gTWl4aW4gZm9yIGNvbXBvbmVudHMgdGhhdCBuZWVkIHNjcm9sbC1iYXNlZCBmdW5jdGlvbmFsaXR5XG4gKiBQcm92aWRlcyBzdGFuZGFyZGl6ZWQgc2Nyb2xsIHRyYWNraW5nLCBhY3RpdmUgc3RhdGUgbWFuYWdlbWVudCwgYW5kIHBlcmZvcm1hbmNlIG9wdGltaXphdGlvbnNcbiAqIFJlZmFjdG9yZWQgdG8gdXNlIE1peGluQmFzZSB1dGlsaXRpZXMgZm9yIGNvbnNpc3RlbmN5XG4gKi9cblxuaW1wb3J0IHsgTWl4aW5VdGlsaXRpZXMsIHZhbGlkYXRlTWl4aW5JbnRlcmZhY2UgfSBmcm9tICcuL01peGluQmFzZS5qcyc7XG5pbXBvcnQgeyBkZWJvdW5jZSwgdGhyb3R0bGUgfSBmcm9tICcuLi91dGlscy9pbmRleC5qcyc7XG5cbi8qKlxuICogTWl4aW4gdGhhdCBhZGRzIHNjcm9sbCB0cmFja2luZyBmdW5jdGlvbmFsaXR5IHRvIGNvbXBvbmVudHNcbiAqIFVzYWdlOiBPYmplY3QuYXNzaWduKFlvdXJDb21wb25lbnQucHJvdG90eXBlLCBTY3JvbGxUcmFja2luZ01peGluKTtcbiAqL1xuZXhwb3J0IGNvbnN0IFNjcm9sbFRyYWNraW5nTWl4aW4gPSB7XG4gIFxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBzY3JvbGwgdHJhY2tpbmcgZnVuY3Rpb25hbGl0eSB1c2luZyBNaXhpbkJhc2UgdXRpbGl0aWVzXG4gICAqIENhbGwgdGhpcyBmcm9tIHlvdXIgY29tcG9uZW50J3Mgb25Jbml0IG1ldGhvZFxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIENvbmZpZ3VyYXRpb24gb3B0aW9uc1xuICAgKi9cbiAgaW5pdFNjcm9sbFRyYWNraW5nOiBNaXhpblV0aWxpdGllcy5jcmVhdGVJbml0RnVuY3Rpb24oXG4gICAgJ1Njcm9sbFRyYWNraW5nTWl4aW4nLFxuICAgIHtcbiAgICAgIGFjdGl2ZUNsYXNzOiAnYWN0aXZlJyxcbiAgICAgIG9mZnNldDogMTAwLFxuICAgICAgc21vb3RoU2Nyb2xsOiB0cnVlLFxuICAgICAgdGhyb3R0bGVEZWxheTogMTYsIC8vIH42MGZwc1xuICAgICAgZGVib3VuY2VEZWxheTogMTAwLFxuICAgICAgdXNlSW50ZXJzZWN0aW9uT2JzZXJ2ZXI6IHRydWUsXG4gICAgICByb290TWFyZ2luOiAnLTUwJSAwcHggLTUwJSAwcHgnLFxuICAgICAgdGhyZXNob2xkOiAwXG4gICAgfSxcbiAgICBmdW5jdGlvbiBzZXR1cFNjcm9sbFRyYWNraW5nKCkge1xuICAgICAgdGhpcy5zY3JvbGxUYXJnZXRzID0gW107XG4gICAgICB0aGlzLmFjdGl2ZVRhcmdldCA9IG51bGw7XG4gICAgICB0aGlzLmlzU2Nyb2xsaW5nID0gZmFsc2U7XG4gICAgICB0aGlzLnNjcm9sbFRpbWVvdXQgPSBudWxsO1xuICAgICAgdGhpcy5vYnNlcnZlciA9IG51bGw7XG4gICAgICBcbiAgICAgIHRoaXMuc2V0dXBTY3JvbGxFbGVtZW50cygpO1xuICAgICAgdGhpcy5zZXR1cFNjcm9sbFRyYWNraW5nKCk7XG4gICAgfVxuICApLFxuXG4gIC8qKlxuICAgKiBGaW5kIGFuZCBjYWNoZSBzY3JvbGwtcmVsYXRlZCBlbGVtZW50c1xuICAgKi9cbiAgc2V0dXBTY3JvbGxFbGVtZW50cygpIHtcbiAgICBpZiAoIXRoaXMuZWxlbWVudCkgcmV0dXJuO1xuICAgIFxuICAgIC8vIEZpbmQgYWxsIHNjcm9sbCB0YXJnZXRzIChsaW5rcyB3aXRoIGRhdGEtc2Nyb2xsLXRhcmdldCBvciBocmVmIHN0YXJ0aW5nIHdpdGggIylcbiAgICBjb25zdCBzY3JvbGxMaW5rcyA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1zY3JvbGwtdGFyZ2V0XSwgYVtocmVmXj1cIiNcIl0nKTtcbiAgICBcbiAgICB0aGlzLnNjcm9sbFRhcmdldHMgPSBBcnJheS5mcm9tKHNjcm9sbExpbmtzKS5tYXAobGluayA9PiB7XG4gICAgICBjb25zdCB0YXJnZXRJZCA9IGxpbmsuZ2V0QXR0cmlidXRlKCdkYXRhLXNjcm9sbC10YXJnZXQnKSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICBsaW5rLmdldEF0dHJpYnV0ZSgnaHJlZicpPy5zdWJzdHJpbmcoMSk7XG4gICAgICBjb25zdCB0YXJnZXRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFyZ2V0SWQpO1xuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBsaW5rLFxuICAgICAgICB0YXJnZXRJZCxcbiAgICAgICAgdGFyZ2V0RWxlbWVudCxcbiAgICAgICAgaXNBY3RpdmU6IGZhbHNlXG4gICAgICB9O1xuICAgIH0pLmZpbHRlcih0YXJnZXQgPT4gdGFyZ2V0LnRhcmdldEVsZW1lbnQpOyAvLyBPbmx5IGtlZXAgdGFyZ2V0cyB3aXRoIHZhbGlkIGVsZW1lbnRzXG4gIH0sXG5cbiAgLyoqXG4gICAqIFNldHVwIHNjcm9sbCB0cmFja2luZyBiYXNlZCBvbiBjb25maWd1cmF0aW9uXG4gICAqL1xuICBzZXR1cFNjcm9sbFRyYWNraW5nKCkge1xuICAgIGlmICh0aGlzLnNjcm9sbE9wdGlvbnMudXNlSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgJiYgJ0ludGVyc2VjdGlvbk9ic2VydmVyJyBpbiB3aW5kb3cpIHtcbiAgICAgIHRoaXMuc2V0dXBJbnRlcnNlY3Rpb25PYnNlcnZlcigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldHVwU2Nyb2xsTGlzdGVuZXIoKTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5zZXR1cFNjcm9sbExpbmtzKCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNldHVwIEludGVyc2VjdGlvbiBPYnNlcnZlciBmb3IgbW9kZXJuIHNjcm9sbCB0cmFja2luZ1xuICAgKi9cbiAgc2V0dXBJbnRlcnNlY3Rpb25PYnNlcnZlcigpIHtcbiAgICBjb25zdCBvYnNlcnZlck9wdGlvbnMgPSB7XG4gICAgICByb290OiBudWxsLFxuICAgICAgcm9vdE1hcmdpbjogdGhpcy5zY3JvbGxPcHRpb25zLnJvb3RNYXJnaW4sXG4gICAgICB0aHJlc2hvbGQ6IHRoaXMuc2Nyb2xsT3B0aW9ucy50aHJlc2hvbGRcbiAgICB9O1xuICAgIFxuICAgIHRoaXMub2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoKGVudHJpZXMpID0+IHtcbiAgICAgIGVudHJpZXMuZm9yRWFjaChlbnRyeSA9PiB7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IHRoaXMuc2Nyb2xsVGFyZ2V0cy5maW5kKHQgPT4gdC50YXJnZXRFbGVtZW50ID09PSBlbnRyeS50YXJnZXQpO1xuICAgICAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgICAgaWYgKGVudHJ5LmlzSW50ZXJzZWN0aW5nKSB7XG4gICAgICAgICAgICB0aGlzLnNldEFjdGl2ZVRhcmdldCh0YXJnZXQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSwgb2JzZXJ2ZXJPcHRpb25zKTtcbiAgICBcbiAgICAvLyBPYnNlcnZlIGFsbCB0YXJnZXQgZWxlbWVudHNcbiAgICB0aGlzLnNjcm9sbFRhcmdldHMuZm9yRWFjaCh0YXJnZXQgPT4ge1xuICAgICAgdGhpcy5vYnNlcnZlci5vYnNlcnZlKHRhcmdldC50YXJnZXRFbGVtZW50KTtcbiAgICB9KTtcbiAgfSxcblxuICAvKipcbiAgICogU2V0dXAgc2Nyb2xsIGxpc3RlbmVyIChmYWxsYmFjayBmb3Igb2xkZXIgYnJvd3NlcnMpXG4gICAqL1xuICBzZXR1cFNjcm9sbExpc3RlbmVyKCkge1xuICAgIGNvbnN0IHRocm90dGxlZFNjcm9sbEhhbmRsZXIgPSB0aHJvdHRsZSgoKSA9PiB7XG4gICAgICB0aGlzLmhhbmRsZVNjcm9sbCgpO1xuICAgIH0sIHRoaXMuc2Nyb2xsT3B0aW9ucy50aHJvdHRsZURlbGF5KTtcbiAgICBcbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIod2luZG93LCAnc2Nyb2xsJywgdGhyb3R0bGVkU2Nyb2xsSGFuZGxlcik7XG4gICAgXG4gICAgLy8gSW5pdGlhbCBjaGVja1xuICAgIHRoaXMuaGFuZGxlU2Nyb2xsKCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNldHVwIGNsaWNrIGhhbmRsZXJzIGZvciBzY3JvbGwgbGlua3NcbiAgICovXG4gIHNldHVwU2Nyb2xsTGlua3MoKSB7XG4gICAgdGhpcy5zY3JvbGxUYXJnZXRzLmZvckVhY2godGFyZ2V0ID0+IHtcbiAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcih0YXJnZXQubGluaywgJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLnNjcm9sbFRvVGFyZ2V0KHRhcmdldCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSxcblxuICAvKipcbiAgICogSGFuZGxlIHNjcm9sbCBldmVudHMgKGZvciBub24tSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgbW9kZSlcbiAgICovXG4gIGhhbmRsZVNjcm9sbCgpIHtcbiAgICBpZiAodGhpcy5pc1Njcm9sbGluZykgcmV0dXJuO1xuICAgIFxuICAgIGNvbnN0IHNjcm9sbFRvcCA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO1xuICAgIGxldCBhY3RpdmVUYXJnZXQgPSBudWxsO1xuICAgIGxldCBjbG9zZXN0RGlzdGFuY2UgPSBJbmZpbml0eTtcbiAgICBcbiAgICAvLyBGaW5kIHRoZSB0YXJnZXQgdGhhdCdzIGNsb3Nlc3QgdG8gdGhlIHRvcCBvZiB0aGUgdmlld3BvcnRcbiAgICB0aGlzLnNjcm9sbFRhcmdldHMuZm9yRWFjaCh0YXJnZXQgPT4ge1xuICAgICAgY29uc3QgcmVjdCA9IHRhcmdldC50YXJnZXRFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgY29uc3QgZWxlbWVudFRvcCA9IHJlY3QudG9wICsgc2Nyb2xsVG9wO1xuICAgICAgY29uc3QgZGlzdGFuY2UgPSBNYXRoLmFicyhlbGVtZW50VG9wIC0gc2Nyb2xsVG9wIC0gdGhpcy5zY3JvbGxPcHRpb25zLm9mZnNldCk7XG4gICAgICBcbiAgICAgIGlmIChkaXN0YW5jZSA8IGNsb3Nlc3REaXN0YW5jZSAmJiByZWN0LnRvcCA8PSB0aGlzLnNjcm9sbE9wdGlvbnMub2Zmc2V0KSB7XG4gICAgICAgIGNsb3Nlc3REaXN0YW5jZSA9IGRpc3RhbmNlO1xuICAgICAgICBhY3RpdmVUYXJnZXQgPSB0YXJnZXQ7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgaWYgKGFjdGl2ZVRhcmdldCAmJiBhY3RpdmVUYXJnZXQgIT09IHRoaXMuYWN0aXZlVGFyZ2V0KSB7XG4gICAgICB0aGlzLnNldEFjdGl2ZVRhcmdldChhY3RpdmVUYXJnZXQpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogU2V0IHRoZSBhY3RpdmUgdGFyZ2V0IGFuZCB1cGRhdGUgVUlcbiAgICogQHBhcmFtIHtPYmplY3R9IHRhcmdldCAtIFRhcmdldCBvYmplY3QgdG8gc2V0IGFzIGFjdGl2ZVxuICAgKi9cbiAgc2V0QWN0aXZlVGFyZ2V0KHRhcmdldCkge1xuICAgIC8vIFJlbW92ZSBhY3RpdmUgY2xhc3MgZnJvbSBwcmV2aW91cyB0YXJnZXRcbiAgICBpZiAodGhpcy5hY3RpdmVUYXJnZXQpIHtcbiAgICAgIHRoaXMuYWN0aXZlVGFyZ2V0LmxpbmsuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLnNjcm9sbE9wdGlvbnMuYWN0aXZlQ2xhc3MpO1xuICAgICAgdGhpcy5hY3RpdmVUYXJnZXQuaXNBY3RpdmUgPSBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgICAgICAgLy8gU2V0IG5ldyBhY3RpdmUgdGFyZ2V0XG4gICAgICB0aGlzLmFjdGl2ZVRhcmdldCA9IHRhcmdldDtcbiAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgdGFyZ2V0LmxpbmsuY2xhc3NMaXN0LmFkZCh0aGlzLnNjcm9sbE9wdGlvbnMuYWN0aXZlQ2xhc3MpO1xuICAgICAgICB0YXJnZXQuaXNBY3RpdmUgPSB0cnVlO1xuICAgICAgICBcbiAgICAgICAgLy8gRW1pdCBldmVudFxuICAgICAgICB0aGlzLmVtaXQoJ3Njcm9sbC10YXJnZXQtYWN0aXZlJywge1xuICAgICAgICAgIHRhcmdldDogdGFyZ2V0LnRhcmdldEVsZW1lbnQsXG4gICAgICAgICAgbGluazogdGFyZ2V0LmxpbmssXG4gICAgICAgICAgdGFyZ2V0SWQ6IHRhcmdldC50YXJnZXRJZFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogU2Nyb2xsIHRvIGEgc3BlY2lmaWMgdGFyZ2V0XG4gICAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXQgLSBUYXJnZXQgb2JqZWN0IHRvIHNjcm9sbCB0b1xuICAgKi9cbiAgYXN5bmMgc2Nyb2xsVG9UYXJnZXQodGFyZ2V0KSB7XG4gICAgaWYgKCF0YXJnZXQudGFyZ2V0RWxlbWVudCkgcmV0dXJuO1xuICAgIFxuICAgIHRoaXMuaXNTY3JvbGxpbmcgPSB0cnVlO1xuICAgIFxuICAgIC8vIEVtaXQgYmVmb3JlLXNjcm9sbCBldmVudFxuICAgIHRoaXMuZW1pdCgnYmVmb3JlLXNjcm9sbCcsIHtcbiAgICAgIHRhcmdldDogdGFyZ2V0LnRhcmdldEVsZW1lbnQsXG4gICAgICBsaW5rOiB0YXJnZXQubGluayxcbiAgICAgIHRhcmdldElkOiB0YXJnZXQudGFyZ2V0SWRcbiAgICB9KTtcbiAgICBcbiAgICBpZiAodGhpcy5zY3JvbGxPcHRpb25zLnNtb290aFNjcm9sbCAmJiAnc2Nyb2xsQmVoYXZpb3InIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSkge1xuICAgICAgLy8gVXNlIG5hdGl2ZSBzbW9vdGggc2Nyb2xsaW5nXG4gICAgICBjb25zdCBlbGVtZW50VG9wID0gdGFyZ2V0LnRhcmdldEVsZW1lbnQub2Zmc2V0VG9wIC0gdGhpcy5zY3JvbGxPcHRpb25zLm9mZnNldDtcbiAgICAgIFxuICAgICAgd2luZG93LnNjcm9sbFRvKHtcbiAgICAgICAgdG9wOiBlbGVtZW50VG9wLFxuICAgICAgICBiZWhhdmlvcjogJ3Ntb290aCdcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBXYWl0IGZvciBzY3JvbGwgdG8gY29tcGxldGVcbiAgICAgIGF3YWl0IHRoaXMud2FpdEZvclNjcm9sbEVuZCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJbnN0YW50IHNjcm9sbCBmYWxsYmFja1xuICAgICAgY29uc3QgZWxlbWVudFRvcCA9IHRhcmdldC50YXJnZXRFbGVtZW50Lm9mZnNldFRvcCAtIHRoaXMuc2Nyb2xsT3B0aW9ucy5vZmZzZXQ7XG4gICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgZWxlbWVudFRvcCk7XG4gICAgfVxuICAgIFxuICAgIC8vIFNldCBhcyBhY3RpdmUgdGFyZ2V0XG4gICAgdGhpcy5zZXRBY3RpdmVUYXJnZXQodGFyZ2V0KTtcbiAgICBcbiAgICB0aGlzLmlzU2Nyb2xsaW5nID0gZmFsc2U7XG4gICAgXG4gICAgLy8gRW1pdCBhZnRlci1zY3JvbGwgZXZlbnRcbiAgICB0aGlzLmVtaXQoJ2FmdGVyLXNjcm9sbCcsIHtcbiAgICAgIHRhcmdldDogdGFyZ2V0LnRhcmdldEVsZW1lbnQsXG4gICAgICBsaW5rOiB0YXJnZXQubGluayxcbiAgICAgIHRhcmdldElkOiB0YXJnZXQudGFyZ2V0SWRcbiAgICB9KTtcbiAgICBcbiAgICAvLyBTY3JvbGxlZCBzdWNjZXNzZnVsbHlcbiAgfSxcblxuICAvKipcbiAgICogV2FpdCBmb3Igc21vb3RoIHNjcm9sbCB0byBlbmRcbiAgICogQHJldHVybnMge1Byb21pc2V9IFByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHNjcm9sbGluZyBzdG9wc1xuICAgKi9cbiAgd2FpdEZvclNjcm9sbEVuZCgpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBsZXQgbGFzdFNjcm9sbFRvcCA9IHdpbmRvdy5wYWdlWU9mZnNldDtcbiAgICAgIGxldCBzY3JvbGxFbmRUaW1lcjtcbiAgICAgIFxuICAgICAgY29uc3QgY2hlY2tTY3JvbGxFbmQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRTY3JvbGxUb3AgPSB3aW5kb3cucGFnZVlPZmZzZXQ7XG4gICAgICAgIFxuICAgICAgICBpZiAoTWF0aC5hYnMoY3VycmVudFNjcm9sbFRvcCAtIGxhc3RTY3JvbGxUb3ApIDwgMSkge1xuICAgICAgICAgIC8vIFNjcm9sbCBoYXMgc3RvcHBlZFxuICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsYXN0U2Nyb2xsVG9wID0gY3VycmVudFNjcm9sbFRvcDtcbiAgICAgICAgICBzY3JvbGxFbmRUaW1lciA9IHNldFRpbWVvdXQoY2hlY2tTY3JvbGxFbmQsIDUwKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgc2Nyb2xsRW5kVGltZXIgPSBzZXRUaW1lb3V0KGNoZWNrU2Nyb2xsRW5kLCA1MCk7XG4gICAgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBzY3JvbGwgdGFyZ2V0cyAodXNlZnVsIHdoZW4gRE9NIGNoYW5nZXMpXG4gICAqL1xuICB1cGRhdGVTY3JvbGxUYXJnZXRzKCkge1xuICAgIC8vIENsZWFuIHVwIGV4aXN0aW5nIG9ic2VydmVyXG4gICAgaWYgKHRoaXMub2JzZXJ2ZXIpIHtcbiAgICAgIHRoaXMub2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgIH1cbiAgICBcbiAgICAvLyBSZS1zZXR1cCBlbGVtZW50cyBhbmQgdHJhY2tpbmdcbiAgICB0aGlzLnNldHVwU2Nyb2xsRWxlbWVudHMoKTtcbiAgICB0aGlzLnNldHVwU2Nyb2xsVHJhY2tpbmcoKTtcbiAgfSxcblxuICAvKipcbiAgICogR2V0IGN1cnJlbnQgYWN0aXZlIHRhcmdldFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fG51bGx9IEN1cnJlbnQgYWN0aXZlIHRhcmdldCBvciBudWxsXG4gICAqL1xuICBnZXRBY3RpdmVUYXJnZXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0aXZlVGFyZ2V0O1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgYWxsIHNjcm9sbCB0YXJnZXRzXG4gICAqIEByZXR1cm5zIHtBcnJheX0gQXJyYXkgb2YgYWxsIHNjcm9sbCB0YXJnZXRzXG4gICAqL1xuICBnZXRTY3JvbGxUYXJnZXRzKCkge1xuICAgIHJldHVybiB0aGlzLnNjcm9sbFRhcmdldHM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNjcm9sbCB0byB0YXJnZXQgYnkgSURcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRhcmdldElkIC0gSUQgb2YgdGFyZ2V0IHRvIHNjcm9sbCB0b1xuICAgKi9cbiAgc2Nyb2xsVG9JZCh0YXJnZXRJZCkge1xuICAgIGNvbnN0IHRhcmdldCA9IHRoaXMuc2Nyb2xsVGFyZ2V0cy5maW5kKHQgPT4gdC50YXJnZXRJZCA9PT0gdGFyZ2V0SWQpO1xuICAgIGlmICh0YXJnZXQpIHtcbiAgICAgIHRoaXMuc2Nyb2xsVG9UYXJnZXQodGFyZ2V0KTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHNjcm9sbCB0cmFja2luZyBmdW5jdGlvbmFsaXR5IGlzIGhlYWx0aHkgdXNpbmcgc3RhbmRhcmRpemVkIGNoZWNrc1xuICAgKi9cbiAgaXNTY3JvbGxUcmFja2luZ0hlYWx0aHk6IE1peGluVXRpbGl0aWVzLmNyZWF0ZUhlYWx0aENoZWNrKFtcbiAgICBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuc2Nyb2xsVGFyZ2V0cyAmJiB0aGlzLnNjcm9sbFRhcmdldHMubGVuZ3RoID4gMDsgfSxcbiAgICBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuc2Nyb2xsT3B0aW9ucyAhPT0gdW5kZWZpbmVkOyB9LFxuICAgIGZ1bmN0aW9uKCkge1xuICAgICAgLy8gQ2hlY2sgaWYgdGFyZ2V0cyBoYXZlIHZhbGlkIGVsZW1lbnRzXG4gICAgICByZXR1cm4gdGhpcy5zY3JvbGxUYXJnZXRzLmV2ZXJ5KHRhcmdldCA9PiBcbiAgICAgICAgdGFyZ2V0LnRhcmdldEVsZW1lbnQgJiYgZG9jdW1lbnQuY29udGFpbnModGFyZ2V0LnRhcmdldEVsZW1lbnQpICYmXG4gICAgICAgIHRhcmdldC5saW5rICYmIGRvY3VtZW50LmNvbnRhaW5zKHRhcmdldC5saW5rKVxuICAgICAgKTtcbiAgICB9LFxuICAgIGZ1bmN0aW9uKCkge1xuICAgICAgLy8gQ2hlY2sgaWYgb2JzZXJ2ZXIgaXMgd29ya2luZyAoaWYgdXNpbmcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIpXG4gICAgICBpZiAodGhpcy5zY3JvbGxPcHRpb25zLnVzZUludGVyc2VjdGlvbk9ic2VydmVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9ic2VydmVyICE9PSBudWxsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICBdKSxcblxuICAvKipcbiAgICogQ2xlYW4gdXAgc2Nyb2xsIHRyYWNraW5nXG4gICAqL1xuICBjbGVhbnVwU2Nyb2xsVHJhY2tpbmcoKSB7XG4gICAgaWYgKHRoaXMub2JzZXJ2ZXIpIHtcbiAgICAgIHRoaXMub2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgdGhpcy5vYnNlcnZlciA9IG51bGw7XG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLnNjcm9sbFRpbWVvdXQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnNjcm9sbFRpbWVvdXQpO1xuICAgICAgdGhpcy5zY3JvbGxUaW1lb3V0ID0gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5zY3JvbGxUYXJnZXRzID0gW107XG4gICAgdGhpcy5hY3RpdmVUYXJnZXQgPSBudWxsO1xuICB9XG59O1xuXG4vLyBWYWxpZGF0ZSBtaXhpbiBpbnRlcmZhY2VcbnZhbGlkYXRlTWl4aW5JbnRlcmZhY2UoU2Nyb2xsVHJhY2tpbmdNaXhpbiwge1xuICBtZXRob2RzOiBbJ2luaXRTY3JvbGxUcmFja2luZycsICdpc1Njcm9sbFRyYWNraW5nSGVhbHRoeSddXG59KTtcbiIsICIvKipcbiAqIEZvcm1WYWxpZGF0aW9uTWl4aW4gLSBFeGFtcGxlIG1peGluIHVzaW5nIE1peGluQmFzZSB1dGlsaXRpZXNcbiAqIFByb3ZpZGVzIHN0YW5kYXJkaXplZCBmb3JtIHZhbGlkYXRpb24gZnVuY3Rpb25hbGl0eVxuICovXG5cbmltcG9ydCB7IE1peGluVXRpbGl0aWVzLCBNaXhpblBhdHRlcm5zLCB2YWxpZGF0ZU1peGluSW50ZXJmYWNlIH0gZnJvbSAnLi9NaXhpbkJhc2UuanMnO1xuXG4vKipcbiAqIE1peGluIHRoYXQgYWRkcyBmb3JtIHZhbGlkYXRpb24gZnVuY3Rpb25hbGl0eSB0byBjb21wb25lbnRzXG4gKiBUaGlzIGRlbW9uc3RyYXRlcyB0aGUgTWl4aW5CYXNlIHBhdHRlcm4gaW4gYWN0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBGb3JtVmFsaWRhdGlvbk1peGluID0ge1xuICBcbiAgLyoqXG4gICAqIEluaXRpYWxpemUgZm9ybSB2YWxpZGF0aW9uIHVzaW5nIE1peGluQmFzZSB1dGlsaXRpZXNcbiAgICovXG4gIGluaXRGb3JtVmFsaWRhdGlvbjogTWl4aW5VdGlsaXRpZXMuY3JlYXRlSW5pdEZ1bmN0aW9uKFxuICAgICdGb3JtVmFsaWRhdGlvbk1peGluJyxcbiAgICB7XG4gICAgICBmb3JtU2VsZWN0b3I6ICdmb3JtJyxcbiAgICAgIGZpZWxkU2VsZWN0b3I6ICdpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYScsXG4gICAgICBlcnJvckNsYXNzOiAnZXJyb3InLFxuICAgICAgdmFsaWRDbGFzczogJ3ZhbGlkJyxcbiAgICAgIHNob3dFcnJvck1lc3NhZ2VzOiB0cnVlLFxuICAgICAgdmFsaWRhdGVPbkJsdXI6IHRydWUsXG4gICAgICB2YWxpZGF0ZU9uU3VibWl0OiB0cnVlXG4gICAgfSxcbiAgICBmdW5jdGlvbiBzZXR1cEZvcm1WYWxpZGF0aW9uKCkge1xuICAgICAgdGhpcy5zZXR1cEZvcm1FbGVtZW50cygpO1xuICAgICAgdGhpcy5zZXR1cEZvcm1FdmVudHMoKTtcbiAgICAgIHRoaXMuc2V0dXBGb3JtQWNjZXNzaWJpbGl0eSgpO1xuICAgIH1cbiAgKSxcblxuICAvKipcbiAgICogU2V0dXAgZm9ybSBlbGVtZW50cyB1c2luZyBzdGFuZGFyZGl6ZWQgZWxlbWVudCBzZXR1cFxuICAgKi9cbiAgc2V0dXBGb3JtRWxlbWVudHM6IE1peGluVXRpbGl0aWVzLmNyZWF0ZUVsZW1lbnRTZXR1cCh7XG4gICAgZm9ybTogJ2Zvcm0nLCAvLyBTaW5nbGUgZm9ybSBlbGVtZW50XG4gICAgZmllbGRzOiBbJ2lucHV0LCBzZWxlY3QsIHRleHRhcmVhJ10sIC8vIE11bHRpcGxlIGZpZWxkIGVsZW1lbnRzXG4gICAgc3VibWl0QnV0dG9uOiAnYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl0sIGlucHV0W3R5cGU9XCJzdWJtaXRcIl0nLFxuICAgIGVycm9yQ29udGFpbmVyczogWycuZXJyb3ItbWVzc2FnZSddIC8vIE11bHRpcGxlIGVycm9yIGNvbnRhaW5lcnNcbiAgfSksXG5cbiAgLyoqXG4gICAqIFNldHVwIGZvcm0gZXZlbnRzIHVzaW5nIHN0YW5kYXJkaXplZCBldmVudCBzZXR1cFxuICAgKi9cbiAgc2V0dXBGb3JtRXZlbnRzOiBNaXhpblV0aWxpdGllcy5jcmVhdGVFdmVudFNldHVwKHtcbiAgICBmb3JtOiB7XG4gICAgICAnc3VibWl0JzogJ2hhbmRsZUZvcm1TdWJtaXQnXG4gICAgfSxcbiAgICBmaWVsZHM6IHtcbiAgICAgICdibHVyJzogJ2hhbmRsZUZpZWxkQmx1cicsXG4gICAgICAnaW5wdXQnOiAnaGFuZGxlRmllbGRJbnB1dCdcbiAgICB9XG4gIH0pLFxuXG4gIC8qKlxuICAgKiBTZXR1cCBhY2Nlc3NpYmlsaXR5IGF0dHJpYnV0ZXNcbiAgICovXG4gIHNldHVwRm9ybUFjY2Vzc2liaWxpdHkoKSB7XG4gICAgaWYgKCF0aGlzLmZpZWxkcykgcmV0dXJuO1xuICAgIFxuICAgIHRoaXMuZmllbGRzLmZvckVhY2goZmllbGQgPT4ge1xuICAgICAgaWYgKCFmaWVsZC5oYXNBdHRyaWJ1dGUoJ2FyaWEtaW52YWxpZCcpKSB7XG4gICAgICAgIGZpZWxkLnNldEF0dHJpYnV0ZSgnYXJpYS1pbnZhbGlkJywgJ2ZhbHNlJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEhhbmRsZSBmb3JtIHN1Ym1pc3Npb25cbiAgICovXG4gIGhhbmRsZUZvcm1TdWJtaXQoZSkge1xuICAgIGlmICh0aGlzLmZvcm12YWxpZGF0aW9uT3B0aW9ucy52YWxpZGF0ZU9uU3VibWl0KSB7XG4gICAgICBjb25zdCBpc1ZhbGlkID0gdGhpcy52YWxpZGF0ZUFsbEZpZWxkcygpO1xuICAgICAgaWYgKCFpc1ZhbGlkKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5lbWl0KCdmb3JtLXZhbGlkYXRpb24tZmFpbGVkJywgeyBmb3JtOiB0aGlzLmZvcm0gfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgdGhpcy5lbWl0KCdmb3JtLXN1Ym1pdHRlZCcsIHsgZm9ybTogdGhpcy5mb3JtIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBIYW5kbGUgZmllbGQgYmx1ciBldmVudHNcbiAgICovXG4gIGhhbmRsZUZpZWxkQmx1cihlKSB7XG4gICAgaWYgKHRoaXMuZm9ybXZhbGlkYXRpb25PcHRpb25zLnZhbGlkYXRlT25CbHVyKSB7XG4gICAgICB0aGlzLnZhbGlkYXRlRmllbGQoZS50YXJnZXQpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogSGFuZGxlIGZpZWxkIGlucHV0IGV2ZW50c1xuICAgKi9cbiAgaGFuZGxlRmllbGRJbnB1dChlKSB7XG4gICAgLy8gQ2xlYXIgZXJyb3JzIG9uIGlucHV0XG4gICAgdGhpcy5jbGVhckZpZWxkRXJyb3IoZS50YXJnZXQpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBWYWxpZGF0ZSBhbGwgZmllbGRzIGluIHRoZSBmb3JtXG4gICAqL1xuICB2YWxpZGF0ZUFsbEZpZWxkcygpIHtcbiAgICBpZiAoIXRoaXMuZmllbGRzKSByZXR1cm4gdHJ1ZTtcbiAgICBcbiAgICBsZXQgYWxsVmFsaWQgPSB0cnVlO1xuICAgIHRoaXMuZmllbGRzLmZvckVhY2goZmllbGQgPT4ge1xuICAgICAgY29uc3QgaXNWYWxpZCA9IHRoaXMudmFsaWRhdGVGaWVsZChmaWVsZCk7XG4gICAgICBpZiAoIWlzVmFsaWQpIGFsbFZhbGlkID0gZmFsc2U7XG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIGFsbFZhbGlkO1xuICB9LFxuXG4gIC8qKlxuICAgKiBWYWxpZGF0ZSBhIHNwZWNpZmljIGZpZWxkXG4gICAqL1xuICB2YWxpZGF0ZUZpZWxkKGZpZWxkKSB7XG4gICAgY29uc3QgdmFsdWUgPSBmaWVsZC52YWx1ZS50cmltKCk7XG4gICAgY29uc3QgcnVsZXMgPSB0aGlzLmdldEZpZWxkVmFsaWRhdGlvblJ1bGVzKGZpZWxkKTtcbiAgICBcbiAgICBmb3IgKGNvbnN0IHJ1bGUgb2YgcnVsZXMpIHtcbiAgICAgIGlmICghcnVsZS50ZXN0KHZhbHVlLCBmaWVsZCkpIHtcbiAgICAgICAgdGhpcy5zaG93RmllbGRFcnJvcihmaWVsZCwgcnVsZS5tZXNzYWdlKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICB0aGlzLnNob3dGaWVsZFZhbGlkKGZpZWxkKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSxcblxuICAvKipcbiAgICogR2V0IHZhbGlkYXRpb24gcnVsZXMgZm9yIGEgZmllbGRcbiAgICovXG4gIGdldEZpZWxkVmFsaWRhdGlvblJ1bGVzKGZpZWxkKSB7XG4gICAgY29uc3QgcnVsZXMgPSBbXTtcbiAgICBcbiAgICAvLyBSZXF1aXJlZCBmaWVsZFxuICAgIGlmIChmaWVsZC5oYXNBdHRyaWJ1dGUoJ3JlcXVpcmVkJykpIHtcbiAgICAgIHJ1bGVzLnB1c2goe1xuICAgICAgICB0ZXN0OiAodmFsdWUpID0+IHZhbHVlLmxlbmd0aCA+IDAsXG4gICAgICAgIG1lc3NhZ2U6ICdUaGlzIGZpZWxkIGlzIHJlcXVpcmVkJ1xuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIEVtYWlsIHZhbGlkYXRpb25cbiAgICBpZiAoZmllbGQudHlwZSA9PT0gJ2VtYWlsJykge1xuICAgICAgcnVsZXMucHVzaCh7XG4gICAgICAgIHRlc3Q6ICh2YWx1ZSkgPT4gIXZhbHVlIHx8IC9eW15cXHNAXStAW15cXHNAXStcXC5bXlxcc0BdKyQvLnRlc3QodmFsdWUpLFxuICAgICAgICBtZXNzYWdlOiAnUGxlYXNlIGVudGVyIGEgdmFsaWQgZW1haWwgYWRkcmVzcydcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBNaW4gbGVuZ3RoXG4gICAgaWYgKGZpZWxkLmhhc0F0dHJpYnV0ZSgnbWlubGVuZ3RoJykpIHtcbiAgICAgIGNvbnN0IG1pbkxlbmd0aCA9IHBhcnNlSW50KGZpZWxkLmdldEF0dHJpYnV0ZSgnbWlubGVuZ3RoJykpO1xuICAgICAgcnVsZXMucHVzaCh7XG4gICAgICAgIHRlc3Q6ICh2YWx1ZSkgPT4gIXZhbHVlIHx8IHZhbHVlLmxlbmd0aCA+PSBtaW5MZW5ndGgsXG4gICAgICAgIG1lc3NhZ2U6IGBNdXN0IGJlIGF0IGxlYXN0ICR7bWluTGVuZ3RofSBjaGFyYWN0ZXJzYFxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBydWxlcztcbiAgfSxcblxuICAvKipcbiAgICogU2hvdyBmaWVsZCBlcnJvclxuICAgKi9cbiAgc2hvd0ZpZWxkRXJyb3IoZmllbGQsIG1lc3NhZ2UpIHtcbiAgICBmaWVsZC5jbGFzc0xpc3QuYWRkKHRoaXMuZm9ybXZhbGlkYXRpb25PcHRpb25zLmVycm9yQ2xhc3MpO1xuICAgIGZpZWxkLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5mb3JtdmFsaWRhdGlvbk9wdGlvbnMudmFsaWRDbGFzcyk7XG4gICAgZmllbGQuc2V0QXR0cmlidXRlKCdhcmlhLWludmFsaWQnLCAndHJ1ZScpO1xuICAgIFxuICAgIGlmICh0aGlzLmZvcm12YWxpZGF0aW9uT3B0aW9ucy5zaG93RXJyb3JNZXNzYWdlcykge1xuICAgICAgdGhpcy5kaXNwbGF5RXJyb3JNZXNzYWdlKGZpZWxkLCBtZXNzYWdlKTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5lbWl0KCdmaWVsZC1lcnJvcicsIHsgZmllbGQsIG1lc3NhZ2UgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNob3cgZmllbGQgYXMgdmFsaWRcbiAgICovXG4gIHNob3dGaWVsZFZhbGlkKGZpZWxkKSB7XG4gICAgZmllbGQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmZvcm12YWxpZGF0aW9uT3B0aW9ucy5lcnJvckNsYXNzKTtcbiAgICBmaWVsZC5jbGFzc0xpc3QuYWRkKHRoaXMuZm9ybXZhbGlkYXRpb25PcHRpb25zLnZhbGlkQ2xhc3MpO1xuICAgIGZpZWxkLnNldEF0dHJpYnV0ZSgnYXJpYS1pbnZhbGlkJywgJ2ZhbHNlJyk7XG4gICAgXG4gICAgdGhpcy5jbGVhckVycm9yTWVzc2FnZShmaWVsZCk7XG4gICAgdGhpcy5lbWl0KCdmaWVsZC12YWxpZCcsIHsgZmllbGQgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENsZWFyIGZpZWxkIGVycm9yXG4gICAqL1xuICBjbGVhckZpZWxkRXJyb3IoZmllbGQpIHtcbiAgICBmaWVsZC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuZm9ybXZhbGlkYXRpb25PcHRpb25zLmVycm9yQ2xhc3MpO1xuICAgIGZpZWxkLnNldEF0dHJpYnV0ZSgnYXJpYS1pbnZhbGlkJywgJ2ZhbHNlJyk7XG4gICAgdGhpcy5jbGVhckVycm9yTWVzc2FnZShmaWVsZCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIERpc3BsYXkgZXJyb3IgbWVzc2FnZSBmb3IgZmllbGRcbiAgICovXG4gIGRpc3BsYXlFcnJvck1lc3NhZ2UoZmllbGQsIG1lc3NhZ2UpIHtcbiAgICBsZXQgZXJyb3JFbGVtZW50ID0gZmllbGQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZXJyb3ItbWVzc2FnZScpO1xuICAgIFxuICAgIGlmICghZXJyb3JFbGVtZW50KSB7XG4gICAgICBlcnJvckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIGVycm9yRWxlbWVudC5jbGFzc05hbWUgPSAnZXJyb3ItbWVzc2FnZSc7XG4gICAgICBlcnJvckVsZW1lbnQuc2V0QXR0cmlidXRlKCdyb2xlJywgJ2FsZXJ0Jyk7XG4gICAgICBmaWVsZC5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKGVycm9yRWxlbWVudCk7XG4gICAgfVxuICAgIFxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XG4gICAgZXJyb3JFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDbGVhciBlcnJvciBtZXNzYWdlIGZvciBmaWVsZFxuICAgKi9cbiAgY2xlYXJFcnJvck1lc3NhZ2UoZmllbGQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBmaWVsZC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lcnJvci1tZXNzYWdlJyk7XG4gICAgaWYgKGVycm9yRWxlbWVudCkge1xuICAgICAgZXJyb3JFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBQdWJsaWMgQVBJIC0gdmFsaWRhdGUgdGhlIGZvcm0gcHJvZ3JhbW1hdGljYWxseVxuICAgKi9cbiAgdmFsaWRhdGVGb3JtKCkge1xuICAgIHJldHVybiB0aGlzLnZhbGlkYXRlQWxsRmllbGRzKCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFB1YmxpYyBBUEkgLSByZXNldCBmb3JtIHZhbGlkYXRpb25cbiAgICovXG4gIHJlc2V0Rm9ybVZhbGlkYXRpb24oKSB7XG4gICAgaWYgKCF0aGlzLmZpZWxkcykgcmV0dXJuO1xuICAgIFxuICAgIHRoaXMuZmllbGRzLmZvckVhY2goZmllbGQgPT4ge1xuICAgICAgdGhpcy5jbGVhckZpZWxkRXJyb3IoZmllbGQpO1xuICAgICAgZmllbGQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmZvcm12YWxpZGF0aW9uT3B0aW9ucy52YWxpZENsYXNzKTtcbiAgICB9KTtcbiAgfSxcblxuICAvKipcbiAgICogSGVhbHRoIGNoZWNrIHVzaW5nIE1peGluQmFzZSB1dGlsaXRpZXNcbiAgICovXG4gIGlzRm9ybVZhbGlkYXRpb25IZWFsdGh5OiBNaXhpblV0aWxpdGllcy5jcmVhdGVIZWFsdGhDaGVjayhbXG4gICAgZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLmZvcm0gIT09IG51bGw7IH0sXG4gICAgZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLmZpZWxkcyAmJiB0aGlzLmZpZWxkcy5sZW5ndGggPiAwOyB9LFxuICAgIGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5mb3JtdmFsaWRhdGlvbk9wdGlvbnMgIT09IHVuZGVmaW5lZDsgfSxcbiAgICBmdW5jdGlvbigpIHtcbiAgICAgIC8vIENoZWNrIGlmIGZvcm0gaGFzIHByb3BlciBldmVudCBsaXN0ZW5lcnNcbiAgICAgIHJldHVybiB0aGlzLmZvcm0gJiYgdGhpcy5mb3JtLmRhdGFzZXQgJiYgXG4gICAgICAgICAgICAgdGhpcy5mb3JtLmRhdGFzZXQuY29tcG9uZW50TGlzdGVuZXJzICYmXG4gICAgICAgICAgICAgdGhpcy5mb3JtLmRhdGFzZXQuY29tcG9uZW50TGlzdGVuZXJzLmluY2x1ZGVzKHRoaXMuaWQpO1xuICAgIH1cbiAgXSlcbn07XG5cbi8vIFZhbGlkYXRlIHRoZSBtaXhpbiBpbnRlcmZhY2VcbnZhbGlkYXRlTWl4aW5JbnRlcmZhY2UoRm9ybVZhbGlkYXRpb25NaXhpbiwge1xuICBtZXRob2RzOiBbJ2luaXRGb3JtVmFsaWRhdGlvbicsICdpc0Zvcm1WYWxpZGF0aW9uSGVhbHRoeSddXG59KTtcbiIsICIvKipcbiAqIE1peGluTWFuYWdlciAtIFV0aWxpdHkgZm9yIHNhZmVseSBhcHBseWluZyBtaXhpbnMgd2l0aG91dCBjb25mbGljdHNcbiAqIFByb3ZpZGVzIGNvbmZsaWN0IGRldGVjdGlvbiBhbmQgcmVzb2x1dGlvbiBmb3IgY29tcG9uZW50IG1peGluc1xuICovXG5cbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4uL3V0aWxzL0xvZ2dlci5qcyc7XG5cbmNvbnN0IGxvZyA9IGxvZ2dlci5jb21wb25lbnQoJ01peGluTWFuYWdlcicpO1xuXG4vKipcbiAqIFNhZmVseSBhcHBseSBtaXhpbnMgdG8gYSBjb21wb25lbnQgY2xhc3Mgd2l0aCBjb25mbGljdCBkZXRlY3Rpb25cbiAqL1xuZXhwb3J0IGNsYXNzIE1peGluTWFuYWdlciB7XG4gIFxuICAvKipcbiAgICogQXBwbHkgbWl4aW5zIHRvIGEgY29tcG9uZW50IGNsYXNzIHdpdGggY29uZmxpY3QgZGV0ZWN0aW9uXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IENvbXBvbmVudENsYXNzIC0gVGhlIGNvbXBvbmVudCBjbGFzcyB0byBleHRlbmRcbiAgICogQHBhcmFtIHtPYmplY3RbXX0gbWl4aW5zIC0gQXJyYXkgb2YgbWl4aW4gb2JqZWN0cyB0byBhcHBseVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIENvbmZpZ3VyYXRpb24gb3B0aW9uc1xuICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFRoZSBleHRlbmRlZCBjb21wb25lbnQgY2xhc3NcbiAgICovXG4gIHN0YXRpYyBhcHBseU1peGlucyhDb21wb25lbnRDbGFzcywgbWl4aW5zLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBjb25maWcgPSB7XG4gICAgICBwcmVmaXg6ICcnLCAvLyBQcmVmaXggZm9yIG1peGluIG1ldGhvZHMgdG8gYXZvaWQgY29uZmxpY3RzXG4gICAgICBhbGxvd092ZXJyaWRlOiBmYWxzZSwgLy8gV2hldGhlciB0byBhbGxvdyBtaXhpbnMgdG8gb3ZlcnJpZGUgZXhpc3RpbmcgbWV0aG9kc1xuICAgICAgZGV0ZWN0Q29uZmxpY3RzOiB0cnVlLCAvLyBXaGV0aGVyIHRvIGRldGVjdCBhbmQgd2FybiBhYm91dCBjb25mbGljdHNcbiAgICAgIHNraXBDb25mbGljdHM6IGZhbHNlLCAvLyBXaGV0aGVyIHRvIHNraXAgY29uZmxpY3RpbmcgbWV0aG9kc1xuICAgICAgLi4ub3B0aW9uc1xuICAgIH07XG4gICAgXG4gICAgY29uc3QgY29uZmxpY3RzID0gW107XG4gICAgY29uc3QgYXBwbGllZCA9IFtdO1xuICAgIFxuICAgIG1peGlucy5mb3JFYWNoKG1peGluID0+IHtcbiAgICAgIGNvbnN0IG1peGluTmFtZSA9IG1peGluLmNvbnN0cnVjdG9yPy5uYW1lIHx8ICdVbm5hbWVkTWl4aW4nO1xuICAgICAgXG4gICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhtaXhpbikuZm9yRWFjaChwcm9wID0+IHtcbiAgICAgICAgaWYgKHByb3AgPT09ICdjb25zdHJ1Y3RvcicpIHJldHVybjtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGRlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG1peGluLCBwcm9wKTtcbiAgICAgICAgaWYgKCFkZXNjcmlwdG9yKSByZXR1cm47XG4gICAgICAgIFxuICAgICAgICBjb25zdCB0YXJnZXRQcm9wID0gY29uZmlnLnByZWZpeCA/IGAke2NvbmZpZy5wcmVmaXh9JHtwcm9wfWAgOiBwcm9wO1xuICAgICAgICBjb25zdCBleGlzdGluZ0Rlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKENvbXBvbmVudENsYXNzLnByb3RvdHlwZSwgdGFyZ2V0UHJvcCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoZXhpc3RpbmdEZXNjcmlwdG9yICYmIGNvbmZpZy5kZXRlY3RDb25mbGljdHMpIHtcbiAgICAgICAgICBjb25zdCBjb25mbGljdCA9IHtcbiAgICAgICAgICAgIHByb3BlcnR5OiBwcm9wLFxuICAgICAgICAgICAgdGFyZ2V0UHJvcGVydHk6IHRhcmdldFByb3AsXG4gICAgICAgICAgICBtaXhpbjogbWl4aW5OYW1lLFxuICAgICAgICAgICAgZXhpc3Rpbmc6IHRydWVcbiAgICAgICAgICB9O1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbmZsaWN0cy5wdXNoKGNvbmZsaWN0KTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoY29uZmlnLnNraXBDb25mbGljdHMpIHtcbiAgICAgICAgICAgIGxvZy53YXJuKGBTa2lwcGluZyBjb25mbGljdGluZyBtZXRob2QgJHt0YXJnZXRQcm9wfSBmcm9tICR7bWl4aW5OYW1lfWApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoIWNvbmZpZy5hbGxvd092ZXJyaWRlKSB7XG4gICAgICAgICAgICBsb2cud2FybihgTWV0aG9kIGNvbmZsaWN0IGRldGVjdGVkOiAke3RhcmdldFByb3B9ICgke21peGluTmFtZX0gdnMgZXhpc3RpbmcpYCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBBcHBseSB0aGUgcHJvcGVydHlcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbXBvbmVudENsYXNzLnByb3RvdHlwZSwgdGFyZ2V0UHJvcCwgZGVzY3JpcHRvcik7XG4gICAgICAgIGFwcGxpZWQucHVzaCh7IHByb3BlcnR5OiB0YXJnZXRQcm9wLCBtaXhpbjogbWl4aW5OYW1lIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgXG4gICAgaWYgKGNvbmZsaWN0cy5sZW5ndGggPiAwKSB7XG4gICAgICBsb2cuaW5mbyhgQXBwbGllZCAke2FwcGxpZWQubGVuZ3RofSBtZXRob2RzIHdpdGggJHtjb25mbGljdHMubGVuZ3RofSBjb25mbGljdHMgZGV0ZWN0ZWRgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9nLmRlYnVnKGBBcHBsaWVkICR7YXBwbGllZC5sZW5ndGh9IG1ldGhvZHMgZnJvbSAke21peGlucy5sZW5ndGh9IG1peGlucyB3aXRob3V0IGNvbmZsaWN0c2ApO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gQ29tcG9uZW50Q2xhc3M7XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBzYWZlIG1peGluIGFwcGxpY2F0aW9uIGZ1bmN0aW9uIGZvciBhIHNwZWNpZmljIHNldCBvZiBtaXhpbnNcbiAgICogQHBhcmFtIHtPYmplY3RbXX0gbWl4aW5zIC0gTWl4aW5zIHRvIGNyZWF0ZSBhcHBsaWNhdG9yIGZvclxuICAgKiBAcGFyYW0ge09iamVjdH0gZGVmYXVsdE9wdGlvbnMgLSBEZWZhdWx0IG9wdGlvbnMgZm9yIG1peGluIGFwcGxpY2F0aW9uXG4gICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gTWl4aW4gYXBwbGljYXRpb24gZnVuY3Rpb25cbiAgICovXG4gIHN0YXRpYyBjcmVhdGVBcHBsaWNhdG9yKG1peGlucywgZGVmYXVsdE9wdGlvbnMgPSB7fSkge1xuICAgIHJldHVybiAoQ29tcG9uZW50Q2xhc3MsIG9wdGlvbnMgPSB7fSkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuYXBwbHlNaXhpbnMoQ29tcG9uZW50Q2xhc3MsIG1peGlucywgeyAuLi5kZWZhdWx0T3B0aW9ucywgLi4ub3B0aW9ucyB9KTtcbiAgICB9O1xuICB9XG4gIFxuICAvKipcbiAgICogQ2hlY2sgZm9yIHBvdGVudGlhbCBjb25mbGljdHMgYmV0d2VlbiBhIGNvbXBvbmVudCBhbmQgbWl4aW5zXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IENvbXBvbmVudENsYXNzIC0gQ29tcG9uZW50IGNsYXNzIHRvIGNoZWNrXG4gICAqIEBwYXJhbSB7T2JqZWN0W119IG1peGlucyAtIE1peGlucyB0byBjaGVjayBhZ2FpbnN0XG4gICAqIEByZXR1cm5zIHtPYmplY3RbXX0gQXJyYXkgb2YgcG90ZW50aWFsIGNvbmZsaWN0c1xuICAgKi9cbiAgc3RhdGljIGNoZWNrQ29uZmxpY3RzKENvbXBvbmVudENsYXNzLCBtaXhpbnMpIHtcbiAgICBjb25zdCBjb25mbGljdHMgPSBbXTtcbiAgICBjb25zdCBleGlzdGluZ01ldGhvZHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhDb21wb25lbnRDbGFzcy5wcm90b3R5cGUpO1xuICAgIFxuICAgIG1peGlucy5mb3JFYWNoKG1peGluID0+IHtcbiAgICAgIGNvbnN0IG1peGluTmFtZSA9IG1peGluLmNvbnN0cnVjdG9yPy5uYW1lIHx8ICdVbm5hbWVkTWl4aW4nO1xuICAgICAgY29uc3QgbWl4aW5NZXRob2RzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMobWl4aW4pO1xuICAgICAgXG4gICAgICBtaXhpbk1ldGhvZHMuZm9yRWFjaChtZXRob2QgPT4ge1xuICAgICAgICBpZiAobWV0aG9kID09PSAnY29uc3RydWN0b3InKSByZXR1cm47XG4gICAgICAgIFxuICAgICAgICBpZiAoZXhpc3RpbmdNZXRob2RzLmluY2x1ZGVzKG1ldGhvZCkpIHtcbiAgICAgICAgICBjb25mbGljdHMucHVzaCh7XG4gICAgICAgICAgICBtZXRob2QsXG4gICAgICAgICAgICBtaXhpbjogbWl4aW5OYW1lLFxuICAgICAgICAgICAgY29tcG9uZW50OiBDb21wb25lbnRDbGFzcy5uYW1lXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiBjb25mbGljdHM7XG4gIH1cbn1cblxuLyoqXG4gKiBDb252ZW5pZW50IG1peGluIGFwcGxpY2F0aW9uIGZ1bmN0aW9ucyBmb3IgY29tbW9uIGNvbWJpbmF0aW9uc1xuICovXG5leHBvcnQgY29uc3QgTWl4aW5BcHBsaWNhdG9ycyA9IHtcbiAgXG4gIC8qKlxuICAgKiBBcHBseSBuYXZpZ2F0aW9uLXJlbGF0ZWQgbWl4aW5zIChleHBhbmRhYmxlICsgcmVzcG9uc2l2ZSArIGN1cnJlbnQgcGFnZSBkZXRlY3Rpb24pXG4gICAqL1xuICBuYXZpZ2F0aW9uOiBhc3luYyAoQ29tcG9uZW50Q2xhc3MsIG9wdGlvbnMgPSB7fSkgPT4ge1xuICAgIGNvbnN0IHsgRXhwYW5kYWJsZU1peGluLCBSZXNwb25zaXZlTWl4aW4gfSA9IGF3YWl0IGltcG9ydCgnLi4vY29tcG9uZW50cy9pbmRleC5qcycpO1xuICAgIHJldHVybiBNaXhpbk1hbmFnZXIuYXBwbHlNaXhpbnMoQ29tcG9uZW50Q2xhc3MsIFtFeHBhbmRhYmxlTWl4aW4sIFJlc3BvbnNpdmVNaXhpbl0sIHtcbiAgICAgIGRldGVjdENvbmZsaWN0czogdHJ1ZSxcbiAgICAgIHNraXBDb25mbGljdHM6IGZhbHNlLFxuICAgICAgLi4ub3B0aW9uc1xuICAgIH0pO1xuICB9LFxuICBcbiAgLyoqXG4gICAqIEFwcGx5IHNpZGViYXItcmVsYXRlZCBtaXhpbnMgKGFsbCBuYXZpZ2F0aW9uIG1peGlucylcbiAgICovXG4gIHNpZGViYXI6IChDb21wb25lbnRDbGFzcywgb3B0aW9ucyA9IHt9KSA9PiB7XG4gICAgcmV0dXJuIE1peGluQXBwbGljYXRvcnMubmF2aWdhdGlvbihDb21wb25lbnRDbGFzcywgb3B0aW9ucyk7XG4gIH0sXG4gIFxuICAvKipcbiAgICogQXBwbHkgY29udGVudC1yZWxhdGVkIG1peGlucyAoZXhwYW5kYWJsZSArIHNjcm9sbCB0cmFja2luZylcbiAgICovXG4gIGNvbnRlbnQ6IGFzeW5jIChDb21wb25lbnRDbGFzcywgb3B0aW9ucyA9IHt9KSA9PiB7XG4gICAgY29uc3QgeyBFeHBhbmRhYmxlTWl4aW4sIFNjcm9sbFRyYWNraW5nTWl4aW4gfSA9IGF3YWl0IGltcG9ydCgnLi4vY29tcG9uZW50cy9pbmRleC5qcycpO1xuICAgIHJldHVybiBNaXhpbk1hbmFnZXIuYXBwbHlNaXhpbnMoQ29tcG9uZW50Q2xhc3MsIFtFeHBhbmRhYmxlTWl4aW4sIFNjcm9sbFRyYWNraW5nTWl4aW5dLCB7XG4gICAgICBkZXRlY3RDb25mbGljdHM6IHRydWUsXG4gICAgICBza2lwQ29uZmxpY3RzOiBmYWxzZSxcbiAgICAgIC4uLm9wdGlvbnNcbiAgICB9KTtcbiAgfSxcbiAgXG4gIC8qKlxuICAgKiBBcHBseSBtb2RhbC1yZWxhdGVkIG1peGlucyAobW9kYWwgKyByZXNwb25zaXZlKVxuICAgKi9cbiAgbW9kYWw6IGFzeW5jIChDb21wb25lbnRDbGFzcywgb3B0aW9ucyA9IHt9KSA9PiB7XG4gICAgY29uc3QgeyBNb2RhbE1peGluLCBSZXNwb25zaXZlTWl4aW4gfSA9IGF3YWl0IGltcG9ydCgnLi4vY29tcG9uZW50cy9pbmRleC5qcycpO1xuICAgIHJldHVybiBNaXhpbk1hbmFnZXIuYXBwbHlNaXhpbnMoQ29tcG9uZW50Q2xhc3MsIFtNb2RhbE1peGluLCBSZXNwb25zaXZlTWl4aW5dLCB7XG4gICAgICBkZXRlY3RDb25mbGljdHM6IHRydWUsXG4gICAgICBza2lwQ29uZmxpY3RzOiBmYWxzZSxcbiAgICAgIC4uLm9wdGlvbnNcbiAgICB9KTtcbiAgfVxufTtcblxuLyoqXG4gKiBEZWNvcmF0b3IgZnVuY3Rpb24gZm9yIGVhc3kgbWl4aW4gYXBwbGljYXRpb25cbiAqIEBwYXJhbSB7c3RyaW5nfE9iamVjdFtdfSBtaXhpbnMgLSBNaXhpbiBuYW1lcyBvciBhcnJheSBvZiBtaXhpbiBvYmplY3RzXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIENvbmZpZ3VyYXRpb24gb3B0aW9uc1xuICovXG5leHBvcnQgZnVuY3Rpb24gd2l0aE1peGlucyhtaXhpbnMsIG9wdGlvbnMgPSB7fSkge1xuICByZXR1cm4gZnVuY3Rpb24oQ29tcG9uZW50Q2xhc3MpIHtcbiAgICBpZiAodHlwZW9mIG1peGlucyA9PT0gJ3N0cmluZycgJiYgTWl4aW5BcHBsaWNhdG9yc1ttaXhpbnNdKSB7XG4gICAgICByZXR1cm4gTWl4aW5BcHBsaWNhdG9yc1ttaXhpbnNdKENvbXBvbmVudENsYXNzLCBvcHRpb25zKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKEFycmF5LmlzQXJyYXkobWl4aW5zKSkge1xuICAgICAgcmV0dXJuIE1peGluTWFuYWdlci5hcHBseU1peGlucyhDb21wb25lbnRDbGFzcywgbWl4aW5zLCBvcHRpb25zKTtcbiAgICB9XG4gICAgXG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIG1peGlucyBzcGVjaWZpY2F0aW9uOiAke21peGluc31gKTtcbiAgfTtcbn1cbiIsICJpbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICcuLi8uLi9jb3JlL0NvbXBvbmVudC5qcyc7XG5pbXBvcnQgQ29tcG9uZW50TWFuYWdlciBmcm9tICcuLi8uLi9jb3JlL0NvbXBvbmVudE1hbmFnZXIuanMnO1xuXG5jbGFzcyBOb29wQ29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoY29uZmlnID0ge30pIHtcbiAgICBzdXBlcih7IG5hbWU6IGNvbmZpZy5uYW1lIHx8ICdub29wJywgc2VsZWN0b3I6IGNvbmZpZy5zZWxlY3RvciB8fCBudWxsLCAuLi5jb25maWcgfSk7XG4gIH1cbiAgYXN5bmMgb25Jbml0KCkgeyByZXR1cm47IH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyTm9vcChuYW1lKSB7XG4gIENvbXBvbmVudE1hbmFnZXIucmVnaXN0ZXIobmFtZSwgY2xhc3MgZXh0ZW5kcyBOb29wQ29tcG9uZW50IHsgY29uc3RydWN0b3IoY2ZnPXt9KXsgc3VwZXIoeyAuLi5jZmcsIG5hbWUgfSk7IH0gfSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IE5vb3BDb21wb25lbnQ7XG5cblxuIiwgImltcG9ydCBDb21wb25lbnRNYW5hZ2VyLCB7IENvbXBvbmVudCB9IGZyb20gJy4uLy4uL2NvcmUvQ29tcG9uZW50TWFuYWdlci5qcyc7XG5cbi8vIEFnZ3JlZ2F0ZXMgbXVsdGlwbGUgdGFiLWl0ZW0gYmxvY2tzIGludG8gb25lIGFydGljbGUtdGFicyBjb250YWluZXIgcGVyIGdyb3VwXG5jbGFzcyBUYWJBZ2dyZWdhdG9yIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoY29uZmlnID0ge30pIHtcbiAgICBzdXBlcih7IG5hbWU6ICd0YWItYWdncmVnYXRvcicsIHNlbGVjdG9yOiAnW2RhdGEtY29tcG9uZW50PVwidGFiLWl0ZW1cIl0nLCAuLi5jb25maWcgfSk7XG4gICAgdGhpcy5pc1NpbmdsZXRvbiA9IGZhbHNlO1xuICB9XG5cbiAgLy8gT3ZlcnJpZGUgdG8gYXZvaWQgbXV0YXRpbmcgc291cmNlIHRhYiBpdGVtcycgZGF0YS1jb21wb25lbnQgYXR0cmlidXRlXG4gIHNldHVwRWxlbWVudHMoKSB7XG4gICAgLy8gbm8tb3A6IHdlIGRvbid0IHdhbnQgdG8gY2hhbmdlIFtkYXRhLWNvbXBvbmVudD1cInRhYi1pdGVtXCJdIHRvIHRhYi1hZ2dyZWdhdG9yXG4gICAgdGhpcy5lbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIGFzeW5jIG9uSW5pdCgpIHtcbiAgICAvLyBXb3JrIG9uIGFsbCB0YWIgaXRlbXMgaW4gdGhlIGRvY3VtZW50IG9uY2VcbiAgICBjb25zdCBpdGVtcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtY29tcG9uZW50PVwidGFiLWl0ZW1cIl0nKSk7XG4gICAgaWYgKGl0ZW1zLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgLy8gR3JvdXAgaXRlbXMgYnkgZGF0YS1ncm91cFxuICAgIGNvbnN0IGdyb3VwcyA9IG5ldyBNYXAoKTtcbiAgICBpdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgY29uc3QgZ3JvdXAgPSAoaXRlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtZ3JvdXAnKSB8fCAnZGVmYXVsdCcpLnRvTG93ZXJDYXNlKCk7XG4gICAgICBpZiAoIWdyb3Vwcy5oYXMoZ3JvdXApKSBncm91cHMuc2V0KGdyb3VwLCBbXSk7XG4gICAgICBncm91cHMuZ2V0KGdyb3VwKS5wdXNoKGl0ZW0pO1xuICAgIH0pO1xuXG4gICAgLy8gRm9yIGVhY2ggZ3JvdXAsIGJ1aWxkIGEgc2luZ2xlIGFydGljbGUtdGFicyBjb250YWluZXIgYmVmb3JlIHRoZSBmaXJzdCBpdGVtXG4gICAgZ3JvdXBzLmZvckVhY2goKGdyb3VwSXRlbXMsIGdyb3VwTmFtZSkgPT4ge1xuICAgICAgLy8gU2tpcCBpZiBhbHJlYWR5IGFnZ3JlZ2F0ZWQgKHBlciBncm91cClcbiAgICAgIGNvbnN0IGZpcnN0ID0gZ3JvdXBJdGVtc1swXTtcbiAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1jb21wb25lbnQ9XCJhcnRpY2xlLXRhYnNcIl1bZGF0YS10YWItZ3JvdXA9XCIke2dyb3VwTmFtZX1cIl1gKSkgcmV0dXJuO1xuXG4gICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzZWN0aW9uJyk7XG4gICAgICBjb250YWluZXIuY2xhc3NOYW1lID0gJ3RhYnMnO1xuICAgICAgY29udGFpbmVyLnNldEF0dHJpYnV0ZSgnZGF0YS1jb21wb25lbnQnLCAnYXJ0aWNsZS10YWJzJyk7XG4gICAgICBjb250YWluZXIuc2V0QXR0cmlidXRlKCdkYXRhLXRhYi1ncm91cCcsIGdyb3VwTmFtZSk7XG5cbiAgICAgIC8vIE9wdGlvbmFsIHZhcmlhbnQgZnJvbSBmaXJzdCBpdGVtOiBkYXRhLXZhcmlhbnRcbiAgICAgIGNvbnN0IHZhcmlhbnQgPSBmaXJzdC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdmFyaWFudCcpO1xuICAgICAgLy8gRGVmYXVsdCB2aXN1YWxzIGFyZSBoZWFkZXItYWxpZ25lZDsgc3VwcG9ydCBvcHQtb3V0IHZhcmlhbnRzXG4gICAgICBpZiAodmFyaWFudCA9PT0gJ3N1YnRsZScpIHtcbiAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3RhYnMtLXN1YnRsZScpO1xuICAgICAgfVxuICAgICAgaWYgKHZhcmlhbnQgPT09ICdicmFuZC1hY3RpdmUnKSB7XG4gICAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCd0YWJzLS1icmFuZC1hY3RpdmUnKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdGFiSWQgPSBgdGFicy0ke2dyb3VwTmFtZX1gO1xuICAgICAgY29uc3QgYnV0dG9ucyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgYnV0dG9ucy5jbGFzc05hbWUgPSAndGFic19fbmF2JztcbiAgICAgIGJ1dHRvbnMuc2V0QXR0cmlidXRlKCdkYXRhLXRhYi1pZCcsIHRhYklkKTtcblxuICAgICAgY29uc3QgY29udGVudHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIGNvbnRlbnRzLmNsYXNzTmFtZSA9ICd0YWJzX19jb250ZW50JztcblxuICAgICAgLy8gQnVpbGQgYnV0dG9ucyBhbmQgY29udGVudCBibG9ja3NcbiAgICAgIGdyb3VwSXRlbXMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgbGFiZWwgPSBpdGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1sYWJlbCcpIHx8IGBUYWIgJHtpbmRleCsxfWA7XG4gICAgICAgIGNvbnN0IGlzQWN0aXZlID0gaXRlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtYWN0aXZlJykgPT09ICd0cnVlJyB8fCAoaW5kZXggPT09IDApO1xuICAgICAgICBjb25zdCBrZXkgPSBgJHt0YWJJZH0vJHtsYWJlbC50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccysvZywgJy0nKX1gO1xuXG4gICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBidG4udHlwZSA9ICdidXR0b24nO1xuICAgICAgICBidG4uc2V0QXR0cmlidXRlKCdkYXRhLXRhYi1vcHRpb24nLCBrZXkpO1xuICAgICAgICBidG4uY2xhc3NOYW1lID0gYHRhYnNfX2J1dHRvbiAke2lzQWN0aXZlID8gJ2JnLWJyYW5kJyA6ICcnfWA7XG4gICAgICAgIGJ0bi50ZXh0Q29udGVudCA9IGxhYmVsO1xuICAgICAgICBidXR0b25zLmFwcGVuZENoaWxkKGJ0bik7XG5cbiAgICAgICAgY29uc3QgY29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBjb250ZW50LmNsYXNzTmFtZSA9IGB0YWJzX19wYW5lbCR7aXNBY3RpdmUgPyAnIGlzLWFjdGl2ZScgOiAnJ31gO1xuICAgICAgICBjb250ZW50LnNldEF0dHJpYnV0ZSgnZGF0YS10YWJjb250ZW50Jywga2V5KTtcbiAgICAgICAgLy8gTW92ZSBpdGVtJ3MgaW5uZXIgSFRNTCBpbnRvIGNvbnRlbnRcbiAgICAgICAgY29udGVudC5pbm5lckhUTUwgPSBpdGVtLmlubmVySFRNTDtcbiAgICAgICAgY29udGVudHMuYXBwZW5kQ2hpbGQoY29udGVudCk7XG4gICAgICB9KTtcblxuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGJ1dHRvbnMpO1xuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNvbnRlbnRzKTtcblxuICAgICAgLy8gSW5zZXJ0IGNvbnRhaW5lciBiZWZvcmUgZmlyc3QgaXRlbSBhbmQgcmVtb3ZlIG9yaWdpbmFsc1xuICAgICAgZmlyc3QucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoY29udGFpbmVyLCBmaXJzdCk7XG4gICAgICBncm91cEl0ZW1zLmZvckVhY2goaXRlbSA9PiBpdGVtLnJlbW92ZSgpKTtcbiAgICB9KTtcbiAgfVxufVxuXG5Db21wb25lbnRNYW5hZ2VyLnJlZ2lzdGVyKCd0YWItYWdncmVnYXRvcicsIFRhYkFnZ3JlZ2F0b3IsIHsgYXV0b0luaXQ6IHRydWUgfSk7XG5cbmV4cG9ydCBkZWZhdWx0IFRhYkFnZ3JlZ2F0b3I7XG5cblxuIiwgIi8qKlxuICogQXJ0aWNsZSBDbGlwYm9hcmQgQ29tcG9uZW50XG4gKiBIYW5kbGVzIGNvZGUgY29weWluZyBmdW5jdGlvbmFsaXR5IHdpdGggbW9kZXJuIGFuZCBmYWxsYmFjayBpbXBsZW1lbnRhdGlvbnNcbiAqIE1pZ3JhdGVkIGZyb20gYXJ0aWNsZS1jbGlwYm9hcmQuanMgd2l0aCBpbXByb3ZlbWVudHNcbiAqL1xuXG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICcuLi8uLi9jb3JlL0NvbXBvbmVudC5qcyc7XG5pbXBvcnQgQ29tcG9uZW50TWFuYWdlciBmcm9tICcuLi8uLi9jb3JlL0NvbXBvbmVudE1hbmFnZXIuanMnO1xuaW1wb3J0IHsgQ29weU1hbmFnZXIsICQkIH0gZnJvbSAnLi4vLi4vdXRpbHMvaW5kZXguanMnO1xuXG5leHBvcnQgY2xhc3MgQXJ0aWNsZUNsaXBib2FyZCBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZyA9IHt9KSB7XG4gICAgc3VwZXIoe1xuICAgICAgbmFtZTogJ2FydGljbGUtY2xpcGJvYXJkJyxcbiAgICAgIHNlbGVjdG9yOiBjb25maWcuc2VsZWN0b3IgfHwgJy5jb3B5LWJ0biwgLmNvcHktY29kZScsXG4gICAgICAuLi5jb25maWdcbiAgICB9KTtcbiAgICBcbiAgICB0aGlzLmJ1dHRvbnMgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5vcHRpb25zID0ge1xuICAgICAgc3VjY2Vzc0R1cmF0aW9uOiAyMDAwLFxuICAgICAgZXJyb3JEdXJhdGlvbjogMzAwMCxcbiAgICAgIHN1Y2Nlc3NNZXNzYWdlOiAnXHUyNzA1IENvcGllZCEnLFxuICAgICAgZXJyb3JNZXNzYWdlOiAnXHUyNzRDIEZhaWxlZCcsXG4gICAgICAuLi50aGlzLm9wdGlvbnNcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIGVsZW1lbnRzIGFuZCBmaW5kIGFsbCBjb3B5IGJ1dHRvbnNcbiAgICovXG4gIHNldHVwRWxlbWVudHMoKSB7XG4gICAgc3VwZXIuc2V0dXBFbGVtZW50cygpO1xuICAgIFxuICAgIC8vIEZpbmQgYWxsIGNvcHkgYnV0dG9ucyBvbiB0aGUgcGFnZVxuICAgIHRoaXMuY29weUJ1dHRvbnMgPSBbLi4uJCQoJy5jb3B5LWJ0bicpLCAuLi4kJCgnLmNvcHktY29kZScpXTtcbiAgICBpZiAodGhpcy5jb3B5QnV0dG9ucy5sZW5ndGggPT09IDApIHJldHVybjtcbiAgICBcbiAgICAvLyBTZXR1cCBlYWNoIGJ1dHRvblxuICAgIHRoaXMuY29weUJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4gdGhpcy5zZXR1cEJ1dHRvbihidXR0b24pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCBpbmRpdmlkdWFsIGNvcHkgYnV0dG9uXG4gICAqL1xuICBzZXR1cEJ1dHRvbihidXR0b24pIHtcbiAgICAvLyBTdG9yZSBvcmlnaW5hbCBjb250ZW50IGZvciByZXNldFxuICAgIGNvbnN0IG9yaWdpbmFsQ29udGVudCA9IGJ1dHRvbi5pbm5lckhUTUw7XG4gICAgdGhpcy5idXR0b25zLnNldChidXR0b24sIHsgb3JpZ2luYWxDb250ZW50IH0pO1xuICAgIFxuICAgIC8vIEFkZCBkYXRhIGF0dHJpYnV0ZSBmb3IgdHJhY2tpbmdcbiAgICBidXR0b24uc2V0QXR0cmlidXRlKCdkYXRhLWNsaXBib2FyZC1jb21wb25lbnQnLCB0aGlzLmlkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCaW5kIGV2ZW50IGxpc3RlbmVyc1xuICAgKi9cbiAgYmluZEV2ZW50cygpIHtcbiAgICAvLyBVc2UgZXZlbnQgZGVsZWdhdGlvbiBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlXG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGRvY3VtZW50LCAnY2xpY2snLCAoZSkgPT4ge1xuICAgICAgY29uc3QgYnV0dG9uID0gZS50YXJnZXQuY2xvc2VzdCgnLmNvcHktYnRuLCAuY29weS1jb2RlJyk7XG4gICAgICBpZiAoYnV0dG9uICYmIHRoaXMuYnV0dG9ucy5oYXMoYnV0dG9uKSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuaGFuZGxlQ29weUNsaWNrKGJ1dHRvbik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGFza0J1dHRvbiA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5hc2stYWknKTtcbiAgICAgIGlmIChhc2tCdXR0b24pIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLmhhbmRsZUFza0FJQ2xpY2soYXNrQnV0dG9uKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgY29weSBidXR0b24gY2xpY2sgdXNpbmcgdW5pZmllZCBDb3B5TWFuYWdlclxuICAgKi9cbiAgYXN5bmMgaGFuZGxlQ29weUNsaWNrKGJ1dHRvbikge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IENvcHlNYW5hZ2VyLmNvcHlDb2RlKGJ1dHRvbiwge1xuICAgICAgc3VjY2Vzc01lc3NhZ2U6IHRoaXMub3B0aW9ucy5zdWNjZXNzTWVzc2FnZSxcbiAgICAgIGVycm9yTWVzc2FnZTogdGhpcy5vcHRpb25zLmVycm9yTWVzc2FnZSxcbiAgICAgIGZlZWRiYWNrRHVyYXRpb246IHRoaXMub3B0aW9ucy5zdWNjZXNzRHVyYXRpb24sXG4gICAgICBhbmFseXRpY3M6IHtcbiAgICAgICAgY29tcG9uZW50OiAnYXJ0aWNsZS1jbGlwYm9hcmQnLFxuICAgICAgICBidXR0b25JZDogYnV0dG9uLmlkIHx8ICd1bmtub3duJ1xuICAgICAgfSxcbiAgICAgIG9uU3VjY2VzczogKHRleHQpID0+IHtcbiAgICAgICAgdGhpcy50cmFja0NvcHlFdmVudChidXR0b24sIHRleHQubGVuZ3RoKTtcbiAgICAgICAgdGhpcy5lbWl0KCdjb3B5LXN1Y2Nlc3MnLCB7IGJ1dHRvbiwgdGV4dCB9KTtcbiAgICAgIH0sXG4gICAgICBvbkVycm9yOiAoZXJyb3IpID0+IHtcbiAgICAgICAgdGhpcy5lbWl0KCdjb3B5LWVycm9yJywgeyBidXR0b24sIGVycm9yIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG5cblxuICAvKipcbiAgICogVHJhY2sgY29weSBldmVudHMgZm9yIGFuYWx5dGljcyAoY29tcG9uZW50LXNwZWNpZmljIHRyYWNraW5nKVxuICAgKi9cbiAgdHJhY2tDb3B5RXZlbnQoYnV0dG9uLCB0ZXh0TGVuZ3RoKSB7XG4gICAgdGhpcy5lbWl0KCdjb3B5LXRyYWNrZWQnLCB7XG4gICAgICBjb21wb25lbnQ6ICdhcnRpY2xlLWNsaXBib2FyZCcsXG4gICAgICB0ZXh0TGVuZ3RoLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBidXR0b25Db3VudDogdGhpcy5idXR0b25zLnNpemVcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgbmV3IGNvcHkgYnV0dG9uIGR5bmFtaWNhbGx5XG4gICAqL1xuICBhZGRCdXR0b24oYnV0dG9uKSB7XG4gICAgaWYgKHRoaXMuYnV0dG9ucy5oYXMoYnV0dG9uKSkgcmV0dXJuO1xuICAgIHRoaXMuc2V0dXBCdXR0b24oYnV0dG9uKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgY29weSBidXR0b25cbiAgICovXG4gIHJlbW92ZUJ1dHRvbihidXR0b24pIHtcbiAgICBpZiAoIXRoaXMuYnV0dG9ucy5oYXMoYnV0dG9uKSkgcmV0dXJuO1xuICAgIGJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtY2xpcGJvYXJkLWNvbXBvbmVudCcpO1xuICAgIHRoaXMuYnV0dG9ucy5kZWxldGUoYnV0dG9uKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY29weSBzdGF0aXN0aWNzXG4gICAqL1xuICBnZXRTdGF0cygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYnV0dG9uQ291bnQ6IHRoaXMuYnV0dG9ucy5zaXplLFxuICAgICAgY29tcG9uZW50SWQ6IHRoaXMuaWRcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEN1c3RvbSBjbGVhbnVwXG4gICAqL1xuICBvbkRlc3Ryb3koKSB7XG4gICAgLy8gQ2xlYW4gdXAgYnV0dG9uIHJlZmVyZW5jZXNcbiAgICB0aGlzLmJ1dHRvbnMuZm9yRWFjaCgoZGF0YSwgYnV0dG9uKSA9PiB7XG4gICAgICBidXR0b24ucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWNsaXBib2FyZC1jb21wb25lbnQnKTtcbiAgICB9KTtcbiAgICB0aGlzLmJ1dHRvbnMuY2xlYXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgQXNrIEFJIGJ1dHRvbjogY29weSBjb2RlIHRoZW4gc2VuZCB0byBjaGF0XG4gICAqL1xuICBhc3luYyBoYW5kbGVBc2tBSUNsaWNrKGJ1dHRvbikge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwcm9tcHQgPSBidXR0b24uZ2V0QXR0cmlidXRlKCdkYXRhLWFpLXByb21wdCcpIHx8ICdFeHBsYWluIHRoaXMgY29kZSBzbmlwcGV0JztcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgQ29weU1hbmFnZXIuY29weUNvZGUoYnV0dG9uLCB7XG4gICAgICAgIGJ1dHRvbixcbiAgICAgICAgc3VjY2Vzc01lc3NhZ2U6ICdTZW50IHRvIGNoYXQnLFxuICAgICAgICBhbm5vdW5jZU1lc3NhZ2U6ICdTZW50IHRvIGNoYXQnLFxuICAgICAgICBhbmFseXRpY3M6IHsgY29tcG9uZW50OiAnYXJ0aWNsZS1jbGlwYm9hcmQnLCBhY3Rpb246ICdhc2stYWknIH0sXG4gICAgICAgIG9uU3VjY2VzczogYXN5bmMgKGNvZGVUZXh0KSA9PiB7XG4gICAgICAgICAgY29uc3QgcXVlc3Rpb24gPSBgJHtwcm9tcHR9XFxuXFxuJHtjb2RlVGV4dH1gO1xuICAgICAgICAgIGxldCBjaGF0ID0gQ29tcG9uZW50TWFuYWdlci5nZXRJbnN0YW5jZXMoJ2FydGljbGUtY2hhdCcpWzBdO1xuICAgICAgICAgIGlmICghY2hhdCkge1xuICAgICAgICAgICAgY2hhdCA9IGF3YWl0IENvbXBvbmVudE1hbmFnZXIubG9hZCgnYXJ0aWNsZS1jaGF0Jyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjaGF0KSB7XG4gICAgICAgICAgICBjaGF0LnNob3coKTtcbiAgICAgICAgICAgIGNoYXQuZm9jdXMoKTtcbiAgICAgICAgICAgIGF3YWl0IGNoYXQuaGFuZGxlUXVlc3Rpb25TdWJtaXQocXVlc3Rpb24pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuZW1pdCgnYXNrLWFpLWVycm9yJywgeyBidXR0b24sIGVycm9yIH0pO1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yIH07XG4gICAgfVxuICB9XG59XG5cbi8vIEF1dG8tcmVnaXN0ZXIgY29tcG9uZW50XG5Db21wb25lbnRNYW5hZ2VyLnJlZ2lzdGVyKCdhcnRpY2xlLWNsaXBib2FyZCcsIEFydGljbGVDbGlwYm9hcmQpOyIsICIvKipcbiAqIEFydGljbGUgQ29sbGFwc2UgQ29tcG9uZW50XG4gKiBIYW5kbGVzIGNvbGxhcHNpYmxlIGNvbnRlbnQgc2VjdGlvbnMgd2l0aCBhY2Nlc3NpYmlsaXR5IGZlYXR1cmVzXG4gKiBNaWdyYXRlZCBhbmQgZW5oYW5jZWQgZnJvbSBhcnRpY2xlLWNvbGxhcHNlLmpzXG4gKi9cblxuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vY29yZS9Db21wb25lbnQuanMnO1xuaW1wb3J0IHsgYW5pbWF0aW9uQnJpZGdlIH0gZnJvbSAnLi4vLi4vY29yZS9BbmltYXRpb25CcmlkZ2UuanMnO1xuaW1wb3J0IENvbXBvbmVudE1hbmFnZXIgZnJvbSAnLi4vLi4vY29yZS9Db21wb25lbnRNYW5hZ2VyLmpzJztcbmltcG9ydCB7ICQkLCBhcmlhIH0gZnJvbSAnLi4vLi4vdXRpbHMvaW5kZXguanMnO1xuaW1wb3J0IHsgdHJhbnNpdGlvbnMgfSBmcm9tICcuLi8uLi91dGlscy9hbmltYXRpb24uanMnO1xuXG5leHBvcnQgY2xhc3MgQXJ0aWNsZUNvbGxhcHNlIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoY29uZmlnID0ge30pIHtcbiAgICBzdXBlcih7XG4gICAgICBuYW1lOiAnYXJ0aWNsZS1jb2xsYXBzZScsXG4gICAgICBzZWxlY3RvcjogY29uZmlnLnNlbGVjdG9yIHx8ICcudG9nZ2xlLWNvbGxhcHNlJyxcbiAgICAgIC4uLmNvbmZpZ1xuICAgIH0pO1xuICAgIFxuICAgIHRoaXMudG9nZ2xlcyA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLm9wdGlvbnMgPSB7XG4gICAgICBhbmltYXRpb25EdXJhdGlvbjogMzAwLFxuICAgICAgc3RvcmVTdGF0ZTogdHJ1ZSxcbiAgICAgIG5hbWVzcGFjZTogJ2FydGljbGUtY29sbGFwc2UnLFxuICAgICAgLi4udGhpcy5vcHRpb25zXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCBlbGVtZW50cyBhbmQgZmluZCBhbGwgY29sbGFwc2UgdG9nZ2xlc1xuICAgKi9cbiAgc2V0dXBFbGVtZW50cygpIHtcbiAgICBzdXBlci5zZXR1cEVsZW1lbnRzKCk7XG4gICAgXG4gICAgLy8gRmluZCBhbGwgY29sbGFwc2UgdG9nZ2xlc1xuICAgIHRoaXMuY29sbGFwc2VUb2dnbGVzID0gJCQoJy50b2dnbGUtY29sbGFwc2UnKTtcbiAgICBpZiAodGhpcy5jb2xsYXBzZVRvZ2dsZXMubGVuZ3RoID09PSAwKSByZXR1cm47XG4gICAgXG4gICAgLy8gU2V0dXAgZWFjaCB0b2dnbGVcbiAgICB0aGlzLmNvbGxhcHNlVG9nZ2xlcy5mb3JFYWNoKHRvZ2dsZSA9PiB0aGlzLnNldHVwVG9nZ2xlKHRvZ2dsZSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIGluZGl2aWR1YWwgY29sbGFwc2UgdG9nZ2xlXG4gICAqL1xuICBzZXR1cFRvZ2dsZSh0b2dnbGUpIHtcbiAgICBjb25zdCBsaXN0SXRlbSA9IHRvZ2dsZS5jbG9zZXN0KCdsaScpIHx8IHRvZ2dsZS5jbG9zZXN0KCdbZGF0YS1jb2xsYXBzZS1jb250YWluZXJdJyk7XG4gICAgY29uc3QgY29udGVudCA9IHRoaXMuZmluZENvbnRlbnQodG9nZ2xlLCBsaXN0SXRlbSk7XG4gICAgY29uc3QgY2hldnJvbiA9IHRvZ2dsZS5xdWVyeVNlbGVjdG9yKCcuY2hldnJvbiwgc3ZnLCBbZGF0YS1jaGV2cm9uXScpO1xuICAgIFxuICAgIGlmICghY29udGVudCkge1xuICAgICAgY29uc29sZS53YXJuKCdObyBjb2xsYXBzaWJsZSBjb250ZW50IGZvdW5kIGZvciB0b2dnbGU6JywgdG9nZ2xlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgLy8gR2VuZXJhdGUgdW5pcXVlIElEIGZvciBjb250ZW50IGlmIGl0IGRvZXNuJ3QgaGF2ZSBvbmVcbiAgICBpZiAoIWNvbnRlbnQuaWQpIHtcbiAgICAgIGNvbnRlbnQuaWQgPSBgY29sbGFwc2UtY29udGVudC0ke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDUpfWA7XG4gICAgfVxuICAgIFxuICAgIC8vIFNldHVwIEFSSUEgYXR0cmlidXRlc1xuICAgIGNvbnN0IGFyaWFDb250cm9sbGVyID0gYXJpYS5zZXR1cEV4cGFuZGFibGUodG9nZ2xlLCBjb250ZW50LCBmYWxzZSk7XG4gICAgXG4gICAgLy8gU3RvcmUgdG9nZ2xlIGRhdGFcbiAgICB0aGlzLnRvZ2dsZXMuc2V0KHRvZ2dsZSwge1xuICAgICAgY29udGVudCxcbiAgICAgIGNoZXZyb24sXG4gICAgICBhcmlhQ29udHJvbGxlcixcbiAgICAgIGxpc3RJdGVtLFxuICAgICAgaXNFeHBhbmRlZDogZmFsc2VcbiAgICB9KTtcbiAgICBcbiAgICAvLyBMb2FkIHNhdmVkIHN0YXRlIGlmIGVuYWJsZWRcbiAgICBpZiAodGhpcy5vcHRpb25zLnN0b3JlU3RhdGUpIHtcbiAgICAgIHRoaXMubG9hZFRvZ2dsZVN0YXRlKHRvZ2dsZSk7XG4gICAgfVxuICAgIFxuICAgIC8vIEFkZCBjb21wb25lbnQgdHJhY2tpbmdcbiAgICB0b2dnbGUuc2V0QXR0cmlidXRlKCdkYXRhLWNvbGxhcHNlLWNvbXBvbmVudCcsIHRoaXMuaWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmQgdGhlIGNvbnRlbnQgZWxlbWVudCBmb3IgYSB0b2dnbGVcbiAgICovXG4gIGZpbmRDb250ZW50KHRvZ2dsZSwgY29udGFpbmVyKSB7XG4gICAgLy8gU3RyYXRlZ3kgMTogTmV4dCBzaWJsaW5nIHdpdGggc3BlY2lmaWMgY2xhc3NcbiAgICBsZXQgY29udGVudCA9IHRvZ2dsZS5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgaWYgKGNvbnRlbnQgJiYgKGNvbnRlbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCduZXN0ZWQtY29udGVudCcpIHx8IGNvbnRlbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjb2xsYXBzZS1jb250ZW50JykpKSB7XG4gICAgICByZXR1cm4gY29udGVudDtcbiAgICB9XG4gICAgXG4gICAgLy8gU3RyYXRlZ3kgMjogTG9vayBmb3IgZGF0YS10YXJnZXQgYXR0cmlidXRlXG4gICAgY29uc3QgdGFyZ2V0U2VsZWN0b3IgPSB0b2dnbGUuZ2V0QXR0cmlidXRlKCdkYXRhLXRhcmdldCcpO1xuICAgIGlmICh0YXJnZXRTZWxlY3Rvcikge1xuICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0U2VsZWN0b3IpO1xuICAgIH1cbiAgICBcbiAgICAvLyBTdHJhdGVneSAzOiBGaW5kIGluIGNvbnRhaW5lclxuICAgIGlmIChjb250YWluZXIpIHtcbiAgICAgIGNvbnRlbnQgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLm5lc3RlZC1jb250ZW50LCAuY29sbGFwc2UtY29udGVudCwgW2RhdGEtY29sbGFwc2UtY29udGVudF0nKTtcbiAgICAgIGlmIChjb250ZW50KSByZXR1cm4gY29udGVudDtcbiAgICB9XG4gICAgXG4gICAgLy8gU3RyYXRlZ3kgNDogTmV4dCBzaWJsaW5nIChnZW5lcmljKVxuICAgIHJldHVybiB0b2dnbGUubmV4dEVsZW1lbnRTaWJsaW5nO1xuICB9XG5cbiAgLyoqXG4gICAqIEJpbmQgZXZlbnQgbGlzdGVuZXJzXG4gICAqL1xuICBiaW5kRXZlbnRzKCkge1xuICAgIC8vIFVzZSBldmVudCBkZWxlZ2F0aW9uIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2VcbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoZG9jdW1lbnQsICdjbGljaycsIChlKSA9PiB7XG4gICAgICBjb25zdCB0b2dnbGUgPSBlLnRhcmdldC5jbG9zZXN0KCcudG9nZ2xlLWNvbGxhcHNlJyk7XG4gICAgICBpZiAodG9nZ2xlICYmIHRoaXMudG9nZ2xlcy5oYXModG9nZ2xlKSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuaGFuZGxlVG9nZ2xlQ2xpY2sodG9nZ2xlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICAvLyBLZXlib2FyZCBzdXBwb3J0XG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGRvY3VtZW50LCAna2V5ZG93bicsIChlKSA9PiB7XG4gICAgICBjb25zdCB0b2dnbGUgPSBlLnRhcmdldC5jbG9zZXN0KCcudG9nZ2xlLWNvbGxhcHNlJyk7XG4gICAgICBpZiAodG9nZ2xlICYmIHRoaXMudG9nZ2xlcy5oYXModG9nZ2xlKSkge1xuICAgICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicgfHwgZS5rZXkgPT09ICcgJykge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB0aGlzLmhhbmRsZVRvZ2dsZUNsaWNrKHRvZ2dsZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgdG9nZ2xlIGNsaWNrXG4gICAqL1xuICBhc3luYyBoYW5kbGVUb2dnbGVDbGljayh0b2dnbGUpIHtcbiAgICBjb25zdCB0b2dnbGVEYXRhID0gdGhpcy50b2dnbGVzLmdldCh0b2dnbGUpO1xuICAgIGlmICghdG9nZ2xlRGF0YSkgcmV0dXJuO1xuICAgIFxuICAgIGNvbnN0IHsgY29udGVudCwgY2hldnJvbiwgYXJpYUNvbnRyb2xsZXIsIGlzRXhwYW5kZWQgfSA9IHRvZ2dsZURhdGE7XG4gICAgXG4gICAgLy8gXHVEODNEXHVERTgwIFVQREFURUQ6IFVzZSBhbmltYXRpb24gYnJpZGdlIGZvciBzdGF0ZSBtYW5hZ2VtZW50XG4gICAgYW5pbWF0aW9uQnJpZGdlLnNldENvbXBvbmVudFN0YXRlKHRoaXMuZWxlbWVudCwgaXNFeHBhbmRlZCA/ICdjb2xsYXBzaW5nJyA6ICdleHBhbmRpbmcnKTtcbiAgICBhbmltYXRpb25CcmlkZ2Uuc2V0TG9hZGluZ1N0YXRlKHRoaXMuZWxlbWVudCwgdHJ1ZSk7XG4gICAgXG4gICAgLy8gVXBkYXRlIHN0YXRlXG4gICAgdG9nZ2xlRGF0YS5pc0V4cGFuZGVkID0gIWlzRXhwYW5kZWQ7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGlmICh0b2dnbGVEYXRhLmlzRXhwYW5kZWQpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5leHBhbmQodG9nZ2xlLCB0b2dnbGVEYXRhKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF3YWl0IHRoaXMuY29sbGFwc2UodG9nZ2xlLCB0b2dnbGVEYXRhKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gXHVEODNEXHVERTgwIFVQREFURUQ6IEFuaW1hdGlvbiBjb21wbGV0ZSAtIHVwZGF0ZSBzdGF0ZXMgdXNpbmcgYnJpZGdlXG4gICAgICBhbmltYXRpb25CcmlkZ2Uuc2V0TG9hZGluZ1N0YXRlKHRoaXMuZWxlbWVudCwgZmFsc2UpO1xuICAgICAgYW5pbWF0aW9uQnJpZGdlLnNldENvbXBvbmVudFN0YXRlKHRoaXMuZWxlbWVudCwgdG9nZ2xlRGF0YS5pc0V4cGFuZGVkID8gJ2V4cGFuZGVkJyA6ICdjb2xsYXBzZWQnKTtcbiAgICAgIFxuICAgICAgLy8gU2F2ZSBzdGF0ZSBpZiBlbmFibGVkXG4gICAgICBpZiAodGhpcy5vcHRpb25zLnN0b3JlU3RhdGUpIHtcbiAgICAgICAgdGhpcy5zYXZlVG9nZ2xlU3RhdGUodG9nZ2xlKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gRW1pdCBldmVudHNcbiAgICAgIHRoaXMuZW1pdCgndG9nZ2xlJywge1xuICAgICAgICB0b2dnbGUsXG4gICAgICAgIGV4cGFuZGVkOiB0b2dnbGVEYXRhLmlzRXhwYW5kZWQsXG4gICAgICAgIGNvbnRlbnRcbiAgICAgIH0pO1xuICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1RvZ2dsZSBhbmltYXRpb24gZmFpbGVkOicsIGVycm9yKTtcbiAgICAgIC8vIFx1RDgzRFx1REU4MCBVUERBVEVEOiBFcnJvciBoYW5kbGluZyB3aXRoIHN0YXRlIHJlc2V0IHVzaW5nIGJyaWRnZVxuICAgICAgYW5pbWF0aW9uQnJpZGdlLnNldExvYWRpbmdTdGF0ZSh0aGlzLmVsZW1lbnQsIGZhbHNlKTtcbiAgICAgIGFuaW1hdGlvbkJyaWRnZS5zZXRDb21wb25lbnRTdGF0ZSh0aGlzLmVsZW1lbnQsICdlcnJvcicpO1xuICAgICAgLy8gUmV2ZXJ0IHN0YXRlIG9uIGVycm9yXG4gICAgICB0b2dnbGVEYXRhLmlzRXhwYW5kZWQgPSAhdG9nZ2xlRGF0YS5pc0V4cGFuZGVkO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFeHBhbmQgY29udGVudFxuICAgKi9cbiAgYXN5bmMgZXhwYW5kKHRvZ2dsZSwgdG9nZ2xlRGF0YSkge1xuICAgIGNvbnN0IHsgY29udGVudCwgY2hldnJvbiwgYXJpYUNvbnRyb2xsZXIgfSA9IHRvZ2dsZURhdGE7XG4gICAgXG4gICAgLy8gU2hvdyBjb250ZW50IGltbWVkaWF0ZWx5IGZvciBzY3JlZW4gcmVhZGVyc1xuICAgIGNvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgXG4gICAgLy8gVXBkYXRlIEFSSUFcbiAgICBhcmlhQ29udHJvbGxlci5leHBhbmQoKTtcbiAgICBcbiAgICAvLyBBbmltYXRlIGNvbnRlbnQgZXhwYW5zaW9uXG4gICAgaWYgKCF3aW5kb3cubWF0Y2hNZWRpYSgnKHByZWZlcnMtcmVkdWNlZC1tb3Rpb246IHJlZHVjZSknKS5tYXRjaGVzKSB7XG4gICAgICBjb250ZW50LmNsYXNzTGlzdC5hZGQoJ2V4cGFuZGluZycpO1xuICAgICAgYXdhaXQgdHJhbnNpdGlvbnMuc2xpZGVEb3duKGNvbnRlbnQsIHRoaXMub3B0aW9ucy5hbmltYXRpb25EdXJhdGlvbik7XG4gICAgICBjb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2V4cGFuZGluZycpO1xuICAgIH1cbiAgICBcbiAgICAgICAgICAgIGFuaW1hdGlvbkJyaWRnZS5zZXRDb2xsYXBzZVN0YXRlKGNvbnRlbnQsICdleHBhbmRlZCcpO1xuICAgIFxuICAgIC8vIFJvdGF0ZSBjaGV2cm9uXG4gICAgaWYgKGNoZXZyb24pIHtcbiAgICAgIGNoZXZyb24uY2xhc3NMaXN0LmFkZCgncm90YXRlLTkwJyk7XG4gICAgfVxuICAgIFxuICAgIC8vIEFubm91bmNlIHRvIHNjcmVlbiByZWFkZXJzXG4gICAgaWYgKHdpbmRvdy5hbm5vdW5jZVRvU2NyZWVuUmVhZGVyKSB7XG4gICAgICB3aW5kb3cuYW5ub3VuY2VUb1NjcmVlblJlYWRlcignU2VjdGlvbiBleHBhbmRlZCcpO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLmVtaXQoJ2V4cGFuZGVkJywgeyB0b2dnbGUsIGNvbnRlbnQgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ29sbGFwc2UgY29udGVudFxuICAgKi9cbiAgYXN5bmMgY29sbGFwc2UodG9nZ2xlLCB0b2dnbGVEYXRhKSB7XG4gICAgY29uc3QgeyBjb250ZW50LCBjaGV2cm9uLCBhcmlhQ29udHJvbGxlciB9ID0gdG9nZ2xlRGF0YTtcbiAgICBcbiAgICAvLyBVcGRhdGUgQVJJQVxuICAgIGFyaWFDb250cm9sbGVyLmNvbGxhcHNlKCk7XG4gICAgXG4gICAgLy8gQW5pbWF0ZSBjb250ZW50IGNvbGxhcHNlXG4gICAgaWYgKCF3aW5kb3cubWF0Y2hNZWRpYSgnKHByZWZlcnMtcmVkdWNlZC1tb3Rpb246IHJlZHVjZSknKS5tYXRjaGVzKSB7XG4gICAgICBjb250ZW50LmNsYXNzTGlzdC5hZGQoJ2NvbGxhcHNpbmcnKTtcbiAgICAgIGF3YWl0IHRyYW5zaXRpb25zLnNsaWRlVXAoY29udGVudCwgdGhpcy5vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uKTtcbiAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgnY29sbGFwc2luZycpO1xuICAgIH1cbiAgICBcbiAgICAgICAgICAgIGFuaW1hdGlvbkJyaWRnZS5zZXRDb2xsYXBzZVN0YXRlKGNvbnRlbnQsICdjb2xsYXBzZWQnKTtcbiAgICBjb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgXG4gICAgLy8gUm90YXRlIGNoZXZyb24gYmFja1xuICAgIGlmIChjaGV2cm9uKSB7XG4gICAgICBjaGV2cm9uLmNsYXNzTGlzdC5yZW1vdmUoJ3JvdGF0ZS05MCcpO1xuICAgIH1cbiAgICBcbiAgICAvLyBBbm5vdW5jZSB0byBzY3JlZW4gcmVhZGVyc1xuICAgIGlmICh3aW5kb3cuYW5ub3VuY2VUb1NjcmVlblJlYWRlcikge1xuICAgICAgd2luZG93LmFubm91bmNlVG9TY3JlZW5SZWFkZXIoJ1NlY3Rpb24gY29sbGFwc2VkJyk7XG4gICAgfVxuICAgIFxuICAgIHRoaXMuZW1pdCgnY29sbGFwc2VkJywgeyB0b2dnbGUsIGNvbnRlbnQgfSk7XG4gIH1cblxuICAvKipcbiAgICogRXhwYW5kIHNwZWNpZmljIHRvZ2dsZSBwcm9ncmFtbWF0aWNhbGx5XG4gICAqL1xuICBhc3luYyBleHBhbmRUb2dnbGUodG9nZ2xlKSB7XG4gICAgY29uc3QgdG9nZ2xlRGF0YSA9IHRoaXMudG9nZ2xlcy5nZXQodG9nZ2xlKTtcbiAgICBpZiAoIXRvZ2dsZURhdGEgfHwgdG9nZ2xlRGF0YS5pc0V4cGFuZGVkKSByZXR1cm47XG4gICAgXG4gICAgcmV0dXJuIHRoaXMuaGFuZGxlVG9nZ2xlQ2xpY2sodG9nZ2xlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb2xsYXBzZSBzcGVjaWZpYyB0b2dnbGUgcHJvZ3JhbW1hdGljYWxseVxuICAgKi9cbiAgYXN5bmMgY29sbGFwc2VUb2dnbGUodG9nZ2xlKSB7XG4gICAgY29uc3QgdG9nZ2xlRGF0YSA9IHRoaXMudG9nZ2xlcy5nZXQodG9nZ2xlKTtcbiAgICBpZiAoIXRvZ2dsZURhdGEgfHwgIXRvZ2dsZURhdGEuaXNFeHBhbmRlZCkgcmV0dXJuO1xuICAgIFxuICAgIHJldHVybiB0aGlzLmhhbmRsZVRvZ2dsZUNsaWNrKHRvZ2dsZSk7XG4gIH1cblxuICAvKipcbiAgICogRXhwYW5kIGFsbCB0b2dnbGVzXG4gICAqL1xuICBhc3luYyBleHBhbmRBbGwoKSB7XG4gICAgY29uc3QgZXhwYW5kUHJvbWlzZXMgPSBBcnJheS5mcm9tKHRoaXMudG9nZ2xlcy5rZXlzKCkpXG4gICAgICAuZmlsdGVyKHRvZ2dsZSA9PiAhdGhpcy50b2dnbGVzLmdldCh0b2dnbGUpLmlzRXhwYW5kZWQpXG4gICAgICAubWFwKHRvZ2dsZSA9PiB0aGlzLmV4cGFuZFRvZ2dsZSh0b2dnbGUpKTtcbiAgICBcbiAgICBhd2FpdCBQcm9taXNlLmFsbChleHBhbmRQcm9taXNlcyk7XG4gICAgdGhpcy5lbWl0KCdleHBhbmRlZC1hbGwnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb2xsYXBzZSBhbGwgdG9nZ2xlc1xuICAgKi9cbiAgYXN5bmMgY29sbGFwc2VBbGwoKSB7XG4gICAgY29uc3QgY29sbGFwc2VQcm9taXNlcyA9IEFycmF5LmZyb20odGhpcy50b2dnbGVzLmtleXMoKSlcbiAgICAgIC5maWx0ZXIodG9nZ2xlID0+IHRoaXMudG9nZ2xlcy5nZXQodG9nZ2xlKS5pc0V4cGFuZGVkKVxuICAgICAgLm1hcCh0b2dnbGUgPT4gdGhpcy5jb2xsYXBzZVRvZ2dsZSh0b2dnbGUpKTtcbiAgICBcbiAgICBhd2FpdCBQcm9taXNlLmFsbChjb2xsYXBzZVByb21pc2VzKTtcbiAgICB0aGlzLmVtaXQoJ2NvbGxhcHNlZC1hbGwnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTYXZlIHRvZ2dsZSBzdGF0ZSB0byBzdG9yYWdlXG4gICAqL1xuICBzYXZlVG9nZ2xlU3RhdGUodG9nZ2xlKSB7XG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuc3RvcmVTdGF0ZSkgcmV0dXJuO1xuICAgIFxuICAgIGNvbnN0IHRvZ2dsZURhdGEgPSB0aGlzLnRvZ2dsZXMuZ2V0KHRvZ2dsZSk7XG4gICAgY29uc3Qga2V5ID0gdGhpcy5nZXRTdG9yYWdlS2V5KHRvZ2dsZSk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXQoa2V5LCB7XG4gICAgICAgIGV4cGFuZGVkOiB0b2dnbGVEYXRhLmlzRXhwYW5kZWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIHNhdmUgY29sbGFwc2Ugc3RhdGU6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBMb2FkIHRvZ2dsZSBzdGF0ZSBmcm9tIHN0b3JhZ2VcbiAgICovXG4gIGxvYWRUb2dnbGVTdGF0ZSh0b2dnbGUpIHtcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5zdG9yZVN0YXRlKSByZXR1cm47XG4gICAgXG4gICAgY29uc3Qga2V5ID0gdGhpcy5nZXRTdG9yYWdlS2V5KHRvZ2dsZSk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN0b3JlZCA9IGxvY2FsU3RvcmFnZS5nZXQoa2V5KTtcbiAgICAgIGlmIChzdG9yZWQpIHtcbiAgICAgICAgY29uc3QgeyBleHBhbmRlZCB9ID0gc3RvcmVkOyAvLyBTYWZlU3RvcmFnZSBhbHJlYWR5IGhhbmRsZXMgSlNPTiBwYXJzaW5nXG4gICAgICAgIGlmIChleHBhbmRlZCkge1xuICAgICAgICAgIC8vIEV4cGFuZCB3aXRob3V0IGFuaW1hdGlvbiBvbiBwYWdlIGxvYWRcbiAgICAgICAgICBjb25zdCB0b2dnbGVEYXRhID0gdGhpcy50b2dnbGVzLmdldCh0b2dnbGUpO1xuICAgICAgICAgIHRvZ2dsZURhdGEuaXNFeHBhbmRlZCA9IGZhbHNlOyAvLyBTZXQgdG8gZmFsc2Ugc28gZXhwYW5kIHdvcmtzXG4gICAgICAgICAgdGhpcy5leHBhbmQodG9nZ2xlLCB0b2dnbGVEYXRhKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBsb2FkIGNvbGxhcHNlIHN0YXRlOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IHN0b3JhZ2Uga2V5IGZvciB0b2dnbGVcbiAgICovXG4gIGdldFN0b3JhZ2VLZXkodG9nZ2xlKSB7XG4gICAgY29uc3QgY29udGVudElkID0gdGhpcy50b2dnbGVzLmdldCh0b2dnbGUpLmNvbnRlbnQuaWQ7XG4gICAgcmV0dXJuIGAke3RoaXMub3B0aW9ucy5uYW1lc3BhY2V9LiR7Y29udGVudElkfWA7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGNvbXBvbmVudCBzdGF0aXN0aWNzXG4gICAqL1xuICBnZXRTdGF0cygpIHtcbiAgICBjb25zdCBzdGF0cyA9IHtcbiAgICAgIHRvdGFsVG9nZ2xlczogdGhpcy50b2dnbGVzLnNpemUsXG4gICAgICBleHBhbmRlZDogMCxcbiAgICAgIGNvbGxhcHNlZDogMFxuICAgIH07XG4gICAgXG4gICAgdGhpcy50b2dnbGVzLmZvckVhY2goZGF0YSA9PiB7XG4gICAgICBpZiAoZGF0YS5pc0V4cGFuZGVkKSB7XG4gICAgICAgIHN0YXRzLmV4cGFuZGVkKys7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0cy5jb2xsYXBzZWQrKztcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gc3RhdHM7XG4gIH1cblxuICAvKipcbiAgICogQ3VzdG9tIGNsZWFudXBcbiAgICovXG4gIG9uRGVzdHJveSgpIHtcbiAgICAvLyBDbGVhbiB1cCB0b2dnbGUgcmVmZXJlbmNlc1xuICAgIHRoaXMudG9nZ2xlcy5mb3JFYWNoKChkYXRhLCB0b2dnbGUpID0+IHtcbiAgICAgIHRvZ2dsZS5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtY29sbGFwc2UtY29tcG9uZW50Jyk7XG4gICAgfSk7XG4gICAgdGhpcy50b2dnbGVzLmNsZWFyKCk7XG4gIH1cbn1cblxuLy8gQXV0by1yZWdpc3RlciBjb21wb25lbnRcbkNvbXBvbmVudE1hbmFnZXIucmVnaXN0ZXIoJ2FydGljbGUtY29sbGFwc2UnLCBBcnRpY2xlQ29sbGFwc2UpOyIsICIvKipcbiAqIENoYXQgVUkgTW9kdWxlXG4gKiBIYW5kbGVzIGFsbCB1c2VyIGludGVyZmFjZSBpbnRlcmFjdGlvbnMgYW5kIHN0YXRlIG1hbmFnZW1lbnRcbiAqL1xuXG5pbXBvcnQgeyBhbmltYXRpb25CcmlkZ2UgfSBmcm9tICcuLi8uLi9jb3JlL0FuaW1hdGlvbkJyaWRnZS5qcyc7XG5cbmV4cG9ydCBjbGFzcyBDaGF0VUkge1xuICBjb25zdHJ1Y3RvcihjaGF0TWFuYWdlcikge1xuICAgIHRoaXMuY2hhdCA9IGNoYXRNYW5hZ2VyO1xuICAgIFxuICAgIC8vIFVJIEVsZW1lbnQgcmVmZXJlbmNlc1xuICAgIHRoaXMuZm9ybSA9IG51bGw7XG4gICAgdGhpcy5xdWVzdGlvbklucHV0ID0gbnVsbDtcbiAgICB0aGlzLnNlbmRCdXR0b24gPSBudWxsO1xuICAgIHRoaXMuY2xlYXJBbGxCdXR0b24gPSBudWxsO1xuICAgIHRoaXMuZXhwYW5kQnV0dG9uID0gbnVsbDtcbiAgICB0aGlzLm92ZXJsYXkgPSBudWxsO1xuICAgIHRoaXMucHJldmlvdXNBY3RpdmVFbGVtZW50ID0gbnVsbDtcbiAgICB0aGlzLl9mb2N1c1RyYXBIYW5kbGVyID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWNoZSBVSSBlbGVtZW50IHJlZmVyZW5jZXNcbiAgICovXG4gIGNhY2hlRWxlbWVudHMoKSB7XG4gICAgdGhpcy5mb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoYXQtZm9ybScpO1xuICAgIHRoaXMucXVlc3Rpb25JbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdxdWVzdGlvbicpO1xuICAgIHRoaXMuc2VuZEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZW5kQnV0dG9uJyk7XG4gICAgdGhpcy5jbGVhckFsbEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjbGVhckFsbCcpO1xuICAgIHRoaXMuZXhwYW5kQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4cGFuZENoYXQnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCBhbGwgVUkgZXZlbnQgbGlzdGVuZXJzXG4gICAqL1xuICBzZXR1cEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIGlmICh0aGlzLmZvcm0pIHtcbiAgICAgIHRoaXMuZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSkgPT4gdGhpcy5oYW5kbGVTdWJtaXQoZSkpO1xuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5jbGVhckFsbEJ1dHRvbikge1xuICAgICAgdGhpcy5jbGVhckFsbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2hhdC5oaXN0b3J5LmNsZWFyQ29udmVyc2F0aW9uKCkpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmV4cGFuZEJ1dHRvbikge1xuICAgICAgdGhpcy5leHBhbmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLnRvZ2dsZUV4cGFuZGVkKCkpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnF1ZXN0aW9uSW5wdXQpIHtcbiAgICAgIC8vIEF1dG8tcmVzaXplIHRleHRhcmVhXG4gICAgICB0aGlzLnF1ZXN0aW9uSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB0aGlzLmhhbmRsZVRleHRhcmVhSW5wdXQoKSk7XG4gICAgICBcbiAgICAgIC8vIEVuYWJsZS9kaXNhYmxlIHNlbmQgYnV0dG9uIGJhc2VkIG9uIGNvbnRlbnRcbiAgICAgIHRoaXMucXVlc3Rpb25JbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHRoaXMudG9nZ2xlU2VuZEJ1dHRvbigpKTtcbiAgICAgIFxuICAgICAgLy8gSGFuZGxlIEVudGVyIGtleSBmb3Igc3VibWl0IChTaGlmdCtFbnRlciBmb3IgbmV3IGxpbmUpXG4gICAgICB0aGlzLnF1ZXN0aW9uSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB0aGlzLmhhbmRsZUtleWRvd24oZSkpO1xuICAgIH1cblxuICAgIC8vIEhhbmRsZSB3aW5kb3cgcmVzaXplIGZvciBleHBhbmRlZCBzdGF0ZVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB0aGlzLmhhbmRsZVdpbmRvd1Jlc2l6ZSgpKTtcblxuICAgIC8vIENsb3NlIG9uIEVzY2FwZSB3aGVuIGV4cGFuZGVkXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XG4gICAgICBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY2hhdC5lbGVtZW50O1xuICAgICAgICBpZiAoY29udGFpbmVyICYmIGNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoJ2NoYXQtZXhwYW5kZWQnKSkge1xuICAgICAgICAgIHRoaXMudG9nZ2xlRXhwYW5kZWQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSB3aW5kb3cgcmVzaXplIGV2ZW50c1xuICAgKi9cbiAgaGFuZGxlV2luZG93UmVzaXplKCkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY2hhdC5lbGVtZW50O1xuICAgIGlmIChjb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdjaGF0LWV4cGFuZGVkJykpIHtcbiAgICAgIC8vIFJlLWNhbGN1bGF0ZSBwb3NpdGlvbiBvbiByZXNpemVcbiAgICAgIHRoaXMucmVwb3NpdGlvbkV4cGFuZGVkKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlcG9zaXRpb24gZXhwYW5kZWQgY2hhdCBhZnRlciB3aW5kb3cgcmVzaXplXG4gICAqL1xuICByZXBvc2l0aW9uRXhwYW5kZWQoKSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jaGF0LmVsZW1lbnQ7XG4gICAgXG4gICAgLy8gR2V0IGN1cnJlbnQgcG9zaXRpb25pbmcgdGhhdCBzaG91bGQgc3RheSBmaXhlZFxuICAgIGNvbnN0IGN1cnJlbnRSaWdodCA9IGNvbnRhaW5lci5zdHlsZS5yaWdodDtcbiAgICBjb25zdCBjdXJyZW50VG9wID0gY29udGFpbmVyLnN0eWxlLnRvcDtcbiAgICBjb25zdCByaWdodEVkZ2VGcm9tVmlld3BvcnQgPSBwYXJzZUludChjdXJyZW50UmlnaHQpIHx8IDIwOyAvLyBmYWxsYmFja1xuICAgIFxuICAgIC8vIENhbGN1bGF0ZSBuZXcgd2lkdGggYmFzZWQgb24gd2luZG93IHNpemUgd2l0aCB1cGRhdGVkIHJlc3BvbnNpdmUgbG9naWNcbiAgICBjb25zdCBtYXhWaWV3cG9ydFdpZHRoID0gd2luZG93LmlubmVyV2lkdGggKiAwLjY7XG4gICAgY29uc3QgbWF4Rml4ZWRXaWR0aCA9IDY1MDtcbiAgICBjb25zdCBleHBhbmRlZFdpZHRoID0gTWF0aC5taW4obWF4Vmlld3BvcnRXaWR0aCwgbWF4Rml4ZWRXaWR0aCk7XG4gICAgXG4gICAgLy8gRW5zdXJlIGl0IGRvZXNuJ3QgZ28gb2ZmIHRoZSBsZWZ0IHNpZGUgb2Ygc2NyZWVuICBcbiAgICBjb25zdCBtaW5MZWZ0TWFyZ2luID0gMjA7XG4gICAgY29uc3QgbWF4V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aCAtIHJpZ2h0RWRnZUZyb21WaWV3cG9ydCAtIG1pbkxlZnRNYXJnaW47XG4gICAgY29uc3QgZmluYWxXaWR0aCA9IE1hdGgubWluKGV4cGFuZGVkV2lkdGgsIG1heFdpZHRoKTtcbiAgICBcbiAgICAvLyBVcGRhdGUgd2lkdGggd2hpbGUgcHJlc2VydmluZyBhbGwgcG9zaXRpb25pbmdcbiAgICBjb250YWluZXIuc3R5bGUud2lkdGggPSBgJHtmaW5hbFdpZHRofXB4YDtcbiAgICBjb250YWluZXIuc3R5bGUubWF4V2lkdGggPSBgJHtmaW5hbFdpZHRofXB4YDtcbiAgICBjb250YWluZXIuc3R5bGUucmlnaHQgPSBjdXJyZW50UmlnaHQ7IC8vIE1haW50YWluIHJpZ2h0IGFuY2hvclxuICAgIGNvbnRhaW5lci5zdHlsZS50b3AgPSBjdXJyZW50VG9wOyAvLyBNYWludGFpbiB0b3AgcG9zaXRpb25cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgZm9ybSBzdWJtaXNzaW9uXG4gICAqL1xuICBhc3luYyBoYW5kbGVTdWJtaXQoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIFxuICAgIGNvbnN0IHF1ZXN0aW9uVGV4dCA9IHRoaXMucXVlc3Rpb25JbnB1dC52YWx1ZS50cmltKCk7XG4gICAgaWYgKCFxdWVzdGlvblRleHQpIHJldHVybjtcbiAgICBcbiAgICAvLyBDbGVhciBpbnB1dCBhbmQgcmVzZXQgaGVpZ2h0XG4gICAgdGhpcy5xdWVzdGlvbklucHV0LnZhbHVlID0gJyc7XG4gICAgdGhpcy5xdWVzdGlvbklucHV0LnN0eWxlLmhlaWdodCA9ICc0MnB4JztcbiAgICBcbiAgICAvLyBVcGRhdGUgc2VuZCBidXR0b24gc3RhdGVcbiAgICB0aGlzLnRvZ2dsZVNlbmRCdXR0b24oKTtcbiAgICBcbiAgICAvLyBMZXQgdGhlIG1haW4gY2hhdCBtYW5hZ2VyIGhhbmRsZSB0aGUgc3VibWlzc2lvblxuICAgIGF3YWl0IHRoaXMuY2hhdC5oYW5kbGVRdWVzdGlvblN1Ym1pdChxdWVzdGlvblRleHQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSB0ZXh0YXJlYSBpbnB1dCBmb3IgYXV0by1yZXNpemUgYW5kIGJ1dHRvbiBzdGF0ZVxuICAgKi9cbiAgaGFuZGxlVGV4dGFyZWFJbnB1dCgpIHtcbiAgICBjb25zdCB0ZXh0YXJlYSA9IHRoaXMucXVlc3Rpb25JbnB1dDtcbiAgICBcbiAgICAvLyBSZXNldCBoZWlnaHQgdG8gY2FsY3VsYXRlIG5ldyBoZWlnaHRcbiAgICB0ZXh0YXJlYS5zdHlsZS5oZWlnaHQgPSAnNDJweCc7XG4gICAgXG4gICAgLy8gQ2FsY3VsYXRlIG5ldyBoZWlnaHQgYmFzZWQgb24gY29udGVudFxuICAgIGNvbnN0IHNjcm9sbEhlaWdodCA9IHRleHRhcmVhLnNjcm9sbEhlaWdodDtcbiAgICBjb25zdCBtYXhIZWlnaHQgPSAxMjA7IC8vIG1heC1oZWlnaHQgZnJvbSBDU1NcbiAgICBcbiAgICBpZiAoc2Nyb2xsSGVpZ2h0ID4gNDIpIHtcbiAgICAgIHRleHRhcmVhLnN0eWxlLmhlaWdodCA9IE1hdGgubWluKHNjcm9sbEhlaWdodCwgbWF4SGVpZ2h0KSArICdweCc7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRvZ2dsZSBzZW5kIGJ1dHRvbiBlbmFibGVkL2Rpc2FibGVkIHN0YXRlXG4gICAqL1xuICB0b2dnbGVTZW5kQnV0dG9uKCkge1xuICAgIGlmICh0aGlzLnNlbmRCdXR0b24gJiYgdGhpcy5xdWVzdGlvbklucHV0KSB7XG4gICAgICBjb25zdCBoYXNDb250ZW50ID0gdGhpcy5xdWVzdGlvbklucHV0LnZhbHVlLnRyaW0oKS5sZW5ndGggPiAwO1xuICAgICAgdGhpcy5zZW5kQnV0dG9uLmRpc2FibGVkID0gIWhhc0NvbnRlbnQ7XG4gICAgICBcbiAgICAgIGlmIChoYXNDb250ZW50KSB7XG4gICAgICAgIHRoaXMuc2VuZEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdvcGFjaXR5LTUwJywgJ2N1cnNvci1ub3QtYWxsb3dlZCcpO1xuICAgICAgICB0aGlzLnNlbmRCdXR0b24uY2xhc3NMaXN0LmFkZCgnaG92ZXI6YmctcHJpbWFyeS81MCcsICdkYXJrOmhvdmVyOmJnLXByaW1hcnktZGFyay81MCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zZW5kQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ29wYWNpdHktNTAnLCAnY3Vyc29yLW5vdC1hbGxvd2VkJyk7XG4gICAgICAgIHRoaXMuc2VuZEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdob3ZlcjpiZy1wcmltYXJ5LzUwJywgJ2Rhcms6aG92ZXI6YmctcHJpbWFyeS1kYXJrLzUwJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBrZXlkb3duIGV2ZW50cyBmb3IgdGV4dGFyZWFcbiAgICovXG4gIGhhbmRsZUtleWRvd24oZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQua2V5ID09PSAnRW50ZXInICYmICFldmVudC5zaGlmdEtleSkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuaGFuZGxlU3VibWl0KGV2ZW50KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVG9nZ2xlIGV4cGFuZGVkIHN0YXRlIG9mIGNoYXRcbiAgICovXG4gIHRvZ2dsZUV4cGFuZGVkKCkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY2hhdC5lbGVtZW50O1xuICAgIGNvbnN0IGlzRXhwYW5kZWQgPSBjb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdjaGF0LWV4cGFuZGVkJyk7XG4gICAgXG4gICAgaWYgKGlzRXhwYW5kZWQpIHtcbiAgICAgIC8vIENvbGxhcHNlIGJhY2sgdG8gbm9ybWFsIHNpemUgd2l0aCBzbW9vdGggdHJhbnNpdGlvblxuICAgICAgLy8gQXZvaWQgc2V0dGluZyBhIGdsb2JhbCBjb2xsYXBzZWQgc3RhdGUgb24gdGhlIGNvbnRhaW5lciwgd2hpY2ggaGlkZXMgaXRcbiAgICAgIC8vIGFuaW1hdGlvbkJyaWRnZS5zZXRDb2xsYXBzZVN0YXRlKGNvbnRhaW5lciwgJ2NvbGxhcHNlZCcpO1xuICAgICAgLy8gQ2xlYW4gdXAgYW55IGxlZ2FjeSBjb2xsYXBzZSBtYXJrZXJzIHRoYXQgbWlnaHQgaGF2ZSBiZWVuIHNldCBkdXJpbmcgZXhwYW5kXG4gICAgICBjb250YWluZXIucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWNvbGxhcHNlLXN0YXRlJyk7XG4gICAgICBjb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnZXhwYW5kZWQnLCAnY29sbGFwc2VkJyk7XG4gICAgICBjb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnY2hhdC1leHBhbmRlZCcpO1xuXG4gICAgICAvLyBSZW1vdmUgZGlhbG9nIHNlbWFudGljc1xuICAgICAgY29udGFpbmVyLnJlbW92ZUF0dHJpYnV0ZSgncm9sZScpO1xuICAgICAgY29udGFpbmVyLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1tb2RhbCcpO1xuICAgICAgY29udGFpbmVyLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcpO1xuXG4gICAgICAvLyBSZW1vdmUgb3ZlcmxheSBhbmQgcmVzdG9yZSBzY3JvbGxpbmdcbiAgICAgIHRoaXMuZGVzdHJveU92ZXJsYXkoKTtcbiAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5vdmVyZmxvdyA9ICcnO1xuICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICcnO1xuXG4gICAgICAvLyBUZWFyZG93biBmb2N1cyB0cmFwIGFuZCByZXN0b3JlIGZvY3VzXG4gICAgICB0aGlzLnRlYXJkb3duRm9jdXNUcmFwKCk7XG4gICAgICBpZiAodGhpcy5wcmV2aW91c0FjdGl2ZUVsZW1lbnQpIHtcbiAgICAgICAgdHJ5IHsgdGhpcy5wcmV2aW91c0FjdGl2ZUVsZW1lbnQuZm9jdXMoKTsgfSBjYXRjaCB7fVxuICAgICAgICB0aGlzLnByZXZpb3VzQWN0aXZlRWxlbWVudCA9IG51bGw7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEFkZCBhIHNsaWdodCBkZWxheSB0byBsZXQgYW55IGFuaW1hdGlvbiBmaW5pc2gsIHRoZW4gcmVzdG9yZSBvcmlnaW5hbCBwb3NpdGlvbmluZ1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS53aWR0aCA9ICcnO1xuICAgICAgICBjb250YWluZXIuc3R5bGUubWF4V2lkdGggPSAnJztcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLnJpZ2h0ID0gJyc7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS50b3AgPSAnJztcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLmJvdHRvbSA9ICcnO1xuICAgICAgICBjb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gJyc7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5tYXhIZWlnaHQgPSAnJztcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gJyc7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS56SW5kZXggPSAnJztcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLm92ZXJmbG93ID0gJyc7XG4gICAgICB9LCAxNTApO1xuICAgICAgXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEV4cGFuZCBsZWZ0d2FyZCB3aGlsZSBrZWVwaW5nIHJpZ2h0IGVkZ2UgYW5jaG9yZWRcbiAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdjaGF0LWV4cGFuZGVkJyk7XG4gICAgICBhbmltYXRpb25CcmlkZ2Uuc2V0Q29sbGFwc2VTdGF0ZShjb250YWluZXIsICdleHBhbmRlZCcpO1xuICAgICAgXG4gICAgICAvLyBHZXQgY3VycmVudCBwb3NpdGlvbmluZ1xuICAgICAgY29uc3QgcmVjdCA9IGNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIGNvbnN0IHJpZ2h0RWRnZUZyb21WaWV3cG9ydCA9IHdpbmRvdy5pbm5lcldpZHRoIC0gcmVjdC5yaWdodDtcbiAgICAgIGNvbnN0IGN1cnJlbnRUb3AgPSAxNjsgLy8gY29uc2lzdGVudCB0b3AgbWFyZ2luIGZvciBzaGVldFxuICAgICAgXG4gICAgICAvLyBDYWxjdWxhdGUgZXhwYW5kZWQgd2lkdGggd2l0aCBiZXR0ZXIgcmVzcG9uc2l2ZSBsb2dpY1xuICAgICAgY29uc3QgbWF4Vmlld3BvcnRXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoICogMC42OyAvLyBVc2UgNjAlIGZvciBiZXR0ZXIgVVhcbiAgICAgIGNvbnN0IG1heEZpeGVkV2lkdGggPSA2NTA7IC8vIFNsaWdodGx5IGxhcmdlciBtYXhcbiAgICAgIGNvbnN0IGV4cGFuZGVkV2lkdGggPSBNYXRoLm1pbihtYXhWaWV3cG9ydFdpZHRoLCBtYXhGaXhlZFdpZHRoKTtcbiAgICAgIFxuICAgICAgLy8gRW5zdXJlIGl0IGRvZXNuJ3QgZ28gb2ZmIHRoZSBsZWZ0IHNpZGUgb2Ygc2NyZWVuICBcbiAgICAgIGNvbnN0IG1pbkxlZnRNYXJnaW4gPSAyMDsgLy8gU2xpZ2h0bHkgbW9yZSBtYXJnaW5cbiAgICAgIGNvbnN0IG1heFdpZHRoID0gd2luZG93LmlubmVyV2lkdGggLSByaWdodEVkZ2VGcm9tVmlld3BvcnQgLSBtaW5MZWZ0TWFyZ2luO1xuICAgICAgY29uc3QgZmluYWxXaWR0aCA9IE1hdGgubWluKGV4cGFuZGVkV2lkdGgsIG1heFdpZHRoKTtcbiAgICAgIFxuICAgICAgLy8gQXBwbHkgc21vb3RoIGV4cGFuc2lvbiB3aXRoIHByZXNlcnZlZCBwb3NpdGlvbmluZ1xuICAgICAgY29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJztcbiAgICAgIGNvbnRhaW5lci5zdHlsZS50b3AgPSBgJHtjdXJyZW50VG9wfXB4YDtcbiAgICAgIGNvbnRhaW5lci5zdHlsZS5ib3R0b20gPSAnMTZweCc7IC8vIGhhcmQgc3RvcCBhdCB2aWV3cG9ydCBib3R0b21cbiAgICAgIGNvbnRhaW5lci5zdHlsZS5yaWdodCA9IGAke3JpZ2h0RWRnZUZyb21WaWV3cG9ydH1weGA7IC8vIEtlZXAgcmlnaHQgZWRnZSBhbmNob3JlZFxuICAgICAgY29udGFpbmVyLnN0eWxlLndpZHRoID0gYCR7ZmluYWxXaWR0aH1weGA7XG4gICAgICBjb250YWluZXIuc3R5bGUubWF4V2lkdGggPSBgJHtmaW5hbFdpZHRofXB4YDtcbiAgICAgIGNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSAnYXV0byc7XG4gICAgICBjb250YWluZXIuc3R5bGUub3ZlcmZsb3cgPSAndmlzaWJsZSc7XG4gICAgICBjb250YWluZXIuc3R5bGUuekluZGV4ID0gJzYwJzsgLy8gRW5zdXJlIGl0J3MgYWJvdmUgb3RoZXIgZWxlbWVudHNcblxuICAgICAgLy8gQ3JlYXRlIG92ZXJsYXkgYW5kIHByZXZlbnQgYmFja2dyb3VuZCBzY3JvbGxcbiAgICAgIHRoaXMuY3JlYXRlT3ZlcmxheSgpO1xuICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG4gICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG5cbiAgICAgIC8vIEFkZCBkaWFsb2cgc2VtYW50aWNzIGFuZCBmb2N1cyB0cmFwXG4gICAgICB0aGlzLnByZXZpb3VzQWN0aXZlRWxlbWVudCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgICBjb250YWluZXIuc2V0QXR0cmlidXRlKCdyb2xlJywgJ2RpYWxvZycpO1xuICAgICAgY29udGFpbmVyLnNldEF0dHJpYnV0ZSgnYXJpYS1tb2RhbCcsICd0cnVlJyk7XG4gICAgICBjb250YWluZXIuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ0Fzc2lzdGFudCcpO1xuICAgICAgdGhpcy5zZXR1cEZvY3VzVHJhcChjb250YWluZXIpO1xuICAgICAgdGhpcy5mb2N1c0lucHV0KCk7XG4gICAgfVxuICAgIFxuICAgIC8vIFVwZGF0ZSBleHBhbmQgYnV0dG9uIGljb24gd2l0aCBzbW9vdGggdHJhbnNpdGlvblxuICAgIHRoaXMudXBkYXRlRXhwYW5kQnV0dG9uSWNvbighaXNFeHBhbmRlZCk7XG4gICAgXG4gICAgLy8gRW1pdCBldmVudCBmb3Igb3RoZXIgY29tcG9uZW50cyB0byByZXNwb25kXG4gICAgdGhpcy5jaGF0LmVtaXQoJ2NoYXQ6dG9nZ2xlRXhwYW5kZWQnLCB7IGV4cGFuZGVkOiAhaXNFeHBhbmRlZCB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCBhIHNpbXBsZSBmb2N1cyB0cmFwIHdpdGhpbiB0aGUgY29udGFpbmVyXG4gICAqL1xuICBzZXR1cEZvY3VzVHJhcChjb250YWluZXIpIHtcbiAgICBjb25zdCBnZXRGb2N1c2FibGUgPSAoKSA9PiBBcnJheS5mcm9tKGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKFxuICAgICAgJ2FbaHJlZl0sIGFyZWFbaHJlZl0sIGlucHV0LCBzZWxlY3QsIHRleHRhcmVhLCBidXR0b24sIFt0YWJpbmRleF06bm90KFt0YWJpbmRleD1cIi0xXCJdKSdcbiAgICApKS5maWx0ZXIoZWwgPT4gIWVsLmhhc0F0dHJpYnV0ZSgnZGlzYWJsZWQnKSAmJiBlbC50YWJJbmRleCAhPT0gLTEgJiYgZWwub2Zmc2V0UGFyZW50ICE9PSBudWxsKTtcblxuICAgIHRoaXMuX2ZvY3VzVHJhcEhhbmRsZXIgPSAoZSkgPT4ge1xuICAgICAgaWYgKGUua2V5ICE9PSAnVGFiJykgcmV0dXJuO1xuICAgICAgY29uc3QgZm9jdXNhYmxlcyA9IGdldEZvY3VzYWJsZSgpO1xuICAgICAgaWYgKGZvY3VzYWJsZXMubGVuZ3RoID09PSAwKSByZXR1cm47XG4gICAgICBjb25zdCBmaXJzdCA9IGZvY3VzYWJsZXNbMF07XG4gICAgICBjb25zdCBsYXN0ID0gZm9jdXNhYmxlc1tmb2N1c2FibGVzLmxlbmd0aCAtIDFdO1xuICAgICAgaWYgKGUuc2hpZnRLZXkpIHtcbiAgICAgICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IGZpcnN0KSB7XG4gICAgICAgICAgbGFzdC5mb2N1cygpO1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IGxhc3QpIHtcbiAgICAgICAgICBmaXJzdC5mb2N1cygpO1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9mb2N1c1RyYXBIYW5kbGVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUZWFyZG93biBmb2N1cyB0cmFwXG4gICAqL1xuICB0ZWFyZG93bkZvY3VzVHJhcCgpIHtcbiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNoYXQuZWxlbWVudDtcbiAgICBpZiAodGhpcy5fZm9jdXNUcmFwSGFuZGxlciAmJiBjb250YWluZXIpIHtcbiAgICAgIGNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5fZm9jdXNUcmFwSGFuZGxlcik7XG4gICAgICB0aGlzLl9mb2N1c1RyYXBIYW5kbGVyID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIG1vZGFsIG92ZXJsYXkgYmVoaW5kIHRoZSBleHBhbmRlZCBjaGF0XG4gICAqL1xuICBjcmVhdGVPdmVybGF5KCkge1xuICAgIGlmICh0aGlzLm92ZXJsYXkpIHJldHVybjtcbiAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgb3ZlcmxheS5pZCA9ICdjaGF0T3ZlcmxheSc7XG4gICAgb3ZlcmxheS5jbGFzc05hbWUgPSAnY2hhdC1vdmVybGF5JztcbiAgICBvdmVybGF5LnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xuICAgIG92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLnRvZ2dsZUV4cGFuZGVkKCkpO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQob3ZlcmxheSk7XG4gICAgLy8gYWxsb3cgQ1NTIHRyYW5zaXRpb24gdG8gZmFkZSBpblxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiBvdmVybGF5LmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKSk7XG4gICAgdGhpcy5vdmVybGF5ID0gb3ZlcmxheTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXN0cm95IG1vZGFsIG92ZXJsYXlcbiAgICovXG4gIGRlc3Ryb3lPdmVybGF5KCkge1xuICAgIGlmICghdGhpcy5vdmVybGF5KSByZXR1cm47XG4gICAgY29uc3Qgb3ZlcmxheSA9IHRoaXMub3ZlcmxheTtcbiAgICBvdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTtcbiAgICAvLyB3YWl0IGZvciBmYWRlLW91dCB0aGVuIHJlbW92ZVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgb3ZlcmxheS5yZW1vdmUoKTtcbiAgICB9LCAyMDApO1xuICAgIHRoaXMub3ZlcmxheSA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIGV4cGFuZCBidXR0b24gaWNvbiBiYXNlZCBvbiBzdGF0ZVxuICAgKi9cbiAgdXBkYXRlRXhwYW5kQnV0dG9uSWNvbihpc0V4cGFuZGVkKSB7XG4gICAgaWYgKCF0aGlzLmV4cGFuZEJ1dHRvbikgcmV0dXJuO1xuICAgIFxuICAgIGNvbnN0IGltZyA9IHRoaXMuZXhwYW5kQnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJ2ltZycpO1xuICAgIGlmICghaW1nKSByZXR1cm47XG4gICAgXG4gICAgLy8gQWRkIHNtb290aCBzY2FsZSB0cmFuc2l0aW9uIGR1cmluZyBzdGF0ZSBjaGFuZ2VcbiAgICBpbWcuc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlKDAuOCknO1xuICAgIFxuICAgIC8vIFVwZGF0ZSBpY29uIHNvdXJjZSBhZnRlciBhIGJyaWVmIG1vbWVudCBmb3Igc21vb3RoIHRyYW5zaXRpb25cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIC8vIEdldCB0aGUgY3VycmVudCBwYXRoIHN0cnVjdHVyZSB0byBwcmVzZXJ2ZSByZWxhdGl2ZSBwYXRoc1xuICAgICAgY29uc3QgY3VycmVudFNyYyA9IGltZy5nZXRBdHRyaWJ1dGUoJ3NyYycpIHx8ICcnO1xuICAgICAgY29uc3QgcGF0aFByZWZpeCA9IGN1cnJlbnRTcmMuaW5jbHVkZXMoJ2ljb25zLycpIFxuICAgICAgICA/IGN1cnJlbnRTcmMuc3Vic3RyaW5nKDAsIGN1cnJlbnRTcmMubGFzdEluZGV4T2YoJ2ljb25zLycpKVxuICAgICAgICA6ICcuLyc7XG4gICAgICBcbiAgICAgIGlmIChpc0V4cGFuZGVkKSB7XG4gICAgICAgIC8vIFNob3cgY29sbGFwc2UgaWNvblxuICAgICAgICB0aGlzLmV4cGFuZEJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAnQ29sbGFwc2UgY2hhdCcpO1xuICAgICAgICBpbWcuc3JjID0gcGF0aFByZWZpeCArICdpY29ucy9saWdodC9jb2xsYXBzZS5zdmcnO1xuICAgICAgICBpbWcuYWx0ID0gJ0NvbGxhcHNlJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFNob3cgZXhwYW5kIGljb25cbiAgICAgICAgdGhpcy5leHBhbmRCdXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ0V4cGFuZCBjaGF0Jyk7XG4gICAgICAgIGltZy5zcmMgPSBwYXRoUHJlZml4ICsgJ2ljb25zL2xpZ2h0L2V4cGFuZC5zdmcnO1xuICAgICAgICBpbWcuYWx0ID0gJ0V4cGFuZCc7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFJlc2V0IHRyYW5zZm9ybSBmb3IgdGhlIG5ldyBpY29uXG4gICAgICBpbWcuc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlKDEpJztcbiAgICB9LCAxMDApO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGFsbCByZXF1aXJlZCBVSSBlbGVtZW50cyBhcmUgcHJlc2VudFxuICAgKi9cbiAgdmFsaWRhdGVFbGVtZW50cygpIHtcbiAgICByZXR1cm4gISEodGhpcy5mb3JtICYmIHRoaXMucXVlc3Rpb25JbnB1dCAmJiB0aGlzLnNlbmRCdXR0b24pO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvY3VzIHRoZSBpbnB1dCBmaWVsZFxuICAgKi9cbiAgZm9jdXNJbnB1dCgpIHtcbiAgICBpZiAodGhpcy5xdWVzdGlvbklucHV0KSB7XG4gICAgICB0aGlzLnF1ZXN0aW9uSW5wdXQuZm9jdXMoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXIgdGhlIGlucHV0IGZpZWxkIGFuZCByZXNldCBpdHMgc3RhdGVcbiAgICovXG4gIGNsZWFySW5wdXQoKSB7XG4gICAgaWYgKHRoaXMucXVlc3Rpb25JbnB1dCkge1xuICAgICAgdGhpcy5xdWVzdGlvbklucHV0LnZhbHVlID0gJyc7XG4gICAgICB0aGlzLnF1ZXN0aW9uSW5wdXQuc3R5bGUuaGVpZ2h0ID0gJzQycHgnO1xuICAgICAgdGhpcy50b2dnbGVTZW5kQnV0dG9uKCk7XG4gICAgfVxuICB9XG59IiwgIi8qKlxuICogQ2hhdCBBUEkgTW9kdWxlXG4gKiBIYW5kbGVzIGFsbCBBUEkgaW50ZXJhY3Rpb25zIGFuZCByZXNwb25zZSBwcm9jZXNzaW5nXG4gKi9cblxuaW1wb3J0IHsgc2hvd0xvYWRpbmcsIGhpZGVMb2FkaW5nLCBoYW5kbGVFcnJvciwgbG9jYWxTdG9yYWdlIH0gZnJvbSAnLi4vLi4vdXRpbHMvaW5kZXguanMnO1xuXG5leHBvcnQgY2xhc3MgQ2hhdEFQSSB7XG4gIGNvbnN0cnVjdG9yKGNoYXRNYW5hZ2VyLCBjb25maWcgPSB7fSkge1xuICAgIHRoaXMuY2hhdCA9IGNoYXRNYW5hZ2VyO1xuICAgIGNvbnN0IGlzT2ZmbGluZSA9ICh3aW5kb3cuSHVnb0Vudmlyb25tZW50ICYmIHdpbmRvdy5IdWdvRW52aXJvbm1lbnQuZW52aXJvbm1lbnQgPT09ICdvZmZsaW5lJyk7XG4gICAgdGhpcy5jaGF0RW5kcG9pbnQgPSBpc09mZmxpbmUgPyAnJyA6IChjb25maWcuY2hhdEVuZHBvaW50IHx8ICdodHRwczovL2NoYXQtMi1sYzQ3NjJjbzdhLXVjLmEucnVuLmFwcC8nKTtcbiAgICB0aGlzLnJlcXVlc3RUaW1lb3V0ID0gY29uZmlnLnJlcXVlc3RUaW1lb3V0IHx8IDMwMDAwO1xuICB9XG5cbiAgLyoqXG4gICAqIEZldGNoIGFuc3dlciBmcm9tIEFJIGVuZHBvaW50XG4gICAqL1xuICBhc3luYyBmZXRjaEFuc3dlcihxdWVzdGlvbikge1xuICAgIC8vIFBlcnNpc3QgYSBwZW5kaW5nIHJlcXVlc3QgbWFya2VyIHNvIHdlIGNhbiByZXN1bWUgb3IgaW5mb3JtIG9uIHJlbG9hZFxuICAgIGxvY2FsU3RvcmFnZS5zZXQoJ2NoYXQucGVuZGluZ1JlcXVlc3QnLCB7IHF1ZXN0aW9uLCBzdGFydGVkQXQ6IERhdGUubm93KCkgfSk7XG5cbiAgICBjb25zdCBsb2FkaW5nQnViYmxlID0gdGhpcy5jaGF0LmJ1YmJsZXMuY3JlYXRlTG9hZGluZ0J1YmJsZSgpO1xuICAgIHRoaXMuY2hhdC5idWJibGVzLmFkZENoYXRCdWJibGUobG9hZGluZ0J1YmJsZSwgJ2JvdCcpO1xuICAgIC8vIE1hcmsgdGhlIGxhdGVzdCBwYWlyIGFzIHBlbmRpbmcgc28gaXQgaXMgbm90IHNhdmVkIG1pZC1yZXNwb25zZVxuICAgIGNvbnN0IGxhdGVzdFBhaXIgPSB0aGlzLmNoYXQuY2hhdE1lc3NhZ2VzLmxhc3RFbGVtZW50Q2hpbGQ7XG4gICAgaWYgKGxhdGVzdFBhaXIpIHtcbiAgICAgIGxhdGVzdFBhaXIuZGF0YXNldC5wZW5kaW5nID0gJ3RydWUnO1xuICAgIH1cbiAgICBcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICAgIGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4gY29udHJvbGxlci5hYm9ydCgpLCB0aGlzLnJlcXVlc3RUaW1lb3V0KTtcbiAgICAgIFxuICAgICAgaWYgKGlzT2ZmbGluZSB8fCAhdGhpcy5jaGF0RW5kcG9pbnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdPZmZsaW5lIG1vZGU6IGNoYXQgc2VydmljZSB1bmF2YWlsYWJsZScpO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcbiAgICAgICAgYCR7dGhpcy5jaGF0RW5kcG9pbnR9P3F1ZXJ5PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHF1ZXN0aW9uKX1gLFxuICAgICAgICB7XG4gICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgc2lnbmFsOiBjb250cm9sbGVyLnNpZ25hbFxuICAgICAgICB9XG4gICAgICApO1xuICAgICAgXG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhUVFAgZXJyb3IhIHN0YXR1czogJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBjb25zdCBhbnN3ZXIgPSBkYXRhLmFuc3dlciB8fCAnU29ycnksIEkgY291bGQgbm90IGZldGNoIHRoZSBhbnN3ZXIuJztcbiAgICAgIFxuICAgICAgLy8gQ2xlYW4gdXAgbG9hZGluZyBidWJibGVcbiAgICAgIGNvbnN0IGxvYWRlcklkID0gbG9hZGluZ0J1YmJsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtbG9hZGVyLWlkJyk7XG4gICAgICBpZiAobG9hZGVySWQpIHtcbiAgICAgICAgaGlkZUxvYWRpbmcobG9hZGVySWQpO1xuICAgICAgfVxuICAgICAgbG9hZGluZ0J1YmJsZS5yZW1vdmUoKTtcbiAgICAgIFxuICAgICAgLy8gQWRkIHJlc3BvbnNlIHdpdGggdHlwaW5nIGFuaW1hdGlvblxuICAgICAgY29uc3QgYm90QnViYmxlID0gdGhpcy5jaGF0LmJ1YmJsZXMuY3JlYXRlQ2hhdEJ1YmJsZShhbnN3ZXIsICdib3QnKTtcbiAgICAgIHRoaXMuY2hhdC5idWJibGVzLmFkZENoYXRCdWJibGUoYm90QnViYmxlLCAnYm90Jyk7XG4gICAgICBhd2FpdCB0aGlzLmNoYXQuYnViYmxlcy5hbmltYXRlVHlwaW5nKGJvdEJ1YmJsZSk7XG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlKCdjaGF0LnBlbmRpbmdSZXF1ZXN0Jyk7XG4gICAgICAvLyBFbnN1cmUgcGVuZGluZyBmbGFnIGNsZWFyZWQgYW5kIGhpc3Rvcnkgc2F2ZWQgYWZ0ZXIgY29tcGxldGlvblxuICAgICAgY29uc3QgY29tcGxldGVkUGFpciA9IHRoaXMuY2hhdC5jaGF0TWVzc2FnZXMubGFzdEVsZW1lbnRDaGlsZDtcbiAgICAgIGlmIChjb21wbGV0ZWRQYWlyICYmIGNvbXBsZXRlZFBhaXIuZGF0YXNldCAmJiBjb21wbGV0ZWRQYWlyLmRhdGFzZXQucGVuZGluZykge1xuICAgICAgICBkZWxldGUgY29tcGxldGVkUGFpci5kYXRhc2V0LnBlbmRpbmc7XG4gICAgICB9XG4gICAgICB0aGlzLmNoYXQuaGlzdG9yeS5zYXZlQ2hhdEhpc3RvcnkoKTtcbiAgICAgIFxuICAgICAgLy8gQW5ub3VuY2UgdG8gc2NyZWVuIHJlYWRlcnNcbiAgICAgIHRoaXMuYW5ub3VuY2VUb1NjcmVlblJlYWRlcihgQUkgcmVzcG9uc2U6ICR7YW5zd2VyLnN1YnN0cmluZygwLCAxMDApfS4uLmApO1xuICAgICAgXG4gICAgICAvLyBFbWl0IHN1Y2Nlc3MgZXZlbnRcbiAgICAgIHRoaXMuY2hhdC5lbWl0KCdjaGF0OnJlc3BvbnNlUmVjZWl2ZWQnLCB7IHF1ZXN0aW9uLCBhbnN3ZXIgfSk7XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gQ2xlYW4gdXAgbG9hZGluZyBidWJibGVcbiAgICAgIGNvbnN0IGxvYWRlcklkID0gbG9hZGluZ0J1YmJsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtbG9hZGVyLWlkJyk7XG4gICAgICBpZiAobG9hZGVySWQpIHtcbiAgICAgICAgaGlkZUxvYWRpbmcobG9hZGVySWQpO1xuICAgICAgfVxuICAgICAgbG9hZGluZ0J1YmJsZS5yZW1vdmUoKTtcbiAgICAgIFxuICAgICAgLy8gSGFuZGxlIGRpZmZlcmVudCBlcnJvciB0eXBlc1xuICAgICAgYXdhaXQgdGhpcy5oYW5kbGVGZXRjaEVycm9yKGVycm9yLCBxdWVzdGlvbik7XG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlKCdjaGF0LnBlbmRpbmdSZXF1ZXN0Jyk7XG4gICAgICAvLyBDbGVhciBwZW5kaW5nIHN0YXRlIG9uIGVycm9yIGFzIHdlbGwsIGFuZCBzYXZlIGhpc3RvcnlcbiAgICAgIGNvbnN0IGVycm9yZWRQYWlyID0gdGhpcy5jaGF0LmNoYXRNZXNzYWdlcy5sYXN0RWxlbWVudENoaWxkO1xuICAgICAgaWYgKGVycm9yZWRQYWlyICYmIGVycm9yZWRQYWlyLmRhdGFzZXQgJiYgZXJyb3JlZFBhaXIuZGF0YXNldC5wZW5kaW5nKSB7XG4gICAgICAgIGRlbGV0ZSBlcnJvcmVkUGFpci5kYXRhc2V0LnBlbmRpbmc7XG4gICAgICB9XG4gICAgICB0aGlzLmNoYXQuaGlzdG9yeS5zYXZlQ2hhdEhpc3RvcnkoKTtcbiAgICAgIFxuICAgICAgLy8gRW1pdCBlcnJvciBldmVudFxuICAgICAgdGhpcy5jaGF0LmVtaXQoJ2NoYXQ6ZXJyb3InLCB7IHF1ZXN0aW9uLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIGZldGNoIGVycm9ycyB3aXRoIHVzZXItZnJpZW5kbHkgbWVzc2FnZXNcbiAgICovXG4gIGFzeW5jIGhhbmRsZUZldGNoRXJyb3IoZXJyb3IsIHF1ZXN0aW9uKSB7XG4gICAgbGV0IGVycm9yTWVzc2FnZSA9ICdTb3JyeSwgSSBlbmNvdW50ZXJlZCBhbiBlcnJvci4gUGxlYXNlIHRyeSBhZ2Fpbi4nO1xuICAgIFxuICAgIGlmIChlcnJvci5uYW1lID09PSAnQWJvcnRFcnJvcicpIHtcbiAgICAgIGVycm9yTWVzc2FnZSA9ICdSZXF1ZXN0IHRpbWVkIG91dC4gUGxlYXNlIGNoZWNrIHlvdXIgY29ubmVjdGlvbiBhbmQgdHJ5IGFnYWluLic7XG4gICAgfSBlbHNlIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdOZXR3b3JrRXJyb3InKSB8fCBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdGYWlsZWQgdG8gZmV0Y2gnKSkge1xuICAgICAgZXJyb3JNZXNzYWdlID0gJ05ldHdvcmsgZXJyb3IuIFBsZWFzZSBjaGVjayB5b3VyIGludGVybmV0IGNvbm5lY3Rpb24uJztcbiAgICB9IGVsc2UgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJzUwMCcpKSB7XG4gICAgICBlcnJvck1lc3NhZ2UgPSAnU2VydmVyIGVycm9yLiBQbGVhc2UgdHJ5IGFnYWluIGluIGEgbW9tZW50Lic7XG4gICAgfSBlbHNlIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCc0MDQnKSkge1xuICAgICAgZXJyb3JNZXNzYWdlID0gJ0NoYXQgc2VydmljZSB0ZW1wb3JhcmlseSB1bmF2YWlsYWJsZS4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nO1xuICAgIH1cbiAgICBcbiAgICAvLyBDcmVhdGUgZXJyb3IgYnViYmxlXG4gICAgY29uc3QgZXJyb3JCdWJibGUgPSB0aGlzLmNoYXQuYnViYmxlcy5jcmVhdGVDaGF0QnViYmxlKGVycm9yTWVzc2FnZSwgJ2JvdCcsICdlcnJvcicpO1xuICAgIHRoaXMuY2hhdC5idWJibGVzLmFkZENoYXRCdWJibGUoZXJyb3JCdWJibGUsICdib3QnKTtcbiAgICBcbiAgICAvLyBMb2cgZGV0YWlsZWQgZXJyb3IgZm9yIGRlYnVnZ2luZ1xuICAgIGNvbnNvbGUuZXJyb3IoJ0NoYXQgQVBJIEVycm9yOicsIHtcbiAgICAgIHF1ZXN0aW9uLFxuICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXG4gICAgICBzdGFjazogZXJyb3Iuc3RhY2ssXG4gICAgICBlbmRwb2ludDogdGhpcy5jaGF0RW5kcG9pbnRcbiAgICB9KTtcbiAgICBcbiAgICAvLyBVc2UgZ2xvYmFsIGVycm9yIGhhbmRsZXIgaWYgYXZhaWxhYmxlXG4gICAgaWYgKHR5cGVvZiBoYW5kbGVFcnJvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgaGFuZGxlRXJyb3IoZXJyb3IsICdDaGF0IEFQSScpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBbm5vdW5jZSBtZXNzYWdlIHRvIHNjcmVlbiByZWFkZXJzXG4gICAqL1xuICBhbm5vdW5jZVRvU2NyZWVuUmVhZGVyKG1lc3NhZ2UpIHtcbiAgICBjb25zdCBhbm5vdW5jZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBhbm5vdW5jZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWxpdmUnLCAncG9saXRlJyk7XG4gICAgYW5ub3VuY2VtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1hdG9taWMnLCAndHJ1ZScpO1xuICAgIGFubm91bmNlbWVudC5jbGFzc05hbWUgPSAnc3Itb25seSc7XG4gICAgYW5ub3VuY2VtZW50LnRleHRDb250ZW50ID0gbWVzc2FnZTtcbiAgICBcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGFubm91bmNlbWVudCk7XG4gICAgXG4gICAgLy8gUmVtb3ZlIGFmdGVyIGFubm91bmNlbWVudFxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChhbm5vdW5jZW1lbnQpO1xuICAgIH0sIDEwMDApO1xuICB9XG5cbiAgLyoqXG4gICAqIFRlc3QgQVBJIGNvbm5lY3Rpdml0eVxuICAgKi9cbiAgYXN5bmMgdGVzdENvbm5lY3Rpb24oKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgICBjb25zdCB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IGNvbnRyb2xsZXIuYWJvcnQoKSwgNTAwMCk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGhpcy5jaGF0RW5kcG9pbnQsIHtcbiAgICAgICAgbWV0aG9kOiAnSEVBRCcsXG4gICAgICAgIHNpZ25hbDogY29udHJvbGxlci5zaWduYWxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgIHJldHVybiByZXNwb25zZS5vaztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKCdDaGF0IEFQSSBjb25uZWN0aW9uIHRlc3QgZmFpbGVkOicsIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgQVBJIGNvbmZpZ3VyYXRpb25cbiAgICovXG4gIHVwZGF0ZUNvbmZpZyhjb25maWcpIHtcbiAgICBpZiAoY29uZmlnLmNoYXRFbmRwb2ludCkge1xuICAgICAgdGhpcy5jaGF0RW5kcG9pbnQgPSBjb25maWcuY2hhdEVuZHBvaW50O1xuICAgIH1cbiAgICBpZiAoY29uZmlnLnJlcXVlc3RUaW1lb3V0KSB7XG4gICAgICB0aGlzLnJlcXVlc3RUaW1lb3V0ID0gY29uZmlnLnJlcXVlc3RUaW1lb3V0O1xuICAgIH1cbiAgfVxufSIsICIvKipcbiAqIENoYXQgSGlzdG9yeSBNb2R1bGVcbiAqIEhhbmRsZXMgY2hhdCBwZXJzaXN0ZW5jZSwgbG9hZGluZywgYW5kIGNvbnZlcnNhdGlvbiBtYW5hZ2VtZW50XG4gKi9cblxuaW1wb3J0IHsgbG9jYWxTdG9yYWdlIH0gZnJvbSAnLi4vLi4vdXRpbHMvaW5kZXguanMnO1xuXG5leHBvcnQgY2xhc3MgQ2hhdEhpc3Rvcnkge1xuICBjb25zdHJ1Y3RvcihjaGF0TWFuYWdlcikge1xuICAgIHRoaXMuY2hhdCA9IGNoYXRNYW5hZ2VyO1xuICAgIHRoaXMuc3RvcmFnZUtleSA9ICdjaGF0SGlzdG9yeSc7XG4gIH1cblxuICAvKipcbiAgICogTG9hZCBjaGF0IGhpc3RvcnkgZnJvbSBsb2NhbFN0b3JhZ2VcbiAgICovXG4gIGFzeW5jIGxvYWRDaGF0SGlzdG9yeSgpIHtcbiAgICBjb25zdCBjaGF0SGlzdG9yeSA9IGxvY2FsU3RvcmFnZS5nZXQodGhpcy5zdG9yYWdlS2V5LCBbXSk7XG4gICAgdGhpcy5jaGF0LmNoYXRNZXNzYWdlcy5pbm5lckhUTUwgPSAnJztcblxuICAgIGlmICghY2hhdEhpc3RvcnkgfHwgY2hhdEhpc3RvcnkubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBBZGQgaW5pdGlhbCBRJkEgaWYgbm8gaGlzdG9yeSBleGlzdHNcbiAgICAgIHRoaXMuYWRkSW5pdGlhbFFBUGFpcihcbiAgICAgICAgJ0hvdyBkbyBJIHVzZSB0aGlzIGNoYXQ/JyxcbiAgICAgICAgJ0FzayBhIHF1ZXN0aW9uIGFib3V0IHRoZSBkb2N1bWVudGF0aW9uLiBZb3UgY2FuIGFsc28gdG9nZ2xlIGJldHdlZW4gY2hhdCBhbmQgdGFibGUgb2YgY29udGVudHMgdmlldyB1c2luZyB0aGUgbmF2aWdhdGlvbiBjb250cm9scy4nXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBMb2FkIGV4aXN0aW5nIGNoYXQgaGlzdG9yeVxuICAgICAgZm9yIChjb25zdCBwYWlyIG9mIGNoYXRIaXN0b3J5KSB7XG4gICAgICAgIGlmIChwYWlyLnVzZXIgJiYgcGFpci5ib3QpIHtcbiAgICAgICAgICBjb25zdCB1c2VyQnViYmxlID0gdGhpcy5jaGF0LmJ1YmJsZXMuY3JlYXRlQ2hhdEJ1YmJsZShwYWlyLnVzZXIsICd1c2VyJyk7XG4gICAgICAgICAgdGhpcy5jaGF0LmJ1YmJsZXMuYWRkQ2hhdEJ1YmJsZSh1c2VyQnViYmxlLCAndXNlcicpO1xuICAgICAgICAgIGNvbnN0IGJvdEJ1YmJsZSA9IHRoaXMuY2hhdC5idWJibGVzLmNyZWF0ZUNoYXRCdWJibGUocGFpci5ib3QsICdib3QnKTtcbiAgICAgICAgICB0aGlzLmNoYXQuYnViYmxlcy5hZGRDaGF0QnViYmxlKGJvdEJ1YmJsZSwgJ2JvdCcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU2Nyb2xsIHRvIGJvdHRvbSBhZnRlciBsb2FkaW5nXG4gICAgdGhpcy5zY3JvbGxUb0JvdHRvbSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNhdmUgY2hhdCBoaXN0b3J5IHRvIGxvY2FsU3RvcmFnZVxuICAgKi9cbiAgc2F2ZUNoYXRIaXN0b3J5KCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjaGF0TWVzc2FnZXMgPSBBcnJheS5mcm9tKHRoaXMuY2hhdC5jaGF0TWVzc2FnZXMuY2hpbGRyZW4pO1xuICAgICAgY29uc3QgY2hhdEhpc3RvcnkgPSBjaGF0TWVzc2FnZXMubWFwKChwYWlyKSA9PiB7XG4gICAgICAgIC8vIElnbm9yZSBwYWlycyB0aGF0IGFyZSBwZW5kaW5nIChlLmcuLCB1c2VyIGFza2VkLCBib3Qgbm90IGFuc3dlcmVkIHlldClcbiAgICAgICAgaWYgKHBhaXIuZGF0YXNldCAmJiBwYWlyLmRhdGFzZXQucGVuZGluZyA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYnViYmxlcyA9IEFycmF5LmZyb20ocGFpci5jaGlsZHJlbik7XG4gICAgICAgIGlmIChidWJibGVzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgcmV0dXJuIHsgXG4gICAgICAgICAgICB1c2VyOiBidWJibGVzWzBdLmlubmVyVGV4dCxcbiAgICAgICAgICAgIGJvdDogYnViYmxlc1sxXS5pbm5lclRleHQsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfSkuZmlsdGVyKEJvb2xlYW4pOyAvLyBSZW1vdmUgbnVsbCBlbnRyaWVzXG4gICAgICBcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXQodGhpcy5zdG9yYWdlS2V5LCBjaGF0SGlzdG9yeSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzYXZlIGNoYXQgaGlzdG9yeTonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFyIGVudGlyZSBjb252ZXJzYXRpb25cbiAgICovXG4gIGNsZWFyQ29udmVyc2F0aW9uKCkge1xuICAgIHRoaXMuY2hhdC5jaGF0TWVzc2FnZXMuaW5uZXJIVE1MID0gJyc7XG4gICAgdGhpcy5zYXZlQ2hhdEhpc3RvcnkoKTtcbiAgICB0aGlzLmNoYXQuZW1pdCgnY2hhdDpjb252ZXJzYXRpb25DbGVhcmVkJyk7XG4gICAgXG4gICAgLy8gQWRkIGluaXRpYWwgZ3VpZGFuY2UgYWZ0ZXIgY2xlYXJpbmdcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuYWRkSW5pdGlhbFFBUGFpcihcbiAgICAgICAgJ0hvdyBkbyBJIHVzZSB0aGlzIGNoYXQ/JyxcbiAgICAgICAgJ0FzayBhIHF1ZXN0aW9uIGFib3V0IHRoZSBkb2N1bWVudGF0aW9uLiBZb3UgY2FuIGFsc28gdG9nZ2xlIGJldHdlZW4gY2hhdCBhbmQgdGFibGUgb2YgY29udGVudHMgdmlldyB1c2luZyB0aGUgbmF2aWdhdGlvbiBjb250cm9scy4nXG4gICAgICApO1xuICAgIH0sIDEwMCk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGluaXRpYWwgUSZBIHBhaXIgdG8gc2hvdyB1c2VycyBob3cgdG8gdXNlIHRoZSBjaGF0XG4gICAqL1xuICBhZGRJbml0aWFsUUFQYWlyKHF1ZXN0aW9uLCBhbnN3ZXIpIHtcbiAgICBjb25zdCB1c2VyQnViYmxlID0gdGhpcy5jaGF0LmJ1YmJsZXMuY3JlYXRlQ2hhdEJ1YmJsZShxdWVzdGlvbiwgJ3VzZXInKTtcbiAgICB0aGlzLmNoYXQuYnViYmxlcy5hZGRDaGF0QnViYmxlKHVzZXJCdWJibGUsICd1c2VyJyk7XG4gICAgY29uc3QgYm90QnViYmxlID0gdGhpcy5jaGF0LmJ1YmJsZXMuY3JlYXRlQ2hhdEJ1YmJsZShhbnN3ZXIsICdib3QnKTtcbiAgICB0aGlzLmNoYXQuYnViYmxlcy5hZGRDaGF0QnViYmxlKGJvdEJ1YmJsZSwgJ2JvdCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4cG9ydCBjaGF0IGhpc3RvcnkgYXMgdGV4dFxuICAgKi9cbiAgZXhwb3J0SGlzdG9yeSgpIHtcbiAgICBjb25zdCBjaGF0SGlzdG9yeSA9IGxvY2FsU3RvcmFnZS5nZXQodGhpcy5zdG9yYWdlS2V5LCBbXSk7XG4gICAgbGV0IGV4cG9ydFRleHQgPSBgQ2hhdCBIaXN0b3J5IEV4cG9ydCAtICR7bmV3IERhdGUoKS50b0xvY2FsZVN0cmluZygpfVxcbmA7XG4gICAgZXhwb3J0VGV4dCArPSAnPScucmVwZWF0KDUwKSArICdcXG5cXG4nO1xuICAgIFxuICAgIGNoYXRIaXN0b3J5LmZvckVhY2goKHBhaXIsIGluZGV4KSA9PiB7XG4gICAgICBleHBvcnRUZXh0ICs9IGBDb252ZXJzYXRpb24gJHtpbmRleCArIDF9OlxcbmA7XG4gICAgICBleHBvcnRUZXh0ICs9IGBVc2VyOiAke3BhaXIudXNlcn1cXG5gO1xuICAgICAgZXhwb3J0VGV4dCArPSBgQXNzaXN0YW50OiAke3BhaXIuYm90fVxcbmA7XG4gICAgICBpZiAocGFpci50aW1lc3RhbXApIHtcbiAgICAgICAgZXhwb3J0VGV4dCArPSBgVGltZTogJHtuZXcgRGF0ZShwYWlyLnRpbWVzdGFtcCkudG9Mb2NhbGVTdHJpbmcoKX1cXG5gO1xuICAgICAgfVxuICAgICAgZXhwb3J0VGV4dCArPSAnXFxuJyArICctJy5yZXBlYXQoMzApICsgJ1xcblxcbic7XG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIGV4cG9ydFRleHQ7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXIgb2xkIGhpc3RvcnkgZW50cmllcyAoa2VlcCBvbmx5IHJlY2VudCBvbmVzKVxuICAgKi9cbiAgcHJ1bmVIaXN0b3J5KG1heEVudHJpZXMgPSA1MCkge1xuICAgIGNvbnN0IGNoYXRIaXN0b3J5ID0gbG9jYWxTdG9yYWdlLmdldCh0aGlzLnN0b3JhZ2VLZXksIFtdKTtcbiAgICBpZiAoY2hhdEhpc3RvcnkubGVuZ3RoID4gbWF4RW50cmllcykge1xuICAgICAgY29uc3QgcHJ1bmVkSGlzdG9yeSA9IGNoYXRIaXN0b3J5LnNsaWNlKC1tYXhFbnRyaWVzKTtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXQodGhpcy5zdG9yYWdlS2V5LCBwcnVuZWRIaXN0b3J5KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IGNvbnZlcnNhdGlvbiBjb3VudFxuICAgKi9cbiAgZ2V0Q29udmVyc2F0aW9uQ291bnQoKSB7XG4gICAgY29uc3QgY2hhdEhpc3RvcnkgPSBsb2NhbFN0b3JhZ2UuZ2V0KHRoaXMuc3RvcmFnZUtleSwgW10pO1xuICAgIHJldHVybiBjaGF0SGlzdG9yeS5sZW5ndGg7XG4gIH1cblxuICAvKipcbiAgICogU2Nyb2xsIGNoYXQgdG8gYm90dG9tXG4gICAqL1xuICBzY3JvbGxUb0JvdHRvbSgpIHtcbiAgICBpZiAodGhpcy5jaGF0LmNoYXRNZXNzYWdlcykge1xuICAgICAgdGhpcy5jaGF0LmNoYXRNZXNzYWdlcy5zY3JvbGxUb3AgPSB0aGlzLmNoYXQuY2hhdE1lc3NhZ2VzLnNjcm9sbEhlaWdodDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgY2hhdCBoYXMgYW55IGNvbnZlcnNhdGlvbnNcbiAgICovXG4gIGhhc0NvbnZlcnNhdGlvbnMoKSB7XG4gICAgY29uc3QgY2hhdEhpc3RvcnkgPSBsb2NhbFN0b3JhZ2UuZ2V0KHRoaXMuc3RvcmFnZUtleSwgW10pO1xuICAgIHJldHVybiBjaGF0SGlzdG9yeS5sZW5ndGggPiAwO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbGFzdCBjb252ZXJzYXRpb25cbiAgICovXG4gIGdldExhc3RDb252ZXJzYXRpb24oKSB7XG4gICAgY29uc3QgY2hhdEhpc3RvcnkgPSBsb2NhbFN0b3JhZ2UuZ2V0KHRoaXMuc3RvcmFnZUtleSwgW10pO1xuICAgIHJldHVybiBjaGF0SGlzdG9yeVtjaGF0SGlzdG9yeS5sZW5ndGggLSAxXSB8fCBudWxsO1xuICB9XG59IiwgIi8qKlxuICogQ2hhdCBCdWJibGVzIE1vZHVsZVxuICogSGFuZGxlcyBjaGF0IGJ1YmJsZSBjcmVhdGlvbiwgZm9ybWF0dGluZywgYW5kIGFuaW1hdGlvbnNcbiAqL1xuXG5pbXBvcnQgeyBzaG93TG9hZGluZywgaGlkZUxvYWRpbmcgfSBmcm9tICcuLi8uLi91dGlscy9pbmRleC5qcyc7XG5pbXBvcnQgeyBzYW5pdGl6ZUhUTUwsIGVzY2FwZUhUTUwgfSBmcm9tICcuLi8uLi91dGlscy9zYW5pdGl6ZS5qcyc7XG5cbmV4cG9ydCBjbGFzcyBDaGF0QnViYmxlcyB7XG4gIGNvbnN0cnVjdG9yKGNoYXRNYW5hZ2VyKSB7XG4gICAgdGhpcy5jaGF0ID0gY2hhdE1hbmFnZXI7XG4gICAgdGhpcy50eXBpbmdTcGVlZCA9IGNoYXRNYW5hZ2VyLnR5cGluZ1NwZWVkIHx8IDIwO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIGNoYXQgYnViYmxlIGVsZW1lbnRcbiAgICovXG4gIGNyZWF0ZUNoYXRCdWJibGUodGV4dCwgc2VuZGVyLCB0eXBlID0gJ25vcm1hbCcpIHtcbiAgICBjb25zdCBidWJibGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBsZXQgYmFzZUNsYXNzZXMgPSBgY2hhdC1idWJibGUgJHtzZW5kZXJ9YDtcbiAgICBcbiAgICAvLyBBZGQgYXBwcm9wcmlhdGUgc3R5bGluZyBiYXNlZCBvbiB0eXBlIGFuZCBzZW5kZXJcbiAgICBpZiAodHlwZSA9PT0gJ2Vycm9yJykge1xuICAgICAgYmFzZUNsYXNzZXMgKz0gJyBjaGF0LWJ1YmJsZS0tZXJyb3InO1xuICAgIH0gZWxzZSBpZiAoc2VuZGVyID09PSAndXNlcicpIHtcbiAgICAgIGJhc2VDbGFzc2VzICs9ICcgY2hhdC1idWJibGUtLXVzZXInO1xuICAgIH0gZWxzZSB7XG4gICAgICBiYXNlQ2xhc3NlcyArPSAnIGNoYXQtYnViYmxlLS1ib3QnO1xuICAgIH1cbiAgICBcbiAgICBidWJibGUuY2xhc3NOYW1lID0gYmFzZUNsYXNzZXM7XG4gICAgXG4gICAgLy8gRm9ybWF0IHRoZSB0ZXh0IHByb3Blcmx5IGZvciBBSSByZXNwb25zZXNcbiAgICBjb25zdCBmb3JtYXR0ZWRUZXh0ID0gdGhpcy5mb3JtYXRDaGF0VGV4dCh0ZXh0LCBzZW5kZXIpO1xuICAgIC8vIFNhbml0aXplIGZpbmFsIEhUTUwgYmVmb3JlIGluc2VydGlvblxuICAgIGJ1YmJsZS5pbm5lckhUTUwgPSBzYW5pdGl6ZUhUTUwoZm9ybWF0dGVkVGV4dCk7XG4gICAgXG4gICAgLy8gQWRkIGFjY2Vzc2liaWxpdHkgYXR0cmlidXRlc1xuICAgIGJ1YmJsZS5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCBzZW5kZXIgPT09ICdib3QnID8gJ2xvZycgOiAnc3RhdHVzJyk7XG4gICAgYnViYmxlLnNldEF0dHJpYnV0ZSgnYXJpYS1saXZlJywgJ3BvbGl0ZScpO1xuICAgIFxuICAgIHJldHVybiBidWJibGU7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGxvYWRpbmcgYnViYmxlIHVzaW5nIHVuaWZpZWQgTG9hZGluZ1N0YXRlTWFuYWdlclxuICAgKi9cbiAgY3JlYXRlTG9hZGluZ0J1YmJsZSgpIHtcbiAgICBjb25zdCBidWJibGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBidWJibGUuY2xhc3NOYW1lID0gJ2NoYXQtYnViYmxlIGJvdCBwLTIgcm91bmRlZC1sZyB0ZXh0LWJsYWNrIGZvbnQtcmVndWxhciB0ZXh0LXNtIGlzLWxvYWRpbmcnO1xuICAgIFxuICAgIC8vIFVzZSBMb2FkaW5nU3RhdGVNYW5hZ2VyIGZvciBjb25zaXN0ZW50IGxvYWRpbmcgZGlzcGxheVxuICAgIGNvbnN0IGxvYWRlcklkID0gc2hvd0xvYWRpbmcoYnViYmxlLCB7XG4gICAgICB0eXBlOiAnZG90cycsXG4gICAgICBtZXNzYWdlOiAnVGhpbmtpbmcuLi4nLFxuICAgICAgc2l6ZTogJ3NtYWxsJyxcbiAgICAgIHZhcmlhbnQ6ICdtaW5pbWFsJ1xuICAgIH0pO1xuICAgIFxuICAgIC8vIFN0b3JlIGxvYWRlciBJRCBmb3IgY2xlYW51cFxuICAgIGJ1YmJsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtbG9hZGVyLWlkJywgbG9hZGVySWQpO1xuICAgIHJldHVybiBidWJibGU7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGNoYXQgYnViYmxlIHRvIHRoZSBjb252ZXJzYXRpb25cbiAgICovXG4gIGFkZENoYXRCdWJibGUoYnViYmxlLCBzZW5kZXIpIHtcbiAgICBsZXQgcGFpciA9IHRoaXMuY2hhdC5jaGF0TWVzc2FnZXMubGFzdEVsZW1lbnRDaGlsZDtcbiAgICBpZiAoIXBhaXIgfHwgIXBhaXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdjaGF0LXBhaXInKSB8fCBzZW5kZXIgPT09ICd1c2VyJykge1xuICAgICAgcGFpciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgcGFpci5jbGFzc05hbWUgPSAnY2hhdC1wYWlyIGdyb3VwIHJlbGF0aXZlJztcbiAgICAgIHRoaXMuY2hhdC5jaGF0TWVzc2FnZXMuYXBwZW5kQ2hpbGQocGFpcik7XG4gICAgfVxuICAgIHBhaXIuYXBwZW5kQ2hpbGQoYnViYmxlKTtcbiAgICBcbiAgICB0aGlzLmhhbmRsZUFuaW1hdGlvbnNBbmRDbGVhbnVwKGJ1YmJsZSwgc2VuZGVyLCBwYWlyKTtcblxuICAgIC8vIFNraXAgc2F2aW5nIHdoZW4gYWRkaW5nIGEgbG9hZGluZyBidWJibGU7IG1hcmsgcGFpciBhcyBwZW5kaW5nXG4gICAgaWYgKGJ1YmJsZS5jbGFzc0xpc3QuY29udGFpbnMoJ2lzLWxvYWRpbmcnKSkge1xuICAgICAgcGFpci5kYXRhc2V0LnBlbmRpbmcgPSAndHJ1ZSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIElmIHRoaXMgd2FzIHRoZSBib3QgbWVzc2FnZSBmb2xsb3dpbmcgYSBwZW5kaW5nIHN0YXRlLCBjbGVhciB0aGUgZmxhZ1xuICAgICAgaWYgKHBhaXIuZGF0YXNldCAmJiBwYWlyLmRhdGFzZXQucGVuZGluZykge1xuICAgICAgICBkZWxldGUgcGFpci5kYXRhc2V0LnBlbmRpbmc7XG4gICAgICB9XG4gICAgICB0aGlzLmNoYXQuaGlzdG9yeS5zYXZlQ2hhdEhpc3RvcnkoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIGFuaW1hdGlvbnMgYW5kIGNsZWFudXAgZm9yIGNoYXQgYnViYmxlc1xuICAgKi9cbiAgaGFuZGxlQW5pbWF0aW9uc0FuZENsZWFudXAoYnViYmxlLCBzZW5kZXIsIHBhaXIpIHtcbiAgICBpZiAoc2VuZGVyID09PSAndXNlcicpIHtcbiAgICAgIGJ1YmJsZS5jbGFzc0xpc3QuYWRkKCdhbmltYXRlLXB1bHNlJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHVzZXJCdWJibGUgPSBwYWlyLnF1ZXJ5U2VsZWN0b3IoJy51c2VyJyk7XG4gICAgICB1c2VyQnViYmxlPy5jbGFzc0xpc3QucmVtb3ZlKCdhbmltYXRlLXB1bHNlJyk7XG4gICAgICB0aGlzLmFwcGVuZERlbGV0ZUJ1dHRvbihwYWlyKTtcbiAgICB9XG4gICAgdGhpcy5zY3JvbGxUb0JvdHRvbSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBkZWxldGUgYnV0dG9uIHRvIGNvbnZlcnNhdGlvbiBwYWlyXG4gICAqL1xuICBhcHBlbmREZWxldGVCdXR0b24ocGFpcikge1xuICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIGRlbGV0ZUJ1dHRvbi5jbGFzc05hbWUgPSAnY2hhdC1kZWxldGUnO1xuICAgIGRlbGV0ZUJ1dHRvbi5pbm5lckhUTUwgPSAnXHUwMEQ3JztcbiAgICBkZWxldGVCdXR0b24udGl0bGUgPSAnRGVsZXRlIHRoaXMgY29udmVyc2F0aW9uJztcbiAgICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAvLyBBZGQgZmFkZS1vdXQgYW5pbWF0aW9uIGJlZm9yZSByZW1vdmluZ1xuICAgICAgcGFpci5zdHlsZS5vcGFjaXR5ID0gJzAnO1xuICAgICAgcGFpci5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWCgyMHB4KSc7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKHBhaXIucGFyZW50Tm9kZSA9PT0gdGhpcy5jaGF0LmNoYXRNZXNzYWdlcykge1xuICAgICAgICAgIHRoaXMuY2hhdC5jaGF0TWVzc2FnZXMucmVtb3ZlQ2hpbGQocGFpcik7XG4gICAgICAgICAgdGhpcy5jaGF0Lmhpc3Rvcnkuc2F2ZUNoYXRIaXN0b3J5KCk7XG4gICAgICAgIH1cbiAgICAgIH0sIDIwMCk7XG4gICAgfSk7XG5cbiAgICBwYWlyLmFwcGVuZENoaWxkKGRlbGV0ZUJ1dHRvbik7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IGNoYXQgdGV4dCBmb3IgYmV0dGVyIHJlYWRhYmlsaXR5XG4gICAqL1xuICBmb3JtYXRDaGF0VGV4dCh0ZXh0LCBzZW5kZXIpIHtcbiAgICBpZiAoc2VuZGVyID09PSAnYm90Jykge1xuICAgICAgLy8gQWRkIHNwYWNlcyBhZnRlciBwZXJpb2RzIGFuZCBjb21tYXMgaWYgZm9sbG93ZWQgYnkgYW4gdXBwZXJjYXNlIGxldHRlclxuICAgICAgbGV0IGZvcm1hdHRlZCA9IHRleHQucmVwbGFjZSgvXFwuKFtBLVpdKS9nLCAnLiAkMScpO1xuICAgICAgZm9ybWF0dGVkID0gZm9ybWF0dGVkLnJlcGxhY2UoLywoW0EtWl0pL2csICcsICQxJyk7XG4gICAgICBcbiAgICAgIC8vIFJlcGxhY2UgbXVsdGlwbGUgbmV3bGluZXMgd2l0aCBwYXJhZ3JhcGggdGFnc1xuICAgICAgZm9ybWF0dGVkID0gZm9ybWF0dGVkLnNwbGl0KCdcXG5cXG4nKS5tYXAocCA9PiBgPHA+JHtwfTwvcD5gKS5qb2luKCcnKTtcbiAgICAgIFxuICAgICAgLy8gSGFuZGxlIGNvZGUgYmxvY2tzIChiYXNpYyBtYXJrZG93bi1zdHlsZSlcbiAgICAgIGZvcm1hdHRlZCA9IGZvcm1hdHRlZC5yZXBsYWNlKC9gYGAoW1xcc1xcU10qPylgYGAvZywgJzxwcmU+PGNvZGU+JDE8L2NvZGU+PC9wcmU+Jyk7XG4gICAgICBmb3JtYXR0ZWQgPSBmb3JtYXR0ZWQucmVwbGFjZSgvYChbXmBdKilgL2csICc8Y29kZT4kMTwvY29kZT4nKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIGZvcm1hdHRlZDtcbiAgICB9XG4gICAgcmV0dXJuIGVzY2FwZUhUTUwodGV4dCk7IC8vIFVzZXIgdGV4dCBzaG91bGQgYmUgZXNjYXBlZFxuICB9XG5cbiAgLyoqXG4gICAqIEVzY2FwZSBIVE1MIHRvIHByZXZlbnQgWFNTXG4gICAqL1xuICBlc2NhcGVIdG1sKHRleHQpIHtcbiAgICByZXR1cm4gZXNjYXBlSFRNTCh0ZXh0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbmltYXRlIHR5cGluZyBlZmZlY3QgZm9yIG1lc3NhZ2VzXG4gICAqL1xuICBhc3luYyBhbmltYXRlVHlwaW5nKGJ1YmJsZSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgY29uc3QgdGV4dCA9IGJ1YmJsZS5pbm5lclRleHQ7XG4gICAgICBidWJibGUuaW5uZXJUZXh0ID0gJyc7XG4gICAgICBsZXQgaSA9IDA7XG4gICAgICBcbiAgICAgIGNvbnN0IHR5cGVJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgYnViYmxlLmlubmVyVGV4dCArPSB0ZXh0LmNoYXJBdChpKTtcbiAgICAgICAgaSsrO1xuICAgICAgICBpZiAoaSA+PSB0ZXh0Lmxlbmd0aCkge1xuICAgICAgICAgIGNsZWFySW50ZXJ2YWwodHlwZUludGVydmFsKTtcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgIH0sIHRoaXMudHlwaW5nU3BlZWQpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCByZXRyeSBidXR0b24gZm9yIGZhaWxlZCByZXF1ZXN0c1xuICAgKi9cbiAgYWRkUmV0cnlCdXR0b24ocXVlc3Rpb24pIHtcbiAgICBjb25zdCByZXRyeUNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHJldHJ5Q29udGFpbmVyLmNsYXNzTmFtZSA9ICdmbGV4IGp1c3RpZnktY2VudGVyIG15LTInO1xuICAgIFxuICAgIGNvbnN0IHJldHJ5QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgcmV0cnlCdXR0b24uY2xhc3NOYW1lID0gJ3B4LTQgcHktMiBiZy1icmFuZCB0ZXh0LXdoaXRlIHJvdW5kZWQtbGcgaG92ZXI6YmctYnJhbmQtMSB0cmFuc2l0aW9uIGR1cmF0aW9uLTMwMCc7XG4gICAgcmV0cnlCdXR0b24uaW5uZXJUZXh0ID0gJ1JldHJ5JztcbiAgICByZXRyeUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHJldHJ5Q29udGFpbmVyLnJlbW92ZSgpO1xuICAgICAgdGhpcy5jaGF0LmFwaS5mZXRjaEFuc3dlcihxdWVzdGlvbik7XG4gICAgfSk7XG4gICAgXG4gICAgcmV0cnlDb250YWluZXIuYXBwZW5kQ2hpbGQocmV0cnlCdXR0b24pO1xuICAgIHRoaXMuY2hhdC5jaGF0TWVzc2FnZXMuYXBwZW5kQ2hpbGQocmV0cnlDb250YWluZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNjcm9sbCBjaGF0IHRvIGJvdHRvbVxuICAgKi9cbiAgc2Nyb2xsVG9Cb3R0b20oKSB7XG4gICAgaWYgKHRoaXMuY2hhdC5jaGF0TWVzc2FnZXMpIHtcbiAgICAgIHRoaXMuY2hhdC5jaGF0TWVzc2FnZXMuc2Nyb2xsVG9wID0gdGhpcy5jaGF0LmNoYXRNZXNzYWdlcy5zY3JvbGxIZWlnaHQ7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhbGwgYnViYmxlc1xuICAgKi9cbiAgY2xlYXJBbGxCdWJibGVzKCkge1xuICAgIGlmICh0aGlzLmNoYXQuY2hhdE1lc3NhZ2VzKSB7XG4gICAgICB0aGlzLmNoYXQuY2hhdE1lc3NhZ2VzLmlubmVySFRNTCA9ICcnO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBzeXN0ZW0gbWVzc2FnZSBidWJibGVcbiAgICovXG4gIGNyZWF0ZVN5c3RlbU1lc3NhZ2UobWVzc2FnZSwgdHlwZSA9ICdpbmZvJykge1xuICAgIGNvbnN0IGJ1YmJsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGJ1YmJsZS5jbGFzc05hbWUgPSBgY2hhdC1idWJibGUgc3lzdGVtIGNoYXQtYnViYmxlLS0ke3R5cGV9YDtcbiAgICBidWJibGUuaW5uZXJIVE1MID0gYDxlbT4ke2VzY2FwZUhUTUwobWVzc2FnZSl9PC9lbT5gO1xuICAgIGJ1YmJsZS5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnc3RhdHVzJyk7XG4gICAgYnViYmxlLnNldEF0dHJpYnV0ZSgnYXJpYS1saXZlJywgJ3BvbGl0ZScpO1xuICAgIHJldHVybiBidWJibGU7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgdHlwaW5nIGluZGljYXRvclxuICAgKi9cbiAgc2hvd1R5cGluZ0luZGljYXRvcigpIHtcbiAgICBjb25zdCBpbmRpY2F0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBpbmRpY2F0b3IuY2xhc3NOYW1lID0gJ3R5cGluZy1pbmRpY2F0b3InO1xuICAgIGluZGljYXRvci5pbm5lckhUTUwgPSAnPHNwYW4+QXNzaXN0YW50IGlzIHR5cGluZzwvc3Bhbj4nO1xuICAgIGluZGljYXRvci5pZCA9ICd0eXBpbmctaW5kaWNhdG9yJztcbiAgICBcbiAgICBjb25zdCBwYWlyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcGFpci5jbGFzc05hbWUgPSAnY2hhdC1wYWlyJztcbiAgICBwYWlyLmFwcGVuZENoaWxkKGluZGljYXRvcik7XG4gICAgXG4gICAgdGhpcy5jaGF0LmNoYXRNZXNzYWdlcy5hcHBlbmRDaGlsZChwYWlyKTtcbiAgICB0aGlzLnNjcm9sbFRvQm90dG9tKCk7XG4gICAgXG4gICAgcmV0dXJuIGluZGljYXRvcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgdHlwaW5nIGluZGljYXRvclxuICAgKi9cbiAgaGlkZVR5cGluZ0luZGljYXRvcigpIHtcbiAgICBjb25zdCBpbmRpY2F0b3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHlwaW5nLWluZGljYXRvcicpO1xuICAgIGlmIChpbmRpY2F0b3IgJiYgaW5kaWNhdG9yLnBhcmVudE5vZGUpIHtcbiAgICAgIGluZGljYXRvci5wYXJlbnROb2RlLnJlbW92ZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgdHlwaW5nIHNwZWVkXG4gICAqL1xuICBzZXRUeXBpbmdTcGVlZChzcGVlZCkge1xuICAgIHRoaXMudHlwaW5nU3BlZWQgPSBzcGVlZDtcbiAgfVxufSIsICIvKipcbiAqIENoYXQgTWFuYWdlciAtIE1haW4gb3JjaGVzdHJhdG9yIGZvciB0aGUgY2hhdCBzeXN0ZW1cbiAqIENvb3JkaW5hdGVzIGJldHdlZW4gVUksIEFQSSwgSGlzdG9yeSwgYW5kIEJ1YmJsZXMgbW9kdWxlc1xuICovXG5cbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJy4uLy4uL2NvcmUvQ29tcG9uZW50LmpzJztcbmltcG9ydCB7IENoYXRVSSB9IGZyb20gJy4vQ2hhdFVJLmpzJztcbmltcG9ydCB7IENoYXRBUEkgfSBmcm9tICcuL0NoYXRBUEkuanMnO1xuaW1wb3J0IHsgQ2hhdEhpc3RvcnkgfSBmcm9tICcuL0NoYXRIaXN0b3J5LmpzJztcbmltcG9ydCB7IENoYXRCdWJibGVzIH0gZnJvbSAnLi9DaGF0QnViYmxlcy5qcyc7XG5cbmV4cG9ydCBjbGFzcyBDaGF0TWFuYWdlciBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZyA9IHt9KSB7XG4gICAgc3VwZXIoe1xuICAgICAgbmFtZTogJ2FydGljbGUtY2hhdCcsXG4gICAgICBzZWxlY3RvcjogY29uZmlnLnNlbGVjdG9yIHx8ICcjY2hhdENvbnRhaW5lcicsXG4gICAgICAuLi5jb25maWdcbiAgICB9KTtcbiAgICBcbiAgICAvLyBDb25maWd1cmF0aW9uXG4gICAgY29uc3QgaXNPZmZsaW5lID0gKHdpbmRvdy5IdWdvRW52aXJvbm1lbnQgJiYgd2luZG93Lkh1Z29FbnZpcm9ubWVudC5lbnZpcm9ubWVudCA9PT0gJ29mZmxpbmUnKTtcbiAgICB0aGlzLmNoYXRFbmRwb2ludCA9IGlzT2ZmbGluZSA/ICcnIDogKGNvbmZpZy5jaGF0RW5kcG9pbnQgfHwgJ2h0dHBzOi8vY2hhdC0yLWxjNDc2MmNvN2EtdWMuYS5ydW4uYXBwLycpO1xuICAgIHRoaXMucmVxdWVzdFRpbWVvdXQgPSBjb25maWcucmVxdWVzdFRpbWVvdXQgfHwgMzAwMDA7XG4gICAgdGhpcy50eXBpbmdTcGVlZCA9IGNvbmZpZy50eXBpbmdTcGVlZCB8fCAyMDtcbiAgICBcbiAgICAvLyBDb3JlIGVsZW1lbnQgcmVmZXJlbmNlcyAod2lsbCBiZSBjYWNoZWQgYnkgVUkgbW9kdWxlKVxuICAgIHRoaXMuY2hhdE1lc3NhZ2VzID0gbnVsbDtcbiAgICB0aGlzLnByb2R1Y3RGaWx0ZXIgPSBudWxsO1xuICAgIFxuICAgIC8vIEluaXRpYWxpemUgbW9kdWxlc1xuICAgIHRoaXMudWkgPSBuZXcgQ2hhdFVJKHRoaXMpO1xuICAgIHRoaXMuYXBpID0gbmV3IENoYXRBUEkodGhpcywgeyBcbiAgICAgIGNoYXRFbmRwb2ludDogdGhpcy5jaGF0RW5kcG9pbnQsIFxuICAgICAgcmVxdWVzdFRpbWVvdXQ6IHRoaXMucmVxdWVzdFRpbWVvdXQgXG4gICAgfSk7XG4gICAgdGhpcy5oaXN0b3J5ID0gbmV3IENoYXRIaXN0b3J5KHRoaXMpO1xuICAgIHRoaXMuYnViYmxlcyA9IG5ldyBDaGF0QnViYmxlcyh0aGlzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIHRoZSBjaGF0IGNvbXBvbmVudFxuICAgKi9cbiAgYXN5bmMgb25Jbml0KCkge1xuICAgIGlmICghdGhpcy5lbGVtZW50KSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0NoYXRNYW5hZ2VyOiBDaGF0IGNvbnRhaW5lciBub3QgZm91bmQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDYWNoZSBjb3JlIERPTSByZWZlcmVuY2VzXG4gICAgdGhpcy5jYWNoZUVsZW1lbnRzKCk7XG4gICAgXG4gICAgaWYgKCF0aGlzLmNoYXRNZXNzYWdlcykge1xuICAgICAgY29uc29sZS53YXJuKCdDaGF0TWFuYWdlcjogQ2hhdCBtZXNzYWdlcyBjb250YWluZXIgbm90IGZvdW5kJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSW5pdGlhbGl6ZSBVSSBtb2R1bGVcbiAgICB0aGlzLnVpLmNhY2hlRWxlbWVudHMoKTtcbiAgICBcbiAgICBpZiAoIXRoaXMudWkudmFsaWRhdGVFbGVtZW50cygpKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0NoYXRNYW5hZ2VyOiBSZXF1aXJlZCBVSSBlbGVtZW50cyBub3QgZm91bmQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBTZXR1cCBldmVudCBsaXN0ZW5lcnMgdGhyb3VnaCBVSSBtb2R1bGVcbiAgICB0aGlzLnVpLnNldHVwRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICBcbiAgICAvLyBMb2FkIGNoYXQgaGlzdG9yeVxuICAgIGF3YWl0IHRoaXMuaGlzdG9yeS5sb2FkQ2hhdEhpc3RvcnkoKTtcblxuICAgIC8vIElmIHRoZXJlIHdhcyBhIHBlbmRpbmcgcmVxdWVzdCBmcm9tIGEgcHJldmlvdXMgcGFnZSwgc2hvdyBhIHN5c3RlbSBub3RpY2Ugd2l0aCByZXRyeVxuICAgIHRyeSB7XG4gICAgICBjb25zdCBwZW5kaW5nID0gKGF3YWl0IGltcG9ydCgnLi4vLi4vdXRpbHMvaW5kZXguanMnKSkubG9jYWxTdG9yYWdlLmdldCgnY2hhdC5wZW5kaW5nUmVxdWVzdCcsIG51bGwpO1xuICAgICAgaWYgKHBlbmRpbmcgJiYgcGVuZGluZy5xdWVzdGlvbikge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gJ1ByZXZpb3VzIHJlc3BvbnNlIHdhcyBpbnRlcnJ1cHRlZC4gV291bGQgeW91IGxpa2UgdG8gcmV0cnk/JztcbiAgICAgICAgY29uc3QgYnViYmxlID0gdGhpcy5idWJibGVzLmNyZWF0ZVN5c3RlbU1lc3NhZ2UobWVzc2FnZSwgJ2luZm8nKTtcbiAgICAgICAgdGhpcy5idWJibGVzLmFkZENoYXRCdWJibGUoYnViYmxlLCAnYm90Jyk7XG4gICAgICAgIHRoaXMuYnViYmxlcy5hZGRSZXRyeUJ1dHRvbihwZW5kaW5nLnF1ZXN0aW9uKTtcbiAgICAgICAgLy8gY2xlYXIgdGhlIG1hcmtlciBzbyB3ZSBkbyBub3QgZHVwbGljYXRlIG9uIG5leHQgbG9hZFxuICAgICAgICAoYXdhaXQgaW1wb3J0KCcuLi8uLi91dGlscy9pbmRleC5qcycpKS5sb2NhbFN0b3JhZ2UucmVtb3ZlKCdjaGF0LnBlbmRpbmdSZXF1ZXN0Jyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCB7IC8qIG5vLW9wICovIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDYWNoZSBjb3JlIERPTSBlbGVtZW50IHJlZmVyZW5jZXNcbiAgICovXG4gIGNhY2hlRWxlbWVudHMoKSB7XG4gICAgdGhpcy5jaGF0TWVzc2FnZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhdC1tZXNzYWdlcycpO1xuICAgIHRoaXMucHJvZHVjdEZpbHRlciA9IHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtcHJvZHVjdEZpbHRlcicpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBxdWVzdGlvbiBzdWJtaXNzaW9uIGZyb20gVUlcbiAgICovXG4gIGFzeW5jIGhhbmRsZVF1ZXN0aW9uU3VibWl0KHF1ZXN0aW9uVGV4dCkge1xuICAgIHRyeSB7XG4gICAgICAvLyBDcmVhdGUgYW5kIGFkZCB1c2VyIGJ1YmJsZVxuICAgICAgY29uc3QgdXNlckJ1YmJsZSA9IHRoaXMuYnViYmxlcy5jcmVhdGVDaGF0QnViYmxlKHF1ZXN0aW9uVGV4dCwgJ3VzZXInKTtcbiAgICAgIHRoaXMuYnViYmxlcy5hZGRDaGF0QnViYmxlKHVzZXJCdWJibGUsICd1c2VyJyk7XG4gICAgICBcbiAgICAgIC8vIEZldGNoIEFJIHJlc3BvbnNlIHRocm91Z2ggQVBJIG1vZHVsZVxuICAgICAgYXdhaXQgdGhpcy5hcGkuZmV0Y2hBbnN3ZXIocXVlc3Rpb25UZXh0KTtcbiAgICAgIFxuICAgICAgLy8gRW1pdCBldmVudCBmb3IgYW5hbHl0aWNzL3RyYWNraW5nXG4gICAgICB0aGlzLmVtaXQoJ2NoYXQ6cXVlc3Rpb25TdWJtaXR0ZWQnLCB7IHF1ZXN0aW9uOiBxdWVzdGlvblRleHQgfSk7XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignQ2hhdE1hbmFnZXI6IEVycm9yIGhhbmRsaW5nIHF1ZXN0aW9uIHN1Ym1pc3Npb246JywgZXJyb3IpO1xuICAgICAgdGhpcy5lbWl0KCdjaGF0OmVycm9yJywgeyBxdWVzdGlvbjogcXVlc3Rpb25UZXh0LCBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIGNvbmZpZ3VyYXRpb25cbiAgICovXG4gIHVwZGF0ZUNvbmZpZyhuZXdDb25maWcpIHtcbiAgICBpZiAobmV3Q29uZmlnLmNoYXRFbmRwb2ludCB8fCBuZXdDb25maWcucmVxdWVzdFRpbWVvdXQpIHtcbiAgICAgIHRoaXMuYXBpLnVwZGF0ZUNvbmZpZyhuZXdDb25maWcpO1xuICAgIH1cbiAgICBcbiAgICBpZiAobmV3Q29uZmlnLnR5cGluZ1NwZWVkKSB7XG4gICAgICB0aGlzLnR5cGluZ1NwZWVkID0gbmV3Q29uZmlnLnR5cGluZ1NwZWVkO1xuICAgICAgdGhpcy5idWJibGVzLnNldFR5cGluZ1NwZWVkKG5ld0NvbmZpZy50eXBpbmdTcGVlZCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjaGF0IHN0YXRpc3RpY3NcbiAgICovXG4gIGdldFN0YXRzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBjb252ZXJzYXRpb25Db3VudDogdGhpcy5oaXN0b3J5LmdldENvbnZlcnNhdGlvbkNvdW50KCksXG4gICAgICBoYXNDb252ZXJzYXRpb25zOiB0aGlzLmhpc3RvcnkuaGFzQ29udmVyc2F0aW9ucygpLFxuICAgICAgbGFzdENvbnZlcnNhdGlvbjogdGhpcy5oaXN0b3J5LmdldExhc3RDb252ZXJzYXRpb24oKSxcbiAgICAgIGlzRXhwYW5kZWQ6IHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2NoYXQtZXhwYW5kZWQnKVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogRXhwb3J0IGNoYXQgZGF0YVxuICAgKi9cbiAgZXhwb3J0RGF0YSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaGlzdG9yeTogdGhpcy5oaXN0b3J5LmV4cG9ydEhpc3RvcnkoKSxcbiAgICAgIHN0YXRzOiB0aGlzLmdldFN0YXRzKCksXG4gICAgICBjb25maWc6IHtcbiAgICAgICAgZW5kcG9pbnQ6IHRoaXMuY2hhdEVuZHBvaW50LFxuICAgICAgICB0aW1lb3V0OiB0aGlzLnJlcXVlc3RUaW1lb3V0LFxuICAgICAgICB0eXBpbmdTcGVlZDogdGhpcy50eXBpbmdTcGVlZFxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogRm9jdXMgdGhlIGNoYXQgaW5wdXRcbiAgICovXG4gIGZvY3VzKCkge1xuICAgIHRoaXMudWkuZm9jdXNJbnB1dCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFyIHRoZSBjaGF0IGlucHV0XG4gICAqL1xuICBjbGVhcklucHV0KCkge1xuICAgIHRoaXMudWkuY2xlYXJJbnB1dCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNob3cgdGhlIGNoYXQgY29udGFpbmVyXG4gICAqL1xuICBzaG93KCkge1xuICAgIGlmICh0aGlzLmVsZW1lbnQpIHtcbiAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGlkZSB0aGUgY2hhdCBjb250YWluZXJcbiAgICovXG4gIGhpZGUoKSB7XG4gICAgaWYgKHRoaXMuZWxlbWVudCkge1xuICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUb2dnbGUgY2hhdCB2aXNpYmlsaXR5XG4gICAqL1xuICB0b2dnbGUoKSB7XG4gICAgaWYgKHRoaXMuZWxlbWVudCkge1xuICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBjaGF0IGlzIHZpc2libGVcbiAgICovXG4gIGlzVmlzaWJsZSgpIHtcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50ICYmICF0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUZXN0IEFQSSBjb25uZWN0aXZpdHlcbiAgICovXG4gIGFzeW5jIHRlc3RDb25uZWN0aW9uKCkge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLmFwaS50ZXN0Q29ubmVjdGlvbigpO1xuICB9XG5cbiAgLyoqXG4gICAqIE1hbnVhbGx5IHRyaWdnZXIgYSBjb252ZXJzYXRpb24gc2F2ZVxuICAgKi9cbiAgc2F2ZUNvbnZlcnNhdGlvbigpIHtcbiAgICB0aGlzLmhpc3Rvcnkuc2F2ZUNoYXRIaXN0b3J5KCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGN1cnJlbnQgY29udmVyc2F0aW9uIGRhdGFcbiAgICovXG4gIGdldEN1cnJlbnRDb252ZXJzYXRpb24oKSB7XG4gICAgY29uc3QgbWVzc2FnZXMgPSBBcnJheS5mcm9tKHRoaXMuY2hhdE1lc3NhZ2VzLmNoaWxkcmVuKTtcbiAgICByZXR1cm4gbWVzc2FnZXMubWFwKHBhaXIgPT4ge1xuICAgICAgY29uc3QgYnViYmxlcyA9IEFycmF5LmZyb20ocGFpci5jaGlsZHJlbik7XG4gICAgICByZXR1cm4gYnViYmxlcy5tYXAoYnViYmxlID0+ICh7XG4gICAgICAgIHRleHQ6IGJ1YmJsZS5pbm5lclRleHQsXG4gICAgICAgIHNlbmRlcjogYnViYmxlLmNsYXNzTGlzdC5jb250YWlucygndXNlcicpID8gJ3VzZXInIDogJ2JvdCcsXG4gICAgICAgIHR5cGU6IGJ1YmJsZS5jbGFzc0xpc3QuY29udGFpbnMoJ2NoYXQtYnViYmxlLS1lcnJvcicpID8gJ2Vycm9yJyA6ICdub3JtYWwnXG4gICAgICB9KSk7XG4gICAgfSkuZmxhdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIHN5c3RlbSBtZXNzYWdlXG4gICAqL1xuICBhZGRTeXN0ZW1NZXNzYWdlKG1lc3NhZ2UsIHR5cGUgPSAnaW5mbycpIHtcbiAgICBjb25zdCBidWJibGUgPSB0aGlzLmJ1YmJsZXMuY3JlYXRlU3lzdGVtTWVzc2FnZShtZXNzYWdlLCB0eXBlKTtcbiAgICBjb25zdCBwYWlyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcGFpci5jbGFzc05hbWUgPSAnY2hhdC1wYWlyJztcbiAgICBwYWlyLmFwcGVuZENoaWxkKGJ1YmJsZSk7XG4gICAgdGhpcy5jaGF0TWVzc2FnZXMuYXBwZW5kQ2hpbGQocGFpcik7XG4gICAgdGhpcy5idWJibGVzLnNjcm9sbFRvQm90dG9tKCk7XG4gIH1cblxuICAvKipcbiAgICogQ29tcG9uZW50IGNsZWFudXBcbiAgICovXG4gIG9uRGVzdHJveSgpIHtcbiAgICAvLyBTYXZlIGFueSBwZW5kaW5nIGNoYXQgaGlzdG9yeVxuICAgIHRoaXMuaGlzdG9yeS5zYXZlQ2hhdEhpc3RvcnkoKTtcbiAgICBcbiAgICAvLyBDbGVhbiB1cCBhbnkgb25nb2luZyBhbmltYXRpb25zIG9yIHRpbWVyc1xuICAgIC8vIG5vLW9wXG4gIH1cbn1cblxuLy8gQXV0by1yZWdpc3RlciBjb21wb25lbnRcbmltcG9ydCBDb21wb25lbnRNYW5hZ2VyIGZyb20gJy4uLy4uL2NvcmUvQ29tcG9uZW50TWFuYWdlci5qcyc7XG5Db21wb25lbnRNYW5hZ2VyLnJlZ2lzdGVyKCdhcnRpY2xlLWNoYXQnLCBDaGF0TWFuYWdlcik7IiwgIi8qKlxuICogQ2hhdCBDb21wb25lbnQgTW9kdWxlXG4gKiBNb2R1bGFyIGNoYXQgc3lzdGVtIGZvciBnbG9iYWwgdXNlIGFjcm9zcyB0aGUgYXBwbGljYXRpb25cbiAqL1xuXG5leHBvcnQgeyBDaGF0TWFuYWdlciBhcyBkZWZhdWx0IH0gZnJvbSAnLi9DaGF0TWFuYWdlci5qcyc7XG5leHBvcnQgeyBDaGF0VUkgfSBmcm9tICcuL0NoYXRVSS5qcyc7XG5leHBvcnQgeyBDaGF0QVBJIH0gZnJvbSAnLi9DaGF0QVBJLmpzJztcbmV4cG9ydCB7IENoYXRIaXN0b3J5IH0gZnJvbSAnLi9DaGF0SGlzdG9yeS5qcyc7XG5leHBvcnQgeyBDaGF0QnViYmxlcyB9IGZyb20gJy4vQ2hhdEJ1YmJsZXMuanMnOyIsICIvKipcbiAqIEFydGljbGUgSGVhZGVyIENvbXBvbmVudFxuICogTWFuYWdlcyBjb2xsYXBzaWJsZSBtZXRhZGF0YSBwYW5lbCB3aXRoIHByb2dyZXNzaXZlIGRpc2Nsb3N1cmUgYW5kIGFuaW1hdGlvbnNcbiAqL1xuXG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICcuLi8uLi9jb3JlL0NvbXBvbmVudC5qcyc7XG5pbXBvcnQgeyBhbmltYXRpb25CcmlkZ2UgfSBmcm9tICcuLi8uLi9jb3JlL0FuaW1hdGlvbkJyaWRnZS5qcyc7XG5pbXBvcnQgeyBsb2NhbFN0b3JhZ2UgfSBmcm9tICcuLi8uLi91dGlscy9zdG9yYWdlLmpzJztcblxuZXhwb3J0IGNsYXNzIEFydGljbGVIZWFkZXIgZXh0ZW5kcyBDb21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcihjb25maWcgPSB7fSkge1xuICAgIHN1cGVyKHtcbiAgICAgIG5hbWU6ICdhcnRpY2xlLWhlYWRlcicsXG4gICAgICBzZWxlY3RvcjogY29uZmlnLnNlbGVjdG9yIHx8ICdbZGF0YS1jb21wb25lbnQ9XCJhcnRpY2xlLWhlYWRlclwiXScsXG4gICAgICAuLi5jb25maWdcbiAgICB9KTtcbiAgICBcbiAgICB0aGlzLnRvZ2dsZUJ0biA9IG51bGw7XG4gICAgdGhpcy5tZXRhZGF0YVBhbmVsID0gbnVsbDtcbiAgICB0aGlzLmlzRXhwYW5kZWQgPSBmYWxzZTtcbiAgICB0aGlzLmlzQW5pbWF0aW5nID0gZmFsc2U7XG4gICAgdGhpcy5hbmltYXRpb25EdXJhdGlvbiA9IGNvbmZpZy5hbmltYXRpb25EdXJhdGlvbiB8fCA0MDA7XG4gICAgdGhpcy5tYXhIZWlnaHQgPSBjb25maWcubWF4SGVpZ2h0IHx8IDIwMDtcbiAgfVxuXG4gIGFzeW5jIG9uSW5pdCgpIHtcbiAgICBpZiAoIXRoaXMuZWxlbWVudCkge1xuICAgICAgY29uc29sZS53YXJuKCdBcnRpY2xlSGVhZGVyOiBObyBhcnRpY2xlIGhlYWRlciBmb3VuZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENhY2hlIERPTSByZWZlcmVuY2VzXG4gICAgdGhpcy5jYWNoZUVsZW1lbnRzKCk7XG4gICAgXG4gICAgaWYgKCF0aGlzLnRvZ2dsZUJ0biB8fCAhdGhpcy5tZXRhZGF0YVBhbmVsKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0FydGljbGVIZWFkZXI6IE1pc3NpbmcgcmVxdWlyZWQgZWxlbWVudHMgKHRvZ2dsZSBidXR0b24gb3IgbWV0YWRhdGEgcGFuZWwpJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5zZXR1cEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5pbml0aWFsaXplU3RhdGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWNoZSBET00gZWxlbWVudCByZWZlcmVuY2VzXG4gICAqL1xuICBjYWNoZUVsZW1lbnRzKCkge1xuICAgIHRoaXMudG9nZ2xlQnRuID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLW1ldGFkYXRhLXRvZ2dsZV0nKTtcbiAgICB0aGlzLm1ldGFkYXRhUGFuZWwgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtbWV0YWRhdGEtcGFuZWxdJyk7XG4gIH1cblxuICAvKipcbiAgICogU2V0dXAgZXZlbnQgbGlzdGVuZXJzXG4gICAqL1xuICBzZXR1cEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIC8vIFByaW1hcnkgdG9nZ2xlIGludGVyYWN0aW9uXG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKHRoaXMudG9nZ2xlQnRuLCAnY2xpY2snLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy50b2dnbGUoKTtcbiAgICB9KTtcblxuICAgIC8vIEtleWJvYXJkIHN1cHBvcnRcbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIodGhpcy50b2dnbGVCdG4sICdrZXlkb3duJywgKGUpID0+IHtcbiAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJyB8fCBlLmtleSA9PT0gJyAnKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy50b2dnbGUoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIENsb3NlIG9uIGVzY2FwZSBrZXkgd2hlbiBleHBhbmRlZFxuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihkb2N1bWVudCwgJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgICAgaWYgKGUua2V5ID09PSAnRXNjYXBlJyAmJiB0aGlzLmlzRXhwYW5kZWQgJiYgIXRoaXMuaXNBbmltYXRpbmcpIHtcbiAgICAgICAgdGhpcy5jb2xsYXBzZSgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gSGFuZGxlIHdpbmRvdyByZXNpemVcbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIod2luZG93LCAncmVzaXplJywgKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuaXNFeHBhbmRlZCkge1xuICAgICAgICB0aGlzLmFkanVzdFBhbmVsSGVpZ2h0KCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBjb21wb25lbnQgc3RhdGUgZnJvbSBsb2NhbFN0b3JhZ2VcbiAgICovXG4gIGluaXRpYWxpemVTdGF0ZSgpIHtcbiAgICAvLyBDaGVjayBpZiB0aGVyZSdzIGEgc3RvcmVkIHByZWZlcmVuY2VcbiAgICBjb25zdCBzdG9yZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0KCdhcnRpY2xlLW1ldGFkYXRhLWV4cGFuZGVkJyk7XG4gICAgY29uc3Qgc2hvdWxkRXhwYW5kID0gc3RvcmVkID09PSAndHJ1ZSc7XG4gICAgXG4gICAgaWYgKHNob3VsZEV4cGFuZCkge1xuICAgICAgLy8gRXhwYW5kIHdpdGhvdXQgYW5pbWF0aW9uIG9uIHBhZ2UgbG9hZFxuICAgICAgdGhpcy5leHBhbmQoZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBFbnN1cmUgY29sbGFwc2VkIHN0YXRlXG4gICAgICB0aGlzLmNvbGxhcHNlKGZhbHNlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVG9nZ2xlIHRoZSBtZXRhZGF0YSBwYW5lbFxuICAgKi9cbiAgdG9nZ2xlKCkge1xuICAgIGlmICh0aGlzLmlzQW5pbWF0aW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaXNFeHBhbmRlZCkge1xuICAgICAgdGhpcy5jb2xsYXBzZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmV4cGFuZCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFeHBhbmQgdGhlIG1ldGFkYXRhIHBhbmVsXG4gICAqL1xuICBleHBhbmQoYW5pbWF0ZSA9IHRydWUpIHtcbiAgICBpZiAodGhpcy5pc0V4cGFuZGVkIHx8IHRoaXMuaXNBbmltYXRpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmlzQW5pbWF0aW5nID0gdHJ1ZTtcbiAgICB0aGlzLmlzRXhwYW5kZWQgPSB0cnVlO1xuXG4gICAgLy8gVXBkYXRlIEFSSUEgYXR0cmlidXRlc1xuICAgIHRoaXMudG9nZ2xlQnRuLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICd0cnVlJyk7XG4gICAgdGhpcy5tZXRhZGF0YVBhbmVsLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAnZmFsc2UnKTtcblxuICAgIC8vIFVwZGF0ZSBidXR0b24gdGV4dCBmb3Igc2NyZWVuIHJlYWRlcnNcbiAgICB0aGlzLnVwZGF0ZUJ1dHRvblRleHQoJ0hpZGUgQXJ0aWNsZSBJbmZvJyk7XG5cbiAgICBpZiAoYW5pbWF0ZSkge1xuICAgICAgLy8gQWRkIGFuaW1hdGlvbiBjbGFzc1xuICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2V4cGFuZGluZycpO1xuICAgICAgXG4gICAgICAvLyBBbGxvdyBwYW5lbCB0byBleHBhbmRcbiAgICAgIHRoaXMubWV0YWRhdGFQYW5lbC5zdHlsZS5tYXhIZWlnaHQgPSB0aGlzLm1ldGFkYXRhUGFuZWwuc2Nyb2xsSGVpZ2h0ICsgJ3B4JztcbiAgICAgIFxuICAgICAgLy8gQ2xlYW4gdXAgYWZ0ZXIgYW5pbWF0aW9uXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2V4cGFuZGluZycpO1xuICAgICAgICB0aGlzLm1ldGFkYXRhUGFuZWwuc3R5bGUubWF4SGVpZ2h0ID0gdGhpcy5tYXhIZWlnaHQgKyAncHgnO1xuICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZW1pdCgnaGVhZGVyOm1ldGFkYXRhRXhwYW5kZWQnKTtcbiAgICAgIH0sIHRoaXMuYW5pbWF0aW9uRHVyYXRpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJbW1lZGlhdGUgZXhwYW5kXG4gICAgICB0aGlzLm1ldGFkYXRhUGFuZWwuc3R5bGUubWF4SGVpZ2h0ID0gdGhpcy5tYXhIZWlnaHQgKyAncHgnO1xuICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgdGhpcy5lbWl0KCdoZWFkZXI6bWV0YWRhdGFFeHBhbmRlZCcpO1xuICAgIH1cblxuICAgIC8vIFN0b3JlIHByZWZlcmVuY2VcbiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0KCdhcnRpY2xlLW1ldGFkYXRhLWV4cGFuZGVkJywgdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQ29sbGFwc2UgdGhlIG1ldGFkYXRhIHBhbmVsXG4gICAqL1xuICBjb2xsYXBzZShhbmltYXRlID0gdHJ1ZSkge1xuICAgIGlmICghdGhpcy5pc0V4cGFuZGVkIHx8IHRoaXMuaXNBbmltYXRpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmlzQW5pbWF0aW5nID0gdHJ1ZTtcbiAgICB0aGlzLmlzRXhwYW5kZWQgPSBmYWxzZTtcblxuICAgIC8vIFVwZGF0ZSBBUklBIGF0dHJpYnV0ZXNcbiAgICB0aGlzLnRvZ2dsZUJ0bi5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnKTtcbiAgICB0aGlzLm1ldGFkYXRhUGFuZWwuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XG5cbiAgICAvLyBVcGRhdGUgYnV0dG9uIHRleHQgZm9yIHNjcmVlbiByZWFkZXJzXG4gICAgdGhpcy51cGRhdGVCdXR0b25UZXh0KCdBcnRpY2xlIEluZm8nKTtcblxuICAgIGlmIChhbmltYXRlKSB7XG4gICAgICAvLyBBZGQgYW5pbWF0aW9uIGNsYXNzXG4gICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnY29sbGFwc2luZycpO1xuICAgICAgXG4gICAgICAvLyBHZXQgY3VycmVudCBoZWlnaHQgYW5kIHRoZW4gY29sbGFwc2VcbiAgICAgIGNvbnN0IGN1cnJlbnRIZWlnaHQgPSB0aGlzLm1ldGFkYXRhUGFuZWwuc2Nyb2xsSGVpZ2h0O1xuICAgICAgdGhpcy5tZXRhZGF0YVBhbmVsLnN0eWxlLm1heEhlaWdodCA9IGN1cnJlbnRIZWlnaHQgKyAncHgnO1xuICAgICAgXG4gICAgICAvLyBGb3JjZSByZWZsb3dcbiAgICAgIHRoaXMubWV0YWRhdGFQYW5lbC5vZmZzZXRIZWlnaHQ7XG4gICAgICBcbiAgICAgIC8vIENvbGxhcHNlIHRvIDBcbiAgICAgIHRoaXMubWV0YWRhdGFQYW5lbC5zdHlsZS5tYXhIZWlnaHQgPSAnMCc7XG4gICAgICBcbiAgICAgIC8vIFx1MjcwNSBVUERBVEVEOiBVc2UgQ1NTIHRpbWluZyB0b2tlbnMgaW5zdGVhZCBvZiBoYXJkY29kZWQgZHVyYXRpb25cbiAgICAgIGNvbnN0IGR1cmF0aW9uID0gYW5pbWF0aW9uQnJpZGdlLmdldFRpbWluZygnbWVkaXVtJyk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2NvbGxhcHNpbmcnKTtcbiAgICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmVtaXQoJ2hlYWRlcjptZXRhZGF0YUNvbGxhcHNlZCcpO1xuICAgICAgfSwgZHVyYXRpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJbW1lZGlhdGUgY29sbGFwc2VcbiAgICAgIHRoaXMubWV0YWRhdGFQYW5lbC5zdHlsZS5tYXhIZWlnaHQgPSAnMCc7XG4gICAgICB0aGlzLmlzQW5pbWF0aW5nID0gZmFsc2U7XG4gICAgICB0aGlzLmVtaXQoJ2hlYWRlcjptZXRhZGF0YUNvbGxhcHNlZCcpO1xuICAgIH1cblxuICAgIC8vIFN0b3JlIHByZWZlcmVuY2VcbiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0KCdhcnRpY2xlLW1ldGFkYXRhLWV4cGFuZGVkJywgZmFsc2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBidXR0b24gdGV4dCBmb3IgYWNjZXNzaWJpbGl0eVxuICAgKi9cbiAgdXBkYXRlQnV0dG9uVGV4dCh0ZXh0KSB7XG4gICAgY29uc3QgYnV0dG9uVGV4dCA9IHRoaXMudG9nZ2xlQnRuLnF1ZXJ5U2VsZWN0b3IoJy5hcnRpY2xlLWhlYWRlcl9fdG9nZ2xlLXRleHQnKTtcbiAgICBpZiAoYnV0dG9uVGV4dCkge1xuICAgICAgYnV0dG9uVGV4dC50ZXh0Q29udGVudCA9IHRleHQ7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFkanVzdCBwYW5lbCBoZWlnaHQgb24gd2luZG93IHJlc2l6ZVxuICAgKi9cbiAgYWRqdXN0UGFuZWxIZWlnaHQoKSB7XG4gICAgaWYgKHRoaXMuaXNFeHBhbmRlZCAmJiAhdGhpcy5pc0FuaW1hdGluZykge1xuICAgICAgdGhpcy5tZXRhZGF0YVBhbmVsLnN0eWxlLm1heEhlaWdodCA9ICdub25lJztcbiAgICAgIGNvbnN0IG5ld0hlaWdodCA9IHRoaXMubWV0YWRhdGFQYW5lbC5zY3JvbGxIZWlnaHQ7XG4gICAgICB0aGlzLm1ldGFkYXRhUGFuZWwuc3R5bGUubWF4SGVpZ2h0ID0gTWF0aC5taW4obmV3SGVpZ2h0LCB0aGlzLm1heEhlaWdodCkgKyAncHgnO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY3VycmVudCBjb21wb25lbnQgc3RhdGVcbiAgICovXG4gIGdldFN0YXRlKCkge1xuICAgIHJldHVybiB7XG4gICAgICBpc0V4cGFuZGVkOiB0aGlzLmlzRXhwYW5kZWQsXG4gICAgICBpc0FuaW1hdGluZzogdGhpcy5pc0FuaW1hdGluZyxcbiAgICAgIGhhc01ldGFkYXRhOiAhIXRoaXMubWV0YWRhdGFQYW5lbCxcbiAgICAgIGhhc1RvZ2dsZTogISF0aGlzLnRvZ2dsZUJ0blxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogUHJvZ3JhbW1hdGljYWxseSBleHBhbmQgdGhlIHBhbmVsXG4gICAqL1xuICBzaG93KCkge1xuICAgIGlmICghdGhpcy5pc0V4cGFuZGVkKSB7XG4gICAgICB0aGlzLmV4cGFuZCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQcm9ncmFtbWF0aWNhbGx5IGNvbGxhcHNlIHRoZSBwYW5lbFxuICAgKi9cbiAgaGlkZSgpIHtcbiAgICBpZiAodGhpcy5pc0V4cGFuZGVkKSB7XG4gICAgICB0aGlzLmNvbGxhcHNlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlc2V0IHRvIGRlZmF1bHQgc3RhdGVcbiAgICovXG4gIHJlc2V0KCkge1xuICAgIHRoaXMuY29sbGFwc2UoZmFsc2UpO1xuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmUoJ2FydGljbGUtbWV0YWRhdGEtZXhwYW5kZWQnKTtcbiAgICB0aGlzLmVtaXQoJ2hlYWRlcjpyZXNldCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBjb25maWd1cmF0aW9uXG4gICAqL1xuICB1cGRhdGVDb25maWcoY29uZmlnKSB7XG4gICAgaWYgKGNvbmZpZy5hbmltYXRpb25EdXJhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLmFuaW1hdGlvbkR1cmF0aW9uID0gY29uZmlnLmFuaW1hdGlvbkR1cmF0aW9uO1xuICAgIH1cbiAgICBpZiAoY29uZmlnLm1heEhlaWdodCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLm1heEhlaWdodCA9IGNvbmZpZy5tYXhIZWlnaHQ7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENvbXBvbmVudCBjbGVhbnVwXG4gICAqL1xuICBvbkRlc3Ryb3koKSB7XG4gICAgLy8gUmVzZXQgYW5pbWF0aW9ucyBpZiBpbiBwcm9ncmVzc1xuICAgIGlmICh0aGlzLmlzQW5pbWF0aW5nKSB7XG4gICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZXhwYW5kaW5nJywgJ2NvbGxhcHNpbmcnKTtcbiAgICAgIHRoaXMuaXNBbmltYXRpbmcgPSBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgLy8gUmVzZXQgc3RhdGVcbiAgICB0aGlzLmlzRXhwYW5kZWQgPSBmYWxzZTtcbiAgICBcbiAgICAvLyBuby1vcFxuICB9XG59XG5cbi8vIEF1dG8tcmVnaXN0ZXIgY29tcG9uZW50XG5pbXBvcnQgQ29tcG9uZW50TWFuYWdlciBmcm9tICcuLi8uLi9jb3JlL0NvbXBvbmVudE1hbmFnZXIuanMnO1xuQ29tcG9uZW50TWFuYWdlci5yZWdpc3RlcignYXJ0aWNsZS1oZWFkZXInLCBBcnRpY2xlSGVhZGVyKTsiLCAiLyoqXG4gKiBBcnRpY2xlIFRhYnMgQ29tcG9uZW50XG4gKiBIYW5kbGVzIHRhYiBzd2l0Y2hpbmcgd2l0aCBidXR0b24gc3RhdGUgbWFuYWdlbWVudCBhbmQgY29udGVudCB2aXNpYmlsaXR5XG4gKi9cblxuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vY29yZS9Db21wb25lbnQuanMnO1xuaW1wb3J0IHsgYW5pbWF0aW9uQnJpZGdlIH0gZnJvbSAnLi4vLi4vY29yZS9BbmltYXRpb25CcmlkZ2UuanMnO1xuXG5leHBvcnQgY2xhc3MgQXJ0aWNsZVRhYnMgZXh0ZW5kcyBDb21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcihjb25maWcgPSB7fSkge1xuICAgIHN1cGVyKHtcbiAgICAgIG5hbWU6ICdhcnRpY2xlLXRhYnMnLFxuICAgICAgc2VsZWN0b3I6IGNvbmZpZy5zZWxlY3RvciB8fCAnW2RhdGEtY29tcG9uZW50PVwidGFic1wiXSwgW2RhdGEtY29tcG9uZW50PVwiYXJ0aWNsZS10YWJzXCJdJyxcbiAgICAgIC4uLmNvbmZpZ1xuICAgIH0pO1xuICAgIFxuICAgIHRoaXMudGFiQ29udGFpbmVycyA9IFtdO1xuICB9XG5cbiAgYXN5bmMgb25Jbml0KCkge1xuICAgIC8vIFx1RDgzRFx1REU4MCBORVc6IEVuaGFuY2VkIGluaXRpYWxpemF0aW9uIHdpdGggbG9hZGluZyBzdGF0ZXNcbiAgICB0aGlzLnNldExvYWRpbmdTdGF0ZSh0cnVlKTtcbiAgICB0aGlzLnVwZGF0ZUNvbXBvbmVudFN0YXRlKCdpbml0aWFsaXppbmcnKTtcbiAgICBcbiAgICAvLyBXYWl0IGZvciBET00gdG8gYmUgcmVhZHlcbiAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2xvYWRpbmcnKSB7XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIHJlc29sdmUsIHsgb25jZTogdHJ1ZSB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLnRhYkNvbnRhaW5lcnMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWNvbXBvbmVudD1cImFydGljbGUtdGFic1wiXSwgW2RhdGEtY29tcG9uZW50PVwidGFic1wiXScpKTtcbiAgICAvLyBGaWx0ZXIgb3V0IGFueSBjb250YWluZXJzIHRoYXQgbGFjayByZXF1aXJlZCBzdHJ1Y3R1cmVcbiAgICB0aGlzLnRhYkNvbnRhaW5lcnMgPSB0aGlzLnRhYkNvbnRhaW5lcnMuZmlsdGVyKGMgPT4gYy5xdWVyeVNlbGVjdG9yKCdbZGF0YS10YWItaWRdJykgJiYgYy5xdWVyeVNlbGVjdG9yKCdbZGF0YS10YWJjb250ZW50XScpKTtcbiAgICBcbiAgICBpZiAodGhpcy50YWJDb250YWluZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc29sZS53YXJuKCdBcnRpY2xlVGFiczogTm8gdGFiIGNvbnRhaW5lcnMgZm91bmQnKTtcbiAgICAgIHRoaXMuc2V0TG9hZGluZ1N0YXRlKGZhbHNlKTtcbiAgICAgIHRoaXMudXBkYXRlQ29tcG9uZW50U3RhdGUoJ2Vycm9yJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5pbml0aWFsaXplQWxsVGFicygpO1xuICAgIFxuICAgIC8vIFx1RDgzRFx1REU4MCBORVc6IEluaXRpYWxpemF0aW9uIGNvbXBsZXRlXG4gICAgdGhpcy5zZXRMb2FkaW5nU3RhdGUoZmFsc2UpO1xuICAgIHRoaXMudXBkYXRlQ29tcG9uZW50U3RhdGUoJ3JlYWR5Jyk7XG4gICAgXG4gICAgXG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBhbGwgdGFiIGNvbnRhaW5lcnNcbiAgICovXG4gIGluaXRpYWxpemVBbGxUYWJzKCkge1xuICAgIHRoaXMudGFiQ29udGFpbmVycy5mb3JFYWNoKHRhYkNvbnRhaW5lciA9PiB7XG4gICAgICB0aGlzLmluaXRpYWxpemVUYWJDb250YWluZXIodGFiQ29udGFpbmVyKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIGEgc2luZ2xlIHRhYiBjb250YWluZXJcbiAgICovXG4gIGluaXRpYWxpemVUYWJDb250YWluZXIodGFiQ29udGFpbmVyKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHRhYkNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS10YWItaWRdJyk7XG4gICAgY29uc3Qgb3B0aW9uQ29udGVudCA9IHRhYkNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS10YWJjb250ZW50XScpO1xuICAgIFxuICAgIGlmIChvcHRpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc29sZS53YXJuKCdBcnRpY2xlVGFiczogTm8gdGFiIG9wdGlvbnMgZm91bmQgaW4gY29udGFpbmVyJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRW5zdXJlIGF0IGxlYXN0IG9uZSB0YWIgaXMgYWN0aXZlXG4gICAgdGhpcy5lbnN1cmVBY3RpdmVUYWIodGFiQ29udGFpbmVyKTtcbiAgICBcbiAgICAvLyBTZXR1cCBldmVudCBsaXN0ZW5lcnMgZm9yIGFsbCBidXR0b25zXG4gICAgdGhpcy5zZXR1cFRhYkV2ZW50TGlzdGVuZXJzKHRhYkNvbnRhaW5lciwgb3B0aW9ucyk7XG4gICAgXG4gICAgLy8gSW5pdGlhbCBjb250ZW50IHVwZGF0ZVxuICAgIHRoaXMudXBkYXRlQ29udGVudCh0YWJDb250YWluZXIsIG9wdGlvbkNvbnRlbnQpO1xuICAgIFxuICAgIHRoaXMuZW1pdCgndGFiczpjb250YWluZXJJbml0aWFsaXplZCcsIHsgXG4gICAgICBjb250YWluZXI6IHRhYkNvbnRhaW5lciwgXG4gICAgICBvcHRpb25zQ291bnQ6IG9wdGlvbnMubGVuZ3RoLFxuICAgICAgY29udGVudENvdW50OiBvcHRpb25Db250ZW50Lmxlbmd0aCBcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbnN1cmUgYXQgbGVhc3Qgb25lIHRhYiBpcyBhY3RpdmUgaW5pdGlhbGx5XG4gICAqL1xuICBlbnN1cmVBY3RpdmVUYWIodGFiQ29udGFpbmVyKSB7XG4gICAgY29uc3QgYWN0aXZlQnV0dG9ucyA9IHRhYkNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b24uYmctYnJhbmQnKTtcbiAgICBcbiAgICBpZiAoYWN0aXZlQnV0dG9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnN0IGZpcnN0QnV0dG9uID0gdGFiQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbltkYXRhLXRhYi1vcHRpb25dJyk7XG4gICAgICBpZiAoZmlyc3RCdXR0b24pIHtcbiAgICAgICAgdGhpcy5hY3RpdmF0ZUJ1dHRvbihmaXJzdEJ1dHRvbik7XG4gICAgICAgIHRoaXMuZW1pdCgndGFiczpkZWZhdWx0VGFiQWN0aXZhdGVkJywgeyBidXR0b246IGZpcnN0QnV0dG9uIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCBldmVudCBsaXN0ZW5lcnMgZm9yIHRhYiBidXR0b25zXG4gICAqL1xuICBzZXR1cFRhYkV2ZW50TGlzdGVuZXJzKHRhYkNvbnRhaW5lciwgb3B0aW9ucykge1xuICAgIG9wdGlvbnMuZm9yRWFjaChvcHRpb24gPT4ge1xuICAgICAgY29uc3QgYnV0dG9ucyA9IG9wdGlvbi5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b24nKTtcbiAgICAgIFxuICAgICAgYnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihidXR0b24sICdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgdGhpcy5oYW5kbGVCdXR0b25DbGljayhlLCB0YWJDb250YWluZXIpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCBrZXlib2FyZCBzdXBwb3J0XG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihidXR0b24sICdrZXlkb3duJywgKGUpID0+IHtcbiAgICAgICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicgfHwgZS5rZXkgPT09ICcgJykge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVCdXR0b25DbGljayhlLCB0YWJDb250YWluZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgYnV0dG9uIGNsaWNrIGV2ZW50c1xuICAgKi9cbiAgaGFuZGxlQnV0dG9uQ2xpY2soZSwgdGFiQ29udGFpbmVyKSB7XG4gICAgY29uc3QgY2xpY2tlZEJ1dHRvbiA9IGUudGFyZ2V0O1xuICAgIGNvbnN0IHBhcmVudE9wdGlvbiA9IGNsaWNrZWRCdXR0b24uY2xvc2VzdCgnW2RhdGEtdGFiLWlkXScpO1xuICAgIFxuICAgIGlmICghcGFyZW50T3B0aW9uKSByZXR1cm47XG4gICAgXG4gICAgLy8gXHVEODNEXHVERTgwIE5FVzogRW5oYW5jZWQgdGFiIHN3aXRjaGluZyB3aXRoIHZpc3VhbCBmZWVkYmFja1xuICAgIHRoaXMudXBkYXRlQ29tcG9uZW50U3RhdGUoJ3N3aXRjaGluZycpO1xuICAgIHRoaXMuc2V0Q1NTUHJvcGVydHkoJy0tdGFiLXN3aXRjaGluZycsICd0cnVlJyk7XG4gICAgXG4gICAgLy8gR2V0IGFsbCBidXR0b25zIGluIHRoZSBzYW1lIG9wdGlvbiBncm91cFxuICAgIGNvbnN0IHNpYmxpbmdCdXR0b25zID0gcGFyZW50T3B0aW9uLnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbicpO1xuICAgIFxuICAgIC8vIERlYWN0aXZhdGUgYWxsIHNpYmxpbmcgYnV0dG9uc1xuICAgIHNpYmxpbmdCdXR0b25zLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICAgIGlmIChidXR0b24gIT09IGNsaWNrZWRCdXR0b24pIHtcbiAgICAgICAgdGhpcy5kZWFjdGl2YXRlQnV0dG9uKGJ1dHRvbik7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgLy8gQWN0aXZhdGUgY2xpY2tlZCBidXR0b25cbiAgICB0aGlzLmFjdGl2YXRlQnV0dG9uKGNsaWNrZWRCdXR0b24pO1xuICAgIFxuICAgIC8vIFVwZGF0ZSBjb250ZW50IHZpc2liaWxpdHkgd2l0aCBlbmhhbmNlZCB0aW1pbmdcbiAgICBjb25zdCBvcHRpb25Db250ZW50ID0gdGFiQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXRhYmNvbnRlbnRdJyk7XG4gICAgdGhpcy51cGRhdGVDb250ZW50KHRhYkNvbnRhaW5lciwgb3B0aW9uQ29udGVudCk7XG4gICAgXG4gICAgLy8gXHVEODNEXHVERTgwIE5FVzogU3dpdGNoIGNvbXBsZXRlIGFmdGVyIGFuaW1hdGlvblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy51cGRhdGVDb21wb25lbnRTdGF0ZSgnYWN0aXZlJyk7XG4gICAgICB0aGlzLnNldENTU1Byb3BlcnR5KCctLXRhYi1zd2l0Y2hpbmcnLCAnZmFsc2UnKTtcbiAgICB9LCAyMDApOyAvLyBNYXRjaCBDU1MgdHJhbnNpdGlvbiB0aW1pbmdcbiAgICBcbiAgICB0aGlzLmVtaXQoJ3RhYnM6YnV0dG9uQ2xpY2tlZCcsIHsgXG4gICAgICBidXR0b246IGNsaWNrZWRCdXR0b24sIFxuICAgICAgY29udGFpbmVyOiB0YWJDb250YWluZXIsXG4gICAgICBvcHRpb246IGNsaWNrZWRCdXR0b24uZ2V0QXR0cmlidXRlKCdkYXRhLXRhYi1vcHRpb24nKVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEFjdGl2YXRlIGEgYnV0dG9uIChtYWtlIGl0IHNlbGVjdGVkKVxuICAgKi9cbiAgYWN0aXZhdGVCdXR0b24oYnV0dG9uKSB7XG4gICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLXdoaXRlJywgJ3RleHQtYmxhY2snKTtcbiAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYmctYnJhbmQnLCAndGV4dC13aGl0ZScpO1xuICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnLCAndHJ1ZScpO1xuICB9XG5cbiAgLyoqXG4gICAqIERlYWN0aXZhdGUgYSBidXR0b24gKG1ha2UgaXQgdW5zZWxlY3RlZClcbiAgICovXG4gIGRlYWN0aXZhdGVCdXR0b24oYnV0dG9uKSB7XG4gICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLWJyYW5kJywgJ3RleHQtd2hpdGUnKTtcbiAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYmctd2hpdGUnLCAndGV4dC1ibGFjaycpO1xuICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnLCAnZmFsc2UnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgY29udGVudCB2aXNpYmlsaXR5IGJhc2VkIG9uIGFjdGl2ZSBidXR0b25zXG4gICAqL1xuICB1cGRhdGVDb250ZW50KHRhYkNvbnRhaW5lciwgb3B0aW9uQ29udGVudCkge1xuICAgIGNvbnN0IGNvbnRlbnRXcmFwcGVyID0gdGFiQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy50YWJzX19jb250ZW50LCAudy1mdWxsJyk7XG4gICAgY29uc3QgY3VycmVudEhlaWdodCA9IGNvbnRlbnRXcmFwcGVyID8gY29udGVudFdyYXBwZXIub2Zmc2V0SGVpZ2h0IDogMDtcbiAgICAvLyBHZXQgYWxsIGFjdGl2ZSBidXR0b25zXG4gICAgY29uc3QgYWN0aXZlQnV0dG9ucyA9IHRhYkNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b24uYmctYnJhbmQnKTtcbiAgICBcbiAgICAvLyBHZXQgYWN0aXZlIGJ1dHRvbiBvcHRpb25zXG4gICAgY29uc3QgYWN0aXZlQnV0dG9uT3B0aW9ucyA9IFtdO1xuICAgIGFjdGl2ZUJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4ge1xuICAgICAgY29uc3QgdGFiT3B0aW9uID0gYnV0dG9uLmdldEF0dHJpYnV0ZSgnZGF0YS10YWItb3B0aW9uJyk7XG4gICAgICBpZiAodGFiT3B0aW9uKSB7XG4gICAgICAgIGFjdGl2ZUJ1dHRvbk9wdGlvbnMucHVzaCh0YWJPcHRpb24pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIC8vIENvbnZlcnQgdG8gY29udGVudCBpZGVudGlmaWVyXG4gICAgY29uc3QgY29udmVydGVkVGV4dCA9IGFjdGl2ZUJ1dHRvbk9wdGlvbnMuam9pbignLycpLnRvTG93ZXJDYXNlKCk7XG4gICAgXG4gICAgLy8gRmluZCBjb250ZW50IHRvIHNob3cgYW5kIGhpZGVcbiAgICBsZXQgdmlzaWJsZUNvbnRlbnQgPSBudWxsO1xuICAgIGNvbnN0IGNvbnRlbnRUb0hpZGUgPSBbXTtcbiAgICBjb25zdCBjb250ZW50VG9TaG93ID0gW107XG4gICAgXG4gICAgb3B0aW9uQ29udGVudC5mb3JFYWNoKGNvbnRlbnQgPT4ge1xuICAgICAgY29uc3QgY29udGVudFZhbHVlID0gY29udGVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGFiY29udGVudCcpO1xuICAgICAgY29uc3QgaXNDdXJyZW50bHlWaXNpYmxlID0gY29udGVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2lzLWFjdGl2ZScpO1xuICAgICAgXG4gICAgICBpZiAoY29udGVudFZhbHVlID09PSBjb252ZXJ0ZWRUZXh0KSB7XG4gICAgICAgIHZpc2libGVDb250ZW50ID0gY29udGVudDtcbiAgICAgICAgaWYgKCFpc0N1cnJlbnRseVZpc2libGUpIHtcbiAgICAgICAgICBjb250ZW50VG9TaG93LnB1c2goY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChpc0N1cnJlbnRseVZpc2libGUpIHtcbiAgICAgICAgICBjb250ZW50VG9IaWRlLnB1c2goY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICAvLyBTbW9vdGggdHJhbnNpdGlvbiB3aXRob3V0IG92ZXJsYXA6IGhpZGUgb2xkLCB0aGVuIHNob3cgbmV3XG4gICAgY29uc3QgdGFyZ2V0UGFuZWwgPSBjb250ZW50VG9TaG93WzBdIHx8IHZpc2libGVDb250ZW50O1xuICAgIGlmIChjb250ZW50V3JhcHBlciAmJiB0YXJnZXRQYW5lbCkge1xuICAgICAgY29uc3QgdGFyZ2V0SGVpZ2h0ID0gdGFyZ2V0UGFuZWwuc2Nyb2xsSGVpZ2h0O1xuICAgICAgY29udGVudFdyYXBwZXIuc3R5bGUuaGVpZ2h0ID0gY3VycmVudEhlaWdodCArICdweCc7XG4gICAgICBjb250ZW50V3JhcHBlci5vZmZzZXRIZWlnaHQ7XG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICBjb250ZW50V3JhcHBlci5zdHlsZS5oZWlnaHQgPSB0YXJnZXRIZWlnaHQgKyAncHgnO1xuICAgICAgfSk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgY29udGVudFdyYXBwZXIuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2hlaWdodCcpO1xuICAgICAgfSwgMzAwKTtcbiAgICB9XG5cbiAgICAvLyBIaWRlIG91dGdvaW5nIGZpcnN0IHRvIGF2b2lkIGxheWVyZWQgZGFya2VuaW5nIGR1cmluZyBmYWRlXG4gICAgY29udGVudFRvSGlkZS5mb3JFYWNoKHBhbmVsID0+IHtcbiAgICAgIHRoaXMuaGlkZUNvbnRlbnQocGFuZWwpO1xuICAgICAgcGFuZWwuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XG4gICAgfSk7XG4gICAgLy8gU2hvdyBpbmNvbWluZyBhZnRlciBhIHNob3J0IGRlbGF5IGZvciBzbW9vdGhlciBwZXJjZXB0aW9uXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjb250ZW50VG9TaG93LmZvckVhY2gocGFuZWwgPT4ge1xuICAgICAgICB0aGlzLnNob3dDb250ZW50KHBhbmVsKTtcbiAgICAgICAgcGFuZWwuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICdmYWxzZScpO1xuICAgICAgfSk7XG4gICAgfSwgNjApO1xuICAgIFxuICAgIHRoaXMuZW1pdCgndGFiczpjb250ZW50VXBkYXRlZCcsIHsgXG4gICAgICBjb250YWluZXI6IHRhYkNvbnRhaW5lcixcbiAgICAgIGFjdGl2ZU9wdGlvbnM6IGFjdGl2ZUJ1dHRvbk9wdGlvbnMsXG4gICAgICB2aXNpYmxlQ29udGVudCxcbiAgICAgIGNvbnRlbnRJZGVudGlmaWVyOiBjb252ZXJ0ZWRUZXh0XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGFjdGl2ZSB0YWJzIGZvciBhIHNwZWNpZmljIGNvbnRhaW5lclxuICAgKi9cbiAgZ2V0QWN0aXZlVGFicyh0YWJDb250YWluZXIpIHtcbiAgICBjb25zdCBhY3RpdmVCdXR0b25zID0gdGFiQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbi5iZy1icmFuZCcpO1xuICAgIHJldHVybiBBcnJheS5mcm9tKGFjdGl2ZUJ1dHRvbnMpLm1hcChidXR0b24gPT4gKHtcbiAgICAgIGJ1dHRvbixcbiAgICAgIG9wdGlvbjogYnV0dG9uLmdldEF0dHJpYnV0ZSgnZGF0YS10YWItb3B0aW9uJyksXG4gICAgICB0YWJJZDogYnV0dG9uLmNsb3Nlc3QoJ1tkYXRhLXRhYi1pZF0nKT8uZ2V0QXR0cmlidXRlKCdkYXRhLXRhYi1pZCcpXG4gICAgfSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFByb2dyYW1tYXRpY2FsbHkgYWN0aXZhdGUgYSB0YWIgb3B0aW9uXG4gICAqL1xuICBhY3RpdmF0ZVRhYk9wdGlvbih0YWJDb250YWluZXIsIHRhYk9wdGlvbikge1xuICAgIGNvbnN0IGJ1dHRvbiA9IHRhYkNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKGBidXR0b25bZGF0YS10YWItb3B0aW9uPVwiJHt0YWJPcHRpb259XCJdYCk7XG4gICAgaWYgKGJ1dHRvbikge1xuICAgICAgYnV0dG9uLmNsaWNrKCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc2V0IGFsbCB0YWJzIGluIGEgY29udGFpbmVyIHRvIGRlZmF1bHQgc3RhdGVcbiAgICovXG4gIHJlc2V0VGFiQ29udGFpbmVyKHRhYkNvbnRhaW5lcikge1xuICAgIC8vIERlYWN0aXZhdGUgYWxsIGJ1dHRvbnNcbiAgICBjb25zdCBhbGxCdXR0b25zID0gdGFiQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbltkYXRhLXRhYi1vcHRpb25dJyk7XG4gICAgYWxsQnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB0aGlzLmRlYWN0aXZhdGVCdXR0b24oYnV0dG9uKSk7XG4gICAgXG4gICAgLy8gSGlkZSBhbGwgY29udGVudFxuICAgIGNvbnN0IGFsbENvbnRlbnQgPSB0YWJDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtdGFiY29udGVudF0nKTtcbiAgICBhbGxDb250ZW50LmZvckVhY2goY29udGVudCA9PiB7XG4gICAgICBjb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWFjdGl2ZScpO1xuICAgICAgY29udGVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBBY3RpdmF0ZSBmaXJzdCB0YWJcbiAgICB0aGlzLmVuc3VyZUFjdGl2ZVRhYih0YWJDb250YWluZXIpO1xuICAgIFxuICAgIC8vIFVwZGF0ZSBjb250ZW50XG4gICAgdGhpcy51cGRhdGVDb250ZW50KHRhYkNvbnRhaW5lciwgYWxsQ29udGVudCk7XG4gICAgXG4gICAgdGhpcy5lbWl0KCd0YWJzOmNvbnRhaW5lclJlc2V0JywgeyBjb250YWluZXI6IHRhYkNvbnRhaW5lciB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93IGNvbnRlbnQgd2l0aCBzbW9vdGggY3Jvc3NmYWRlIHRyYW5zaXRpb25cbiAgICovXG4gIHNob3dDb250ZW50KGVsZW1lbnQpIHtcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2lzLWFjdGl2ZScpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhpZGUgY29udGVudCB3aXRoIHNtb290aCBmYWRlIG91dFxuICAgKi9cbiAgaGlkZUNvbnRlbnQoZWxlbWVudCkge1xuICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaXMtYWN0aXZlJyk7XG4gIH1cblxuICAvKipcbiAgICogQ29tcG9uZW50IGNsZWFudXBcbiAgICovXG4gIG9uRGVzdHJveSgpIHtcbiAgICAvLyBuby1vcFxuICB9XG59XG5cbi8vIEF1dG8tcmVnaXN0ZXIgY29tcG9uZW50XG5pbXBvcnQgQ29tcG9uZW50TWFuYWdlciBmcm9tICcuLi8uLi9jb3JlL0NvbXBvbmVudE1hbmFnZXIuanMnO1xuQ29tcG9uZW50TWFuYWdlci5yZWdpc3RlcignYXJ0aWNsZS10YWJzJywgQXJ0aWNsZVRhYnMpOyIsICIvKipcbiAqIEFydGljbGUgVGFibGUgb2YgQ29udGVudHMgQ29tcG9uZW50XG4gKiBIYW5kbGVzIFRPQyBoaWdobGlnaHRpbmcgYmFzZWQgb24gc2Nyb2xsIHBvc2l0aW9uIGFuZCByZWFkaW5nIHByb2dyZXNzXG4gKi9cblxuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vY29yZS9Db21wb25lbnQuanMnO1xuaW1wb3J0IHsgdGhyb3R0bGUgfSBmcm9tICcuLi8uLi91dGlscy9kb20uanMnO1xuXG5leHBvcnQgY2xhc3MgQXJ0aWNsZVRPQyBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZyA9IHt9KSB7XG4gICAgc3VwZXIoe1xuICAgICAgbmFtZTogJ2FydGljbGUtdG9jJyxcbiAgICAgIHNlbGVjdG9yOiBjb25maWcuc2VsZWN0b3IgfHwgJyNUYWJsZU9mQ29udGVudHMnLFxuICAgICAgLi4uY29uZmlnXG4gICAgfSk7XG4gICAgXG4gICAgdGhpcy50b2NMaW5rcyA9IFtdO1xuICAgIHRoaXMuc2VjdGlvbnMgPSBbXTtcbiAgICB0aGlzLnNjcm9sbE9mZnNldCA9IGNvbmZpZy5zY3JvbGxPZmZzZXQgfHwgNTA7XG4gICAgdGhpcy5wcm9ncmVzc0JhciA9IG51bGw7XG4gICAgdGhpcy5wcm9ncmVzc1RleHQgPSBudWxsO1xuICAgIHRoaXMudGhyb3R0bGVkSGlnaGxpZ2h0ZXIgPSBudWxsO1xuICAgIHRoaXMudGhyb3R0bGVkUHJvZ3Jlc3NVcGRhdGVyID0gbnVsbDtcbiAgfVxuXG4gIGFzeW5jIG9uSW5pdCgpIHtcbiAgICBpZiAoIXRoaXMuZWxlbWVudCkge1xuICAgICAgLy8gVE9DIG5vdCBwcmVzZW50IG9uIHBhZ2U7IHRoaXMgaXMgbm9ybWFsIGZvciBtYW55IHBhZ2VzXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy50b2NMaW5rcyA9IEFycmF5LmZyb20odGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2EnKSk7XG4gICAgdGhpcy5zZWN0aW9ucyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaDIsIGgzJykpO1xuICAgIFxuICAgIGlmICh0aGlzLnRvY0xpbmtzLmxlbmd0aCA9PT0gMCB8fCB0aGlzLnNlY3Rpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgLy8gTm90aGluZyB0byBhY3RpdmF0ZSBmb3IgVE9DXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSW5pdGlhbGl6ZSByZWFkaW5nIHByb2dyZXNzIGlmIGVsZW1lbnRzIGV4aXN0XG4gICAgdGhpcy5pbml0aWFsaXplUmVhZGluZ1Byb2dyZXNzKCk7XG4gICAgXG4gICAgLy8gQ3JlYXRlIHRocm90dGxlZCBzY3JvbGwgaGFuZGxlcnMgZm9yIGJldHRlciBwZXJmb3JtYW5jZVxuICAgIHRoaXMudGhyb3R0bGVkSGlnaGxpZ2h0ZXIgPSB0aHJvdHRsZSgoKSA9PiB0aGlzLmhpZ2hsaWdodEluVmlldygpLCAxNik7XG4gICAgdGhpcy50aHJvdHRsZWRQcm9ncmVzc1VwZGF0ZXIgPSB0aHJvdHRsZSgoKSA9PiB0aGlzLnVwZGF0ZVByb2dyZXNzKCksIDE2KTtcbiAgICBcbiAgICAvLyBTZXR1cCBzY3JvbGwgbGlzdGVuZXJzXG4gICAgdGhpcy5zZXR1cFNjcm9sbExpc3RlbmVycygpO1xuICAgIFxuICAgIC8vIEluaXRpYWwgaGlnaGxpZ2h0XG4gICAgdGhpcy5oaWdobGlnaHRJblZpZXcoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIaWdobGlnaHQgdGhlIFRPQyBsaW5rIGZvciB0aGUgY3VycmVudGx5IHZpZXdlZCBzZWN0aW9uXG4gICAqL1xuICBoaWdobGlnaHRJblZpZXcoKSB7XG4gICAgdGhpcy5zZWN0aW9ucy5mb3JFYWNoKChzZWN0aW9uKSA9PiB7XG4gICAgICBjb25zdCByZWN0ID0gc2VjdGlvbi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgaWYgc2VjdGlvbiBpcyBpbiB2aWV3cG9ydCB3aXRoIG9mZnNldFxuICAgICAgaWYgKFxuICAgICAgICByZWN0LnRvcCArIHRoaXMuc2Nyb2xsT2Zmc2V0ID49IDAgJiZcbiAgICAgICAgcmVjdC5ib3R0b20gPD0gd2luZG93LmlubmVySGVpZ2h0ICsgdGhpcy5zY3JvbGxPZmZzZXRcbiAgICAgICkge1xuICAgICAgICBjb25zdCBzZWN0aW9uSWQgPSBzZWN0aW9uLmlkO1xuICAgICAgICBpZiAoIXNlY3Rpb25JZCkgcmV0dXJuO1xuICAgICAgICBcbiAgICAgICAgLy8gRmluZCBjb3JyZXNwb25kaW5nIFRPQyBsaW5rXG4gICAgICAgIGNvbnN0IGFjdGl2ZUxpbmsgPSB0aGlzLnRvY0xpbmtzLmZpbmQobGluayA9PiBcbiAgICAgICAgICBsaW5rLmdldEF0dHJpYnV0ZSgnaHJlZicpID09PSBgIyR7c2VjdGlvbklkfWBcbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChhY3RpdmVMaW5rKSB7XG4gICAgICAgICAgLy8gUmVtb3ZlIGhpZ2hsaWdodCBmcm9tIGFsbCBsaW5rc1xuICAgICAgICAgIHRoaXMudG9jTGlua3MuZm9yRWFjaChsaW5rID0+IHtcbiAgICAgICAgICAgIGxpbmsuY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1icmFuZCcsICd0b2MtYWN0aXZlJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQWRkIGhpZ2hsaWdodCB0byBhY3RpdmUgbGlua1xuICAgICAgICAgIGFjdGl2ZUxpbmsuY2xhc3NMaXN0LmFkZCgndGV4dC1icmFuZCcsICd0b2MtYWN0aXZlJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRW1pdCBldmVudCBmb3Igb3RoZXIgY29tcG9uZW50c1xuICAgICAgICAgIHRoaXMuZW1pdCgndG9jOnNlY3Rpb25DaGFuZ2VkJywge1xuICAgICAgICAgICAgc2VjdGlvbklkLFxuICAgICAgICAgICAgZWxlbWVudDogc2VjdGlvbixcbiAgICAgICAgICAgIGxpbms6IGFjdGl2ZUxpbmtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgcmVhZGluZyBwcm9ncmVzcyBmdW5jdGlvbmFsaXR5XG4gICAqL1xuICBpbml0aWFsaXplUmVhZGluZ1Byb2dyZXNzKCkge1xuICAgIHRoaXMucHJvZ3Jlc3NCYXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvZ3Jlc3MtYmFyJyk7XG4gICAgdGhpcy5wcm9ncmVzc1RleHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvZ3Jlc3MtdGV4dCcpO1xuICAgIFxuICAgIGlmICh0aGlzLnByb2dyZXNzQmFyICYmIHRoaXMucHJvZ3Jlc3NUZXh0KSB7XG4gICAgICAvLyBJbml0aWFsaXplIHNlcXVlbmNlXG4gICAgICB0aGlzLnVwZGF0ZUNvbXBvbmVudFN0YXRlKCdpbml0aWFsaXppbmctcHJvZ3Jlc3MnKTtcbiAgICAgIFxuICAgICAgLy8gU3RhcnQgaGlkZGVuIGZvciBzbW9vdGggcmV2ZWFsXG4gICAgICB0aGlzLnByb2dyZXNzQmFyLnN0eWxlLm9wYWNpdHkgPSAnMCc7XG4gICAgICB0aGlzLnByb2dyZXNzQmFyLnN0eWxlLnRyYW5zaXRpb24gPSAnYWxsIHZhcigtLXRpbWluZy1tZWRpdW0pIHZhcigtLWVhc2luZy1lbXBoYXNpemVkKSc7XG4gICAgICB0aGlzLnByb2dyZXNzVGV4dC5zdHlsZS5vcGFjaXR5ID0gJzAnO1xuICAgICAgdGhpcy5wcm9ncmVzc1RleHQuc3R5bGUudHJhbnNpdGlvbiA9ICdhbGwgdmFyKC0tdGltaW5nLW1lZGl1bSkgdmFyKC0tZWFzaW5nLWVtcGhhc2l6ZWQpJztcbiAgICAgIFxuICAgICAgLy8gSW5pdGlhbGl6ZSBhZnRlciBET00gaXMgcmVhZHlcbiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIHRoaXMudXBkYXRlUHJvZ3Jlc3MoKTsgLy8gSW5pdGlhbCBjYWxjdWxhdGlvblxuICAgICAgICBcbiAgICAgICAgLy8gU21vb3RoIHJldmVhbCBhZnRlciBjYWxjdWxhdGlvbiB3aXRoIHN0YWdnZXJlZCB0aW1pbmdcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5wcm9ncmVzc0Jhci5zdHlsZS5vcGFjaXR5ID0gJzEnO1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wcm9ncmVzc1RleHQuc3R5bGUub3BhY2l0eSA9ICcxJztcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ29tcG9uZW50U3RhdGUoJ3Byb2dyZXNzLWFjdGl2ZScpO1xuICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgIH0sIDE1MCk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSByZWFkaW5nIHByb2dyZXNzIGJhclxuICAgKi9cbiAgdXBkYXRlUHJvZ3Jlc3MoKSB7XG4gICAgaWYgKCF0aGlzLnByb2dyZXNzQmFyIHx8ICF0aGlzLnByb2dyZXNzVGV4dCkgcmV0dXJuO1xuICAgIFxuICAgIGNvbnN0IGFydGljbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYXJ0aWNsZUNvbnRlbnQnKSB8fCBcbiAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXJ0aWNsZS1jb250ZW50JykgfHxcbiAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtYWluJyk7XG4gICAgXG4gICAgaWYgKCFhcnRpY2xlKSByZXR1cm47XG4gICAgXG4gICAgY29uc3QgYXJ0aWNsZVRvcCA9IGFydGljbGUub2Zmc2V0VG9wO1xuICAgIGNvbnN0IGFydGljbGVIZWlnaHQgPSBhcnRpY2xlLm9mZnNldEhlaWdodDtcbiAgICBjb25zdCBzY3JvbGxUb3AgPSB3aW5kb3cucGFnZVlPZmZzZXQ7XG4gICAgY29uc3Qgd2luZG93SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgIFxuICAgIC8vIFx1RDgzRFx1REU4MCBORVc6IEVuaGFuY2VkIHByb2dyZXNzIGNhbGN1bGF0aW9uIHdpdGggYmV0dGVyIGFjY3VyYWN5XG4gICAgY29uc3QgcHJvZ3Jlc3MgPSBNYXRoLm1pbigxMDAsIE1hdGgubWF4KDAsIFxuICAgICAgKChzY3JvbGxUb3AgKyB3aW5kb3dIZWlnaHQgLSBhcnRpY2xlVG9wKSAvIGFydGljbGVIZWlnaHQpICogMTAwXG4gICAgKSk7XG4gICAgXG4gICAgLy8gXHVEODNEXHVERTgwIE5FVzogU21vb3RoIHByb2dyZXNzIHVwZGF0ZXMgd2l0aCB2aXN1YWwgZmVlZGJhY2tcbiAgICBjb25zdCBjdXJyZW50V2lkdGggPSBwYXJzZUZsb2F0KHRoaXMucHJvZ3Jlc3NCYXIuc3R5bGUud2lkdGgpIHx8IDA7XG4gICAgY29uc3QgZGlmZmVyZW5jZSA9IE1hdGguYWJzKHByb2dyZXNzIC0gY3VycmVudFdpZHRoKTtcbiAgICBcbiAgICAvLyBBZGQgdXBkYXRpbmcgY2xhc3MgZm9yIHNtb290aCB0cmFuc2l0aW9ucyBkdXJpbmcgc2lnbmlmaWNhbnQgY2hhbmdlc1xuICAgIGlmIChkaWZmZXJlbmNlID4gMikge1xuICAgICAgdGhpcy5wcm9ncmVzc0Jhci5jbGFzc0xpc3QuYWRkKCd1cGRhdGluZycpO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMucHJvZ3Jlc3NCYXIuY2xhc3NMaXN0LnJlbW92ZSgndXBkYXRpbmcnKTtcbiAgICAgIH0sIDIwMCk7XG4gICAgfVxuICAgIFxuICAgIC8vIFVwZGF0ZSBwcm9ncmVzcyBiYXIgd2l0aCBlbmhhbmNlZCB0aW1pbmdcbiAgICB0aGlzLnByb2dyZXNzQmFyLnN0eWxlLndpZHRoID0gYCR7cHJvZ3Jlc3N9JWA7XG4gICAgdGhpcy5wcm9ncmVzc1RleHQudGV4dENvbnRlbnQgPSBgJHtNYXRoLnJvdW5kKHByb2dyZXNzKX0lYDtcbiAgICBcbiAgICAvLyBcdUQ4M0RcdURFODAgTkVXOiBVcGRhdGUgY29tcG9uZW50IHN0YXRlIGJhc2VkIG9uIHByb2dyZXNzXG4gICAgaWYgKHByb2dyZXNzIDwgMTApIHtcbiAgICAgIHRoaXMuc2V0Q1NTUHJvcGVydHkoJy0tcHJvZ3Jlc3Mtc3RhZ2UnLCAnc3RhcnQnKTtcbiAgICB9IGVsc2UgaWYgKHByb2dyZXNzID4gOTApIHtcbiAgICAgIHRoaXMuc2V0Q1NTUHJvcGVydHkoJy0tcHJvZ3Jlc3Mtc3RhZ2UnLCAnZW5kJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0Q1NTUHJvcGVydHkoJy0tcHJvZ3Jlc3Mtc3RhZ2UnLCAnbWlkZGxlJyk7XG4gICAgfVxuICAgIFxuICAgIC8vIEVtaXQgcHJvZ3Jlc3MgZXZlbnRcbiAgICB0aGlzLmVtaXQoJ3RvYzpwcm9ncmVzc0NoYW5nZWQnLCB7IHByb2dyZXNzIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIHNjcm9sbCBldmVudCBsaXN0ZW5lcnMgdXNpbmcgbW9kZXJuIEFib3J0Q29udHJvbGxlciBwYXR0ZXJuXG4gICAqL1xuICBzZXR1cFNjcm9sbExpc3RlbmVycygpIHtcbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIod2luZG93LCAnc2Nyb2xsJywgdGhpcy50aHJvdHRsZWRIaWdobGlnaHRlciwgeyBwYXNzaXZlOiB0cnVlIH0pO1xuICAgIFxuICAgIGlmICh0aGlzLnByb2dyZXNzQmFyICYmIHRoaXMucHJvZ3Jlc3NUZXh0KSB7XG4gICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIod2luZG93LCAnc2Nyb2xsJywgdGhpcy50aHJvdHRsZWRQcm9ncmVzc1VwZGF0ZXIsIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU21vb3RoIHNjcm9sbCB0byBzZWN0aW9uXG4gICAqL1xuICBzY3JvbGxUb1NlY3Rpb24oc2VjdGlvbklkKSB7XG4gICAgY29uc3Qgc2VjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNlY3Rpb25JZCk7XG4gICAgaWYgKHNlY3Rpb24pIHtcbiAgICAgIGNvbnN0IHlPZmZzZXQgPSAtdGhpcy5zY3JvbGxPZmZzZXQ7XG4gICAgICBjb25zdCB5ID0gc2VjdGlvbi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgKyB3aW5kb3cucGFnZVlPZmZzZXQgKyB5T2Zmc2V0O1xuICAgICAgXG4gICAgICB3aW5kb3cuc2Nyb2xsVG8oe1xuICAgICAgICB0b3A6IHksXG4gICAgICAgIGJlaGF2aW9yOiAnc21vb3RoJ1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHRoaXMuZW1pdCgndG9jOnNjcm9sbFRvU2VjdGlvbicsIHsgc2VjdGlvbklkLCBlbGVtZW50OiBzZWN0aW9uIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDb21wb25lbnQgY2xlYW51cFxuICAgKi9cbiAgb25EZXN0cm95KCkge1xuICAgIC8vIEV2ZW50IGxpc3RlbmVycyBhdXRvbWF0aWNhbGx5IGNsZWFuZWQgdXAgYnkgQWJvcnRDb250cm9sbGVyIGluIGJhc2UgQ29tcG9uZW50XG4gIH1cbn1cblxuLy8gQXV0by1yZWdpc3RlciBjb21wb25lbnRcbmltcG9ydCBDb21wb25lbnRNYW5hZ2VyIGZyb20gJy4uLy4uL2NvcmUvQ29tcG9uZW50TWFuYWdlci5qcyc7XG5Db21wb25lbnRNYW5hZ2VyLnJlZ2lzdGVyKCdhcnRpY2xlLXRvYycsIEFydGljbGVUT0MpOyIsICIvKipcbiAqIEFydGljbGUgVGlsZXMgQ29tcG9uZW50XG4gKiBIYW5kbGVzIGludGVyYWN0aXZlIHRpbGVzIHdpdGggbW91c2UtZm9sbG93aW5nIGdyYWRpZW50IGVmZmVjdHMgYW5kIHN0YWdnZXJlZCBhbmltYXRpb25zXG4gKi9cblxuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vY29yZS9Db21wb25lbnQuanMnO1xuaW1wb3J0IHsgYW5pbWF0aW9uQnJpZGdlIH0gZnJvbSAnLi4vLi4vY29yZS9BbmltYXRpb25CcmlkZ2UuanMnO1xuXG5leHBvcnQgY2xhc3MgQXJ0aWNsZVRpbGVzIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoY29uZmlnID0ge30pIHtcbiAgICBzdXBlcih7XG4gICAgICBuYW1lOiAnYXJ0aWNsZS10aWxlcycsXG4gICAgICBzZWxlY3RvcjogY29uZmlnLnNlbGVjdG9yIHx8ICcudGlsZScsXG4gICAgICAuLi5jb25maWdcbiAgICB9KTtcbiAgICBcbiAgICB0aGlzLnRpbGVzID0gW107XG4gICAgdGhpcy5nbG9iYWxQb3NpdGlvbiA9IHsgeDogNTAsIHk6IDUwIH07IC8vIERlZmF1bHQgdG8gY2VudGVyXG4gICAgdGhpcy5hbmltYXRpb25JZCA9IG51bGw7XG4gICAgdGhpcy5pc0FuaW1hdGluZyA9IGZhbHNlO1xuICB9XG5cbiAgYXN5bmMgb25Jbml0KCkge1xuICAgIHRoaXMudGlsZXMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50aWxlJykpO1xuICAgIFxuICAgIGlmICh0aGlzLnRpbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc29sZS53YXJuKCdBcnRpY2xlVGlsZXM6IE5vIHRpbGVzIGZvdW5kJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5zZXR1cEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5zZXR1cFN0YWdnZXJlZEVudHJ5QW5pbWF0aW9ucygpO1xuICAgIHRoaXMuc3RhcnRHcmFkaWVudEFuaW1hdGlvbigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIGV2ZW50IGxpc3RlbmVycyBmb3IgbW91c2UgdHJhY2tpbmcgYW5kIHRpbGUgaW50ZXJhY3Rpb25zXG4gICAqL1xuICBzZXR1cEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIC8vIEdsb2JhbCBtb3VzZSB0cmFja2luZyBmb3Igc21vb3RoIGdyYWRpZW50IGZvbGxvd2luZ1xuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihkb2N1bWVudCwgJ21vdXNlbW92ZScsIChlKSA9PiB7XG4gICAgICB0aGlzLmdsb2JhbFBvc2l0aW9uLnggPSBlLmNsaWVudFg7XG4gICAgICB0aGlzLmdsb2JhbFBvc2l0aW9uLnkgPSBlLmNsaWVudFk7XG4gICAgfSwgeyBwYXNzaXZlOiB0cnVlIH0pO1xuXG4gICAgLy8gU2V0dXAgaW5kaXZpZHVhbCB0aWxlIGhvdmVyIGVmZmVjdHNcbiAgICB0aGlzLnRpbGVzLmZvckVhY2godGlsZSA9PiB7XG4gICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIodGlsZSwgJ21vdXNlZW50ZXInLCAoZSkgPT4gdGhpcy5oYW5kbGVUaWxlSG92ZXIoZSkpO1xuICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKHRpbGUsICdtb3VzZWxlYXZlJywgKGUpID0+IHRoaXMuaGFuZGxlVGlsZUxlYXZlKGUpKTtcbiAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcih0aWxlLCAnZm9jdXMnLCAoZSkgPT4gdGhpcy5oYW5kbGVUaWxlSG92ZXIoZSkpO1xuICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKHRpbGUsICdibHVyJywgKGUpID0+IHRoaXMuaGFuZGxlVGlsZUxlYXZlKGUpKTtcbiAgICB9KTtcblxuICAgIC8vIENsZWFudXAgb24gcGFnZSB1bmxvYWRcbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIod2luZG93LCAnYmVmb3JldW5sb2FkJywgKCkgPT4ge1xuICAgICAgdGhpcy5zdG9wR3JhZGllbnRBbmltYXRpb24oKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgdGlsZSBob3ZlciBlZmZlY3RzXG4gICAqL1xuICBoYW5kbGVUaWxlSG92ZXIoZSkge1xuICAgIGNvbnN0IHRpbGUgPSBlLmN1cnJlbnRUYXJnZXQ7XG4gICAgdGlsZS5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWSgtOHB4KSBzY2FsZSgxLjAyKSc7XG4gICAgdGlsZS5zdHlsZS56SW5kZXggPSAnMTAnO1xuICAgIFxuICAgIHRoaXMuZW1pdCgndGlsZXM6dGlsZUhvdmVyZWQnLCB7IHRpbGUgfSk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHRpbGUgbGVhdmUgZWZmZWN0c1xuICAgKi9cbiAgaGFuZGxlVGlsZUxlYXZlKGUpIHtcbiAgICBjb25zdCB0aWxlID0gZS5jdXJyZW50VGFyZ2V0O1xuICAgIHRpbGUuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoMCkgc2NhbGUoMS4wKSc7XG4gICAgdGlsZS5zdHlsZS56SW5kZXggPSAnJztcbiAgICBcbiAgICB0aGlzLmVtaXQoJ3RpbGVzOnRpbGVVbmhvdmVyZWQnLCB7IHRpbGUgfSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0dXAgc3RhZ2dlcmVkIGVudHJ5IGFuaW1hdGlvbnMgZm9yIHRpbGVzXG4gICAqL1xuICBzZXR1cFN0YWdnZXJlZEVudHJ5QW5pbWF0aW9ucygpIHtcbiAgICB0aGlzLnRpbGVzLmZvckVhY2goKHRpbGUsIGluZGV4KSA9PiB7XG4gICAgICAvLyBTZXQgaW5pdGlhbCBoaWRkZW4gc3RhdGVcbiAgICAgIHRpbGUuc3R5bGUub3BhY2l0eSA9ICcwJztcbiAgICAgIHRpbGUuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoMjBweCknO1xuICAgICAgXG4gICAgICAvLyBVc2UgQ1NTIHRpbWluZyB0b2tlbnMgZm9yIHN0YWdnZXJlZCBhbmltYXRpb25cbiAgICAgIGNvbnN0IGJhc2VEZWxheSA9IGFuaW1hdGlvbkJyaWRnZS5nZXRUaW1pbmcoJ2Zhc3QnKTtcbiAgICAgIGNvbnN0IHN0YWdnZXJEZWxheSA9IGluZGV4ICogKGJhc2VEZWxheSAvIDEwKTtcbiAgICAgIGNvbnN0IGRlbGF5ID0gc3RhZ2dlckRlbGF5ICsgKE1hdGgucmFuZG9tKCkgKiBiYXNlRGVsYXkgLyAyKTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aWxlLnN0eWxlLm9wYWNpdHkgPSAnMSc7XG4gICAgICAgIHRpbGUuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoMCknO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5lbWl0KCd0aWxlczp0aWxlQW5pbWF0ZWRJbicsIHsgdGlsZSwgaW5kZXgsIGRlbGF5IH0pO1xuICAgICAgfSwgZGVsYXkpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0IGdyYWRpZW50IGFuaW1hdGlvbiBsb29wXG4gICAqL1xuICBzdGFydEdyYWRpZW50QW5pbWF0aW9uKCkge1xuICAgIGlmICh0aGlzLmlzQW5pbWF0aW5nKSByZXR1cm47XG4gICAgXG4gICAgdGhpcy5pc0FuaW1hdGluZyA9IHRydWU7XG4gICAgdGhpcy51cGRhdGVHcmFkaWVudHMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9wIGdyYWRpZW50IGFuaW1hdGlvbiBsb29wXG4gICAqL1xuICBzdG9wR3JhZGllbnRBbmltYXRpb24oKSB7XG4gICAgaWYgKHRoaXMuYW5pbWF0aW9uSWQpIHtcbiAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuYW5pbWF0aW9uSWQpO1xuICAgICAgdGhpcy5hbmltYXRpb25JZCA9IG51bGw7XG4gICAgfVxuICAgIHRoaXMuaXNBbmltYXRpbmcgPSBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgZ3JhZGllbnQgcG9zaXRpb25zIGZvciBhbGwgdGlsZXNcbiAgICovXG4gIHVwZGF0ZUdyYWRpZW50cygpIHtcbiAgICB0aGlzLnRpbGVzLmZvckVhY2godGlsZSA9PiB7XG4gICAgICBjb25zdCByZWN0ID0gdGlsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIFxuICAgICAgLy8gQ2FsY3VsYXRlIHJlbGF0aXZlIG1vdXNlIHBvc2l0aW9uIGZvciB0aGlzIHRpbGVcbiAgICAgIGNvbnN0IG1vdXNlWCA9IE1hdGgubWF4KDAsIE1hdGgubWluKDEwMCwgXG4gICAgICAgICgodGhpcy5nbG9iYWxQb3NpdGlvbi54IC0gcmVjdC5sZWZ0KSAvIHJlY3Qud2lkdGgpICogMTAwXG4gICAgICApKTtcbiAgICAgIGNvbnN0IG1vdXNlWSA9IE1hdGgubWF4KDAsIE1hdGgubWluKDEwMCwgXG4gICAgICAgICgodGhpcy5nbG9iYWxQb3NpdGlvbi55IC0gcmVjdC50b3ApIC8gcmVjdC5oZWlnaHQpICogMTAwXG4gICAgICApKTtcbiAgICAgIFxuICAgICAgLy8gRW5oYW5jZWQgZ3JhZGllbnQgbGF5ZXJlZCBvdmVyIGJhc2UgYmFja2dyb3VuZFxuICAgICAgY29uc3QgaG92ZXJHcmFkaWVudCA9IGByYWRpYWwtZ3JhZGllbnQoNjAwcHggY2lyY2xlIGF0ICR7bW91c2VYfSUgJHttb3VzZVl9JSwgdmFyKC0tcHJpbWFyeS1ncmFkaWVudC1jb2xvciwgIzNiODJmNiksIHZhcigtLXNlY29uZGFyeS1ncmFkaWVudC1jb2xvciwgcmdiYSgzMCw2NCwxNzUsMCkpKWA7XG4gICAgICBjb25zdCBiYXNlQmcgPSBnZXRDb21wdXRlZFN0eWxlKHRpbGUpLmdldFByb3BlcnR5VmFsdWUoJy0tdGlsZS1iYXNlLWJnJykgfHwgJ3RyYW5zcGFyZW50JztcbiAgICAgIHRpbGUuc3R5bGUuYmFja2dyb3VuZCA9IGAke2hvdmVyR3JhZGllbnR9LCAke2Jhc2VCZ31gO1xuICAgIH0pO1xuICAgIFxuICAgIGlmICh0aGlzLmlzQW5pbWF0aW5nKSB7XG4gICAgICB0aGlzLmFuaW1hdGlvbklkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMudXBkYXRlR3JhZGllbnRzKCkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgZ3JhZGllbnQgY29sb3JzXG4gICAqL1xuICB1cGRhdGVHcmFkaWVudENvbG9ycyhwcmltYXJ5Q29sb3IsIHNlY29uZGFyeUNvbG9yKSB7XG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KCctLXByaW1hcnktZ3JhZGllbnQtY29sb3InLCBwcmltYXJ5Q29sb3IpO1xuICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1zZWNvbmRhcnktZ3JhZGllbnQtY29sb3InLCBzZWNvbmRhcnlDb2xvcik7XG4gICAgXG4gICAgdGhpcy5lbWl0KCd0aWxlczpjb2xvcnNVcGRhdGVkJywgeyBwcmltYXJ5Q29sb3IsIHNlY29uZGFyeUNvbG9yIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc2V0IGFsbCB0aWxlIHN0eWxlc1xuICAgKi9cbiAgcmVzZXRUaWxlcygpIHtcbiAgICB0aGlzLnRpbGVzLmZvckVhY2godGlsZSA9PiB7XG4gICAgICB0aWxlLnN0eWxlLm9wYWNpdHkgPSAnJztcbiAgICAgIHRpbGUuc3R5bGUudHJhbnNmb3JtID0gJyc7XG4gICAgICB0aWxlLnN0eWxlLnRyYW5zaXRpb24gPSAnJztcbiAgICAgIHRpbGUuc3R5bGUuekluZGV4ID0gJyc7XG4gICAgfSk7XG4gICAgXG4gICAgdGhpcy5lbWl0KCd0aWxlczp0aWxlc1Jlc2V0Jyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIG5ldyB0aWxlcyBkeW5hbWljYWxseVxuICAgKi9cbiAgYWRkVGlsZXMobmV3VGlsZXMpIHtcbiAgICBjb25zdCB0aWxlc1RvQWRkID0gQXJyYXkuaXNBcnJheShuZXdUaWxlcykgPyBuZXdUaWxlcyA6IFtuZXdUaWxlc107XG4gICAgXG4gICAgdGlsZXNUb0FkZC5mb3JFYWNoKHRpbGUgPT4ge1xuICAgICAgaWYgKHRpbGUgJiYgdGlsZS5jbGFzc0xpc3QuY29udGFpbnMoJ3RpbGUnKSkge1xuICAgICAgICB0aGlzLnRpbGVzLnB1c2godGlsZSk7XG4gICAgICAgIFxuICAgICAgICAvLyBTZXR1cCBldmVudHMgZm9yIG5ldyB0aWxlXG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcih0aWxlLCAnbW91c2VlbnRlcicsIChlKSA9PiB0aGlzLmhhbmRsZVRpbGVIb3ZlcihlKSk7XG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcih0aWxlLCAnbW91c2VsZWF2ZScsIChlKSA9PiB0aGlzLmhhbmRsZVRpbGVMZWF2ZShlKSk7XG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcih0aWxlLCAnZm9jdXMnLCAoZSkgPT4gdGhpcy5oYW5kbGVUaWxlSG92ZXIoZSkpO1xuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIodGlsZSwgJ2JsdXInLCAoZSkgPT4gdGhpcy5oYW5kbGVUaWxlTGVhdmUoZSkpO1xuICAgICAgICBcbiAgICAgICAgLy8gQW5pbWF0ZSBpbiBuZXcgdGlsZVxuICAgICAgICB0aWxlLnN0eWxlLm9wYWNpdHkgPSAnMCc7XG4gICAgICAgIHRpbGUuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoMjBweCknO1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB0aWxlLnN0eWxlLm9wYWNpdHkgPSAnMSc7XG4gICAgICAgICAgdGlsZS5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWSgwKSc7XG4gICAgICAgIH0sIDEwMCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgdGhpcy5lbWl0KCd0aWxlczp0aWxlc0FkZGVkJywgeyBhZGRlZFRpbGVzOiB0aWxlc1RvQWRkIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbXBvbmVudCBjbGVhbnVwXG4gICAqL1xuICBvbkRlc3Ryb3koKSB7XG4gICAgdGhpcy5zdG9wR3JhZGllbnRBbmltYXRpb24oKTtcbiAgICB0aGlzLnJlc2V0VGlsZXMoKTtcbiAgfVxufVxuXG4vLyBBdXRvLXJlZ2lzdGVyIGNvbXBvbmVudFxuaW1wb3J0IENvbXBvbmVudE1hbmFnZXIgZnJvbSAnLi4vLi4vY29yZS9Db21wb25lbnRNYW5hZ2VyLmpzJztcbkNvbXBvbmVudE1hbmFnZXIucmVnaXN0ZXIoJ2FydGljbGUtdGlsZXMnLCBBcnRpY2xlVGlsZXMpOyIsICIvKipcbiAqIEFydGljbGUgU3VtbWFyaXphdGlvbiBDb21wb25lbnRcbiAqIEhhbmRsZXMgQUktcG93ZXJlZCBhcnRpY2xlIHN1bW1hcml6YXRpb24gd2l0aCBrZXlib2FyZCBzaG9ydGN1dHNcbiAqL1xuXG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICcuLi8uLi9jb3JlL0NvbXBvbmVudC5qcyc7XG5pbXBvcnQgeyBzYW5pdGl6ZUhUTUwsIGVzY2FwZUhUTUwgfSBmcm9tICcuLi8uLi91dGlscy9zYW5pdGl6ZS5qcyc7XG5cbmV4cG9ydCBjbGFzcyBBcnRpY2xlU3VtbWFyaXphdGlvbiBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZyA9IHt9KSB7XG4gICAgc3VwZXIoe1xuICAgICAgbmFtZTogJ2FydGljbGUtc3VtbWFyaXphdGlvbicsXG4gICAgICBzZWxlY3RvcjogY29uZmlnLnNlbGVjdG9yIHx8ICcjYXJ0aWNsZVN1bW1hcml6YXRpb25Db250YWluZXInLFxuICAgICAgLi4uY29uZmlnXG4gICAgfSk7XG4gICAgXG4gICAgdGhpcy5zdW1tYXJ5RW5kcG9pbnQgPSBjb25maWcuc3VtbWFyeUVuZHBvaW50IHx8ICdodHRwczovL3N1bW1hcml6YXRpb24tMS1sYzQ3NjJjbzdhLXVjLmEucnVuLmFwcCc7XG4gICAgdGhpcy5hcnRpY2xlQ29udGVudCA9IG51bGw7XG4gICAgdGhpcy5zdW1tYXJ5Q29udGFpbmVyID0gbnVsbDtcbiAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlO1xuICB9XG5cbiAgYXN5bmMgb25Jbml0KCkge1xuICAgIGlmICghdGhpcy5lbGVtZW50KSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0FydGljbGVTdW1tYXJpemF0aW9uOiBTdW1tYXJpemF0aW9uIGNvbnRhaW5lciBub3QgZm91bmQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmFydGljbGVDb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FydGljbGVDb250ZW50Jyk7XG4gICAgaWYgKCF0aGlzLmFydGljbGVDb250ZW50KSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0FydGljbGVTdW1tYXJpemF0aW9uOiBBcnRpY2xlIGNvbnRlbnQgbm90IGZvdW5kJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5zZXR1cEtleWJvYXJkU2hvcnRjdXRzKCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0dXAga2V5Ym9hcmQgc2hvcnRjdXRzXG4gICAqL1xuICBzZXR1cEtleWJvYXJkU2hvcnRjdXRzKCkge1xuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihkb2N1bWVudCwgJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgICAgaWYgKChlLmN0cmxLZXkgfHwgZS5tZXRhS2V5KSAmJiBlLmNvZGUgPT09ICdTbGFzaCcpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLnRvZ2dsZVN1bW1hcml6YXRpb24oKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUb2dnbGUgc3VtbWFyaXphdGlvbiBjb250YWluZXIgdmlzaWJpbGl0eVxuICAgKi9cbiAgYXN5bmMgdG9nZ2xlU3VtbWFyaXphdGlvbigpIHtcbiAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJyk7XG4gICAgXG4gICAgaWYgKCF0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKSkge1xuICAgICAgYXdhaXQgdGhpcy5mZXRjaEFuZERpc3BsYXlTdW1tYXJ5KCk7XG4gICAgfVxuXG4gICAgdGhpcy5lbWl0KCdzdW1tYXJpemF0aW9uOnRvZ2dsZWQnLCB7IFxuICAgICAgdmlzaWJsZTogIXRoaXMuZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGRlbicpIFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEZldGNoIGFuZCBkaXNwbGF5IGFydGljbGUgc3VtbWFyeVxuICAgKi9cbiAgYXN5bmMgZmV0Y2hBbmREaXNwbGF5U3VtbWFyeSgpIHtcbiAgICBpZiAodGhpcy5pc0xvYWRpbmcpIHJldHVybjtcbiAgICBjb25zdCBpc09mZmxpbmUgPSAod2luZG93Lkh1Z29FbnZpcm9ubWVudCAmJiB3aW5kb3cuSHVnb0Vudmlyb25tZW50LmVudmlyb25tZW50ID09PSAnb2ZmbGluZScpO1xuICAgIGlmIChpc09mZmxpbmUpIHtcbiAgICAgIHRoaXMuZGlzcGxheUVycm9yKCdTdW1tYXJpemF0aW9uIGlzIHVuYXZhaWxhYmxlIGluIG9mZmxpbmUgbW9kZS4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgYXJ0aWNsZVRleHQgPSB0aGlzLmFydGljbGVDb250ZW50LmlubmVyVGV4dDtcbiAgICBpZiAoIWFydGljbGVUZXh0IHx8IGFydGljbGVUZXh0LnRyaW0oKS5sZW5ndGggPCAxMDApIHtcbiAgICAgIHRoaXMuZGlzcGxheUVycm9yKCdBcnRpY2xlIHRvbyBzaG9ydCB0byBzdW1tYXJpemUnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7XG4gICAgdGhpcy5zaG93TG9hZGluZ1N0YXRlKCk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLnN1bW1hcnlFbmRwb2ludCwge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBhcnRpY2xlX3RleHQ6IGFydGljbGVUZXh0XG4gICAgICAgIH0pXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhUVFAgZXJyb3IhIHN0YXR1czogJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICB0aGlzLnVwZGF0ZVVJV2l0aFN1bW1hcnkoZGF0YS5zdW1tYXJpemF0aW9uIHx8IGRhdGEuc3VtbWFyeSk7XG4gICAgICBcbiAgICAgIHRoaXMuZW1pdCgnc3VtbWFyaXphdGlvbjpjb21wbGV0ZWQnLCB7IHN1bW1hcnk6IGRhdGEuc3VtbWFyaXphdGlvbiB9KTtcbiAgICAgIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTdW1tYXJpemF0aW9uIGZhaWxlZDonLCBlcnJvcik7XG4gICAgICB0aGlzLmRpc3BsYXlFcnJvcignRmFpbGVkIHRvIGdlbmVyYXRlIHN1bW1hcnkuIFBsZWFzZSB0cnkgYWdhaW4uJyk7XG4gICAgICB0aGlzLmVtaXQoJ3N1bW1hcml6YXRpb246ZXJyb3InLCB7IGVycm9yIH0pO1xuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93IGxvYWRpbmcgc3RhdGVcbiAgICovXG4gIHNob3dMb2FkaW5nU3RhdGUoKSB7XG4gICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9IGBcbiAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwLThcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImFuaW1hdGUtc3BpbiBoLTggdy04IGJvcmRlci0yIGJvcmRlci1icmFuZCBib3JkZXItdC10cmFuc3BhcmVudCByb3VuZGVkLWZ1bGwgbXItM1wiPjwvZGl2PlxuICAgICAgICA8c3BhbiBjbGFzcz1cInRleHQtZ3JheS02MDBcIj5HZW5lcmF0aW5nIHN1bW1hcnkuLi48L3NwYW4+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBVSSB3aXRoIGdlbmVyYXRlZCBzdW1tYXJ5XG4gICAqL1xuICB1cGRhdGVVSVdpdGhTdW1tYXJ5KHN1bW1hcnkpIHtcbiAgICBpZiAoIXN1bW1hcnkpIHtcbiAgICAgIHRoaXMuZGlzcGxheUVycm9yKCdObyBzdW1tYXJ5IGdlbmVyYXRlZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHNhZmVTdW1tYXJ5SFRNTCA9IHNhbml0aXplSFRNTCh0aGlzLmZvcm1hdFN1bW1hcnkoc3VtbWFyeSkpO1xuICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSBgXG4gICAgICA8ZGl2IGNsYXNzPVwiYmctYmx1ZS01MCBib3JkZXIgYm9yZGVyLWJsdWUtMjAwIHJvdW5kZWQtbGcgcC02XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gbWItNFwiPlxuICAgICAgICAgIDxoMyBjbGFzcz1cInRleHQtbGcgZm9udC1zZW1pYm9sZCB0ZXh0LWJsdWUtOTAwXCI+QXJ0aWNsZSBTdW1tYXJ5PC9oMz5cbiAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgY2xhc3M9XCJ0ZXh0LWJsdWUtNjAwIGhvdmVyOnRleHQtYmx1ZS04MDAgdGV4dC1zbVwiXG4gICAgICAgICAgICBvbmNsaWNrPVwidGhpcy5jbG9zZXN0KCcjYXJ0aWNsZVN1bW1hcml6YXRpb25Db250YWluZXInKS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgXHUyNzE1IENsb3NlXG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwicHJvc2UgcHJvc2Utc20gdGV4dC1ncmF5LTcwMFwiPlxuICAgICAgICAgICR7c2FmZVN1bW1hcnlIVE1MfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cIm10LTQgdGV4dC14cyB0ZXh0LWdyYXktNTAwXCI+XG4gICAgICAgICAgR2VuZXJhdGVkIGJ5IEFJIFx1MjAyMiBQcmVzcyBDdHJsL0NtZCArIC8gdG8gdG9nZ2xlXG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgc3VtbWFyeSB0ZXh0IGZvciBkaXNwbGF5XG4gICAqL1xuICBmb3JtYXRTdW1tYXJ5KHN1bW1hcnkpIHtcbiAgICAvLyBDb252ZXJ0IGxpbmUgYnJlYWtzIHRvIHBhcmFncmFwaHNcbiAgICByZXR1cm4gc3VtbWFyeVxuICAgICAgLnNwbGl0KCdcXG4nKVxuICAgICAgLmZpbHRlcihsaW5lID0+IGxpbmUudHJpbSgpKVxuICAgICAgLm1hcChsaW5lID0+IGA8cD4ke2xpbmUudHJpbSgpfTwvcD5gKVxuICAgICAgLmpvaW4oJycpO1xuICB9XG5cbiAgLyoqXG4gICAqIERpc3BsYXkgZXJyb3IgbWVzc2FnZVxuICAgKi9cbiAgZGlzcGxheUVycm9yKG1lc3NhZ2UpIHtcbiAgICBjb25zdCBzYWZlTWVzc2FnZSA9IGVzY2FwZUhUTUwobWVzc2FnZSk7XG4gICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9IGBcbiAgICAgIDxkaXYgY2xhc3M9XCJiZy1yZWQtNTAgYm9yZGVyIGJvcmRlci1yZWQtMjAwIHJvdW5kZWQtbGcgcC02XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gbWItMlwiPlxuICAgICAgICAgIDxoMyBjbGFzcz1cInRleHQtbGcgZm9udC1zZW1pYm9sZCB0ZXh0LXJlZC05MDBcIj5TdW1tYXJ5IEVycm9yPC9oMz5cbiAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgY2xhc3M9XCJ0ZXh0LXJlZC02MDAgaG92ZXI6dGV4dC1yZWQtODAwIHRleHQtc21cIlxuICAgICAgICAgICAgb25jbGljaz1cInRoaXMuY2xvc2VzdCgnI2FydGljbGVTdW1tYXJpemF0aW9uQ29udGFpbmVyJykuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIFx1MjcxNSBDbG9zZVxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPHAgY2xhc3M9XCJ0ZXh0LXJlZC03MDBcIj4ke3NhZmVNZXNzYWdlfTwvcD5cbiAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICBjbGFzcz1cIm10LTMgcHgtNCBweS0yIGJnLXJlZC02MDAgdGV4dC13aGl0ZSByb3VuZGVkIGhvdmVyOmJnLXJlZC03MDAgdGV4dC1zbVwiXG4gICAgICAgICAgb25jbGljaz1cInRoaXMuY2xvc2VzdCgnW2RhdGEtY29tcG9uZW50XScpLl9fY29tcG9uZW50Py5mZXRjaEFuZERpc3BsYXlTdW1tYXJ5KClcIlxuICAgICAgICA+XG4gICAgICAgICAgVHJ5IEFnYWluXG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93IHN1bW1hcml6YXRpb24gY29udGFpbmVyXG4gICAqL1xuICBzaG93KCkge1xuICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICB0aGlzLmZldGNoQW5kRGlzcGxheVN1bW1hcnkoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIaWRlIHN1bW1hcml6YXRpb24gY29udGFpbmVyXG4gICAqL1xuICBoaWRlKCkge1xuICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb21wb25lbnQgY2xlYW51cFxuICAgKi9cbiAgb25EZXN0cm95KCkge1xuICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgLy8gbm8tb3BcbiAgfVxufVxuXG4vLyBBdXRvLXJlZ2lzdGVyIGNvbXBvbmVudFxuaW1wb3J0IENvbXBvbmVudE1hbmFnZXIgZnJvbSAnLi4vLi4vY29yZS9Db21wb25lbnRNYW5hZ2VyLmpzJztcbkNvbXBvbmVudE1hbmFnZXIucmVnaXN0ZXIoJ2FydGljbGUtc3VtbWFyaXphdGlvbicsIEFydGljbGVTdW1tYXJpemF0aW9uKTsiLCAiLyoqXG4gKiBFbmhhbmNlZCBSZWxhdGVkIENvbnRlbnQgQ29tcG9uZW50XG4gKiBIYW5kbGVzIHZpZXcgdG9nZ2xpbmcgKGNvbXBhY3QvY2FyZHMpIGFuZCBjb2xsYXBzZSBmdW5jdGlvbmFsaXR5XG4gKi9cblxuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vY29yZS9Db21wb25lbnQuanMnO1xuaW1wb3J0IHsgbG9jYWxTdG9yYWdlIH0gZnJvbSAnLi4vLi4vdXRpbHMvc3RvcmFnZS5qcyc7XG5pbXBvcnQgeyBhbm5vdW5jZVRvU2NyZWVuUmVhZGVyIH0gZnJvbSAnLi4vLi4vdXRpbHMvYWNjZXNzaWJpbGl0eS5qcyc7XG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuLi8uLi91dGlscy9Mb2dnZXIuanMnO1xuXG5jb25zdCBsb2cgPSBsb2dnZXIuY29tcG9uZW50KCdSZWxhdGVkQ29udGVudCcpO1xuXG5leHBvcnQgY2xhc3MgQXJ0aWNsZVJlbGF0ZWRDb250ZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoY29uZmlnID0ge30pIHtcbiAgICBzdXBlcih7XG4gICAgICBuYW1lOiAnYXJ0aWNsZS1yZWxhdGVkLWNvbnRlbnQnLFxuICAgICAgc2VsZWN0b3I6ICdbZGF0YS1jb21wb25lbnQ9XCJhcnRpY2xlLXJlbGF0ZWQtY29udGVudFwiXScsXG4gICAgICAuLi5jb25maWdcbiAgICB9KTtcbiAgICBcbiAgICB0aGlzLm9wdGlvbnMgPSB7XG4gICAgICBkZWZhdWx0VmlldzogJ2NvbXBhY3QnLFxuICAgICAgc3RvcmFnZUtleTogJ3JlbGF0ZWQtY29udGVudC1wcmVmZXJlbmNlcycsXG4gICAgICBhbmltYXRpb25EdXJhdGlvbjogMzAwLFxuICAgICAgLi4udGhpcy5vcHRpb25zXG4gICAgfTtcbiAgICBcbiAgICAvLyBDb21wb25lbnQgc3RhdGVcbiAgICB0aGlzLmN1cnJlbnRWaWV3ID0gdGhpcy5vcHRpb25zLmRlZmF1bHRWaWV3O1xuICAgIHRoaXMuaXNDb2xsYXBzZWQgPSBmYWxzZTtcbiAgICB0aGlzLnZpZXdCdXR0b25zID0gbmV3IE1hcCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIERPTSBlbGVtZW50c1xuICAgKi9cbiAgc2V0dXBFbGVtZW50cygpIHtcbiAgICBzdXBlci5zZXR1cEVsZW1lbnRzKCk7XG4gICAgXG4gICAgdGhpcy52aWV3QnV0dG9ucy5jbGVhcigpO1xuICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucmVsYXRlZC1jb250ZW50X192aWV3LXRvZ2dsZScpLmZvckVhY2goYnRuID0+IHtcbiAgICAgIGNvbnN0IHZpZXcgPSBidG4uZ2V0QXR0cmlidXRlKCdkYXRhLXZpZXcnKTtcbiAgICAgIHRoaXMudmlld0J1dHRvbnMuc2V0KHZpZXcsIGJ0bik7XG4gICAgfSk7XG4gICAgXG4gICAgdGhpcy5jb2xsYXBzZUJ1dHRvbiA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucmVsYXRlZC1jb250ZW50X19jb2xsYXBzZS10b2dnbGUnKTtcbiAgICB0aGlzLmNvbnRlbnRDb250YWluZXIgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLnJlbGF0ZWQtY29udGVudF9fY29udGFpbmVyJyk7XG4gICAgXG4gICAgaWYgKCF0aGlzLmNvbnRlbnRDb250YWluZXIpIHtcbiAgICAgIGxvZy53YXJuKCdSZWxhdGVkIGNvbnRlbnQgY29udGFpbmVyIG5vdCBmb3VuZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICBsb2cuZGVidWcoJ0VsZW1lbnRzIHNldHVwIGNvbXBsZXRlJyk7XG4gIH1cblxuICAvKipcbiAgICogQmluZCBldmVudCBsaXN0ZW5lcnMgdXNpbmcgY29tcG9uZW50IGxpZmVjeWNsZSBtZXRob2RzXG4gICAqL1xuICBiaW5kRXZlbnRzKCkge1xuICAgIC8vIFZpZXcgdG9nZ2xlIGZ1bmN0aW9uYWxpdHkgLSB1c2UgdGhpcy5hZGRFdmVudExpc3RlbmVyIGZvciBhdXRvLWNsZWFudXBcbiAgICB0aGlzLnZpZXdCdXR0b25zLmZvckVhY2goKGJ1dHRvbiwgdmlldykgPT4ge1xuICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGJ1dHRvbiwgJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLnN3aXRjaFZpZXcodmlldyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIENvbGxhcHNlIHRvZ2dsZSBmdW5jdGlvbmFsaXR5XG4gICAgaWYgKHRoaXMuY29sbGFwc2VCdXR0b24pIHtcbiAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLmNvbGxhcHNlQnV0dG9uLCAnY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMudG9nZ2xlQ29sbGFwc2UoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFRyYWNrIHVzYWdlIGFuYWx5dGljc1xuICAgIHRoaXMuc2V0dXBVc2FnZVRyYWNraW5nKCk7XG4gICAgXG4gICAgbG9nLmRlYnVnKCdFdmVudCBsaXN0ZW5lcnMgYm91bmQnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIGNvbXBvbmVudFxuICAgKi9cbiAgYXN5bmMgb25Jbml0KCkge1xuICAgIGlmICghdGhpcy5lbGVtZW50KSB7XG4gICAgICBsb2cud2FybignUmVsYXRlZCBjb250ZW50IGVsZW1lbnQgbm90IGZvdW5kJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gUmVzdG9yZSB1c2VyIHByZWZlcmVuY2VzXG4gICAgdGhpcy5yZXN0b3JlUHJlZmVyZW5jZXMoKTtcbiAgICBcbiAgICBsb2cuaW5mbygnQXJ0aWNsZVJlbGF0ZWRDb250ZW50IGluaXRpYWxpemVkJyk7XG4gIH1cblxuICAvKipcbiAgICogU3dpdGNoIGJldHdlZW4gdmlldyBtb2RlcyAoY29tcGFjdC9jYXJkcylcbiAgICovXG4gIHN3aXRjaFZpZXcodmlldykge1xuICAgIGlmICh2aWV3ID09PSB0aGlzLmN1cnJlbnRWaWV3KSByZXR1cm47XG5cbiAgICBjb25zdCBwcmV2VmlldyA9IHRoaXMuY3VycmVudFZpZXc7XG4gICAgdGhpcy5jdXJyZW50VmlldyA9IHZpZXc7XG4gICAgXG4gICAgLy8gXHVEODNEXHVERTgwIE5FVzogRW5oYW5jZWQgdmlldyBzd2l0Y2hpbmcgd2l0aCBsb2FkaW5nIHN0YXRlc1xuICAgIHRoaXMudXBkYXRlQ29tcG9uZW50U3RhdGUoJ3N3aXRjaGluZy12aWV3Jyk7XG4gICAgdGhpcy5zZXRMb2FkaW5nU3RhdGUodHJ1ZSk7XG4gICAgdGhpcy5zZXRDU1NQcm9wZXJ0eSgnLS12aWV3LXN3aXRjaGluZycsICd0cnVlJyk7XG4gICAgXG4gICAgLy8gVXBkYXRlIGJ1dHRvbiBzdGF0ZXNcbiAgICB0aGlzLnZpZXdCdXR0b25zLmZvckVhY2goKGJ0biwgYnRuVmlldykgPT4ge1xuICAgICAgYnRuLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScsIGJ0blZpZXcgPT09IHZpZXcpO1xuICAgIH0pO1xuXG4gICAgLy8gSGlkZSBhbGwgdmlldyBjb250YWluZXJzIGZpcnN0IHdpdGggZmFkZS1vdXRcbiAgICBjb25zdCBhbGxWaWV3cyA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS12aWV3XScpO1xuICAgIGFsbFZpZXdzLmZvckVhY2godmlld0VsID0+IHtcbiAgICAgIGlmICh2aWV3RWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdyZWxhdGVkLWNvbnRlbnRfX3ZpZXctdG9nZ2xlJykpIHJldHVybjsgLy8gU2tpcCBidXR0b25zXG4gICAgICB2aWV3RWwuc3R5bGUub3BhY2l0eSA9ICcwJztcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB2aWV3RWwuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICB9LCAxNTApO1xuICAgIH0pO1xuXG4gICAgLy8gU2hvdyBzZWxlY3RlZCB2aWV3IHdpdGggc21vb3RoIGZhZGUtaW5cbiAgICBjb25zdCB0YXJnZXRWaWV3ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXZpZXc9XCIke3ZpZXd9XCJdOm5vdCgucmVsYXRlZC1jb250ZW50X192aWV3LXRvZ2dsZSlgKTtcbiAgICBpZiAodGFyZ2V0Vmlldykge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRhcmdldFZpZXcuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgdGFyZ2V0Vmlldy5zdHlsZS5vcGFjaXR5ID0gJzEnO1xuICAgICAgICB9KTtcbiAgICAgIH0sIDE1MCk7XG4gICAgfVxuXG4gICAgLy8gXHVEODNEXHVERTgwIE5FVzogVmlldyBzd2l0Y2ggY29tcGxldGVcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuc2V0TG9hZGluZ1N0YXRlKGZhbHNlKTtcbiAgICAgIHRoaXMudXBkYXRlQ29tcG9uZW50U3RhdGUoJ3ZpZXctYWN0aXZlJyk7XG4gICAgICB0aGlzLnNldENTU1Byb3BlcnR5KCctLXZpZXctc3dpdGNoaW5nJywgJ2ZhbHNlJyk7XG4gICAgfSwgMzAwKTtcblxuICAgIC8vIFNhdmUgcHJlZmVyZW5jZSB1c2luZyBleGlzdGluZyBzdG9yYWdlIHV0aWxpdHlcbiAgICB0aGlzLnNhdmVQcmVmZXJlbmNlcygpO1xuICAgIFxuICAgIC8vIEFubm91bmNlIHRvIHNjcmVlbiByZWFkZXJzXG4gICAgYW5ub3VuY2VUb1NjcmVlblJlYWRlcihgU3dpdGNoZWQgdG8gJHt2aWV3fSB2aWV3YCk7XG4gICAgXG4gICAgLy8gRW1pdCBjb21wb25lbnQgZXZlbnRcbiAgICB0aGlzLmVtaXQoJ3ZpZXdDaGFuZ2VkJywgeyBcbiAgICAgIHByZXZpb3VzVmlldzogcHJldlZpZXcsXG4gICAgICBjdXJyZW50VmlldzogdmlldyBcbiAgICB9KTtcbiAgICBcbiAgICBsb2cuZGVidWcoYFZpZXcgc3dpdGNoZWQgZnJvbSAke3ByZXZWaWV3fSB0byAke3ZpZXd9YCk7XG4gIH1cblxuICAvKipcbiAgICogVG9nZ2xlIGNvbGxhcHNlIHN0YXRlIG9mIHRoZSBlbnRpcmUgc2VjdGlvblxuICAgKi9cbiAgdG9nZ2xlQ29sbGFwc2UoKSB7XG4gICAgdGhpcy5pc0NvbGxhcHNlZCA9ICF0aGlzLmlzQ29sbGFwc2VkO1xuICAgIFxuICAgIC8vIFVwZGF0ZSBidXR0b24gc3RhdGUgYW5kIGljb25cbiAgICB0aGlzLmNvbGxhcHNlQnV0dG9uLnNldEF0dHJpYnV0ZSgnZGF0YS1jb2xsYXBzZWQnLCB0aGlzLmlzQ29sbGFwc2VkKTtcbiAgICBcbiAgICAvLyBVcGRhdGUgY29udGVudCB2aXNpYmlsaXR5IHdpdGggYW5pbWF0aW9uXG4gICAgaWYgKHRoaXMuaXNDb2xsYXBzZWQpIHtcbiAgICAgIHRoaXMuY29udGVudENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNvbnRlbnRDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgfVxuICAgIFxuICAgIC8vIFNhdmUgcHJlZmVyZW5jZVxuICAgIHRoaXMuc2F2ZVByZWZlcmVuY2VzKCk7XG4gICAgXG4gICAgLy8gQW5ub3VuY2UgdG8gc2NyZWVuIHJlYWRlcnNcbiAgICBjb25zdCBzdGF0dXMgPSB0aGlzLmlzQ29sbGFwc2VkID8gJ2NvbGxhcHNlZCcgOiAnZXhwYW5kZWQnO1xuICAgIGFubm91bmNlVG9TY3JlZW5SZWFkZXIoYFJlbGF0ZWQgY29udGVudCBzZWN0aW9uICR7c3RhdHVzfWApO1xuICAgIFxuICAgIC8vIEVtaXQgY29tcG9uZW50IGV2ZW50XG4gICAgdGhpcy5lbWl0KCdjb2xsYXBzZWQnLCB7IFxuICAgICAgY29sbGFwc2VkOiB0aGlzLmlzQ29sbGFwc2VkIFxuICAgIH0pO1xuICAgIFxuICAgIGxvZy5kZWJ1ZyhgU2VjdGlvbiAke3N0YXR1c31gKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTYXZlIHVzZXIgcHJlZmVyZW5jZXMgdXNpbmcgZXhpc3Rpbmcgc3RvcmFnZSB1dGlsaXR5XG4gICAqL1xuICBzYXZlUHJlZmVyZW5jZXMoKSB7XG4gICAgY29uc3QgcHJlZmVyZW5jZXMgPSB7XG4gICAgICB2aWV3OiB0aGlzLmN1cnJlbnRWaWV3LFxuICAgICAgY29sbGFwc2VkOiB0aGlzLmlzQ29sbGFwc2VkLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfTtcbiAgICBcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0KHRoaXMub3B0aW9ucy5zdG9yYWdlS2V5LCBwcmVmZXJlbmNlcyk7XG4gIH1cblxuICAvKipcbiAgICogUmVzdG9yZSB1c2VyIHByZWZlcmVuY2VzIGZyb20gc3RvcmFnZVxuICAgKi9cbiAgcmVzdG9yZVByZWZlcmVuY2VzKCkge1xuICAgIGNvbnN0IHByZWZlcmVuY2VzID0gbG9jYWxTdG9yYWdlLmdldCh0aGlzLm9wdGlvbnMuc3RvcmFnZUtleSwge30pO1xuICAgIFxuICAgIC8vIFJlc3RvcmUgdmlldyBwcmVmZXJlbmNlXG4gICAgaWYgKHByZWZlcmVuY2VzLnZpZXcgJiYgWydjb21wYWN0JywgJ2NhcmRzJ10uaW5jbHVkZXMocHJlZmVyZW5jZXMudmlldykpIHtcbiAgICAgIHRoaXMuY3VycmVudFZpZXcgPSBwcmVmZXJlbmNlcy52aWV3O1xuICAgICAgLy8gVXBkYXRlIGJ1dHRvbiBzdGF0ZXMgd2l0aG91dCB0cmlnZ2VyaW5nIGV2ZW50c1xuICAgICAgdGhpcy52aWV3QnV0dG9ucy5mb3JFYWNoKChidG4sIGJ0blZpZXcpID0+IHtcbiAgICAgICAgYnRuLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScsIGJ0blZpZXcgPT09IHByZWZlcmVuY2VzLnZpZXcpO1xuICAgICAgfSk7XG4gICAgICAvLyBTaG93IGNvcnJlY3Qgdmlld1xuICAgICAgY29uc3QgdGFyZ2V0VmlldyA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS12aWV3PVwiJHtwcmVmZXJlbmNlcy52aWV3fVwiXTpub3QoLnJlbGF0ZWQtY29udGVudF9fdmlldy10b2dnbGUpYCk7XG4gICAgICBpZiAodGFyZ2V0Vmlldykge1xuICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtdmlld106bm90KC5yZWxhdGVkLWNvbnRlbnRfX3ZpZXctdG9nZ2xlKScpXG4gICAgICAgICAgLmZvckVhY2godiA9PiB2LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpKTtcbiAgICAgICAgdGFyZ2V0Vmlldy5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZXN0b3JlIGNvbGxhcHNlIHByZWZlcmVuY2VcbiAgICBpZiAocHJlZmVyZW5jZXMuY29sbGFwc2VkKSB7XG4gICAgICB0aGlzLmlzQ29sbGFwc2VkID0gIXByZWZlcmVuY2VzLmNvbGxhcHNlZDsgLy8gU2V0IG9wcG9zaXRlIHNvIHRvZ2dsZSB3b3Jrc1xuICAgICAgdGhpcy50b2dnbGVDb2xsYXBzZSgpO1xuICAgIH1cbiAgICBcbiAgICBsb2cuZGVidWcoJ1ByZWZlcmVuY2VzIHJlc3RvcmVkOicsIHByZWZlcmVuY2VzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCB1c2FnZSB0cmFja2luZyBmb3IgYW5hbHl0aWNzXG4gICAqL1xuICBzZXR1cFVzYWdlVHJhY2tpbmcoKSB7XG4gICAgLy8gVHJhY2sgY2xpY2tzIG9uIHJlbGF0ZWQgY29udGVudCBpdGVtc1xuICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXJlbGF0ZWQtYXJ0aWNsZV0nKTtcbiAgICBpdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoaXRlbSwgJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgY29uc3QgYXJ0aWNsZVVybCA9IGl0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLXJlbGF0ZWQtYXJ0aWNsZScpO1xuICAgICAgICBjb25zdCBhcnRpY2xlVGl0bGUgPSBpdGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1hcnRpY2xlLXRpdGxlJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBFbWl0IGNvbXBvbmVudCBldmVudCBmb3IgdHJhY2tpbmdcbiAgICAgICAgdGhpcy5lbWl0KCdpdGVtQ2xpY2tlZCcsIHtcbiAgICAgICAgICB1cmw6IGFydGljbGVVcmwsXG4gICAgICAgICAgdGl0bGU6IGFydGljbGVUaXRsZSxcbiAgICAgICAgICB2aWV3OiB0aGlzLmN1cnJlbnRWaWV3LFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGxvZy5kZWJ1ZygnUmVsYXRlZCBjb250ZW50IGl0ZW0gY2xpY2tlZDonLCB7IGFydGljbGVUaXRsZSwgdmlldzogdGhpcy5jdXJyZW50VmlldyB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFB1YmxpYyBBUEk6IEdldCBjdXJyZW50IHByZWZlcmVuY2VzXG4gICAqL1xuICBnZXRQcmVmZXJlbmNlcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdmlldzogdGhpcy5jdXJyZW50VmlldyxcbiAgICAgIGNvbGxhcHNlZDogdGhpcy5pc0NvbGxhcHNlZFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogUHVibGljIEFQSTogU2V0IHZpZXcgbW9kZVxuICAgKi9cbiAgc2V0Vmlldyh2aWV3KSB7XG4gICAgaWYgKFsnY29tcGFjdCcsICdjYXJkcyddLmluY2x1ZGVzKHZpZXcpKSB7XG4gICAgICB0aGlzLnN3aXRjaFZpZXcodmlldyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFB1YmxpYyBBUEk6IEV4cGFuZCBzZWN0aW9uXG4gICAqL1xuICBleHBhbmQoKSB7XG4gICAgaWYgKHRoaXMuaXNDb2xsYXBzZWQpIHtcbiAgICAgIHRoaXMudG9nZ2xlQ29sbGFwc2UoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUHVibGljIEFQSTogQ29sbGFwc2Ugc2VjdGlvblxuICAgKi9cbiAgY29sbGFwc2UoKSB7XG4gICAgaWYgKCF0aGlzLmlzQ29sbGFwc2VkKSB7XG4gICAgICB0aGlzLnRvZ2dsZUNvbGxhcHNlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENvbXBvbmVudCBjbGVhbnVwXG4gICAqL1xuICBvbkRlc3Ryb3koKSB7XG4gICAgLy8gQ29tcG9uZW50IG1hbmFnZXIgaGFuZGxlcyBldmVudCBjbGVhbnVwIGF1dG9tYXRpY2FsbHlcbiAgICBsb2cuZGVidWcoJ1JlbGF0ZWRDb250ZW50IGNvbXBvbmVudCBkZXN0cm95ZWQnKTtcbiAgfVxufVxuXG4vLyBBdXRvLXJlZ2lzdGVyIGNvbXBvbmVudCB3aXRoIENvbXBvbmVudE1hbmFnZXJcbmltcG9ydCBDb21wb25lbnRNYW5hZ2VyIGZyb20gJy4uLy4uL2NvcmUvQ29tcG9uZW50TWFuYWdlci5qcyc7XG5Db21wb25lbnRNYW5hZ2VyLnJlZ2lzdGVyKCdhcnRpY2xlLXJlbGF0ZWQtY29udGVudCcsIEFydGljbGVSZWxhdGVkQ29udGVudCk7IiwgIi8qKlxuICogQ29weVBhZ2UgQ29tcG9uZW50IC0gU2hhcmUgcGFnZSBmdW5jdGlvbmFsaXR5IHdpdGggTExNIGludGVncmF0aW9uXG4gKiBQcm92aWRlcyBjb3B5IFVSTCBhbmQgcXVpY2sgc2hhcmluZyB3aXRoIHBvcHVsYXIgQUkgYXNzaXN0YW50c1xuICovXG5cbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJy4uLy4uL2NvcmUvQ29tcG9uZW50LmpzJztcbmltcG9ydCB7IGNvcHlUb0NsaXBib2FyZCB9IGZyb20gJy4uLy4uL3V0aWxzL2RvbS5qcyc7XG5pbXBvcnQgeyBhbm5vdW5jZVRvU2NyZWVuUmVhZGVyIH0gZnJvbSAnLi4vLi4vdXRpbHMvYWNjZXNzaWJpbGl0eS5qcyc7XG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuLi8uLi91dGlscy9Mb2dnZXIuanMnO1xuXG5jb25zdCBsb2cgPSBsb2dnZXIuY29tcG9uZW50KCdDb3B5UGFnZScpO1xuXG5leHBvcnQgY2xhc3MgQ29weVBhZ2UgZXh0ZW5kcyBDb21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcihjb25maWcgPSB7fSkge1xuICAgIHN1cGVyKHtcbiAgICAgIG5hbWU6ICdjb3B5LXBhZ2UnLFxuICAgICAgc2VsZWN0b3I6ICdbZGF0YS1jb21wb25lbnQ9XCJjb3B5LXBhZ2VcIl0nLFxuICAgICAgLi4uY29uZmlnXG4gICAgfSk7XG5cbiAgICB0aGlzLm9wdGlvbnMgPSB7XG4gICAgICBjb3B5U3VjY2Vzc0R1cmF0aW9uOiAyMDAwLFxuICAgICAgYW5pbWF0aW9uRHVyYXRpb246IDE1MCxcbiAgICAgIC4uLnRoaXMub3B0aW9uc1xuICAgIH07XG5cbiAgICAvLyBDb21wb25lbnQgc3RhdGVcbiAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICAgIHRoaXMuY3VycmVudFVybCA9ICcnO1xuICAgIHRoaXMucGFnZUNvbnRlbnQgPSBudWxsO1xuICAgIHRoaXMuanNvblVybCA9ICcnO1xuICAgIHRoaXMudHh0VXJsID0gJyc7XG4gICAgdGhpcy5wYWdlVGV4dCA9ICcnO1xuICB9XG5cbiAgICAvKipcbiAgICogU2V0dXAgRE9NIGVsZW1lbnRzXG4gICAqL1xuc2V0dXBFbGVtZW50cygpIHtcbiAgICBzdXBlci5zZXR1cEVsZW1lbnRzKCk7XG5cbiAgICB0aGlzLnRvZ2dsZSA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1jb3B5LXBhZ2UtdG9nZ2xlXScpO1xuICAgIHRoaXMuZHJvcGRvd24gPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtY29weS1wYWdlLWRyb3Bkb3duXScpO1xuICAgIHRoaXMuZHJvcGRvd25BcnJvdyA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1kcm9wZG93bi1hcnJvd10nKTtcbiAgICB0aGlzLmNvcHlVcmxCdXR0b24gPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtY29weS11cmxdJyk7XG4gICAgdGhpcy5jb3B5Q29udGVudEJ1dHRvbiA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1jb3B5LWNvbnRlbnRdJyk7XG4gICAgdGhpcy5jb3B5VHh0QnV0dG9uID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWNvcHktdHh0XScpO1xuXG4gICAgLy8gR2V0IHRoZSBjdXJyZW50IHBhZ2UgVVJMIGZyb20gdGhlIGNvcHkgYnV0dG9uXG4gICAgaWYgKHRoaXMuY29weVVybEJ1dHRvbikge1xuICAgICAgdGhpcy5jdXJyZW50VXJsID0gdGhpcy5ub3JtYWxpemVVcmwodGhpcy5jb3B5VXJsQnV0dG9uLmdldEF0dHJpYnV0ZSgnZGF0YS1jb3B5LXVybCcpKTtcbiAgICAgIC8vIE5vcm1hbGl6ZSBiYXNlIFVSTDogc3RyaXAgdHJhaWxpbmcgc2xhc2ggYW5kIG9wdGlvbmFsIC5odG1sIGZvciB1Z2x5VVJMc1xuICAgICAgbGV0IGJhc2UgPSB0aGlzLmN1cnJlbnRVcmwucmVwbGFjZSgvXFwvJC8sICcnKTtcbiAgICAgIGJhc2UgPSBiYXNlLnJlcGxhY2UoL1xcLmh0bWwkLywgJycpO1xuICAgICAgdGhpcy5qc29uVXJsID0gYmFzZSArICcvaW5kZXguanNvbic7XG4gICAgICB0aGlzLnR4dFVybCA9IGJhc2UgKyAnL2luZGV4LnR4dCc7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnRvZ2dsZSB8fCAhdGhpcy5kcm9wZG93bikge1xuICAgICAgbG9nLndhcm4oJ1JlcXVpcmVkIGVsZW1lbnRzIG5vdCBmb3VuZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFByZS1mZXRjaCBwYWdlIGNvbnRlbnQgZm9yIEFJIHNoYXJpbmdcbiAgICB0aGlzLmZldGNoUGFnZUNvbnRlbnQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCaW5kIGV2ZW50IGxpc3RlbmVyc1xuICAgKi9cbiAgYmluZEV2ZW50cygpIHtcbiAgICAvLyBUb2dnbGUgZHJvcGRvd25cbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIodGhpcy50b2dnbGUsICdjbGljaycsIHRoaXMuaGFuZGxlVG9nZ2xlLmJpbmQodGhpcykpO1xuXG4gICAgLy8gQ29weSBVUkwgYnV0dG9uXG4gICAgaWYgKHRoaXMuY29weVVybEJ1dHRvbikge1xuICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKHRoaXMuY29weVVybEJ1dHRvbiwgJ2NsaWNrJywgdGhpcy5oYW5kbGVDb3B5VXJsLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIC8vIENvcHkgY29udGVudCBidXR0b25cbiAgICBpZiAodGhpcy5jb3B5Q29udGVudEJ1dHRvbikge1xuICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKHRoaXMuY29weUNvbnRlbnRCdXR0b24sICdjbGljaycsIHRoaXMuaGFuZGxlQ29weUNvbnRlbnQuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgLy8gQ29weSBMTE0gdGV4dCBidXR0b25cbiAgICBpZiAodGhpcy5jb3B5VHh0QnV0dG9uKSB7XG4gICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIodGhpcy5jb3B5VHh0QnV0dG9uLCAnY2xpY2snLCB0aGlzLmhhbmRsZUNvcHlUeHQuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgLy8gQ2xvc2Ugb24gb3V0c2lkZSBjbGlja1xuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihkb2N1bWVudCwgJ2NsaWNrJywgdGhpcy5oYW5kbGVPdXRzaWRlQ2xpY2suYmluZCh0aGlzKSk7XG5cbiAgICAvLyBDbG9zZSBvbiBlc2NhcGUga2V5XG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGRvY3VtZW50LCAna2V5ZG93bicsIHRoaXMuaGFuZGxlS2V5ZG93bi5iaW5kKHRoaXMpKTtcblxuICAgIC8vIFByZXZlbnQgZHJvcGRvd24gZnJvbSBjbG9zaW5nIHdoZW4gY2xpY2tpbmcgaW5zaWRlXG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKHRoaXMuZHJvcGRvd24sICdjbGljaycsIChlKSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSB0b2dnbGUgYnV0dG9uIGNsaWNrXG4gICAqL1xuICBoYW5kbGVUb2dnbGUoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgaWYgKHRoaXMuaXNPcGVuKSB7XG4gICAgICB0aGlzLmNsb3NlRHJvcGRvd24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5vcGVuRHJvcGRvd24oKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIGNvcHkgVVJMIGJ1dHRvbiBjbGlja1xuICAgKi9cbiAgYXN5bmMgaGFuZGxlQ29weVVybChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3VjY2VzcyA9IGF3YWl0IGNvcHlUb0NsaXBib2FyZCh0aGlzLmN1cnJlbnRVcmwpO1xuICAgICAgXG4gICAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgICB0aGlzLnNob3dDb3B5U3VjY2VzcygnUGFnZSBVUkwgY29waWVkIHRvIGNsaXBib2FyZCcsIHRoaXMuY29weVVybEJ1dHRvbik7XG4gICAgICAgIHRoaXMuY2xvc2VEcm9wZG93bigpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zaG93Q29weUVycm9yKCdGYWlsZWQgdG8gY29weSBVUkwnLCB0aGlzLmNvcHlVcmxCdXR0b24pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2cuZXJyb3IoJ0NvcHkgZmFpbGVkOicsIGVycm9yKTtcbiAgICAgIHRoaXMuc2hvd0NvcHlFcnJvcignRmFpbGVkIHRvIGNvcHkgVVJMJywgdGhpcy5jb3B5VXJsQnV0dG9uKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIGNvcHkgY29udGVudCBidXR0b24gY2xpY2tcbiAgICovXG4gIGFzeW5jIGhhbmRsZUNvcHlDb250ZW50KGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgIGlmICghdGhpcy5wYWdlQ29udGVudCkge1xuICAgICAgdGhpcy5zaG93Q29weUVycm9yKCdDb250ZW50IG5vdCB5ZXQgbG9hZGVkJywgdGhpcy5jb3B5Q29udGVudEJ1dHRvbik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbnRlbnRUZXh0ID0gdGhpcy5jcmVhdGVBSVByb21wdCgpO1xuICAgICAgY29uc3Qgc3VjY2VzcyA9IGF3YWl0IGNvcHlUb0NsaXBib2FyZChjb250ZW50VGV4dCk7XG4gICAgICBcbiAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgIHRoaXMuc2hvd0NvcHlTdWNjZXNzKCdQYWdlIGNvbnRlbnQgY29waWVkIHRvIGNsaXBib2FyZCcsIHRoaXMuY29weUNvbnRlbnRCdXR0b24pO1xuICAgICAgICB0aGlzLmNsb3NlRHJvcGRvd24oKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2hvd0NvcHlFcnJvcignRmFpbGVkIHRvIGNvcHkgY29udGVudCcsIHRoaXMuY29weUNvbnRlbnRCdXR0b24pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2cuZXJyb3IoJ0NvcHkgY29udGVudCBmYWlsZWQ6JywgZXJyb3IpO1xuICAgICAgdGhpcy5zaG93Q29weUVycm9yKCdGYWlsZWQgdG8gY29weSBjb250ZW50JywgdGhpcy5jb3B5Q29udGVudEJ1dHRvbik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBjb3B5IExMTSB0ZXh0IGJ1dHRvbiBjbGlja1xuICAgKi9cbiAgYXN5bmMgaGFuZGxlQ29weVR4dChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICBjb25zdCBidXR0b24gPSB0aGlzLmNvcHlUeHRCdXR0b247XG4gICAgY29uc3QgdHh0SHJlZiA9IGJ1dHRvbj8uZ2V0QXR0cmlidXRlKCdkYXRhLWNvcHktdHh0JykgfHwgdGhpcy50eHRVcmw7XG5cbiAgICB0cnkge1xuICAgICAgbGV0IHRleHQgPSB0aGlzLnBhZ2VUZXh0O1xuICAgICAgaWYgKCF0ZXh0ICYmIHR4dEhyZWYpIHtcbiAgICAgICAgY29uc3QgciA9IGF3YWl0IGZldGNoKHR4dEhyZWYpO1xuICAgICAgICBpZiAoci5vaykge1xuICAgICAgICAgIHRleHQgPSAoYXdhaXQgci50ZXh0KCkpLnRyaW0oKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIXRleHQpIHtcbiAgICAgICAgdGhpcy5zaG93Q29weUVycm9yKCdMTE0gdGV4dCBub3QgYXZhaWxhYmxlJywgYnV0dG9uKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzdWNjZXNzID0gYXdhaXQgY29weVRvQ2xpcGJvYXJkKHRleHQpO1xuICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgICAgdGhpcy5zaG93Q29weVN1Y2Nlc3MoJ0xMTSB0ZXh0IGNvcGllZCB0byBjbGlwYm9hcmQnLCBidXR0b24pO1xuICAgICAgICB0aGlzLmNsb3NlRHJvcGRvd24oKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2hvd0NvcHlFcnJvcignRmFpbGVkIHRvIGNvcHkgTExNIHRleHQnLCBidXR0b24pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2cuZXJyb3IoJ0NvcHkgTExNIHRleHQgZmFpbGVkOicsIGVycm9yKTtcbiAgICAgIHRoaXMuc2hvd0NvcHlFcnJvcignRmFpbGVkIHRvIGNvcHkgTExNIHRleHQnLCB0aGlzLmNvcHlUeHRCdXR0b24pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgb3V0c2lkZSBjbGljayB0byBjbG9zZSBkcm9wZG93blxuICAgKi9cbiAgaGFuZGxlT3V0c2lkZUNsaWNrKGUpIHtcbiAgICBpZiAodGhpcy5pc09wZW4gJiYgIXRoaXMuZWxlbWVudC5jb250YWlucyhlLnRhcmdldCkpIHtcbiAgICAgIHRoaXMuY2xvc2VEcm9wZG93bigpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUga2V5Ym9hcmQgbmF2aWdhdGlvblxuICAgKi9cbiAgaGFuZGxlS2V5ZG93bihlKSB7XG4gICAgaWYgKGUua2V5ID09PSAnRXNjYXBlJyAmJiB0aGlzLmlzT3Blbikge1xuICAgICAgdGhpcy5jbG9zZURyb3Bkb3duKCk7XG4gICAgICB0aGlzLnRvZ2dsZS5mb2N1cygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBPcGVuIGRyb3Bkb3duIG1lbnVcbiAgICovXG4gIG9wZW5Ecm9wZG93bigpIHtcbiAgICB0aGlzLmlzT3BlbiA9IHRydWU7XG4gICAgdGhpcy5kcm9wZG93bi5zZXRBdHRyaWJ1dGUoJ2RhdGEtc3RhdGUnLCAndmlzaWJsZScpO1xuICAgIHRoaXMudG9nZ2xlLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICd0cnVlJyk7XG4gICAgXG4gICAgLy8gRm9jdXMgZmlyc3QgaXRlbSBpbiBkcm9wZG93blxuICAgIGNvbnN0IGZpcnN0SXRlbSA9IHRoaXMuZHJvcGRvd24ucXVlcnlTZWxlY3RvcignYnV0dG9uLCBhJyk7XG4gICAgaWYgKGZpcnN0SXRlbSkge1xuICAgICAgZmlyc3RJdGVtLmZvY3VzKCk7XG4gICAgfVxuXG4gICAgLy8gQW5pbWF0ZSBpblxuICAgIHRoaXMuZHJvcGRvd24uc3R5bGUub3BhY2l0eSA9ICcwJztcbiAgICB0aGlzLmRyb3Bkb3duLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVZKC0xMHB4KSc7XG4gICAgXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgIHRoaXMuZHJvcGRvd24uc3R5bGUudHJhbnNpdGlvbiA9IGBvcGFjaXR5ICR7dGhpcy5vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9ufW1zIGVhc2UsIHRyYW5zZm9ybSAke3RoaXMub3B0aW9ucy5hbmltYXRpb25EdXJhdGlvbn1tcyBlYXNlYDtcbiAgICAgIHRoaXMuZHJvcGRvd24uc3R5bGUub3BhY2l0eSA9ICcxJztcbiAgICAgIHRoaXMuZHJvcGRvd24uc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoMCknO1xuICAgIH0pO1xuXG4gICAgbG9nLmRlYnVnKCdEcm9wZG93biBvcGVuZWQnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbG9zZSBkcm9wZG93biBtZW51XG4gICAqL1xuICBjbG9zZURyb3Bkb3duKCkge1xuICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG4gICAgdGhpcy50b2dnbGUuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyk7XG5cbiAgICAvLyBBbmltYXRlIG91dFxuICAgIHRoaXMuZHJvcGRvd24uc3R5bGUub3BhY2l0eSA9ICcwJztcbiAgICB0aGlzLmRyb3Bkb3duLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVZKC0xMHB4KSc7XG4gICAgXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmRyb3Bkb3duLnNldEF0dHJpYnV0ZSgnZGF0YS1zdGF0ZScsICdoaWRkZW4nKTtcbiAgICAgIHRoaXMuZHJvcGRvd24uc3R5bGUudHJhbnNpdGlvbiA9ICcnO1xuICAgICAgdGhpcy5kcm9wZG93bi5zdHlsZS5vcGFjaXR5ID0gJyc7XG4gICAgICB0aGlzLmRyb3Bkb3duLnN0eWxlLnRyYW5zZm9ybSA9ICcnO1xuICAgIH0sIHRoaXMub3B0aW9ucy5hbmltYXRpb25EdXJhdGlvbik7XG5cbiAgICBsb2cuZGVidWcoJ0Ryb3Bkb3duIGNsb3NlZCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNob3cgY29weSBzdWNjZXNzIGZlZWRiYWNrXG4gICAqL1xuICBzaG93Q29weVN1Y2Nlc3MobWVzc2FnZSwgYnV0dG9uID0gdGhpcy5jb3B5VXJsQnV0dG9uKSB7XG4gICAgaWYgKCFidXR0b24pIHJldHVybjtcblxuICAgIC8vIFVwZGF0ZSBidXR0b24gdGV4dCB0ZW1wb3JhcmlseVxuICAgIGNvbnN0IG9yaWdpbmFsVGV4dCA9IGJ1dHRvbi50ZXh0Q29udGVudDtcbiAgICBidXR0b24udGV4dENvbnRlbnQgPSAnXHUyNzEzIENvcGllZCEnO1xuICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdzdWNjZXNzJyk7XG5cbiAgICAvLyBBbm5vdW5jZSB0byBzY3JlZW4gcmVhZGVyc1xuICAgIGFubm91bmNlVG9TY3JlZW5SZWFkZXIobWVzc2FnZSk7XG5cbiAgICAvLyBSZXNldCBhZnRlciBkZWxheVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gb3JpZ2luYWxUZXh0O1xuICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ3N1Y2Nlc3MnKTtcbiAgICB9LCB0aGlzLm9wdGlvbnMuY29weVN1Y2Nlc3NEdXJhdGlvbik7XG5cbiAgICBsb2cuZGVidWcoJ0NvcHkgc3VjY2VzcyBmZWVkYmFjayBzaG93bicpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNob3cgY29weSBlcnJvciBmZWVkYmFja1xuICAgKi9cbiAgc2hvd0NvcHlFcnJvcihtZXNzYWdlLCBidXR0b24gPSB0aGlzLmNvcHlVcmxCdXR0b24pIHtcbiAgICBpZiAoIWJ1dHRvbikgcmV0dXJuO1xuXG4gICAgLy8gVXBkYXRlIGJ1dHRvbiB0ZXh0IHRlbXBvcmFyaWx5XG4gICAgY29uc3Qgb3JpZ2luYWxUZXh0ID0gYnV0dG9uLnRleHRDb250ZW50O1xuICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9ICdcdTI3MTcgRmFpbGVkJztcbiAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnZXJyb3InKTtcblxuICAgIC8vIEFubm91bmNlIHRvIHNjcmVlbiByZWFkZXJzXG4gICAgYW5ub3VuY2VUb1NjcmVlblJlYWRlcihtZXNzYWdlKTtcblxuICAgIC8vIFJlc2V0IGFmdGVyIGRlbGF5XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBidXR0b24udGV4dENvbnRlbnQgPSBvcmlnaW5hbFRleHQ7XG4gICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnZXJyb3InKTtcbiAgICB9LCB0aGlzLm9wdGlvbnMuY29weVN1Y2Nlc3NEdXJhdGlvbik7XG5cbiAgICBsb2cuZXJyb3IoJ0NvcHkgZXJyb3IgZmVlZGJhY2sgc2hvd24nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGZXRjaCBwYWdlIGNvbnRlbnQgZnJvbSBpbmRleC50eHQgKHByZWZlcnJlZCkgYW5kIGluZGV4Lmpzb24gZm9yIEFJIHNoYXJpbmdcbiAgICovXG4gIGFzeW5jIGZldGNoUGFnZUNvbnRlbnQoKSB7XG4gICAgY29uc3QgcmVxdWVzdHMgPSBbXTtcbiAgICBpZiAodGhpcy50eHRVcmwpIHtcbiAgICAgIHJlcXVlc3RzLnB1c2goXG4gICAgICAgIGZldGNoKHRoaXMudHh0VXJsKVxuICAgICAgICAgIC50aGVuKHIgPT4gKHIub2sgPyByLnRleHQoKSA6ICcnKSlcbiAgICAgICAgICAudGhlbih0ZXh0ID0+IHsgdGhpcy5wYWdlVGV4dCA9ICh0ZXh0IHx8ICcnKS50cmltKCk7IH0pXG4gICAgICAgICAgLmNhdGNoKCgpID0+IHt9KVxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuanNvblVybCkge1xuICAgICAgcmVxdWVzdHMucHVzaChcbiAgICAgICAgZmV0Y2godGhpcy5qc29uVXJsKVxuICAgICAgICAgIC50aGVuKHIgPT4gKHIub2sgPyByLmpzb24oKSA6IG51bGwpKVxuICAgICAgICAgIC50aGVuKGpzb24gPT4geyB0aGlzLnBhZ2VDb250ZW50ID0ganNvbjsgfSlcbiAgICAgICAgICAuY2F0Y2goKCkgPT4ge30pXG4gICAgICApO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQocmVxdWVzdHMpO1xuICAgICAgdGhpcy51cGRhdGVBSUxpbmtzKCk7XG4gICAgICBsb2cuZGVidWcoJ1BhZ2UgY29udGVudCBmZXRjaGVkICh0eHQvanNvbikgZm9yIEFJIHNoYXJpbmcnKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nLndhcm4oJ0Vycm9yIGZldGNoaW5nIEFJIHNoYXJlIGNvbnRlbnQ6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgQUkgc2hhcmluZyBsaW5rcyB3aXRoIHBhZ2UgY29udGVudFxuICAgKi9cbiAgdXBkYXRlQUlMaW5rcygpIHtcbiAgICAvLyBQcmVmZXIgdHh0OyBpZiBhYnNlbnQsIGZhbGwgYmFjayB0byBqc29uLWRlcml2ZWQgcHJvbXB0LiBTdGlsbCBhbGxvdyBzaG9ydCBVUkwtb25seSBwcm9tcHRzLlxuICAgIGlmICghdGhpcy5wYWdlVGV4dCAmJiAhdGhpcy5wYWdlQ29udGVudCkgcmV0dXJuO1xuXG4gICAgY29uc3QgYWlMaW5rcyA9IHRoaXMuZHJvcGRvd24ucXVlcnlTZWxlY3RvckFsbCgnYVtocmVmKj1cImNsYXVkZS5haVwiXSwgYVtocmVmKj1cImNoYXQub3BlbmFpLmNvbVwiXSwgYVtocmVmKj1cImNvcGlsb3QubWljcm9zb2Z0LmNvbVwiXScpO1xuXG4gICAgYWlMaW5rcy5mb3JFYWNoKGxpbmsgPT4ge1xuICAgICAgY29uc3QgZnVsbFByb21wdCA9IHRoaXMuY3JlYXRlQUlQcm9tcHQoKTtcbiAgICAgIGNvbnN0IHNob3J0VXJsID0gdGhpcy50eHRVcmwgfHwgdGhpcy5jdXJyZW50VXJsO1xuXG4gICAgICBjb25zdCBidWlsZEhyZWYgPSAoYmFzZSwgcHJvbXB0KSA9PiBgJHtiYXNlfT9xPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHByb21wdCl9YDtcblxuICAgICAgY29uc3QgaXNPZmZsaW5lID0gd2luZG93Lkh1Z29FbnZpcm9ubWVudD8uZW52aXJvbm1lbnQgPT09ICdvZmZsaW5lJztcbiAgICAgIGlmIChpc09mZmxpbmUpIHtcbiAgICAgICAgbGluay5yZW1vdmVBdHRyaWJ1dGUoJ2hyZWYnKTtcbiAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoJ2FyaWEtZGlzYWJsZWQnLCAndHJ1ZScpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChsaW5rLmhyZWYuaW5jbHVkZXMoJ2NvcGlsb3QubWljcm9zb2Z0LmNvbScpKSB7XG4gICAgICAgIC8vIENvcGlsb3QgbGlua3MgaGF2ZSBwcmFjdGljYWwgVVJMIGxlbmd0aCBsaW1pdHMuIFVzZSBhIHNob3J0LCBVUkwtb25seSBwcm9tcHQuXG4gICAgICAgIGNvbnN0IHByb21wdCA9IGBQbGVhc2UgaGVscCBtZSB1bmRlcnN0YW5kIHRoaXMgZG9jdW1lbnRhdGlvbjogJHtzaG9ydFVybH1gO1xuICAgICAgICBsaW5rLmhyZWYgPSBidWlsZEhyZWYoJ2h0dHBzOi8vY29waWxvdC5taWNyb3NvZnQuY29tLycsIHByb21wdCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gRm9yIG90aGVycywgdHJ5IGZ1bGwgcHJvbXB0IGJ1dCBmYWxsIGJhY2sgdG8gc2hvcnQgaWYgdG9vIGxvbmcgZm9yIGNvbW1vbiBicm93c2VyIGxpbWl0c1xuICAgICAgY29uc3QgZW5jb2RlZEZ1bGwgPSBlbmNvZGVVUklDb21wb25lbnQoZnVsbFByb21wdCk7XG4gICAgICBpZiAoZW5jb2RlZEZ1bGwubGVuZ3RoID4gMTgwMCkge1xuICAgICAgICBjb25zdCBwcm9tcHQgPSBgUGxlYXNlIGhlbHAgbWUgdW5kZXJzdGFuZCB0aGlzIGRvY3VtZW50YXRpb246ICR7c2hvcnRVcmx9YDtcbiAgICAgICAgaWYgKGxpbmsuaHJlZi5pbmNsdWRlcygnY2xhdWRlLmFpJykpIHtcbiAgICAgICAgICBsaW5rLmhyZWYgPSBidWlsZEhyZWYoJ2h0dHBzOi8vY2xhdWRlLmFpL2NoYXQnLCBwcm9tcHQpO1xuICAgICAgICB9IGVsc2UgaWYgKGxpbmsuaHJlZi5pbmNsdWRlcygnY2hhdC5vcGVuYWkuY29tJykpIHtcbiAgICAgICAgICBsaW5rLmhyZWYgPSBidWlsZEhyZWYoJ2h0dHBzOi8vY2hhdC5vcGVuYWkuY29tLycsIHByb21wdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAobGluay5ocmVmLmluY2x1ZGVzKCdjbGF1ZGUuYWknKSkge1xuICAgICAgICBsaW5rLmhyZWYgPSBidWlsZEhyZWYoJ2h0dHBzOi8vY2xhdWRlLmFpL2NoYXQnLCBmdWxsUHJvbXB0KTtcbiAgICAgIH0gZWxzZSBpZiAobGluay5ocmVmLmluY2x1ZGVzKCdjaGF0Lm9wZW5haS5jb20nKSkge1xuICAgICAgICBsaW5rLmhyZWYgPSBidWlsZEhyZWYoJ2h0dHBzOi8vY2hhdC5vcGVuYWkuY29tLycsIGZ1bGxQcm9tcHQpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIE5vcm1hbGl6ZSBwb3NzaWJseSByZWxhdGl2ZSBvciBwcm90b2NvbC1yZWxhdGl2ZSBVUkxzIHRvIGFic29sdXRlXG4gICAqL1xuICBub3JtYWxpemVVcmwodXJsKSB7XG4gICAgaWYgKCF1cmwpIHJldHVybiB1cmw7XG4gICAgbGV0IHUgPSBTdHJpbmcodXJsKS50cmltKCk7XG4gICAgaWYgKHUuc3RhcnRzV2l0aCgnLy8nKSkge1xuICAgICAgdSA9IGAke3dpbmRvdy5sb2NhdGlvbi5wcm90b2NvbH0ke3V9YDtcbiAgICB9IGVsc2UgaWYgKHUuc3RhcnRzV2l0aCgnLycpKSB7XG4gICAgICB1ID0gYCR7d2luZG93LmxvY2F0aW9uLm9yaWdpbn0ke3V9YDtcbiAgICB9XG4gICAgcmV0dXJuIHU7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIEFJIHByb21wdCB3aXRoIHBhZ2UgY29udGVudFxuICAgKi9cbiAgY3JlYXRlQUlQcm9tcHQoKSB7XG4gICAgLy8gUHJlZmVyIHB1cnBvc2UtYnVpbHQgdHh0IG91dHB1dCB3aGVuIGF2YWlsYWJsZVxuICAgIGNvbnN0IG1heENvbnRlbnRMZW5ndGggPSA0MDAwO1xuXG4gICAgaWYgKHRoaXMucGFnZVRleHQgJiYgdGhpcy5wYWdlVGV4dC5sZW5ndGggPiAwKSB7XG4gICAgICBsZXQgdGV4dCA9IHRoaXMucGFnZVRleHQ7XG4gICAgICBpZiAodGV4dC5sZW5ndGggPiBtYXhDb250ZW50TGVuZ3RoKSB7XG4gICAgICAgIHRleHQgPSB0ZXh0LnN1YnN0cmluZygwLCBtYXhDb250ZW50TGVuZ3RoKSArICdcXG5cXG5bQ29udGVudCB0cnVuY2F0ZWQgLSBzZWUgZnVsbCBjb250ZW50IGF0IFVSTF0nO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFtcbiAgICAgICAgJ1BsZWFzZSBoZWxwIG1lIHVuZGVyc3RhbmQgdGhpcyBkb2N1bWVudGF0aW9uOicsXG4gICAgICAgICcnLFxuICAgICAgICBgKipVUkwqKjogJHt0aGlzLmN1cnJlbnRVcmx9YCxcbiAgICAgICAgJycsXG4gICAgICAgICcqKkNvbnRlbnQgKExMTS1vcHRpbWl6ZWQpKio6JyxcbiAgICAgICAgdGV4dCxcbiAgICAgICAgJycsXG4gICAgICAgICdQbGVhc2UgZXhwbGFpbiB0aGUga2V5IGNvbmNlcHRzIGFuZCBoZWxwIG1lIHVuZGVyc3RhbmQgaG93IHRvIHVzZSB0aGlzIGluZm9ybWF0aW9uLidcbiAgICAgIF0uam9pbignXFxuJyk7XG4gICAgfVxuXG4gICAgLy8gRmFsbGJhY2sgdG8gSlNPTiBmaWVsZHMgaWYgdHh0IGlzIG5vdCBhdmFpbGFibGVcbiAgICBpZiAodGhpcy5wYWdlQ29udGVudCkge1xuICAgICAgY29uc3Qge1xuICAgICAgICB0aXRsZSxcbiAgICAgICAgbGlua1RpdGxlLFxuICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgYm9keSxcbiAgICAgICAgY29udGVudFdpdGhvdXRTdW1tYXJ5LFxuICAgICAgICBzZWN0aW9uLFxuICAgICAgICBwYXJlbnRcbiAgICAgIH0gPSB0aGlzLnBhZ2VDb250ZW50O1xuXG4gICAgICBsZXQgY29udGVudCA9IGNvbnRlbnRXaXRob3V0U3VtbWFyeSB8fCBib2R5IHx8ICcnO1xuICAgICAgaWYgKGNvbnRlbnQubGVuZ3RoID4gbWF4Q29udGVudExlbmd0aCkge1xuICAgICAgICBjb250ZW50ID0gY29udGVudC5zdWJzdHJpbmcoMCwgbWF4Q29udGVudExlbmd0aCkgKyAnLi4uXFxuXFxuW0NvbnRlbnQgdHJ1bmNhdGVkIC0gc2VlIGZ1bGwgY29udGVudCBhdCBVUkxdJztcbiAgICAgIH1cblxuICAgICAgbGV0IHByb21wdCA9IGBQbGVhc2UgaGVscCBtZSB1bmRlcnN0YW5kIHRoaXMgZG9jdW1lbnRhdGlvbjpcXG5cXG4jICR7dGl0bGUgfHwgbGlua1RpdGxlIHx8ICdEb2N1bWVudGF0aW9uIFBhZ2UnfWA7XG4gICAgICBpZiAoZGVzY3JpcHRpb24pIHtcbiAgICAgICAgcHJvbXB0ICs9IGBcXG5cXG4ke2Rlc2NyaXB0aW9ufWA7XG4gICAgICB9XG4gICAgICBpZiAoc2VjdGlvbiAmJiBwYXJlbnQgJiYgc2VjdGlvbiAhPT0gcGFyZW50KSB7XG4gICAgICAgIHByb21wdCArPSBgXFxuXFxuKkZyb206ICR7cGFyZW50fSA+ICR7c2VjdGlvbn0qYDtcbiAgICAgIH1cbiAgICAgIHByb21wdCArPSBgXFxuXFxuKipVUkwqKjogJHt0aGlzLmN1cnJlbnRVcmx9YDtcbiAgICAgIGlmIChjb250ZW50KSB7XG4gICAgICAgIHByb21wdCArPSBgXFxuXFxuKipDb250ZW50Kio6XFxuJHtjb250ZW50fWA7XG4gICAgICB9XG4gICAgICBwcm9tcHQgKz0gYFxcblxcblBsZWFzZSBleHBsYWluIHRoZSBrZXkgY29uY2VwdHMgYW5kIGhlbHAgbWUgdW5kZXJzdGFuZCBob3cgdG8gdXNlIHRoaXMgaW5mb3JtYXRpb24uYDtcbiAgICAgIHJldHVybiBwcm9tcHQ7XG4gICAgfVxuXG4gICAgLy8gTGFzdCByZXNvcnQ6IGp1c3QgdGhlIFVSTFxuICAgIHJldHVybiBgUGxlYXNlIGhlbHAgbWUgdW5kZXJzdGFuZCB0aGlzIGRvY3VtZW50YXRpb246ICR7dGhpcy5jdXJyZW50VXJsfWA7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYW4gdXAgd2hlbiBjb21wb25lbnQgaXMgZGVzdHJveWVkXG4gICAqL1xuICBvbkRlc3Ryb3koKSB7XG4gICAgaWYgKHRoaXMuaXNPcGVuKSB7XG4gICAgICB0aGlzLmNsb3NlRHJvcGRvd24oKTtcbiAgICB9XG4gIH1cbn1cblxuLy8gQXV0by1yZWdpc3RlciB0aGUgY29tcG9uZW50XG5pbXBvcnQgQ29tcG9uZW50TWFuYWdlciBmcm9tICcuLi8uLi9jb3JlL0NvbXBvbmVudE1hbmFnZXIuanMnO1xuQ29tcG9uZW50TWFuYWdlci5yZWdpc3RlcignY29weS1wYWdlJywgQ29weVBhZ2UpOyIsICJpbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICcuLi8uLi9jb3JlL0NvbXBvbmVudC5qcyc7XG5pbXBvcnQgQ29tcG9uZW50TWFuYWdlciBmcm9tICcuLi8uLi9jb3JlL0NvbXBvbmVudE1hbmFnZXIuanMnO1xuXG5jbGFzcyBNZXJtYWlkQ29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoY29uZmlnID0ge30pIHtcbiAgICBzdXBlcih7XG4gICAgICBuYW1lOiAnbWVybWFpZC1kaWFncmFtJyxcbiAgICAgIHNlbGVjdG9yOiBjb25maWcuc2VsZWN0b3IgfHwgJy5tZXJtYWlkJyxcbiAgICAgIC4uLmNvbmZpZ1xuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgb25Jbml0KCkge1xuICAgIGNvbnN0IGVsZW1lbnRzID0gdGhpcy5maW5kRWxlbWVudHMoKTtcbiAgICBpZiAoIWVsZW1lbnRzLmxlbmd0aCkgcmV0dXJuO1xuXG4gICAgYXdhaXQgdGhpcy5lbnN1cmVNZXJtYWlkTG9hZGVkKCk7XG4gICAgYXdhaXQgdGhpcy5yZW5kZXJBbGwoZWxlbWVudHMpO1xuXG4gICAgLy8gUmUtcmVuZGVyIG9uIHRoZW1lIGNoYW5nZXNcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0aGVtZUNoYW5nZWQnLCAoKSA9PiB7XG4gICAgICB0aGlzLnJlbmRlckFsbChlbGVtZW50cyk7XG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBlbnN1cmVNZXJtYWlkTG9hZGVkKCkge1xuICAgIGlmICh0eXBlb2Ygd2luZG93Lm1lcm1haWQgIT09ICd1bmRlZmluZWQnKSByZXR1cm47XG4gICAgY29uc3QgaXNPZmZsaW5lID0gKHdpbmRvdy5IdWdvRW52aXJvbm1lbnQgJiYgd2luZG93Lkh1Z29FbnZpcm9ubWVudC5lbnZpcm9ubWVudCA9PT0gJ29mZmxpbmUnKTtcbiAgICBjb25zdCB0cnlMb2FkID0gKHNyYykgPT4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3Qgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgICBzY3JpcHQuc3JjID0gc3JjO1xuICAgICAgc2NyaXB0Lm9ubG9hZCA9IHJlc29sdmU7XG4gICAgICBzY3JpcHQub25lcnJvciA9IHJlamVjdDtcbiAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICB9KTtcbiAgICB0cnkge1xuICAgICAgaWYgKGlzT2ZmbGluZSkge1xuICAgICAgICAvLyBFeHBlY3QgYSBsb2NhbGx5IHZlbmRvcmVkIG1lcm1haWQgYXQgc3RhdGljL3ZlbmRvci9tZXJtYWlkL21lcm1haWQubWluLmpzXG4gICAgICAgIGNvbnN0IGxvY2FsU3JjID0gbmV3IFVSTCgndmVuZG9yL21lcm1haWQvbWVybWFpZC5taW4uanMnLCBkb2N1bWVudC5iYXNlVVJJKS50b1N0cmluZygpO1xuICAgICAgICBhd2FpdCB0cnlMb2FkKGxvY2FsU3JjKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF3YWl0IHRyeUxvYWQoJ2h0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vbWVybWFpZEAxMC42LjEvZGlzdC9tZXJtYWlkLm1pbi5qcycpO1xuICAgICAgfVxuICAgIH0gY2F0Y2gge1xuICAgICAgLy8gRmluYWwgZmFsbGJhY2s6IHNraXAgcmVuZGVyaW5nIGlmIG5vdCBhdmFpbGFibGVcbiAgICAgIGNvbnNvbGUud2FybignTWVybWFpZDogZmFpbGVkIHRvIGxvYWQgc2NyaXB0LiBEaWFncmFtcyB3aWxsIG5vdCByZW5kZXIuJyk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcmVuZGVyQWxsKGVsZW1lbnRzKSB7XG4gICAgY29uc3QgaXNEYXJrID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZGFyaycpO1xuICAgIGNvbnN0IHRoZW1lID0gaXNEYXJrID8gJ2RhcmsnIDogJ25ldXRyYWwnO1xuXG4gICAgd2luZG93Lm1lcm1haWQuaW5pdGlhbGl6ZSh7IHRoZW1lLCBzdGFydE9uTG9hZDogZmFsc2UsIHNlY3VyaXR5TGV2ZWw6ICdzdHJpY3QnIH0pO1xuICAgIGF3YWl0IHdpbmRvdy5tZXJtYWlkLnJ1bih7IHF1ZXJ5U2VsZWN0b3I6ICcubWVybWFpZCcgfSk7XG5cbiAgICBlbGVtZW50cy5mb3JFYWNoKGVsID0+IHsgZWwuc3R5bGUub3BhY2l0eSA9ICcxJzsgfSk7XG4gIH1cbn1cblxuQ29tcG9uZW50TWFuYWdlci5yZWdpc3RlcignbWVybWFpZC1kaWFncmFtJywgTWVybWFpZENvbXBvbmVudCk7XG5cbmV4cG9ydCBkZWZhdWx0IE1lcm1haWRDb21wb25lbnQ7XG5cbiIsICJpbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICcuLi8uLi9jb3JlL0NvbXBvbmVudC5qcyc7XG5pbXBvcnQgQ29tcG9uZW50TWFuYWdlciBmcm9tICcuLi8uLi9jb3JlL0NvbXBvbmVudE1hbmFnZXIuanMnO1xuXG5jbGFzcyBWaWRlb0NvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZyA9IHt9KSB7XG4gICAgc3VwZXIoe1xuICAgICAgbmFtZTogJ3ZpZGVvLXBsYXllcicsXG4gICAgICBzZWxlY3RvcjogY29uZmlnLnNlbGVjdG9yIHx8ICcudmlkZW8tY29udGFpbmVyIC5wbGF5ZXItd3JhcHBlcicsXG4gICAgICAuLi5jb25maWdcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIG9uSW5pdCgpIHtcbiAgICBjb25zdCB3cmFwcGVycyA9IHRoaXMuZmluZEVsZW1lbnRzKCk7XG4gICAgd3JhcHBlcnMuZm9yRWFjaCgod3JhcHBlcikgPT4gdGhpcy5vYnNlcnZlV3JhcHBlcih3cmFwcGVyKSk7XG4gIH1cblxuICBvYnNlcnZlV3JhcHBlcih3cmFwcGVyKSB7XG4gICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoKGVudHJpZXMpID0+IHtcbiAgICAgIGVudHJpZXMuZm9yRWFjaCgoZW50cnkpID0+IHtcbiAgICAgICAgaWYgKGVudHJ5LmlzSW50ZXJzZWN0aW5nKSB7XG4gICAgICAgICAgdGhpcy5sb2FkUGxheWVyKHdyYXBwZXIpO1xuICAgICAgICAgIG9ic2VydmVyLnVub2JzZXJ2ZShlbnRyeS50YXJnZXQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LCB7IHRocmVzaG9sZDogMC4xIH0pO1xuICAgIG9ic2VydmVyLm9ic2VydmUod3JhcHBlcik7XG4gIH1cblxuICBhc3luYyBsb2FkUGxheWVyKHdyYXBwZXIpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXJsID0gd3JhcHBlci5jbG9zZXN0KCcudmlkZW8tY29udGFpbmVyJyk/LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXZpZGVvLXNyY10nKT8uZGF0YXNldD8udmlkZW9TcmM7XG4gICAgICBjb25zdCBwbGF5ZXJUYXJnZXQgPSB3cmFwcGVyO1xuICAgICAgY29uc3QgcGxhY2Vob2xkZXIgPSB3cmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJy5sb2FkaW5nLXBsYWNlaG9sZGVyJyk7XG5cbiAgICAgIGxldCBtb2R1bGU7XG4gICAgICBjb25zdCBpc09mZmxpbmUgPSAod2luZG93Lkh1Z29FbnZpcm9ubWVudCAmJiB3aW5kb3cuSHVnb0Vudmlyb25tZW50LmVudmlyb25tZW50ID09PSAnb2ZmbGluZScpO1xuICAgICAgaWYgKGlzT2ZmbGluZSkge1xuICAgICAgICAvLyBFeHBlY3QgbG9jYWwgdmVuZG9yZWQgY29weSBhdCBzdGF0aWMvdmVuZG9yL2NsYXBwci9jbGFwcHIubWluLmpzXG4gICAgICAgIGNvbnN0IGxvY2FsU3JjID0gbmV3IFVSTCgndmVuZG9yL2NsYXBwci9jbGFwcHIubWluLmpzJywgZG9jdW1lbnQuYmFzZVVSSSkudG9TdHJpbmcoKTtcbiAgICAgICAgbW9kdWxlID0gYXdhaXQgaW1wb3J0KGxvY2FsU3JjKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1vZHVsZSA9IGF3YWl0IGltcG9ydCgnaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS9AY2xhcHByL3BsYXllckAwLjQuMC9kaXN0L2NsYXBwci5taW4uanMnKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IENsYXBwciA9IG1vZHVsZS5kZWZhdWx0IHx8IG1vZHVsZTtcblxuICAgICAgY29uc3QgcGxheWVyID0gbmV3IENsYXBwci5QbGF5ZXIoe1xuICAgICAgICBzb3VyY2U6IHVybCxcbiAgICAgICAgYXV0b1BsYXk6IGZhbHNlLFxuICAgICAgICBtdXRlOiBmYWxzZSxcbiAgICAgICAgaGVpZ2h0OiAnMTAwJScsXG4gICAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICAgIHJlc3BvbnNpdmU6IHRydWUsXG4gICAgICAgIHBsYXliYWNrOiB7IHByZWxvYWQ6ICdtZXRhZGF0YScgfVxuICAgICAgfSk7XG5cbiAgICAgIHBsYXllci5hdHRhY2hUbyhwbGF5ZXJUYXJnZXQpO1xuICAgICAgcGxheWVyLm9uKENsYXBwci5FdmVudHMuUExBWUVSX1JFQURZLCAoKSA9PiB7XG4gICAgICAgIGlmIChwbGFjZWhvbGRlcikge1xuICAgICAgICAgIHBsYWNlaG9sZGVyLnN0eWxlLm9wYWNpdHkgPSAnMCc7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBwbGFjZWhvbGRlci5yZW1vdmUoKSwgMzAwKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IHVybCA9IHdyYXBwZXIuY2xvc2VzdCgnLnZpZGVvLWNvbnRhaW5lcicpPy5xdWVyeVNlbGVjdG9yKCdbZGF0YS12aWRlby1zcmNdJyk/LmRhdGFzZXQ/LnZpZGVvU3JjIHx8ICcjJztcbiAgICAgIHdyYXBwZXIuaW5uZXJIVE1MID0gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwiYmctcmVkLTEwMCBib3JkZXIgYm9yZGVyLXJlZC00MDAgdGV4dC1yZWQtNzAwIHB4LTQgcHktMyByb3VuZGVkXCI+XG4gICAgICAgICAgPHN0cm9uZz5WaWRlbyBFcnJvcjo8L3N0cm9uZz4gRmFpbGVkIHRvIGxvYWQgdmlkZW8gcGxheWVyLlxuICAgICAgICAgIDxhIGhyZWY9XCIke3VybH1cIiBjbGFzcz1cInVuZGVybGluZVwiIHRhcmdldD1cIl9ibGFua1wiIHJlbD1cIm5vb3BlbmVyXCI+VmlldyB2aWRlbyBkaXJlY3RseTwvYT5cbiAgICAgICAgPC9kaXY+YDtcbiAgICB9XG4gIH1cbn1cblxuQ29tcG9uZW50TWFuYWdlci5yZWdpc3RlcigndmlkZW8tcGxheWVyJywgVmlkZW9Db21wb25lbnQpO1xuXG5leHBvcnQgZGVmYXVsdCBWaWRlb0NvbXBvbmVudDtcblxuIiwgIi8qKlxuICogTm90ZWJvb2tDZWxsIENvbXBvbmVudFxuICogSGFuZGxlcyBpbmRpdmlkdWFsIGNlbGwgbWFuYWdlbWVudCwgc2V0dXAsIGFuZCByZW5kZXJpbmdcbiAqL1xuXG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICcuLi8uLi9jb3JlL0NvbXBvbmVudC5qcyc7XG5pbXBvcnQgeyBDb3B5TWFuYWdlciB9IGZyb20gJy4uLy4uL3V0aWxzL2luZGV4LmpzJztcblxuZXhwb3J0IGNsYXNzIE5vdGVib29rQ2VsbCBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZyA9IHt9KSB7XG4gICAgc3VwZXIoe1xuICAgICAgbmFtZTogJ25vdGVib29rLWNlbGwnLFxuICAgICAgc2VsZWN0b3I6IGNvbmZpZy5zZWxlY3RvciB8fCAnLm5vdGVib29rLWNlbGwnLFxuICAgICAgLi4uY29uZmlnXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0dXAgaW5kaXZpZHVhbCBjZWxsIHdpdGggcHJvcGVyIHN0cnVjdHVyZSBhbmQgZmVhdHVyZXNcbiAgICovXG4gIHN0YXRpYyBzZXR1cENlbGwoY2VsbEVsZW1lbnQsIGluZGV4LCBwYXJlbnRWaWV3ZXIpIHtcbiAgICBjb25zdCBjZWxsVHlwZSA9IE5vdGVib29rQ2VsbC5kZXRlY3RDZWxsVHlwZShjZWxsRWxlbWVudCk7XG4gICAgY29uc3QgY2VsbElkID0gTm90ZWJvb2tDZWxsLmdlbmVyYXRlQ2VsbElkKGNlbGxUeXBlLCBpbmRleCwgcGFyZW50Vmlld2VyLmdldE5vdGVib29rSWQoKSk7XG4gICAgXG4gICAgLy8gU3RvcmUgY2VsbCBkYXRhXG4gICAgY29uc3QgY2VsbERhdGEgPSB7XG4gICAgICBlbGVtZW50OiBjZWxsRWxlbWVudCxcbiAgICAgIHR5cGU6IGNlbGxUeXBlLFxuICAgICAgaW5kZXg6IGluZGV4LFxuICAgICAgY29sbGFwc2VkOiBmYWxzZSxcbiAgICAgIGhhc091dHB1dDogTm90ZWJvb2tDZWxsLmhhc091dHB1dChjZWxsRWxlbWVudClcbiAgICB9O1xuXG4gICAgLy8gQWRkIG5lY2Vzc2FyeSBjbGFzc2VzIGFuZCBhdHRyaWJ1dGVzXG4gICAgY2VsbEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnbm90ZWJvb2stY2VsbCcsIGBub3RlYm9vay1jZWxsLS0ke2NlbGxUeXBlfWApO1xuICAgIGNlbGxFbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1jZWxsLWlkJywgY2VsbElkKTtcbiAgICBjZWxsRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtY2VsbC10eXBlJywgY2VsbFR5cGUpO1xuICAgIGNlbGxFbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1jZWxsLWluZGV4JywgaW5kZXgpO1xuICAgIGNlbGxFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KCctLWNlbGwtaW5kZXgnLCBpbmRleCk7XG5cbiAgICAvLyBTZXR1cCBjZWxsIGhlYWRlciBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAgTm90ZWJvb2tDZWxsLmVuc3VyZUNlbGxIZWFkZXIoY2VsbEVsZW1lbnQsIGNlbGxUeXBlLCBjZWxsSWQpO1xuICAgIFxuICAgIC8vIFNldHVwIGNlbGwgY29udGVudCB3cmFwcGVyXG4gICAgTm90ZWJvb2tDZWxsLmVuc3VyZUNlbGxDb250ZW50KGNlbGxFbGVtZW50KTtcbiAgICBcbiAgICAvLyBTZXR1cCBjb2RlIGNlbGxzIHNwZWNpZmljYWxseVxuICAgIGlmIChjZWxsVHlwZSA9PT0gJ2NvZGUnKSB7XG4gICAgICBOb3RlYm9va0NlbGwuc2V0dXBDb2RlQ2VsbChjZWxsRWxlbWVudCwgY2VsbElkKTtcbiAgICB9XG5cbiAgICAvLyBNYWtlIGNvbGxhcHNpYmxlIGlmIGNvbmZpZ3VyZWRcbiAgICBpZiAoTm90ZWJvb2tDZWxsLnNob3VsZE1ha2VDb2xsYXBzaWJsZShjZWxsVHlwZSkpIHtcbiAgICAgIE5vdGVib29rQ2VsbC5tYWtlQ29sbGFwc2libGUoY2VsbEVsZW1lbnQsIGNlbGxJZCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgY2VsbElkLCBjZWxsRGF0YSB9O1xuICB9XG5cbiAgLyoqXG4gICAqIERldGVjdCBjZWxsIHR5cGUgZnJvbSBlbGVtZW50XG4gICAqL1xuICBzdGF0aWMgZGV0ZWN0Q2VsbFR5cGUoZWxlbWVudCkge1xuICAgIC8vIENoZWNrIGRhdGEgYXR0cmlidXRlIGZpcnN0XG4gICAgaWYgKGVsZW1lbnQuZGF0YXNldC5jZWxsVHlwZSkge1xuICAgICAgcmV0dXJuIGVsZW1lbnQuZGF0YXNldC5jZWxsVHlwZTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBjbGFzcyBuYW1lc1xuICAgIGlmIChlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnbm90ZWJvb2stY2VsbC0tbWFya2Rvd24nKSkgcmV0dXJuICdtYXJrZG93bic7XG4gICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdub3RlYm9vay1jZWxsLS1jb2RlJykpIHJldHVybiAnY29kZSc7XG4gICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdub3RlYm9vay1jZWxsLS1yYXcnKSkgcmV0dXJuICdyYXcnO1xuXG4gICAgLy8gRGV0ZWN0IGZyb20gY29udGVudFxuICAgIGlmIChlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3ByZSBjb2RlLCAuaGlnaGxpZ2h0JykpIHJldHVybiAnY29kZSc7XG4gICAgaWYgKGVsZW1lbnQucXVlcnlTZWxlY3RvcignLnJhdy1jZWxsLWNvbnRlbnQnKSkgcmV0dXJuICdyYXcnO1xuICAgIFxuICAgIHJldHVybiAnbWFya2Rvd24nOyAvLyBEZWZhdWx0IGZhbGxiYWNrXG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgY2VsbCBoYXMgb3V0cHV0XG4gICAqL1xuICBzdGF0aWMgaGFzT3V0cHV0KGNlbGxFbGVtZW50KSB7XG4gICAgcmV0dXJuICEhKFxuICAgICAgY2VsbEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNvZGUtb3V0cHV0cycpIHx8XG4gICAgICBjZWxsRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubm90ZWJvb2stY2VsbF9fb3V0cHV0cycpIHx8XG4gICAgICBjZWxsRWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbY2xhc3MqPVwib3V0cHV0XCJdJylcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIHVuaXF1ZSBjZWxsIElEXG4gICAqL1xuICBzdGF0aWMgZ2VuZXJhdGVDZWxsSWQodHlwZSwgaW5kZXgsIG5vdGVib29rSWQpIHtcbiAgICByZXR1cm4gYCR7bm90ZWJvb2tJZH0tJHt0eXBlfS0ke2luZGV4fWA7XG4gIH1cblxuICAvKipcbiAgICogRW5zdXJlIGNlbGwgaGFzIHByb3BlciBoZWFkZXIgc3RydWN0dXJlXG4gICAqL1xuICBzdGF0aWMgZW5zdXJlQ2VsbEhlYWRlcihjZWxsRWxlbWVudCwgY2VsbFR5cGUsIGNlbGxJZCkge1xuICAgIGxldCBoZWFkZXIgPSBjZWxsRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubm90ZWJvb2stY2VsbF9faGVhZGVyJyk7XG4gICAgXG4gICAgaWYgKCFoZWFkZXIpIHtcbiAgICAgIGhlYWRlciA9IE5vdGVib29rQ2VsbC5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgIGNsYXNzOiAnbm90ZWJvb2stY2VsbF9faGVhZGVyJyxcbiAgICAgICAgcm9sZTogJ2J1dHRvbicsXG4gICAgICAgIHRhYmluZGV4OiAnMCcsXG4gICAgICAgICdhcmlhLWNvbnRyb2xzJzogYCR7Y2VsbElkfS1jb250ZW50YCxcbiAgICAgICAgJ2FyaWEtZXhwYW5kZWQnOiAndHJ1ZSdcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDZWxsIHR5cGUgaW5kaWNhdG9yXG4gICAgICBjb25zdCB0eXBlSW5kaWNhdG9yID0gTm90ZWJvb2tDZWxsLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgY2xhc3M6ICdub3RlYm9vay1jZWxsX190eXBlJ1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHR5cGVJY29uID0gTm90ZWJvb2tDZWxsLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICAgIGNsYXNzOiAnbm90ZWJvb2stY2VsbF9fdHlwZS1pY29uJyxcbiAgICAgICAgJ2FyaWEtaGlkZGVuJzogJ3RydWUnXG4gICAgICB9KTtcbiAgICAgIHR5cGVJY29uLmlubmVySFRNTCA9IE5vdGVib29rQ2VsbC5nZXRDZWxsVHlwZUljb24oY2VsbFR5cGUpO1xuICAgICAgXG4gICAgICBjb25zdCB0eXBlVGV4dCA9IE5vdGVib29rQ2VsbC5jcmVhdGVFbGVtZW50KCdzcGFuJywge1xuICAgICAgICBjbGFzczogJ25vdGVib29rLWNlbGxfX3R5cGUtdGV4dCdcbiAgICAgIH0pO1xuICAgICAgdHlwZVRleHQudGV4dENvbnRlbnQgPSBOb3RlYm9va0NlbGwuZ2V0Q2VsbFR5cGVMYWJlbChjZWxsVHlwZSk7XG4gICAgICBcbiAgICAgIHR5cGVJbmRpY2F0b3IuYXBwZW5kQ2hpbGQodHlwZUljb24pO1xuICAgICAgdHlwZUluZGljYXRvci5hcHBlbmRDaGlsZCh0eXBlVGV4dCk7XG4gICAgICBcbiAgICAgIC8vIENvbnRyb2xzIGNvbnRhaW5lclxuICAgICAgY29uc3QgY29udHJvbHMgPSBOb3RlYm9va0NlbGwuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICBjbGFzczogJ25vdGVib29rLWNlbGxfX2NvbnRyb2xzJ1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGhlYWRlci5hcHBlbmRDaGlsZCh0eXBlSW5kaWNhdG9yKTtcbiAgICAgIGhlYWRlci5hcHBlbmRDaGlsZChjb250cm9scyk7XG4gICAgICBcbiAgICAgIC8vIEluc2VydCBoZWFkZXIgYXQgdGhlIGJlZ2lubmluZ1xuICAgICAgY2VsbEVsZW1lbnQuaW5zZXJ0QmVmb3JlKGhlYWRlciwgY2VsbEVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGhlYWRlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbnN1cmUgY2VsbCBoYXMgcHJvcGVyIGNvbnRlbnQgd3JhcHBlclxuICAgKi9cbiAgc3RhdGljIGVuc3VyZUNlbGxDb250ZW50KGNlbGxFbGVtZW50KSB7XG4gICAgbGV0IGNvbnRlbnQgPSBjZWxsRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubm90ZWJvb2stY2VsbF9fY29udGVudCcpO1xuICAgIFxuICAgIGlmICghY29udGVudCkge1xuICAgICAgY29udGVudCA9IE5vdGVib29rQ2VsbC5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgIGNsYXNzOiAnbm90ZWJvb2stY2VsbF9fY29udGVudCcsXG4gICAgICAgIGlkOiBgJHtjZWxsRWxlbWVudC5kYXRhc2V0LmNlbGxJZH0tY29udGVudGBcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBNb3ZlIGV4aXN0aW5nIGNvbnRlbnQgKGV4Y2VwdCBoZWFkZXIpIGludG8gd3JhcHBlclxuICAgICAgY29uc3QgaGVhZGVyID0gY2VsbEVsZW1lbnQucXVlcnlTZWxlY3RvcignLm5vdGVib29rLWNlbGxfX2hlYWRlcicpO1xuICAgICAgY29uc3QgZWxlbWVudHNUb01vdmUgPSBBcnJheS5mcm9tKGNlbGxFbGVtZW50LmNoaWxkcmVuKS5maWx0ZXIoXG4gICAgICAgIGNoaWxkID0+IGNoaWxkICE9PSBoZWFkZXJcbiAgICAgICk7XG4gICAgICBcbiAgICAgIGVsZW1lbnRzVG9Nb3ZlLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY2VsbEVsZW1lbnQuYXBwZW5kQ2hpbGQoY29udGVudCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH1cblxuICAvKipcbiAgICogU2V0dXAgY29kZSBjZWxsIHNwZWNpZmljIGZlYXR1cmVzXG4gICAqL1xuICBzdGF0aWMgc2V0dXBDb2RlQ2VsbChjZWxsRWxlbWVudCwgY2VsbElkKSB7XG4gICAgY29uc3QgY29kZUNvbnRlbnQgPSBjZWxsRWxlbWVudC5xdWVyeVNlbGVjdG9yKCdwcmUsIC5oaWdobGlnaHQsIC5ub3RlYm9vay1jZWxsX19jb2RlLWNvbnRlbnQnKTtcbiAgICBcbiAgICBpZiAoY29kZUNvbnRlbnQpIHtcbiAgICAgIC8vIFdyYXAgY29kZSBjb250ZW50IGlmIG5lZWRlZFxuICAgICAgaWYgKCFjb2RlQ29udGVudC5jbG9zZXN0KCcubm90ZWJvb2stY2VsbF9fY29kZS1jb250YWluZXInKSkge1xuICAgICAgICBjb25zdCBjb2RlQ29udGFpbmVyID0gTm90ZWJvb2tDZWxsLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICBjbGFzczogJ25vdGVib29rLWNlbGxfX2NvZGUtY29udGFpbmVyJ1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHBhcmVudCA9IGNvZGVDb250ZW50LnBhcmVudE5vZGU7XG4gICAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUoY29kZUNvbnRhaW5lciwgY29kZUNvbnRlbnQpO1xuICAgICAgICBjb2RlQ29udGFpbmVyLmFwcGVuZENoaWxkKGNvZGVDb250ZW50KTtcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIGNvcHkgYnV0dG9uXG4gICAgICBOb3RlYm9va0NlbGwuYWRkQ29weUJ1dHRvbihjb2RlQ29udGVudCwgY2VsbElkKTtcbiAgICAgIFxuICAgICAgLy8gU2V0dXAgZXhlY3V0aW9uIGNvdW50IGlmIHByZXNlbnRcbiAgICAgIE5vdGVib29rQ2VsbC5zZXR1cEV4ZWN1dGlvbkNvdW50KGNlbGxFbGVtZW50KTtcbiAgICB9XG5cbiAgICAvLyBTZXR1cCBvdXRwdXRzXG4gICAgTm90ZWJvb2tDZWxsLnNldHVwT3V0cHV0cyhjZWxsRWxlbWVudCk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGNvcHkgYnV0dG9uIHRvIGNvZGUgY29udGVudFxuICAgKi9cbiAgc3RhdGljIGFkZENvcHlCdXR0b24oY29kZUNvbnRlbnQsIGNlbGxJZCkge1xuICAgIC8vIFJlbW92ZSBleGlzdGluZyBjb3B5IGJ1dHRvbnMgdG8gYXZvaWQgZHVwbGljYXRlc1xuICAgIGNvbnN0IGV4aXN0aW5nQnRuID0gY29kZUNvbnRlbnQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCcubm90ZWJvb2stY2VsbF9fY29weS1idG4nKTtcbiAgICBpZiAoZXhpc3RpbmdCdG4pIHtcbiAgICAgIGV4aXN0aW5nQnRuLnJlbW92ZSgpO1xuICAgIH1cblxuICAgIGNvbnN0IGNvcHlCdG4gPSBOb3RlYm9va0NlbGwuY3JlYXRlRWxlbWVudCgnYnV0dG9uJywge1xuICAgICAgY2xhc3M6ICdub3RlYm9vay1jZWxsX19jb3B5LWJ0bicsXG4gICAgICB0eXBlOiAnYnV0dG9uJyxcbiAgICAgICdhcmlhLWxhYmVsJzogJ0NvcHkgY29kZSB0byBjbGlwYm9hcmQnLFxuICAgICAgJ2RhdGEtY2VsbC1pZCc6IGNlbGxJZFxuICAgIH0pO1xuXG4gICAgY29uc3QgY29weUljb24gPSBOb3RlYm9va0NlbGwuY3JlYXRlRWxlbWVudCgnc3BhbicsIHtcbiAgICAgIGNsYXNzOiAnbm90ZWJvb2stY2VsbF9fY29weS1pY29uJyxcbiAgICAgICdhcmlhLWhpZGRlbic6ICd0cnVlJ1xuICAgIH0pO1xuICAgIGNvcHlJY29uLmlubmVySFRNTCA9IE5vdGVib29rQ2VsbC5nZXRDb3B5SWNvbigpO1xuXG4gICAgY29uc3QgY29weVRleHQgPSBOb3RlYm9va0NlbGwuY3JlYXRlRWxlbWVudCgnc3BhbicsIHtcbiAgICAgIGNsYXNzOiAnbm90ZWJvb2stY2VsbF9fY29weS10ZXh0J1xuICAgIH0pO1xuICAgIGNvcHlUZXh0LnRleHRDb250ZW50ID0gJ0NvcHknO1xuXG4gICAgY29weUJ0bi5hcHBlbmRDaGlsZChjb3B5SWNvbik7XG4gICAgY29weUJ0bi5hcHBlbmRDaGlsZChjb3B5VGV4dCk7XG5cbiAgICAvLyBJbnNlcnQgY29weSBidXR0b24gaW50byBjb2RlIGNvbnRhaW5lclxuICAgIGNvbnN0IGNvbnRhaW5lciA9IGNvZGVDb250ZW50LmNsb3Nlc3QoJy5ub3RlYm9vay1jZWxsX19jb2RlLWNvbnRhaW5lcicpIHx8IGNvZGVDb250ZW50LnBhcmVudE5vZGU7XG4gICAgY29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY29weUJ0bik7XG4gIH1cblxuICAvKipcbiAgICogU2V0dXAgZXhlY3V0aW9uIGNvdW50IGRpc3BsYXlcbiAgICovXG4gIHN0YXRpYyBzZXR1cEV4ZWN1dGlvbkNvdW50KGNlbGxFbGVtZW50KSB7XG4gICAgY29uc3QgZXhpc3RpbmdDb3VudCA9IGNlbGxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5leGVjdXRpb24tY291bnQsIC5ub3RlYm9vay1jZWxsX19leGVjdXRpb24tY291bnQnKTtcbiAgICBcbiAgICBpZiAoZXhpc3RpbmdDb3VudCAmJiAhZXhpc3RpbmdDb3VudC5jbGFzc0xpc3QuY29udGFpbnMoJ25vdGVib29rLWNlbGxfX2V4ZWN1dGlvbi1jb3VudCcpKSB7XG4gICAgICBleGlzdGluZ0NvdW50LmNsYXNzTGlzdC5hZGQoJ25vdGVib29rLWNlbGxfX2V4ZWN1dGlvbi1jb3VudCcpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCBjZWxsIG91dHB1dHNcbiAgICovXG4gIHN0YXRpYyBzZXR1cE91dHB1dHMoY2VsbEVsZW1lbnQpIHtcbiAgICBjb25zdCBvdXRwdXRzQ29udGFpbmVyID0gY2VsbEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNvZGUtb3V0cHV0cywgLm5vdGVib29rLWNlbGxfX291dHB1dHMnKTtcbiAgICBcbiAgICBpZiAob3V0cHV0c0NvbnRhaW5lcikge1xuICAgICAgb3V0cHV0c0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdub3RlYm9vay1jZWxsX19vdXRwdXRzJyk7XG4gICAgICBcbiAgICAgIC8vIFByb2Nlc3MgaW5kaXZpZHVhbCBvdXRwdXRzXG4gICAgICBjb25zdCBvdXRwdXRzID0gb3V0cHV0c0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdbY2xhc3MqPVwib3V0cHV0XCJdLCAuc3RyZWFtLW91dHB1dCwgLmV4ZWN1dGUtcmVzdWx0LCAuZGlzcGxheS1kYXRhLCAuZXJyb3Itb3V0cHV0Jyk7XG4gICAgICBcbiAgICAgIG91dHB1dHMuZm9yRWFjaChvdXRwdXQgPT4ge1xuICAgICAgICBOb3RlYm9va0NlbGwuc2V0dXBPdXRwdXQob3V0cHV0KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCBpbmRpdmlkdWFsIG91dHB1dFxuICAgKi9cbiAgc3RhdGljIHNldHVwT3V0cHV0KG91dHB1dCkge1xuICAgIC8vIERldGVybWluZSBvdXRwdXQgdHlwZSBmcm9tIGNsYXNzZXNcbiAgICBsZXQgb3V0cHV0VHlwZSA9ICdnZW5lcmFsJztcbiAgICBcbiAgICBpZiAob3V0cHV0LmNsYXNzTGlzdC5jb250YWlucygnc3RyZWFtLW91dHB1dCcpIHx8IG91dHB1dC5jbGFzc05hbWUuaW5jbHVkZXMoJ3N0cmVhbScpKSB7XG4gICAgICBvdXRwdXRUeXBlID0gJ3N0cmVhbSc7XG4gICAgfSBlbHNlIGlmIChvdXRwdXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdleGVjdXRlLXJlc3VsdCcpIHx8IG91dHB1dC5jbGFzc05hbWUuaW5jbHVkZXMoJ2V4ZWN1dGUnKSkge1xuICAgICAgb3V0cHV0VHlwZSA9ICdleGVjdXRlLXJlc3VsdCc7XG4gICAgfSBlbHNlIGlmIChvdXRwdXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkaXNwbGF5LWRhdGEnKSB8fCBvdXRwdXQuY2xhc3NOYW1lLmluY2x1ZGVzKCdkaXNwbGF5JykpIHtcbiAgICAgIG91dHB1dFR5cGUgPSAnZGlzcGxheS1kYXRhJztcbiAgICB9IGVsc2UgaWYgKG91dHB1dC5jbGFzc0xpc3QuY29udGFpbnMoJ2Vycm9yLW91dHB1dCcpIHx8IG91dHB1dC5jbGFzc05hbWUuaW5jbHVkZXMoJ2Vycm9yJykpIHtcbiAgICAgIG91dHB1dFR5cGUgPSAnZXJyb3InO1xuICAgIH1cblxuICAgIG91dHB1dC5jbGFzc0xpc3QuYWRkKCdub3RlYm9vay1jZWxsX19vdXRwdXQnLCBgbm90ZWJvb2stY2VsbF9fb3V0cHV0LS0ke291dHB1dFR5cGV9YCk7XG4gIH1cblxuICAvKipcbiAgICogTWFrZSBjZWxsIGNvbGxhcHNpYmxlXG4gICAqL1xuICBzdGF0aWMgbWFrZUNvbGxhcHNpYmxlKGNlbGxFbGVtZW50LCBjZWxsSWQpIHtcbiAgICBjZWxsRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdub3RlYm9vay1jZWxsLS1jb2xsYXBzaWJsZScpO1xuICAgIFxuICAgIGNvbnN0IGhlYWRlciA9IGNlbGxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ub3RlYm9vay1jZWxsX19oZWFkZXInKTtcbiAgICBjb25zdCBjb250cm9scyA9IGhlYWRlci5xdWVyeVNlbGVjdG9yKCcubm90ZWJvb2stY2VsbF9fY29udHJvbHMnKTtcbiAgICBcbiAgICAvLyBBZGQgdG9nZ2xlIGJ1dHRvblxuICAgIGNvbnN0IHRvZ2dsZUJ0biA9IE5vdGVib29rQ2VsbC5jcmVhdGVFbGVtZW50KCdidXR0b24nLCB7XG4gICAgICBjbGFzczogJ25vdGVib29rLWNlbGxfX3RvZ2dsZScsXG4gICAgICB0eXBlOiAnYnV0dG9uJyxcbiAgICAgICdhcmlhLWxhYmVsJzogJ1RvZ2dsZSBjZWxsIHZpc2liaWxpdHknLFxuICAgICAgJ2RhdGEtY2VsbC1pZCc6IGNlbGxJZFxuICAgIH0pO1xuXG4gICAgY29uc3QgdG9nZ2xlSWNvbiA9IE5vdGVib29rQ2VsbC5jcmVhdGVFbGVtZW50KCdzcGFuJywge1xuICAgICAgY2xhc3M6ICdub3RlYm9vay1jZWxsX190b2dnbGUtaWNvbicsXG4gICAgICAnYXJpYS1oaWRkZW4nOiAndHJ1ZSdcbiAgICB9KTtcbiAgICB0b2dnbGVJY29uLmlubmVySFRNTCA9IE5vdGVib29rQ2VsbC5nZXRUb2dnbGVJY29uKCk7XG5cbiAgICB0b2dnbGVCdG4uYXBwZW5kQ2hpbGQodG9nZ2xlSWNvbik7XG4gICAgY29udHJvbHMuYXBwZW5kQ2hpbGQodG9nZ2xlQnRuKTtcblxuICAgIC8vIE1ha2UgaGVhZGVyIGNsaWNrYWJsZVxuICAgIGhlYWRlci5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnYnV0dG9uJyk7XG4gICAgaGVhZGVyLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnMCcpO1xuICAgIGhlYWRlci5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAndHJ1ZScpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBjb3B5IG9wZXJhdGlvbiBmb3IgY2VsbFxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGhhbmRsZUNvcHlDbGljayhidXR0b24sIGNlbGwsIGNsZWFuTm90ZWJvb2tDb2RlLCBlbWl0Q2FsbGJhY2spIHtcbiAgICBjb25zdCBjZWxsSWQgPSBidXR0b24uZGF0YXNldC5jZWxsSWQ7XG4gICAgXG4gICAgaWYgKCFjZWxsKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdOb3RlYm9va0NlbGw6IENlbGwgbm90IGZvdW5kIGZvciBjb3B5IG9wZXJhdGlvbicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IENvcHlNYW5hZ2VyLmNvcHkoY2VsbC5lbGVtZW50LCB7XG4gICAgICBzdWNjZXNzTWVzc2FnZTogJ1x1MjcwNSBDb3BpZWQhJyxcbiAgICAgIGVycm9yTWVzc2FnZTogJ1x1Mjc0QyBGYWlsZWQnLFxuICAgICAgZmVlZGJhY2tEdXJhdGlvbjogMjAwMCxcbiAgICAgIHByZXByb2Nlc3NUZXh0OiAodGV4dCkgPT4gY2xlYW5Ob3RlYm9va0NvZGUodGV4dCksXG4gICAgICBhbmFseXRpY3M6IHtcbiAgICAgICAgY29tcG9uZW50OiAnbm90ZWJvb2stdmlld2VyJyxcbiAgICAgICAgY2VsbElkLFxuICAgICAgICBjZWxsVHlwZTogY2VsbC50eXBlXG4gICAgICB9LFxuICAgICAgb25TdWNjZXNzOiAoY29udGVudCkgPT4ge1xuICAgICAgICBlbWl0Q2FsbGJhY2soJ25vdGVib29rOmNvcHktc3VjY2VzcycsIHsgY2VsbElkLCBjb250ZW50IH0pO1xuICAgICAgfSxcbiAgICAgIG9uRXJyb3I6IChlcnJvcikgPT4ge1xuICAgICAgICBlbWl0Q2FsbGJhY2soJ25vdGVib29rOmNvcHktZXJyb3InLCB7IGNlbGxJZCwgZXJyb3IgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFuIG5vdGVib29rIGNvZGUgZm9yIGNvcHlpbmcgKG5vdGVib29rLXNwZWNpZmljIHByZXByb2Nlc3NpbmcpXG4gICAqL1xuICBzdGF0aWMgY2xlYW5Ob3RlYm9va0NvZGUodGV4dCkge1xuICAgIGlmICghdGV4dCkgcmV0dXJuICcnO1xuICAgIFxuICAgIHJldHVybiB0ZXh0XG4gICAgICAucmVwbGFjZSgvXkluIFxcW1xcZCpcXF06XFxzKi9nbSwgJycpICAvLyBSZW1vdmUgaW5wdXQgcHJvbXB0c1xuICAgICAgLnJlcGxhY2UoL15PdXRcXFtcXGQqXFxdOlxccyovZ20sICcnKSAgLy8gUmVtb3ZlIG91dHB1dCBwcm9tcHRzICBcbiAgICAgIC5yZXBsYWNlKC9eXFxzKltcXHJcXG5dL2dtLCAnJykgICAgICAgLy8gUmVtb3ZlIGVtcHR5IGxpbmVzXG4gICAgICAudHJpbSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIERldGVybWluZSBpZiBjZWxsIHR5cGUgc2hvdWxkIGJlIGNvbGxhcHNpYmxlXG4gICAqL1xuICBzdGF0aWMgc2hvdWxkTWFrZUNvbGxhcHNpYmxlKGNlbGxUeXBlKSB7XG4gICAgLy8gQWxsIGNlbGwgdHlwZXMgY2FuIGJlIGNvbGxhcHNpYmxlIGJ5IGRlZmF1bHRcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVdGlsaXR5OiBDcmVhdGUgZWxlbWVudCB3aXRoIGF0dHJpYnV0ZXNcbiAgICovXG4gIHN0YXRpYyBjcmVhdGVFbGVtZW50KHRhZywgYXR0cmlidXRlcyA9IHt9KSB7XG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnKTtcbiAgICBcbiAgICBPYmplY3QuZW50cmllcyhhdHRyaWJ1dGVzKS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgIGlmIChrZXkgPT09ICdjbGFzcycpIHtcbiAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSB2YWx1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKGtleSwgdmFsdWUpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiBlbGVtZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjZWxsIHR5cGUgaWNvbiBTVkdcbiAgICovXG4gIHN0YXRpYyBnZXRDZWxsVHlwZUljb24odHlwZSkge1xuICAgIGNvbnN0IGljb25zID0ge1xuICAgICAgbWFya2Rvd246IGA8c3ZnIHZpZXdCb3g9XCIwIDAgMTYgMTZcIiBmaWxsPVwiY3VycmVudENvbG9yXCI+PHBhdGggZD1cIk0xNC44NSAzSDEuMTVDLjUyIDMgMCAzLjUyIDAgNC4xNXY3LjY5QzAgMTIuNDguNTIgMTMgMS4xNSAxM2gxMy42OWMuNjQgMCAxLjE1LS41MiAxLjE1LTEuMTV2LTcuN0MxNiAzLjUyIDE1LjQ4IDMgMTQuODUgM3pNOSAxMUg3LjVMNS41IDguOTIgMy41IDExSDJsMi41LTMuNUwyIDRoMS41bDIgMi4wOEw3LjUgNEg5bC0yLjUgMy41TDkgMTF6bTUgMGgtMS41VjYuMjVMMTEuMjUgOCAxMCA2LjI1VjExSDguNVY0SDEwbDEuMjUgMS43NUwxMi41IDRIMTR2N3pcIi8+PC9zdmc+YCxcbiAgICAgIGNvZGU6IGA8c3ZnIHZpZXdCb3g9XCIwIDAgMTYgMTZcIiBmaWxsPVwiY3VycmVudENvbG9yXCI+PHBhdGggZD1cIk00LjcyIDkuNDdMMS4yNSA2bDMuNDctMy40N2EuNzUuNzUgMCAwMC0xLjA2LTEuMDZMLjE5IDQuOTRhMS4yNSAxLjI1IDAgMDAwIDEuNzZsMy40NyAzLjQ3YS43NS43NSAwIDEwMS4wNi0xLjA2em02LjU2IDBMMTQuNzUgNmwtMy40Ny0zLjQ3YS43NS43NSAwIDExMS4wNi0xLjA2bDMuNDcgMy40N2ExLjI1IDEuMjUgMCAwMTAgMS43NmwtMy40NyAzLjQ3YS43NS43NSAwIDAxLTEuMDYtMS4wNnpcIi8+PC9zdmc+YCxcbiAgICAgIHJhdzogYDxzdmcgdmlld0JveD1cIjAgMCAxNiAxNlwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIj48cGF0aCBkPVwiTTggMWE3IDcgMCAxMDAgMTRBNyA3IDAgMDA4IDF6TTcgNC4yNUEuNzUuNzUgMCAwMTguNzUgNGguNWEuNzUuNzUgMCAwMS43NS43NXYyLjVhLjc1Ljc1IDAgMDEtLjc1Ljc1aC0uNUEuNzUuNzUgMCAwMTcgNy4yNXYtM3ptMSA3LjI1YTEgMSAwIDEwMC0yIDEgMSAwIDAwMCAyelwiLz48L3N2Zz5gXG4gICAgfTtcbiAgICBcbiAgICByZXR1cm4gaWNvbnNbdHlwZV0gfHwgaWNvbnMubWFya2Rvd247XG4gIH1cblxuICAvKipcbiAgICogR2V0IGNlbGwgdHlwZSBsYWJlbFxuICAgKi9cbiAgc3RhdGljIGdldENlbGxUeXBlTGFiZWwodHlwZSkge1xuICAgIGNvbnN0IGxhYmVscyA9IHtcbiAgICAgIG1hcmtkb3duOiAnTWFya2Rvd24nLFxuICAgICAgY29kZTogJ0NvZGUnLFxuICAgICAgcmF3OiAnUmF3J1xuICAgIH07XG4gICAgXG4gICAgcmV0dXJuIGxhYmVsc1t0eXBlXSB8fCAnQ2VsbCc7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGNvcHkgaWNvbiBTVkdcbiAgICovXG4gIHN0YXRpYyBnZXRDb3B5SWNvbigpIHtcbiAgICByZXR1cm4gYDxzdmcgdmlld0JveD1cIjAgMCAxNiAxNlwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIj48cGF0aCBkPVwiTTQgMmEyIDIgMCAwIDEgMi0yaDhhMiAyIDAgMCAxIDIgMnY4YTIgMiAwIDAgMS0yIDJINmEyIDIgMCAwIDEtMi0yVjJabTItMWExIDEgMCAwIDAtMSAxdjhhMSAxIDAgMCAwIDEgMWg4YTEgMSAwIDAgMCAxLTFWMmExIDEgMCAwIDAtMS0xSDZaTTIgNWExIDEgMCAwIDAtMSAxdjhhMSAxIDAgMCAwIDEgMWg4YTEgMSAwIDAgMCAxLTF2LTFoMXYxYTIgMiAwIDAgMS0yIDJIMmEyIDIgMCAwIDEtMi0yVjZhMiAyIDAgMCAxIDItMmgxdjFIMlpcIi8+PC9zdmc+YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdG9nZ2xlIGljb24gU1ZHXG4gICAqL1xuICBzdGF0aWMgZ2V0VG9nZ2xlSWNvbigpIHtcbiAgICByZXR1cm4gYDxzdmcgdmlld0JveD1cIjAgMCAxNiAxNlwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIj48cGF0aCBkPVwiTTQuNDI3IDkuNTczTDggNmwzLjU3MyAzLjU3M2EuNS41IDAgMDAuNzA3LS43MDdsLTQtNGEuNS41IDAgMDAtLjcwNyAwbC00IDRhLjUuNSAwIDEwLjcwNy43MDd6XCIvPjwvc3ZnPmA7XG4gIH1cbn1cblxuLy8gQXV0by1yZWdpc3RlciBjb21wb25lbnRcbmltcG9ydCBDb21wb25lbnRNYW5hZ2VyIGZyb20gJy4uLy4uL2NvcmUvQ29tcG9uZW50TWFuYWdlci5qcyc7XG5Db21wb25lbnRNYW5hZ2VyLnJlZ2lzdGVyKCdub3RlYm9vay1jZWxsJywgTm90ZWJvb2tDZWxsKTsiLCAiLyoqXG4gKiBOb3RlYm9va05hdmlnYXRpb24gQ29tcG9uZW50XG4gKiBIYW5kbGVzIGtleWJvYXJkIG5hdmlnYXRpb24gYW5kIGZvY3VzIG1hbmFnZW1lbnQgZm9yIG5vdGVib29rIGNlbGxzXG4gKi9cblxuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vY29yZS9Db21wb25lbnQuanMnO1xuaW1wb3J0IHsgYW5ub3VuY2VUb1NjcmVlblJlYWRlciB9IGZyb20gJy4uLy4uL3V0aWxzL2FjY2Vzc2liaWxpdHkuanMnO1xuXG5leHBvcnQgY2xhc3MgTm90ZWJvb2tOYXZpZ2F0aW9uIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoY29uZmlnID0ge30pIHtcbiAgICBzdXBlcih7XG4gICAgICBuYW1lOiAnbm90ZWJvb2stbmF2aWdhdGlvbicsXG4gICAgICBzZWxlY3RvcjogY29uZmlnLnNlbGVjdG9yIHx8ICcubm90ZWJvb2snLFxuICAgICAgLi4uY29uZmlnXG4gICAgfSk7XG4gICAgLy8gRXZlbnQgY2xlYW51cCBub3cgaGFuZGxlZCBhdXRvbWF0aWNhbGx5IGJ5IEFib3J0Q29udHJvbGxlclxuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIGtleWJvYXJkIG5hdmlnYXRpb24gZm9yIG5vdGVib29rIGNlbGxzXG4gICAqL1xuICBzdGF0aWMgc2V0dXBLZXlib2FyZE5hdmlnYXRpb24ocGFyZW50RWxlbWVudCwgY2VsbHMsIGFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICBjb25zdCBjZWxsRWxlbWVudHMgPSBBcnJheS5mcm9tKGNlbGxzLnZhbHVlcygpKS5tYXAoY2VsbCA9PiBjZWxsLmVsZW1lbnQpO1xuICAgIFxuICAgIGNlbGxFbGVtZW50cy5mb3JFYWNoKChjZWxsLCBpbmRleCkgPT4ge1xuICAgICAgY29uc3QgaGVhZGVyID0gY2VsbC5xdWVyeVNlbGVjdG9yKCcubm90ZWJvb2stY2VsbF9faGVhZGVyJyk7XG4gICAgICBpZiAoaGVhZGVyKSB7XG4gICAgICAgIGhlYWRlci5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgaW5kZXggPT09IDAgPyAnMCcgOiAnLTEnKTtcbiAgICAgICAgXG4gICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoaGVhZGVyLCAna2V5ZG93bicsIChlKSA9PiB7XG4gICAgICAgICAgTm90ZWJvb2tOYXZpZ2F0aW9uLmhhbmRsZUNlbGxOYXZpZ2F0aW9uKGUsIGluZGV4LCBjZWxsRWxlbWVudHMpO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gTm8gY2xlYW51cCBuZWVkZWQgLSBBYm9ydENvbnRyb2xsZXIgaGFuZGxlcyBldmVyeXRoaW5nIGF1dG9tYXRpY2FsbHlcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgY2VsbC10by1jZWxsIG5hdmlnYXRpb25cbiAgICovXG4gIHN0YXRpYyBoYW5kbGVDZWxsTmF2aWdhdGlvbihlLCBjdXJyZW50SW5kZXgsIGNlbGxzKSB7XG4gICAgbGV0IG5ld0luZGV4ID0gY3VycmVudEluZGV4O1xuICAgIFxuICAgIHN3aXRjaCAoZS5rZXkpIHtcbiAgICAgIGNhc2UgJ0Fycm93RG93bic6XG4gICAgICBjYXNlICdqJzpcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBuZXdJbmRleCA9IE1hdGgubWluKGN1cnJlbnRJbmRleCArIDEsIGNlbGxzLmxlbmd0aCAtIDEpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0Fycm93VXAnOlxuICAgICAgY2FzZSAnayc6XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgbmV3SW5kZXggPSBNYXRoLm1heChjdXJyZW50SW5kZXggLSAxLCAwKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdIb21lJzpcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBuZXdJbmRleCA9IDA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnRW5kJzpcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBuZXdJbmRleCA9IGNlbGxzLmxlbmd0aCAtIDE7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICBpZiAobmV3SW5kZXggIT09IGN1cnJlbnRJbmRleCkge1xuICAgICAgLy8gVXBkYXRlIHRhYmluZGV4XG4gICAgICBjZWxsc1tjdXJyZW50SW5kZXhdLnF1ZXJ5U2VsZWN0b3IoJy5ub3RlYm9vay1jZWxsX19oZWFkZXInKS5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJy0xJyk7XG4gICAgICBjZWxsc1tuZXdJbmRleF0ucXVlcnlTZWxlY3RvcignLm5vdGVib29rLWNlbGxfX2hlYWRlcicpLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnMCcpO1xuICAgICAgXG4gICAgICAvLyBGb2N1cyBuZXcgY2VsbFxuICAgICAgY2VsbHNbbmV3SW5kZXhdLnF1ZXJ5U2VsZWN0b3IoJy5ub3RlYm9vay1jZWxsX19oZWFkZXInKS5mb2N1cygpO1xuICAgICAgXG4gICAgICAvLyBBbm5vdW5jZSB0byBzY3JlZW4gcmVhZGVyc1xuICAgICAgY29uc3QgY2VsbFR5cGUgPSBjZWxsc1tuZXdJbmRleF0uZGF0YXNldC5jZWxsVHlwZTtcbiAgICAgIGNvbnN0IGNlbGxJbmRleCA9IGNlbGxzW25ld0luZGV4XS5kYXRhc2V0LmNlbGxJbmRleDtcbiAgICAgIGFubm91bmNlVG9TY3JlZW5SZWFkZXIoYE5hdmlnYXRlZCB0byAke2NlbGxUeXBlfSBjZWxsICR7cGFyc2VJbnQoY2VsbEluZGV4KSArIDF9YCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBnbG9iYWwga2V5Ym9hcmQgc2hvcnRjdXRzIGZvciBub3RlYm9va1xuICAgKi9cbiAgc3RhdGljIGhhbmRsZUdsb2JhbEtleWRvd24oZSwgZ2V0Rm9jdXNlZENlbGwsIGhhbmRsZUNvcHlGb3JDZWxsLCB0b2dnbGVBbGxDZWxscykge1xuICAgIC8vIEN0cmwvQ21kICsgU2hpZnQgKyBDOiBDb3B5IGN1cnJlbnQgY2VsbFxuICAgIGlmICgoZS5jdHJsS2V5IHx8IGUubWV0YUtleSkgJiYgZS5zaGlmdEtleSAmJiBlLmtleSA9PT0gJ0MnKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBjb25zdCBmb2N1c2VkQ2VsbCA9IGdldEZvY3VzZWRDZWxsKCk7XG4gICAgICBpZiAoZm9jdXNlZENlbGwpIHtcbiAgICAgICAgY29uc3QgY29weUJ0biA9IGZvY3VzZWRDZWxsLnF1ZXJ5U2VsZWN0b3IoJy5ub3RlYm9vay1jZWxsX19jb3B5LWJ0bicpO1xuICAgICAgICBpZiAoY29weUJ0bikge1xuICAgICAgICAgIGhhbmRsZUNvcHlGb3JDZWxsKGNvcHlCdG4pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ3RybC9DbWQgKyBTaGlmdCArIEU6IEV4cGFuZC9jb2xsYXBzZSBhbGwgY2VsbHNcbiAgICBpZiAoKGUuY3RybEtleSB8fCBlLm1ldGFLZXkpICYmIGUuc2hpZnRLZXkgJiYgZS5rZXkgPT09ICdFJykge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdG9nZ2xlQWxsQ2VsbHMoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IGN1cnJlbnRseSBmb2N1c2VkIGNlbGxcbiAgICovXG4gIHN0YXRpYyBnZXRGb2N1c2VkQ2VsbCgpIHtcbiAgICBjb25zdCBhY3RpdmVFbGVtZW50ID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcbiAgICByZXR1cm4gYWN0aXZlRWxlbWVudD8uY2xvc2VzdCgnLm5vdGVib29rLWNlbGwnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIGFjY2Vzc2liaWxpdHkgZmVhdHVyZXMgZm9yIG5vdGVib29rXG4gICAqL1xuICBzdGF0aWMgaW5pdGlhbGl6ZUFjY2Vzc2liaWxpdHkoZWxlbWVudCwgY2VsbENvdW50KSB7XG4gICAgLy8gQWRkIEFSSUEgbGFiZWxzIGFuZCBsYW5kbWFya3NcbiAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgncm9sZScsICdtYWluJyk7XG4gICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAnSnVweXRlciBOb3RlYm9vaycpO1xuICAgIFxuICAgIC8vIEFkZCBjZWxsIGNvdW50IHRvIHNjcmVlbiByZWFkZXJzXG4gICAgYW5ub3VuY2VUb1NjcmVlblJlYWRlcihgTm90ZWJvb2sgbG9hZGVkIHdpdGggJHtjZWxsQ291bnR9IGNlbGxzYCk7XG4gICAgXG4gICAgLy8gQWRkIGluc3RydWN0aW9ucyBmb3Igc2NyZWVuIHJlYWRlcnNcbiAgICBjb25zdCBpbnN0cnVjdGlvbnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBpbnN0cnVjdGlvbnMuY2xhc3NOYW1lID0gJ3NyLW9ubHknO1xuICAgIGluc3RydWN0aW9ucy5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGl2ZScsICdwb2xpdGUnKTtcbiAgICBpbnN0cnVjdGlvbnMudGV4dENvbnRlbnQgPSAnVXNlIGFycm93IGtleXMgb3Igai9rIHRvIG5hdmlnYXRlIGJldHdlZW4gY2VsbHMuIFByZXNzIEVudGVyIG9yIFNwYWNlIHRvIHRvZ2dsZSBjZWxsIHZpc2liaWxpdHkuIFByZXNzIEN0cmwrU2hpZnQrQyB0byBjb3B5IGNlbGwgY29udGVudC4nO1xuICAgIGVsZW1lbnQuaW5zZXJ0QmVmb3JlKGluc3RydWN0aW9ucywgZWxlbWVudC5maXJzdENoaWxkKTtcbiAgICBcbiAgICByZXR1cm4gaW5zdHJ1Y3Rpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIGNlbGwgdmlzaWJpbGl0eSBhbmltYXRpb25zIHdpdGggc3RhZ2dlcmVkIGVudHJhbmNlXG4gICAqL1xuICBzdGF0aWMgc2V0dXBBbmltYXRpb25zKGNlbGxzLCBhbmltYXRpb25EZWxheSA9IDEwMCwgYW5pbWF0aW9uc0VuYWJsZWQgPSB0cnVlKSB7XG4gICAgaWYgKCFhbmltYXRpb25zRW5hYmxlZCkgcmV0dXJuO1xuXG4gICAgLy8gU3RhZ2dlciBjZWxsIGVudHJhbmNlIGFuaW1hdGlvbnNcbiAgICBBcnJheS5mcm9tKGNlbGxzLnZhbHVlcygpKS5mb3JFYWNoKChjZWxsLCBpbmRleCkgPT4ge1xuICAgICAgY2VsbC5lbGVtZW50LnN0eWxlLmFuaW1hdGlvbkRlbGF5ID0gYCR7aW5kZXggKiBhbmltYXRpb25EZWxheX1tc2A7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRm9jdXMgc3BlY2lmaWMgY2VsbCBieSBpbmRleFxuICAgKi9cbiAgc3RhdGljIGZvY3VzQ2VsbChjZWxsSW5kZXgsIGNlbGxzKSB7XG4gICAgY29uc3QgY2VsbEVsZW1lbnRzID0gQXJyYXkuZnJvbShjZWxscy52YWx1ZXMoKSkubWFwKGNlbGwgPT4gY2VsbC5lbGVtZW50KTtcbiAgICBcbiAgICBpZiAoY2VsbEluZGV4ID49IDAgJiYgY2VsbEluZGV4IDwgY2VsbEVsZW1lbnRzLmxlbmd0aCkge1xuICAgICAgY29uc3QgdGFyZ2V0Q2VsbCA9IGNlbGxFbGVtZW50c1tjZWxsSW5kZXhdO1xuICAgICAgY29uc3QgaGVhZGVyID0gdGFyZ2V0Q2VsbC5xdWVyeVNlbGVjdG9yKCcubm90ZWJvb2stY2VsbF9faGVhZGVyJyk7XG4gICAgICBcbiAgICAgIGlmIChoZWFkZXIpIHtcbiAgICAgICAgLy8gVXBkYXRlIHRhYmluZGV4IGZvciBhbGwgY2VsbHNcbiAgICAgICAgY2VsbEVsZW1lbnRzLmZvckVhY2goKGNlbGwsIGluZGV4KSA9PiB7XG4gICAgICAgICAgY29uc3QgY2VsbEhlYWRlciA9IGNlbGwucXVlcnlTZWxlY3RvcignLm5vdGVib29rLWNlbGxfX2hlYWRlcicpO1xuICAgICAgICAgIGlmIChjZWxsSGVhZGVyKSB7XG4gICAgICAgICAgICBjZWxsSGVhZGVyLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCBpbmRleCA9PT0gY2VsbEluZGV4ID8gJzAnIDogJy0xJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEZvY3VzIHRoZSB0YXJnZXQgY2VsbFxuICAgICAgICBoZWFkZXIuZm9jdXMoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNjcm9sbCBpbnRvIHZpZXcgaWYgbmVlZGVkXG4gICAgICAgIHRhcmdldENlbGwuc2Nyb2xsSW50b1ZpZXcoeyBcbiAgICAgICAgICBiZWhhdmlvcjogJ3Ntb290aCcsIFxuICAgICAgICAgIGJsb2NrOiAnY2VudGVyJyBcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvY3VzIGZpcnN0IGNlbGxcbiAgICovXG4gIHN0YXRpYyBmb2N1c0ZpcnN0Q2VsbChjZWxscykge1xuICAgIHJldHVybiBOb3RlYm9va05hdmlnYXRpb24uZm9jdXNDZWxsKDAsIGNlbGxzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb2N1cyBsYXN0IGNlbGxcbiAgICovXG4gIHN0YXRpYyBmb2N1c0xhc3RDZWxsKGNlbGxzKSB7XG4gICAgY29uc3QgY2VsbENvdW50ID0gY2VsbHMuc2l6ZTtcbiAgICByZXR1cm4gTm90ZWJvb2tOYXZpZ2F0aW9uLmZvY3VzQ2VsbChjZWxsQ291bnQgLSAxLCBjZWxscyk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IG5leHQgZm9jdXNhYmxlIGNlbGwgaW5kZXhcbiAgICovXG4gIHN0YXRpYyBnZXROZXh0Rm9jdXNhYmxlSW5kZXgoY3VycmVudEluZGV4LCBjZWxscywgZGlyZWN0aW9uID0gMSkge1xuICAgIGNvbnN0IGNlbGxFbGVtZW50cyA9IEFycmF5LmZyb20oY2VsbHMudmFsdWVzKCkpLm1hcChjZWxsID0+IGNlbGwuZWxlbWVudCk7XG4gICAgXG4gICAgbGV0IG5leHRJbmRleCA9IGN1cnJlbnRJbmRleCArIGRpcmVjdGlvbjtcbiAgICBcbiAgICAvLyBXcmFwIGFyb3VuZCBpZiBuZWVkZWRcbiAgICBpZiAobmV4dEluZGV4ID49IGNlbGxFbGVtZW50cy5sZW5ndGgpIHtcbiAgICAgIG5leHRJbmRleCA9IDA7XG4gICAgfSBlbHNlIGlmIChuZXh0SW5kZXggPCAwKSB7XG4gICAgICBuZXh0SW5kZXggPSBjZWxsRWxlbWVudHMubGVuZ3RoIC0gMTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIG5leHRJbmRleDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCBzbW9vdGggc2Nyb2xsaW5nIGZvciBjZWxsIG5hdmlnYXRpb25cbiAgICovXG4gIHN0YXRpYyBzZXR1cFNtb290aFNjcm9sbGluZyhlbGVtZW50KSB7XG4gICAgLy8gQWRkIENTUyBzY3JvbGwgYmVoYXZpb3IgaWYgbm90IGFscmVhZHkgc2V0XG4gICAgaWYgKCFlbGVtZW50LnN0eWxlLnNjcm9sbEJlaGF2aW9yKSB7XG4gICAgICBlbGVtZW50LnN0eWxlLnNjcm9sbEJlaGF2aW9yID0gJ3Ntb290aCc7XG4gICAgfVxuICB9XG5cblxufVxuXG4vLyBBdXRvLXJlZ2lzdGVyIGNvbXBvbmVudFxuaW1wb3J0IENvbXBvbmVudE1hbmFnZXIgZnJvbSAnLi4vLi4vY29yZS9Db21wb25lbnRNYW5hZ2VyLmpzJztcbkNvbXBvbmVudE1hbmFnZXIucmVnaXN0ZXIoJ25vdGVib29rLW5hdmlnYXRpb24nLCBOb3RlYm9va05hdmlnYXRpb24pOyIsICIvKipcbiAqIE5vdGVib29rU3RhdGUgQ29tcG9uZW50XG4gKiBIYW5kbGVzIHN0YXRlIG1hbmFnZW1lbnQgYW5kIHBlcnNpc3RlbmNlIGZvciBub3RlYm9vayB2aWV3ZXJcbiAqL1xuXG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICcuLi8uLi9jb3JlL0NvbXBvbmVudC5qcyc7XG5pbXBvcnQgeyBsb2NhbFN0b3JhZ2UgfSBmcm9tICcuLi8uLi91dGlscy9pbmRleC5qcyc7XG5pbXBvcnQgeyBhbm5vdW5jZVRvU2NyZWVuUmVhZGVyIH0gZnJvbSAnLi4vLi4vdXRpbHMvYWNjZXNzaWJpbGl0eS5qcyc7XG5cbmV4cG9ydCBjbGFzcyBOb3RlYm9va1N0YXRlIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoY29uZmlnID0ge30pIHtcbiAgICBzdXBlcih7XG4gICAgICBuYW1lOiAnbm90ZWJvb2stc3RhdGUnLFxuICAgICAgc2VsZWN0b3I6IGNvbmZpZy5zZWxlY3RvciB8fCAnLm5vdGVib29rJyxcbiAgICAgIC4uLmNvbmZpZ1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNhdmUgbm90ZWJvb2sgc3RhdGUgdG8gbG9jYWxTdG9yYWdlXG4gICAqL1xuICBzdGF0aWMgc2F2ZVN0YXRlKHN0b3JhZ2VLZXksIGNvbGxhcHNlZENlbGxzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN0YXRlID0ge1xuICAgICAgICBjb2xsYXBzZWRDZWxsczogQXJyYXkuZnJvbShjb2xsYXBzZWRDZWxscyksXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgbG9jYWxTdG9yYWdlLnNldChzdG9yYWdlS2V5LCBzdGF0ZSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybignTm90ZWJvb2tTdGF0ZTogRmFpbGVkIHRvIHNhdmUgc3RhdGU6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBMb2FkIG5vdGVib29rIHN0YXRlIGZyb20gbG9jYWxTdG9yYWdlXG4gICAqL1xuICBzdGF0aWMgbG9hZFN0b3JlZFN0YXRlKHN0b3JhZ2VLZXksIGNlbGxzLCBjb2xsYXBzZUNlbGwpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3RhdGUgPSBsb2NhbFN0b3JhZ2UuZ2V0KHN0b3JhZ2VLZXkpO1xuICAgICAgaWYgKCFzdGF0ZSkgcmV0dXJuO1xuICAgICAgXG4gICAgICAvLyBBcHBseSBjb2xsYXBzZWQgc3RhdGVzXG4gICAgICBpZiAoc3RhdGUuY29sbGFwc2VkQ2VsbHMpIHtcbiAgICAgICAgc3RhdGUuY29sbGFwc2VkQ2VsbHMuZm9yRWFjaChjZWxsSWQgPT4ge1xuICAgICAgICAgIGlmIChjZWxscy5oYXMoY2VsbElkKSkge1xuICAgICAgICAgICAgY29sbGFwc2VDZWxsKGNlbGxJZCwgZmFsc2UpOyAvLyBmYWxzZSA9IGRvbid0IHNhdmUgc3RhdGUgYWdhaW5cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ05vdGVib29rU3RhdGU6IEZhaWxlZCB0byBsb2FkIHN0YXRlOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVG9nZ2xlIGNlbGwgY29sbGFwc2VkIHN0YXRlXG4gICAqL1xuICBzdGF0aWMgdG9nZ2xlQ2VsbChjZWxsSWQsIGNlbGxzLCBwcmVmZXJlbmNlcywgc2F2ZVN0YXRlLCBlbWl0KSB7XG4gICAgY29uc3QgY2VsbCA9IGNlbGxzLmdldChjZWxsSWQpO1xuICAgIGlmICghY2VsbCkgcmV0dXJuO1xuXG4gICAgY29uc3QgaXNDb2xsYXBzZWQgPSBjZWxsLmNvbGxhcHNlZDtcbiAgICBcbiAgICBpZiAoaXNDb2xsYXBzZWQpIHtcbiAgICAgIE5vdGVib29rU3RhdGUuZXhwYW5kQ2VsbChjZWxsSWQsIGNlbGxzLCBwcmVmZXJlbmNlcywgc2F2ZVN0YXRlLCBlbWl0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgTm90ZWJvb2tTdGF0ZS5jb2xsYXBzZUNlbGwoY2VsbElkLCBjZWxscywgcHJlZmVyZW5jZXMsIHNhdmVTdGF0ZSwgZW1pdCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENvbGxhcHNlIGNlbGxcbiAgICovXG4gIHN0YXRpYyBjb2xsYXBzZUNlbGwoY2VsbElkLCBjZWxscywgcHJlZmVyZW5jZXMsIHNhdmVTdGF0ZSwgZW1pdCwgc2hvdWxkU2F2ZSA9IHRydWUpIHtcbiAgICBjb25zdCBjZWxsID0gY2VsbHMuZ2V0KGNlbGxJZCk7XG4gICAgaWYgKCFjZWxsIHx8IGNlbGwuY29sbGFwc2VkKSByZXR1cm47XG5cbiAgICBjZWxsLmNvbGxhcHNlZCA9IHRydWU7XG4gICAgcHJlZmVyZW5jZXMuY29sbGFwc2VkQ2VsbHMuYWRkKGNlbGxJZCk7XG4gICAgXG4gICAgY29uc3QgeyBlbGVtZW50IH0gPSBjZWxsO1xuICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnbm90ZWJvb2stY2VsbC0tY29sbGFwc2VkJyk7XG4gICAgXG4gICAgY29uc3QgaGVhZGVyID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubm90ZWJvb2stY2VsbF9faGVhZGVyJyk7XG4gICAgaGVhZGVyLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICdmYWxzZScpO1xuICAgIFxuICAgIGFubm91bmNlVG9TY3JlZW5SZWFkZXIoJ0NlbGwgY29sbGFwc2VkJyk7XG4gICAgXG4gICAgaWYgKHNob3VsZFNhdmUpIHtcbiAgICAgIHNhdmVTdGF0ZSgpO1xuICAgIH1cbiAgICBcbiAgICBlbWl0KCdub3RlYm9vazpjZWxsLWNvbGxhcHNlZCcsIHsgY2VsbElkIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4cGFuZCBjZWxsXG4gICAqL1xuICBzdGF0aWMgZXhwYW5kQ2VsbChjZWxsSWQsIGNlbGxzLCBwcmVmZXJlbmNlcywgc2F2ZVN0YXRlLCBlbWl0LCBzaG91bGRTYXZlID0gdHJ1ZSkge1xuICAgIGNvbnN0IGNlbGwgPSBjZWxscy5nZXQoY2VsbElkKTtcbiAgICBpZiAoIWNlbGwgfHwgIWNlbGwuY29sbGFwc2VkKSByZXR1cm47XG5cbiAgICBjZWxsLmNvbGxhcHNlZCA9IGZhbHNlO1xuICAgIHByZWZlcmVuY2VzLmNvbGxhcHNlZENlbGxzLmRlbGV0ZShjZWxsSWQpO1xuICAgIFxuICAgIGNvbnN0IHsgZWxlbWVudCB9ID0gY2VsbDtcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ25vdGVib29rLWNlbGwtLWNvbGxhcHNlZCcpO1xuICAgIFxuICAgIGNvbnN0IGhlYWRlciA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLm5vdGVib29rLWNlbGxfX2hlYWRlcicpO1xuICAgIGhlYWRlci5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAndHJ1ZScpO1xuICAgIFxuICAgIGFubm91bmNlVG9TY3JlZW5SZWFkZXIoJ0NlbGwgZXhwYW5kZWQnKTtcbiAgICBcbiAgICBpZiAoc2hvdWxkU2F2ZSkge1xuICAgICAgc2F2ZVN0YXRlKCk7XG4gICAgfVxuICAgIFxuICAgIGVtaXQoJ25vdGVib29rOmNlbGwtZXhwYW5kZWQnLCB7IGNlbGxJZCB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUb2dnbGUgYWxsIGNlbGxzXG4gICAqL1xuICBzdGF0aWMgdG9nZ2xlQWxsQ2VsbHMoY2VsbHMsIHByZWZlcmVuY2VzLCBzYXZlU3RhdGUsIGVtaXQpIHtcbiAgICBjb25zdCBoYXNDb2xsYXBzZWQgPSBwcmVmZXJlbmNlcy5jb2xsYXBzZWRDZWxscy5zaXplID4gMDtcbiAgICBcbiAgICBpZiAoaGFzQ29sbGFwc2VkKSB7XG4gICAgICBOb3RlYm9va1N0YXRlLmV4cGFuZEFsbENlbGxzKGNlbGxzLCBwcmVmZXJlbmNlcywgc2F2ZVN0YXRlLCBlbWl0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgTm90ZWJvb2tTdGF0ZS5jb2xsYXBzZUFsbENlbGxzKGNlbGxzLCBwcmVmZXJlbmNlcywgc2F2ZVN0YXRlLCBlbWl0KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRXhwYW5kIGFsbCBjZWxsc1xuICAgKi9cbiAgc3RhdGljIGV4cGFuZEFsbENlbGxzKGNlbGxzLCBwcmVmZXJlbmNlcywgc2F2ZVN0YXRlLCBlbWl0KSB7XG4gICAgQXJyYXkuZnJvbShjZWxscy5rZXlzKCkpLmZvckVhY2goY2VsbElkID0+IHtcbiAgICAgIE5vdGVib29rU3RhdGUuZXhwYW5kQ2VsbChjZWxsSWQsIGNlbGxzLCBwcmVmZXJlbmNlcywgKCkgPT4ge30sIGVtaXQsIGZhbHNlKTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBTYXZlIHN0YXRlIG9uY2UgYWZ0ZXIgYWxsIG9wZXJhdGlvbnNcbiAgICBzYXZlU3RhdGUoKTtcbiAgICBcbiAgICBhbm5vdW5jZVRvU2NyZWVuUmVhZGVyKCdBbGwgY2VsbHMgZXhwYW5kZWQnKTtcbiAgICBlbWl0KCdub3RlYm9vazphbGwtY2VsbHMtZXhwYW5kZWQnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb2xsYXBzZSBhbGwgY2VsbHNcbiAgICovXG4gIHN0YXRpYyBjb2xsYXBzZUFsbENlbGxzKGNlbGxzLCBwcmVmZXJlbmNlcywgc2F2ZVN0YXRlLCBlbWl0LCBzaG91bGRNYWtlQ29sbGFwc2libGUpIHtcbiAgICBBcnJheS5mcm9tKGNlbGxzLmtleXMoKSkuZm9yRWFjaChjZWxsSWQgPT4ge1xuICAgICAgY29uc3QgY2VsbCA9IGNlbGxzLmdldChjZWxsSWQpO1xuICAgICAgaWYgKHNob3VsZE1ha2VDb2xsYXBzaWJsZShjZWxsLnR5cGUpKSB7XG4gICAgICAgIE5vdGVib29rU3RhdGUuY29sbGFwc2VDZWxsKGNlbGxJZCwgY2VsbHMsIHByZWZlcmVuY2VzLCAoKSA9PiB7fSwgZW1pdCwgZmFsc2UpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIC8vIFNhdmUgc3RhdGUgb25jZSBhZnRlciBhbGwgb3BlcmF0aW9uc1xuICAgIHNhdmVTdGF0ZSgpO1xuICAgIFxuICAgIGFubm91bmNlVG9TY3JlZW5SZWFkZXIoJ0FsbCBjZWxscyBjb2xsYXBzZWQnKTtcbiAgICBlbWl0KCdub3RlYm9vazphbGwtY2VsbHMtY29sbGFwc2VkJyk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IG5vdGVib29rIHN0YXRpc3RpY3NcbiAgICovXG4gIHN0YXRpYyBnZXRTdGF0cyhjZWxscywgcHJlZmVyZW5jZXMsIG5vdGVib29rSWQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY2VsbENvdW50OiBjZWxscy5zaXplLFxuICAgICAgY29sbGFwc2VkQ291bnQ6IHByZWZlcmVuY2VzLmNvbGxhcHNlZENlbGxzLnNpemUsXG4gICAgICBjZWxsVHlwZXM6IEFycmF5LmZyb20oY2VsbHMudmFsdWVzKCkpLnJlZHVjZSgoYWNjLCBjZWxsKSA9PiB7XG4gICAgICAgIGFjY1tjZWxsLnR5cGVdID0gKGFjY1tjZWxsLnR5cGVdIHx8IDApICsgMTtcbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgIH0sIHt9KSxcbiAgICAgIG5vdGVib29rSWQ6IG5vdGVib29rSWRcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc2V0IG5vdGVib29rIHN0YXRlXG4gICAqL1xuICBzdGF0aWMgcmVzZXRTdGF0ZShjZWxscywgcHJlZmVyZW5jZXMsIHNhdmVTdGF0ZSwgZW1pdCkge1xuICAgIC8vIEV4cGFuZCBhbGwgY2VsbHNcbiAgICBBcnJheS5mcm9tKGNlbGxzLmtleXMoKSkuZm9yRWFjaChjZWxsSWQgPT4ge1xuICAgICAgY29uc3QgY2VsbCA9IGNlbGxzLmdldChjZWxsSWQpO1xuICAgICAgaWYgKGNlbGwgJiYgY2VsbC5jb2xsYXBzZWQpIHtcbiAgICAgICAgTm90ZWJvb2tTdGF0ZS5leHBhbmRDZWxsKGNlbGxJZCwgY2VsbHMsIHByZWZlcmVuY2VzLCAoKSA9PiB7fSwgZW1pdCwgZmFsc2UpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIC8vIENsZWFyIHByZWZlcmVuY2VzXG4gICAgcHJlZmVyZW5jZXMuY29sbGFwc2VkQ2VsbHMuY2xlYXIoKTtcbiAgICBcbiAgICAvLyBTYXZlIGNsZWFyZWQgc3RhdGVcbiAgICBzYXZlU3RhdGUoKTtcbiAgICBcbiAgICBhbm5vdW5jZVRvU2NyZWVuUmVhZGVyKCdOb3RlYm9vayBzdGF0ZSByZXNldCcpO1xuICAgIGVtaXQoJ25vdGVib29rOnN0YXRlLXJlc2V0Jyk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGNlbGwgYnkgSURcbiAgICovXG4gIHN0YXRpYyBnZXRDZWxsKGNlbGxJZCwgY2VsbHMpIHtcbiAgICByZXR1cm4gY2VsbHMuZ2V0KGNlbGxJZCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGFsbCBjb2xsYXBzZWQgY2VsbHNcbiAgICovXG4gIHN0YXRpYyBnZXRDb2xsYXBzZWRDZWxscyhwcmVmZXJlbmNlcykge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHByZWZlcmVuY2VzLmNvbGxhcHNlZENlbGxzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYWxsIGV4cGFuZGVkIGNlbGxzXG4gICAqL1xuICBzdGF0aWMgZ2V0RXhwYW5kZWRDZWxscyhjZWxscywgcHJlZmVyZW5jZXMpIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShjZWxscy5rZXlzKCkpLmZpbHRlcihjZWxsSWQgPT4gXG4gICAgICAhcHJlZmVyZW5jZXMuY29sbGFwc2VkQ2VsbHMuaGFzKGNlbGxJZClcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGNlbGwgaXMgY29sbGFwc2VkXG4gICAqL1xuICBzdGF0aWMgaXNDZWxsQ29sbGFwc2VkKGNlbGxJZCwgcHJlZmVyZW5jZXMpIHtcbiAgICByZXR1cm4gcHJlZmVyZW5jZXMuY29sbGFwc2VkQ2VsbHMuaGFzKGNlbGxJZCk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYWxsIGNlbGxzIGFyZSBjb2xsYXBzZWRcbiAgICovXG4gIHN0YXRpYyBhcmVBbGxDZWxsc0NvbGxhcHNlZChjZWxscywgcHJlZmVyZW5jZXMpIHtcbiAgICBjb25zdCBjb2xsYXBzaWJsZUNlbGxzID0gQXJyYXkuZnJvbShjZWxscy52YWx1ZXMoKSkuZmlsdGVyKGNlbGwgPT4gXG4gICAgICBOb3RlYm9va1N0YXRlLnNob3VsZE1ha2VDb2xsYXBzaWJsZShjZWxsLnR5cGUpXG4gICAgKTtcbiAgICBcbiAgICByZXR1cm4gY29sbGFwc2libGVDZWxscy5ldmVyeShjZWxsID0+IFxuICAgICAgcHJlZmVyZW5jZXMuY29sbGFwc2VkQ2VsbHMuaGFzKGNlbGwuY2VsbElkKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYWxsIGNlbGxzIGFyZSBleHBhbmRlZFxuICAgKi9cbiAgc3RhdGljIGFyZUFsbENlbGxzRXhwYW5kZWQocHJlZmVyZW5jZXMpIHtcbiAgICByZXR1cm4gcHJlZmVyZW5jZXMuY29sbGFwc2VkQ2VsbHMuc2l6ZSA9PT0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmUgaWYgY2VsbCB0eXBlIHNob3VsZCBiZSBjb2xsYXBzaWJsZVxuICAgKi9cbiAgc3RhdGljIHNob3VsZE1ha2VDb2xsYXBzaWJsZShjZWxsVHlwZSkge1xuICAgIC8vIEFsbCBjZWxsIHR5cGVzIGNhbiBiZSBjb2xsYXBzaWJsZSBieSBkZWZhdWx0XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIHN0YXRlIHNuYXBzaG90IGZvciB1bmRvL3JlZG8gZnVuY3Rpb25hbGl0eVxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZVNuYXBzaG90KGNlbGxzLCBwcmVmZXJlbmNlcykge1xuICAgIHJldHVybiB7XG4gICAgICBjb2xsYXBzZWRDZWxsczogbmV3IFNldChwcmVmZXJlbmNlcy5jb2xsYXBzZWRDZWxscyksXG4gICAgICBjZWxsU3RhdGVzOiBuZXcgTWFwKEFycmF5LmZyb20oY2VsbHMuZW50cmllcygpKS5tYXAoKFtpZCwgY2VsbF0pID0+IFtcbiAgICAgICAgaWQsIFxuICAgICAgICB7IFxuICAgICAgICAgIGNvbGxhcHNlZDogY2VsbC5jb2xsYXBzZWQsXG4gICAgICAgICAgdHlwZTogY2VsbC50eXBlLFxuICAgICAgICAgIGluZGV4OiBjZWxsLmluZGV4XG4gICAgICAgIH1cbiAgICAgIF0pKSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogUmVzdG9yZSBmcm9tIHN0YXRlIHNuYXBzaG90XG4gICAqL1xuICBzdGF0aWMgcmVzdG9yZVNuYXBzaG90KHNuYXBzaG90LCBjZWxscywgcHJlZmVyZW5jZXMsIHNhdmVTdGF0ZSwgZW1pdCkge1xuICAgIGlmICghc25hcHNob3QpIHJldHVybiBmYWxzZTtcblxuICAgIHRyeSB7XG4gICAgICAvLyBSZXN0b3JlIGNvbGxhcHNlZCBjZWxscyBzZXRcbiAgICAgIHByZWZlcmVuY2VzLmNvbGxhcHNlZENlbGxzID0gbmV3IFNldChzbmFwc2hvdC5jb2xsYXBzZWRDZWxscyk7XG4gICAgICBcbiAgICAgIC8vIFJlc3RvcmUgaW5kaXZpZHVhbCBjZWxsIHN0YXRlc1xuICAgICAgc25hcHNob3QuY2VsbFN0YXRlcy5mb3JFYWNoKChjZWxsU3RhdGUsIGNlbGxJZCkgPT4ge1xuICAgICAgICBjb25zdCBjZWxsID0gY2VsbHMuZ2V0KGNlbGxJZCk7XG4gICAgICAgIGlmIChjZWxsKSB7XG4gICAgICAgICAgY29uc3Qgc2hvdWxkQmVDb2xsYXBzZWQgPSBzbmFwc2hvdC5jb2xsYXBzZWRDZWxscy5oYXMoY2VsbElkKTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoc2hvdWxkQmVDb2xsYXBzZWQgJiYgIWNlbGwuY29sbGFwc2VkKSB7XG4gICAgICAgICAgICBOb3RlYm9va1N0YXRlLmNvbGxhcHNlQ2VsbChjZWxsSWQsIGNlbGxzLCBwcmVmZXJlbmNlcywgKCkgPT4ge30sIGVtaXQsIGZhbHNlKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKCFzaG91bGRCZUNvbGxhcHNlZCAmJiBjZWxsLmNvbGxhcHNlZCkge1xuICAgICAgICAgICAgTm90ZWJvb2tTdGF0ZS5leHBhbmRDZWxsKGNlbGxJZCwgY2VsbHMsIHByZWZlcmVuY2VzLCAoKSA9PiB7fSwgZW1pdCwgZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFNhdmUgcmVzdG9yZWQgc3RhdGVcbiAgICAgIHNhdmVTdGF0ZSgpO1xuICAgICAgXG4gICAgICBhbm5vdW5jZVRvU2NyZWVuUmVhZGVyKCdOb3RlYm9vayBzdGF0ZSByZXN0b3JlZCcpO1xuICAgICAgZW1pdCgnbm90ZWJvb2s6c3RhdGUtcmVzdG9yZWQnLCB7IHNuYXBzaG90IH0pO1xuICAgICAgXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignTm90ZWJvb2tTdGF0ZTogRmFpbGVkIHRvIHJlc3RvcmUgc25hcHNob3Q6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxufVxuXG4vLyBBdXRvLXJlZ2lzdGVyIGNvbXBvbmVudFxuaW1wb3J0IENvbXBvbmVudE1hbmFnZXIgZnJvbSAnLi4vLi4vY29yZS9Db21wb25lbnRNYW5hZ2VyLmpzJztcbkNvbXBvbmVudE1hbmFnZXIucmVnaXN0ZXIoJ25vdGVib29rLXN0YXRlJywgTm90ZWJvb2tTdGF0ZSk7IiwgIi8qKlxuICogTm90ZWJvb2tWaWV3ZXIgQ29tcG9uZW50IC0gTWFpbiBPcmNoZXN0cmF0b3JcbiAqIE1vZGVybiwgYWNjZXNzaWJsZSBKdXB5dGVyIG5vdGVib29rIHZpZXdlciB3aXRoIGludGVyYWN0aXZlIGZlYXR1cmVzXG4gKiBTcGxpdCBpbnRvIGZvY3VzZWQgY29tcG9uZW50cyBmb3IgYmV0dGVyIG1haW50YWluYWJpbGl0eVxuICovXG5cbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJy4uLy4uL2NvcmUvQ29tcG9uZW50LmpzJztcbmltcG9ydCB7IGxvY2FsU3RvcmFnZSB9IGZyb20gJy4uLy4uL3V0aWxzL2luZGV4LmpzJztcbmltcG9ydCB7IE5vdGVib29rQ2VsbCB9IGZyb20gJy4vTm90ZWJvb2tDZWxsLmpzJztcbmltcG9ydCB7IE5vdGVib29rTmF2aWdhdGlvbiB9IGZyb20gJy4vTm90ZWJvb2tOYXZpZ2F0aW9uLmpzJztcbmltcG9ydCB7IE5vdGVib29rU3RhdGUgfSBmcm9tICcuL05vdGVib29rU3RhdGUuanMnO1xuXG5leHBvcnQgY2xhc3MgTm90ZWJvb2tWaWV3ZXIgZXh0ZW5kcyBDb21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcihjb25maWcgPSB7fSkge1xuICAgIHN1cGVyKHtcbiAgICAgIG5hbWU6ICdub3RlYm9vay12aWV3ZXInLFxuICAgICAgc2VsZWN0b3I6IGNvbmZpZy5zZWxlY3RvciB8fCAnLm5vdGVib29rJyxcbiAgICAgIC4uLmNvbmZpZ1xuICAgIH0pO1xuXG4gICAgLy8gQ29tcG9uZW50IHN0YXRlXG4gICAgdGhpcy5jZWxscyA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLnByZWZlcmVuY2VzID0ge1xuICAgICAgY29sbGFwc2VkQ2VsbHM6IG5ldyBTZXQoKSxcbiAgICAgIGF1dG9Db2xsYXBzZTogY29uZmlnLmF1dG9Db2xsYXBzZSB8fCBmYWxzZSxcbiAgICAgIGFuaW1hdGlvbnNFbmFibGVkOiAhd2luZG93Lm1hdGNoTWVkaWEoJyhwcmVmZXJzLXJlZHVjZWQtbW90aW9uOiByZWR1Y2UpJykubWF0Y2hlcyxcbiAgICAgIGNvcHlGZWVkYmFjazogY29uZmlnLmNvcHlGZWVkYmFjayAhPT0gZmFsc2VcbiAgICB9O1xuXG4gICAgLy8gQ29uZmlndXJhdGlvbiBvcHRpb25zXG4gICAgdGhpcy5vcHRpb25zID0ge1xuICAgICAgc3RvcmFnZUtleTogJ25vdGVib29rLXZpZXdlci1zdGF0ZScsXG4gICAgICBjb3B5U3VjY2Vzc0R1cmF0aW9uOiAyMDAwLFxuICAgICAgY29weUVycm9yRHVyYXRpb246IDMwMDAsXG4gICAgICBjZWxsQW5pbWF0aW9uRGVsYXk6IDEwMCxcbiAgICAgIC4uLnRoaXMub3B0aW9uc1xuICAgIH07XG5cbiAgICAvLyBFdmVudCBjbGVhbnVwIG5vdyBoYW5kbGVkIGF1dG9tYXRpY2FsbHkgYnkgQWJvcnRDb250cm9sbGVyXG4gICAgXG4gICAgLy8gQ2hpbGQgY29tcG9uZW50c1xuICAgIHRoaXMuY2VsbE1hbmFnZXIgPSBudWxsO1xuICAgIHRoaXMubmF2aWdhdGlvbk1hbmFnZXIgPSBudWxsO1xuICAgIHRoaXMuc3RhdGVNYW5hZ2VyID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIHRoZSBub3RlYm9vayB2aWV3ZXJcbiAgICovXG4gIGFzeW5jIG9uSW5pdCgpIHtcbiAgICBpZiAoIXRoaXMuZWxlbWVudCkge1xuICAgICAgY29uc29sZS53YXJuKCdOb3RlYm9va1ZpZXdlcjogTm8gbm90ZWJvb2sgZWxlbWVudCBmb3VuZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFx1RDgzRFx1REU4MCBORVc6IFNob3cgbG9hZGluZyBzdGF0ZSBkdXJpbmcgaW5pdGlhbGl6YXRpb25cbiAgICB0aGlzLnNldExvYWRpbmdTdGF0ZSh0cnVlKTtcbiAgICB0aGlzLnVwZGF0ZUNvbXBvbmVudFN0YXRlKCdpbml0aWFsaXppbmcnKTtcblxuICAgIGF3YWl0IHRoaXMuc2V0dXBOb3RlYm9vaygpO1xuICAgIHRoaXMuY2FjaGVFbGVtZW50cygpO1xuICAgIHRoaXMuc2V0dXBFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMubG9hZFN0b3JlZFN0YXRlKCk7XG4gICAgdGhpcy5pbml0aWFsaXplQWNjZXNzaWJpbGl0eSgpO1xuICAgIHRoaXMuc2V0dXBBbmltYXRpb25zKCk7XG4gICAgXG4gICAgLy8gXHVEODNEXHVERTgwIE5FVzogSW5pdGlhbGl6YXRpb24gY29tcGxldGUgLSByZW1vdmUgbG9hZGluZyBhbmQgc2V0IHJlYWR5XG4gICAgdGhpcy5zZXRMb2FkaW5nU3RhdGUoZmFsc2UpO1xuICAgIHRoaXMudXBkYXRlQ29tcG9uZW50U3RhdGUoJ3JlYWR5Jyk7XG4gICAgXG4gICAgdGhpcy5lbWl0KCdub3RlYm9vazppbml0aWFsaXplZCcsIHsgXG4gICAgICBjZWxsQ291bnQ6IHRoaXMuY2VsbHMuc2l6ZSxcbiAgICAgIG5vdGVib29rSWQ6IHRoaXMuZ2V0Tm90ZWJvb2tJZCgpXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0dXAgdGhlIG5vdGVib29rIHN0cnVjdHVyZSBhbmQgaWRlbnRpZnkgY2VsbHNcbiAgICovXG4gIGFzeW5jIHNldHVwTm90ZWJvb2soKSB7XG4gICAgLy8gQWRkIG5vdGVib29rIGNvbnRhaW5lciBjbGFzc2VzXG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ25vdGVib29rJyk7XG4gICAgXG4gICAgLy8gRmluZCBhbmQgc2V0dXAgY2VsbHNcbiAgICBjb25zdCBjZWxsRWxlbWVudHMgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtY2VsbC10eXBlXSwgLm5vdGVib29rLWNlbGwnKTtcbiAgICBcbiAgICBjZWxsRWxlbWVudHMuZm9yRWFjaCgoY2VsbEVsZW1lbnQsIGluZGV4KSA9PiB7XG4gICAgICB0aGlzLnNldHVwQ2VsbChjZWxsRWxlbWVudCwgaW5kZXgpO1xuICAgIH0pO1xuXG4gICAgLy8gU2V0dXAga2V5Ym9hcmQgbmF2aWdhdGlvblxuICAgIHRoaXMuc2V0dXBLZXlib2FyZE5hdmlnYXRpb24oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCBpbmRpdmlkdWFsIGNlbGwgdXNpbmcgTm90ZWJvb2tDZWxsIGNvbXBvbmVudFxuICAgKi9cbiAgc2V0dXBDZWxsKGNlbGxFbGVtZW50LCBpbmRleCkge1xuICAgIGNvbnN0IHsgY2VsbElkLCBjZWxsRGF0YSB9ID0gTm90ZWJvb2tDZWxsLnNldHVwQ2VsbChjZWxsRWxlbWVudCwgaW5kZXgsIHRoaXMpO1xuICAgIHRoaXMuY2VsbHMuc2V0KGNlbGxJZCwgY2VsbERhdGEpO1xuICB9XG5cblxuXG4gIC8qKlxuICAgKiBHZXQgbm90ZWJvb2sgSUQgZnJvbSBlbGVtZW50IG9yIGdlbmVyYXRlIG9uZVxuICAgKi9cbiAgZ2V0Tm90ZWJvb2tJZCgpIHtcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50LmlkIHx8IFxuICAgICAgICAgICB0aGlzLmVsZW1lbnQuZGF0YXNldC5ub3RlYm9va0lkIHx8IFxuICAgICAgICAgICBgbm90ZWJvb2stJHtEYXRlLm5vdygpfWA7XG4gIH1cblxuXG5cbiAgLyoqXG4gICAqIENhY2hlIERPTSBlbGVtZW50c1xuICAgKi9cbiAgY2FjaGVFbGVtZW50cygpIHtcbiAgICB0aGlzLmNvcHlCdXR0b25zID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5ub3RlYm9vay1jZWxsX19jb3B5LWJ0bicpO1xuICAgIHRoaXMudG9nZ2xlQnV0dG9ucyA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubm90ZWJvb2stY2VsbF9fdG9nZ2xlJyk7XG4gICAgdGhpcy5jZWxsSGVhZGVycyA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubm90ZWJvb2stY2VsbF9faGVhZGVyW3JvbGU9XCJidXR0b25cIl0nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCBldmVudCBsaXN0ZW5lcnNcbiAgICovXG4gIHNldHVwRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgLy8gQ29weSBidXR0b24gZXZlbnRzXG4gICAgdGhpcy5jb3B5QnV0dG9ucy5mb3JFYWNoKGJ0biA9PiB7XG4gICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoYnRuLCAnY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB0aGlzLmhhbmRsZUNvcHlDbGljayhidG4pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyBUb2dnbGUgYnV0dG9uIGV2ZW50c1xuICAgIHRoaXMudG9nZ2xlQnV0dG9ucy5mb3JFYWNoKGJ0biA9PiB7XG4gICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoYnRuLCAnY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB0aGlzLmhhbmRsZVRvZ2dsZUNsaWNrKGJ0bik7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIEhlYWRlciBjbGljayBldmVudHMgZm9yIGNvbGxhcHNpYmxlIGNlbGxzXG4gICAgdGhpcy5jZWxsSGVhZGVycy5mb3JFYWNoKGhlYWRlciA9PiB7XG4gICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoaGVhZGVyLCAnY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBpZiAoZS50YXJnZXQuY2xvc2VzdCgnLm5vdGVib29rLWNlbGxfX3RvZ2dsZSwgLm5vdGVib29rLWNlbGxfX2NvcHktYnRuJykpIHtcbiAgICAgICAgICByZXR1cm47IC8vIERvbid0IGhhbmRsZSBpZiBjbGlja2luZyBvbiBidXR0b25zXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oYW5kbGVIZWFkZXJDbGljayhoZWFkZXIpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEtleWJvYXJkIGV2ZW50cyBmb3IgaGVhZGVyc1xuICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGhlYWRlciwgJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicgfHwgZS5rZXkgPT09ICcgJykge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB0aGlzLmhhbmRsZUhlYWRlckNsaWNrKGhlYWRlcik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gR2xvYmFsIGtleWJvYXJkIHNob3J0Y3V0c1xuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihkb2N1bWVudCwgJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgICAgaWYgKHRoaXMuZWxlbWVudC5jb250YWlucyhlLnRhcmdldCkpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVHbG9iYWxLZXlkb3duKGUpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gUHJlZmVyZW5jZSBjaGFuZ2UgbGlzdGVuZXJzXG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgd2luZG93Lm1hdGNoTWVkaWEoJyhwcmVmZXJzLXJlZHVjZWQtbW90aW9uOiByZWR1Y2UpJyksXG4gICAgICAnY2hhbmdlJyxcbiAgICAgIChlKSA9PiB7XG4gICAgICAgIHRoaXMucHJlZmVyZW5jZXMuYW5pbWF0aW9uc0VuYWJsZWQgPSAhZS5tYXRjaGVzO1xuICAgICAgfVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIGNvcHkgYnV0dG9uIGNsaWNrIHVzaW5nIE5vdGVib29rQ2VsbCBjb21wb25lbnRcbiAgICovXG4gIGFzeW5jIGhhbmRsZUNvcHlDbGljayhidXR0b24pIHtcbiAgICBjb25zdCBjZWxsSWQgPSBidXR0b24uZGF0YXNldC5jZWxsSWQ7XG4gICAgY29uc3QgY2VsbCA9IHRoaXMuY2VsbHMuZ2V0KGNlbGxJZCk7XG4gICAgXG4gICAgcmV0dXJuIE5vdGVib29rQ2VsbC5oYW5kbGVDb3B5Q2xpY2soXG4gICAgICBidXR0b24sIFxuICAgICAgY2VsbCwgXG4gICAgICBOb3RlYm9va0NlbGwuY2xlYW5Ob3RlYm9va0NvZGUsXG4gICAgICAoZXZlbnQsIGRhdGEpID0+IHRoaXMuZW1pdChldmVudCwgZGF0YSlcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSB0b2dnbGUgYnV0dG9uIGNsaWNrXG4gICAqL1xuICBoYW5kbGVUb2dnbGVDbGljayhidXR0b24pIHtcbiAgICBjb25zdCBjZWxsSWQgPSBidXR0b24uZGF0YXNldC5jZWxsSWQ7XG4gICAgdGhpcy50b2dnbGVDZWxsKGNlbGxJZCk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIGhlYWRlciBjbGljayBmb3IgY29sbGFwc2libGUgY2VsbHNcbiAgICovXG4gIGhhbmRsZUhlYWRlckNsaWNrKGhlYWRlcikge1xuICAgIGNvbnN0IGNlbGxFbGVtZW50ID0gaGVhZGVyLmNsb3Nlc3QoJy5ub3RlYm9vay1jZWxsJyk7XG4gICAgY29uc3QgY2VsbElkID0gY2VsbEVsZW1lbnQuZGF0YXNldC5jZWxsSWQ7XG4gICAgXG4gICAgaWYgKGNlbGxFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnbm90ZWJvb2stY2VsbC0tY29sbGFwc2libGUnKSkge1xuICAgICAgdGhpcy50b2dnbGVDZWxsKGNlbGxJZCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBnbG9iYWwga2V5Ym9hcmQgc2hvcnRjdXRzIHVzaW5nIE5vdGVib29rTmF2aWdhdGlvblxuICAgKi9cbiAgaGFuZGxlR2xvYmFsS2V5ZG93bihlKSB7XG4gICAgTm90ZWJvb2tOYXZpZ2F0aW9uLmhhbmRsZUdsb2JhbEtleWRvd24oXG4gICAgICBlLFxuICAgICAgKCkgPT4gTm90ZWJvb2tOYXZpZ2F0aW9uLmdldEZvY3VzZWRDZWxsKCksXG4gICAgICAoYnV0dG9uKSA9PiB0aGlzLmhhbmRsZUNvcHlDbGljayhidXR0b24pLFxuICAgICAgKCkgPT4gdGhpcy50b2dnbGVBbGxDZWxscygpXG4gICAgKTtcbiAgfVxuXG5cblxuICAvKipcbiAgICogVG9nZ2xlIGNlbGwgY29sbGFwc2VkIHN0YXRlIHVzaW5nIE5vdGVib29rU3RhdGVcbiAgICovXG4gIHRvZ2dsZUNlbGwoY2VsbElkKSB7XG4gICAgTm90ZWJvb2tTdGF0ZS50b2dnbGVDZWxsKFxuICAgICAgY2VsbElkLFxuICAgICAgdGhpcy5jZWxscyxcbiAgICAgIHRoaXMucHJlZmVyZW5jZXMsXG4gICAgICAoKSA9PiB0aGlzLnNhdmVTdGF0ZSgpLFxuICAgICAgKGV2ZW50LCBkYXRhKSA9PiB0aGlzLmVtaXQoZXZlbnQsIGRhdGEpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb2xsYXBzZSBjZWxsIHVzaW5nIE5vdGVib29rU3RhdGVcbiAgICovXG4gIGNvbGxhcHNlQ2VsbChjZWxsSWQpIHtcbiAgICBOb3RlYm9va1N0YXRlLmNvbGxhcHNlQ2VsbChcbiAgICAgIGNlbGxJZCxcbiAgICAgIHRoaXMuY2VsbHMsXG4gICAgICB0aGlzLnByZWZlcmVuY2VzLFxuICAgICAgKCkgPT4gdGhpcy5zYXZlU3RhdGUoKSxcbiAgICAgIChldmVudCwgZGF0YSkgPT4gdGhpcy5lbWl0KGV2ZW50LCBkYXRhKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogRXhwYW5kIGNlbGwgdXNpbmcgTm90ZWJvb2tTdGF0ZVxuICAgKi9cbiAgZXhwYW5kQ2VsbChjZWxsSWQpIHtcbiAgICBOb3RlYm9va1N0YXRlLmV4cGFuZENlbGwoXG4gICAgICBjZWxsSWQsXG4gICAgICB0aGlzLmNlbGxzLFxuICAgICAgdGhpcy5wcmVmZXJlbmNlcyxcbiAgICAgICgpID0+IHRoaXMuc2F2ZVN0YXRlKCksXG4gICAgICAoZXZlbnQsIGRhdGEpID0+IHRoaXMuZW1pdChldmVudCwgZGF0YSlcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFRvZ2dsZSBhbGwgY2VsbHMgdXNpbmcgTm90ZWJvb2tTdGF0ZVxuICAgKi9cbiAgdG9nZ2xlQWxsQ2VsbHMoKSB7XG4gICAgTm90ZWJvb2tTdGF0ZS50b2dnbGVBbGxDZWxscyhcbiAgICAgIHRoaXMuY2VsbHMsXG4gICAgICB0aGlzLnByZWZlcmVuY2VzLFxuICAgICAgKCkgPT4gdGhpcy5zYXZlU3RhdGUoKSxcbiAgICAgIChldmVudCwgZGF0YSkgPT4gdGhpcy5lbWl0KGV2ZW50LCBkYXRhKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogRXhwYW5kIGFsbCBjZWxscyB1c2luZyBOb3RlYm9va1N0YXRlXG4gICAqL1xuICBleHBhbmRBbGxDZWxscygpIHtcbiAgICBOb3RlYm9va1N0YXRlLmV4cGFuZEFsbENlbGxzKFxuICAgICAgdGhpcy5jZWxscyxcbiAgICAgIHRoaXMucHJlZmVyZW5jZXMsXG4gICAgICAoKSA9PiB0aGlzLnNhdmVTdGF0ZSgpLFxuICAgICAgKGV2ZW50LCBkYXRhKSA9PiB0aGlzLmVtaXQoZXZlbnQsIGRhdGEpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb2xsYXBzZSBhbGwgY2VsbHMgdXNpbmcgTm90ZWJvb2tTdGF0ZVxuICAgKi9cbiAgY29sbGFwc2VBbGxDZWxscygpIHtcbiAgICBOb3RlYm9va1N0YXRlLmNvbGxhcHNlQWxsQ2VsbHMoXG4gICAgICB0aGlzLmNlbGxzLFxuICAgICAgdGhpcy5wcmVmZXJlbmNlcyxcbiAgICAgICgpID0+IHRoaXMuc2F2ZVN0YXRlKCksXG4gICAgICAoZXZlbnQsIGRhdGEpID0+IHRoaXMuZW1pdChldmVudCwgZGF0YSksXG4gICAgICAoY2VsbFR5cGUpID0+IE5vdGVib29rU3RhdGUuc2hvdWxkTWFrZUNvbGxhcHNpYmxlKGNlbGxUeXBlKVxuICAgICk7XG4gIH1cblxuXG5cbiAgLyoqXG4gICAqIFNldHVwIGtleWJvYXJkIG5hdmlnYXRpb24gdXNpbmcgTm90ZWJvb2tOYXZpZ2F0aW9uXG4gICAqL1xuICBzZXR1cEtleWJvYXJkTmF2aWdhdGlvbigpIHtcbiAgICBOb3RlYm9va05hdmlnYXRpb24uc2V0dXBLZXlib2FyZE5hdmlnYXRpb24oXG4gICAgICB0aGlzLmVsZW1lbnQsXG4gICAgICB0aGlzLmNlbGxzLFxuICAgICAgKGVsZW1lbnQsIGV2ZW50LCBoYW5kbGVyKSA9PiB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoZWxlbWVudCwgZXZlbnQsIGhhbmRsZXIpXG4gICAgKTtcbiAgICAvLyBObyBjbGVhbnVwIG5lZWRlZCAtIEFib3J0Q29udHJvbGxlciBoYW5kbGVzIGV2ZXJ5dGhpbmcgYXV0b21hdGljYWxseVxuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgYWNjZXNzaWJpbGl0eSBmZWF0dXJlcyB1c2luZyBOb3RlYm9va05hdmlnYXRpb25cbiAgICovXG4gIGluaXRpYWxpemVBY2Nlc3NpYmlsaXR5KCkge1xuICAgIE5vdGVib29rTmF2aWdhdGlvbi5pbml0aWFsaXplQWNjZXNzaWJpbGl0eSh0aGlzLmVsZW1lbnQsIHRoaXMuY2VsbHMuc2l6ZSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0dXAgZW50cnkgYW5pbWF0aW9ucyB1c2luZyBOb3RlYm9va05hdmlnYXRpb25cbiAgICovXG4gIHNldHVwQW5pbWF0aW9ucygpIHtcbiAgICBOb3RlYm9va05hdmlnYXRpb24uc2V0dXBBbmltYXRpb25zKFxuICAgICAgdGhpcy5jZWxscyxcbiAgICAgIHRoaXMub3B0aW9ucy5jZWxsQW5pbWF0aW9uRGVsYXksXG4gICAgICB0aGlzLnByZWZlcmVuY2VzLmFuaW1hdGlvbnNFbmFibGVkXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTYXZlIHN0YXRlIHVzaW5nIE5vdGVib29rU3RhdGVcbiAgICovXG4gIHNhdmVTdGF0ZSgpIHtcbiAgICBOb3RlYm9va1N0YXRlLnNhdmVTdGF0ZSh0aGlzLm9wdGlvbnMuc3RvcmFnZUtleSwgdGhpcy5wcmVmZXJlbmNlcy5jb2xsYXBzZWRDZWxscyk7XG4gIH1cblxuICAvKipcbiAgICogTG9hZCBzdGF0ZSB1c2luZyBOb3RlYm9va1N0YXRlXG4gICAqL1xuICBsb2FkU3RvcmVkU3RhdGUoKSB7XG4gICAgTm90ZWJvb2tTdGF0ZS5sb2FkU3RvcmVkU3RhdGUoXG4gICAgICB0aGlzLm9wdGlvbnMuc3RvcmFnZUtleSxcbiAgICAgIHRoaXMuY2VsbHMsXG4gICAgICAoY2VsbElkKSA9PiB0aGlzLmNvbGxhcHNlQ2VsbChjZWxsSWQpXG4gICAgKTtcbiAgfVxuXG5cblxuICAvKipcbiAgICogR2V0IGNvbXBvbmVudCBzdGF0aXN0aWNzIHVzaW5nIE5vdGVib29rU3RhdGVcbiAgICovXG4gIGdldFN0YXRzKCkge1xuICAgIHJldHVybiBOb3RlYm9va1N0YXRlLmdldFN0YXRzKHRoaXMuY2VsbHMsIHRoaXMucHJlZmVyZW5jZXMsIHRoaXMuZ2V0Tm90ZWJvb2tJZCgpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbnVwIG9uIGRlc3Ryb3lcbiAgICovXG4gIG9uRGVzdHJveSgpIHtcbiAgICAvLyBTYXZlIGZpbmFsIHN0YXRlXG4gICAgdGhpcy5zYXZlU3RhdGUoKTtcbiAgICBcbiAgICAvLyBFdmVudCBsaXN0ZW5lcnMgYXV0b21hdGljYWxseSBjbGVhbmVkIHVwIGJ5IEFib3J0Q29udHJvbGxlciBpbiBiYXNlIENvbXBvbmVudFxuICAgIFxuICAgIC8vIENsZWFyIHN0b3JlZCBkYXRhXG4gICAgdGhpcy5jZWxscy5jbGVhcigpO1xuICAgIHRoaXMucHJlZmVyZW5jZXMuY29sbGFwc2VkQ2VsbHMuY2xlYXIoKTtcbiAgICBcbiAgICB0aGlzLmVtaXQoJ25vdGVib29rOmRlc3Ryb3llZCcpO1xuICB9XG59XG5cbi8vIEF1dG8tcmVnaXN0ZXIgY29tcG9uZW50XG5pbXBvcnQgQ29tcG9uZW50TWFuYWdlciBmcm9tICcuLi8uLi9jb3JlL0NvbXBvbmVudE1hbmFnZXIuanMnO1xuQ29tcG9uZW50TWFuYWdlci5yZWdpc3Rlcignbm90ZWJvb2stdmlld2VyJywgTm90ZWJvb2tWaWV3ZXIpOyIsICIvKipcbiAqIE5vdGVib29rUHJvZ3Jlc3NpdmVSZXZlYWwgQ29tcG9uZW50XG4gKiBTaW1wbGUgcHJvZ3Jlc3NpdmUgcmV2ZWxhdGlvbiBvZiBwcmUtcmVuZGVyZWQgbm90ZWJvb2sgY2VsbHNcbiAqIEFsbCBjZWxscyBhcmUgcmVuZGVyZWQgYnkgSHVnbywgSmF2YVNjcmlwdCBqdXN0IHNob3dzL2hpZGVzIHRoZW1cbiAqL1xuXG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICcuLi8uLi9jb3JlL0NvbXBvbmVudC5qcyc7XG5pbXBvcnQgQ29tcG9uZW50TWFuYWdlciBmcm9tICcuLi8uLi9jb3JlL0NvbXBvbmVudE1hbmFnZXIuanMnO1xuaW1wb3J0IHsgYW5pbWF0aW9uQnJpZGdlIH0gZnJvbSAnLi4vLi4vY29yZS9BbmltYXRpb25CcmlkZ2UuanMnO1xuXG5leHBvcnQgY2xhc3MgTm90ZWJvb2tQcm9ncmVzc2l2ZVJldmVhbCBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZyA9IHt9KSB7XG4gICAgc3VwZXIoe1xuICAgICAgbmFtZTogJ25vdGVib29rLXByb2dyZXNzaXZlLXJldmVhbCcsXG4gICAgICBzZWxlY3RvcjogY29uZmlnLnNlbGVjdG9yIHx8ICdbZGF0YS1jb21wb25lbnQ9XCJub3RlYm9vay1wcm9ncmVzc2l2ZS1yZXZlYWxcIl0nLFxuICAgICAgLi4uY29uZmlnXG4gICAgfSk7XG5cbiAgICB0aGlzLm9wdGlvbnMgPSB7XG4gICAgICBzY3JvbGxUaHJlc2hvbGQ6IDQwMCwgICAgIC8vIFBpeGVscyBmcm9tIGJvdHRvbSB0byB0cmlnZ2VyIGxvYWRpbmcgKG1vcmUgZWFnZXIpXG4gICAgICBhbmltYXRpb25EZWxheTogMzAsICAgICAgIC8vIERlbGF5IGJldHdlZW4gY2VsbCBhbmltYXRpb25zIChtdWNoIGZhc3RlcilcbiAgICAgIGJhdGNoU2l6ZTogMjAsICAgICAgICAgICAvLyBIb3cgbWFueSBjZWxscyB0byByZXZlYWwgcGVyIGJhdGNoIChsYXJnZXIgYmF0Y2hlcylcbiAgICAgIGFuaW1hdGlvbkR1cmF0aW9uOiAzMDAsICAgLy8gQ1NTIGFuaW1hdGlvbiBkdXJhdGlvblxuICAgICAgLi4udGhpcy5vcHRpb25zXG4gICAgfTtcblxuICAgIC8vIFN0YXRlIG1hbmFnZW1lbnRcbiAgICB0aGlzLmFsbENlbGxzID0gW107XG4gICAgdGhpcy52aXNpYmxlQ291bnQgPSAwO1xuICAgIHRoaXMubWV0YWRhdGEgPSBudWxsO1xuICAgIHRoaXMuaXNSZXZlYWxpbmcgPSBmYWxzZTtcbiAgICB0aGlzLm9ic2VydmVyID0gbnVsbDtcbiAgICB0aGlzLmxvYWRUcmlnZ2VyID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIHRoZSBwcm9ncmVzc2l2ZSByZXZlYWxcbiAgICovXG4gIGFzeW5jIG9uSW5pdCgpIHtcbiAgICBpZiAoIXRoaXMuZWxlbWVudCkge1xuICAgICAgY29uc29sZS53YXJuKCdOb3RlYm9va1Byb2dyZXNzaXZlUmV2ZWFsOiBObyBlbGVtZW50IGZvdW5kJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gXHVEODNEXHVERTgwIE5FVzogRW5oYW5jZWQgaW5pdGlhbGl6YXRpb24gd2l0aCBsb2FkaW5nIHN0YXRlc1xuICAgIHRoaXMuc2V0TG9hZGluZ1N0YXRlKHRydWUpO1xuICAgIHRoaXMudXBkYXRlQ29tcG9uZW50U3RhdGUoJ2luaXRpYWxpemluZycpO1xuICAgIFxuICAgIHRoaXMubG9hZE1ldGFkYXRhKCk7XG4gICAgdGhpcy5jb2xsZWN0Q2VsbHMoKTtcbiAgICB0aGlzLnNldHVwSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoKTtcbiAgICB0aGlzLnNldHVwTG9hZFRyaWdnZXIoKTtcbiAgICBcbiAgICAvLyBDb3VudCBpbml0aWFsbHkgdmlzaWJsZSBjZWxsc1xuICAgIHRoaXMudmlzaWJsZUNvdW50ID0gdGhpcy5hbGxDZWxscy5maWx0ZXIoY2VsbCA9PiAhY2VsbC5jbGFzc0xpc3QuY29udGFpbnMoJ25vdGVib29rLWNlbGwtLWhpZGRlbicpKS5sZW5ndGg7XG4gICAgXG4gICAgLy8gXHVEODNEXHVERTgwIE5FVzogSW5pdGlhbGl6YXRpb24gY29tcGxldGVcbiAgICB0aGlzLnNldExvYWRpbmdTdGF0ZShmYWxzZSk7XG4gICAgdGhpcy51cGRhdGVDb21wb25lbnRTdGF0ZSgncmVhZHknKTtcbiAgICBcbiAgICB0aGlzLmVtaXQoJ25vdGVib29rOmluaXRpYWxpemVkJywgeyBcbiAgICAgIHZpc2libGVDZWxsczogdGhpcy52aXNpYmxlQ291bnQsXG4gICAgICB0b3RhbENlbGxzOiB0aGlzLmFsbENlbGxzLmxlbmd0aFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIExvYWQgbWV0YWRhdGEgZnJvbSB0aGUgcGFnZVxuICAgKi9cbiAgbG9hZE1ldGFkYXRhKCkge1xuICAgIGNvbnN0IG1ldGFkYXRhU2NyaXB0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25vdGVib29rLW1ldGFkYXRhJyk7XG4gICAgaWYgKCFtZXRhZGF0YVNjcmlwdCkge1xuICAgICAgY29uc29sZS53YXJuKCdOb3RlYm9va1Byb2dyZXNzaXZlUmV2ZWFsOiBObyBtZXRhZGF0YSBmb3VuZCwgdXNpbmcgZGVmYXVsdHMnKTtcbiAgICAgIHRoaXMubWV0YWRhdGEgPSB7IHRvdGFsQ2VsbHM6IDAsIGluaXRpYWxseVZpc2libGU6IDUsIGJhdGNoU2l6ZTogMTAgfTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgdGhpcy5tZXRhZGF0YSA9IEpTT04ucGFyc2UobWV0YWRhdGFTY3JpcHQudGV4dENvbnRlbnQpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdOb3RlYm9va1Byb2dyZXNzaXZlUmV2ZWFsOiBGYWlsZWQgdG8gcGFyc2UgbWV0YWRhdGEnLCBlcnJvcik7XG4gICAgICB0aGlzLm1ldGFkYXRhID0geyB0b3RhbENlbGxzOiAwLCBpbml0aWFsbHlWaXNpYmxlOiA1LCBiYXRjaFNpemU6IDEwIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENvbGxlY3QgYWxsIGNlbGwgd3JhcHBlciBlbGVtZW50c1xuICAgKi9cbiAgY29sbGVjdENlbGxzKCkge1xuICAgIHRoaXMuYWxsQ2VsbHMgPSBBcnJheS5mcm9tKHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubm90ZWJvb2stY2VsbC13cmFwcGVyJykpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIGludGVyc2VjdGlvbiBvYnNlcnZlciBmb3IgaW5maW5pdGUgc2Nyb2xsXG4gICAqL1xuICBzZXR1cEludGVyc2VjdGlvbk9ic2VydmVyKCkge1xuICAgIGlmICghKCdJbnRlcnNlY3Rpb25PYnNlcnZlcicgaW4gd2luZG93KSkge1xuICAgICAgY29uc29sZS53YXJuKCdJbnRlcnNlY3Rpb25PYnNlcnZlciBub3Qgc3VwcG9ydGVkLCBmYWxsaW5nIGJhY2sgdG8gc2Nyb2xsIGV2ZW50cycpO1xuICAgICAgdGhpcy5zZXR1cFNjcm9sbEZhbGxiYWNrKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5vYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihcbiAgICAgIChlbnRyaWVzKSA9PiB7XG4gICAgICAgIGVudHJpZXMuZm9yRWFjaCgoZW50cnkpID0+IHtcbiAgICAgICAgICBpZiAoZW50cnkuaXNJbnRlcnNlY3RpbmcgJiYgIXRoaXMuaXNSZXZlYWxpbmcpIHtcbiAgICAgICAgICAgIHRoaXMucmV2ZWFsTmV4dEJhdGNoKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHJvb3RNYXJnaW46IGAke3RoaXMub3B0aW9ucy5zY3JvbGxUaHJlc2hvbGR9cHggMHB4YCxcbiAgICAgICAgdGhyZXNob2xkOiAwLjFcbiAgICAgIH1cbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIGxvYWQgdHJpZ2dlciBlbGVtZW50XG4gICAqL1xuICBzZXR1cExvYWRUcmlnZ2VyKCkge1xuICAgIGNvbnN0IGhpZGRlbkNlbGxzID0gdGhpcy5hbGxDZWxscy5maWx0ZXIoY2VsbCA9PiBjZWxsLmNsYXNzTGlzdC5jb250YWlucygnbm90ZWJvb2stY2VsbC0taGlkZGVuJykpO1xuICAgIFxuICAgIGlmIChoaWRkZW5DZWxscy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjsgLy8gTm8gbW9yZSBjZWxscyB0byByZXZlYWxcbiAgICB9XG5cbiAgICBjb25zdCBjZWxsc0NvbnRhaW5lciA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubm90ZWJvb2tfX2NlbGxzJyk7XG4gICAgXG4gICAgLy8gUmVtb3ZlIGV4aXN0aW5nIHRyaWdnZXJcbiAgICBpZiAodGhpcy5sb2FkVHJpZ2dlcikge1xuICAgICAgdGhpcy5sb2FkVHJpZ2dlci5yZW1vdmUoKTtcbiAgICB9XG4gICAgXG4gICAgLy8gQ3JlYXRlIG5ldyBsb2FkIHRyaWdnZXJcbiAgICB0aGlzLmxvYWRUcmlnZ2VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5sb2FkVHJpZ2dlci5jbGFzc05hbWUgPSAnbm90ZWJvb2stbG9hZC10cmlnZ2VyJztcbiAgICB0aGlzLmxvYWRUcmlnZ2VyLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICBoZWlnaHQ6IDIwcHg7XG4gICAgICBtYXJnaW46IDJyZW0gMDtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICBjb2xvcjogdmFyKC0tY29sb3ItdGV4dC1zZWNvbmRhcnkpO1xuICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTtcbiAgICBgO1xuICAgIFxuICAgIHRoaXMubG9hZFRyaWdnZXIuaW5uZXJIVE1MID0gYFxuICAgICAgPGRpdiBjbGFzcz1cImxvYWRpbmctaW5kaWNhdG9yXCI+XG4gICAgICAgIDxzcGFuPkxvYWRpbmcgbW9yZSBjZWxscy4uLiAoJHtoaWRkZW5DZWxscy5sZW5ndGh9IHJlbWFpbmluZyk8L3NwYW4+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJsb2FkaW5nLXNwaW5uZXIgbWwtMlwiPjwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgICBcbiAgICBjZWxsc0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmxvYWRUcmlnZ2VyKTtcbiAgICBcbiAgICAvLyBTdGFydCBvYnNlcnZpbmcgdGhlIHRyaWdnZXJcbiAgICBpZiAodGhpcy5vYnNlcnZlcikge1xuICAgICAgdGhpcy5vYnNlcnZlci5vYnNlcnZlKHRoaXMubG9hZFRyaWdnZXIpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXZlYWwgdGhlIG5leHQgYmF0Y2ggb2YgaGlkZGVuIGNlbGxzXG4gICAqL1xuICBhc3luYyByZXZlYWxOZXh0QmF0Y2goKSB7XG4gICAgY29uc3QgaGlkZGVuQ2VsbHMgPSB0aGlzLmFsbENlbGxzLmZpbHRlcihjZWxsID0+IGNlbGwuY2xhc3NMaXN0LmNvbnRhaW5zKCdub3RlYm9vay1jZWxsLS1oaWRkZW4nKSk7XG4gICAgXG4gICAgaWYgKGhpZGRlbkNlbGxzLmxlbmd0aCA9PT0gMCB8fCB0aGlzLmlzUmV2ZWFsaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5pc1JldmVhbGluZyA9IHRydWU7XG4gICAgXG4gICAgLy8gUmVtb3ZlIHRoZSBsb2FkIHRyaWdnZXIgdGVtcG9yYXJpbHlcbiAgICBpZiAodGhpcy5sb2FkVHJpZ2dlcikge1xuICAgICAgdGhpcy5vYnNlcnZlci51bm9ic2VydmUodGhpcy5sb2FkVHJpZ2dlcik7XG4gICAgICB0aGlzLmxvYWRUcmlnZ2VyLnJlbW92ZSgpO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBiYXRjaFNpemUgPSBNYXRoLm1pbih0aGlzLm9wdGlvbnMuYmF0Y2hTaXplLCBoaWRkZW5DZWxscy5sZW5ndGgpO1xuICAgIGNvbnN0IGNlbGxzVG9SZXZlYWwgPSBoaWRkZW5DZWxscy5zbGljZSgwLCBiYXRjaFNpemUpO1xuICAgIFxuICAgIFxuICAgIFxuICAgIC8vIFJldmVhbCBjZWxscyB3aXRoIGZhc3Qgc3RhZ2dlcmVkIGFuaW1hdGlvblxuICAgIGNlbGxzVG9SZXZlYWwuZm9yRWFjaCgoY2VsbCwgaW5kZXgpID0+IHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBjZWxsLmNsYXNzTGlzdC5yZW1vdmUoJ25vdGVib29rLWNlbGwtLWhpZGRlbicpO1xuICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ25vdGVib29rLWNlbGwtLXJldmVhbGluZycpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2xlYW4gdXAgdGhlIHJldmVhbGluZyBjbGFzcyBhZnRlciBhbmltYXRpb25cbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgY2VsbC5jbGFzc0xpc3QucmVtb3ZlKCdub3RlYm9vay1jZWxsLS1yZXZlYWxpbmcnKTtcbiAgICAgICAgfSwgMzAwKTsgLy8gTWF0Y2ggQ1NTIGFuaW1hdGlvbiBkdXJhdGlvblxuICAgICAgICBcbiAgICAgIH0sIGluZGV4ICogdGhpcy5vcHRpb25zLmFuaW1hdGlvbkRlbGF5KTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBVcGRhdGUgdmlzaWJsZSBjb3VudFxuICAgIHRoaXMudmlzaWJsZUNvdW50ICs9IGNlbGxzVG9SZXZlYWwubGVuZ3RoO1xuICAgIFxuICAgIC8vIE11Y2ggZmFzdGVyIHNldHVwIG9mIG5leHQgdHJpZ2dlclxuICAgIGNvbnN0IHRvdGFsQW5pbWF0aW9uVGltZSA9IChjZWxsc1RvUmV2ZWFsLmxlbmd0aCAqIHRoaXMub3B0aW9ucy5hbmltYXRpb25EZWxheSkgKyB0aGlzLm9wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb247XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLnNldHVwTG9hZFRyaWdnZXIoKTtcbiAgICAgIHRoaXMuaXNSZXZlYWxpbmcgPSBmYWxzZTtcbiAgICAgIFxuICAgICAgdGhpcy5lbWl0KCdub3RlYm9vazpiYXRjaC1yZXZlYWxlZCcsIHsgXG4gICAgICAgIGJhdGNoU2l6ZTogY2VsbHNUb1JldmVhbC5sZW5ndGgsXG4gICAgICAgIHZpc2libGVDZWxsczogdGhpcy52aXNpYmxlQ291bnQsXG4gICAgICAgIHJlbWFpbmluZ0NlbGxzOiB0aGlzLmFsbENlbGxzLmxlbmd0aCAtIHRoaXMudmlzaWJsZUNvdW50LFxuICAgICAgICB0b3RhbENlbGxzOiB0aGlzLmFsbENlbGxzLmxlbmd0aFxuICAgICAgfSk7XG4gICAgICBcbiAgICB9LCB0b3RhbEFuaW1hdGlvblRpbWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZhbGxiYWNrIHNjcm9sbCBldmVudCBoYW5kbGVyIGZvciBicm93c2VycyB3aXRob3V0IEludGVyc2VjdGlvbk9ic2VydmVyXG4gICAqL1xuICBzZXR1cFNjcm9sbEZhbGxiYWNrKCkge1xuICAgIGNvbnN0IGhhbmRsZVNjcm9sbCA9ICgpID0+IHtcbiAgICAgIGNvbnN0IGhpZGRlbkNlbGxzID0gdGhpcy5hbGxDZWxscy5maWx0ZXIoY2VsbCA9PiBjZWxsLmNsYXNzTGlzdC5jb250YWlucygnbm90ZWJvb2stY2VsbC0taGlkZGVuJykpO1xuICAgICAgXG4gICAgICBpZiAodGhpcy5pc1JldmVhbGluZyB8fCBoaWRkZW5DZWxscy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzY3JvbGxUb3AgPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDtcbiAgICAgIGNvbnN0IHdpbmRvd0hlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICAgIGNvbnN0IGRvY3VtZW50SGVpZ2h0ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbEhlaWdodDtcbiAgICAgIFxuICAgICAgaWYgKHNjcm9sbFRvcCArIHdpbmRvd0hlaWdodCA+PSBkb2N1bWVudEhlaWdodCAtIHRoaXMub3B0aW9ucy5zY3JvbGxUaHJlc2hvbGQpIHtcbiAgICAgICAgdGhpcy5yZXZlYWxOZXh0QmF0Y2goKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gVGhyb3R0bGVkIHNjcm9sbCBoYW5kbGVyXG4gICAgbGV0IHNjcm9sbFRpbWVvdXQ7XG4gICAgY29uc3QgdGhyb3R0bGVkU2Nyb2xsID0gKCkgPT4ge1xuICAgICAgaWYgKHNjcm9sbFRpbWVvdXQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHNjcm9sbFRpbWVvdXQpO1xuICAgICAgfVxuICAgICAgY29uc3QgdGhyb3R0bGVEZWxheSA9IGFuaW1hdGlvbkJyaWRnZS5nZXRUaW1pbmcoJ2Zhc3QnKSAvIDI7XG4gICAgICBzY3JvbGxUaW1lb3V0ID0gc2V0VGltZW91dChoYW5kbGVTY3JvbGwsIHRocm90dGxlRGVsYXkpO1xuICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcih3aW5kb3csICdzY3JvbGwnLCB0aHJvdHRsZWRTY3JvbGwpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCByZXZlYWwgc3RhdGlzdGljc1xuICAgKi9cbiAgZ2V0U3RhdHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZpc2libGVDZWxsczogdGhpcy52aXNpYmxlQ291bnQsXG4gICAgICBoaWRkZW5DZWxsczogdGhpcy5hbGxDZWxscy5sZW5ndGggLSB0aGlzLnZpc2libGVDb3VudCxcbiAgICAgIHRvdGFsQ2VsbHM6IHRoaXMuYWxsQ2VsbHMubGVuZ3RoLFxuICAgICAgcmV2ZWFsUHJvZ3Jlc3M6IHRoaXMuYWxsQ2VsbHMubGVuZ3RoID4gMCA/IFxuICAgICAgICAoKHRoaXMudmlzaWJsZUNvdW50IC8gdGhpcy5hbGxDZWxscy5sZW5ndGgpICogMTAwKS50b0ZpeGVkKDEpIDogMFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogTWFudWFsbHkgcmV2ZWFsIGFsbCByZW1haW5pbmcgY2VsbHNcbiAgICovXG4gIGFzeW5jIHJldmVhbEFsbENlbGxzKCkge1xuICAgIGNvbnN0IGhpZGRlbkNlbGxzID0gdGhpcy5hbGxDZWxscy5maWx0ZXIoY2VsbCA9PiBjZWxsLmNsYXNzTGlzdC5jb250YWlucygnbm90ZWJvb2stY2VsbC0taGlkZGVuJykpO1xuICAgIFxuICAgIGlmIChoaWRkZW5DZWxscy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgLy8gUmV2ZWFsIGFsbCBjZWxscyB3aXRoIHZlcnkgZmFzdCBzdGFnZ2VyZWQgYW5pbWF0aW9uXG4gICAgaGlkZGVuQ2VsbHMuZm9yRWFjaCgoY2VsbCwgaW5kZXgpID0+IHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBjZWxsLmNsYXNzTGlzdC5yZW1vdmUoJ25vdGVib29rLWNlbGwtLWhpZGRlbicpO1xuICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ25vdGVib29rLWNlbGwtLXJldmVhbGluZycpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2xlYW4gdXAgdGhlIHJldmVhbGluZyBjbGFzcyBhZnRlciBhbmltYXRpb25cbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgY2VsbC5jbGFzc0xpc3QucmVtb3ZlKCdub3RlYm9vay1jZWxsLS1yZXZlYWxpbmcnKTtcbiAgICAgICAgfSwgMzAwKTtcbiAgICAgICAgXG4gICAgICB9LCBpbmRleCAqIDIwKTsgLy8gTXVjaCBmYXN0ZXIgZm9yIGJ1bGsgcmV2ZWFsXG4gICAgfSk7XG4gICAgXG4gICAgdGhpcy52aXNpYmxlQ291bnQgPSB0aGlzLmFsbENlbGxzLmxlbmd0aDtcbiAgICBcbiAgICAvLyBSZW1vdmUgbG9hZCB0cmlnZ2VyXG4gICAgaWYgKHRoaXMubG9hZFRyaWdnZXIpIHtcbiAgICAgIHRoaXMub2JzZXJ2ZXIudW5vYnNlcnZlKHRoaXMubG9hZFRyaWdnZXIpO1xuICAgICAgdGhpcy5sb2FkVHJpZ2dlci5yZW1vdmUoKTtcbiAgICAgIHRoaXMubG9hZFRyaWdnZXIgPSBudWxsO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLmVtaXQoJ25vdGVib29rOmFsbC1yZXZlYWxlZCcsIHsgdG90YWxDZWxsczogdGhpcy5hbGxDZWxscy5sZW5ndGggfSk7XG4gIH1cblxuICAvKipcbiAgICogSGlkZSBjZWxscyB0aGF0IGFyZSBmYXIgb2ZmLXNjcmVlbiAocGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uKVxuICAgKi9cbiAgb3B0aW1pemVWaXNpYmlsaXR5KCkge1xuICAgIGNvbnN0IHZpZXdwb3J0VG9wID0gd2luZG93LnBhZ2VZT2Zmc2V0O1xuICAgIGNvbnN0IHZpZXdwb3J0Qm90dG9tID0gdmlld3BvcnRUb3AgKyB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgY29uc3QgYnVmZmVyID0gd2luZG93LmlubmVySGVpZ2h0ICogMjsgLy8gS2VlcCAyIHZpZXdwb3J0IGhlaWdodHMgb2YgYnVmZmVyXG4gICAgXG4gICAgdGhpcy5hbGxDZWxscy5mb3JFYWNoKChjZWxsLCBpbmRleCkgPT4ge1xuICAgICAgaWYgKGNlbGwuY2xhc3NMaXN0LmNvbnRhaW5zKCdub3RlYm9vay1jZWxsLS1oaWRkZW4nKSkge1xuICAgICAgICByZXR1cm47IC8vIFNraXAgY2VsbHMgdGhhdCBhcmUgaW50ZW50aW9uYWxseSBoaWRkZW5cbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgcmVjdCA9IGNlbGwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICBjb25zdCBjZWxsVG9wID0gcmVjdC50b3AgKyB2aWV3cG9ydFRvcDtcbiAgICAgIGNvbnN0IGNlbGxCb3R0b20gPSBjZWxsVG9wICsgcmVjdC5oZWlnaHQ7XG4gICAgICBcbiAgICAgIC8vIEhpZGUgY2VsbHMgdGhhdCBhcmUgZmFyIGFib3ZlIG9yIGJlbG93IHRoZSB2aWV3cG9ydFxuICAgICAgaWYgKGNlbGxCb3R0b20gPCB2aWV3cG9ydFRvcCAtIGJ1ZmZlciB8fCBjZWxsVG9wID4gdmlld3BvcnRCb3R0b20gKyBidWZmZXIpIHtcbiAgICAgICAgY2VsbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2VsbC5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYW51cCBvbiBkZXN0cm95XG4gICAqL1xuICBvbkRlc3Ryb3koKSB7XG4gICAgaWYgKHRoaXMub2JzZXJ2ZXIpIHtcbiAgICAgIHRoaXMub2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5sb2FkVHJpZ2dlcikge1xuICAgICAgdGhpcy5sb2FkVHJpZ2dlci5yZW1vdmUoKTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5lbWl0KCdub3RlYm9vazpkZXN0cm95ZWQnKTtcbiAgfVxufVxuXG4vLyBBdXRvLXJlZ2lzdGVyIGNvbXBvbmVudCB3aGVuIG1vZHVsZSBsb2Fkc1xuQ29tcG9uZW50TWFuYWdlci5yZWdpc3Rlcignbm90ZWJvb2stcHJvZ3Jlc3NpdmUtcmV2ZWFsJywgTm90ZWJvb2tQcm9ncmVzc2l2ZVJldmVhbCk7IiwgIi8qKlxuICogTm90ZWJvb2tMYXVuY2ggQ29tcG9uZW50IC0gTm90ZWJvb2sgcGxhdGZvcm0gbGF1bmNoZXIgZHJvcGRvd25cbiAqIFByb3ZpZGVzIHF1aWNrIGFjY2VzcyB0byBsYXVuY2ggbm90ZWJvb2tzIGluIGV4dGVybmFsIHBsYXRmb3JtcyBsaWtlIENvbGFiLCBCaW5kZXIsIGV0Yy5cbiAqL1xuXG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICcuLi8uLi9jb3JlL0NvbXBvbmVudC5qcyc7XG5pbXBvcnQgeyBhbm5vdW5jZVRvU2NyZWVuUmVhZGVyIH0gZnJvbSAnLi4vLi4vdXRpbHMvYWNjZXNzaWJpbGl0eS5qcyc7XG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuLi8uLi91dGlscy9Mb2dnZXIuanMnO1xuXG5jb25zdCBsb2cgPSBsb2dnZXIuY29tcG9uZW50KCdOb3RlYm9va0xhdW5jaCcpO1xuXG5leHBvcnQgY2xhc3MgTm90ZWJvb2tMYXVuY2ggZXh0ZW5kcyBDb21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcihjb25maWcgPSB7fSkge1xuICAgIHN1cGVyKHtcbiAgICAgIG5hbWU6ICdub3RlYm9vay1sYXVuY2gnLFxuICAgICAgc2VsZWN0b3I6ICdbZGF0YS1jb21wb25lbnQ9XCJub3RlYm9vay1sYXVuY2hcIl0nLFxuICAgICAgLi4uY29uZmlnXG4gICAgfSk7XG5cbiAgICB0aGlzLm9wdGlvbnMgPSB7XG4gICAgICBhbmltYXRpb25EdXJhdGlvbjogMTUwLFxuICAgICAgLi4udGhpcy5vcHRpb25zXG4gICAgfTtcblxuICAgIC8vIENvbXBvbmVudCBzdGF0ZVxuICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogU2V0dXAgRE9NIGVsZW1lbnRzXG4gICAqL1xuICBzZXR1cEVsZW1lbnRzKCkge1xuICAgIHN1cGVyLnNldHVwRWxlbWVudHMoKTtcblxuICAgIHRoaXMudG9nZ2xlID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWxhdW5jaC10b2dnbGVdJyk7XG4gICAgdGhpcy5kcm9wZG93biA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1sYXVuY2gtZHJvcGRvd25dJyk7XG4gICAgdGhpcy5kcm9wZG93bkFycm93ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWRyb3Bkb3duLWFycm93XScpO1xuXG4gICAgaWYgKCF0aGlzLnRvZ2dsZSB8fCAhdGhpcy5kcm9wZG93bikge1xuICAgICAgbG9nLndhcm4oJ1JlcXVpcmVkIGVsZW1lbnRzIG5vdCBmb3VuZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBCaW5kIGV2ZW50IGxpc3RlbmVyc1xuICAgKi9cbiAgYmluZEV2ZW50cygpIHtcbiAgICAvLyBUb2dnbGUgZHJvcGRvd25cbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIodGhpcy50b2dnbGUsICdjbGljaycsIHRoaXMuaGFuZGxlVG9nZ2xlLmJpbmQodGhpcykpO1xuXG4gICAgLy8gQ2xvc2Ugb24gb3V0c2lkZSBjbGlja1xuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihkb2N1bWVudCwgJ2NsaWNrJywgdGhpcy5oYW5kbGVPdXRzaWRlQ2xpY2suYmluZCh0aGlzKSk7XG5cbiAgICAvLyBDbG9zZSBvbiBlc2NhcGUga2V5XG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGRvY3VtZW50LCAna2V5ZG93bicsIHRoaXMuaGFuZGxlS2V5ZG93bi5iaW5kKHRoaXMpKTtcblxuICAgIC8vIFByZXZlbnQgZHJvcGRvd24gZnJvbSBjbG9zaW5nIHdoZW4gY2xpY2tpbmcgaW5zaWRlXG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKHRoaXMuZHJvcGRvd24sICdjbGljaycsIChlKSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH0pO1xuXG4gICAgLy8gVHJhY2sgY2xpY2tzIG9uIHBsYXRmb3JtIGxpbmtzIGZvciBhbmFseXRpY3NcbiAgICBjb25zdCBwbGF0Zm9ybUxpbmtzID0gdGhpcy5kcm9wZG93bi5xdWVyeVNlbGVjdG9yQWxsKCdhW2hyZWYqPVwiY29sYWJcIl0sIGFbaHJlZio9XCJiaW5kZXJcIl0sIGFbaHJlZio9XCJuYnZpZXdlclwiXScpO1xuICAgIHBsYXRmb3JtTGlua3MuZm9yRWFjaChsaW5rID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGxpbmssICdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGNvbnN0IHBsYXRmb3JtID0gdGhpcy5nZXRQbGF0Zm9ybUZyb21VcmwobGluay5ocmVmKTtcbiAgICAgICAgdGhpcy50cmFja1BsYXRmb3JtTGF1bmNoKHBsYXRmb3JtKTtcbiAgICAgICAgdGhpcy5jbG9zZURyb3Bkb3duKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgdG9nZ2xlIGJ1dHRvbiBjbGlja1xuICAgKi9cbiAgaGFuZGxlVG9nZ2xlKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgIGlmICh0aGlzLmlzT3Blbikge1xuICAgICAgdGhpcy5jbG9zZURyb3Bkb3duKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMub3BlbkRyb3Bkb3duKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBvdXRzaWRlIGNsaWNrIHRvIGNsb3NlIGRyb3Bkb3duXG4gICAqL1xuICBoYW5kbGVPdXRzaWRlQ2xpY2soZSkge1xuICAgIGlmICh0aGlzLmlzT3BlbiAmJiAhdGhpcy5lbGVtZW50LmNvbnRhaW5zKGUudGFyZ2V0KSkge1xuICAgICAgdGhpcy5jbG9zZURyb3Bkb3duKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBrZXlib2FyZCBuYXZpZ2F0aW9uXG4gICAqL1xuICBoYW5kbGVLZXlkb3duKGUpIHtcbiAgICBpZiAoZS5rZXkgPT09ICdFc2NhcGUnICYmIHRoaXMuaXNPcGVuKSB7XG4gICAgICB0aGlzLmNsb3NlRHJvcGRvd24oKTtcbiAgICAgIHRoaXMudG9nZ2xlLmZvY3VzKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE9wZW4gZHJvcGRvd24gbWVudVxuICAgKi9cbiAgb3BlbkRyb3Bkb3duKCkge1xuICAgIHRoaXMuaXNPcGVuID0gdHJ1ZTtcbiAgICB0aGlzLmRyb3Bkb3duLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgIHRoaXMudG9nZ2xlLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICd0cnVlJyk7XG4gICAgXG4gICAgLy8gUm90YXRlIGFycm93XG4gICAgaWYgKHRoaXMuZHJvcGRvd25BcnJvdykge1xuICAgICAgdGhpcy5kcm9wZG93bkFycm93LnN0eWxlLnRyYW5zZm9ybSA9ICdyb3RhdGUoMTgwZGVnKSc7XG4gICAgfVxuXG4gICAgLy8gRm9jdXMgZmlyc3QgaXRlbSBpbiBkcm9wZG93blxuICAgIGNvbnN0IGZpcnN0SXRlbSA9IHRoaXMuZHJvcGRvd24ucXVlcnlTZWxlY3RvcignYSwgYnV0dG9uJyk7XG4gICAgaWYgKGZpcnN0SXRlbSkge1xuICAgICAgZmlyc3RJdGVtLmZvY3VzKCk7XG4gICAgfVxuXG4gICAgLy8gQW5pbWF0ZSBpblxuICAgIHRoaXMuZHJvcGRvd24uc3R5bGUub3BhY2l0eSA9ICcwJztcbiAgICB0aGlzLmRyb3Bkb3duLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVZKC0xMHB4KSc7XG4gICAgXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgIHRoaXMuZHJvcGRvd24uc3R5bGUudHJhbnNpdGlvbiA9IGBvcGFjaXR5ICR7dGhpcy5vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9ufW1zIGVhc2UsIHRyYW5zZm9ybSAke3RoaXMub3B0aW9ucy5hbmltYXRpb25EdXJhdGlvbn1tcyBlYXNlYDtcbiAgICAgIHRoaXMuZHJvcGRvd24uc3R5bGUub3BhY2l0eSA9ICcxJztcbiAgICAgIHRoaXMuZHJvcGRvd24uc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoMCknO1xuICAgIH0pO1xuXG4gICAgLy8gQW5ub3VuY2UgdG8gc2NyZWVuIHJlYWRlcnNcbiAgICBhbm5vdW5jZVRvU2NyZWVuUmVhZGVyKCdOb3RlYm9vayBsYXVuY2ggb3B0aW9ucyBvcGVuZWQnKTtcbiAgICBcbiAgICBsb2cuZGVidWcoJ0xhdW5jaCBkcm9wZG93biBvcGVuZWQnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbG9zZSBkcm9wZG93biBtZW51XG4gICAqL1xuICBjbG9zZURyb3Bkb3duKCkge1xuICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG4gICAgdGhpcy50b2dnbGUuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyk7XG4gICAgXG4gICAgLy8gUm90YXRlIGFycm93IGJhY2tcbiAgICBpZiAodGhpcy5kcm9wZG93bkFycm93KSB7XG4gICAgICB0aGlzLmRyb3Bkb3duQXJyb3cuc3R5bGUudHJhbnNmb3JtID0gJ3JvdGF0ZSgwZGVnKSc7XG4gICAgfVxuXG4gICAgLy8gQW5pbWF0ZSBvdXRcbiAgICB0aGlzLmRyb3Bkb3duLnN0eWxlLm9wYWNpdHkgPSAnMCc7XG4gICAgdGhpcy5kcm9wZG93bi5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWSgtMTBweCknO1xuICAgIFxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5kcm9wZG93bi5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgIHRoaXMuZHJvcGRvd24uc3R5bGUudHJhbnNpdGlvbiA9ICcnO1xuICAgICAgdGhpcy5kcm9wZG93bi5zdHlsZS5vcGFjaXR5ID0gJyc7XG4gICAgICB0aGlzLmRyb3Bkb3duLnN0eWxlLnRyYW5zZm9ybSA9ICcnO1xuICAgIH0sIHRoaXMub3B0aW9ucy5hbmltYXRpb25EdXJhdGlvbik7XG5cbiAgICBsb2cuZGVidWcoJ0xhdW5jaCBkcm9wZG93biBjbG9zZWQnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRyYWN0IHBsYXRmb3JtIG5hbWUgZnJvbSBVUkwgZm9yIGFuYWx5dGljc1xuICAgKi9cbiAgZ2V0UGxhdGZvcm1Gcm9tVXJsKHVybCkge1xuICAgIGlmICh1cmwuaW5jbHVkZXMoJ2NvbGFiLnJlc2VhcmNoLmdvb2dsZS5jb20nKSkgcmV0dXJuICdjb2xhYic7XG4gICAgaWYgKHVybC5pbmNsdWRlcygnbXliaW5kZXIub3JnJykpIHJldHVybiAnYmluZGVyJztcbiAgICBpZiAodXJsLmluY2x1ZGVzKCduYnZpZXdlci5qdXB5dGVyLm9yZycpKSByZXR1cm4gJ25idmlld2VyJztcbiAgICBpZiAodXJsLmluY2x1ZGVzKCdnaXRodWIuZGV2JykpIHJldHVybiAnZ2l0aHViLWRldic7XG4gICAgaWYgKHVybC5pbmNsdWRlcygnZ2l0aHViLmNvbScpKSByZXR1cm4gJ2dpdGh1Yic7XG4gICAgcmV0dXJuICd1bmtub3duJztcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFjayBwbGF0Zm9ybSBsYXVuY2ggZm9yIGFuYWx5dGljcyAoY2FuIGJlIGVuaGFuY2VkKVxuICAgKi9cbiAgdHJhY2tQbGF0Zm9ybUxhdW5jaChwbGF0Zm9ybSkge1xuICAgIC8vIEVtaXQgZXZlbnQgZm9yIHBvdGVudGlhbCBhbmFseXRpY3MgaW50ZWdyYXRpb25cbiAgICB0aGlzLmVtaXQoJ25vdGVib29rOnBsYXRmb3JtLWxhdW5jaCcsIHsgXG4gICAgICBwbGF0Zm9ybSxcbiAgICAgIG5vdGVib29rUGF0aDogdGhpcy5lbGVtZW50LmRhdGFzZXQubm90ZWJvb2tQYXRoLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9KTtcblxuICAgIC8vIE9wdGlvbmFsOiBDb25zb2xlIGxvZ2dpbmcgZm9yIGRldmVsb3BtZW50XG4gICAgbG9nLmRlYnVnKGBOb3RlYm9vayBsYXVuY2hlZCBvbiBwbGF0Zm9ybTogJHtwbGF0Zm9ybX1gKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgbGF1bmNoIHN0YXRpc3RpY3NcbiAgICovXG4gIGdldFN0YXRzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBpc09wZW46IHRoaXMuaXNPcGVuLFxuICAgICAgcGxhdGZvcm1Db3VudDogdGhpcy5kcm9wZG93bi5xdWVyeVNlbGVjdG9yQWxsKCdhW3RhcmdldD1cIl9ibGFua1wiXScpLmxlbmd0aCxcbiAgICAgIGhhc05vdGVib29rOiAhIXRoaXMuZWxlbWVudC5kYXRhc2V0Lm5vdGVib29rUGF0aFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQ2xlYW4gdXAgd2hlbiBjb21wb25lbnQgaXMgZGVzdHJveWVkXG4gICAqL1xuICBvbkRlc3Ryb3koKSB7XG4gICAgaWYgKHRoaXMuaXNPcGVuKSB7XG4gICAgICB0aGlzLmNsb3NlRHJvcGRvd24oKTtcbiAgICB9XG4gIH1cbn1cblxuLy8gQXV0by1yZWdpc3RlciB0aGUgY29tcG9uZW50XG5pbXBvcnQgQ29tcG9uZW50TWFuYWdlciBmcm9tICcuLi8uLi9jb3JlL0NvbXBvbmVudE1hbmFnZXIuanMnO1xuQ29tcG9uZW50TWFuYWdlci5yZWdpc3Rlcignbm90ZWJvb2stbGF1bmNoJywgTm90ZWJvb2tMYXVuY2gpOyIsICIvKipcbiAqIFVuaXZlcnNhbCBDb2xsYXBzZSBDb21wb25lbnRcbiAqIEJhc2UgY29tcG9uZW50IGZvciBhbGwgY29sbGFwc2UvZXhwYW5kIGZ1bmN0aW9uYWxpdHkgYWNyb3NzIHRoZSB0aGVtZVxuICogRm9sbG93cyBDb21wb25lbnRNYW5hZ2VyIHBhdHRlcm5zIGFuZCBwcm92aWRlcyBjb25zaXN0ZW50IGJlaGF2aW9yXG4gKi9cblxuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vY29yZS9Db21wb25lbnQuanMnO1xuaW1wb3J0IHsgYW5pbWF0aW9uQnJpZGdlIH0gZnJvbSAnLi4vLi4vY29yZS9BbmltYXRpb25CcmlkZ2UuanMnO1xuaW1wb3J0IHsgbG9jYWxTdG9yYWdlIGFzIHNhZmVMb2NhbFN0b3JhZ2UgfSBmcm9tICcuLi8uLi91dGlscy9zdG9yYWdlLmpzJztcblxuY2xhc3MgQ29sbGFwc2UgZXh0ZW5kcyBDb21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcihjb25maWcgPSB7fSkge1xuICAgIHN1cGVyKHtcbiAgICAgIG5hbWU6ICdjb2xsYXBzZScsXG4gICAgICBzZWxlY3RvcjogY29uZmlnLnNlbGVjdG9yIHx8ICcuY29sbGFwc2VfX2hlYWRlcicsXG4gICAgICAuLi5jb25maWdcbiAgICB9KTtcblxuICAgIHRoaXMub3B0aW9ucyA9IHtcbiAgICAgIGFuaW1hdGlvbkR1cmF0aW9uOiAzMDAsXG4gICAgICBzdG9yZVN0YXRlOiBmYWxzZSxcbiAgICAgIG5hbWVzcGFjZTogJ2NvbGxhcHNlJyxcbiAgICAgIGF1dG9Jbml0OiB0cnVlLFxuICAgICAgLi4uY29uZmlnXG4gICAgfTtcblxuICAgIHRoaXMuY29sbGFwc2VFbGVtZW50cyA9IG5ldyBNYXAoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIGNvbGxhcHNlIGZ1bmN0aW9uYWxpdHlcbiAgICovXG4gIGFzeW5jIG9uSW5pdCgpIHtcbiAgICBpZiAodGhpcy5vcHRpb25zLmF1dG9Jbml0KSB7XG4gICAgICB0aGlzLnNldHVwQ29sbGFwc2VFbGVtZW50cygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCBhbGwgY29sbGFwc2UgZWxlbWVudHNcbiAgICovXG4gIHNldHVwQ29sbGFwc2VFbGVtZW50cygpIHtcbiAgICBjb25zdCBoZWFkZXJzID0gdGhpcy5maW5kRWxlbWVudHMoKTtcblxuICAgIGhlYWRlcnMuZm9yRWFjaChoZWFkZXIgPT4ge1xuICAgICAgdGhpcy5pbml0aWFsaXplQ29sbGFwc2VIZWFkZXIoaGVhZGVyKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIGEgc2luZ2xlIGNvbGxhcHNlIGhlYWRlclxuICAgKi9cbiAgaW5pdGlhbGl6ZUNvbGxhcHNlSGVhZGVyKGhlYWRlcikge1xuICAgIC8vIFNraXAgaWYgYWxyZWFkeSBpbml0aWFsaXplZFxuICAgIGlmIChoZWFkZXIuaGFzQXR0cmlidXRlKCdkYXRhLWNvbGxhcHNlLWluaXRpYWxpemVkJykpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB0YXJnZXQgPSBoZWFkZXIuZ2V0QXR0cmlidXRlKCdkYXRhLXRhcmdldCcpO1xuICAgIGNvbnN0IHRhcmdldEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YXJnZXQpO1xuXG4gICAgaWYgKCF0YXJnZXRFbGVtZW50KSB7XG4gICAgICBjb25zb2xlLndhcm4oYFske3RoaXMubmFtZX1dIFRhcmdldCBlbGVtZW50IG5vdCBmb3VuZDogJHt0YXJnZXR9YCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gTWFyayBhcyBpbml0aWFsaXplZFxuICAgIGhlYWRlci5zZXRBdHRyaWJ1dGUoJ2RhdGEtY29sbGFwc2UtaW5pdGlhbGl6ZWQnLCAndHJ1ZScpO1xuXG4gICAgLy8gRW5zdXJlIHRhcmdldCBoYXMgY29sbGFwc2VfX2JvZHkgY2xhc3NcbiAgICBpZiAoIXRhcmdldEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjb2xsYXBzZV9fYm9keScpKSB7XG4gICAgICB0YXJnZXRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2NvbGxhcHNlX19ib2R5Jyk7XG4gICAgfVxuXG4gICAgLy8gU3RvcmUgY29sbGFwc2UgZGF0YVxuICAgIGNvbnN0IGNvbGxhcHNlRGF0YSA9IHtcbiAgICAgIGhlYWRlcixcbiAgICAgIHRhcmdldDogdGFyZ2V0RWxlbWVudCxcbiAgICAgIHRhcmdldElkOiB0YXJnZXQsXG4gICAgICBpc0V4cGFuZGVkOiBoZWFkZXIuZ2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJykgPT09ICd0cnVlJ1xuICAgIH07XG5cbiAgICB0aGlzLmNvbGxhcHNlRWxlbWVudHMuc2V0KHRhcmdldCwgY29sbGFwc2VEYXRhKTtcblxuICAgIC8vIFNldCB1cCBldmVudCBsaXN0ZW5lcnNcbiAgICB0aGlzLmJpbmRDb2xsYXBzZUV2ZW50cyhoZWFkZXIsIGNvbGxhcHNlRGF0YSk7XG5cbiAgICAvLyBSZXN0b3JlIHN0YXRlIGlmIGNvbmZpZ3VyZWRcbiAgICBpZiAodGhpcy5vcHRpb25zLnN0b3JlU3RhdGUpIHtcbiAgICAgIHRoaXMucmVzdG9yZVN0YXRlKGNvbGxhcHNlRGF0YSk7XG4gICAgfVxuXG4gICAgXG4gIH1cblxuICAvKipcbiAgICogQmluZCBldmVudCBsaXN0ZW5lcnMgZm9yIGNvbGxhcHNlIGZ1bmN0aW9uYWxpdHlcbiAgICovXG4gIGJpbmRDb2xsYXBzZUV2ZW50cyhoZWFkZXIsIGNvbGxhcHNlRGF0YSkge1xuICAgIC8vIFVzZSB0aGUgZW5oYW5jZWQgZXZlbnQgbGlzdGVuZXIgbWV0aG9kcyBmb3IgYXV0b21hdGljIGNsZWFudXBcbiAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoaGVhZGVyLCAnY2xpY2snLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIHRoaXMudG9nZ2xlKGNvbGxhcHNlRGF0YSk7XG4gICAgfSk7XG5cbiAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoaGVhZGVyLCAna2V5ZG93bicsIChlKSA9PiB7XG4gICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicgfHwgZS5rZXkgPT09ICcgJykge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMudG9nZ2xlKGNvbGxhcHNlRGF0YSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVG9nZ2xlIGNvbGxhcHNlIHN0YXRlXG4gICAqL1xuICB0b2dnbGUoY29sbGFwc2VEYXRhKSB7XG4gICAgY29uc3QgbmV3U3RhdGUgPSAhY29sbGFwc2VEYXRhLmlzRXhwYW5kZWQ7XG5cbiAgICBpZiAobmV3U3RhdGUpIHtcbiAgICAgIHRoaXMuZXhwYW5kKGNvbGxhcHNlRGF0YSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY29sbGFwc2UoY29sbGFwc2VEYXRhKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRXhwYW5kIGEgY29sbGFwc2UgZWxlbWVudFxuICAgKi9cbiAgYXN5bmMgZXhwYW5kKGNvbGxhcHNlRGF0YSkge1xuICAgIGNvbnN0IHsgaGVhZGVyLCB0YXJnZXQsIHRhcmdldElkIH0gPSBjb2xsYXBzZURhdGE7XG5cbiAgICAvLyBVcGRhdGUgc3RhdGUgdXNpbmcgbmV3IGFuaW1hdGlvbiBicmlkZ2VcbiAgICBjb2xsYXBzZURhdGEuaXNFeHBhbmRlZCA9IHRydWU7XG4gICAgXG4gICAgLy8gVXNlIGFuaW1hdGlvbiBicmlkZ2UgZm9yIGNvbnNpc3RlbnQgc3RhdGUgbWFuYWdlbWVudFxuICAgIGF3YWl0IGFuaW1hdGlvbkJyaWRnZS5leHBhbmQodGFyZ2V0LCB7IHRpbWluZzogJ21lZGl1bScgfSk7XG5cbiAgICAvLyBTdG9yZSBzdGF0ZSBpZiBjb25maWd1cmVkXG4gICAgaWYgKHRoaXMub3B0aW9ucy5zdG9yZVN0YXRlKSB7XG4gICAgICB0aGlzLnNhdmVTdGF0ZSh0YXJnZXRJZCwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgLy8gRW1pdCBldmVudFxuICAgIHRoaXMuZW1pdCgnY29sbGFwc2U6ZXhwYW5kZWQnLCB7IHRhcmdldElkLCBoZWFkZXIsIHRhcmdldCB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb2xsYXBzZSBhIGNvbGxhcHNlIGVsZW1lbnRcbiAgICovXG4gIGFzeW5jIGNvbGxhcHNlKGNvbGxhcHNlRGF0YSkge1xuICAgIGNvbnN0IHsgaGVhZGVyLCB0YXJnZXQsIHRhcmdldElkIH0gPSBjb2xsYXBzZURhdGE7XG5cbiAgICAvLyBVcGRhdGUgc3RhdGUgdXNpbmcgbmV3IGFuaW1hdGlvbiBicmlkZ2VcbiAgICBjb2xsYXBzZURhdGEuaXNFeHBhbmRlZCA9IGZhbHNlO1xuICAgIFxuICAgIC8vIFVzZSBhbmltYXRpb24gYnJpZGdlIGZvciBjb25zaXN0ZW50IHN0YXRlIG1hbmFnZW1lbnRcbiAgICBhd2FpdCBhbmltYXRpb25CcmlkZ2UuY29sbGFwc2UodGFyZ2V0LCB7IHRpbWluZzogJ21lZGl1bScgfSk7XG5cbiAgICAvLyBTdG9yZSBzdGF0ZSBpZiBjb25maWd1cmVkXG4gICAgaWYgKHRoaXMub3B0aW9ucy5zdG9yZVN0YXRlKSB7XG4gICAgICB0aGlzLnNhdmVTdGF0ZSh0YXJnZXRJZCwgZmFsc2UpO1xuICAgIH1cblxuICAgIC8vIEVtaXQgZXZlbnRcbiAgICB0aGlzLmVtaXQoJ2NvbGxhcHNlOmNvbGxhcHNlZCcsIHsgdGFyZ2V0SWQsIGhlYWRlciwgdGFyZ2V0IH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEFwcGx5IGV4cGFuZCBhbmltYXRpb24gYW5kIHZpc3VhbCBlZmZlY3RzXG4gICAqL1xuICBhcHBseUV4cGFuZEFuaW1hdGlvbih0YXJnZXQsIGhlYWRlcikge1xuICAgIC8vIFNtb290aCBoZWlnaHQgYW5pbWF0aW9uXG4gICAgaWYgKHRoaXMub3B0aW9ucy5hbmltYXRpb25EdXJhdGlvbiA+IDApIHtcbiAgICAgIHRhcmdldC5zdHlsZS5tYXhIZWlnaHQgPSB0YXJnZXQuc2Nyb2xsSGVpZ2h0ICsgJ3B4JztcbiAgICAgIHRhcmdldC5zdHlsZS50cmFuc2l0aW9uID0gYG1heC1oZWlnaHQgJHt0aGlzLm9wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb259bXMgY3ViaWMtYmV6aWVyKDAuNCwgMCwgMC4yLCAxKWA7XG4gICAgfVxuXG4gICAgLy8gUm90YXRlIGNoZXZyb24vaWNvblxuICAgIGNvbnN0IGljb24gPSBoZWFkZXIucXVlcnlTZWxlY3RvcignLmNoZXZyb24sIC5jb2xsYXBzZV9faWNvbiwgLnJlc3BvbnNlLXRvZ2dsZSBzdmcsIC5jb21wb25lbnQtdG9nZ2xlIHN2ZycpO1xuICAgIGlmIChpY29uKSB7XG4gICAgICBpY29uLnN0eWxlLnRyYW5zZm9ybSA9ICdyb3RhdGUoOTBkZWcpJztcbiAgICAgIGljb24uc3R5bGUudHJhbnNpdGlvbiA9IGB0cmFuc2Zvcm0gJHt0aGlzLm9wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb259bXMgZWFzZWA7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFwcGx5IGNvbGxhcHNlIGFuaW1hdGlvbiBhbmQgdmlzdWFsIGVmZmVjdHNcbiAgICovXG4gIGFwcGx5Q29sbGFwc2VBbmltYXRpb24odGFyZ2V0LCBoZWFkZXIpIHtcbiAgICAvLyBTbW9vdGggaGVpZ2h0IGFuaW1hdGlvblxuICAgIGlmICh0aGlzLm9wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb24gPiAwKSB7XG4gICAgICB0YXJnZXQuc3R5bGUubWF4SGVpZ2h0ID0gbnVsbDtcbiAgICAgIHRhcmdldC5zdHlsZS50cmFuc2l0aW9uID0gYG1heC1oZWlnaHQgJHt0aGlzLm9wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb259bXMgY3ViaWMtYmV6aWVyKDAuNCwgMCwgMC4yLCAxKWA7XG4gICAgfVxuXG4gICAgLy8gUmVzZXQgY2hldnJvbi9pY29uXG4gICAgY29uc3QgaWNvbiA9IGhlYWRlci5xdWVyeVNlbGVjdG9yKCcuY2hldnJvbiwgLmNvbGxhcHNlX19pY29uLCAucmVzcG9uc2UtdG9nZ2xlIHN2ZywgLmNvbXBvbmVudC10b2dnbGUgc3ZnJyk7XG4gICAgaWYgKGljb24pIHtcbiAgICAgIGljb24uc3R5bGUudHJhbnNmb3JtID0gJ3JvdGF0ZSgwZGVnKSc7XG4gICAgICBpY29uLnN0eWxlLnRyYW5zaXRpb24gPSBgdHJhbnNmb3JtICR7dGhpcy5vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9ufW1zIGVhc2VgO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTYXZlIGNvbGxhcHNlIHN0YXRlIHRvIGxvY2FsU3RvcmFnZVxuICAgKi9cbiAgc2F2ZVN0YXRlKHRhcmdldElkLCBpc0V4cGFuZGVkKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGtleSA9IGAke3RoaXMub3B0aW9ucy5uYW1lc3BhY2V9LSR7dGFyZ2V0SWR9YDtcbiAgICAgIHNhZmVMb2NhbFN0b3JhZ2Uuc2V0KGtleSwgaXNFeHBhbmRlZCA/ICdleHBhbmRlZCcgOiAnY29sbGFwc2VkJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybihgWyR7dGhpcy5uYW1lfV0gQ291bGQgbm90IHNhdmUgc3RhdGU6YCwgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXN0b3JlIGNvbGxhcHNlIHN0YXRlIGZyb20gbG9jYWxTdG9yYWdlXG4gICAqL1xuICByZXN0b3JlU3RhdGUoY29sbGFwc2VEYXRhKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGtleSA9IGAke3RoaXMub3B0aW9ucy5uYW1lc3BhY2V9LSR7Y29sbGFwc2VEYXRhLnRhcmdldElkfWA7XG4gICAgICBjb25zdCBzYXZlZFN0YXRlID0gc2FmZUxvY2FsU3RvcmFnZS5nZXQoa2V5KTtcbiAgICAgIFxuICAgICAgaWYgKHNhdmVkU3RhdGUgPT09ICdleHBhbmRlZCcgJiYgIWNvbGxhcHNlRGF0YS5pc0V4cGFuZGVkKSB7XG4gICAgICAgIHRoaXMuZXhwYW5kKGNvbGxhcHNlRGF0YSk7XG4gICAgICB9IGVsc2UgaWYgKHNhdmVkU3RhdGUgPT09ICdjb2xsYXBzZWQnICYmIGNvbGxhcHNlRGF0YS5pc0V4cGFuZGVkKSB7XG4gICAgICAgIHRoaXMuY29sbGFwc2UoY29sbGFwc2VEYXRhKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKGBbJHt0aGlzLm5hbWV9XSBDb3VsZCBub3QgcmVzdG9yZSBzdGF0ZTpgLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFB1YmxpYyBBUEk6IEV4cGFuZCBzcGVjaWZpYyBlbGVtZW50XG4gICAqL1xuICBleHBhbmRFbGVtZW50KHRhcmdldElkKSB7XG4gICAgY29uc3QgY29sbGFwc2VEYXRhID0gdGhpcy5jb2xsYXBzZUVsZW1lbnRzLmdldCh0YXJnZXRJZCk7XG4gICAgaWYgKGNvbGxhcHNlRGF0YSAmJiAhY29sbGFwc2VEYXRhLmlzRXhwYW5kZWQpIHtcbiAgICAgIHRoaXMuZXhwYW5kKGNvbGxhcHNlRGF0YSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFB1YmxpYyBBUEk6IENvbGxhcHNlIHNwZWNpZmljIGVsZW1lbnRcbiAgICovXG4gIGNvbGxhcHNlRWxlbWVudCh0YXJnZXRJZCkge1xuICAgIGNvbnN0IGNvbGxhcHNlRGF0YSA9IHRoaXMuY29sbGFwc2VFbGVtZW50cy5nZXQodGFyZ2V0SWQpO1xuICAgIGlmIChjb2xsYXBzZURhdGEgJiYgY29sbGFwc2VEYXRhLmlzRXhwYW5kZWQpIHtcbiAgICAgIHRoaXMuY29sbGFwc2UoY29sbGFwc2VEYXRhKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUHVibGljIEFQSTogRXhwYW5kIGFsbCBlbGVtZW50c1xuICAgKi9cbiAgZXhwYW5kQWxsKCkge1xuICAgIHRoaXMuY29sbGFwc2VFbGVtZW50cy5mb3JFYWNoKChjb2xsYXBzZURhdGEpID0+IHtcbiAgICAgIGlmICghY29sbGFwc2VEYXRhLmlzRXhwYW5kZWQpIHtcbiAgICAgICAgdGhpcy5leHBhbmQoY29sbGFwc2VEYXRhKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQdWJsaWMgQVBJOiBDb2xsYXBzZSBhbGwgZWxlbWVudHNcbiAgICovXG4gIGNvbGxhcHNlQWxsKCkge1xuICAgIHRoaXMuY29sbGFwc2VFbGVtZW50cy5mb3JFYWNoKChjb2xsYXBzZURhdGEpID0+IHtcbiAgICAgIGlmIChjb2xsYXBzZURhdGEuaXNFeHBhbmRlZCkge1xuICAgICAgICB0aGlzLmNvbGxhcHNlKGNvbGxhcHNlRGF0YSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYW51cCB3aGVuIGNvbXBvbmVudCBpcyBkZXN0cm95ZWRcbiAgICovXG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5jb2xsYXBzZUVsZW1lbnRzLmNsZWFyKCk7XG4gICAgc3VwZXIuZGVzdHJveSgpO1xuICB9XG59XG5cbi8vIEV4cG9ydCBmb3IgdXNlIGJ5IG90aGVyIGNvbXBvbmVudHNcbmV4cG9ydCB7IENvbGxhcHNlIH07XG5leHBvcnQgZGVmYXVsdCBDb2xsYXBzZTsiLCAiLyoqXG4gKiBOb3RlYm9va0NvbGxhcHNlIENvbXBvbmVudFxuICogSW5pdGlhbGl6ZXMgY29sbGFwc2UvZXhwYW5kIGJlaGF2aW9yIGZvciBub3RlYm9vayBjZWxscyB1c2luZyB0aGUgYmFzZSBDb2xsYXBzZVxuICogRW5zdXJlcyBBUklBIGFuZCBkYXRhIGF0dHJpYnV0ZXMgcmVmbGVjdCBzdGF0ZSBmb3IgaWNvbiByb3RhdGlvbiBhbmQgYWNjZXNzaWJpbGl0eVxuICovXG5cbmltcG9ydCBDb2xsYXBzZSBmcm9tICcuLi91aS9Db2xsYXBzZS5qcyc7XG5pbXBvcnQgQ29tcG9uZW50TWFuYWdlciBmcm9tICcuLi8uLi9jb3JlL0NvbXBvbmVudE1hbmFnZXIuanMnO1xuXG5jbGFzcyBOb3RlYm9va0NvbGxhcHNlIGV4dGVuZHMgQ29sbGFwc2Uge1xuICBjb25zdHJ1Y3Rvcihjb25maWcgPSB7fSkge1xuICAgIHN1cGVyKHtcbiAgICAgIG5hbWU6ICdub3RlYm9vay1jb2xsYXBzZScsXG4gICAgICBzZWxlY3RvcjogY29uZmlnLnNlbGVjdG9yIHx8ICcubm90ZWJvb2stY2VsbDpub3QoLm5vdGVib29rLWNlbGwtLW1hcmtkb3duKSAuY29sbGFwc2VfX2hlYWRlcicsXG4gICAgICAuLi5jb25maWdcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGV4cGFuZChjb2xsYXBzZURhdGEpIHtcbiAgICBjb25zdCB7IGhlYWRlciwgdGFyZ2V0IH0gPSBjb2xsYXBzZURhdGE7XG4gICAgYXdhaXQgc3VwZXIuZXhwYW5kKGNvbGxhcHNlRGF0YSk7XG4gICAgY29uc3Qgc2VjdGlvbiA9IGhlYWRlci5jbG9zZXN0KCcuY29sbGFwc2UnKTtcbiAgICBpZiAoc2VjdGlvbikgc2VjdGlvbi5zZXRBdHRyaWJ1dGUoJ2RhdGEtY29sbGFwc2Utc3RhdGUnLCAnZXhwYW5kZWQnKTtcbiAgICBpZiAodGFyZ2V0KSB0YXJnZXQuc2V0QXR0cmlidXRlKCdkYXRhLWNvbGxhcHNlLXN0YXRlJywgJ2V4cGFuZGVkJyk7XG4gICAgaGVhZGVyLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICd0cnVlJyk7XG4gIH1cblxuICBhc3luYyBjb2xsYXBzZShjb2xsYXBzZURhdGEpIHtcbiAgICBjb25zdCB7IGhlYWRlciwgdGFyZ2V0IH0gPSBjb2xsYXBzZURhdGE7XG4gICAgYXdhaXQgc3VwZXIuY29sbGFwc2UoY29sbGFwc2VEYXRhKTtcbiAgICBjb25zdCBzZWN0aW9uID0gaGVhZGVyLmNsb3Nlc3QoJy5jb2xsYXBzZScpO1xuICAgIGlmIChzZWN0aW9uKSBzZWN0aW9uLnNldEF0dHJpYnV0ZSgnZGF0YS1jb2xsYXBzZS1zdGF0ZScsICdjb2xsYXBzZWQnKTtcbiAgICBpZiAodGFyZ2V0KSB0YXJnZXQuc2V0QXR0cmlidXRlKCdkYXRhLWNvbGxhcHNlLXN0YXRlJywgJ2NvbGxhcHNlZCcpO1xuICAgIGhlYWRlci5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnKTtcbiAgfVxufVxuXG4vLyBBdXRvLXJlZ2lzdGVyIGNvbXBvbmVudFxuQ29tcG9uZW50TWFuYWdlci5yZWdpc3Rlcignbm90ZWJvb2stY29sbGFwc2UnLCBOb3RlYm9va0NvbGxhcHNlKTtcblxuZXhwb3J0IGRlZmF1bHQgTm90ZWJvb2tDb2xsYXBzZTtcblxuXG4iLCAiLyoqXG4gKiBPcGVuQVBJIFZpZXdlciBDb21wb25lbnRcbiAqIEhhbmRsZXMgT3BlbkFQSSBkb2N1bWVudGF0aW9uIHJlbmRlcmluZyBhbmQgaW50ZXJhY3Rpb25zXG4gKi9cblxuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vY29yZS9Db21wb25lbnQuanMnO1xuaW1wb3J0IENvbXBvbmVudE1hbmFnZXIgZnJvbSAnLi4vLi4vY29yZS9Db21wb25lbnRNYW5hZ2VyLmpzJztcbmltcG9ydCB7ICQkLCAkLCBDb3B5TWFuYWdlciwgbG9jYWxTdG9yYWdlIH0gZnJvbSAnLi4vLi4vdXRpbHMvaW5kZXguanMnO1xuaW1wb3J0IHsgYW5pbWF0aW9uQnJpZGdlIH0gZnJvbSAnLi4vLi4vY29yZS9BbmltYXRpb25CcmlkZ2UuanMnO1xuXG5leHBvcnQgY2xhc3MgT3BlbkFQSVZpZXdlciBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZyA9IHt9KSB7XG4gICAgc3VwZXIoe1xuICAgICAgbmFtZTogJ29wZW5hcGktdmlld2VyJyxcbiAgICAgIHNlbGVjdG9yOiBjb25maWcuc2VsZWN0b3IgfHwgJ1tkYXRhLWNvbXBvbmVudD1cIm9wZW5hcGktdmlld2VyXCJdJyxcbiAgICAgIC4uLmNvbmZpZ1xuICAgIH0pO1xuICAgIFxuICAgIHRoaXMuY3VycmVudEZpbHRlciA9ICdhbGwnO1xuICAgIHRoaXMuZW5kcG9pbnRzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMub3B0aW9ucyA9IHtcbiAgICAgIGF1dG9Db2xsYXBzZTogdHJ1ZSxcbiAgICAgIHN0b3JlUHJlZmVyZW5jZXM6IHRydWUsXG4gICAgICBuYW1lc3BhY2U6ICdvcGVuYXBpLXZpZXdlcicsXG4gICAgICAuLi50aGlzLm9wdGlvbnNcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIGVsZW1lbnRzIGFuZCBpbml0aWFsaXplIE9wZW5BUEkgdmlld2VyXG4gICAqL1xuICBzZXR1cEVsZW1lbnRzKCkge1xuICAgIHN1cGVyLnNldHVwRWxlbWVudHMoKTtcbiAgICBcbiAgICAvLyBGaW5kIGFsbCBlbmRwb2ludHNcbiAgICB0aGlzLmVuZHBvaW50RWxlbWVudHMgPSAkJCgnLmVuZHBvaW50LWl0ZW0nKTtcbiAgICBpZiAodGhpcy5lbmRwb2ludEVsZW1lbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuICAgIFxuICAgIC8vIFNldHVwIGVuZHBvaW50c1xuICAgIHRoaXMuZW5kcG9pbnRFbGVtZW50cy5mb3JFYWNoKGVuZHBvaW50ID0+IHRoaXMuc2V0dXBFbmRwb2ludChlbmRwb2ludCkpO1xuICAgIFxuICAgIC8vIExvYWQgbWV0YWRhdGFcbiAgICB0aGlzLmxvYWRNZXRhZGF0YSgpO1xuICAgIFxuICAgIC8vIExvYWQgdXNlciBwcmVmZXJlbmNlc1xuICAgIGlmICh0aGlzLm9wdGlvbnMuc3RvcmVQcmVmZXJlbmNlcykge1xuICAgICAgdGhpcy5sb2FkUHJlZmVyZW5jZXMoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0dXAgaW5kaXZpZHVhbCBlbmRwb2ludFxuICAgKi9cbiAgc2V0dXBFbmRwb2ludChlbmRwb2ludCkge1xuICAgIGNvbnN0IGhlYWRlciA9IGVuZHBvaW50LnF1ZXJ5U2VsZWN0b3IoJy5lbmRwb2ludC1oZWFkZXInKTtcbiAgICBjb25zdCBkZXRhaWxzID0gZW5kcG9pbnQucXVlcnlTZWxlY3RvcignLmVuZHBvaW50LWRldGFpbHMnKTtcbiAgICBjb25zdCBtZXRob2QgPSBlbmRwb2ludC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbWV0aG9kJyk7XG4gICAgY29uc3QgcGF0aCA9IGVuZHBvaW50LmdldEF0dHJpYnV0ZSgnZGF0YS1wYXRoJyk7XG4gICAgXG4gICAgaWYgKCFoZWFkZXIgfHwgIWRldGFpbHMpIHtcbiAgICAgIGNvbnNvbGUud2FybignRW5kcG9pbnQgbWlzc2luZyBoZWFkZXIgb3IgZGV0YWlsczonLCBlbmRwb2ludCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIC8vIEdlbmVyYXRlIHVuaXF1ZSBJRCBmb3IgZW5kcG9pbnQgaWYgbm90IHByZXNlbnRcbiAgICBpZiAoIWVuZHBvaW50LmlkKSB7XG4gICAgICBlbmRwb2ludC5pZCA9IGBlbmRwb2ludC0ke21ldGhvZH0tJHtwYXRofWAucmVwbGFjZSgvW15hLXpBLVowLTktXS9nLCAnLScpO1xuICAgIH1cbiAgICBcbiAgICAvLyBTZXR1cCBBUklBIGF0dHJpYnV0ZXNcbiAgICBoZWFkZXIuc2V0QXR0cmlidXRlKCdhcmlhLWNvbnRyb2xzJywgZGV0YWlscy5pZCB8fCBgJHtlbmRwb2ludC5pZH0tZGV0YWlsc2ApO1xuICAgIGRldGFpbHMuaWQgPSBkZXRhaWxzLmlkIHx8IGAke2VuZHBvaW50LmlkfS1kZXRhaWxzYDtcbiAgICBcbiAgICAvLyBTdG9yZSBlbmRwb2ludCBkYXRhXG4gICAgdGhpcy5lbmRwb2ludHMuc2V0KGVuZHBvaW50LCB7XG4gICAgICBoZWFkZXIsXG4gICAgICBkZXRhaWxzLFxuICAgICAgbWV0aG9kLFxuICAgICAgcGF0aCxcbiAgICAgIGlzRXhwYW5kZWQ6IGZhbHNlLFxuICAgICAgdGFnczogdGhpcy5nZXRFbmRwb2ludFRhZ3MoZW5kcG9pbnQpXG4gICAgfSk7XG4gICAgXG4gICAgLy8gQWRkIGNvbXBvbmVudCB0cmFja2luZ1xuICAgIGVuZHBvaW50LnNldEF0dHJpYnV0ZSgnZGF0YS1vcGVuYXBpLWNvbXBvbmVudCcsIHRoaXMuaWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBlbmRwb2ludCB0YWdzIGZvciBmaWx0ZXJpbmdcbiAgICovXG4gIGdldEVuZHBvaW50VGFncyhlbmRwb2ludCkge1xuICAgIGNvbnN0IHRhZ3MgPSBbXTtcbiAgICBjb25zdCB0YWdFbGVtZW50cyA9IGVuZHBvaW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lbmRwb2ludC10YWcnKTtcbiAgICB0YWdFbGVtZW50cy5mb3JFYWNoKHRhZyA9PiB7XG4gICAgICB0YWdzLnB1c2godGFnLnRleHRDb250ZW50LnRyaW0oKS50b0xvd2VyQ2FzZSgpKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGFncztcbiAgfVxuXG4gIC8qKlxuICAgKiBMb2FkIE9wZW5BUEkgbWV0YWRhdGFcbiAgICovXG4gIGxvYWRNZXRhZGF0YSgpIHtcbiAgICBjb25zdCBtZXRhZGF0YVNjcmlwdCA9ICQoJyNvcGVuYXBpLW1ldGFkYXRhJyk7XG4gICAgaWYgKG1ldGFkYXRhU2NyaXB0KSB7XG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLm1ldGFkYXRhID0gSlNPTi5wYXJzZShtZXRhZGF0YVNjcmlwdC50ZXh0Q29udGVudCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBwYXJzZSBPcGVuQVBJIG1ldGFkYXRhOicsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQmluZCBldmVudCBsaXN0ZW5lcnNcbiAgICovXG4gIGJpbmRFdmVudHMoKSB7XG4gICAgLy8gRW5kcG9pbnQgaGVhZGVyIGNsaWNrc1xuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihkb2N1bWVudCwgJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIGNvbnN0IGhlYWRlciA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5lbmRwb2ludC1oZWFkZXInKTtcbiAgICAgIGlmIChoZWFkZXIpIHtcbiAgICAgICAgY29uc3QgZW5kcG9pbnQgPSBoZWFkZXIuY2xvc2VzdCgnLmVuZHBvaW50LWl0ZW0nKTtcbiAgICAgICAgaWYgKGVuZHBvaW50ICYmIHRoaXMuZW5kcG9pbnRzLmhhcyhlbmRwb2ludCkpIHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgdGhpcy50b2dnbGVFbmRwb2ludChlbmRwb2ludCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICAvLyBLZXlib2FyZCBzdXBwb3J0IGZvciBlbmRwb2ludCBoZWFkZXJzXG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGRvY3VtZW50LCAna2V5ZG93bicsIChlKSA9PiB7XG4gICAgICBjb25zdCBoZWFkZXIgPSBlLnRhcmdldC5jbG9zZXN0KCcuZW5kcG9pbnQtaGVhZGVyJyk7XG4gICAgICBpZiAoaGVhZGVyICYmIChlLmtleSA9PT0gJ0VudGVyJyB8fCBlLmtleSA9PT0gJyAnKSkge1xuICAgICAgICBjb25zdCBlbmRwb2ludCA9IGhlYWRlci5jbG9zZXN0KCcuZW5kcG9pbnQtaXRlbScpO1xuICAgICAgICBpZiAoZW5kcG9pbnQgJiYgdGhpcy5lbmRwb2ludHMuaGFzKGVuZHBvaW50KSkge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB0aGlzLnRvZ2dsZUVuZHBvaW50KGVuZHBvaW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIC8vIFRhZyBmaWx0ZXIgY2xpY2tzXG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGRvY3VtZW50LCAnY2xpY2snLCAoZSkgPT4ge1xuICAgICAgY29uc3QgdGFnRmlsdGVyID0gZS50YXJnZXQuY2xvc2VzdCgnLnRhZy1maWx0ZXInKTtcbiAgICAgIGlmICh0YWdGaWx0ZXIpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBjb25zdCB0YWcgPSB0YWdGaWx0ZXIuZ2V0QXR0cmlidXRlKCdkYXRhLXRhZycpO1xuICAgICAgICB0aGlzLmZpbHRlckJ5VGFnKHRhZyk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgLy8gQ29weSBidXR0b24gY2xpY2tzXG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGRvY3VtZW50LCAnY2xpY2snLCAoZSkgPT4ge1xuICAgICAgY29uc3QgY29weUJ0biA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5jb3B5LWJ1dHRvbicpO1xuICAgICAgaWYgKGNvcHlCdG4pIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLmhhbmRsZUNvcHlDbGljayhjb3B5QnRuKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUb2dnbGUgZW5kcG9pbnQgZXhwYW5zaW9uXG4gICAqL1xuICBhc3luYyB0b2dnbGVFbmRwb2ludChlbmRwb2ludCkge1xuICAgIGNvbnN0IGVuZHBvaW50RGF0YSA9IHRoaXMuZW5kcG9pbnRzLmdldChlbmRwb2ludCk7XG4gICAgaWYgKCFlbmRwb2ludERhdGEpIHJldHVybjtcbiAgICBcbiAgICBjb25zdCB7IGhlYWRlciwgZGV0YWlscywgaXNFeHBhbmRlZCB9ID0gZW5kcG9pbnREYXRhO1xuICAgIFxuICAgIC8vIFVwZGF0ZSBzdGF0ZVxuICAgIGVuZHBvaW50RGF0YS5pc0V4cGFuZGVkID0gIWlzRXhwYW5kZWQ7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGlmIChlbmRwb2ludERhdGEuaXNFeHBhbmRlZCkge1xuICAgICAgICBhd2FpdCB0aGlzLmV4cGFuZEVuZHBvaW50KGVuZHBvaW50LCBlbmRwb2ludERhdGEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXdhaXQgdGhpcy5jb2xsYXBzZUVuZHBvaW50KGVuZHBvaW50LCBlbmRwb2ludERhdGEpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBTYXZlIHByZWZlcmVuY2VzXG4gICAgICBpZiAodGhpcy5vcHRpb25zLnN0b3JlUHJlZmVyZW5jZXMpIHtcbiAgICAgICAgdGhpcy5zYXZlUHJlZmVyZW5jZXMoKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gRW1pdCBldmVudHNcbiAgICAgIHRoaXMuZW1pdCgnZW5kcG9pbnQtdG9nZ2xlJywge1xuICAgICAgICBlbmRwb2ludCxcbiAgICAgICAgZXhwYW5kZWQ6IGVuZHBvaW50RGF0YS5pc0V4cGFuZGVkLFxuICAgICAgICBtZXRob2Q6IGVuZHBvaW50RGF0YS5tZXRob2QsXG4gICAgICAgIHBhdGg6IGVuZHBvaW50RGF0YS5wYXRoXG4gICAgICB9KTtcbiAgICAgIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdUb2dnbGUgYW5pbWF0aW9uIGZhaWxlZDonLCBlcnJvcik7XG4gICAgICAvLyBSZXZlcnQgc3RhdGUgb24gZXJyb3JcbiAgICAgIGVuZHBvaW50RGF0YS5pc0V4cGFuZGVkID0gIWVuZHBvaW50RGF0YS5pc0V4cGFuZGVkO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFeHBhbmQgZW5kcG9pbnQgZGV0YWlsc1xuICAgKi9cbiAgYXN5bmMgZXhwYW5kRW5kcG9pbnQoZW5kcG9pbnQsIGVuZHBvaW50RGF0YSkge1xuICAgIGNvbnN0IHsgaGVhZGVyLCBkZXRhaWxzIH0gPSBlbmRwb2ludERhdGE7XG4gICAgXG4gICAgLy8gVXBkYXRlIEFSSUFcbiAgICBoZWFkZXIuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ3RydWUnKTtcbiAgICBcbiAgICAvLyBVc2UgQW5pbWF0aW9uQnJpZGdlIGZvciBjb25zaXN0ZW50IHN0YXRlIG1hbmFnZW1lbnRcbiAgICBhbmltYXRpb25CcmlkZ2Uuc2V0Q29sbGFwc2VTdGF0ZShkZXRhaWxzLCAnZXhwYW5kZWQnKTtcbiAgICBhbmltYXRpb25CcmlkZ2Uuc2V0Q29tcG9uZW50U3RhdGUoZGV0YWlscywgJ3RyYW5zaXRpb25pbmcnKTtcbiAgICBcbiAgICAvLyBVc2UgYW5pbWF0aW9uIGJyaWRnZSBmb3IgdGltaW5nXG4gICAgY29uc3QgZHVyYXRpb24gPSBhbmltYXRpb25CcmlkZ2UuZ2V0VGltaW5nKCdtZWRpdW0nKTtcbiAgICBcbiAgICAvLyBJbml0aWFsaXplIGFueSBjb21wb25lbnRzIHdpdGhpbiB0aGUgZXhwYW5kZWQgc2VjdGlvblxuICAgIHRoaXMuaW5pdGlhbGl6ZU5lc3RlZENvbXBvbmVudHMoZGV0YWlscyk7XG4gICAgXG4gICAgLy8gQ29tcGxldGUgc3RhdGUgdXBkYXRlXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBhbmltYXRpb25CcmlkZ2Uuc2V0Q29tcG9uZW50U3RhdGUoZGV0YWlscywgJ3JlYWR5Jyk7XG4gICAgfSwgZHVyYXRpb24pO1xuICAgIFxuICAgIHRoaXMuZW1pdCgnZW5kcG9pbnQtZXhwYW5kZWQnLCB7IGVuZHBvaW50LCBkZXRhaWxzIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbGxhcHNlIGVuZHBvaW50IGRldGFpbHNcbiAgICovXG4gIGFzeW5jIGNvbGxhcHNlRW5kcG9pbnQoZW5kcG9pbnQsIGVuZHBvaW50RGF0YSkge1xuICAgIGNvbnN0IHsgaGVhZGVyLCBkZXRhaWxzIH0gPSBlbmRwb2ludERhdGE7XG4gICAgXG4gICAgLy8gVXBkYXRlIEFSSUFcbiAgICBoZWFkZXIuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyk7XG4gICAgXG4gICAgLy8gVXNlIEFuaW1hdGlvbkJyaWRnZSBmb3IgY29uc2lzdGVudCBzdGF0ZSBtYW5hZ2VtZW50XG4gICAgYW5pbWF0aW9uQnJpZGdlLnNldENvbXBvbmVudFN0YXRlKGRldGFpbHMsICd0cmFuc2l0aW9uaW5nJyk7XG4gICAgYW5pbWF0aW9uQnJpZGdlLnNldENvbGxhcHNlU3RhdGUoZGV0YWlscywgJ2NvbGxhcHNlZCcpO1xuICAgIFxuICAgIC8vIFVzZSBhbmltYXRpb24gYnJpZGdlIGZvciB0aW1pbmdcbiAgICBjb25zdCBkdXJhdGlvbiA9IGFuaW1hdGlvbkJyaWRnZS5nZXRUaW1pbmcoJ21lZGl1bScpO1xuICAgIFxuICAgIC8vIENvbXBsZXRlIHN0YXRlIHVwZGF0ZVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgYW5pbWF0aW9uQnJpZGdlLnNldENvbXBvbmVudFN0YXRlKGRldGFpbHMsICdyZWFkeScpO1xuICAgIH0sIGR1cmF0aW9uKTtcbiAgICBcbiAgICB0aGlzLmVtaXQoJ2VuZHBvaW50LWNvbGxhcHNlZCcsIHsgZW5kcG9pbnQsIGRldGFpbHMgfSk7XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBuZXN0ZWQgY29tcG9uZW50cyBpbiBleHBhbmRlZCBzZWN0aW9uc1xuICAgKi9cbiAgaW5pdGlhbGl6ZU5lc3RlZENvbXBvbmVudHMoY29udGFpbmVyKSB7XG4gICAgLy8gSW5pdGlhbGl6ZSBjb2RlIHRhYnNcbiAgICBjb25zdCBjb2RlVGFicyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1jb21wb25lbnQ9XCJjb2RlLXRhYnNcIl0nKTtcbiAgICBjb2RlVGFicy5mb3JFYWNoKHRhYnMgPT4ge1xuICAgICAgaWYgKCF0YWJzLmhhc0F0dHJpYnV0ZSgnZGF0YS1pbml0aWFsaXplZCcpKSB7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZUNvZGVUYWJzKHRhYnMpO1xuICAgICAgICB0YWJzLnNldEF0dHJpYnV0ZSgnZGF0YS1pbml0aWFsaXplZCcsICd0cnVlJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBjb2RlIHRhYnMgY29tcG9uZW50XG4gICAqL1xuICBpbml0aWFsaXplQ29kZVRhYnModGFic0NvbnRhaW5lcikge1xuICAgIGNvbnN0IHRhYkJ1dHRvbnMgPSB0YWJzQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jb2RlLXRhYicpO1xuICAgIGNvbnN0IHRhYlBhbmVscyA9IHRhYnNDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmNvZGUtdGFiLXBhbmVsJyk7XG4gICAgXG4gICAgdGFiQnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoYnV0dG9uLCAnY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGNvbnN0IHRhcmdldFRhYiA9IGJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGFiJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBVcGRhdGUgYWN0aXZlIHRhYlxuICAgICAgICB0YWJCdXR0b25zLmZvckVhY2goYnRuID0+IGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdjb2RlLXRhYi0tYWN0aXZlJykpO1xuICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnY29kZS10YWItLWFjdGl2ZScpO1xuICAgICAgICBcbiAgICAgICAgLy8gVXBkYXRlIGFjdGl2ZSBwYW5lbFxuICAgICAgICB0YWJQYW5lbHMuZm9yRWFjaChwYW5lbCA9PiBwYW5lbC5jbGFzc0xpc3QucmVtb3ZlKCdjb2RlLXRhYi1wYW5lbC0tYWN0aXZlJykpO1xuICAgICAgICBjb25zdCB0YXJnZXRQYW5lbCA9IHRhYnNDb250YWluZXIucXVlcnlTZWxlY3RvcihgW2RhdGEtcGFuZWw9XCIke3RhcmdldFRhYn1cIl1gKTtcbiAgICAgICAgaWYgKHRhcmdldFBhbmVsKSB7XG4gICAgICAgICAgdGFyZ2V0UGFuZWwuY2xhc3NMaXN0LmFkZCgnY29kZS10YWItcGFuZWwtLWFjdGl2ZScpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBFbWl0IGV2ZW50XG4gICAgICAgIHRoaXMuZW1pdCgnY29kZS10YWItY2hhbmdlZCcsIHsgdGFiOiB0YXJnZXRUYWIsIGNvbnRhaW5lcjogdGFic0NvbnRhaW5lciB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbHRlciBlbmRwb2ludHMgYnkgdGFnXG4gICAqL1xuICBmaWx0ZXJCeVRhZyh0YWcpIHtcbiAgICB0aGlzLmN1cnJlbnRGaWx0ZXIgPSB0YWc7XG4gICAgXG4gICAgLy8gVXBkYXRlIGFjdGl2ZSBmaWx0ZXIgYnV0dG9uXG4gICAgY29uc3QgZmlsdGVyQnV0dG9ucyA9ICQkKCcudGFnLWZpbHRlcicpO1xuICAgIGZpbHRlckJ1dHRvbnMuZm9yRWFjaChidG4gPT4ge1xuICAgICAgYnRuLmNsYXNzTGlzdC50b2dnbGUoJ3RhZy1maWx0ZXItLWFjdGl2ZScsIGJ0bi5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGFnJykgPT09IHRhZyk7XG4gICAgfSk7XG4gICAgXG4gICAgLy8gU2hvdy9oaWRlIGVuZHBvaW50c1xuICAgIHRoaXMuZW5kcG9pbnRzLmZvckVhY2goKGRhdGEsIGVuZHBvaW50KSA9PiB7XG4gICAgICBjb25zdCBzaG91bGRTaG93ID0gdGFnID09PSAnYWxsJyB8fCBkYXRhLnRhZ3MuaW5jbHVkZXModGFnLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgXG4gICAgICBpZiAoc2hvdWxkU2hvdykge1xuICAgICAgICBlbmRwb2ludC5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgIGVuZHBvaW50LmNsYXNzTGlzdC5yZW1vdmUoJ2VuZHBvaW50LWl0ZW0tLWZpbHRlcmVkJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbmRwb2ludC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICBlbmRwb2ludC5jbGFzc0xpc3QuYWRkKCdlbmRwb2ludC1pdGVtLS1maWx0ZXJlZCcpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIC8vIFNhdmUgZmlsdGVyIHByZWZlcmVuY2VcbiAgICBpZiAodGhpcy5vcHRpb25zLnN0b3JlUHJlZmVyZW5jZXMpIHtcbiAgICAgIHRoaXMuc2F2ZVByZWZlcmVuY2VzKCk7XG4gICAgfVxuICAgIFxuICAgIHRoaXMuZW1pdCgnZmlsdGVyLWNoYW5nZWQnLCB7IHRhZywgZmlsdGVyZWRDb3VudDogdGhpcy5nZXRGaWx0ZXJlZENvdW50KCkgfSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGNvdW50IG9mIGZpbHRlcmVkIGVuZHBvaW50c1xuICAgKi9cbiAgZ2V0RmlsdGVyZWRDb3VudCgpIHtcbiAgICBsZXQgY291bnQgPSAwO1xuICAgIHRoaXMuZW5kcG9pbnRzLmZvckVhY2goKGRhdGEsIGVuZHBvaW50KSA9PiB7XG4gICAgICBpZiAoZW5kcG9pbnQuc3R5bGUuZGlzcGxheSAhPT0gJ25vbmUnKSB7XG4gICAgICAgIGNvdW50Kys7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGNvdW50O1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBjb3B5IGJ1dHRvbiBjbGlja3MgdXNpbmcgdW5pZmllZCBDb3B5TWFuYWdlclxuICAgKi9cbiAgYXN5bmMgaGFuZGxlQ29weUNsaWNrKGJ1dHRvbikge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IENvcHlNYW5hZ2VyLmNvcHkoYnV0dG9uLCB7XG4gICAgICBzdWNjZXNzTWVzc2FnZTogYFxuICAgICAgICA8c3ZnIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIj5cbiAgICAgICAgICA8cGF0aCBkPVwiTTIwIDZMOSAxN2wtNS01XCI+PC9wYXRoPlxuICAgICAgICA8L3N2Zz5cbiAgICAgIGAsXG4gICAgICBlcnJvck1lc3NhZ2U6ICdcdTI3NEMnLFxuICAgICAgZmVlZGJhY2tEdXJhdGlvbjogMjAwMCxcbiAgICAgIGFubm91bmNlTWVzc2FnZTogJ0NvZGUgY29waWVkIHRvIGNsaXBib2FyZCcsXG4gICAgICBhbmFseXRpY3M6IHtcbiAgICAgICAgY29tcG9uZW50OiAnb3BlbmFwaS12aWV3ZXInLFxuICAgICAgICBlbmRwb2ludElkOiBidXR0b24uY2xvc2VzdCgnLmVuZHBvaW50LWl0ZW0nKT8uaWQgfHwgJ3Vua25vd24nXG4gICAgICB9LFxuICAgICAgb25TdWNjZXNzOiAodGV4dCkgPT4ge1xuICAgICAgICB0aGlzLmVtaXQoJ2NvZGUtY29waWVkJywgeyB0ZXh0LCBidXR0b24gfSk7XG4gICAgICB9LFxuICAgICAgb25FcnJvcjogKGVycm9yKSA9PiB7XG4gICAgICAgIHRoaXMuZW1pdCgnY29kZS1jb3B5LWZhaWxlZCcsIHsgZXJyb3IsIGJ1dHRvbiB9KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogRXhwYW5kIGFsbCBlbmRwb2ludHNcbiAgICovXG4gIGFzeW5jIGV4cGFuZEFsbCgpIHtcbiAgICBjb25zdCBleHBhbmRQcm9taXNlcyA9IEFycmF5LmZyb20odGhpcy5lbmRwb2ludHMua2V5cygpKVxuICAgICAgLmZpbHRlcihlbmRwb2ludCA9PiAhdGhpcy5lbmRwb2ludHMuZ2V0KGVuZHBvaW50KS5pc0V4cGFuZGVkKVxuICAgICAgLm1hcChlbmRwb2ludCA9PiB0aGlzLnRvZ2dsZUVuZHBvaW50KGVuZHBvaW50KSk7XG4gICAgXG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoZXhwYW5kUHJvbWlzZXMpO1xuICAgIHRoaXMuZW1pdCgnZXhwYW5kZWQtYWxsJyk7XG4gIH1cblxuICAvKipcbiAgICogQ29sbGFwc2UgYWxsIGVuZHBvaW50c1xuICAgKi9cbiAgYXN5bmMgY29sbGFwc2VBbGwoKSB7XG4gICAgY29uc3QgY29sbGFwc2VQcm9taXNlcyA9IEFycmF5LmZyb20odGhpcy5lbmRwb2ludHMua2V5cygpKVxuICAgICAgLmZpbHRlcihlbmRwb2ludCA9PiB0aGlzLmVuZHBvaW50cy5nZXQoZW5kcG9pbnQpLmlzRXhwYW5kZWQpXG4gICAgICAubWFwKGVuZHBvaW50ID0+IHRoaXMudG9nZ2xlRW5kcG9pbnQoZW5kcG9pbnQpKTtcbiAgICBcbiAgICBhd2FpdCBQcm9taXNlLmFsbChjb2xsYXBzZVByb21pc2VzKTtcbiAgICB0aGlzLmVtaXQoJ2NvbGxhcHNlZC1hbGwnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTYXZlIHVzZXIgcHJlZmVyZW5jZXNcbiAgICovXG4gIHNhdmVQcmVmZXJlbmNlcygpIHtcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5zdG9yZVByZWZlcmVuY2VzKSByZXR1cm47XG4gICAgXG4gICAgY29uc3QgcHJlZmVyZW5jZXMgPSB7XG4gICAgICBmaWx0ZXI6IHRoaXMuY3VycmVudEZpbHRlcixcbiAgICAgIGV4cGFuZGVkRW5kcG9pbnRzOiBbXSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH07XG4gICAgXG4gICAgLy8gU2F2ZSBleHBhbmRlZCBlbmRwb2ludHNcbiAgICB0aGlzLmVuZHBvaW50cy5mb3JFYWNoKChkYXRhLCBlbmRwb2ludCkgPT4ge1xuICAgICAgaWYgKGRhdGEuaXNFeHBhbmRlZCkge1xuICAgICAgICBwcmVmZXJlbmNlcy5leHBhbmRlZEVuZHBvaW50cy5wdXNoKGVuZHBvaW50LmlkKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgbG9jYWxTdG9yYWdlLnNldChgJHt0aGlzLm9wdGlvbnMubmFtZXNwYWNlfS5wcmVmZXJlbmNlc2AsIHByZWZlcmVuY2VzKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gc2F2ZSBPcGVuQVBJIHByZWZlcmVuY2VzOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTG9hZCB1c2VyIHByZWZlcmVuY2VzXG4gICAqL1xuICBsb2FkUHJlZmVyZW5jZXMoKSB7XG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuc3RvcmVQcmVmZXJlbmNlcykgcmV0dXJuO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBwcmVmZXJlbmNlcyA9IGxvY2FsU3RvcmFnZS5nZXQoYCR7dGhpcy5vcHRpb25zLm5hbWVzcGFjZX0ucHJlZmVyZW5jZXNgKTtcbiAgICAgIGlmIChwcmVmZXJlbmNlcykge1xuICAgICAgICBcbiAgICAgICAgLy8gQXBwbHkgZmlsdGVyXG4gICAgICAgIGlmIChwcmVmZXJlbmNlcy5maWx0ZXIgJiYgcHJlZmVyZW5jZXMuZmlsdGVyICE9PSAnYWxsJykge1xuICAgICAgICAgIGNvbnN0IGRlbGF5ID0gYW5pbWF0aW9uQnJpZGdlLmdldFRpbWluZygnZmFzdCcpIC8gNDtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5maWx0ZXJCeVRhZyhwcmVmZXJlbmNlcy5maWx0ZXIpLCBkZWxheSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEV4cGFuZCBwcmV2aW91c2x5IGV4cGFuZGVkIGVuZHBvaW50c1xuICAgICAgICBpZiAocHJlZmVyZW5jZXMuZXhwYW5kZWRFbmRwb2ludHMgJiYgcHJlZmVyZW5jZXMuZXhwYW5kZWRFbmRwb2ludHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgcHJlZmVyZW5jZXMuZXhwYW5kZWRFbmRwb2ludHMuZm9yRWFjaChlbmRwb2ludElkID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgZW5kcG9pbnQgPSAkKGAjJHtlbmRwb2ludElkfWApO1xuICAgICAgICAgICAgICBpZiAoZW5kcG9pbnQgJiYgdGhpcy5lbmRwb2ludHMuaGFzKGVuZHBvaW50KSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVuZHBvaW50RGF0YSA9IHRoaXMuZW5kcG9pbnRzLmdldChlbmRwb2ludCk7XG4gICAgICAgICAgICAgICAgaWYgKCFlbmRwb2ludERhdGEuaXNFeHBhbmRlZCkge1xuICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVFbmRwb2ludChlbmRwb2ludCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LCAyMDApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIGxvYWQgT3BlbkFQSSBwcmVmZXJlbmNlczonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjb21wb25lbnQgc3RhdGlzdGljc1xuICAgKi9cbiAgZ2V0U3RhdHMoKSB7XG4gICAgbGV0IGV4cGFuZGVkID0gMDtcbiAgICBsZXQgY29sbGFwc2VkID0gMDtcbiAgICBcbiAgICB0aGlzLmVuZHBvaW50cy5mb3JFYWNoKGRhdGEgPT4ge1xuICAgICAgaWYgKGRhdGEuaXNFeHBhbmRlZCkge1xuICAgICAgICBleHBhbmRlZCsrO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29sbGFwc2VkKys7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIHRvdGFsRW5kcG9pbnRzOiB0aGlzLmVuZHBvaW50cy5zaXplLFxuICAgICAgZXhwYW5kZWQsXG4gICAgICBjb2xsYXBzZWQsXG4gICAgICBjdXJyZW50RmlsdGVyOiB0aGlzLmN1cnJlbnRGaWx0ZXIsXG4gICAgICBmaWx0ZXJlZENvdW50OiB0aGlzLmdldEZpbHRlcmVkQ291bnQoKSxcbiAgICAgIG1ldGFkYXRhOiB0aGlzLm1ldGFkYXRhXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDdXN0b20gY2xlYW51cFxuICAgKi9cbiAgb25EZXN0cm95KCkge1xuICAgIC8vIENsZWFuIHVwIGVuZHBvaW50IHJlZmVyZW5jZXNcbiAgICB0aGlzLmVuZHBvaW50cy5mb3JFYWNoKChkYXRhLCBlbmRwb2ludCkgPT4ge1xuICAgICAgZW5kcG9pbnQucmVtb3ZlQXR0cmlidXRlKCdkYXRhLW9wZW5hcGktY29tcG9uZW50Jyk7XG4gICAgfSk7XG4gICAgdGhpcy5lbmRwb2ludHMuY2xlYXIoKTtcbiAgfVxufVxuXG4vLyBBdXRvLXJlZ2lzdGVyIGNvbXBvbmVudFxuQ29tcG9uZW50TWFuYWdlci5yZWdpc3Rlcignb3BlbmFwaS12aWV3ZXInLCBPcGVuQVBJVmlld2VyKTsiLCAiLyoqXG4gKiBPcGVuQVBJIENvbGxhcHNlIENvbXBvbmVudFxuICogRXh0ZW5kcyB0aGUgYmFzZSBDb2xsYXBzZSBjb21wb25lbnQgd2l0aCBPcGVuQVBJLXNwZWNpZmljIGZ1bmN0aW9uYWxpdHlcbiAqIEhhbmRsZXMgcmVzcG9uc2VzLCBzY2hlbWFzLCBlbmRwb2ludHMsIGFuZCBvdGhlciBPcGVuQVBJIGRvY3VtZW50YXRpb24gZWxlbWVudHNcbiAqIE5vdyB1c2VzIHRoZSBuZXcgU3RhdGVNYW5hZ2VyIHN5c3RlbSBmb3IgY29uc2lzdGVudCBiZWhhdmlvclxuICovXG5cbmltcG9ydCB7IENvbGxhcHNlIH0gZnJvbSAnLi4vdWkvQ29sbGFwc2UuanMnO1xuXG5jbGFzcyBPcGVuQVBJQ29sbGFwc2UgZXh0ZW5kcyBDb2xsYXBzZSB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZyA9IHt9KSB7XG4gICAgc3VwZXIoe1xuICAgICAgbmFtZTogJ29wZW5hcGktY29sbGFwc2UnLFxuICAgICAgc2VsZWN0b3I6ICcub3BlbmFwaS1zcGVjIC5jb2xsYXBzZV9faGVhZGVyLCAub3BlbmFwaS1jb21wb25lbnRzIC5jb2xsYXBzZV9faGVhZGVyLCAucmVzcG9uc2VzLWNvbnRhaW5lciAuY29sbGFwc2VfX2hlYWRlciwgLnJlc3BvbnNlLWhlYWRlci5jb2xsYXBzZV9faGVhZGVyLCAuZW5kcG9pbnQtZ3JvdXAgLmNvbGxhcHNlX19oZWFkZXIsIC5jb21wb25lbnQtaGVhZGVyLmNvbGxhcHNlX19oZWFkZXInLFxuICAgICAgLi4uY29uZmlnXG4gICAgfSk7XG5cbiAgICB0aGlzLm9wdGlvbnMgPSB7XG4gICAgICBhbmltYXRpb25EdXJhdGlvbjogMzAwLFxuICAgICAgc3RvcmVTdGF0ZTogdHJ1ZSxcbiAgICAgIG5hbWVzcGFjZTogJ29wZW5hcGktY29sbGFwc2UnLFxuICAgICAgZ3JvdXBCeVNlY3Rpb246IHRydWUsXG4gICAgICBhdXRvRXhwYW5kU2NoZW1hczogZmFsc2UsXG4gICAgICAuLi50aGlzLm9wdGlvbnNcbiAgICB9O1xuXG4gICAgdGhpcy5zZWN0aW9uR3JvdXBzID0gbmV3IE1hcCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEVuaGFuY2VkIHNldHVwIGZvciBPcGVuQVBJIGVsZW1lbnRzXG4gICAqL1xuICBzZXR1cENvbGxhcHNlRWxlbWVudHMoKSB7XG4gICAgc3VwZXIuc2V0dXBDb2xsYXBzZUVsZW1lbnRzKCk7XG4gICAgXG4gICAgaWYgKHRoaXMub3B0aW9ucy5ncm91cEJ5U2VjdGlvbikge1xuICAgICAgdGhpcy5vcmdhbml6ZUJ5U2VjdGlvbnMoKTtcbiAgICB9XG5cbiAgICAvLyBBdXRvLWV4cGFuZCBjZXJ0YWluIGVsZW1lbnRzIGlmIGNvbmZpZ3VyZWRcbiAgICBpZiAodGhpcy5vcHRpb25zLmF1dG9FeHBhbmRTY2hlbWFzKSB7XG4gICAgICB0aGlzLmF1dG9FeHBhbmRTY2hlbWFzKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgT3BlbkFQSS1zcGVjaWZpYyBjb2xsYXBzZSBoZWFkZXIgd2l0aCBlbmhhbmNlZCBtZXRhZGF0YVxuICAgKi9cbiAgaW5pdGlhbGl6ZUNvbGxhcHNlSGVhZGVyKGhlYWRlcikge1xuICAgIC8vIENhbGwgcGFyZW50IGluaXRpYWxpemF0aW9uXG4gICAgc3VwZXIuaW5pdGlhbGl6ZUNvbGxhcHNlSGVhZGVyKGhlYWRlcik7XG5cbiAgICBjb25zdCB0YXJnZXQgPSBoZWFkZXIuZ2V0QXR0cmlidXRlKCdkYXRhLXRhcmdldCcpO1xuICAgIGNvbnN0IGNvbGxhcHNlRGF0YSA9IHRoaXMuY29sbGFwc2VFbGVtZW50cy5nZXQodGFyZ2V0KTtcblxuICAgIGlmICghY29sbGFwc2VEYXRhKSByZXR1cm47XG5cbiAgICAvLyBBZGQgT3BlbkFQSS1zcGVjaWZpYyBtZXRhZGF0YVxuICAgIGNvbGxhcHNlRGF0YS5zZWN0aW9uID0gdGhpcy5pZGVudGlmeVNlY3Rpb24oaGVhZGVyKTtcbiAgICBjb2xsYXBzZURhdGEudHlwZSA9IHRoaXMuaWRlbnRpZnlUeXBlKGhlYWRlcik7XG4gICAgY29sbGFwc2VEYXRhLnByaW9yaXR5ID0gdGhpcy5jYWxjdWxhdGVQcmlvcml0eShoZWFkZXIpO1xuXG5cblxuICAgIC8vIFN0b3JlIGVuaGFuY2VkIGRhdGFcbiAgICB0aGlzLmNvbGxhcHNlRWxlbWVudHMuc2V0KHRhcmdldCwgY29sbGFwc2VEYXRhKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJZGVudGlmeSB3aGljaCBPcGVuQVBJIHNlY3Rpb24gdGhpcyBjb2xsYXBzZSBiZWxvbmdzIHRvXG4gICAqL1xuICBpZGVudGlmeVNlY3Rpb24oaGVhZGVyKSB7XG4gICAgaWYgKGhlYWRlci5jbG9zZXN0KCcucmVzcG9uc2VzLWNvbnRhaW5lcicpKSByZXR1cm4gJ3Jlc3BvbnNlcyc7XG4gICAgaWYgKGhlYWRlci5jbG9zZXN0KCcub3BlbmFwaS1jb21wb25lbnRzJykpIHJldHVybiAnY29tcG9uZW50cyc7XG4gICAgaWYgKGhlYWRlci5jbG9zZXN0KCcuZW5kcG9pbnQtZ3JvdXAnKSkgcmV0dXJuICdlbmRwb2ludHMnO1xuICAgIGlmIChoZWFkZXIuY2xvc2VzdCgnLm9wZW5hcGktc3BlYycpKSByZXR1cm4gJ3NwZWMnO1xuICAgIHJldHVybiAndW5rbm93bic7XG4gIH1cblxuICAvKipcbiAgICogSWRlbnRpZnkgdGhlIHR5cGUgb2YgT3BlbkFQSSBlbGVtZW50XG4gICAqL1xuICBpZGVudGlmeVR5cGUoaGVhZGVyKSB7XG4gICAgLy8gQ2hlY2sgZm9yIGNvbXBvbmVudCB0eXBlc1xuICAgIGlmIChoZWFkZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdjb21wb25lbnQtaGVhZGVyJykpIHtcbiAgICAgIGNvbnN0IHNjaGVtYU5hbWUgPSBoZWFkZXIuZ2V0QXR0cmlidXRlKCdkYXRhLXNjaGVtYS1uYW1lJyk7XG4gICAgICBpZiAoc2NoZW1hTmFtZSkgcmV0dXJuICdzY2hlbWEnO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGZvciByZXNwb25zZSB0eXBlc1xuICAgIGlmIChoZWFkZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdyZXNwb25zZS1oZWFkZXInKSkge1xuICAgICAgcmV0dXJuICdyZXNwb25zZSc7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIGVuZHBvaW50IHR5cGVzXG4gICAgaWYgKGhlYWRlci5jbG9zZXN0KCcuZW5kcG9pbnQtaXRlbScpKSB7XG4gICAgICByZXR1cm4gJ2VuZHBvaW50JztcbiAgICB9XG5cbiAgICByZXR1cm4gJ2dlbmVyaWMnO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZSBwcmlvcml0eSBmb3IgYXV0by1leHBhbnNpb24gbG9naWNcbiAgICovXG4gIGNhbGN1bGF0ZVByaW9yaXR5KGhlYWRlcikge1xuICAgIC8vIEhpZ2hlciBwcmlvcml0eSA9IG1vcmUgbGlrZWx5IHRvIGF1dG8tZXhwYW5kXG4gICAgaWYgKGhlYWRlci5jbGFzc0xpc3QuY29udGFpbnMoJ3Jlc3BvbnNlLWhlYWRlcicpKSB7XG4gICAgICBjb25zdCBzdGF0dXNDb2RlID0gaGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy5zdGF0dXMtY29kZScpPy50ZXh0Q29udGVudDtcbiAgICAgIGlmIChzdGF0dXNDb2RlPy5zdGFydHNXaXRoKCcyJykpIHJldHVybiAxMDsgLy8gU3VjY2VzcyByZXNwb25zZXNcbiAgICAgIGlmIChzdGF0dXNDb2RlID09PSAnZGVmYXVsdCcpIHJldHVybiA1OyAgICAgLy8gRGVmYXVsdCByZXNwb25zZXNcbiAgICAgIHJldHVybiAzO1xuICAgIH1cblxuICAgIGlmIChoZWFkZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdjb21wb25lbnQtaGVhZGVyJykpIHtcbiAgICAgIHJldHVybiA3OyAvLyBDb21wb25lbnQgc2NoZW1hc1xuICAgIH1cblxuICAgIHJldHVybiAxOyAvLyBFdmVyeXRoaW5nIGVsc2VcbiAgfVxuXG4gIC8qKlxuICAgKiBPcmdhbml6ZSBjb2xsYXBzZSBlbGVtZW50cyBieSBzZWN0aW9uIGZvciBidWxrIG9wZXJhdGlvbnNcbiAgICovXG4gIG9yZ2FuaXplQnlTZWN0aW9ucygpIHtcbiAgICB0aGlzLmNvbGxhcHNlRWxlbWVudHMuZm9yRWFjaCgoY29sbGFwc2VEYXRhLCB0YXJnZXRJZCkgPT4ge1xuICAgICAgY29uc3Qgc2VjdGlvbiA9IGNvbGxhcHNlRGF0YS5zZWN0aW9uO1xuICAgICAgXG4gICAgICBpZiAoIXRoaXMuc2VjdGlvbkdyb3Vwcy5oYXMoc2VjdGlvbikpIHtcbiAgICAgICAgdGhpcy5zZWN0aW9uR3JvdXBzLnNldChzZWN0aW9uLCBbXSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHRoaXMuc2VjdGlvbkdyb3Vwcy5nZXQoc2VjdGlvbikucHVzaCh0YXJnZXRJZCk7XG4gICAgfSk7XG5cbiAgICBcbiAgfVxuXG4gIC8qKlxuICAgKiBBdXRvLWV4cGFuZCBzY2hlbWEgY29tcG9uZW50cyBpZiBjb25maWd1cmVkXG4gICAqL1xuICBhdXRvRXhwYW5kU2NoZW1hcygpIHtcbiAgICBjb25zdCBzY2hlbWFFbGVtZW50cyA9IEFycmF5LmZyb20odGhpcy5jb2xsYXBzZUVsZW1lbnRzLnZhbHVlcygpKVxuICAgICAgLmZpbHRlcihkYXRhID0+IGRhdGEudHlwZSA9PT0gJ3NjaGVtYScpXG4gICAgICAuc29ydCgoYSwgYikgPT4gYi5wcmlvcml0eSAtIGEucHJpb3JpdHkpO1xuXG4gICAgc2NoZW1hRWxlbWVudHMuc2xpY2UoMCwgMykuZm9yRWFjaChjb2xsYXBzZURhdGEgPT4ge1xuICAgICAgaWYgKCFjb2xsYXBzZURhdGEuaXNFeHBhbmRlZCkge1xuICAgICAgICB0aGlzLmV4cGFuZChjb2xsYXBzZURhdGEpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEVuaGFuY2VkIGV4cGFuZCB3aXRoIE9wZW5BUEktc3BlY2lmaWMgbG9naWNcbiAgICovXG4gIGV4cGFuZChjb2xsYXBzZURhdGEpIHtcbiAgICBzdXBlci5leHBhbmQoY29sbGFwc2VEYXRhKTtcblxuICAgIC8vIFNwZWNpYWwgaGFuZGxpbmcgZm9yIHJlc3BvbnNlIGRldGFpbHNcbiAgICBpZiAoY29sbGFwc2VEYXRhLnR5cGUgPT09ICdyZXNwb25zZScpIHtcbiAgICAgIHRoaXMuaGFuZGxlUmVzcG9uc2VFeHBhbnNpb24oY29sbGFwc2VEYXRhKTtcbiAgICB9XG5cbiAgICAvLyBJbml0aWFsaXplIGFueSBuZXN0ZWQgY29tcG9uZW50cyBpbiBleHBhbmRlZCBjb250ZW50XG4gICAgdGhpcy5pbml0aWFsaXplRXhwYW5kZWRDb250ZW50KGNvbGxhcHNlRGF0YS50YXJnZXQsIGNvbGxhcHNlRGF0YS50eXBlKTtcblxuICAgIC8vIEVtaXQgT3BlbkFQSS1zcGVjaWZpYyBldmVudFxuICAgIHRoaXMuZW1pdCgnb3BlbmFwaTpleHBhbmRlZCcsIHtcbiAgICAgIHRhcmdldElkOiBjb2xsYXBzZURhdGEudGFyZ2V0SWQsXG4gICAgICBzZWN0aW9uOiBjb2xsYXBzZURhdGEuc2VjdGlvbixcbiAgICAgIHR5cGU6IGNvbGxhcHNlRGF0YS50eXBlXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHNwZWNpYWwgcmVzcG9uc2UgZXhwYW5zaW9uIGxvZ2ljIHVzaW5nIGVuaGFuY2VkIENvbXBvbmVudCBiYXNlIGNsYXNzXG4gICAqL1xuICBoYW5kbGVSZXNwb25zZUV4cGFuc2lvbihjb2xsYXBzZURhdGEpIHtcbiAgICBjb25zdCB7IHRhcmdldCwgaGVhZGVyIH0gPSBjb2xsYXBzZURhdGE7XG4gICAgXG4gICAgaWYgKHRhcmdldCAmJiB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdyZXNwb25zZS1kZXRhaWxzJykpIHtcbiAgICAgIC8vIFNldCB0cmFuc2l0aW9uaW5nIGZpcnN0IHRvIHRyaWdnZXIgQ1NTIHRyYW5zaXRpb25zXG4gICAgICB0YXJnZXQuc2V0QXR0cmlidXRlKCdkYXRhLWNvbGxhcHNlLXN0YXRlJywgJ3RyYW5zaXRpb25pbmcnKTtcbiAgICAgIGhlYWRlci5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAndHJ1ZScpO1xuICAgICAgXG4gICAgICAvLyBVc2UgcmVxdWVzdEFuaW1hdGlvbkZyYW1lIHRvIGVuc3VyZSB0cmFuc2l0aW9uIHRyaWdnZXJzXG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICB0YXJnZXQuc2V0QXR0cmlidXRlKCdkYXRhLWNvbGxhcHNlLXN0YXRlJywgJ2V4cGFuZGVkJyk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHJlc3BvbnNlIGNvbGxhcHNlXG4gICAqL1xuICBoYW5kbGVSZXNwb25zZUNvbGxhcHNlKGNvbGxhcHNlRGF0YSkge1xuICAgIGNvbnN0IHsgdGFyZ2V0LCBoZWFkZXIgfSA9IGNvbGxhcHNlRGF0YTtcbiAgICBcbiAgICBpZiAodGFyZ2V0ICYmIHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3Jlc3BvbnNlLWRldGFpbHMnKSkge1xuICAgICAgLy8gU2V0IHRyYW5zaXRpb25pbmcgZmlyc3QgdG8gdHJpZ2dlciBDU1MgdHJhbnNpdGlvbnNcbiAgICAgIHRhcmdldC5zZXRBdHRyaWJ1dGUoJ2RhdGEtY29sbGFwc2Utc3RhdGUnLCAndHJhbnNpdGlvbmluZycpO1xuICAgICAgaGVhZGVyLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICdmYWxzZScpO1xuICAgICAgXG4gICAgICAvLyBVc2UgcmVxdWVzdEFuaW1hdGlvbkZyYW1lIHRvIGVuc3VyZSB0cmFuc2l0aW9uIHRyaWdnZXJzXG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICB0YXJnZXQuc2V0QXR0cmlidXRlKCdkYXRhLWNvbGxhcHNlLXN0YXRlJywgJ2NvbGxhcHNlZCcpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEVuaGFuY2VkIGNvbGxhcHNlIHdpdGggT3BlbkFQSS1zcGVjaWZpYyBjbGVhbnVwXG4gICAqL1xuICBjb2xsYXBzZShjb2xsYXBzZURhdGEpIHtcbiAgICAvLyBIYW5kbGUgcmVzcG9uc2Utc3BlY2lmaWMgY29sbGFwc2VcbiAgICBpZiAoY29sbGFwc2VEYXRhLnR5cGUgPT09ICdyZXNwb25zZScpIHtcbiAgICAgIHRoaXMuaGFuZGxlUmVzcG9uc2VDb2xsYXBzZShjb2xsYXBzZURhdGEpO1xuICAgIH1cblxuICAgIHN1cGVyLmNvbGxhcHNlKGNvbGxhcHNlRGF0YSk7XG5cbiAgICAvLyBFbWl0IE9wZW5BUEktc3BlY2lmaWMgZXZlbnRcbiAgICB0aGlzLmVtaXQoJ29wZW5hcGk6Y29sbGFwc2VkJywge1xuICAgICAgdGFyZ2V0SWQ6IGNvbGxhcHNlRGF0YS50YXJnZXRJZCxcbiAgICAgIHNlY3Rpb246IGNvbGxhcHNlRGF0YS5zZWN0aW9uLFxuICAgICAgdHlwZTogY29sbGFwc2VEYXRhLnR5cGVcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIGNvbXBvbmVudHMgd2l0aGluIGV4cGFuZGVkIE9wZW5BUEkgY29udGVudFxuICAgKi9cbiAgaW5pdGlhbGl6ZUV4cGFuZGVkQ29udGVudCh0YXJnZXQsIHR5cGUpIHtcbiAgICAvLyBJbml0aWFsaXplIHN5bnRheCBoaWdobGlnaHRpbmcgZm9yIGNvZGUgYmxvY2tzXG4gICAgY29uc3QgY29kZUJsb2NrcyA9IHRhcmdldC5xdWVyeVNlbGVjdG9yQWxsKCdwcmUgY29kZVtjbGFzcyo9XCJsYW5ndWFnZS1cIl0nKTtcbiAgICBpZiAoY29kZUJsb2Nrcy5sZW5ndGggPiAwICYmIHdpbmRvdy5QcmlzbSkge1xuICAgICAgY29kZUJsb2Nrcy5mb3JFYWNoKGJsb2NrID0+IHtcbiAgICAgICAgaWYgKCFibG9jay5jbGFzc0xpc3QuY29udGFpbnMoJ3ByaXNtLWhpZ2hsaWdodGVkJykpIHtcbiAgICAgICAgICB3aW5kb3cuUHJpc20uaGlnaGxpZ2h0RWxlbWVudChibG9jayk7XG4gICAgICAgICAgYmxvY2suY2xhc3NMaXN0LmFkZCgncHJpc20taGlnaGxpZ2h0ZWQnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gSW5pdGlhbGl6ZSBjb3B5IGJ1dHRvbnMgZm9yIGNvZGUgZXhhbXBsZXNcbiAgICBjb25zdCBjb3B5QnV0dG9ucyA9IHRhcmdldC5xdWVyeVNlbGVjdG9yQWxsKCcuY29weS1idG46bm90KFtkYXRhLWluaXRpYWxpemVkXSknKTtcbiAgICBjb3B5QnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgICBidXR0b24uc2V0QXR0cmlidXRlKCdkYXRhLWluaXRpYWxpemVkJywgJ3RydWUnKTtcbiAgICAgIC8vIENvcHkgYnV0dG9uIGluaXRpYWxpemF0aW9uIHdvdWxkIGdvIGhlcmVcbiAgICB9KTtcblxuICAgIC8vIEZvciByZXNwb25zZSBzZWN0aW9ucywgZW5zdXJlIHByb3BlciBzY2hlbWEgcmVuZGVyaW5nXG4gICAgaWYgKHR5cGUgPT09ICdyZXNwb25zZScpIHtcbiAgICAgIHRoaXMuZW5oYW5jZVJlc3BvbnNlU2NoZW1hcyh0YXJnZXQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFbmhhbmNlIHNjaGVtYSBkaXNwbGF5IHdpdGhpbiByZXNwb25zZSBjb250ZW50XG4gICAqL1xuICBlbmhhbmNlUmVzcG9uc2VTY2hlbWFzKHJlc3BvbnNlVGFyZ2V0KSB7XG4gICAgY29uc3Qgc2NoZW1hQ29udGFpbmVycyA9IHJlc3BvbnNlVGFyZ2V0LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zY2hlbWEtY29udGFpbmVyJyk7XG4gICAgc2NoZW1hQ29udGFpbmVycy5mb3JFYWNoKGNvbnRhaW5lciA9PiB7XG4gICAgICAvLyBBZGQgZW5oYW5jZWQgc3R5bGluZyBjbGFzc2VzIGJhc2VkIG9uIHNjaGVtYSB0eXBlXG4gICAgICBjb25zdCB0eXBlQmFkZ2UgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnR5cGUtYmFkZ2UnKTtcbiAgICAgIGlmICh0eXBlQmFkZ2UpIHtcbiAgICAgICAgY29uc3Qgc2NoZW1hVHlwZSA9IHR5cGVCYWRnZS50ZXh0Q29udGVudC5yZXBsYWNlKC9bXFxbXFxdXS9nLCAnJyk7XG4gICAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKGBzY2hlbWEtdHlwZS0tJHtzY2hlbWFUeXBlfWApO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFB1YmxpYyBBUEk6IEV4cGFuZCBhbGwgZWxlbWVudHMgaW4gYSBzcGVjaWZpYyBzZWN0aW9uXG4gICAqL1xuICBleHBhbmRTZWN0aW9uKHNlY3Rpb25OYW1lKSB7XG4gICAgY29uc3Qgc2VjdGlvbkVsZW1lbnRzID0gdGhpcy5zZWN0aW9uR3JvdXBzLmdldChzZWN0aW9uTmFtZSkgfHwgW107XG4gICAgc2VjdGlvbkVsZW1lbnRzLmZvckVhY2godGFyZ2V0SWQgPT4ge1xuICAgICAgdGhpcy5leHBhbmRFbGVtZW50KHRhcmdldElkKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQdWJsaWMgQVBJOiBDb2xsYXBzZSBhbGwgZWxlbWVudHMgaW4gYSBzcGVjaWZpYyBzZWN0aW9uXG4gICAqL1xuICBjb2xsYXBzZVNlY3Rpb24oc2VjdGlvbk5hbWUpIHtcbiAgICBjb25zdCBzZWN0aW9uRWxlbWVudHMgPSB0aGlzLnNlY3Rpb25Hcm91cHMuZ2V0KHNlY3Rpb25OYW1lKSB8fCBbXTtcbiAgICBzZWN0aW9uRWxlbWVudHMuZm9yRWFjaCh0YXJnZXRJZCA9PiB7XG4gICAgICB0aGlzLmNvbGxhcHNlRWxlbWVudCh0YXJnZXRJZCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUHVibGljIEFQSTogR2V0IHN0YXRpc3RpY3MgYWJvdXQgY29sbGFwc2Ugc3RhdGVcbiAgICovXG4gIGdldFN0YXRzKCkge1xuICAgIGNvbnN0IHN0YXRzID0ge1xuICAgICAgdG90YWw6IHRoaXMuY29sbGFwc2VFbGVtZW50cy5zaXplLFxuICAgICAgZXhwYW5kZWQ6IDAsXG4gICAgICBjb2xsYXBzZWQ6IDAsXG4gICAgICBzZWN0aW9uczoge31cbiAgICB9O1xuXG4gICAgdGhpcy5zZWN0aW9uR3JvdXBzLmZvckVhY2goKGVsZW1lbnRzLCBzZWN0aW9uKSA9PiB7XG4gICAgICBzdGF0cy5zZWN0aW9uc1tzZWN0aW9uXSA9IHtcbiAgICAgICAgdG90YWw6IGVsZW1lbnRzLmxlbmd0aCxcbiAgICAgICAgZXhwYW5kZWQ6IDAsXG4gICAgICAgIGNvbGxhcHNlZDogMFxuICAgICAgfTtcbiAgICB9KTtcblxuICAgIHRoaXMuY29sbGFwc2VFbGVtZW50cy5mb3JFYWNoKChjb2xsYXBzZURhdGEpID0+IHtcbiAgICAgIGlmIChjb2xsYXBzZURhdGEuaXNFeHBhbmRlZCkge1xuICAgICAgICBzdGF0cy5leHBhbmRlZCsrO1xuICAgICAgICBpZiAoY29sbGFwc2VEYXRhLnNlY3Rpb24pIHtcbiAgICAgICAgICBzdGF0cy5zZWN0aW9uc1tjb2xsYXBzZURhdGEuc2VjdGlvbl0uZXhwYW5kZWQrKztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhdHMuY29sbGFwc2VkKys7XG4gICAgICAgIGlmIChjb2xsYXBzZURhdGEuc2VjdGlvbikge1xuICAgICAgICAgIHN0YXRzLnNlY3Rpb25zW2NvbGxhcHNlRGF0YS5zZWN0aW9uXS5jb2xsYXBzZWQrKztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHN0YXRzO1xuICB9XG59XG5cbi8vIEF1dG8tcmVnaXN0ZXIgY29tcG9uZW50XG5pbXBvcnQgQ29tcG9uZW50TWFuYWdlciBmcm9tICcuLi8uLi9jb3JlL0NvbXBvbmVudE1hbmFnZXIuanMnO1xuQ29tcG9uZW50TWFuYWdlci5yZWdpc3Rlcignb3BlbmFwaS1jb2xsYXBzZScsIE9wZW5BUElDb2xsYXBzZSk7XG5cbi8vIEV4cG9ydCBmb3IgdXNlIGJ5IG90aGVyIGNvbXBvbmVudHNcbmV4cG9ydCB7IE9wZW5BUElDb2xsYXBzZSB9O1xuZXhwb3J0IGRlZmF1bHQgT3BlbkFQSUNvbGxhcHNlOyIsICIvKipcbiAqIEVuZHBvaW50RGF0YSBDb21wb25lbnRcbiAqIEhhbmRsZXMgZW5kcG9pbnQgZGF0YSBleHRyYWN0aW9uLCBwYXJzaW5nLCBhbmQgc3RhdGlzdGljcyBidWlsZGluZ1xuICovXG5cbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJy4uLy4uLy4uL2NvcmUvQ29tcG9uZW50LmpzJztcblxuZXhwb3J0IGNsYXNzIEVuZHBvaW50RGF0YSBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZyA9IHt9KSB7XG4gICAgc3VwZXIoe1xuICAgICAgbmFtZTogJ2VuZHBvaW50LWRhdGEnLFxuICAgICAgc2VsZWN0b3I6IGNvbmZpZy5zZWxlY3RvciB8fCAnLmVuZHBvaW50LWl0ZW0nLFxuICAgICAgLi4uY29uZmlnXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBlbmRwb2ludCBkYXRhIGZvciBhbGwgZW5kcG9pbnRzXG4gICAqL1xuICBzdGF0aWMgaW5pdGlhbGl6ZUVuZHBvaW50RGF0YShlbmRwb2ludHMsIGdlbmVyYXRlRW5kcG9pbnRJZCkge1xuICAgIGVuZHBvaW50cy5mb3JFYWNoKGVuZHBvaW50ID0+IHtcbiAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgIGVsZW1lbnQ6IGVuZHBvaW50LFxuICAgICAgICBpZDogZW5kcG9pbnQuaWQgfHwgZ2VuZXJhdGVFbmRwb2ludElkKGVuZHBvaW50KSxcbiAgICAgICAgdGFnczogRW5kcG9pbnREYXRhLmV4dHJhY3RUYWdzKGVuZHBvaW50KSxcbiAgICAgICAgbWV0aG9kOiBFbmRwb2ludERhdGEuZXh0cmFjdE1ldGhvZChlbmRwb2ludCksXG4gICAgICAgIHBhdGg6IEVuZHBvaW50RGF0YS5leHRyYWN0UGF0aChlbmRwb2ludCksXG4gICAgICAgIHN1bW1hcnk6IEVuZHBvaW50RGF0YS5leHRyYWN0U3VtbWFyeShlbmRwb2ludCksXG4gICAgICAgIGRlcHJlY2F0ZWQ6IEVuZHBvaW50RGF0YS5pc0RlcHJlY2F0ZWQoZW5kcG9pbnQpLFxuICAgICAgICB2aXNpYmxlOiB0cnVlXG4gICAgICB9O1xuICAgICAgXG4gICAgICAvLyBTdG9yZSBkYXRhIG9uIGVsZW1lbnQgZm9yIHF1aWNrIGFjY2Vzc1xuICAgICAgZW5kcG9pbnQuX2ZpbHRlckRhdGEgPSBkYXRhO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGEgdW5pcXVlIElEIGZvciBhbiBlbmRwb2ludFxuICAgKi9cbiAgc3RhdGljIGdlbmVyYXRlRW5kcG9pbnRJZChlbmRwb2ludCkge1xuICAgIGNvbnN0IG1ldGhvZCA9IEVuZHBvaW50RGF0YS5leHRyYWN0TWV0aG9kKGVuZHBvaW50KTtcbiAgICBjb25zdCBwYXRoID0gRW5kcG9pbnREYXRhLmV4dHJhY3RQYXRoKGVuZHBvaW50KTtcbiAgICByZXR1cm4gYCR7bWV0aG9kfS0ke3BhdGh9YC5yZXBsYWNlKC9bXmEtekEtWjAtOS1dL2csICctJykudG9Mb3dlckNhc2UoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRyYWN0IHRhZ3MgZnJvbSBlbmRwb2ludCBlbGVtZW50XG4gICAqL1xuICBzdGF0aWMgZXh0cmFjdFRhZ3MoZW5kcG9pbnQpIHtcbiAgICBjb25zdCB0YWdzID0gW107XG4gICAgY29uc3QgdGFnRWxlbWVudHMgPSBlbmRwb2ludC5xdWVyeVNlbGVjdG9yQWxsKCcuZW5kcG9pbnQtdGFnJyk7XG4gICAgdGFnRWxlbWVudHMuZm9yRWFjaCh0YWcgPT4ge1xuICAgICAgY29uc3QgdGFnVGV4dCA9IHRhZy50ZXh0Q29udGVudC50cmltKCkudG9Mb3dlckNhc2UoKTtcbiAgICAgIGlmICh0YWdUZXh0KSB0YWdzLnB1c2godGFnVGV4dCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRhZ3M7XG4gIH1cblxuICAvKipcbiAgICogRXh0cmFjdCBIVFRQIG1ldGhvZCBmcm9tIGVuZHBvaW50XG4gICAqL1xuICBzdGF0aWMgZXh0cmFjdE1ldGhvZChlbmRwb2ludCkge1xuICAgIGNvbnN0IG1ldGhvZEVsZW1lbnQgPSBlbmRwb2ludC5xdWVyeVNlbGVjdG9yKCcuaHR0cC1tZXRob2QnKTtcbiAgICBpZiAobWV0aG9kRWxlbWVudCkge1xuICAgICAgcmV0dXJuIG1ldGhvZEVsZW1lbnQudGV4dENvbnRlbnQudHJpbSgpLnRvVXBwZXJDYXNlKCk7XG4gICAgfVxuICAgIHJldHVybiBlbmRwb2ludC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbWV0aG9kJykgfHwgJ1VOS05PV04nO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4dHJhY3QgcGF0aCBmcm9tIGVuZHBvaW50XG4gICAqL1xuICBzdGF0aWMgZXh0cmFjdFBhdGgoZW5kcG9pbnQpIHtcbiAgICBjb25zdCBwYXRoRWxlbWVudCA9IGVuZHBvaW50LnF1ZXJ5U2VsZWN0b3IoJy5lbmRwb2ludC1wYXRoJyk7XG4gICAgaWYgKHBhdGhFbGVtZW50KSB7XG4gICAgICByZXR1cm4gcGF0aEVsZW1lbnQudGV4dENvbnRlbnQudHJpbSgpO1xuICAgIH1cbiAgICByZXR1cm4gZW5kcG9pbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXBhdGgnKSB8fCAnLyc7XG4gIH1cblxuICAvKipcbiAgICogRXh0cmFjdCBzdW1tYXJ5IGZyb20gZW5kcG9pbnRcbiAgICovXG4gIHN0YXRpYyBleHRyYWN0U3VtbWFyeShlbmRwb2ludCkge1xuICAgIGNvbnN0IHN1bW1hcnlFbGVtZW50ID0gZW5kcG9pbnQucXVlcnlTZWxlY3RvcignLmVuZHBvaW50LXN1bW1hcnknKTtcbiAgICByZXR1cm4gc3VtbWFyeUVsZW1lbnQgPyBzdW1tYXJ5RWxlbWVudC50ZXh0Q29udGVudC50cmltKCkgOiAnJztcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBlbmRwb2ludCBpcyBkZXByZWNhdGVkXG4gICAqL1xuICBzdGF0aWMgaXNEZXByZWNhdGVkKGVuZHBvaW50KSB7XG4gICAgcmV0dXJuIGVuZHBvaW50LnF1ZXJ5U2VsZWN0b3IoJy5kZXByZWNhdGVkLWJhZGdlJykgIT09IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQnVpbGQgc3RhdGlzdGljcyBmb3IgZmlsdGVyIG9wdGlvbnNcbiAgICovXG4gIHN0YXRpYyBidWlsZEZpbHRlclN0YXRzKGVuZHBvaW50cykge1xuICAgIGNvbnN0IGZpbHRlclN0YXRzID0gbmV3IE1hcCgpO1xuICAgIGNvbnN0IHRhZ0NvdW50cyA9IG5ldyBNYXAoKTtcbiAgICBjb25zdCBtZXRob2RDb3VudHMgPSBuZXcgTWFwKCk7XG4gICAgXG4gICAgZW5kcG9pbnRzLmZvckVhY2goZW5kcG9pbnQgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IGVuZHBvaW50Ll9maWx0ZXJEYXRhO1xuICAgICAgXG4gICAgICAvLyBDb3VudCB0YWdzXG4gICAgICBkYXRhLnRhZ3MuZm9yRWFjaCh0YWcgPT4ge1xuICAgICAgICB0YWdDb3VudHMuc2V0KHRhZywgKHRhZ0NvdW50cy5nZXQodGFnKSB8fCAwKSArIDEpO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIENvdW50IG1ldGhvZHNcbiAgICAgIG1ldGhvZENvdW50cy5zZXQoZGF0YS5tZXRob2QsIChtZXRob2RDb3VudHMuZ2V0KGRhdGEubWV0aG9kKSB8fCAwKSArIDEpO1xuICAgIH0pO1xuICAgIFxuICAgIGZpbHRlclN0YXRzLnNldCgndGFncycsIHRhZ0NvdW50cyk7XG4gICAgZmlsdGVyU3RhdHMuc2V0KCdtZXRob2RzJywgbWV0aG9kQ291bnRzKTtcbiAgICBcbiAgICByZXR1cm4gZmlsdGVyU3RhdHM7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIGZpbHRlciBidXR0b24gbGFiZWxzIHdpdGggc3RhdGlzdGljc1xuICAgKi9cbiAgc3RhdGljIHVwZGF0ZUZpbHRlckJ1dHRvblN0YXRzKHRhZ0ZpbHRlcnMsIG1ldGhvZEZpbHRlcnMsIGZpbHRlclN0YXRzKSB7XG4gICAgLy8gVXBkYXRlIHRhZyBmaWx0ZXIgc3RhdHNcbiAgICB0YWdGaWx0ZXJzLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICAgIGNvbnN0IHRhZyA9IGJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGFnJyk7XG4gICAgICBpZiAodGFnICYmIHRhZyAhPT0gJ2FsbCcpIHtcbiAgICAgICAgY29uc3QgY291bnQgPSBmaWx0ZXJTdGF0cy5nZXQoJ3RhZ3MnKS5nZXQodGFnKSB8fCAwO1xuICAgICAgICBjb25zdCBsYWJlbCA9IGJ1dHRvbi50ZXh0Q29udGVudC5yZXBsYWNlKC9cXHMqXFwoXFxkK1xcKSQvLCAnJyk7XG4gICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IGAke2xhYmVsfSAoJHtjb3VudH0pYDtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICAvLyBVcGRhdGUgbWV0aG9kIGZpbHRlciBzdGF0c1xuICAgIG1ldGhvZEZpbHRlcnMuZm9yRWFjaChidXR0b24gPT4ge1xuICAgICAgY29uc3QgbWV0aG9kID0gYnV0dG9uLmdldEF0dHJpYnV0ZSgnZGF0YS1tZXRob2QnKTtcbiAgICAgIGlmIChtZXRob2QgJiYgbWV0aG9kICE9PSAnYWxsJykge1xuICAgICAgICBjb25zdCBjb3VudCA9IGZpbHRlclN0YXRzLmdldCgnbWV0aG9kcycpLmdldChtZXRob2QpIHx8IDA7XG4gICAgICAgIGNvbnN0IGxhYmVsID0gYnV0dG9uLnRleHRDb250ZW50LnJlcGxhY2UoL1xccypcXChcXGQrXFwpJC8sICcnKTtcbiAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gYCR7bGFiZWx9ICgke2NvdW50fSlgO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBlbmRwb2ludCBkYXRhIGZvciBzcGVjaWZpYyBlbmRwb2ludFxuICAgKi9cbiAgc3RhdGljIGdldEVuZHBvaW50RGF0YShlbmRwb2ludCkge1xuICAgIHJldHVybiBlbmRwb2ludC5fZmlsdGVyRGF0YTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgZW5kcG9pbnQgZGF0YVxuICAgKi9cbiAgc3RhdGljIHVwZGF0ZUVuZHBvaW50RGF0YShlbmRwb2ludCwgdXBkYXRlcykge1xuICAgIGlmIChlbmRwb2ludC5fZmlsdGVyRGF0YSkge1xuICAgICAgT2JqZWN0LmFzc2lnbihlbmRwb2ludC5fZmlsdGVyRGF0YSwgdXBkYXRlcyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFuIHVwIGVuZHBvaW50IGRhdGFcbiAgICovXG4gIHN0YXRpYyBjbGVhbnVwRW5kcG9pbnREYXRhKGVuZHBvaW50cykge1xuICAgIGVuZHBvaW50cy5mb3JFYWNoKGVuZHBvaW50ID0+IHtcbiAgICAgIGRlbGV0ZSBlbmRwb2ludC5fZmlsdGVyRGF0YTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYWxsIGVuZHBvaW50IGRhdGEgYXMgYXJyYXlcbiAgICovXG4gIHN0YXRpYyBnZXRBbGxFbmRwb2ludERhdGEoZW5kcG9pbnRzKSB7XG4gICAgcmV0dXJuIGVuZHBvaW50cy5tYXAoZW5kcG9pbnQgPT4gZW5kcG9pbnQuX2ZpbHRlckRhdGEpLmZpbHRlcihkYXRhID0+IGRhdGEpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmQgZW5kcG9pbnRzIG1hdGNoaW5nIGNyaXRlcmlhXG4gICAqL1xuICBzdGF0aWMgZmluZEVuZHBvaW50cyhlbmRwb2ludHMsIGNyaXRlcmlhKSB7XG4gICAgcmV0dXJuIGVuZHBvaW50cy5maWx0ZXIoZW5kcG9pbnQgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IGVuZHBvaW50Ll9maWx0ZXJEYXRhO1xuICAgICAgaWYgKCFkYXRhKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGNyaXRlcmlhKSkge1xuICAgICAgICBpZiAoa2V5ID09PSAndGFncycpIHtcbiAgICAgICAgICBpZiAoIWRhdGEudGFncy5zb21lKHRhZyA9PiB2YWx1ZS5pbmNsdWRlcyh0YWcpKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChkYXRhW2tleV0gIT09IHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgc3RhdGlzdGljcyBzdW1tYXJ5XG4gICAqL1xuICBzdGF0aWMgZ2V0U3RhdHNTdW1tYXJ5KGVuZHBvaW50cywgZmlsdGVyU3RhdHMpIHtcbiAgICBjb25zdCBhbGxEYXRhID0gRW5kcG9pbnREYXRhLmdldEFsbEVuZHBvaW50RGF0YShlbmRwb2ludHMpO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICB0b3RhbEVuZHBvaW50czogZW5kcG9pbnRzLmxlbmd0aCxcbiAgICAgIG1ldGhvZERpc3RyaWJ1dGlvbjogT2JqZWN0LmZyb21FbnRyaWVzKGZpbHRlclN0YXRzLmdldCgnbWV0aG9kcycpIHx8IG5ldyBNYXAoKSksXG4gICAgICB0YWdEaXN0cmlidXRpb246IE9iamVjdC5mcm9tRW50cmllcyhmaWx0ZXJTdGF0cy5nZXQoJ3RhZ3MnKSB8fCBuZXcgTWFwKCkpLFxuICAgICAgZGVwcmVjYXRlZENvdW50OiBhbGxEYXRhLmZpbHRlcihkYXRhID0+IGRhdGEuZGVwcmVjYXRlZCkubGVuZ3RoLFxuICAgICAgdW5pcXVlVGFnczogZmlsdGVyU3RhdHMuZ2V0KCd0YWdzJyk/LnNpemUgfHwgMCxcbiAgICAgIHVuaXF1ZU1ldGhvZHM6IGZpbHRlclN0YXRzLmdldCgnbWV0aG9kcycpPy5zaXplIHx8IDBcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlIGVuZHBvaW50IGRhdGEgaW50ZWdyaXR5XG4gICAqL1xuICBzdGF0aWMgdmFsaWRhdGVFbmRwb2ludERhdGEoZW5kcG9pbnRzKSB7XG4gICAgY29uc3QgaXNzdWVzID0gW107XG4gICAgXG4gICAgZW5kcG9pbnRzLmZvckVhY2goKGVuZHBvaW50LCBpbmRleCkgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IGVuZHBvaW50Ll9maWx0ZXJEYXRhO1xuICAgICAgXG4gICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgaXNzdWVzLnB1c2goYEVuZHBvaW50ICR7aW5kZXh9OiBNaXNzaW5nIGZpbHRlciBkYXRhYCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKCFkYXRhLm1ldGhvZCB8fCBkYXRhLm1ldGhvZCA9PT0gJ1VOS05PV04nKSB7XG4gICAgICAgIGlzc3Vlcy5wdXNoKGBFbmRwb2ludCAke2luZGV4fTogSW52YWxpZCBvciBtaXNzaW5nIEhUVFAgbWV0aG9kYCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmICghZGF0YS5wYXRoIHx8IGRhdGEucGF0aCA9PT0gJy8nKSB7XG4gICAgICAgIGlzc3Vlcy5wdXNoKGBFbmRwb2ludCAke2luZGV4fTogSW52YWxpZCBvciBtaXNzaW5nIHBhdGhgKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGRhdGEudGFncykpIHtcbiAgICAgICAgaXNzdWVzLnB1c2goYEVuZHBvaW50ICR7aW5kZXh9OiBJbnZhbGlkIHRhZ3MgZm9ybWF0YCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIGlzc3VlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHBvcnQgZW5kcG9pbnQgZGF0YSBmb3IgYW5hbHlzaXNcbiAgICovXG4gIHN0YXRpYyBleHBvcnRFbmRwb2ludERhdGEoZW5kcG9pbnRzKSB7XG4gICAgY29uc3QgYWxsRGF0YSA9IEVuZHBvaW50RGF0YS5nZXRBbGxFbmRwb2ludERhdGEoZW5kcG9pbnRzKTtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB0b3RhbENvdW50OiBhbGxEYXRhLmxlbmd0aCxcbiAgICAgIGVuZHBvaW50czogYWxsRGF0YS5tYXAoZGF0YSA9PiAoe1xuICAgICAgICBpZDogZGF0YS5pZCxcbiAgICAgICAgbWV0aG9kOiBkYXRhLm1ldGhvZCxcbiAgICAgICAgcGF0aDogZGF0YS5wYXRoLFxuICAgICAgICB0YWdzOiBkYXRhLnRhZ3MsXG4gICAgICAgIHN1bW1hcnk6IGRhdGEuc3VtbWFyeSxcbiAgICAgICAgZGVwcmVjYXRlZDogZGF0YS5kZXByZWNhdGVkLFxuICAgICAgICB2aXNpYmxlOiBkYXRhLnZpc2libGVcbiAgICAgIH0pKVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogU2VhcmNoIGVuZHBvaW50cyBieSB0ZXh0XG4gICAqL1xuICBzdGF0aWMgc2VhcmNoRW5kcG9pbnRzKGVuZHBvaW50cywgcXVlcnkpIHtcbiAgICBpZiAoIXF1ZXJ5IHx8IHF1ZXJ5LnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBlbmRwb2ludHM7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHNlYXJjaFRleHQgPSBxdWVyeS50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcbiAgICBcbiAgICByZXR1cm4gZW5kcG9pbnRzLmZpbHRlcihlbmRwb2ludCA9PiB7XG4gICAgICBjb25zdCBkYXRhID0gZW5kcG9pbnQuX2ZpbHRlckRhdGE7XG4gICAgICBpZiAoIWRhdGEpIHJldHVybiBmYWxzZTtcbiAgICAgIFxuICAgICAgY29uc3Qgc2VhcmNoYWJsZVRleHQgPSBgJHtkYXRhLnBhdGh9ICR7ZGF0YS5zdW1tYXJ5fSAke2RhdGEudGFncy5qb2luKCcgJyl9YC50b0xvd2VyQ2FzZSgpO1xuICAgICAgcmV0dXJuIHNlYXJjaGFibGVUZXh0LmluY2x1ZGVzKHNlYXJjaFRleHQpO1xuICAgIH0pO1xuICB9XG59XG5cbi8vIEF1dG8tcmVnaXN0ZXIgY29tcG9uZW50XG5pbXBvcnQgQ29tcG9uZW50TWFuYWdlciBmcm9tICcuLi8uLi8uLi9jb3JlL0NvbXBvbmVudE1hbmFnZXIuanMnO1xuQ29tcG9uZW50TWFuYWdlci5yZWdpc3RlcignZW5kcG9pbnQtZGF0YScsIEVuZHBvaW50RGF0YSk7IiwgIi8qKlxuICogRmlsdGVyTG9naWMgQ29tcG9uZW50XG4gKiBIYW5kbGVzIGNvcmUgZmlsdGVyaW5nIGFsZ29yaXRobXMgYW5kIHZpc2liaWxpdHkgbG9naWNcbiAqL1xuXG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICcuLi8uLi8uLi9jb3JlL0NvbXBvbmVudC5qcyc7XG5cbmV4cG9ydCBjbGFzcyBGaWx0ZXJMb2dpYyBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZyA9IHt9KSB7XG4gICAgc3VwZXIoe1xuICAgICAgbmFtZTogJ2ZpbHRlci1sb2dpYycsXG4gICAgICBzZWxlY3RvcjogY29uZmlnLnNlbGVjdG9yIHx8ICcuZW5kcG9pbnQtZmlsdGVyJyxcbiAgICAgIC4uLmNvbmZpZ1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEFwcGx5IGFsbCBhY3RpdmUgZmlsdGVycyB0byBlbmRwb2ludHNcbiAgICovXG4gIHN0YXRpYyBhcHBseUZpbHRlcnMoZW5kcG9pbnRzLCBjdXJyZW50RmlsdGVycywgZW1pdCkge1xuICAgIGxldCB2aXNpYmxlQ291bnQgPSAwO1xuICAgIFxuICAgIGVuZHBvaW50cy5mb3JFYWNoKGVuZHBvaW50ID0+IHtcbiAgICAgIGNvbnN0IGRhdGEgPSBlbmRwb2ludC5fZmlsdGVyRGF0YTtcbiAgICAgIGxldCBpc1Zpc2libGUgPSB0cnVlO1xuICAgICAgXG4gICAgICAvLyBBcHBseSB0YWcgZmlsdGVyXG4gICAgICBpZiAoY3VycmVudEZpbHRlcnMudGFnICE9PSAnYWxsJykge1xuICAgICAgICBpc1Zpc2libGUgPSBpc1Zpc2libGUgJiYgZGF0YS50YWdzLmluY2x1ZGVzKGN1cnJlbnRGaWx0ZXJzLnRhZyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEFwcGx5IG1ldGhvZCBmaWx0ZXJcbiAgICAgIGlmIChjdXJyZW50RmlsdGVycy5tZXRob2QgIT09ICdhbGwnKSB7XG4gICAgICAgIGlzVmlzaWJsZSA9IGlzVmlzaWJsZSAmJiBkYXRhLm1ldGhvZCA9PT0gY3VycmVudEZpbHRlcnMubWV0aG9kO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBBcHBseSBzZWFyY2ggZmlsdGVyXG4gICAgICBpZiAoY3VycmVudEZpbHRlcnMuc2VhcmNoKSB7XG4gICAgICAgIGNvbnN0IHNlYXJjaFRleHQgPSBjdXJyZW50RmlsdGVycy5zZWFyY2g7XG4gICAgICAgIGNvbnN0IHNlYXJjaGFibGVUZXh0ID0gYCR7ZGF0YS5wYXRofSAke2RhdGEuc3VtbWFyeX0gJHtkYXRhLnRhZ3Muam9pbignICcpfWAudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgaXNWaXNpYmxlID0gaXNWaXNpYmxlICYmIHNlYXJjaGFibGVUZXh0LmluY2x1ZGVzKHNlYXJjaFRleHQpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBBcHBseSBzdGF0dXMgZmlsdGVyIChkZXByZWNhdGVkLCBldGMuKVxuICAgICAgaWYgKGN1cnJlbnRGaWx0ZXJzLnN0YXR1cyA9PT0gJ2RlcHJlY2F0ZWQnKSB7XG4gICAgICAgIGlzVmlzaWJsZSA9IGlzVmlzaWJsZSAmJiBkYXRhLmRlcHJlY2F0ZWQ7XG4gICAgICB9IGVsc2UgaWYgKGN1cnJlbnRGaWx0ZXJzLnN0YXR1cyA9PT0gJ2FjdGl2ZScpIHtcbiAgICAgICAgaXNWaXNpYmxlID0gaXNWaXNpYmxlICYmICFkYXRhLmRlcHJlY2F0ZWQ7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSBlbmRwb2ludCBkYXRhXG4gICAgICBkYXRhLnZpc2libGUgPSBpc1Zpc2libGU7XG4gICAgICBcbiAgICAgIGlmIChpc1Zpc2libGUpIHZpc2libGVDb3VudCsrO1xuICAgIH0pO1xuICAgIFxuICAgIC8vIEVtaXQgZmlsdGVyIHJlc3VsdHNcbiAgICBlbWl0KCdmaWx0ZXJzLWFwcGxpZWQnLCB7XG4gICAgICBmaWx0ZXJzOiB7IC4uLmN1cnJlbnRGaWx0ZXJzIH0sXG4gICAgICB2aXNpYmxlQ291bnQsXG4gICAgICB0b3RhbENvdW50OiBlbmRwb2ludHMubGVuZ3RoXG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIHZpc2libGVDb3VudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaWx0ZXIgZW5kcG9pbnRzIGJ5IHRhZ1xuICAgKi9cbiAgc3RhdGljIGZpbHRlckJ5VGFnKHRhZywgY3VycmVudEZpbHRlcnMsIHVwZGF0ZUFjdGl2ZUZpbHRlckJ1dHRvbiwgYXBwbHlGaWx0ZXJzLCBzYXZlRmlsdGVycywgZW1pdCkge1xuICAgIGN1cnJlbnRGaWx0ZXJzLnRhZyA9IHRhZztcbiAgICB1cGRhdGVBY3RpdmVGaWx0ZXJCdXR0b24oJy50YWctZmlsdGVyJywgJ2RhdGEtdGFnJywgdGFnKTtcbiAgICBjb25zdCB2aXNpYmxlQ291bnQgPSBhcHBseUZpbHRlcnMoKTtcbiAgICBzYXZlRmlsdGVycygpO1xuICAgIFxuICAgIGVtaXQoJ3RhZy1maWx0ZXItY2hhbmdlZCcsIHsgdGFnLCBhY3RpdmVGaWx0ZXJzOiB7IC4uLmN1cnJlbnRGaWx0ZXJzIH0gfSk7XG4gICAgcmV0dXJuIHZpc2libGVDb3VudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaWx0ZXIgZW5kcG9pbnRzIGJ5IEhUVFAgbWV0aG9kXG4gICAqL1xuICBzdGF0aWMgZmlsdGVyQnlNZXRob2QobWV0aG9kLCBjdXJyZW50RmlsdGVycywgdXBkYXRlQWN0aXZlRmlsdGVyQnV0dG9uLCBhcHBseUZpbHRlcnMsIHNhdmVGaWx0ZXJzLCBlbWl0KSB7XG4gICAgY3VycmVudEZpbHRlcnMubWV0aG9kID0gbWV0aG9kO1xuICAgIHVwZGF0ZUFjdGl2ZUZpbHRlckJ1dHRvbignLm1ldGhvZC1maWx0ZXInLCAnZGF0YS1tZXRob2QnLCBtZXRob2QpO1xuICAgIGNvbnN0IHZpc2libGVDb3VudCA9IGFwcGx5RmlsdGVycygpO1xuICAgIHNhdmVGaWx0ZXJzKCk7XG4gICAgXG4gICAgZW1pdCgnbWV0aG9kLWZpbHRlci1jaGFuZ2VkJywgeyBtZXRob2QsIGFjdGl2ZUZpbHRlcnM6IHsgLi4uY3VycmVudEZpbHRlcnMgfSB9KTtcbiAgICByZXR1cm4gdmlzaWJsZUNvdW50O1xuICB9XG5cbiAgLyoqXG4gICAqIFNlYXJjaCBlbmRwb2ludHMgYnkgdGV4dFxuICAgKi9cbiAgc3RhdGljIHNlYXJjaEVuZHBvaW50cyhxdWVyeSwgY3VycmVudEZpbHRlcnMsIGFwcGx5RmlsdGVycywgc2F2ZUZpbHRlcnMsIGVtaXQpIHtcbiAgICBjdXJyZW50RmlsdGVycy5zZWFyY2ggPSBxdWVyeS50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcbiAgICBjb25zdCB2aXNpYmxlQ291bnQgPSBhcHBseUZpbHRlcnMoKTtcbiAgICBzYXZlRmlsdGVycygpO1xuICAgIFxuICAgIGVtaXQoJ3NlYXJjaC1jaGFuZ2VkJywgeyBxdWVyeSwgYWN0aXZlRmlsdGVyczogeyAuLi5jdXJyZW50RmlsdGVycyB9IH0pO1xuICAgIHJldHVybiB2aXNpYmxlQ291bnQ7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXIgYWxsIGFjdGl2ZSBmaWx0ZXJzXG4gICAqL1xuICBzdGF0aWMgY2xlYXJBbGxGaWx0ZXJzKGN1cnJlbnRGaWx0ZXJzLCB1cGRhdGVBY3RpdmVGaWx0ZXJCdXR0b24sIHNlYXJjaElucHV0LCBhcHBseUZpbHRlcnMsIHNhdmVGaWx0ZXJzLCBlbWl0KSB7XG4gICAgLy8gUmVzZXQgZmlsdGVyIHN0YXRlXG4gICAgY3VycmVudEZpbHRlcnMudGFnID0gJ2FsbCc7XG4gICAgY3VycmVudEZpbHRlcnMubWV0aG9kID0gJ2FsbCc7XG4gICAgY3VycmVudEZpbHRlcnMuc3RhdHVzID0gJ2FsbCc7XG4gICAgY3VycmVudEZpbHRlcnMuc2VhcmNoID0gJyc7XG4gICAgXG4gICAgLy8gUmVzZXQgVUlcbiAgICB1cGRhdGVBY3RpdmVGaWx0ZXJCdXR0b24oJy50YWctZmlsdGVyJywgJ2RhdGEtdGFnJywgJ2FsbCcpO1xuICAgIHVwZGF0ZUFjdGl2ZUZpbHRlckJ1dHRvbignLm1ldGhvZC1maWx0ZXInLCAnZGF0YS1tZXRob2QnLCAnYWxsJyk7XG4gICAgXG4gICAgaWYgKHNlYXJjaElucHV0KSB7XG4gICAgICBzZWFyY2hJbnB1dC52YWx1ZSA9ICcnO1xuICAgIH1cbiAgICBcbiAgICAvLyBBcHBseSBjbGVhcmVkIGZpbHRlcnNcbiAgICBjb25zdCB2aXNpYmxlQ291bnQgPSBhcHBseUZpbHRlcnMoKTtcbiAgICBzYXZlRmlsdGVycygpO1xuICAgIFxuICAgIGVtaXQoJ2ZpbHRlcnMtY2xlYXJlZCcpO1xuICAgIHJldHVybiB2aXNpYmxlQ291bnQ7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYW55IGZpbHRlcnMgYXJlIGFjdGl2ZVxuICAgKi9cbiAgc3RhdGljIGhhc0FjdGl2ZUZpbHRlcnMoY3VycmVudEZpbHRlcnMpIHtcbiAgICByZXR1cm4gY3VycmVudEZpbHRlcnMudGFnICE9PSAnYWxsJyB8fCBcbiAgICAgICAgICAgY3VycmVudEZpbHRlcnMubWV0aG9kICE9PSAnYWxsJyB8fCBcbiAgICAgICAgICAgY3VycmVudEZpbHRlcnMuc2VhcmNoIHx8IFxuICAgICAgICAgICBjdXJyZW50RmlsdGVycy5zdGF0dXMgIT09ICdhbGwnO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBmaWx0ZXJlZCBlbmRwb2ludHNcbiAgICovXG4gIHN0YXRpYyBnZXRGaWx0ZXJlZEVuZHBvaW50cyhlbmRwb2ludHMsIGN1cnJlbnRGaWx0ZXJzKSB7XG4gICAgcmV0dXJuIGVuZHBvaW50cy5maWx0ZXIoZW5kcG9pbnQgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IGVuZHBvaW50Ll9maWx0ZXJEYXRhO1xuICAgICAgaWYgKCFkYXRhKSByZXR1cm4gZmFsc2U7XG4gICAgICBcbiAgICAgIC8vIEFwcGx5IHRhZyBmaWx0ZXJcbiAgICAgIGlmIChjdXJyZW50RmlsdGVycy50YWcgIT09ICdhbGwnICYmICFkYXRhLnRhZ3MuaW5jbHVkZXMoY3VycmVudEZpbHRlcnMudGFnKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEFwcGx5IG1ldGhvZCBmaWx0ZXJcbiAgICAgIGlmIChjdXJyZW50RmlsdGVycy5tZXRob2QgIT09ICdhbGwnICYmIGRhdGEubWV0aG9kICE9PSBjdXJyZW50RmlsdGVycy5tZXRob2QpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBBcHBseSBzZWFyY2ggZmlsdGVyXG4gICAgICBpZiAoY3VycmVudEZpbHRlcnMuc2VhcmNoKSB7XG4gICAgICAgIGNvbnN0IHNlYXJjaFRleHQgPSBjdXJyZW50RmlsdGVycy5zZWFyY2g7XG4gICAgICAgIGNvbnN0IHNlYXJjaGFibGVUZXh0ID0gYCR7ZGF0YS5wYXRofSAke2RhdGEuc3VtbWFyeX0gJHtkYXRhLnRhZ3Muam9pbignICcpfWAudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgaWYgKCFzZWFyY2hhYmxlVGV4dC5pbmNsdWRlcyhzZWFyY2hUZXh0KSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBBcHBseSBzdGF0dXMgZmlsdGVyXG4gICAgICBpZiAoY3VycmVudEZpbHRlcnMuc3RhdHVzID09PSAnZGVwcmVjYXRlZCcgJiYgIWRhdGEuZGVwcmVjYXRlZCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9IGVsc2UgaWYgKGN1cnJlbnRGaWx0ZXJzLnN0YXR1cyA9PT0gJ2FjdGl2ZScgJiYgZGF0YS5kZXByZWNhdGVkKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHZpc2libGUgZW5kcG9pbnRzIGNvdW50XG4gICAqL1xuICBzdGF0aWMgZ2V0VmlzaWJsZUNvdW50KGVuZHBvaW50cykge1xuICAgIHJldHVybiBlbmRwb2ludHMuZmlsdGVyKGVuZHBvaW50ID0+IHtcbiAgICAgIGNvbnN0IGRhdGEgPSBlbmRwb2ludC5fZmlsdGVyRGF0YTtcbiAgICAgIHJldHVybiBkYXRhICYmIGRhdGEudmlzaWJsZTtcbiAgICB9KS5sZW5ndGg7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGZpbHRlciBzdGF0aXN0aWNzXG4gICAqL1xuICBzdGF0aWMgZ2V0RmlsdGVyU3RhdHMoZW5kcG9pbnRzLCBjdXJyZW50RmlsdGVycywgZmlsdGVyU3RhdHMpIHtcbiAgICBjb25zdCB2aXNpYmxlQ291bnQgPSBGaWx0ZXJMb2dpYy5nZXRWaXNpYmxlQ291bnQoZW5kcG9pbnRzKTtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgdG90YWxFbmRwb2ludHM6IGVuZHBvaW50cy5sZW5ndGgsXG4gICAgICB2aXNpYmxlRW5kcG9pbnRzOiB2aXNpYmxlQ291bnQsXG4gICAgICBoaWRkZW5FbmRwb2ludHM6IGVuZHBvaW50cy5sZW5ndGggLSB2aXNpYmxlQ291bnQsXG4gICAgICBhY3RpdmVGaWx0ZXJzOiB7IC4uLmN1cnJlbnRGaWx0ZXJzIH0sXG4gICAgICBmaWx0ZXJTdGF0czogT2JqZWN0LmZyb21FbnRyaWVzKGZpbHRlclN0YXRzKSxcbiAgICAgIGhhc0FjdGl2ZUZpbHRlcnM6IEZpbHRlckxvZ2ljLmhhc0FjdGl2ZUZpbHRlcnMoY3VycmVudEZpbHRlcnMpXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWYWxpZGF0ZSBmaWx0ZXIgY3JpdGVyaWFcbiAgICovXG4gIHN0YXRpYyB2YWxpZGF0ZUZpbHRlcnMoY3VycmVudEZpbHRlcnMsIGF2YWlsYWJsZVRhZ3MsIGF2YWlsYWJsZU1ldGhvZHMpIHtcbiAgICBjb25zdCBpc3N1ZXMgPSBbXTtcbiAgICBcbiAgICAvLyBWYWxpZGF0ZSB0YWcgZmlsdGVyXG4gICAgaWYgKGN1cnJlbnRGaWx0ZXJzLnRhZyAhPT0gJ2FsbCcgJiYgIWF2YWlsYWJsZVRhZ3MuaW5jbHVkZXMoY3VycmVudEZpbHRlcnMudGFnKSkge1xuICAgICAgaXNzdWVzLnB1c2goYEludmFsaWQgdGFnIGZpbHRlcjogJHtjdXJyZW50RmlsdGVycy50YWd9YCk7XG4gICAgfVxuICAgIFxuICAgIC8vIFZhbGlkYXRlIG1ldGhvZCBmaWx0ZXJcbiAgICBpZiAoY3VycmVudEZpbHRlcnMubWV0aG9kICE9PSAnYWxsJyAmJiAhYXZhaWxhYmxlTWV0aG9kcy5pbmNsdWRlcyhjdXJyZW50RmlsdGVycy5tZXRob2QpKSB7XG4gICAgICBpc3N1ZXMucHVzaChgSW52YWxpZCBtZXRob2QgZmlsdGVyOiAke2N1cnJlbnRGaWx0ZXJzLm1ldGhvZH1gKTtcbiAgICB9XG4gICAgXG4gICAgLy8gVmFsaWRhdGUgc3RhdHVzIGZpbHRlclxuICAgIGNvbnN0IHZhbGlkU3RhdHVzZXMgPSBbJ2FsbCcsICdkZXByZWNhdGVkJywgJ2FjdGl2ZSddO1xuICAgIGlmICghdmFsaWRTdGF0dXNlcy5pbmNsdWRlcyhjdXJyZW50RmlsdGVycy5zdGF0dXMpKSB7XG4gICAgICBpc3N1ZXMucHVzaChgSW52YWxpZCBzdGF0dXMgZmlsdGVyOiAke2N1cnJlbnRGaWx0ZXJzLnN0YXR1c31gKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGlzc3VlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgZmlsdGVyIHN1bW1hcnlcbiAgICovXG4gIHN0YXRpYyBjcmVhdGVGaWx0ZXJTdW1tYXJ5KGN1cnJlbnRGaWx0ZXJzLCB2aXNpYmxlQ291bnQsIHRvdGFsQ291bnQpIHtcbiAgICBjb25zdCBhY3RpdmVGaWx0ZXJzID0gW107XG4gICAgXG4gICAgaWYgKGN1cnJlbnRGaWx0ZXJzLnRhZyAhPT0gJ2FsbCcpIHtcbiAgICAgIGFjdGl2ZUZpbHRlcnMucHVzaChgVGFnOiAke2N1cnJlbnRGaWx0ZXJzLnRhZ31gKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKGN1cnJlbnRGaWx0ZXJzLm1ldGhvZCAhPT0gJ2FsbCcpIHtcbiAgICAgIGFjdGl2ZUZpbHRlcnMucHVzaChgTWV0aG9kOiAke2N1cnJlbnRGaWx0ZXJzLm1ldGhvZH1gKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKGN1cnJlbnRGaWx0ZXJzLnNlYXJjaCkge1xuICAgICAgYWN0aXZlRmlsdGVycy5wdXNoKGBTZWFyY2g6IFwiJHtjdXJyZW50RmlsdGVycy5zZWFyY2h9XCJgKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKGN1cnJlbnRGaWx0ZXJzLnN0YXR1cyAhPT0gJ2FsbCcpIHtcbiAgICAgIGFjdGl2ZUZpbHRlcnMucHVzaChgU3RhdHVzOiAke2N1cnJlbnRGaWx0ZXJzLnN0YXR1c31gKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIGFjdGl2ZUZpbHRlcnMsXG4gICAgICBzdW1tYXJ5OiBhY3RpdmVGaWx0ZXJzLmxlbmd0aCA+IDAgXG4gICAgICAgID8gYFNob3dpbmcgJHt2aXNpYmxlQ291bnR9IG9mICR7dG90YWxDb3VudH0gZW5kcG9pbnRzICgke2FjdGl2ZUZpbHRlcnMuam9pbignLCAnKX0pYFxuICAgICAgICA6IGBTaG93aW5nIGFsbCAke3RvdGFsQ291bnR9IGVuZHBvaW50c2AsXG4gICAgICBoYXNGaWx0ZXJzOiBhY3RpdmVGaWx0ZXJzLmxlbmd0aCA+IDBcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEFwcGx5IHNpbmdsZSBmaWx0ZXIgdHlwZVxuICAgKi9cbiAgc3RhdGljIGFwcGx5U2luZ2xlRmlsdGVyKGVuZHBvaW50cywgZmlsdGVyVHlwZSwgZmlsdGVyVmFsdWUpIHtcbiAgICByZXR1cm4gZW5kcG9pbnRzLmZpbHRlcihlbmRwb2ludCA9PiB7XG4gICAgICBjb25zdCBkYXRhID0gZW5kcG9pbnQuX2ZpbHRlckRhdGE7XG4gICAgICBpZiAoIWRhdGEpIHJldHVybiBmYWxzZTtcbiAgICAgIFxuICAgICAgc3dpdGNoIChmaWx0ZXJUeXBlKSB7XG4gICAgICAgIGNhc2UgJ3RhZyc6XG4gICAgICAgICAgcmV0dXJuIGZpbHRlclZhbHVlID09PSAnYWxsJyB8fCBkYXRhLnRhZ3MuaW5jbHVkZXMoZmlsdGVyVmFsdWUpO1xuICAgICAgICBjYXNlICdtZXRob2QnOlxuICAgICAgICAgIHJldHVybiBmaWx0ZXJWYWx1ZSA9PT0gJ2FsbCcgfHwgZGF0YS5tZXRob2QgPT09IGZpbHRlclZhbHVlO1xuICAgICAgICBjYXNlICdzdGF0dXMnOlxuICAgICAgICAgIGlmIChmaWx0ZXJWYWx1ZSA9PT0gJ2RlcHJlY2F0ZWQnKSByZXR1cm4gZGF0YS5kZXByZWNhdGVkO1xuICAgICAgICAgIGlmIChmaWx0ZXJWYWx1ZSA9PT0gJ2FjdGl2ZScpIHJldHVybiAhZGF0YS5kZXByZWNhdGVkO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBjYXNlICdzZWFyY2gnOlxuICAgICAgICAgIGlmICghZmlsdGVyVmFsdWUpIHJldHVybiB0cnVlO1xuICAgICAgICAgIGNvbnN0IHNlYXJjaGFibGVUZXh0ID0gYCR7ZGF0YS5wYXRofSAke2RhdGEuc3VtbWFyeX0gJHtkYXRhLnRhZ3Muam9pbignICcpfWAudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICByZXR1cm4gc2VhcmNoYWJsZVRleHQuaW5jbHVkZXMoZmlsdGVyVmFsdWUudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGF2YWlsYWJsZSBmaWx0ZXIgdmFsdWVzXG4gICAqL1xuICBzdGF0aWMgZ2V0QXZhaWxhYmxlRmlsdGVyVmFsdWVzKGVuZHBvaW50cykge1xuICAgIGNvbnN0IHRhZ3MgPSBuZXcgU2V0KCk7XG4gICAgY29uc3QgbWV0aG9kcyA9IG5ldyBTZXQoKTtcbiAgICBjb25zdCBzdGF0dXNlcyA9IG5ldyBTZXQoWydhbGwnLCAnYWN0aXZlJywgJ2RlcHJlY2F0ZWQnXSk7XG4gICAgXG4gICAgZW5kcG9pbnRzLmZvckVhY2goZW5kcG9pbnQgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IGVuZHBvaW50Ll9maWx0ZXJEYXRhO1xuICAgICAgaWYgKCFkYXRhKSByZXR1cm47XG4gICAgICBcbiAgICAgIGRhdGEudGFncy5mb3JFYWNoKHRhZyA9PiB0YWdzLmFkZCh0YWcpKTtcbiAgICAgIG1ldGhvZHMuYWRkKGRhdGEubWV0aG9kKTtcbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgdGFnczogWydhbGwnLCAuLi5BcnJheS5mcm9tKHRhZ3MpLnNvcnQoKV0sXG4gICAgICBtZXRob2RzOiBbJ2FsbCcsIC4uLkFycmF5LmZyb20obWV0aG9kcykuc29ydCgpXSxcbiAgICAgIHN0YXR1c2VzOiBBcnJheS5mcm9tKHN0YXR1c2VzKVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogUmVzZXQgZmlsdGVyIHN0YXRlXG4gICAqL1xuICBzdGF0aWMgcmVzZXRGaWx0ZXJTdGF0ZSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdGFnOiAnYWxsJyxcbiAgICAgIG1ldGhvZDogJ2FsbCcsXG4gICAgICBzdGF0dXM6ICdhbGwnLFxuICAgICAgc2VhcmNoOiAnJ1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQ2xvbmUgZmlsdGVyIHN0YXRlXG4gICAqL1xuICBzdGF0aWMgY2xvbmVGaWx0ZXJTdGF0ZShjdXJyZW50RmlsdGVycykge1xuICAgIHJldHVybiB7IC4uLmN1cnJlbnRGaWx0ZXJzIH07XG4gIH1cblxuICAvKipcbiAgICogQ29tcGFyZSBmaWx0ZXIgc3RhdGVzXG4gICAqL1xuICBzdGF0aWMgY29tcGFyZUZpbHRlclN0YXRlcyhmaWx0ZXJzMSwgZmlsdGVyczIpIHtcbiAgICByZXR1cm4gZmlsdGVyczEudGFnID09PSBmaWx0ZXJzMi50YWcgJiZcbiAgICAgICAgICAgZmlsdGVyczEubWV0aG9kID09PSBmaWx0ZXJzMi5tZXRob2QgJiZcbiAgICAgICAgICAgZmlsdGVyczEuc3RhdHVzID09PSBmaWx0ZXJzMi5zdGF0dXMgJiZcbiAgICAgICAgICAgZmlsdGVyczEuc2VhcmNoID09PSBmaWx0ZXJzMi5zZWFyY2g7XG4gIH1cbn1cblxuLy8gQXV0by1yZWdpc3RlciBjb21wb25lbnRcbmltcG9ydCBDb21wb25lbnRNYW5hZ2VyIGZyb20gJy4uLy4uLy4uL2NvcmUvQ29tcG9uZW50TWFuYWdlci5qcyc7XG5Db21wb25lbnRNYW5hZ2VyLnJlZ2lzdGVyKCdmaWx0ZXItbG9naWMnLCBGaWx0ZXJMb2dpYyk7IiwgIi8qKlxuICogRmlsdGVyVUkgQ29tcG9uZW50XG4gKiBIYW5kbGVzIHVzZXIgaW50ZXJmYWNlLCBhbmltYXRpb25zLCBhbmQgdmlzdWFsIHVwZGF0ZXMgZm9yIGVuZHBvaW50IGZpbHRlcmluZ1xuICovXG5cbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJy4uLy4uLy4uL2NvcmUvQ29tcG9uZW50LmpzJztcbmltcG9ydCB7IHNhbml0aXplSFRNTCwgZXNjYXBlSFRNTCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3Nhbml0aXplLmpzJztcblxuZXhwb3J0IGNsYXNzIEZpbHRlclVJIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoY29uZmlnID0ge30pIHtcbiAgICBzdXBlcih7XG4gICAgICBuYW1lOiAnZmlsdGVyLXVpJyxcbiAgICAgIHNlbGVjdG9yOiBjb25maWcuc2VsZWN0b3IgfHwgJy5lbmRwb2ludC1maWx0ZXInLFxuICAgICAgLi4uY29uZmlnXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIGFjdGl2ZSBzdGF0ZSBvZiBmaWx0ZXIgYnV0dG9uc1xuICAgKi9cbiAgc3RhdGljIHVwZGF0ZUFjdGl2ZUZpbHRlckJ1dHRvbihzZWxlY3RvciwgYXR0cmlidXRlLCB2YWx1ZSkge1xuICAgIGNvbnN0IGJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbiAgICBidXR0b25zLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICAgIGNvbnN0IGlzQWN0aXZlID0gYnV0dG9uLmdldEF0dHJpYnV0ZShhdHRyaWJ1dGUpID09PSB2YWx1ZTtcbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCd0YWctZmlsdGVyLS1hY3RpdmUnLCBpc0FjdGl2ZSk7XG4gICAgICBidXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgnbWV0aG9kLWZpbHRlci0tYWN0aXZlJywgaXNBY3RpdmUpO1xuICAgICAgYnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ2ZpbHRlci0tYWN0aXZlJywgaXNBY3RpdmUpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBlbmRwb2ludCB2aXNpYmlsaXR5IHdpdGggYW5pbWF0aW9uXG4gICAqL1xuICBzdGF0aWMgc2V0RW5kcG9pbnRWaXNpYmlsaXR5KGVuZHBvaW50LCBpc1Zpc2libGUsIGFuaW1hdGVGaWx0ZXJpbmcgPSB0cnVlKSB7XG4gICAgaWYgKGFuaW1hdGVGaWx0ZXJpbmcgJiYgIXdpbmRvdy5tYXRjaE1lZGlhKCcocHJlZmVycy1yZWR1Y2VkLW1vdGlvbjogcmVkdWNlKScpLm1hdGNoZXMpIHtcbiAgICAgIGlmIChpc1Zpc2libGUgJiYgZW5kcG9pbnQuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnKSB7XG4gICAgICAgIC8vIFNob3cgd2l0aCBhbmltYXRpb25cbiAgICAgICAgZW5kcG9pbnQuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICBlbmRwb2ludC5zdHlsZS5vcGFjaXR5ID0gJzAnO1xuICAgICAgICBlbmRwb2ludC5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWSgxMHB4KSc7XG4gICAgICAgIC8vIENTUyBoYW5kbGVzIHRyYW5zaXRpb25zIHZpYSBhbmltYXRpb24gdG9rZW5zXG4gICAgICAgIFxuICAgICAgICAvLyBUcmlnZ2VyIGFuaW1hdGlvblxuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgIGVuZHBvaW50LnN0eWxlLm9wYWNpdHkgPSAnMSc7XG4gICAgICAgICAgZW5kcG9pbnQuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoMCknO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIENsZWFuIHVwIGFmdGVyIGFuaW1hdGlvblxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBlbmRwb2ludC5zdHlsZS50cmFuc2l0aW9uID0gJyc7XG4gICAgICAgICAgZW5kcG9pbnQuc3R5bGUudHJhbnNmb3JtID0gJyc7XG4gICAgICAgIH0sIDMwMCk7XG4gICAgICAgIFxuICAgICAgfSBlbHNlIGlmICghaXNWaXNpYmxlICYmIGVuZHBvaW50LnN0eWxlLmRpc3BsYXkgIT09ICdub25lJykge1xuICAgICAgICAvLyBIaWRlIHdpdGggYW5pbWF0aW9uXG4gICAgICAgIC8vIENTUyBoYW5kbGVzIHRyYW5zaXRpb25zIHZpYSBhbmltYXRpb24gdG9rZW5zXG4gICAgICAgIGVuZHBvaW50LnN0eWxlLm9wYWNpdHkgPSAnMCc7XG4gICAgICAgIGVuZHBvaW50LnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVZKC0xMHB4KSc7XG4gICAgICAgIFxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBlbmRwb2ludC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgIGVuZHBvaW50LnN0eWxlLnRyYW5zaXRpb24gPSAnJztcbiAgICAgICAgICBlbmRwb2ludC5zdHlsZS50cmFuc2Zvcm0gPSAnJztcbiAgICAgICAgfSwgMzAwKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTm8gYW5pbWF0aW9uXG4gICAgICBlbmRwb2ludC5zdHlsZS5kaXNwbGF5ID0gaXNWaXNpYmxlID8gJycgOiAnbm9uZSc7XG4gICAgfVxuICAgIFxuICAgIGVuZHBvaW50LmNsYXNzTGlzdC50b2dnbGUoJ2VuZHBvaW50LWl0ZW0tLWZpbHRlcmVkJywgIWlzVmlzaWJsZSk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIGFsbCBlbmRwb2ludHMgdmlzaWJpbGl0eVxuICAgKi9cbiAgc3RhdGljIHVwZGF0ZUVuZHBvaW50c1Zpc2liaWxpdHkoZW5kcG9pbnRzLCBhbmltYXRlRmlsdGVyaW5nID0gdHJ1ZSkge1xuICAgIGVuZHBvaW50cy5mb3JFYWNoKGVuZHBvaW50ID0+IHtcbiAgICAgIGNvbnN0IGRhdGEgPSBlbmRwb2ludC5fZmlsdGVyRGF0YTtcbiAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgIEZpbHRlclVJLnNldEVuZHBvaW50VmlzaWJpbGl0eShlbmRwb2ludCwgZGF0YS52aXNpYmxlLCBhbmltYXRlRmlsdGVyaW5nKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgcmVzdWx0cyBjb3VudCBkaXNwbGF5XG4gICAqL1xuICBzdGF0aWMgdXBkYXRlUmVzdWx0c0NvdW50KGNvdW50LCB0b3RhbENvdW50KSB7XG4gICAgY29uc3QgY291bnRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZpbHRlci1yZXN1bHRzLWNvdW50Jyk7XG4gICAgaWYgKGNvdW50RWxlbWVudCkge1xuICAgICAgY291bnRFbGVtZW50LnRleHRDb250ZW50ID0gYFNob3dpbmcgJHtjb3VudH0gb2YgJHt0b3RhbENvdW50fSBlbmRwb2ludHNgO1xuICAgICAgY291bnRFbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoJ2ZpbHRlci1yZXN1bHRzLWNvdW50LS1maWx0ZXJlZCcsIGNvdW50IDwgdG90YWxDb3VudCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBjbGVhciBmaWx0ZXJzIGJ1dHRvbiB2aXNpYmlsaXR5XG4gICAqL1xuICBzdGF0aWMgdXBkYXRlQ2xlYXJGaWx0ZXJzVmlzaWJpbGl0eShoYXNBY3RpdmVGaWx0ZXJzKSB7XG4gICAgY29uc3QgY2xlYXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2xlYXItYWxsLWZpbHRlcnMnKTtcbiAgICBpZiAoY2xlYXJCdXR0b24pIHtcbiAgICAgIGNsZWFyQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBoYXNBY3RpdmVGaWx0ZXJzID8gJycgOiAnbm9uZSc7XG4gICAgfVxuICAgIFxuICAgIC8vIFVwZGF0ZSBmaWx0ZXIgaW5kaWNhdG9yXG4gICAgY29uc3QgZmlsdGVySW5kaWNhdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjdGl2ZS1maWx0ZXJzLWluZGljYXRvcicpO1xuICAgIGlmIChmaWx0ZXJJbmRpY2F0b3IpIHtcbiAgICAgIGZpbHRlckluZGljYXRvci5jbGFzc0xpc3QudG9nZ2xlKCd2aXNpYmxlJywgaGFzQWN0aXZlRmlsdGVycyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIGZpbHRlciBidXR0b24gZXZlbnQgbGlzdGVuZXJzXG4gICAqL1xuICBzdGF0aWMgc2V0dXBGaWx0ZXJCdXR0b25zKHRhZ0ZpbHRlcnMsIG1ldGhvZEZpbHRlcnMsIGFkZEV2ZW50TGlzdGVuZXIsIGNhbGxiYWNrcykge1xuICAgIC8vIFRhZyBmaWx0ZXIgY2xpY2tzXG4gICAgdGFnRmlsdGVycy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgICBhZGRFdmVudExpc3RlbmVyKGJ1dHRvbiwgJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBjb25zdCB0YWcgPSBidXR0b24uZ2V0QXR0cmlidXRlKCdkYXRhLXRhZycpO1xuICAgICAgICBjYWxsYmFja3Mub25UYWdGaWx0ZXIodGFnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIFxuICAgIC8vIE1ldGhvZCBmaWx0ZXIgY2xpY2tzXG4gICAgbWV0aG9kRmlsdGVycy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgICBhZGRFdmVudExpc3RlbmVyKGJ1dHRvbiwgJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBjb25zdCBtZXRob2QgPSBidXR0b24uZ2V0QXR0cmlidXRlKCdkYXRhLW1ldGhvZCcpO1xuICAgICAgICBjYWxsYmFja3Mub25NZXRob2RGaWx0ZXIobWV0aG9kKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIHNlYXJjaCBpbnB1dCBldmVudCBsaXN0ZW5lcnNcbiAgICovXG4gIHN0YXRpYyBzZXR1cFNlYXJjaElucHV0KHNlYXJjaElucHV0LCBhZGRFdmVudExpc3RlbmVyLCBjYWxsYmFja3MpIHtcbiAgICBpZiAoIXNlYXJjaElucHV0KSByZXR1cm47XG5cbiAgICBhZGRFdmVudExpc3RlbmVyKHNlYXJjaElucHV0LCAnaW5wdXQnLCAoZSkgPT4ge1xuICAgICAgY2FsbGJhY2tzLm9uU2VhcmNoKGUudGFyZ2V0LnZhbHVlKTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBDbGVhciBzZWFyY2ggYnV0dG9uXG4gICAgY29uc3QgY2xlYXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VhcmNoLWNsZWFyJyk7XG4gICAgaWYgKGNsZWFyQnV0dG9uKSB7XG4gICAgICBhZGRFdmVudExpc3RlbmVyKGNsZWFyQnV0dG9uLCAnY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHNlYXJjaElucHV0LnZhbHVlID0gJyc7XG4gICAgICAgIGNhbGxiYWNrcy5vblNlYXJjaCgnJyk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0dXAgY2xlYXIgYWxsIGZpbHRlcnMgYnV0dG9uXG4gICAqL1xuICBzdGF0aWMgc2V0dXBDbGVhckFsbEJ1dHRvbihhZGRFdmVudExpc3RlbmVyLCBvbkNsZWFyQWxsKSB7XG4gICAgY29uc3QgY2xlYXJBbGxCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2xlYXItYWxsLWZpbHRlcnMnKTtcbiAgICBpZiAoY2xlYXJBbGxCdXR0b24pIHtcbiAgICAgIGFkZEV2ZW50TGlzdGVuZXIoY2xlYXJBbGxCdXR0b24sICdjbGljaycsICgpID0+IHtcbiAgICAgICAgb25DbGVhckFsbCgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIGtleWJvYXJkIHNob3J0Y3V0c1xuICAgKi9cbiAgc3RhdGljIHNldHVwS2V5Ym9hcmRTaG9ydGN1dHMoYWRkRXZlbnRMaXN0ZW5lciwgb25DbGVhckFsbCkge1xuICAgIGFkZEV2ZW50TGlzdGVuZXIoZG9jdW1lbnQsICdrZXlkb3duJywgKGUpID0+IHtcbiAgICAgIGlmIChlLnRhcmdldC5jbG9zZXN0KCcuZW5kcG9pbnQtZmlsdGVyJykgJiYgZS5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICAgIG9uQ2xlYXJBbGwoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgZmlsdGVyIHN0YXR1cyBpbmRpY2F0b3JcbiAgICovXG4gIHN0YXRpYyBjcmVhdGVGaWx0ZXJTdGF0dXNJbmRpY2F0b3IoY3VycmVudEZpbHRlcnMsIHZpc2libGVDb3VudCwgdG90YWxDb3VudCkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5maWx0ZXItc3RhdHVzJyk7XG4gICAgaWYgKCFjb250YWluZXIpIHJldHVybjtcblxuICAgIGNvbnN0IGFjdGl2ZUZpbHRlcnMgPSBbXTtcbiAgICBpZiAoY3VycmVudEZpbHRlcnMudGFnICE9PSAnYWxsJykgYWN0aXZlRmlsdGVycy5wdXNoKGBUYWc6ICR7Y3VycmVudEZpbHRlcnMudGFnfWApO1xuICAgIGlmIChjdXJyZW50RmlsdGVycy5tZXRob2QgIT09ICdhbGwnKSBhY3RpdmVGaWx0ZXJzLnB1c2goYE1ldGhvZDogJHtjdXJyZW50RmlsdGVycy5tZXRob2R9YCk7XG4gICAgaWYgKGN1cnJlbnRGaWx0ZXJzLnNlYXJjaCkgYWN0aXZlRmlsdGVycy5wdXNoKGBTZWFyY2g6IFwiJHtjdXJyZW50RmlsdGVycy5zZWFyY2h9XCJgKTtcbiAgICBpZiAoY3VycmVudEZpbHRlcnMuc3RhdHVzICE9PSAnYWxsJykgYWN0aXZlRmlsdGVycy5wdXNoKGBTdGF0dXM6ICR7Y3VycmVudEZpbHRlcnMuc3RhdHVzfWApO1xuXG4gICAgY29uc3QgYWN0aXZlID0gYWN0aXZlRmlsdGVycy5tYXAoZXNjYXBlSFRNTCkuam9pbignLCAnKTtcbiAgICBjb25zdCBodG1sID0gYFxuICAgICAgPGRpdiBjbGFzcz1cImZpbHRlci1zdGF0dXNfX2NvdW50XCI+XG4gICAgICAgIFNob3dpbmcgJHt2aXNpYmxlQ291bnR9IG9mICR7dG90YWxDb3VudH0gZW5kcG9pbnRzXG4gICAgICA8L2Rpdj5cbiAgICAgICR7YWN0aXZlRmlsdGVycy5sZW5ndGggPiAwID8gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwiZmlsdGVyLXN0YXR1c19fYWN0aXZlXCI+XG4gICAgICAgICAgQWN0aXZlIGZpbHRlcnM6ICR7YWN0aXZlfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIGAgOiAnJ31cbiAgICBgO1xuICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBzYW5pdGl6ZUhUTUwoaHRtbCk7XG4gIH1cblxuICAvKipcbiAgICogSGlnaGxpZ2h0IG1hdGNoaW5nIHRleHQgaW4gc2VhcmNoIHJlc3VsdHNcbiAgICovXG4gIHN0YXRpYyBoaWdobGlnaHRTZWFyY2hUZXh0KGVuZHBvaW50cywgc2VhcmNoUXVlcnkpIHtcbiAgICBpZiAoIXNlYXJjaFF1ZXJ5KSByZXR1cm47XG5cbiAgICBjb25zdCBzZWFyY2hUZXh0ID0gc2VhcmNoUXVlcnkudG9Mb3dlckNhc2UoKS50cmltKCk7XG4gICAgaWYgKCFzZWFyY2hUZXh0KSByZXR1cm47XG5cbiAgICBlbmRwb2ludHMuZm9yRWFjaChlbmRwb2ludCA9PiB7XG4gICAgICBjb25zdCBkYXRhID0gZW5kcG9pbnQuX2ZpbHRlckRhdGE7XG4gICAgICBpZiAoIWRhdGEgfHwgIWRhdGEudmlzaWJsZSkgcmV0dXJuO1xuXG4gICAgICAvLyBIaWdobGlnaHQgaW4gcGF0aFxuICAgICAgY29uc3QgcGF0aEVsZW1lbnQgPSBlbmRwb2ludC5xdWVyeVNlbGVjdG9yKCcuZW5kcG9pbnQtcGF0aCcpO1xuICAgICAgaWYgKHBhdGhFbGVtZW50KSB7XG4gICAgICAgIEZpbHRlclVJLmhpZ2hsaWdodFRleHRJbkVsZW1lbnQocGF0aEVsZW1lbnQsIHNlYXJjaFRleHQpO1xuICAgICAgfVxuXG4gICAgICAvLyBIaWdobGlnaHQgaW4gc3VtbWFyeVxuICAgICAgY29uc3Qgc3VtbWFyeUVsZW1lbnQgPSBlbmRwb2ludC5xdWVyeVNlbGVjdG9yKCcuZW5kcG9pbnQtc3VtbWFyeScpO1xuICAgICAgaWYgKHN1bW1hcnlFbGVtZW50KSB7XG4gICAgICAgIEZpbHRlclVJLmhpZ2hsaWdodFRleHRJbkVsZW1lbnQoc3VtbWFyeUVsZW1lbnQsIHNlYXJjaFRleHQpO1xuICAgICAgfVxuXG4gICAgICAvLyBIaWdobGlnaHQgaW4gdGFnc1xuICAgICAgY29uc3QgdGFnRWxlbWVudHMgPSBlbmRwb2ludC5xdWVyeVNlbGVjdG9yQWxsKCcuZW5kcG9pbnQtdGFnJyk7XG4gICAgICB0YWdFbGVtZW50cy5mb3JFYWNoKHRhZyA9PiB7XG4gICAgICAgIEZpbHRlclVJLmhpZ2hsaWdodFRleHRJbkVsZW1lbnQodGFnLCBzZWFyY2hUZXh0KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBzZWFyY2ggdGV4dCBoaWdobGlnaHRpbmdcbiAgICovXG4gIHN0YXRpYyByZW1vdmVTZWFyY2hIaWdobGlnaHRpbmcoZW5kcG9pbnRzKSB7XG4gICAgZW5kcG9pbnRzLmZvckVhY2goZW5kcG9pbnQgPT4ge1xuICAgICAgY29uc3QgaGlnaGxpZ2h0ZWRFbGVtZW50cyA9IGVuZHBvaW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWFyY2gtaGlnaGxpZ2h0Jyk7XG4gICAgICBoaWdobGlnaHRlZEVsZW1lbnRzLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICAgIGNvbnN0IHBhcmVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcbiAgICAgICAgcGFyZW50LnJlcGxhY2VDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShlbGVtZW50LnRleHRDb250ZW50KSwgZWxlbWVudCk7XG4gICAgICAgIHBhcmVudC5ub3JtYWxpemUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEhpZ2hsaWdodCB0ZXh0IGluIHNwZWNpZmljIGVsZW1lbnRcbiAgICovXG4gIHN0YXRpYyBoaWdobGlnaHRUZXh0SW5FbGVtZW50KGVsZW1lbnQsIHNlYXJjaFRleHQpIHtcbiAgICBjb25zdCBvcmlnaW5hbFRleHQgPSBlbGVtZW50LnRleHRDb250ZW50O1xuICAgIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChgKCR7c2VhcmNoVGV4dH0pYCwgJ2dpJyk7XG4gICAgXG4gICAgaWYgKHJlZ2V4LnRlc3Qob3JpZ2luYWxUZXh0KSkge1xuICAgICAgY29uc3QgaGlnaGxpZ2h0ZWRIVE1MID0gb3JpZ2luYWxUZXh0LnJlcGxhY2UocmVnZXgsICc8c3BhbiBjbGFzcz1cInNlYXJjaC1oaWdobGlnaHRcIj4kMTwvc3Bhbj4nKTtcbiAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gaGlnaGxpZ2h0ZWRIVE1MO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93IGZpbHRlciBsb2FkaW5nIHN0YXRlXG4gICAqL1xuICBzdGF0aWMgc2hvd0ZpbHRlckxvYWRpbmcoKSB7XG4gICAgY29uc3QgZmlsdGVyQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVuZHBvaW50LWZpbHRlcicpO1xuICAgIGlmIChmaWx0ZXJDb250YWluZXIpIHtcbiAgICAgIGZpbHRlckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdmaWx0ZXItbG9hZGluZycpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIaWRlIGZpbHRlciBsb2FkaW5nIHN0YXRlXG4gICAqL1xuICBzdGF0aWMgaGlkZUZpbHRlckxvYWRpbmcoKSB7XG4gICAgY29uc3QgZmlsdGVyQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVuZHBvaW50LWZpbHRlcicpO1xuICAgIGlmIChmaWx0ZXJDb250YWluZXIpIHtcbiAgICAgIGZpbHRlckNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdmaWx0ZXItbG9hZGluZycpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBbmltYXRlIGZpbHRlciBhcHBsaWNhdGlvblxuICAgKi9cbiAgc3RhdGljIGFuaW1hdGVGaWx0ZXJBcHBsaWNhdGlvbihlbmRwb2ludHMsIGRlbGF5ID0gNTApIHtcbiAgICBlbmRwb2ludHMuZm9yRWFjaCgoZW5kcG9pbnQsIGluZGV4KSA9PiB7XG4gICAgICBjb25zdCBkYXRhID0gZW5kcG9pbnQuX2ZpbHRlckRhdGE7XG4gICAgICBpZiAoZGF0YSAmJiBkYXRhLnZpc2libGUpIHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgZW5kcG9pbnQuc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlKDEuMDIpJztcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGVuZHBvaW50LnN0eWxlLnRyYW5zZm9ybSA9ICcnO1xuICAgICAgICAgIH0sIDE1MCk7XG4gICAgICAgIH0sIGluZGV4ICogZGVsYXkpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBmaWx0ZXIgYnJlYWRjcnVtYnNcbiAgICovXG4gIHN0YXRpYyBjcmVhdGVGaWx0ZXJCcmVhZGNydW1icyhjdXJyZW50RmlsdGVycywgb25SZW1vdmVGaWx0ZXIpIHtcbiAgICBjb25zdCBicmVhZGNydW1ic0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5maWx0ZXItYnJlYWRjcnVtYnMnKTtcbiAgICBpZiAoIWJyZWFkY3J1bWJzQ29udGFpbmVyKSByZXR1cm47XG5cbiAgICBicmVhZGNydW1ic0NvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcblxuICAgIGNvbnN0IGZpbHRlcnMgPSBbXTtcbiAgICBpZiAoY3VycmVudEZpbHRlcnMudGFnICE9PSAnYWxsJykge1xuICAgICAgZmlsdGVycy5wdXNoKHsgdHlwZTogJ3RhZycsIHZhbHVlOiBjdXJyZW50RmlsdGVycy50YWcsIGxhYmVsOiBgVGFnOiAke2N1cnJlbnRGaWx0ZXJzLnRhZ31gIH0pO1xuICAgIH1cbiAgICBpZiAoY3VycmVudEZpbHRlcnMubWV0aG9kICE9PSAnYWxsJykge1xuICAgICAgZmlsdGVycy5wdXNoKHsgdHlwZTogJ21ldGhvZCcsIHZhbHVlOiBjdXJyZW50RmlsdGVycy5tZXRob2QsIGxhYmVsOiBgTWV0aG9kOiAke2N1cnJlbnRGaWx0ZXJzLm1ldGhvZH1gIH0pO1xuICAgIH1cbiAgICBpZiAoY3VycmVudEZpbHRlcnMuc2VhcmNoKSB7XG4gICAgICBmaWx0ZXJzLnB1c2goeyB0eXBlOiAnc2VhcmNoJywgdmFsdWU6IGN1cnJlbnRGaWx0ZXJzLnNlYXJjaCwgbGFiZWw6IGBTZWFyY2g6IFwiJHtjdXJyZW50RmlsdGVycy5zZWFyY2h9XCJgIH0pO1xuICAgIH1cbiAgICBpZiAoY3VycmVudEZpbHRlcnMuc3RhdHVzICE9PSAnYWxsJykge1xuICAgICAgZmlsdGVycy5wdXNoKHsgdHlwZTogJ3N0YXR1cycsIHZhbHVlOiBjdXJyZW50RmlsdGVycy5zdGF0dXMsIGxhYmVsOiBgU3RhdHVzOiAke2N1cnJlbnRGaWx0ZXJzLnN0YXR1c31gIH0pO1xuICAgIH1cblxuICAgIGZpbHRlcnMuZm9yRWFjaChmaWx0ZXIgPT4ge1xuICAgICAgY29uc3QgYnJlYWRjcnVtYiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgIGJyZWFkY3J1bWIuY2xhc3NOYW1lID0gJ2ZpbHRlci1icmVhZGNydW1iJztcbiAgICAgIGNvbnN0IHNhZmVMYWJlbCA9IGVzY2FwZUhUTUwoZmlsdGVyLmxhYmVsKTtcbiAgICAgIGJyZWFkY3J1bWIuaW5uZXJIVE1MID0gc2FuaXRpemVIVE1MKGBcbiAgICAgICAgJHtzYWZlTGFiZWx9XG4gICAgICAgIDxidXR0b24gY2xhc3M9XCJmaWx0ZXItYnJlYWRjcnVtYl9fcmVtb3ZlXCIgYXJpYS1sYWJlbD1cIlJlbW92ZSAke3NhZmVMYWJlbH1cIj5cdTAwRDc8L2J1dHRvbj5cbiAgICAgIGApO1xuICAgICAgXG4gICAgICBjb25zdCByZW1vdmVCdXR0b24gPSBicmVhZGNydW1iLnF1ZXJ5U2VsZWN0b3IoJy5maWx0ZXItYnJlYWRjcnVtYl9fcmVtb3ZlJyk7XG4gICAgICByZW1vdmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIG9uUmVtb3ZlRmlsdGVyKGZpbHRlci50eXBlKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBicmVhZGNydW1ic0NvbnRhaW5lci5hcHBlbmRDaGlsZChicmVhZGNydW1iKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgZmlsdGVyIGJ1dHRvbiBjb3VudHNcbiAgICovXG4gIHN0YXRpYyB1cGRhdGVGaWx0ZXJCdXR0b25Db3VudHModGFnRmlsdGVycywgbWV0aG9kRmlsdGVycywgZW5kcG9pbnRzLCBjdXJyZW50RmlsdGVycykge1xuICAgIC8vIFVwZGF0ZSB0YWcgZmlsdGVyIGNvdW50c1xuICAgIHRhZ0ZpbHRlcnMuZm9yRWFjaChidXR0b24gPT4ge1xuICAgICAgY29uc3QgdGFnID0gYnV0dG9uLmdldEF0dHJpYnV0ZSgnZGF0YS10YWcnKTtcbiAgICAgIGlmICh0YWcgJiYgdGFnICE9PSAnYWxsJykge1xuICAgICAgICAvLyBDb3VudCBob3cgbWFueSBlbmRwb2ludHMgd291bGQgYmUgdmlzaWJsZSB3aXRoIHRoaXMgdGFnIGZpbHRlclxuICAgICAgICBjb25zdCB0ZW1wRmlsdGVycyA9IHsgLi4uY3VycmVudEZpbHRlcnMsIHRhZyB9O1xuICAgICAgICBjb25zdCBjb3VudCA9IGVuZHBvaW50cy5maWx0ZXIoZW5kcG9pbnQgPT4ge1xuICAgICAgICAgIGNvbnN0IGRhdGEgPSBlbmRwb2ludC5fZmlsdGVyRGF0YTtcbiAgICAgICAgICByZXR1cm4gZGF0YSAmJiBkYXRhLnRhZ3MuaW5jbHVkZXModGFnKTtcbiAgICAgICAgfSkubGVuZ3RoO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgbGFiZWwgPSBidXR0b24udGV4dENvbnRlbnQucmVwbGFjZSgvXFxzKlxcKFxcZCtcXCkkLywgJycpO1xuICAgICAgICBidXR0b24udGV4dENvbnRlbnQgPSBgJHtsYWJlbH0gKCR7Y291bnR9KWA7XG4gICAgICAgIGJ1dHRvbi5kaXNhYmxlZCA9IGNvdW50ID09PSAwO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gVXBkYXRlIG1ldGhvZCBmaWx0ZXIgY291bnRzXG4gICAgbWV0aG9kRmlsdGVycy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgICBjb25zdCBtZXRob2QgPSBidXR0b24uZ2V0QXR0cmlidXRlKCdkYXRhLW1ldGhvZCcpO1xuICAgICAgaWYgKG1ldGhvZCAmJiBtZXRob2QgIT09ICdhbGwnKSB7XG4gICAgICAgIGNvbnN0IHRlbXBGaWx0ZXJzID0geyAuLi5jdXJyZW50RmlsdGVycywgbWV0aG9kIH07XG4gICAgICAgIGNvbnN0IGNvdW50ID0gZW5kcG9pbnRzLmZpbHRlcihlbmRwb2ludCA9PiB7XG4gICAgICAgICAgY29uc3QgZGF0YSA9IGVuZHBvaW50Ll9maWx0ZXJEYXRhO1xuICAgICAgICAgIHJldHVybiBkYXRhICYmIGRhdGEubWV0aG9kID09PSBtZXRob2Q7XG4gICAgICAgIH0pLmxlbmd0aDtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGxhYmVsID0gYnV0dG9uLnRleHRDb250ZW50LnJlcGxhY2UoL1xccypcXChcXGQrXFwpJC8sICcnKTtcbiAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gYCR7bGFiZWx9ICgke2NvdW50fSlgO1xuICAgICAgICBidXR0b24uZGlzYWJsZWQgPSBjb3VudCA9PT0gMDtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNldCBhbGwgdmlzdWFsIHN0YXRlc1xuICAgKi9cbiAgc3RhdGljIHJlc2V0VmlzdWFsU3RhdGVzKGVuZHBvaW50cykge1xuICAgIGVuZHBvaW50cy5mb3JFYWNoKGVuZHBvaW50ID0+IHtcbiAgICAgIC8vIFJlc2V0IHZpc2liaWxpdHlcbiAgICAgIGVuZHBvaW50LnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgIGVuZHBvaW50LnN0eWxlLm9wYWNpdHkgPSAnJztcbiAgICAgIGVuZHBvaW50LnN0eWxlLnRyYW5zZm9ybSA9ICcnO1xuICAgICAgZW5kcG9pbnQuc3R5bGUudHJhbnNpdGlvbiA9ICcnO1xuICAgICAgZW5kcG9pbnQuY2xhc3NMaXN0LnJlbW92ZSgnZW5kcG9pbnQtaXRlbS0tZmlsdGVyZWQnKTtcbiAgICAgIFxuICAgICAgLy8gUmVzZXQgZGF0YVxuICAgICAgaWYgKGVuZHBvaW50Ll9maWx0ZXJEYXRhKSB7XG4gICAgICAgIGVuZHBvaW50Ll9maWx0ZXJEYXRhLnZpc2libGUgPSB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gUmVzZXQgVUkgZWxlbWVudHNcbiAgICBGaWx0ZXJVSS5yZW1vdmVTZWFyY2hIaWdobGlnaHRpbmcoZW5kcG9pbnRzKTtcbiAgICBGaWx0ZXJVSS5oaWRlRmlsdGVyTG9hZGluZygpO1xuICAgIFxuICAgIC8vIFJlc2V0IGJ1dHRvbnNcbiAgICBjb25zdCBidXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRhZy1maWx0ZXIsIC5tZXRob2QtZmlsdGVyJyk7XG4gICAgYnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgndGFnLWZpbHRlci0tYWN0aXZlJywgJ21ldGhvZC1maWx0ZXItLWFjdGl2ZScsICdmaWx0ZXItLWFjdGl2ZScpO1xuICAgICAgYnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgfSk7XG4gIH1cbn1cblxuLy8gQXV0by1yZWdpc3RlciBjb21wb25lbnRcbmltcG9ydCBDb21wb25lbnRNYW5hZ2VyIGZyb20gJy4uLy4uLy4uL2NvcmUvQ29tcG9uZW50TWFuYWdlci5qcyc7XG5Db21wb25lbnRNYW5hZ2VyLnJlZ2lzdGVyKCdmaWx0ZXItdWknLCBGaWx0ZXJVSSk7IiwgIi8qKlxuICogRmlsdGVyUGVyc2lzdGVuY2UgQ29tcG9uZW50XG4gKiBIYW5kbGVzIHNhdmluZyBhbmQgbG9hZGluZyBmaWx0ZXIgc3RhdGUgdG8vZnJvbSBsb2NhbFN0b3JhZ2VcbiAqL1xuXG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICcuLi8uLi8uLi9jb3JlL0NvbXBvbmVudC5qcyc7XG5pbXBvcnQgeyBsb2NhbFN0b3JhZ2UgfSBmcm9tICcuLi8uLi8uLi91dGlscy9pbmRleC5qcyc7XG5cbmV4cG9ydCBjbGFzcyBGaWx0ZXJQZXJzaXN0ZW5jZSBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZyA9IHt9KSB7XG4gICAgc3VwZXIoe1xuICAgICAgbmFtZTogJ2ZpbHRlci1wZXJzaXN0ZW5jZScsXG4gICAgICBzZWxlY3RvcjogY29uZmlnLnNlbGVjdG9yIHx8ICcuZW5kcG9pbnQtZmlsdGVyJyxcbiAgICAgIC4uLmNvbmZpZ1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNhdmUgY3VycmVudCBmaWx0ZXJzIHRvIHN0b3JhZ2VcbiAgICovXG4gIHN0YXRpYyBzYXZlRmlsdGVycyhjdXJyZW50RmlsdGVycywgbmFtZXNwYWNlID0gJ2VuZHBvaW50LWZpbHRlcicpIHtcbiAgICB0cnkge1xuICAgICAgbG9jYWxTdG9yYWdlLnNldChgJHtuYW1lc3BhY2V9LmZpbHRlcnNgLCB7XG4gICAgICAgIGZpbHRlcnM6IGN1cnJlbnRGaWx0ZXJzLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBzYXZlIGVuZHBvaW50IGZpbHRlcnM6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBMb2FkIHNhdmVkIGZpbHRlcnMgZnJvbSBzdG9yYWdlXG4gICAqL1xuICBzdGF0aWMgbG9hZFNhdmVkRmlsdGVycyhuYW1lc3BhY2UgPSAnZW5kcG9pbnQtZmlsdGVyJykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBzdG9yZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0KGAke25hbWVzcGFjZX0uZmlsdGVyc2ApO1xuICAgICAgaWYgKHN0b3JlZCkge1xuICAgICAgICByZXR1cm4gc3RvcmVkLmZpbHRlcnM7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIGxvYWQgZW5kcG9pbnQgZmlsdGVyczonLCBlcnJvcik7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEFwcGx5IGxvYWRlZCBmaWx0ZXJzIHdpdGggY2FsbGJhY2tzXG4gICAqL1xuICBzdGF0aWMgYXBwbHlTYXZlZEZpbHRlcnMoc2F2ZWRGaWx0ZXJzLCBjYWxsYmFja3MsIHNlYXJjaElucHV0KSB7XG4gICAgaWYgKCFzYXZlZEZpbHRlcnMpIHJldHVybjtcblxuICAgIC8vIEFwcGx5IGZpbHRlcnMgd2l0aCBhIHNsaWdodCBkZWxheSB0byBlbnN1cmUgVUkgaXMgcmVhZHlcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmIChzYXZlZEZpbHRlcnMudGFnICE9PSAnYWxsJykge1xuICAgICAgICBjYWxsYmFja3Mub25UYWdGaWx0ZXIoc2F2ZWRGaWx0ZXJzLnRhZyk7XG4gICAgICB9XG4gICAgICBpZiAoc2F2ZWRGaWx0ZXJzLm1ldGhvZCAhPT0gJ2FsbCcpIHtcbiAgICAgICAgY2FsbGJhY2tzLm9uTWV0aG9kRmlsdGVyKHNhdmVkRmlsdGVycy5tZXRob2QpO1xuICAgICAgfVxuICAgICAgaWYgKHNhdmVkRmlsdGVycy5zZWFyY2gpIHtcbiAgICAgICAgaWYgKHNlYXJjaElucHV0KSB7XG4gICAgICAgICAgc2VhcmNoSW5wdXQudmFsdWUgPSBzYXZlZEZpbHRlcnMuc2VhcmNoO1xuICAgICAgICB9XG4gICAgICAgIGNhbGxiYWNrcy5vblNlYXJjaChzYXZlZEZpbHRlcnMuc2VhcmNoKTtcbiAgICAgIH1cbiAgICAgIGlmIChzYXZlZEZpbHRlcnMuc3RhdHVzICE9PSAnYWxsJykge1xuICAgICAgICBjYWxsYmFja3Mub25TdGF0dXNGaWx0ZXIoc2F2ZWRGaWx0ZXJzLnN0YXR1cyk7XG4gICAgICB9XG4gICAgfSwgMTAwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhciBzYXZlZCBmaWx0ZXJzXG4gICAqL1xuICBzdGF0aWMgY2xlYXJTYXZlZEZpbHRlcnMobmFtZXNwYWNlID0gJ2VuZHBvaW50LWZpbHRlcicpIHtcbiAgICB0cnkge1xuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZShgJHtuYW1lc3BhY2V9LmZpbHRlcnNgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gY2xlYXIgc2F2ZWQgZmlsdGVyczonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNhdmUgZmlsdGVyIGhpc3RvcnkgZm9yIHVuZG8vcmVkbyBmdW5jdGlvbmFsaXR5XG4gICAqL1xuICBzdGF0aWMgc2F2ZUZpbHRlckhpc3RvcnkoY3VycmVudEZpbHRlcnMsIG5hbWVzcGFjZSA9ICdlbmRwb2ludC1maWx0ZXInLCBtYXhIaXN0b3J5ID0gMTApIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgaGlzdG9yeSA9IEZpbHRlclBlcnNpc3RlbmNlLmdldEZpbHRlckhpc3RvcnkobmFtZXNwYWNlKTtcbiAgICAgIFxuICAgICAgLy8gQWRkIGN1cnJlbnQgZmlsdGVycyB0byBoaXN0b3J5XG4gICAgICBoaXN0b3J5LnB1c2goe1xuICAgICAgICBmaWx0ZXJzOiB7IC4uLmN1cnJlbnRGaWx0ZXJzIH0sXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSk7XG5cbiAgICAgIC8vIEtlZXAgb25seSB0aGUgbGFzdCBOIGVudHJpZXNcbiAgICAgIGlmIChoaXN0b3J5Lmxlbmd0aCA+IG1heEhpc3RvcnkpIHtcbiAgICAgICAgaGlzdG9yeS5zcGxpY2UoMCwgaGlzdG9yeS5sZW5ndGggLSBtYXhIaXN0b3J5KTtcbiAgICAgIH1cblxuICAgICAgbG9jYWxTdG9yYWdlLnNldChgJHtuYW1lc3BhY2V9Lmhpc3RvcnlgLCBoaXN0b3J5KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gc2F2ZSBmaWx0ZXIgaGlzdG9yeTonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBmaWx0ZXIgaGlzdG9yeVxuICAgKi9cbiAgc3RhdGljIGdldEZpbHRlckhpc3RvcnkobmFtZXNwYWNlID0gJ2VuZHBvaW50LWZpbHRlcicpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXQoYCR7bmFtZXNwYWNlfS5oaXN0b3J5YCkgfHwgW107XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIGdldCBmaWx0ZXIgaGlzdG9yeTonLCBlcnJvcik7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBwcmV2aW91cyBmaWx0ZXIgc3RhdGUgZm9yIHVuZG9cbiAgICovXG4gIHN0YXRpYyBnZXRQcmV2aW91c0ZpbHRlclN0YXRlKG5hbWVzcGFjZSA9ICdlbmRwb2ludC1maWx0ZXInKSB7XG4gICAgY29uc3QgaGlzdG9yeSA9IEZpbHRlclBlcnNpc3RlbmNlLmdldEZpbHRlckhpc3RvcnkobmFtZXNwYWNlKTtcbiAgICBpZiAoaGlzdG9yeS5sZW5ndGggPj0gMikge1xuICAgICAgcmV0dXJuIGhpc3RvcnlbaGlzdG9yeS5sZW5ndGggLSAyXS5maWx0ZXJzO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhciBmaWx0ZXIgaGlzdG9yeVxuICAgKi9cbiAgc3RhdGljIGNsZWFyRmlsdGVySGlzdG9yeShuYW1lc3BhY2UgPSAnZW5kcG9pbnQtZmlsdGVyJykge1xuICAgIHRyeSB7XG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlKGAke25hbWVzcGFjZX0uaGlzdG9yeWApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBjbGVhciBmaWx0ZXIgaGlzdG9yeTonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNhdmUgdXNlciBwcmVmZXJlbmNlc1xuICAgKi9cbiAgc3RhdGljIHNhdmVVc2VyUHJlZmVyZW5jZXMocHJlZmVyZW5jZXMsIG5hbWVzcGFjZSA9ICdlbmRwb2ludC1maWx0ZXInKSB7XG4gICAgdHJ5IHtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXQoYCR7bmFtZXNwYWNlfS5wcmVmZXJlbmNlc2AsIHtcbiAgICAgICAgcHJlZmVyZW5jZXMsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIHNhdmUgdXNlciBwcmVmZXJlbmNlczonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIExvYWQgdXNlciBwcmVmZXJlbmNlc1xuICAgKi9cbiAgc3RhdGljIGxvYWRVc2VyUHJlZmVyZW5jZXMobmFtZXNwYWNlID0gJ2VuZHBvaW50LWZpbHRlcicpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3RvcmVkID0gbG9jYWxTdG9yYWdlLmdldChgJHtuYW1lc3BhY2V9LnByZWZlcmVuY2VzYCk7XG4gICAgICBpZiAoc3RvcmVkKSB7XG4gICAgICAgIHJldHVybiBzdG9yZWQucHJlZmVyZW5jZXM7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIGxvYWQgdXNlciBwcmVmZXJlbmNlczonLCBlcnJvcik7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFNhdmUgZmlsdGVyIGFuYWx5dGljcyBkYXRhXG4gICAqL1xuICBzdGF0aWMgc2F2ZUZpbHRlckFuYWx5dGljcyhhbmFseXRpY3NEYXRhLCBuYW1lc3BhY2UgPSAnZW5kcG9pbnQtZmlsdGVyJykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBleGlzdGluZyA9IGxvY2FsU3RvcmFnZS5nZXQoYCR7bmFtZXNwYWNlfS5hbmFseXRpY3NgKSB8fCBbXTtcbiAgICAgIGV4aXN0aW5nLnB1c2goe1xuICAgICAgICAuLi5hbmFseXRpY3NEYXRhLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pO1xuXG4gICAgICAvLyBLZWVwIG9ubHkgcmVjZW50IGFuYWx5dGljcyAobGFzdCAxMDAgZW50cmllcylcbiAgICAgIGlmIChleGlzdGluZy5sZW5ndGggPiAxMDApIHtcbiAgICAgICAgZXhpc3Rpbmcuc3BsaWNlKDAsIGV4aXN0aW5nLmxlbmd0aCAtIDEwMCk7XG4gICAgICB9XG5cbiAgICAgIGxvY2FsU3RvcmFnZS5zZXQoYCR7bmFtZXNwYWNlfS5hbmFseXRpY3NgLCBleGlzdGluZyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIHNhdmUgZmlsdGVyIGFuYWx5dGljczonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBmaWx0ZXIgYW5hbHl0aWNzIGRhdGFcbiAgICovXG4gIHN0YXRpYyBnZXRGaWx0ZXJBbmFseXRpY3MobmFtZXNwYWNlID0gJ2VuZHBvaW50LWZpbHRlcicpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXQoYCR7bmFtZXNwYWNlfS5hbmFseXRpY3NgKSB8fCBbXTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gZ2V0IGZpbHRlciBhbmFseXRpY3M6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFeHBvcnQgYWxsIHNhdmVkIGRhdGFcbiAgICovXG4gIHN0YXRpYyBleHBvcnRGaWx0ZXJEYXRhKG5hbWVzcGFjZSA9ICdlbmRwb2ludC1maWx0ZXInKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGZpbHRlcnM6IGxvY2FsU3RvcmFnZS5nZXQoYCR7bmFtZXNwYWNlfS5maWx0ZXJzYCksXG4gICAgICAgIGhpc3Rvcnk6IGxvY2FsU3RvcmFnZS5nZXQoYCR7bmFtZXNwYWNlfS5oaXN0b3J5YCksXG4gICAgICAgIHByZWZlcmVuY2VzOiBsb2NhbFN0b3JhZ2UuZ2V0KGAke25hbWVzcGFjZX0ucHJlZmVyZW5jZXNgKSxcbiAgICAgICAgYW5hbHl0aWNzOiBsb2NhbFN0b3JhZ2UuZ2V0KGAke25hbWVzcGFjZX0uYW5hbHl0aWNzYCksXG4gICAgICAgIGV4cG9ydGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gZXhwb3J0IGZpbHRlciBkYXRhOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJbXBvcnQgZmlsdGVyIGRhdGFcbiAgICovXG4gIHN0YXRpYyBpbXBvcnRGaWx0ZXJEYXRhKGRhdGEsIG5hbWVzcGFjZSA9ICdlbmRwb2ludC1maWx0ZXInKSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChkYXRhLmZpbHRlcnMpIHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldChgJHtuYW1lc3BhY2V9LmZpbHRlcnNgLCBkYXRhLmZpbHRlcnMpO1xuICAgICAgfVxuICAgICAgaWYgKGRhdGEuaGlzdG9yeSkge1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0KGAke25hbWVzcGFjZX0uaGlzdG9yeWAsIGRhdGEuaGlzdG9yeSk7XG4gICAgICB9XG4gICAgICBpZiAoZGF0YS5wcmVmZXJlbmNlcykge1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0KGAke25hbWVzcGFjZX0ucHJlZmVyZW5jZXNgLCBkYXRhLnByZWZlcmVuY2VzKTtcbiAgICAgIH1cbiAgICAgIGlmIChkYXRhLmFuYWx5dGljcykge1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0KGAke25hbWVzcGFjZX0uYW5hbHl0aWNzYCwgZGF0YS5hbmFseXRpY3MpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIGltcG9ydCBmaWx0ZXIgZGF0YTonLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFyIGFsbCBzYXZlZCBkYXRhXG4gICAqL1xuICBzdGF0aWMgY2xlYXJBbGxTYXZlZERhdGEobmFtZXNwYWNlID0gJ2VuZHBvaW50LWZpbHRlcicpIHtcbiAgICB0cnkge1xuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZShgJHtuYW1lc3BhY2V9LmZpbHRlcnNgKTtcbiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmUoYCR7bmFtZXNwYWNlfS5oaXN0b3J5YCk7XG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlKGAke25hbWVzcGFjZX0ucHJlZmVyZW5jZXNgKTtcbiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmUoYCR7bmFtZXNwYWNlfS5hbmFseXRpY3NgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gY2xlYXIgYWxsIHNhdmVkIGRhdGE6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgc3RvcmFnZSB1c2FnZSBzdGF0aXN0aWNzXG4gICAqL1xuICBzdGF0aWMgZ2V0U3RvcmFnZVN0YXRzKG5hbWVzcGFjZSA9ICdlbmRwb2ludC1maWx0ZXInKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGZpbHRlcnMgPSBsb2NhbFN0b3JhZ2UuZ2V0KGAke25hbWVzcGFjZX0uZmlsdGVyc2ApO1xuICAgICAgY29uc3QgaGlzdG9yeSA9IGxvY2FsU3RvcmFnZS5nZXQoYCR7bmFtZXNwYWNlfS5oaXN0b3J5YCk7XG4gICAgICBjb25zdCBwcmVmZXJlbmNlcyA9IGxvY2FsU3RvcmFnZS5nZXQoYCR7bmFtZXNwYWNlfS5wcmVmZXJlbmNlc2ApO1xuICAgICAgY29uc3QgYW5hbHl0aWNzID0gbG9jYWxTdG9yYWdlLmdldChgJHtuYW1lc3BhY2V9LmFuYWx5dGljc2ApO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBoYXNGaWx0ZXJzOiAhIWZpbHRlcnMsXG4gICAgICAgIGhpc3RvcnlFbnRyaWVzOiBoaXN0b3J5Py5sZW5ndGggfHwgMCxcbiAgICAgICAgaGFzUHJlZmVyZW5jZXM6ICEhcHJlZmVyZW5jZXMsXG4gICAgICAgIGFuYWx5dGljc0VudHJpZXM6IGFuYWx5dGljcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIGxhc3RTYXZlZDogZmlsdGVycz8udGltZXN0YW1wID8gbmV3IERhdGUoZmlsdGVycy50aW1lc3RhbXApIDogbnVsbFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gZ2V0IHN0b3JhZ2Ugc3RhdHM6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlIHN0b3JlZCBkYXRhIGludGVncml0eVxuICAgKi9cbiAgc3RhdGljIHZhbGlkYXRlU3RvcmVkRGF0YShuYW1lc3BhY2UgPSAnZW5kcG9pbnQtZmlsdGVyJykge1xuICAgIGNvbnN0IGlzc3VlcyA9IFtdO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFZhbGlkYXRlIGZpbHRlcnNcbiAgICAgIGNvbnN0IGZpbHRlcnMgPSBsb2NhbFN0b3JhZ2UuZ2V0KGAke25hbWVzcGFjZX0uZmlsdGVyc2ApO1xuICAgICAgaWYgKGZpbHRlcnMgJiYgKCFmaWx0ZXJzLmZpbHRlcnMgfHwgIWZpbHRlcnMudGltZXN0YW1wKSkge1xuICAgICAgICBpc3N1ZXMucHVzaCgnSW52YWxpZCBmaWx0ZXJzIGRhdGEgc3RydWN0dXJlJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFZhbGlkYXRlIGhpc3RvcnlcbiAgICAgIGNvbnN0IGhpc3RvcnkgPSBsb2NhbFN0b3JhZ2UuZ2V0KGAke25hbWVzcGFjZX0uaGlzdG9yeWApO1xuICAgICAgaWYgKGhpc3RvcnkgJiYgIUFycmF5LmlzQXJyYXkoaGlzdG9yeSkpIHtcbiAgICAgICAgaXNzdWVzLnB1c2goJ0ludmFsaWQgaGlzdG9yeSBkYXRhIHN0cnVjdHVyZScpO1xuICAgICAgfVxuXG4gICAgICAvLyBWYWxpZGF0ZSBwcmVmZXJlbmNlc1xuICAgICAgY29uc3QgcHJlZmVyZW5jZXMgPSBsb2NhbFN0b3JhZ2UuZ2V0KGAke25hbWVzcGFjZX0ucHJlZmVyZW5jZXNgKTtcbiAgICAgIGlmIChwcmVmZXJlbmNlcyAmJiAoIXByZWZlcmVuY2VzLnByZWZlcmVuY2VzIHx8ICFwcmVmZXJlbmNlcy50aW1lc3RhbXApKSB7XG4gICAgICAgIGlzc3Vlcy5wdXNoKCdJbnZhbGlkIHByZWZlcmVuY2VzIGRhdGEgc3RydWN0dXJlJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFZhbGlkYXRlIGFuYWx5dGljc1xuICAgICAgY29uc3QgYW5hbHl0aWNzID0gbG9jYWxTdG9yYWdlLmdldChgJHtuYW1lc3BhY2V9LmFuYWx5dGljc2ApO1xuICAgICAgaWYgKGFuYWx5dGljcyAmJiAhQXJyYXkuaXNBcnJheShhbmFseXRpY3MpKSB7XG4gICAgICAgIGlzc3Vlcy5wdXNoKCdJbnZhbGlkIGFuYWx5dGljcyBkYXRhIHN0cnVjdHVyZScpO1xuICAgICAgfVxuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlzc3Vlcy5wdXNoKGBTdG9yYWdlIHZhbGlkYXRpb24gZXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICB9XG5cbiAgICByZXR1cm4gaXNzdWVzO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFudXAgb2xkIGRhdGFcbiAgICovXG4gIHN0YXRpYyBjbGVhbnVwT2xkRGF0YShuYW1lc3BhY2UgPSAnZW5kcG9pbnQtZmlsdGVyJywgbWF4QWdlID0gMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwKSB7IC8vIDMwIGRheXNcbiAgICB0cnkge1xuICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcblxuICAgICAgLy8gQ2xlYW4gdXAgb2xkIGhpc3RvcnkgZW50cmllc1xuICAgICAgY29uc3QgaGlzdG9yeSA9IGxvY2FsU3RvcmFnZS5nZXQoYCR7bmFtZXNwYWNlfS5oaXN0b3J5YCkgfHwgW107XG4gICAgICBjb25zdCByZWNlbnRIaXN0b3J5ID0gaGlzdG9yeS5maWx0ZXIoZW50cnkgPT4gXG4gICAgICAgIG5vdyAtIGVudHJ5LnRpbWVzdGFtcCA8IG1heEFnZVxuICAgICAgKTtcbiAgICAgIGlmIChyZWNlbnRIaXN0b3J5Lmxlbmd0aCAhPT0gaGlzdG9yeS5sZW5ndGgpIHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldChgJHtuYW1lc3BhY2V9Lmhpc3RvcnlgLCByZWNlbnRIaXN0b3J5KTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2xlYW4gdXAgb2xkIGFuYWx5dGljcyBlbnRyaWVzXG4gICAgICBjb25zdCBhbmFseXRpY3MgPSBsb2NhbFN0b3JhZ2UuZ2V0KGAke25hbWVzcGFjZX0uYW5hbHl0aWNzYCkgfHwgW107XG4gICAgICBjb25zdCByZWNlbnRBbmFseXRpY3MgPSBhbmFseXRpY3MuZmlsdGVyKGVudHJ5ID0+IFxuICAgICAgICBub3cgLSBlbnRyeS50aW1lc3RhbXAgPCBtYXhBZ2VcbiAgICAgICk7XG4gICAgICBpZiAocmVjZW50QW5hbHl0aWNzLmxlbmd0aCAhPT0gYW5hbHl0aWNzLmxlbmd0aCkge1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0KGAke25hbWVzcGFjZX0uYW5hbHl0aWNzYCwgcmVjZW50QW5hbHl0aWNzKTtcbiAgICAgIH1cblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBjbGVhbnVwIG9sZCBkYXRhOicsIGVycm9yKTtcbiAgICB9XG4gIH1cbn1cblxuLy8gQXV0by1yZWdpc3RlciBjb21wb25lbnRcbmltcG9ydCBDb21wb25lbnRNYW5hZ2VyIGZyb20gJy4uLy4uLy4uL2NvcmUvQ29tcG9uZW50TWFuYWdlci5qcyc7XG5Db21wb25lbnRNYW5hZ2VyLnJlZ2lzdGVyKCdmaWx0ZXItcGVyc2lzdGVuY2UnLCBGaWx0ZXJQZXJzaXN0ZW5jZSk7IiwgIi8qKlxuICogRW5kcG9pbnQgRmlsdGVyIENvbXBvbmVudCAtIE1haW4gT3JjaGVzdHJhdG9yXG4gKiBIYW5kbGVzIGZpbHRlcmluZyBvZiBBUEkgZW5kcG9pbnRzIGJ5IHRhZ3MgYW5kIG90aGVyIGNyaXRlcmlhXG4gKiBTcGxpdCBpbnRvIGZvY3VzZWQgY29tcG9uZW50cyBmb3IgYmV0dGVyIG1haW50YWluYWJpbGl0eVxuICovXG5cbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJy4uLy4uL2NvcmUvQ29tcG9uZW50LmpzJztcbmltcG9ydCBDb21wb25lbnRNYW5hZ2VyIGZyb20gJy4uLy4uL2NvcmUvQ29tcG9uZW50TWFuYWdlci5qcyc7XG5pbXBvcnQgeyAkJCwgJCwgbG9jYWxTdG9yYWdlIH0gZnJvbSAnLi4vLi4vdXRpbHMvaW5kZXguanMnO1xuaW1wb3J0IHsgRW5kcG9pbnREYXRhIH0gZnJvbSAnLi9lbmRwb2ludC9FbmRwb2ludERhdGEuanMnO1xuaW1wb3J0IHsgRmlsdGVyTG9naWMgfSBmcm9tICcuL2VuZHBvaW50L0ZpbHRlckxvZ2ljLmpzJztcbmltcG9ydCB7IEZpbHRlclVJIH0gZnJvbSAnLi9lbmRwb2ludC9GaWx0ZXJVSS5qcyc7XG5pbXBvcnQgeyBGaWx0ZXJQZXJzaXN0ZW5jZSB9IGZyb20gJy4vZW5kcG9pbnQvRmlsdGVyUGVyc2lzdGVuY2UuanMnO1xuXG5leHBvcnQgY2xhc3MgRW5kcG9pbnRGaWx0ZXIgZXh0ZW5kcyBDb21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcihjb25maWcgPSB7fSkge1xuICAgIHN1cGVyKHtcbiAgICAgIG5hbWU6ICdlbmRwb2ludC1maWx0ZXInLFxuICAgICAgc2VsZWN0b3I6IGNvbmZpZy5zZWxlY3RvciB8fCAnW2RhdGEtY29tcG9uZW50PVwiZW5kcG9pbnQtZmlsdGVyXCJdJyxcbiAgICAgIC4uLmNvbmZpZ1xuICAgIH0pO1xuICAgIFxuICAgIHRoaXMuY3VycmVudEZpbHRlcnMgPSB7XG4gICAgICB0YWc6ICdhbGwnLFxuICAgICAgbWV0aG9kOiAnYWxsJyxcbiAgICAgIHN0YXR1czogJ2FsbCdcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuZW5kcG9pbnRzID0gW107XG4gICAgdGhpcy5maWx0ZXJTdGF0cyA9IG5ldyBNYXAoKTtcbiAgICBcbiAgICB0aGlzLm9wdGlvbnMgPSB7XG4gICAgICBhbmltYXRlRmlsdGVyaW5nOiB0cnVlLFxuICAgICAgc2hvd1N0YXRzOiB0cnVlLFxuICAgICAgc3RvcmVGaWx0ZXJzOiB0cnVlLFxuICAgICAgbmFtZXNwYWNlOiAnZW5kcG9pbnQtZmlsdGVyJyxcbiAgICAgIC4uLnRoaXMub3B0aW9uc1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogU2V0dXAgZmlsdGVyIGVsZW1lbnRzIGFuZCBlbmRwb2ludHNcbiAgICovXG4gIHNldHVwRWxlbWVudHMoKSB7XG4gICAgc3VwZXIuc2V0dXBFbGVtZW50cygpO1xuICAgIFxuICAgIC8vIEZpbmQgYWxsIGZpbHRlcmFibGUgZW5kcG9pbnRzXG4gICAgdGhpcy5lbmRwb2ludHMgPSAkJCgnLmVuZHBvaW50LWl0ZW0nKTtcbiAgICBpZiAodGhpcy5lbmRwb2ludHMubGVuZ3RoID09PSAwKSByZXR1cm47XG4gICAgXG4gICAgLy8gU2V0dXAgZmlsdGVyIGJ1dHRvbnNcbiAgICB0aGlzLnRhZ0ZpbHRlcnMgPSAkJCgnLnRhZy1maWx0ZXInKTtcbiAgICB0aGlzLm1ldGhvZEZpbHRlcnMgPSAkJCgnLm1ldGhvZC1maWx0ZXInKTtcbiAgICB0aGlzLnN0YXR1c0ZpbHRlcnMgPSAkJCgnLnN0YXR1cy1maWx0ZXInKTtcbiAgICBcbiAgICAvLyBTZXR1cCBzZWFyY2ggaW5wdXQgaWYgcHJlc2VudFxuICAgIHRoaXMuc2VhcmNoSW5wdXQgPSAkKCcuZW5kcG9pbnQtc2VhcmNoJyk7XG4gICAgXG4gICAgLy8gSW5pdGlhbGl6ZSBlbmRwb2ludCBkYXRhIHVzaW5nIEVuZHBvaW50RGF0YSBjb21wb25lbnRcbiAgICBFbmRwb2ludERhdGEuaW5pdGlhbGl6ZUVuZHBvaW50RGF0YSh0aGlzLmVuZHBvaW50cywgRW5kcG9pbnREYXRhLmdlbmVyYXRlRW5kcG9pbnRJZCk7XG4gICAgXG4gICAgLy8gQnVpbGQgZmlsdGVyIHN0YXRpc3RpY3NcbiAgICB0aGlzLmZpbHRlclN0YXRzID0gRW5kcG9pbnREYXRhLmJ1aWxkRmlsdGVyU3RhdHModGhpcy5lbmRwb2ludHMpO1xuICAgIFxuICAgIC8vIFVwZGF0ZSBmaWx0ZXIgYnV0dG9uIGxhYmVscyB3aXRoIGNvdW50cyBpZiBvcHRpb24gaXMgZW5hYmxlZFxuICAgIGlmICh0aGlzLm9wdGlvbnMuc2hvd1N0YXRzKSB7XG4gICAgICBFbmRwb2ludERhdGEudXBkYXRlRmlsdGVyQnV0dG9uU3RhdHModGhpcy50YWdGaWx0ZXJzLCB0aGlzLm1ldGhvZEZpbHRlcnMsIHRoaXMuZmlsdGVyU3RhdHMpO1xuICAgIH1cbiAgICBcbiAgICAvLyBMb2FkIHNhdmVkIGZpbHRlcnMgdXNpbmcgRmlsdGVyUGVyc2lzdGVuY2VcbiAgICBpZiAodGhpcy5vcHRpb25zLnN0b3JlRmlsdGVycykge1xuICAgICAgdGhpcy5sb2FkU2F2ZWRGaWx0ZXJzKCk7XG4gICAgfVxuICAgIFxuICAgIFxuICB9XG5cbiAgLyoqXG4gICAqIEJpbmQgZXZlbnQgbGlzdGVuZXJzIHVzaW5nIEZpbHRlclVJIGNvbXBvbmVudFxuICAgKi9cbiAgYmluZEV2ZW50cygpIHtcbiAgICAvLyBTZXR1cCBmaWx0ZXIgYnV0dG9uc1xuICAgIEZpbHRlclVJLnNldHVwRmlsdGVyQnV0dG9ucyhcbiAgICAgIHRoaXMudGFnRmlsdGVycyxcbiAgICAgIHRoaXMubWV0aG9kRmlsdGVycyxcbiAgICAgIChlbGVtZW50LCBldmVudCwgaGFuZGxlcikgPT4gdGhpcy5hZGRFdmVudExpc3RlbmVyKGVsZW1lbnQsIGV2ZW50LCBoYW5kbGVyKSxcbiAgICAgIHtcbiAgICAgICAgb25UYWdGaWx0ZXI6ICh0YWcpID0+IHRoaXMuZmlsdGVyQnlUYWcodGFnKSxcbiAgICAgICAgb25NZXRob2RGaWx0ZXI6IChtZXRob2QpID0+IHRoaXMuZmlsdGVyQnlNZXRob2QobWV0aG9kKVxuICAgICAgfVxuICAgICk7XG4gICAgXG4gICAgLy8gU2V0dXAgc2VhcmNoIGlucHV0XG4gICAgRmlsdGVyVUkuc2V0dXBTZWFyY2hJbnB1dChcbiAgICAgIHRoaXMuc2VhcmNoSW5wdXQsXG4gICAgICAoZWxlbWVudCwgZXZlbnQsIGhhbmRsZXIpID0+IHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihlbGVtZW50LCBldmVudCwgaGFuZGxlciksXG4gICAgICB7XG4gICAgICAgIG9uU2VhcmNoOiAocXVlcnkpID0+IHRoaXMuc2VhcmNoRW5kcG9pbnRzKHF1ZXJ5KVxuICAgICAgfVxuICAgICk7XG4gICAgXG4gICAgLy8gU2V0dXAgY2xlYXIgYWxsIGJ1dHRvblxuICAgIEZpbHRlclVJLnNldHVwQ2xlYXJBbGxCdXR0b24oXG4gICAgICAoZWxlbWVudCwgZXZlbnQsIGhhbmRsZXIpID0+IHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihlbGVtZW50LCBldmVudCwgaGFuZGxlciksXG4gICAgICAoKSA9PiB0aGlzLmNsZWFyQWxsRmlsdGVycygpXG4gICAgKTtcbiAgICBcbiAgICAvLyBTZXR1cCBrZXlib2FyZCBzaG9ydGN1dHNcbiAgICBGaWx0ZXJVSS5zZXR1cEtleWJvYXJkU2hvcnRjdXRzKFxuICAgICAgKGVsZW1lbnQsIGV2ZW50LCBoYW5kbGVyKSA9PiB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoZWxlbWVudCwgZXZlbnQsIGhhbmRsZXIpLFxuICAgICAgKCkgPT4gdGhpcy5jbGVhckFsbEZpbHRlcnMoKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogRmlsdGVyIGVuZHBvaW50cyBieSB0YWcgdXNpbmcgRmlsdGVyTG9naWNcbiAgICovXG4gIGZpbHRlckJ5VGFnKHRhZykge1xuICAgIEZpbHRlckxvZ2ljLmZpbHRlckJ5VGFnKFxuICAgICAgdGFnLFxuICAgICAgdGhpcy5jdXJyZW50RmlsdGVycyxcbiAgICAgIEZpbHRlclVJLnVwZGF0ZUFjdGl2ZUZpbHRlckJ1dHRvbixcbiAgICAgICgpID0+IHRoaXMuYXBwbHlGaWx0ZXJzKCksXG4gICAgICAoKSA9PiB0aGlzLnNhdmVGaWx0ZXJzKCksXG4gICAgICAoZXZlbnQsIGRhdGEpID0+IHRoaXMuZW1pdChldmVudCwgZGF0YSlcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbHRlciBlbmRwb2ludHMgYnkgSFRUUCBtZXRob2QgdXNpbmcgRmlsdGVyTG9naWNcbiAgICovXG4gIGZpbHRlckJ5TWV0aG9kKG1ldGhvZCkge1xuICAgIEZpbHRlckxvZ2ljLmZpbHRlckJ5TWV0aG9kKFxuICAgICAgbWV0aG9kLFxuICAgICAgdGhpcy5jdXJyZW50RmlsdGVycyxcbiAgICAgIEZpbHRlclVJLnVwZGF0ZUFjdGl2ZUZpbHRlckJ1dHRvbixcbiAgICAgICgpID0+IHRoaXMuYXBwbHlGaWx0ZXJzKCksXG4gICAgICAoKSA9PiB0aGlzLnNhdmVGaWx0ZXJzKCksXG4gICAgICAoZXZlbnQsIGRhdGEpID0+IHRoaXMuZW1pdChldmVudCwgZGF0YSlcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlYXJjaCBlbmRwb2ludHMgYnkgdGV4dCB1c2luZyBGaWx0ZXJMb2dpY1xuICAgKi9cbiAgc2VhcmNoRW5kcG9pbnRzKHF1ZXJ5KSB7XG4gICAgRmlsdGVyTG9naWMuc2VhcmNoRW5kcG9pbnRzKFxuICAgICAgcXVlcnksXG4gICAgICB0aGlzLmN1cnJlbnRGaWx0ZXJzLFxuICAgICAgKCkgPT4gdGhpcy5hcHBseUZpbHRlcnMoKSxcbiAgICAgICgpID0+IHRoaXMuc2F2ZUZpbHRlcnMoKSxcbiAgICAgIChldmVudCwgZGF0YSkgPT4gdGhpcy5lbWl0KGV2ZW50LCBkYXRhKVxuICAgICk7XG4gIH1cblxuXG5cbiAgLyoqXG4gICAqIEFwcGx5IGFsbCBhY3RpdmUgZmlsdGVycyB1c2luZyBGaWx0ZXJMb2dpYyBhbmQgRmlsdGVyVUlcbiAgICovXG4gIGFwcGx5RmlsdGVycygpIHtcbiAgICBjb25zdCB2aXNpYmxlQ291bnQgPSBGaWx0ZXJMb2dpYy5hcHBseUZpbHRlcnMoXG4gICAgICB0aGlzLmVuZHBvaW50cyxcbiAgICAgIHRoaXMuY3VycmVudEZpbHRlcnMsXG4gICAgICAoZXZlbnQsIGRhdGEpID0+IHRoaXMuZW1pdChldmVudCwgZGF0YSlcbiAgICApO1xuICAgIFxuICAgIC8vIFVwZGF0ZSBVSSBlbGVtZW50c1xuICAgIEZpbHRlclVJLnVwZGF0ZUVuZHBvaW50c1Zpc2liaWxpdHkodGhpcy5lbmRwb2ludHMsIHRoaXMub3B0aW9ucy5hbmltYXRlRmlsdGVyaW5nKTtcbiAgICBGaWx0ZXJVSS51cGRhdGVSZXN1bHRzQ291bnQodmlzaWJsZUNvdW50LCB0aGlzLmVuZHBvaW50cy5sZW5ndGgpO1xuICAgIEZpbHRlclVJLnVwZGF0ZUNsZWFyRmlsdGVyc1Zpc2liaWxpdHkoRmlsdGVyTG9naWMuaGFzQWN0aXZlRmlsdGVycyh0aGlzLmN1cnJlbnRGaWx0ZXJzKSk7XG4gICAgXG4gICAgcmV0dXJuIHZpc2libGVDb3VudDtcbiAgfVxuXG5cblxuICAvKipcbiAgICogQ2xlYXIgYWxsIGFjdGl2ZSBmaWx0ZXJzIHVzaW5nIEZpbHRlckxvZ2ljXG4gICAqL1xuICBjbGVhckFsbEZpbHRlcnMoKSB7XG4gICAgRmlsdGVyTG9naWMuY2xlYXJBbGxGaWx0ZXJzKFxuICAgICAgdGhpcy5jdXJyZW50RmlsdGVycyxcbiAgICAgIEZpbHRlclVJLnVwZGF0ZUFjdGl2ZUZpbHRlckJ1dHRvbixcbiAgICAgIHRoaXMuc2VhcmNoSW5wdXQsXG4gICAgICAoKSA9PiB0aGlzLmFwcGx5RmlsdGVycygpLFxuICAgICAgKCkgPT4gdGhpcy5zYXZlRmlsdGVycygpLFxuICAgICAgKGV2ZW50LCBkYXRhKSA9PiB0aGlzLmVtaXQoZXZlbnQsIGRhdGEpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTYXZlIGN1cnJlbnQgZmlsdGVycyB1c2luZyBGaWx0ZXJQZXJzaXN0ZW5jZVxuICAgKi9cbiAgc2F2ZUZpbHRlcnMoKSB7XG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuc3RvcmVGaWx0ZXJzKSByZXR1cm47XG4gICAgRmlsdGVyUGVyc2lzdGVuY2Uuc2F2ZUZpbHRlcnModGhpcy5jdXJyZW50RmlsdGVycywgdGhpcy5vcHRpb25zLm5hbWVzcGFjZSk7XG4gIH1cblxuICAvKipcbiAgICogTG9hZCBzYXZlZCBmaWx0ZXJzIHVzaW5nIEZpbHRlclBlcnNpc3RlbmNlXG4gICAqL1xuICBsb2FkU2F2ZWRGaWx0ZXJzKCkge1xuICAgIGlmICghdGhpcy5vcHRpb25zLnN0b3JlRmlsdGVycykgcmV0dXJuO1xuICAgIFxuICAgIGNvbnN0IHNhdmVkRmlsdGVycyA9IEZpbHRlclBlcnNpc3RlbmNlLmxvYWRTYXZlZEZpbHRlcnModGhpcy5vcHRpb25zLm5hbWVzcGFjZSk7XG4gICAgaWYgKHNhdmVkRmlsdGVycykge1xuICAgICAgdGhpcy5jdXJyZW50RmlsdGVycyA9IHsgLi4udGhpcy5jdXJyZW50RmlsdGVycywgLi4uc2F2ZWRGaWx0ZXJzIH07XG4gICAgICBcbiAgICAgIC8vIEFwcGx5IGxvYWRlZCBmaWx0ZXJzIHVzaW5nIEZpbHRlclBlcnNpc3RlbmNlXG4gICAgICBGaWx0ZXJQZXJzaXN0ZW5jZS5hcHBseVNhdmVkRmlsdGVycyhcbiAgICAgICAgc2F2ZWRGaWx0ZXJzLFxuICAgICAgICB7XG4gICAgICAgICAgb25UYWdGaWx0ZXI6ICh0YWcpID0+IHRoaXMuZmlsdGVyQnlUYWcodGFnKSxcbiAgICAgICAgICBvbk1ldGhvZEZpbHRlcjogKG1ldGhvZCkgPT4gdGhpcy5maWx0ZXJCeU1ldGhvZChtZXRob2QpLFxuICAgICAgICAgIG9uU2VhcmNoOiAocXVlcnkpID0+IHRoaXMuc2VhcmNoRW5kcG9pbnRzKHF1ZXJ5KVxuICAgICAgICB9LFxuICAgICAgICB0aGlzLnNlYXJjaElucHV0XG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY3VycmVudCBmaWx0ZXIgc3RhdGlzdGljcyB1c2luZyBGaWx0ZXJMb2dpY1xuICAgKi9cbiAgZ2V0U3RhdHMoKSB7XG4gICAgcmV0dXJuIEZpbHRlckxvZ2ljLmdldEZpbHRlclN0YXRzKHRoaXMuZW5kcG9pbnRzLCB0aGlzLmN1cnJlbnRGaWx0ZXJzLCB0aGlzLmZpbHRlclN0YXRzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDdXN0b20gY2xlYW51cCB1c2luZyBzcGxpdCBjb21wb25lbnRzXG4gICAqL1xuICBvbkRlc3Ryb3koKSB7XG4gICAgLy8gQ2xlYW4gdXAgZW5kcG9pbnQgZGF0YSB1c2luZyBFbmRwb2ludERhdGFcbiAgICBFbmRwb2ludERhdGEuY2xlYW51cEVuZHBvaW50RGF0YSh0aGlzLmVuZHBvaW50cyk7XG4gICAgXG4gICAgLy8gUmVzZXQgdmlzdWFsIHN0YXRlcyB1c2luZyBGaWx0ZXJVSVxuICAgIEZpbHRlclVJLnJlc2V0VmlzdWFsU3RhdGVzKHRoaXMuZW5kcG9pbnRzKTtcbiAgICBcbiAgICAvLyBDbGVhciBmaWx0ZXIgc3RhdHNcbiAgICBpZiAodGhpcy5maWx0ZXJTdGF0cykge1xuICAgICAgdGhpcy5maWx0ZXJTdGF0cy5jbGVhcigpO1xuICAgIH1cbiAgfVxufVxuXG4vLyBBdXRvLXJlZ2lzdGVyIGNvbXBvbmVudFxuQ29tcG9uZW50TWFuYWdlci5yZWdpc3RlcignZW5kcG9pbnQtZmlsdGVyJywgRW5kcG9pbnRGaWx0ZXIpOyIsICIvKipcbiAqIFRoZW1lIFRvZ2dsZSBDb21wb25lbnRcbiAqIEhhbmRsZXMgZGFyay9saWdodCB0aGVtZSBzd2l0Y2hpbmcgd2l0aCBzYWZlIGxvY2FsU3RvcmFnZSBhbmQgaWNvbiB1cGRhdGVzXG4gKi9cblxuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vY29yZS9Db21wb25lbnQuanMnO1xuaW1wb3J0IENvbXBvbmVudE1hbmFnZXIgZnJvbSAnLi4vLi4vY29yZS9Db21wb25lbnRNYW5hZ2VyLmpzJztcbmltcG9ydCB7IGxvY2FsU3RvcmFnZSwgY3JlYXRlTmFtZXNwYWNlZFN0b3JhZ2UgfSBmcm9tICcuLi8uLi91dGlscy9zdG9yYWdlLmpzJztcblxuZXhwb3J0IGNsYXNzIFRoZW1lVG9nZ2xlIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoY29uZmlnID0ge30pIHtcbiAgICBzdXBlcih7XG4gICAgICBuYW1lOiAndGhlbWUtdG9nZ2xlJyxcbiAgICAgIHNlbGVjdG9yOiBjb25maWcuc2VsZWN0b3IgfHwgJyNkYXJrTW9kZVRvZ2dsZScsXG4gICAgICAuLi5jb25maWdcbiAgICB9KTtcbiAgICBcbiAgICAvLyBJbml0aWFsaXplIHN0b3JhZ2UgdXNpbmcgdGhlIHNhbWUgYXBwcm9hY2ggYXMgVGhlbWUuanNcbiAgICB0aGlzLnN0b3JhZ2UgPSBjcmVhdGVOYW1lc3BhY2VkU3RvcmFnZSgndGhlbWUnKTtcbiAgICB0aGlzLnRoZW1lS2V5ID0gJ21vZGUnOyAvLyBVc2UgJ21vZGUnIGFzIHRoZSBrZXkgc2luY2Ugd2UncmUgdXNpbmcgbmFtZXNwYWNlZCBzdG9yYWdlXG4gICAgdGhpcy5kZWZhdWx0VGhlbWUgPSAnZGFyayc7XG4gICAgdGhpcy5lbGVtZW50cyA9IHtcbiAgICAgIHRvZ2dsZTogbnVsbCxcbiAgICAgIG1vb246IG51bGwsXG4gICAgICBzdW46IG51bGwsXG4gICAgICBsaWdodE1vZGVIb21lOiBudWxsLFxuICAgICAgZGFya01vZGVIb21lOiBudWxsXG4gICAgfTtcbiAgICBcbiAgICAvLyBQZXJmb3JtYW5jZSBvcHRpbWl6YXRpb25zXG4gICAgdGhpcy5pc1RvZ2dsaW5nID0gZmFsc2U7XG4gICAgdGhpcy5kZWJvdW5jZVRpbWVvdXQgPSBudWxsO1xuICAgIHRoaXMucGVuZGluZ1RoZW1lID0gbnVsbDtcbiAgfVxuXG4gIGFzeW5jIG9uSW5pdCgpIHtcbiAgICAvLyBBcHBseSB0aGVtZSBpbW1lZGlhdGVseSAodGhpcyBtYXkgcnVuIGJlZm9yZSBET00gaXMgcmVhZHkpXG4gICAgdGhpcy5hcHBseVN0b3JlZFRoZW1lKCk7XG4gICAgXG4gICAgaWYgKCF0aGlzLmVsZW1lbnQpIHtcbiAgICAgIGNvbnNvbGUud2FybignVGhlbWVUb2dnbGU6IFRvZ2dsZSBidXR0b24gbm90IGZvdW5kJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5jYWNoZUVsZW1lbnRzKCk7XG4gICAgdGhpcy5zZXR1cEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy51cGRhdGVVSSgpO1xuICAgIHRoaXMudXBkYXRlSWNvblNvdXJjZXMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWNoZSBET00gZWxlbWVudCByZWZlcmVuY2VzXG4gICAqL1xuICBjYWNoZUVsZW1lbnRzKCkge1xuICAgIHRoaXMuZWxlbWVudHMudG9nZ2xlID0gdGhpcy5lbGVtZW50O1xuICAgIHRoaXMuZWxlbWVudHMubW9vbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb29uJyk7XG4gICAgdGhpcy5lbGVtZW50cy5zdW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VuJyk7XG4gICAgdGhpcy5lbGVtZW50cy5saWdodE1vZGVIb21lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpZ2h0TW9kZUhvbWUnKTtcbiAgICB0aGlzLmVsZW1lbnRzLmRhcmtNb2RlSG9tZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXJrTW9kZUhvbWUnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCBldmVudCBsaXN0ZW5lcnMgdXNpbmcgbW9kZXJuIEFib3J0Q29udHJvbGxlciBwYXR0ZXJuXG4gICAqL1xuICBzZXR1cEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIC8vIE1vZGVybiBhcHByb2FjaCAtIGF1dG9tYXRpY2FsbHkgY2xlYW5lZCB1cCBvbiBjb21wb25lbnQgZGVzdHJ1Y3Rpb25cbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIodGhpcy5lbGVtZW50cy50b2dnbGUsICdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMudG9nZ2xlVGhlbWUoKTtcbiAgICB9KTtcblxuICAgIC8vIEtleWJvYXJkIHN1cHBvcnQgd2l0aCBtb2Rlcm4gcGF0dGVyblxuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLmVsZW1lbnRzLnRvZ2dsZSwgJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInIHx8IGUua2V5ID09PSAnICcpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLnRvZ2dsZVRoZW1lKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBcbiAgfVxuXG4gIC8qKlxuICAgKiBBcHBseSBzdG9yZWQgdGhlbWUgaW1tZWRpYXRlbHkgKGJlZm9yZSBET00gcmVhZHkpXG4gICAqIE5vdGU6IFRoaXMgbWF5IGJlIHJlZHVuZGFudCBpZiB0aGUgaGVhZCBzY3JpcHQgYWxyZWFkeSBhcHBsaWVkIHRoZSB0aGVtZVxuICAgKi9cbiAgYXBwbHlTdG9yZWRUaGVtZSgpIHtcbiAgICBjb25zdCBzYXZlZFRoZW1lID0gdGhpcy5zdG9yYWdlLmdldCh0aGlzLnRoZW1lS2V5LCB0aGlzLmRlZmF1bHRUaGVtZSk7XG4gICAgY29uc3QgaXNEYXJrTW9kZSA9IHNhdmVkVGhlbWUgPT09ICdkYXJrJztcbiAgICBcbiAgICAvLyBPbmx5IGFwcGx5IGlmIHRoZW1lIGlzbid0IGFscmVhZHkgc2V0IChhdm9pZCByZWR1bmRhbnQgd29yaylcbiAgICBjb25zdCBjdXJyZW50bHlEYXJrID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZGFyaycpO1xuICAgIGlmIChpc0RhcmtNb2RlICYmICFjdXJyZW50bHlEYXJrKSB7XG4gICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZGFyaycpO1xuICAgIH0gZWxzZSBpZiAoIWlzRGFya01vZGUgJiYgY3VycmVudGx5RGFyaykge1xuICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2RhcmsnKTtcbiAgICB9XG4gICAgXG4gICAgLy8gRW5zdXJlIGljb25zIGFyZSB1cGRhdGVkIGFmdGVyIHRoZW1lIGlzIGFwcGxpZWRcbiAgICB0aGlzLnVwZGF0ZUljb25zSW1tZWRpYXRlKCk7XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBVcGRhdGUgaWNvbnMgaW1tZWRpYXRlbHkgKGZvciBlYXJseSBpbml0aWFsaXphdGlvbilcbiAgICovXG4gIHVwZGF0ZUljb25zSW1tZWRpYXRlKCkge1xuICAgIGNvbnN0IG1vb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9vbicpO1xuICAgIGNvbnN0IHN1biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdW4nKTtcbiAgICBjb25zdCBpc0RhcmtNb2RlID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZGFyaycpO1xuICAgIFxuICAgIGlmIChtb29uICYmIHN1bikge1xuICAgICAgaWYgKGlzRGFya01vZGUpIHtcbiAgICAgICAgbW9vbi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgICAgc3VuLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbW9vbi5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgc3VuLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUb2dnbGUgYmV0d2VlbiBsaWdodCBhbmQgZGFyayB0aGVtZXNcbiAgICovXG4gICAgdG9nZ2xlVGhlbWUoKSB7XG4gICAgLy8gUHJldmVudCByYXBpZCB0b2dnbGVzIHRoYXQgY2FuIGNhdXNlIHBlcmZvcm1hbmNlIGlzc3Vlc1xuICAgIGlmICh0aGlzLmlzVG9nZ2xpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5pc1RvZ2dsaW5nID0gdHJ1ZTtcbiAgICBcbiAgICAvLyBORVc6IFVzZSBDU1MgaW50ZWdyYXRpb24gZm9yIHZpc3VhbCBmZWVkYmFja1xuICAgIHRoaXMuc2V0TG9hZGluZ1N0YXRlKHRydWUpO1xuICAgIHRoaXMudXBkYXRlQ29tcG9uZW50U3RhdGUoJ3RvZ2dsaW5nJyk7IC8vIEFkZHMgZGF0YS1jb21wb25lbnQtc3RhdGU9XCJ0b2dnbGluZ1wiXG4gICAgXG4gICAgLy8gVGVtcG9yYXJpbHkgZGlzYWJsZSB0cmFuc2l0aW9ucyBmb3IgaW1tZWRpYXRlIGZlZWRiYWNrXG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ25vLXRyYW5zaXRpb25zJyk7XG4gICAgXG4gICAgY29uc3QgaXNEYXJrTW9kZSA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKCdkYXJrJyk7XG4gICAgXG4gICAgLy8gU2F2ZSBwcmVmZXJlbmNlXG4gICAgaWYgKHRoaXMuc3RvcmFnZSkge1xuICAgICAgdGhpcy5zdG9yYWdlLnNldCh0aGlzLnRoZW1lS2V5LCBpc0RhcmtNb2RlID8gJ2RhcmsnIDogJ2xpZ2h0Jyk7XG4gICAgfVxuICAgIFxuICAgIC8vIFVwZGF0ZSBVSSBpbW1lZGlhdGVseSBmb3IgcmVzcG9uc2l2ZW5lc3NcbiAgICB0aGlzLnVwZGF0ZVVJKCk7XG4gICAgXG4gICAgLy8gVXNlIHJlcXVlc3RBbmltYXRpb25GcmFtZSBmb3Igc21vb3RoIHVwZGF0ZXNcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgdGhpcy51cGRhdGVJY29uU291cmNlcygpO1xuICAgICAgXG4gICAgICAvLyBSZS1lbmFibGUgdHJhbnNpdGlvbnMgYWZ0ZXIgYSBzaG9ydCBkZWxheVxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCduby10cmFuc2l0aW9ucycpO1xuICAgICAgICB0aGlzLmlzVG9nZ2xpbmcgPSBmYWxzZTtcbiAgICAgICAgXG4gICAgICAgIC8vIE5FVzogUmVzZXQgbG9hZGluZyBzdGF0ZVxuICAgICAgICB0aGlzLnNldExvYWRpbmdTdGF0ZShmYWxzZSk7XG4gICAgICAgIHRoaXMudXBkYXRlQ29tcG9uZW50U3RhdGUoJ3JlYWR5Jyk7IC8vIEJhY2sgdG8gcmVhZHkgc3RhdGVcbiAgICAgIH0sIDUwKTtcbiAgICAgIFxuICAgICAgLy8gRW1pdCBldmVudHMgZm9yIG90aGVyIGNvbXBvbmVudHNcbiAgICAgIHRoaXMuZW1pdCgndGhlbWU6Y2hhbmdlZCcsIHsgaXNEYXJrTW9kZSwgdGhlbWU6IGlzRGFya01vZGUgPyAnZGFyaycgOiAnbGlnaHQnIH0pO1xuICAgICAgXG5cbiAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCd0aGVtZUNoYW5nZWQnLCB7IFxuICAgICAgICBkZXRhaWw6IHsgaXNEYXJrTW9kZSB9IFxuICAgICAgfSkpO1xuICAgICAgXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIGJ1dHRvbiBhbmQgVUkgZWxlbWVudHMgYmFzZWQgb24gY3VycmVudCB0aGVtZVxuICAgKi9cbiAgdXBkYXRlVUkoKSB7XG4gICAgY29uc3QgaXNEYXJrTW9kZSA9IHRoaXMuaXNEYXJrTW9kZSgpO1xuICAgIFxuICAgIC8vIFVwZGF0ZSB0aGVtZSB0b2dnbGUgaWNvbnNcbiAgICBpZiAodGhpcy5lbGVtZW50cy5tb29uICYmIHRoaXMuZWxlbWVudHMuc3VuKSB7XG4gICAgICBpZiAoaXNEYXJrTW9kZSkge1xuICAgICAgICB0aGlzLmVsZW1lbnRzLm1vb24uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgIHRoaXMuZWxlbWVudHMuc3VuLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5lbGVtZW50cy5tb29uLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICB0aGlzLmVsZW1lbnRzLnN1bi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gVXBkYXRlIGhvbWUgcGFnZSBzcGVjaWZpYyBlbGVtZW50c1xuICAgIGlmICh0aGlzLmVsZW1lbnRzLmxpZ2h0TW9kZUhvbWUgJiYgdGhpcy5lbGVtZW50cy5kYXJrTW9kZUhvbWUpIHtcbiAgICAgIGlmIChpc0RhcmtNb2RlKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudHMubGlnaHRNb2RlSG9tZS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgdGhpcy5lbGVtZW50cy5kYXJrTW9kZUhvbWUuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmVsZW1lbnRzLmxpZ2h0TW9kZUhvbWUuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgIHRoaXMuZWxlbWVudHMuZGFya01vZGVIb21lLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBBUklBIGF0dHJpYnV0ZXNcbiAgICBpZiAodGhpcy5lbGVtZW50cy50b2dnbGUpIHtcbiAgICAgIHRoaXMuZWxlbWVudHMudG9nZ2xlLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIFxuICAgICAgICBgU3dpdGNoIHRvICR7aXNEYXJrTW9kZSA/ICdsaWdodCcgOiAnZGFyayd9IG1vZGVgXG4gICAgICApO1xuICAgICAgdGhpcy5lbGVtZW50cy50b2dnbGUuc2V0QXR0cmlidXRlKCdhcmlhLXByZXNzZWQnLCBpc0RhcmtNb2RlLnRvU3RyaW5nKCkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgaWNvbiBzb3VyY2VzIGJhc2VkIG9uIHRoZW1lXG4gICAqL1xuICB1cGRhdGVJY29uU291cmNlcygpIHtcbiAgICBjb25zdCBpc0RhcmtNb2RlID0gdGhpcy5pc0RhcmtNb2RlKCk7XG4gICAgXG4gICAgLy8gVXBkYXRlIGFsbCBpY29ucyB3aXRoIHRoZSAuaWNvbiBjbGFzc1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pY29uJykuZm9yRWFjaChpY29uID0+IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRTcmMgPSBpY29uLmdldEF0dHJpYnV0ZSgnc3JjJyk7XG4gICAgICBpZiAoY3VycmVudFNyYyAmJiBjdXJyZW50U3JjLmluY2x1ZGVzKCdpY29ucy8nKSkge1xuICAgICAgICBjb25zdCBpY29uTmFtZSA9IGN1cnJlbnRTcmMuc3BsaXQoJy8nKS5wb3AoKTtcbiAgICAgICAgLy8gUHJlc2VydmUgdGhlIHJlbGF0aXZlIHBhdGggc3RydWN0dXJlIGZyb20gdGhlIGN1cnJlbnQgc3JjXG4gICAgICAgIGNvbnN0IHBhdGhQcmVmaXggPSBjdXJyZW50U3JjLnN1YnN0cmluZygwLCBjdXJyZW50U3JjLmxhc3RJbmRleE9mKCdpY29ucy8nKSk7XG4gICAgICAgIGNvbnN0IGljb25QYXRoID0gaXNEYXJrTW9kZSA/ICdpY29ucy9kYXJrLycgOiAnaWNvbnMvbGlnaHQvJztcbiAgICAgICAgaWNvbi5zZXRBdHRyaWJ1dGUoJ3NyYycsIHBhdGhQcmVmaXggKyBpY29uUGF0aCArIGljb25OYW1lKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBkYXJrIG1vZGUgaXMgY3VycmVudGx5IGFjdGl2ZVxuICAgKi9cbiAgaXNEYXJrTW9kZSgpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZGFyaycpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjdXJyZW50IHRoZW1lXG4gICAqL1xuICBnZXRDdXJyZW50VGhlbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNEYXJrTW9kZSgpID8gJ2RhcmsnIDogJ2xpZ2h0JztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlbWUgcHJvZ3JhbW1hdGljYWxseVxuICAgKi9cbiAgc2V0VGhlbWUodGhlbWUpIHtcbiAgICBjb25zdCBpc0RhcmtNb2RlID0gdGhlbWUgPT09ICdkYXJrJztcbiAgICBjb25zdCBjdXJyZW50bHlEYXJrID0gdGhpcy5pc0RhcmtNb2RlKCk7XG4gICAgXG4gICAgaWYgKGlzRGFya01vZGUgIT09IGN1cnJlbnRseURhcmspIHtcbiAgICAgIHRoaXMudG9nZ2xlVGhlbWUoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRvIGxpZ2h0IHRoZW1lXG4gICAqL1xuICBzZXRMaWdodFRoZW1lKCkge1xuICAgIHRoaXMuc2V0VGhlbWUoJ2xpZ2h0Jyk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRvIGRhcmsgdGhlbWVcbiAgICovXG4gIHNldERhcmtUaGVtZSgpIHtcbiAgICB0aGlzLnNldFRoZW1lKCdkYXJrJyk7XG4gIH1cblxuICAvKipcbiAgICogUmVzZXQgdG8gZGVmYXVsdCB0aGVtZVxuICAgKi9cbiAgcmVzZXRUaGVtZSgpIHtcbiAgICB0aGlzLnNldFRoZW1lKHRoaXMuZGVmYXVsdFRoZW1lKTtcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlKHRoaXMudGhlbWVLZXkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGVtZSBzdGF0ZVxuICAgKi9cbiAgZ2V0U3RhdGUoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRoZW1lOiB0aGlzLmdldEN1cnJlbnRUaGVtZSgpLFxuICAgICAgaXNEYXJrTW9kZTogdGhpcy5pc0RhcmtNb2RlKCksXG4gICAgICBoYXNUb2dnbGU6ICEhdGhpcy5lbGVtZW50cy50b2dnbGUsXG4gICAgICBoYXNJY29uczogISEodGhpcy5lbGVtZW50cy5tb29uICYmIHRoaXMuZWxlbWVudHMuc3VuKVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQ29tcG9uZW50IGNsZWFudXBcbiAgICovXG4gIG9uRGVzdHJveSgpIHtcbiAgICAvLyBuby1vcFxuICB9XG59XG5cbi8vIEF1dG8tcmVnaXN0ZXIgY29tcG9uZW50XG5Db21wb25lbnRNYW5hZ2VyLnJlZ2lzdGVyKCd0aGVtZS10b2dnbGUnLCBUaGVtZVRvZ2dsZSk7IiwgIi8qKiBPcGVuQVBJIFNpZGViYXIgQ29tcG9uZW50ICovXG5cbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJy4uLy4uL2NvcmUvQ29tcG9uZW50LmpzJztcbmltcG9ydCBDb21wb25lbnRNYW5hZ2VyIGZyb20gJy4uLy4uL2NvcmUvQ29tcG9uZW50TWFuYWdlci5qcyc7XG5pbXBvcnQgeyBFeHBhbmRhYmxlTWl4aW4sIFNjcm9sbFRyYWNraW5nTWl4aW4gfSBmcm9tICcuLi9pbmRleC5qcyc7XG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuLi8uLi91dGlscy9Mb2dnZXIuanMnO1xuXG5jb25zdCBsb2cgPSBsb2dnZXIuY29tcG9uZW50KCdPcGVuQVBJU2lkZWJhcicpO1xuXG5leHBvcnQgY2xhc3MgT3BlbkFQSVNpZGViYXIgZXh0ZW5kcyBDb21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcihjb25maWcgPSB7fSkge1xuICAgIHN1cGVyKHtcbiAgICAgIG5hbWU6ICdvcGVuYXBpLXNpZGViYXInLFxuICAgICAgc2VsZWN0b3I6IGNvbmZpZy5zZWxlY3RvciB8fCAnW2RhdGEtY29tcG9uZW50PVwib3BlbmFwaS1zaWRlYmFyXCJdJyxcbiAgICAgIC4uLmNvbmZpZ1xuICAgIH0pO1xuICAgIFxuICAgIHRoaXMuaXNJbml0aWFsaXplZCA9IGZhbHNlO1xuICB9XG5cbiAgYXN5bmMgb25Jbml0KCkge1xuICAgIGlmICghdGhpcy5lbGVtZW50KSB7XG4gICAgICBsb2cud2FybignT3BlbkFQSSBTaWRlYmFyIGVsZW1lbnQgbm90IGZvdW5kJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5pbml0RXhwYW5kYWJsZSh7XG4gICAgICB0b2dnbGVTZWxlY3RvcjogJy5vcGVuYXBpLXNpZGViYXItdGFnLXRvZ2dsZScsXG4gICAgICBjb250ZW50U2VsZWN0b3I6ICcub3BlbmFwaS1zaWRlYmFyLWVuZHBvaW50cy1saXN0JyxcbiAgICAgIGFuaW1hdGlvblRpbWluZzogJ2Zhc3QnLFxuICAgICAgYXV0b0V4cGFuZDogdHJ1ZSAvLyBPcGVuQVBJIHRhZ3MgYXJlIGV4cGFuZGVkIGJ5IGRlZmF1bHRcbiAgICB9KTtcbiAgICBcbiAgICB0aGlzLmluaXRTY3JvbGxUcmFja2luZyh7XG4gICAgICBhY3RpdmVDbGFzczogJ29wZW5hcGktc2lkZWJhci1saW5rLS1hY3RpdmUnLFxuICAgICAgb2Zmc2V0OiAxMDAsXG4gICAgICBzbW9vdGhTY3JvbGw6IHRydWUsXG4gICAgICB0aHJvdHRsZURlbGF5OiA1MFxuICAgIH0pO1xuICAgIFxuICAgIHRoaXMuc2V0dXBPcGVuQVBJU3BlY2lmaWNCZWhhdmlvcigpO1xuICAgIHRoaXMuaXNJbml0aWFsaXplZCA9IHRydWU7XG4gICAgXG4gICAgbG9nLmluZm8oJ09wZW5BUEkgU2lkZWJhciBpbml0aWFsaXplZCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIE9wZW5BUEktc3BlY2lmaWMgYmVoYXZpb3IgdGhhdCdzIG5vdCBjb3ZlcmVkIGJ5IG1peGluc1xuICAgKi9cbiAgc2V0dXBPcGVuQVBJU3BlY2lmaWNCZWhhdmlvcigpIHtcbiAgICAvLyBIYW5kbGUgaW5pdGlhbCBoYXNoIG5hdmlnYXRpb25cbiAgICBpZiAod2luZG93LmxvY2F0aW9uLmhhc2gpIHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLnNjcm9sbFRvSWQod2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKDEpKTtcbiAgICAgIH0sIDEwMCk7XG4gICAgfVxuICAgIFxuICAgIC8vIFNldHVwIGN1c3RvbSBhY3RpdmUgbGluayBiZWhhdmlvciBmb3IgT3BlbkFQSSBlbmRwb2ludHNcbiAgICB0aGlzLm9uKCdzY3JvbGwtdGFyZ2V0LWFjdGl2ZScsIChkYXRhKSA9PiB7XG4gICAgICB0aGlzLmhhbmRsZU9wZW5BUElBY3RpdmVMaW5rKGRhdGEubGluayk7XG4gICAgfSk7XG4gICAgXG4gICAgLy8gU2V0dXAgY3VzdG9tIHRvZ2dsZSBiZWhhdmlvciBmb3IgT3BlbkFQSSB0YWcgZ3JvdXBzXG4gICAgdGhpcy5vbignYWZ0ZXItdG9nZ2xlJywgKGRhdGEpID0+IHtcbiAgICAgIHRoaXMuaGFuZGxlT3BlbkFQSVRvZ2dsZShkYXRhLnRvZ2dsZSwgZGF0YS5leHBhbmRlZCk7XG4gICAgfSk7XG4gICAgXG4gICAgXG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIE9wZW5BUEktc3BlY2lmaWMgYWN0aXZlIGxpbmsgYmVoYXZpb3JcbiAgICogQ2FsbGVkIHdoZW4gU2Nyb2xsVHJhY2tpbmdNaXhpbiBkZXRlY3RzIGEgbmV3IGFjdGl2ZSB0YXJnZXRcbiAgICovXG4gIGhhbmRsZU9wZW5BUElBY3RpdmVMaW5rKGxpbmspIHtcbiAgICAvLyBVcGRhdGUgVVJMIGhhc2ggZm9yIGRlZXAgbGlua2luZ1xuICAgIGNvbnN0IHRhcmdldElkID0gbGluay5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2Nyb2xsLXRhcmdldCcpO1xuICAgIGlmICh0YXJnZXRJZCAmJiBoaXN0b3J5LnB1c2hTdGF0ZSkge1xuICAgICAgaGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgbnVsbCwgYCMke3RhcmdldElkfWApO1xuICAgIH1cbiAgICBcbiAgICAvLyBBcHBseSBPcGVuQVBJLXNwZWNpZmljIGFjdGl2ZSBjbGFzc2VzXG4gICAgY29uc3QgaXNFbmRwb2ludExpbmsgPSBsaW5rLmNsYXNzTGlzdC5jb250YWlucygnb3BlbmFwaS1zaWRlYmFyLWVuZHBvaW50LWxpbmsnKTtcbiAgICBjb25zdCBhY3RpdmVDbGFzcyA9IGlzRW5kcG9pbnRMaW5rID8gJ29wZW5hcGktc2lkZWJhci1lbmRwb2ludC1saW5rLS1hY3RpdmUnIDogJ29wZW5hcGktc2lkZWJhci1saW5rLS1hY3RpdmUnO1xuICAgIFxuICAgIC8vIFJlbW92ZSBleGlzdGluZyBPcGVuQVBJIGFjdGl2ZSBjbGFzc2VzXG4gICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5vcGVuYXBpLXNpZGViYXItbGluay0tYWN0aXZlLCAub3BlbmFwaS1zaWRlYmFyLWVuZHBvaW50LWxpbmstLWFjdGl2ZScpXG4gICAgICAuZm9yRWFjaChlbCA9PiBlbC5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuYXBpLXNpZGViYXItbGluay0tYWN0aXZlJywgJ29wZW5hcGktc2lkZWJhci1lbmRwb2ludC1saW5rLS1hY3RpdmUnKSk7XG4gICAgXG4gICAgLy8gQWRkIE9wZW5BUEktc3BlY2lmaWMgYWN0aXZlIGNsYXNzXG4gICAgbGluay5jbGFzc0xpc3QuYWRkKGFjdGl2ZUNsYXNzKTtcbiAgICBcbiAgICAvLyBBdXRvLWV4cGFuZCBwYXJlbnQgdGFnIGdyb3VwIGlmIHRoaXMgaXMgYW4gZW5kcG9pbnRcbiAgICBpZiAoaXNFbmRwb2ludExpbmspIHtcbiAgICAgIHRoaXMuZXhwYW5kUGFyZW50VGFnR3JvdXAobGluayk7XG4gICAgfVxuICAgIFxuICAgIFxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBPcGVuQVBJLXNwZWNpZmljIHRvZ2dsZSBiZWhhdmlvclxuICAgKiBDYWxsZWQgd2hlbiBFeHBhbmRhYmxlTWl4aW4gY29tcGxldGVzIGEgdG9nZ2xlIGFjdGlvblxuICAgKi9cbiAgaGFuZGxlT3BlbkFQSVRvZ2dsZSh0b2dnbGUsIGV4cGFuZGVkKSB7XG4gICAgLy8gQXBwbHkgT3BlbkFQSS1zcGVjaWZpYyBzdHlsaW5nXG4gICAgdG9nZ2xlLmNsYXNzTGlzdC50b2dnbGUoJ29wZW5hcGktc2lkZWJhci10YWctdG9nZ2xlLS1leHBhbmRlZCcsIGV4cGFuZGVkKTtcbiAgICBcbiAgICBcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHBhbmQgcGFyZW50IHRhZyBncm91cCBmb3IgYW4gZW5kcG9pbnQgbGlua1xuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGxpbmsgLSBUaGUgZW5kcG9pbnQgbGluayBlbGVtZW50XG4gICAqL1xuICBleHBhbmRQYXJlbnRUYWdHcm91cChsaW5rKSB7XG4gICAgY29uc3QgcGFyZW50R3JvdXAgPSBsaW5rLmNsb3Nlc3QoJy5vcGVuYXBpLXNpZGViYXItdGFnLWdyb3VwJyk7XG4gICAgaWYgKCFwYXJlbnRHcm91cCkgcmV0dXJuO1xuICAgIFxuICAgICAgICAgIGNvbnN0IHRvZ2dsZSA9IHBhcmVudEdyb3VwLnF1ZXJ5U2VsZWN0b3IoJy5vcGVuYXBpLXNpZGViYXItdGFnLXRvZ2dsZScpO1xuICAgICAgICAgIGlmICh0b2dnbGUgJiYgdG9nZ2xlLmdldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcpID09PSAnZmFsc2UnKSB7XG4gICAgICAvLyBVc2UgbWl4aW4ncyBleHBhbmRUb2dnbGUgbWV0aG9kXG4gICAgICB0aGlzLmV4cGFuZFRvZ2dsZSh0b2dnbGUpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFB1YmxpYyBBUEkgbWV0aG9kcyB1c2luZyBtaXhpbnNcbiAgZXhwYW5kQWxsR3JvdXBzKCkge1xuICAgIC8vIFVzZSBFeHBhbmRhYmxlTWl4aW4ncyBleHBhbmRBbGwgbWV0aG9kXG4gICAgdGhpcy5leHBhbmRBbGwoKTtcbiAgfVxuXG4gIGNvbGxhcHNlQWxsR3JvdXBzKCkge1xuICAgIC8vIFVzZSBFeHBhbmRhYmxlTWl4aW4ncyBjb2xsYXBzZUFsbCBtZXRob2RcbiAgICB0aGlzLmNvbGxhcHNlQWxsKCk7XG4gIH1cblxuICBzY3JvbGxUb0VuZHBvaW50KGVuZHBvaW50SWQpIHtcbiAgICAvLyBVc2UgU2Nyb2xsVHJhY2tpbmdNaXhpbidzIHNjcm9sbFRvSWQgbWV0aG9kXG4gICAgdGhpcy5zY3JvbGxUb0lkKGVuZHBvaW50SWQpO1xuICB9XG59XG5cbi8vIEFwcGx5IG1peGlucyB0byBPcGVuQVBJU2lkZWJhciBwcm90b3R5cGVcbk9iamVjdC5hc3NpZ24oT3BlbkFQSVNpZGViYXIucHJvdG90eXBlLCBFeHBhbmRhYmxlTWl4aW4pO1xuT2JqZWN0LmFzc2lnbihPcGVuQVBJU2lkZWJhci5wcm90b3R5cGUsIFNjcm9sbFRyYWNraW5nTWl4aW4pO1xuXG4vLyBBdXRvLXJlZ2lzdGVyIGNvbXBvbmVudFxuQ29tcG9uZW50TWFuYWdlci5yZWdpc3Rlcignb3BlbmFwaS1zaWRlYmFyJywgT3BlbkFQSVNpZGViYXIpO1xuXG5leHBvcnQgZGVmYXVsdCBPcGVuQVBJU2lkZWJhcjsiLCAiLyoqXG4gKiBNb2JpbGUgTmF2aWdhdGlvbiBDb21wb25lbnRcbiAqIEhhbmRsZXMgbW9iaWxlIG5hdmlnYXRpb24gdG9nZ2xlIHdpdGggYWNjZXNzaWJpbGl0eSBmZWF0dXJlc1xuICovXG5cbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJy4uLy4uL2NvcmUvQ29tcG9uZW50LmpzJztcbmltcG9ydCBDb21wb25lbnRNYW5hZ2VyIGZyb20gJy4uLy4uL2NvcmUvQ29tcG9uZW50TWFuYWdlci5qcyc7XG5cbmV4cG9ydCBjbGFzcyBNb2JpbGVOYXYgZXh0ZW5kcyBDb21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcihjb25maWcgPSB7fSkge1xuICAgIHN1cGVyKHtcbiAgICAgIG5hbWU6ICduYXZpZ2F0aW9uLW1vYmlsZS10b2dnbGUnLFxuICAgICAgc2VsZWN0b3I6IGNvbmZpZy5zZWxlY3RvciB8fCAnW2RhdGEtY29tcG9uZW50PVwibmF2aWdhdGlvbi1tb2JpbGUtdG9nZ2xlXCJdJyxcbiAgICAgIC4uLmNvbmZpZ1xuICAgIH0pO1xuICAgIFxuICAgIHRoaXMub3ZlcmxheSA9IG51bGw7XG4gICAgdGhpcy5zaWRlYmFyQ29tcG9uZW50ID0gbnVsbDtcbiAgICB0aGlzLmNsb3NlQnV0dG9uID0gbnVsbDtcbiAgfVxuXG4gIGFzeW5jIG9uSW5pdCgpIHtcbiAgICBpZiAoIXRoaXMuZWxlbWVudCkge1xuICAgICAgY29uc29sZS53YXJuKCdNb2JpbGVOYXY6IFRvZ2dsZSBidXR0b24gbm90IGZvdW5kJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5vdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtbmF2aWdhdGlvbi1vdmVybGF5XScpO1xuICAgIHRoaXMuY2xvc2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1uYXZpZ2F0aW9uLWNsb3NlXScpO1xuICAgIC8vIEVuc3VyZSBhMTF5IGF0dHJpYnV0ZXMgb24gdGhlIHRvZ2dsZVxuICAgIHRyeSB7XG4gICAgICBpZiAoIXRoaXMuZWxlbWVudC5oYXNBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnKSkge1xuICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyk7XG4gICAgICB9XG4gICAgICBpZiAoIXRoaXMuZWxlbWVudC5oYXNBdHRyaWJ1dGUoJ2FyaWEtY29udHJvbHMnKSkge1xuICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWNvbnRyb2xzJywgJ3NpZGViYXItbGVmdCcpO1xuICAgICAgfVxuICAgIH0gY2F0Y2gge31cbiAgICBcbiAgICAvLyBUcnkgdG8gZmluZCBzaWRlYmFyIGNvbXBvbmVudFxuICAgIHRoaXMuZmluZFNpZGViYXJDb21wb25lbnQoKTtcbiAgfVxuXG4gIGZpbmRTaWRlYmFyQ29tcG9uZW50KCkge1xuICAgIHRoaXMuc2lkZWJhckNvbXBvbmVudCA9IENvbXBvbmVudE1hbmFnZXIuZ2V0SW5zdGFuY2VzKCduYXZpZ2F0aW9uLXNpZGViYXItbGVmdCcpWzBdO1xuICAgIFxuICAgIGlmICh0aGlzLnNpZGViYXJDb21wb25lbnQpIHtcbiAgICAgIHRoaXMuc2V0dXBFdmVudExpc3RlbmVycygpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICAvLyBXYWl0IGZvciBzaWRlYmFyIGNvbXBvbmVudCB0byBiZSByZWdpc3RlcmVkXG4gICAgbGV0IHJldHJ5Q291bnQgPSAwO1xuICAgIGNvbnN0IG1heFJldHJpZXMgPSAxMDtcbiAgICBjb25zdCByZXRyeUludGVydmFsID0gNTA7XG4gICAgXG4gICAgY29uc3QgY2hlY2tGb3JTaWRlYmFyID0gKCkgPT4ge1xuICAgICAgdGhpcy5zaWRlYmFyQ29tcG9uZW50ID0gQ29tcG9uZW50TWFuYWdlci5nZXRJbnN0YW5jZXMoJ25hdmlnYXRpb24tc2lkZWJhci1sZWZ0JylbMF07XG4gICAgICBcbiAgICAgIGlmICh0aGlzLnNpZGViYXJDb21wb25lbnQpIHtcbiAgICAgICAgdGhpcy5zZXR1cEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICB9IGVsc2UgaWYgKHJldHJ5Q291bnQgPCBtYXhSZXRyaWVzKSB7XG4gICAgICAgIHJldHJ5Q291bnQrKztcbiAgICAgICAgc2V0VGltZW91dChjaGVja0ZvclNpZGViYXIsIHJldHJ5SW50ZXJ2YWwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdNb2JpbGVOYXY6IFNpZGViYXIgY29tcG9uZW50IG5vdCBmb3VuZCBhZnRlciBtYXhpbXVtIHJldHJpZXMgLSBtb2JpbGUgbmF2IG1heSBub3QgZnVuY3Rpb24gcHJvcGVybHknKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIHNldFRpbWVvdXQoY2hlY2tGb3JTaWRlYmFyLCByZXRyeUludGVydmFsKTtcbiAgfVxuXG4gIHNldHVwRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKHRoaXMuZWxlbWVudCwgJ2NsaWNrJywgKCkgPT4gdGhpcy5vcGVuTW9iaWxlTmF2KCkpO1xuICAgIFxuICAgIGlmICh0aGlzLmNsb3NlQnV0dG9uKSB7XG4gICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIodGhpcy5jbG9zZUJ1dHRvbiwgJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZU1vYmlsZU5hdigpKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMub3ZlcmxheSkge1xuICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKHRoaXMub3ZlcmxheSwgJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZU1vYmlsZU5hdigpKTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGRvY3VtZW50LCAna2V5ZG93bicsIChlKSA9PiB7XG4gICAgICBpZiAoZS5rZXkgPT09ICdFc2NhcGUnICYmIHRoaXMuc2lkZWJhckNvbXBvbmVudCAmJiB0aGlzLnNpZGViYXJDb21wb25lbnQuaXNPcGVuKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5jbG9zZU1vYmlsZU5hdigpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgb3Blbk1vYmlsZU5hdigpIHtcbiAgICBpZiAoIXRoaXMuc2lkZWJhckNvbXBvbmVudCkge1xuICAgICAgY29uc29sZS53YXJuKCdNb2JpbGVOYXY6IENhbm5vdCBvcGVuIC0gc2lkZWJhciBjb21wb25lbnQgbm90IGF2YWlsYWJsZScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5zaWRlYmFyQ29tcG9uZW50LmlzT3BlbikgcmV0dXJuO1xuICAgIFxuICAgIHRoaXMuc2lkZWJhckNvbXBvbmVudC5vcGVuKCk7XG4gICAgdGhpcy5vdmVybGF5Py5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG4gICAgXG4gICAgdGhpcy5jbG9zZUJ1dHRvbj8uZm9jdXMoKTtcbiAgICB0cnkgeyB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ3RydWUnKTsgfSBjYXRjaCB7fVxuICAgIHRoaXMuYW5ub3VuY2VUb1NjcmVlblJlYWRlcignTmF2aWdhdGlvbiBtZW51IG9wZW5lZCcpO1xuICAgIHRoaXMuZW1pdCgnbW9iaWxlTmF2Om9wZW5lZCcpO1xuICB9XG5cbiAgY2xvc2VNb2JpbGVOYXYoKSB7XG4gICAgaWYgKCF0aGlzLnNpZGViYXJDb21wb25lbnQpIHtcbiAgICAgIGNvbnNvbGUud2FybignTW9iaWxlTmF2OiBDYW5ub3QgY2xvc2UgLSBzaWRlYmFyIGNvbXBvbmVudCBub3QgYXZhaWxhYmxlJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIGlmICghdGhpcy5zaWRlYmFyQ29tcG9uZW50LmlzT3BlbikgcmV0dXJuO1xuICAgIFxuICAgIHRoaXMuc2lkZWJhckNvbXBvbmVudC5jbG9zZSgpO1xuICAgIHRoaXMub3ZlcmxheT8uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICcnO1xuXG4gICAgdGhpcy5lbGVtZW50LmZvY3VzKCk7XG4gICAgdHJ5IHsgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICdmYWxzZScpOyB9IGNhdGNoIHt9XG4gICAgdGhpcy5hbm5vdW5jZVRvU2NyZWVuUmVhZGVyKCdOYXZpZ2F0aW9uIG1lbnUgY2xvc2VkJyk7XG4gICAgdGhpcy5lbWl0KCdtb2JpbGVOYXY6Y2xvc2VkJyk7XG4gIH1cblxuICBhbm5vdW5jZVRvU2NyZWVuUmVhZGVyKG1lc3NhZ2UpIHtcbiAgICBpZiAod2luZG93LmFubm91bmNlVG9TY3JlZW5SZWFkZXIpIHtcbiAgICAgIHdpbmRvdy5hbm5vdW5jZVRvU2NyZWVuUmVhZGVyKG1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG4gIG9uRGVzdHJveSgpIHtcbiAgICBpZiAodGhpcy5zaWRlYmFyQ29tcG9uZW50ICYmIHRoaXMuc2lkZWJhckNvbXBvbmVudC5pc09wZW4pIHtcbiAgICAgIHRoaXMuY2xvc2VNb2JpbGVOYXYoKTtcbiAgICB9XG4gIH1cbn1cblxuQ29tcG9uZW50TWFuYWdlci5yZWdpc3RlcignbmF2aWdhdGlvbi1tb2JpbGUtdG9nZ2xlJywgTW9iaWxlTmF2KTtcbiIsICIvKiogU2lkZWJhciBDb21wb25lbnQgKi9cblxuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vY29yZS9Db21wb25lbnQuanMnO1xuaW1wb3J0IENvbXBvbmVudE1hbmFnZXIgZnJvbSAnLi4vLi4vY29yZS9Db21wb25lbnRNYW5hZ2VyLmpzJztcbmltcG9ydCB7IEV4cGFuZGFibGVNaXhpbiwgUmVzcG9uc2l2ZU1peGluIH0gZnJvbSAnLi4vaW5kZXguanMnO1xuaW1wb3J0IHsgQ3VycmVudFBhZ2VEZXRlY3Rpb24gfSBmcm9tICcuLi8uLi91dGlscy9DdXJyZW50UGFnZURldGVjdGlvbi5qcyc7XG5pbXBvcnQgeyBhbmltYXRpb25CcmlkZ2UgfSBmcm9tICcuLi8uLi9jb3JlL0FuaW1hdGlvbkJyaWRnZS5qcyc7XG5cbmV4cG9ydCBjbGFzcyBTaWRlYmFyIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoY29uZmlnID0ge30pIHtcbiAgICBzdXBlcih7XG4gICAgICBuYW1lOiAnbmF2aWdhdGlvbi1zaWRlYmFyLWxlZnQnLFxuICAgICAgc2VsZWN0b3I6IGNvbmZpZy5zZWxlY3RvciB8fCAnI3NpZGViYXItbGVmdCcsXG4gICAgICAuLi5jb25maWdcbiAgICB9KTtcbiAgICBcbiAgICB0aGlzLmxpbmtUcmVlRWxlbWVudCA9IG51bGw7XG4gICAgdGhpcy5pc0luaXRpYWxpemVkID0gZmFsc2U7XG4gICAgdGhpcy5jdXJyZW50UGFnZURldGVjdG9yID0gbnVsbDtcbiAgfVxuXG4gIGFzeW5jIG9uSW5pdCgpIHtcbiAgICBpZiAoIXRoaXMuZWxlbWVudCkge1xuICAgICAgY29uc29sZS53YXJuKCdTaWRlYmFyOiBTaWRlYmFyIGVsZW1lbnQgbm90IGZvdW5kJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5saW5rVHJlZUVsZW1lbnQgPSB0aGlzLmZpbmRDaGlsZCgnW2RhdGEtbGluay10cmVlXScpO1xuICAgIGlmICghdGhpcy5saW5rVHJlZUVsZW1lbnQpIHtcbiAgICAgIGNvbnNvbGUud2FybignU2lkZWJhcjogTGlua1RyZWUgZWxlbWVudCBub3QgZm91bmQgd2l0aGluIHNpZGViYXInKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBSZXZlYWwgY29udGVudHMgaW1tZWRpYXRlbHkgdG8gYXZvaWQgb3BhY2l0eSBnYXRpbmcgaWYgbGF0ZXIgc3RlcHMgZmFpbFxuICAgIGlmICghdGhpcy5saW5rVHJlZUVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbml0aWFsaXplZCcpKSB7XG4gICAgICB0aGlzLmxpbmtUcmVlRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdpbml0aWFsaXplZCcpO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLmluaXRFeHBhbmRhYmxlKHtcbiAgICAgIHRvZ2dsZVNlbGVjdG9yOiAnLnNpZGViYXJfX3RvZ2dsZScsXG4gICAgICBjb250ZW50U2VsZWN0b3I6ICcubmVzdGVkLWNvbnRlbnQnLFxuICAgICAgLy8gUHJlZmVyIHNuYXBwaWVyIGludGVyYWN0aW9ucyBpbiB0aGUgc2lkZWJhclxuICAgICAgLy8gYW5pbWF0aW9uVGltaW5nOiAnbWVkaXVtJ1xuICAgICAgYW5pbWF0aW9uVGltaW5nOiAnZmFzdCdcbiAgICB9KTtcbiAgICBcbiAgICB0aGlzLmluaXRSZXNwb25zaXZlKHtcbiAgICAgIG1vYmlsZUJyZWFrcG9pbnQ6IDEyODAsXG4gICAgICBvdmVybGF5U2VsZWN0b3I6ICdbZGF0YS1uYXZpZ2F0aW9uLW92ZXJsYXldJ1xuICAgIH0pO1xuICAgIFxuICAgIGNvbnN0IG5lc3RlZENvbnRlbnRzID0gdGhpcy5saW5rVHJlZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm5lc3RlZC1jb250ZW50Jyk7XG4gICAgbmVzdGVkQ29udGVudHMuZm9yRWFjaCgoY29udGVudCkgPT4ge1xuICAgICAgaWYgKCFjb250ZW50Lmhhc0F0dHJpYnV0ZSgnZGF0YS1jb2xsYXBzZS1zdGF0ZScpKSB7XG4gICAgICAgIGFuaW1hdGlvbkJyaWRnZS5zZXRDb2xsYXBzZVN0YXRlKGNvbnRlbnQsICdjb2xsYXBzZWQnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuY3VycmVudFBhZ2VEZXRlY3RvciA9IG5ldyBDdXJyZW50UGFnZURldGVjdGlvbih7XG4gICAgICBhY3RpdmVDbGFzczogJ3NpZGViYXItbGluay0tYWN0aXZlJyxcbiAgICAgIHBhcmVudEl0ZW1TZWxlY3RvcjogJ2xpJyxcbiAgICAgIHRvZ2dsZVNlbGVjdG9yOiAnLnNpZGViYXJfX3RvZ2dsZSdcbiAgICB9KTtcbiAgICBcbiAgICBjb25zdCBmb3VuZCA9IHRoaXMuY3VycmVudFBhZ2VEZXRlY3Rvci5pbml0KHRoaXMubGlua1RyZWVFbGVtZW50KTtcbiAgICBpZiAoZm91bmQpIHtcbiAgICAgIGF3YWl0IHRoaXMuY3VycmVudFBhZ2VEZXRlY3Rvci5leHBhbmRQYXJlbnRTZWN0aW9ucyhhc3luYyAodG9nZ2xlLCBleHBhbmQpID0+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5zZXRUb2dnbGVTdGF0ZSh0b2dnbGUsIGV4cGFuZCk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5zZXR1cEtleWJvYXJkTmF2aWdhdGlvbigpO1xuXG4gICAgLy8gQ2xvc2UgdGhlIG1vYmlsZSBzaWRlYmFyIHdoZW4gYSBsaW5rIGlzIGNsaWNrZWRcbiAgICBpZiAodGhpcy5saW5rVHJlZUVsZW1lbnQpIHtcbiAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLmxpbmtUcmVlRWxlbWVudCwgJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGFuY2hvciA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCdhJyk7XG4gICAgICAgIGlmICghYW5jaG9yKSByZXR1cm47XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5pc01vYmlsZVZpZXdwb3J0ID09PSAnZnVuY3Rpb24nICYmIHRoaXMuaXNNb2JpbGVWaWV3cG9ydCgpKSB7XG4gICAgICAgICAgdGhpcy5jbG9zZU1vYmlsZSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2luaXRpYWxpemVkJyk7XG4gICAgdGhpcy5pc0luaXRpYWxpemVkID0gdHJ1ZTtcbiAgICBcbiAgICB0aGlzLnVwZGF0ZUNvbXBvbmVudFN0YXRlKCdyZWFkeScpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIGtleWJvYXJkIG5hdmlnYXRpb24gZm9yIGFjY2Vzc2liaWxpdHlcbiAgICovXG4gIHNldHVwS2V5Ym9hcmROYXZpZ2F0aW9uKCkge1xuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLmxpbmtUcmVlRWxlbWVudCwgJ2tleWRvd24nLCBhc3luYyAoZSkgPT4ge1xuICAgICAgY29uc3QgZm9jdXNlZEVsZW1lbnQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuICAgICAgXG4gICAgICBpZiAoZS5rZXkgPT09ICdBcnJvd1JpZ2h0Jykge1xuICAgICAgICBjb25zdCB0b2dnbGUgPSBmb2N1c2VkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuc2lkZWJhcl9fdG9nZ2xlJyk7XG4gICAgICAgIGlmICh0b2dnbGUgJiYgdG9nZ2xlLmdldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcpID09PSAnZmFsc2UnKSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGF3YWl0IHRoaXMuaGFuZGxlVG9nZ2xlQ2xpY2sodG9nZ2xlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChlLmtleSA9PT0gJ0Fycm93TGVmdCcpIHtcbiAgICAgICAgY29uc3QgdG9nZ2xlID0gZm9jdXNlZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnNpZGViYXJfX3RvZ2dsZScpO1xuICAgICAgICBpZiAodG9nZ2xlICYmIHRvZ2dsZS5nZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnKSA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGF3YWl0IHRoaXMuaGFuZGxlVG9nZ2xlQ2xpY2sodG9nZ2xlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLy8gVG9nZ2xlLCByZXNwb25zaXZlIGJlaGF2aW9yLCBhbmQgY3VycmVudCBwYWdlIGRldGVjdGlvbiBhcmUgaGFuZGxlZCBieSBtaXhpbnMvdXRpbGl0aWVzXG5cbiAgLyoqXG4gICAqIE9wZW4gbW9iaWxlIHNpZGViYXJcbiAgICovXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5vcGVuTW9iaWxlKCk7XG4gIH1cblxuICAvKipcbiAgICogQ2xvc2UgbW9iaWxlIHNpZGViYXJcbiAgICovXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuY2xvc2VNb2JpbGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JjZSBjbG9zZSBzaWRlYmFyICh1c2VmdWwgZm9yIGNsZWFudXApXG4gICAqL1xuICBmb3JjZUNsb3NlKCkge1xuICAgIHRoaXMuZm9yY2VDbG9zZU1vYmlsZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRvZ2dsZSBtb2JpbGUgc2lkZWJhclxuICAgKi9cbiAgdG9nZ2xlKCkge1xuICAgIHRoaXMudG9nZ2xlTW9iaWxlKCk7XG4gIH1cblxuICAvKipcbiAgICogUmVzZXQgc2lkZWJhciB0byBpbml0aWFsIHN0YXRlICh1c2VmdWwgZm9yIGRlYnVnZ2luZylcbiAgICovXG4gIHJlc2V0KCkge1xuICAgIHRoaXMucmVzZXRSZXNwb25zaXZlU3RhdGUoKTtcbiAgICB0aGlzLmVtaXQoJ3NpZGViYXI6cmVzZXQnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbmhhbmNlZCBoZWFsdGggY2hlY2sgZm9yIHNpZGViYXIgY29tcG9uZW50XG4gICAqIFVzZXMgbW9kdWxhciBoZWFsdGggY2hlY2tzIGZyb20gbWl4aW5zXG4gICAqL1xuICBpc0hlYWx0aHkoKSB7XG4gICAgLy8gQ2FsbCBwYXJlbnQgaGVhbHRoIGNoZWNrIGZpcnN0XG4gICAgaWYgKCFzdXBlci5pc0hlYWx0aHkoKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICAvLyBTaWRlYmFyLXNwZWNpZmljIGhlYWx0aCBjaGVja3NcbiAgICBpZiAoIXRoaXMubGlua1RyZWVFbGVtZW50IHx8ICFkb2N1bWVudC5jb250YWlucyh0aGlzLmxpbmtUcmVlRWxlbWVudCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgLy8gVXNlIGV4cGFuZGFibGUgbWl4aW4gaGVhbHRoIGNoZWNrXG4gICAgaWYgKCF0aGlzLmlzRXhwYW5kYWJsZUhlYWx0aHkoKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBjdXJyZW50IHBhZ2UgZGV0ZWN0aW9uXG4gICAgaWYgKHRoaXMuY3VycmVudFBhZ2VEZXRlY3RvciAmJiAhdGhpcy5jdXJyZW50UGFnZURldGVjdG9yLmdldEN1cnJlbnRQYWdlSW5mbygpLmZvdW5kKSB7XG4gICAgICAvLyBUaGlzIGlzIG5vdCBuZWNlc3NhcmlseSB1bmhlYWx0aHksIGp1c3QgbG9nIGl0XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbXBvbmVudCBjbGVhbnVwXG4gICAqL1xuICBvbkRlc3Ryb3koKSB7XG4gICAgLy8gbm8tb3BcbiAgfVxuXG4gIC8qKlxuICAgKiBTeW5jaHJvbml6ZSB0aGUgc2lkZWJhciB0byB0aGUgY3VycmVudCBwYWdlXG4gICAqIC0gQ29sbGFwc2UgYWxsIHNlY3Rpb25zXG4gICAqIC0gRXhwYW5kIGFuY2VzdG9yIHNlY3Rpb25zIG9mIHRoZSBjdXJyZW50IGxpbmtcbiAgICogLSBFbnN1cmUgY3VycmVudCBsaW5rIGlzIGhpZ2hsaWdodGVkXG4gICAqL1xuICBhc3luYyBzeW5jVG9DdXJyZW50UGFnZSgpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKCF0aGlzLmxpbmtUcmVlRWxlbWVudCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAvLyBVcGRhdGUgY3VycmVudCBwYWdlIGRldGVjdGlvblxuICAgICAgaWYgKHRoaXMuY3VycmVudFBhZ2VEZXRlY3Rvcikge1xuICAgICAgICB0aGlzLmN1cnJlbnRQYWdlRGV0ZWN0b3IudXBkYXRlQ3VycmVudFBhdGgoKTtcbiAgICAgIH1cblxuICAgICAgLy8gRmluZCB0aGUgY3VycmVudCBsaW5rXG4gICAgICBsZXQgY3VycmVudExpbmsgPSB0aGlzLmxpbmtUcmVlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCdhLnNpZGViYXItaXRlbV9fbGluay0tYWN0aXZlJyk7XG4gICAgICBpZiAoIWN1cnJlbnRMaW5rKSB7XG4gICAgICAgIGN1cnJlbnRMaW5rID0gdGhpcy5saW5rVHJlZUVsZW1lbnQucXVlcnlTZWxlY3RvcignYVtkYXRhLWN1cnJlbnQ9XCJ0cnVlXCJdJyk7XG4gICAgICB9XG4gICAgICBpZiAoIWN1cnJlbnRMaW5rKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gQ29sbGFwc2UgYWxsIGZpcnN0IHRvIGF2b2lkIG1peGVkIHN0YXRlc1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLmNvbGxhcHNlQWxsID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuY29sbGFwc2VBbGwoKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ29sbGVjdCBhbmNlc3RvciB0b2dnbGVzIGFuZCBleHBhbmQgZnJvbSByb290IGRvd253YXJkXG4gICAgICBjb25zdCB0b2dnbGVzVG9FeHBhbmQgPSBbXTtcbiAgICAgIGxldCBwYXJlbnQgPSBjdXJyZW50TGluay5jbG9zZXN0KCdsaScpO1xuICAgICAgd2hpbGUgKHBhcmVudCkge1xuICAgICAgICBjb25zdCB0b2dnbGUgPSBwYXJlbnQucXVlcnlTZWxlY3RvcignOnNjb3BlID4gLnNpZGViYXJfX2l0ZW0gPiAuc2lkZWJhcl9fdG9nZ2xlJyk7XG4gICAgICAgIGlmICh0b2dnbGUpIHRvZ2dsZXNUb0V4cGFuZC5wdXNoKHRvZ2dsZSk7XG4gICAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnRFbGVtZW50Py5jbG9zZXN0KCdsaScpO1xuICAgICAgfVxuXG4gICAgICBmb3IgKGxldCBpID0gdG9nZ2xlc1RvRXhwYW5kLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIGNvbnN0IHRvZ2dsZSA9IHRvZ2dsZXNUb0V4cGFuZFtpXTtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmV4cGFuZFRvZ2dsZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGF3YWl0IHRoaXMuZXhwYW5kVG9nZ2xlKHRvZ2dsZSk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoaXMuc2V0VG9nZ2xlU3RhdGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnNldFRvZ2dsZVN0YXRlKHRvZ2dsZSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxufVxuXG4vLyBBcHBseSBtaXhpbnMgdG8gU2lkZWJhciBwcm90b3R5cGVcbk9iamVjdC5hc3NpZ24oU2lkZWJhci5wcm90b3R5cGUsIEV4cGFuZGFibGVNaXhpbik7XG5PYmplY3QuYXNzaWduKFNpZGViYXIucHJvdG90eXBlLCBSZXNwb25zaXZlTWl4aW4pO1xuXG4vLyBBdXRvLXJlZ2lzdGVyIGNvbXBvbmVudFxuQ29tcG9uZW50TWFuYWdlci5yZWdpc3RlcignbmF2aWdhdGlvbi1zaWRlYmFyLWxlZnQnLCBTaWRlYmFyKTsiLCAiaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vY29yZS9Db21wb25lbnQuanMnO1xuaW1wb3J0IENvbXBvbmVudE1hbmFnZXIgZnJvbSAnLi4vLi4vY29yZS9Db21wb25lbnRNYW5hZ2VyLmpzJztcblxuY2xhc3MgTGFuZ3VhZ2VTd2l0Y2hlciBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZyA9IHt9KSB7XG4gICAgc3VwZXIoe1xuICAgICAgbmFtZTogJ2xhbmd1YWdlLXN3aXRjaGVyJyxcbiAgICAgIHNlbGVjdG9yOiBjb25maWcuc2VsZWN0b3IgfHwgJyNsYW5ndWFnZS1tZW51LWJ1dHRvbltkYXRhLWNvbXBvbmVudD1cImxhbmd1YWdlLXN3aXRjaGVyXCJdJyxcbiAgICAgIC4uLmNvbmZpZ1xuICAgIH0pO1xuICB9XG5cbiAgb25Jbml0KCkge1xuICAgIGNvbnN0IGJ1dHRvbiA9IHRoaXMuZWxlbWVudDtcbiAgICBjb25zdCBtZW51ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xhbmd1YWdlLW1lbnUnKTtcbiAgICBpZiAoIWJ1dHRvbiB8fCAhbWVudSkgcmV0dXJuO1xuXG4gICAgY29uc3QgdG9nZ2xlID0gKCkgPT4ge1xuICAgICAgY29uc3QgaXNFeHBhbmRlZCA9IGJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnKSA9PT0gJ3RydWUnO1xuICAgICAgYnV0dG9uLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsIFN0cmluZyghaXNFeHBhbmRlZCkpO1xuICAgICAgbWVudS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nKTtcbiAgICB9O1xuXG4gICAgY29uc3Qgb25DbGlja091dHNpZGUgPSAoZXZlbnQpID0+IHtcbiAgICAgIGlmICghYnV0dG9uLmNvbnRhaW5zKGV2ZW50LnRhcmdldCkgJiYgIW1lbnUuY29udGFpbnMoZXZlbnQudGFyZ2V0KSkge1xuICAgICAgICBtZW51LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICBidXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihidXR0b24sICdjbGljaycsIHRvZ2dsZSk7XG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGRvY3VtZW50LCAnY2xpY2snLCBvbkNsaWNrT3V0c2lkZSk7XG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGJ1dHRvbiwgJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgICAgaWYgKGUua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgICBtZW51LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICBidXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuQ29tcG9uZW50TWFuYWdlci5yZWdpc3RlcignbGFuZ3VhZ2Utc3dpdGNoZXInLCBMYW5ndWFnZVN3aXRjaGVyKTtcblxuZXhwb3J0IGRlZmF1bHQgTGFuZ3VhZ2VTd2l0Y2hlcjtcblxuIiwgIi8qKlxuICogR2xvc3NhcnkgQ29tcG9uZW50XG4gKiBIYW5kbGVzIGludGVyYWN0aXZlIGdsb3NzYXJ5IGNhcmRzIHdpdGggbW91c2UtZm9sbG93aW5nIGdyYWRpZW50IGVmZmVjdHNcbiAqL1xuXG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICcuLi8uLi9jb3JlL0NvbXBvbmVudC5qcyc7XG5cbmV4cG9ydCBjbGFzcyBHbG9zc2FyeSBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZyA9IHt9KSB7XG4gICAgc3VwZXIoe1xuICAgICAgbmFtZTogJ2dsb3NzYXJ5JyxcbiAgICAgIHNlbGVjdG9yOiBjb25maWcuc2VsZWN0b3IgfHwgJy5nbG9zc2FyeS1lbnRyeScsXG4gICAgICAuLi5jb25maWdcbiAgICB9KTtcbiAgICBcbiAgICB0aGlzLmNhcmRzID0gW107XG4gICAgdGhpcy5wb3NpdGlvbnMgPSB7IHg6IDUwLCB5OiA1MCB9OyAvLyBEZWZhdWx0IHRvIGNlbnRlclxuICAgIHRoaXMuYW5pbWF0aW9uSWQgPSBudWxsO1xuICAgIHRoaXMuaXNBbmltYXRpbmcgPSBmYWxzZTtcbiAgfVxuXG4gIGFzeW5jIG9uSW5pdCgpIHtcbiAgICB0aGlzLmNhcmRzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZ2xvc3NhcnktZW50cnknKSk7XG4gICAgXG4gICAgaWYgKHRoaXMuY2FyZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0dsb3NzYXJ5OiBObyBnbG9zc2FyeSBlbnRyaWVzIGZvdW5kJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5zZXR1cEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5zdGFydEFuaW1hdGlvbigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIGV2ZW50IGxpc3RlbmVycyBmb3IgY2FyZHNcbiAgICovXG4gIHNldHVwRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5jYXJkcy5mb3JFYWNoKGNhcmQgPT4ge1xuICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGNhcmQsICdtb3VzZW1vdmUnLCAoZSkgPT4gdGhpcy5oYW5kbGVNb3VzZU1vdmUoZSkpO1xuICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGNhcmQsICdtb3VzZW92ZXInLCAoZSkgPT4gdGhpcy5oYW5kbGVNb3VzZU92ZXIoZSkpO1xuICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGNhcmQsICdtb3VzZW91dCcsIChlKSA9PiB0aGlzLmhhbmRsZU1vdXNlT3V0KGUpKTtcbiAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihjYXJkLCAnZm9jdXMnLCAoZSkgPT4gdGhpcy5oYW5kbGVGb2N1cyhlKSk7XG4gICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoY2FyZCwgJ2JsdXInLCAoZSkgPT4gdGhpcy5oYW5kbGVCbHVyKGUpKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgbW91c2UgbW92ZW1lbnQgZm9yIGdyYWRpZW50IGZvbGxvd2luZ1xuICAgKi9cbiAgaGFuZGxlTW91c2VNb3ZlKGUpIHtcbiAgICB0aGlzLnBvc2l0aW9ucy54ID0gZS5jbGllbnRYO1xuICAgIHRoaXMucG9zaXRpb25zLnkgPSBlLmNsaWVudFk7XG4gICAgdGhpcy5lbWl0KCdnbG9zc2FyeTptb3VzZU1vdmUnLCB7IHg6IGUuY2xpZW50WCwgeTogZS5jbGllbnRZIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBtb3VzZSBvdmVyIGVmZmVjdHNcbiAgICovXG4gIGhhbmRsZU1vdXNlT3ZlcihlKSB7XG4gICAgY29uc3QgY2FyZCA9IGUuY3VycmVudFRhcmdldDtcbiAgICBjYXJkLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVZKC0xMHB4KSBzY2FsZSgxLjA1KSc7XG4gICAgY2FyZC5zdHlsZS5ib3hTaGFkb3cgPSAnMCAyMHB4IDMwcHggcmdiYSgwLCAwLCAwLCAwLjIpJztcbiAgICBjYXJkLnN0eWxlLnpJbmRleCA9ICcxMCc7XG4gICAgXG4gICAgdGhpcy5lbWl0KCdnbG9zc2FyeTpjYXJkSG92ZXJlZCcsIHsgY2FyZCB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgbW91c2Ugb3V0IGVmZmVjdHNcbiAgICovXG4gIGhhbmRsZU1vdXNlT3V0KGUpIHtcbiAgICBjb25zdCBjYXJkID0gZS5jdXJyZW50VGFyZ2V0O1xuICAgIGNhcmQuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoMCkgc2NhbGUoMS4wKSc7XG4gICAgY2FyZC5zdHlsZS5ib3hTaGFkb3cgPSAnJztcbiAgICBjYXJkLnN0eWxlLnpJbmRleCA9ICcnO1xuICAgIFxuICAgIHRoaXMuZW1pdCgnZ2xvc3Nhcnk6Y2FyZFVuaG92ZXJlZCcsIHsgY2FyZCB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgZm9jdXMgZm9yIGtleWJvYXJkIGFjY2Vzc2liaWxpdHlcbiAgICovXG4gIGhhbmRsZUZvY3VzKGUpIHtcbiAgICB0aGlzLmhhbmRsZU1vdXNlT3ZlcihlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgYmx1ciBmb3Iga2V5Ym9hcmQgYWNjZXNzaWJpbGl0eVxuICAgKi9cbiAgaGFuZGxlQmx1cihlKSB7XG4gICAgdGhpcy5oYW5kbGVNb3VzZU91dChlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydCB0aGUgZ3JhZGllbnQgYW5pbWF0aW9uXG4gICAqL1xuICBzdGFydEFuaW1hdGlvbigpIHtcbiAgICBpZiAodGhpcy5pc0FuaW1hdGluZykgcmV0dXJuO1xuICAgIFxuICAgIHRoaXMuaXNBbmltYXRpbmcgPSB0cnVlO1xuICAgIHRoaXMuYW5pbWF0ZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0b3AgdGhlIGdyYWRpZW50IGFuaW1hdGlvblxuICAgKi9cbiAgc3RvcEFuaW1hdGlvbigpIHtcbiAgICBpZiAodGhpcy5hbmltYXRpb25JZCkge1xuICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5hbmltYXRpb25JZCk7XG4gICAgICB0aGlzLmFuaW1hdGlvbklkID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy5pc0FuaW1hdGluZyA9IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEFuaW1hdGlvbiBsb29wIGZvciBncmFkaWVudCBlZmZlY3RzXG4gICAqL1xuICBhbmltYXRlKCkge1xuICAgIHRoaXMuY2FyZHMuZm9yRWFjaChjYXJkID0+IHtcbiAgICAgIGNvbnN0IHJlY3QgPSBjYXJkLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgY29uc3QgbW91c2VYID0gKHRoaXMucG9zaXRpb25zLnggLSByZWN0LmxlZnQpIC8gcmVjdC53aWR0aCAqIDEwMDtcbiAgICAgIGNvbnN0IG1vdXNlWSA9ICh0aGlzLnBvc2l0aW9ucy55IC0gcmVjdC50b3ApIC8gcmVjdC5oZWlnaHQgKiAxMDA7XG4gICAgICBcbiAgICAgIC8vIEFwcGx5IGdyYWRpZW50IHdpdGggQ1NTIGN1c3RvbSBwcm9wZXJ0aWVzXG4gICAgICBjYXJkLnN0eWxlLmJhY2tncm91bmQgPSBgcmFkaWFsLWdyYWRpZW50KGNpcmNsZSBhdCAke21vdXNlWH0lICR7bW91c2VZfSUsIHZhcigtLXByaW1hcnktZ3JhZGllbnQtY29sb3IsICMzYjgyZjYpLCB2YXIoLS1zZWNvbmRhcnktZ3JhZGllbnQtY29sb3IsICMxZTQwYWYpKWA7XG4gICAgfSk7XG4gICAgXG4gICAgaWYgKHRoaXMuaXNBbmltYXRpbmcpIHtcbiAgICAgIHRoaXMuYW5pbWF0aW9uSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5hbmltYXRlKCkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgZ3JhZGllbnQgY29sb3JzXG4gICAqL1xuICB1cGRhdGVHcmFkaWVudENvbG9ycyhwcmltYXJ5Q29sb3IsIHNlY29uZGFyeUNvbG9yKSB7XG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KCctLXByaW1hcnktZ3JhZGllbnQtY29sb3InLCBwcmltYXJ5Q29sb3IpO1xuICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1zZWNvbmRhcnktZ3JhZGllbnQtY29sb3InLCBzZWNvbmRhcnlDb2xvcik7XG4gICAgXG4gICAgdGhpcy5lbWl0KCdnbG9zc2FyeTpjb2xvcnNVcGRhdGVkJywgeyBwcmltYXJ5Q29sb3IsIHNlY29uZGFyeUNvbG9yIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc2V0IGNhcmQgcG9zaXRpb25zIGFuZCBlZmZlY3RzXG4gICAqL1xuICByZXNldENhcmRzKCkge1xuICAgIHRoaXMuY2FyZHMuZm9yRWFjaChjYXJkID0+IHtcbiAgICAgIGNhcmQuc3R5bGUudHJhbnNmb3JtID0gJyc7XG4gICAgICBjYXJkLnN0eWxlLmJveFNoYWRvdyA9ICcnO1xuICAgICAgY2FyZC5zdHlsZS56SW5kZXggPSAnJztcbiAgICAgIGNhcmQuc3R5bGUuYmFja2dyb3VuZCA9ICcnO1xuICAgIH0pO1xuICAgIFxuICAgIHRoaXMuZW1pdCgnZ2xvc3Nhcnk6Y2FyZHNSZXNldCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbXBvbmVudCBjbGVhbnVwXG4gICAqL1xuICBvbkRlc3Ryb3koKSB7XG4gICAgdGhpcy5zdG9wQW5pbWF0aW9uKCk7XG4gICAgdGhpcy5yZXNldENhcmRzKCk7XG4gICAgLy8gbm8tb3BcbiAgfVxufVxuXG4vLyBBdXRvLXJlZ2lzdGVyIGNvbXBvbmVudFxuaW1wb3J0IENvbXBvbmVudE1hbmFnZXIgZnJvbSAnLi4vLi4vY29yZS9Db21wb25lbnRNYW5hZ2VyLmpzJztcbkNvbXBvbmVudE1hbmFnZXIucmVnaXN0ZXIoJ2dsb3NzYXJ5JywgR2xvc3NhcnkpOyIsICIvKipcbiAqIENoYXQgVE9DIFRvZ2dsZSBDb21wb25lbnRcbiAqIEhhbmRsZXMgc3dpdGNoaW5nIGJldHdlZW4gY2hhdCBhbmQgdGFibGUgb2YgY29udGVudHMgdmlld3NcbiAqL1xuXG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICcuLi8uLi9jb3JlL0NvbXBvbmVudC5qcyc7XG5pbXBvcnQgeyBsb2NhbFN0b3JhZ2UgfSBmcm9tICcuLi8uLi91dGlscy9pbmRleC5qcyc7XG5cbmV4cG9ydCBjbGFzcyBDaGF0VG9jVG9nZ2xlIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoY29uZmlnID0ge30pIHtcbiAgICBzdXBlcih7XG4gICAgICBuYW1lOiAnY2hhdC10b2MtdG9nZ2xlJyxcbiAgICAgIHNlbGVjdG9yOiBjb25maWcuc2VsZWN0b3IgfHwgJyNjaGF0VG9jVG9nZ2xlJyxcbiAgICAgIC4uLmNvbmZpZ1xuICAgIH0pO1xuICAgIFxuICAgIHRoaXMuc3RvcmFnZUtleSA9ICdjaGF0VG9jU2V0dGluZ3MnO1xuICAgIHRoaXMuZGVmYXVsdFZpZXcgPSAnY2hhdCc7XG4gICAgXG4gICAgLy8gUmVhZCBzYXZlZCBzdGF0ZSBpbW1lZGlhdGVseSB0byBwcmV2ZW50IGZsaWNrZXJcbiAgICB0aGlzLmluaXRpYWxTdGF0ZSA9IGxvY2FsU3RvcmFnZS5nZXQodGhpcy5zdG9yYWdlS2V5KSB8fCB0aGlzLmRlZmF1bHRWaWV3O1xuICAgIFxuICAgIHRoaXMuZWxlbWVudHMgPSB7XG4gICAgICBjb250YWluZXI6IG51bGwsXG4gICAgICBjaGF0QnV0dG9uOiBudWxsLFxuICAgICAgdG9jQnV0dG9uOiBudWxsLFxuICAgICAgY2hhdENvbnRhaW5lcjogbnVsbCxcbiAgICAgIHRvY0NvbnRhaW5lcjogbnVsbFxuICAgIH07XG4gIH1cblxuICBhc3luYyBvbkluaXQoKSB7XG4gICAgaWYgKCF0aGlzLmVsZW1lbnQpIHtcbiAgICAgIGNvbnNvbGUud2FybignQ2hhdFRvY1RvZ2dsZTogVG9nZ2xlIGNvbnRhaW5lciBub3QgZm91bmQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuY2FjaGVFbGVtZW50cygpKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdDaGF0VG9jVG9nZ2xlOiBGYWlsZWQgdG8gY2FjaGUgcmVxdWlyZWQgZWxlbWVudHMnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgaW5saW5lIHNjcmlwdCBhbHJlYWR5IHNldCB0aGUgY29ycmVjdCBzdGF0ZVxuICAgIGNvbnN0IGFscmVhZHlJbml0aWFsaXplZCA9IHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2luaXRpYWxpemVkJyk7XG4gICAgXG4gICAgaWYgKCFhbHJlYWR5SW5pdGlhbGl6ZWQpIHtcbiAgICAgIC8vIEZhbGxiYWNrOiBTZXQgaW5pdGlhbCBzdGF0ZSBpZiBpbmxpbmUgc2NyaXB0IGRpZG4ndCBydW5cbiAgICAgIHRoaXMuc2V0QWN0aXZlTW9kZSh0aGlzLmluaXRpYWxTdGF0ZSwgZmFsc2UpO1xuICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2luaXRpYWxpemVkJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIElubGluZSBzY3JpcHQgYWxyZWFkeSBzZXQgYnV0dG9uIHN0YXRlLCBlbnN1cmUgY29udGFpbmVycyBtYXRjaFxuICAgICAgY29uc3QgY3VycmVudE1vZGUgPSB0aGlzLmdldEN1cnJlbnRNb2RlKCk7XG4gICAgICBcbiAgICAgIC8vIEFwcGx5IGNvbnRhaW5lciBzdGF0ZSBpZiBjb250YWluZXJzIGV4aXN0IGFuZCBhcmVuJ3QgYWxyZWFkeSBzZXQgY29ycmVjdGx5XG4gICAgICBpZiAodGhpcy5lbGVtZW50cy5jaGF0Q29udGFpbmVyICYmIHRoaXMuZWxlbWVudHMudG9jQ29udGFpbmVyKSB7XG4gICAgICAgIGNvbnN0IGNoYXRIaWRkZW4gPSB0aGlzLmVsZW1lbnRzLmNoYXRDb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKTtcbiAgICAgICAgY29uc3QgdG9jSGlkZGVuID0gdGhpcy5lbGVtZW50cy50b2NDb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIGlmIGNvbnRhaW5lcnMgbmVlZCB0byBiZSB1cGRhdGVkIHRvIG1hdGNoIGJ1dHRvbiBzdGF0ZVxuICAgICAgICBjb25zdCBuZWVkc1VwZGF0ZSA9IFxuICAgICAgICAgIChjdXJyZW50TW9kZSA9PT0gJ2NoYXQnICYmIGNoYXRIaWRkZW4pIHx8IFxuICAgICAgICAgIChjdXJyZW50TW9kZSA9PT0gJ3RvYycgJiYgdG9jSGlkZGVuKTtcbiAgICAgICAgICBcbiAgICAgICAgaWYgKG5lZWRzVXBkYXRlKSB7XG4gICAgICAgICAgdGhpcy5zZXRBY3RpdmVNb2RlKGN1cnJlbnRNb2RlLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gQ29udGFpbmVycyBhcmUgb3B0aW9uYWwgLSB0b2dnbGUgd2lsbCB3b3JrIHdpdGhvdXQgdGhlbVxuICAgIGlmICghdGhpcy5lbGVtZW50cy5jaGF0Q29udGFpbmVyIHx8ICF0aGlzLmVsZW1lbnRzLnRvY0NvbnRhaW5lcikge1xuICAgICAgY29uc29sZS53YXJuKCdDaGF0VG9jVG9nZ2xlOiBDaGF0L1RPQyBjb250YWluZXJzIG5vdCBmb3VuZCwgYnV0IHRvZ2dsZSB3aWxsIHdvcmsgZm9yIHN0YXRlIHRyYWNraW5nJyk7XG4gICAgfVxuXG4gICAgdGhpcy5zZXR1cEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICAvKipcbiAgICogQ2FjaGUgRE9NIGVsZW1lbnQgcmVmZXJlbmNlc1xuICAgKi9cbiAgY2FjaGVFbGVtZW50cygpIHtcbiAgICB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lciA9IHRoaXMuZWxlbWVudDtcbiAgICB0aGlzLmVsZW1lbnRzLmNoYXRCdXR0b24gPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtbW9kZT1cImNoYXRcIl0nKTtcbiAgICB0aGlzLmVsZW1lbnRzLnRvY0J1dHRvbiA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1tb2RlPVwidG9jXCJdJyk7XG4gICAgdGhpcy5lbGVtZW50cy5jaGF0Q29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoYXRDb250YWluZXInKTtcbiAgICB0aGlzLmVsZW1lbnRzLnRvY0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2NDb250YWluZXInKTtcbiAgICBcbiAgICBcbiAgICBcbiAgICAvLyBWZXJpZnkgd2UgaGF2ZSBib3RoIGJ1dHRvbnNcbiAgICBpZiAoIXRoaXMuZWxlbWVudHMuY2hhdEJ1dHRvbiB8fCAhdGhpcy5lbGVtZW50cy50b2NCdXR0b24pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0NoYXRUb2NUb2dnbGU6IFJlcXVpcmVkIHRvZ2dsZSBidXR0b25zIG5vdCBmb3VuZCEnKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCBldmVudCBsaXN0ZW5lcnNcbiAgICovXG4gIHNldHVwRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgLy8gQ2hhdCBidXR0b24gY2xpY2tcbiAgICB0aGlzLmVsZW1lbnRzLmNoYXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgdGhpcy5zZXRBY3RpdmVNb2RlKCdjaGF0Jyk7XG4gICAgfSk7XG5cbiAgICAvLyBUT0MgYnV0dG9uIGNsaWNrXG4gICAgdGhpcy5lbGVtZW50cy50b2NCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgdGhpcy5zZXRBY3RpdmVNb2RlKCd0b2MnKTtcbiAgICB9KTtcblxuICAgIC8vIEtleWJvYXJkIHN1cHBvcnQgZm9yIGJvdGggYnV0dG9uc1xuICAgIHRoaXMuZWxlbWVudHMuY2hhdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcbiAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJyB8fCBlLmtleSA9PT0gJyAnKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5zZXRBY3RpdmVNb2RlKCdjaGF0Jyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmVsZW1lbnRzLnRvY0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcbiAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJyB8fCBlLmtleSA9PT0gJyAnKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5zZXRBY3RpdmVNb2RlKCd0b2MnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgfVxuXG5cblxuICAvKipcbiAgICogU2V0IGFjdGl2ZSBtb2RlIChjaGF0IG9yIHRvYykgYW5kIHVwZGF0ZSB2aXN1YWwgc3RhdGVcbiAgICovXG4gIHNldEFjdGl2ZU1vZGUobW9kZSwgc2hvdWxkU2F2ZSA9IHRydWUpIHtcbiAgICAvLyBVcGRhdGUgYnV0dG9uIHZpc3VhbCBzdGF0ZXNcbiAgICB0aGlzLmVsZW1lbnRzLmNoYXRCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgnY2hhdC10b2MtdG9nZ2xlX19vcHRpb24tLWFjdGl2ZScsIG1vZGUgPT09ICdjaGF0Jyk7XG4gICAgdGhpcy5lbGVtZW50cy50b2NCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgnY2hhdC10b2MtdG9nZ2xlX19vcHRpb24tLWFjdGl2ZScsIG1vZGUgPT09ICd0b2MnKTtcbiAgICBcbiAgICAvLyBVcGRhdGUgY29udGFpbmVyIHZpc2liaWxpdHkgaWYgdGhleSBleGlzdFxuICAgIGlmICh0aGlzLmVsZW1lbnRzLmNoYXRDb250YWluZXIgJiYgdGhpcy5lbGVtZW50cy50b2NDb250YWluZXIpIHtcbiAgICAgIGlmIChtb2RlID09PSAnY2hhdCcpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50cy5jaGF0Q29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgICB0aGlzLmVsZW1lbnRzLnRvY0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgdGhpcy5lbGVtZW50cy5jaGF0Q29udGFpbmVyLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAnZmFsc2UnKTtcbiAgICAgICAgdGhpcy5lbGVtZW50cy50b2NDb250YWluZXIuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmVsZW1lbnRzLmNoYXRDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgIHRoaXMuZWxlbWVudHMudG9jQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgICB0aGlzLmVsZW1lbnRzLmNoYXRDb250YWluZXIuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XG4gICAgICAgIHRoaXMuZWxlbWVudHMudG9jQ29udGFpbmVyLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAnZmFsc2UnKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gU2F2ZSB0byBsb2NhbFN0b3JhZ2UgaWYgcmVxdWVzdGVkXG4gICAgaWYgKHNob3VsZFNhdmUpIHtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXQodGhpcy5zdG9yYWdlS2V5LCBtb2RlKTtcbiAgICB9XG4gICAgXG4gICAgLy8gRW1pdCBjaGFuZ2UgZXZlbnRcbiAgICB0aGlzLmVtaXQoJ2NoYXRUb2NUb2dnbGU6Y2hhbmdlZCcsIHsgbW9kZSB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY3VycmVudCBhY3RpdmUgbW9kZVxuICAgKi9cbiAgZ2V0Q3VycmVudE1vZGUoKSB7XG4gICAgaWYgKHRoaXMuZWxlbWVudHMuY2hhdEJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ2NoYXQtdG9jLXRvZ2dsZV9fb3B0aW9uLS1hY3RpdmUnKSkge1xuICAgICAgcmV0dXJuICdjaGF0JztcbiAgICB9IGVsc2UgaWYgKHRoaXMuZWxlbWVudHMudG9jQnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnY2hhdC10b2MtdG9nZ2xlX19vcHRpb24tLWFjdGl2ZScpKSB7XG4gICAgICByZXR1cm4gJ3RvYyc7XG4gICAgfVxuICAgIFxuICAgIC8vIEZhbGxiYWNrIHRvIGxvY2FsU3RvcmFnZSBvciBkZWZhdWx0XG4gICAgY29uc3Qgc2F2ZWRTZXR0aW5nID0gbG9jYWxTdG9yYWdlLmdldCh0aGlzLnN0b3JhZ2VLZXkpO1xuICAgIHJldHVybiBzYXZlZFNldHRpbmcgfHwgdGhpcy5kZWZhdWx0VmlldztcbiAgfVxuXG5cblxuXG5cblxuXG4gIC8qKlxuICAgKiBDb21wb25lbnQgY2xlYW51cFxuICAgKi9cbiAgb25EZXN0cm95KCkge1xuICAgIC8vIG5vLW9wXG4gIH1cbn1cblxuLy8gQXV0by1yZWdpc3RlciBjb21wb25lbnRcbmltcG9ydCBDb21wb25lbnRNYW5hZ2VyIGZyb20gJy4uLy4uL2NvcmUvQ29tcG9uZW50TWFuYWdlci5qcyc7XG5Db21wb25lbnRNYW5hZ2VyLnJlZ2lzdGVyKCdjaGF0LXRvYy10b2dnbGUnLCBDaGF0VG9jVG9nZ2xlKTtcblxuIiwgImltcG9ydCB7IGVzY2FwZUhUTUwsIHNhbml0aXplSFRNTCB9IGZyb20gJy4uLy4uL3V0aWxzL3Nhbml0aXplLmpzJztcbi8qKlxuICogVG9hc3QgTm90aWZpY2F0aW9uIENvbXBvbmVudFxuICogRGVkaWNhdGVkLCBjbGVhbiB0b2FzdCBub3RpZmljYXRpb24gc3lzdGVtXG4gKi9cblxuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vY29yZS9Db21wb25lbnQuanMnO1xuaW1wb3J0IENvbXBvbmVudE1hbmFnZXIgZnJvbSAnLi4vLi4vY29yZS9Db21wb25lbnRNYW5hZ2VyLmpzJztcblxuZXhwb3J0IGNsYXNzIFRvYXN0IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoY29uZmlnID0ge30pIHtcbiAgICBzdXBlcih7XG4gICAgICBuYW1lOiAndG9hc3QnLFxuICAgICAgc2VsZWN0b3I6IGNvbmZpZy5zZWxlY3RvciB8fCAnYm9keScsIC8vIFVzZSBib2R5IGFzIGRlZmF1bHQgY29udGFpbmVyXG4gICAgICAuLi5jb25maWdcbiAgICB9KTtcbiAgICBcbiAgICB0aGlzLnRvYXN0cyA9IG5ldyBTZXQoKTtcbiAgICB0aGlzLmRlZmF1bHREdXJhdGlvbiA9IDQwMDA7XG4gICAgdGhpcy5tYXhUb2FzdHMgPSA0O1xuICB9XG5cbiAgYXN5bmMgb25Jbml0KCkge1xuICAgIGlmICghd2luZG93Lk1pbG9VWCkge1xuICAgICAgd2luZG93Lk1pbG9VWCA9IHt9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93IGEgdG9hc3Qgbm90aWZpY2F0aW9uXG4gICAqL1xuICBzaG93KG1lc3NhZ2UsIHR5cGUgPSAnaW5mbycsIGR1cmF0aW9uID0gdGhpcy5kZWZhdWx0RHVyYXRpb24pIHtcbiAgICAvLyBMaW1pdCBtYXhpbXVtIG51bWJlciBvZiB0b2FzdHNcbiAgICBpZiAodGhpcy50b2FzdHMuc2l6ZSA+PSB0aGlzLm1heFRvYXN0cykge1xuICAgICAgY29uc3Qgb2xkZXN0VG9hc3QgPSBBcnJheS5mcm9tKHRoaXMudG9hc3RzKVswXTtcbiAgICAgIHRoaXMuaGlkZShvbGRlc3RUb2FzdCk7XG4gICAgfVxuXG4gICAgY29uc3QgdG9hc3QgPSB0aGlzLmNyZWF0ZVRvYXN0KG1lc3NhZ2UsIHR5cGUsIGR1cmF0aW9uKTtcbiAgICB0aGlzLnRvYXN0cy5hZGQodG9hc3QpO1xuICAgIFxuICAgIC8vIEFkZCB0byBET01cbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRvYXN0KTtcbiAgICBcbiAgICAvLyBUcmlnZ2VyIGVudHJhbmNlIGFuaW1hdGlvbiB3aXRoIGEgc2xpZ2h0IGRlbGF5IHRvIGVuc3VyZSBET00gaXMgcmVhZHlcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRvYXN0LmNsYXNzTGlzdC5hZGQoJ3RvYXN0LW5vdGlmaWNhdGlvbi0tdmlzaWJsZScpO1xuICAgIH0sIDUwKTtcbiAgICBcbiAgICAvLyBBdXRvLWhpZGUgYWZ0ZXIgZHVyYXRpb25cbiAgICBpZiAoZHVyYXRpb24gPiAwKSB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5oaWRlKHRvYXN0KTtcbiAgICAgIH0sIGR1cmF0aW9uKTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5lbWl0KCd0b2FzdDpzaG93bicsIHsgbWVzc2FnZSwgdHlwZSwgZHVyYXRpb24gfSk7XG4gICAgcmV0dXJuIHRvYXN0O1xuICB9XG5cbiAgLyoqXG4gICAqIEhpZGUgYSBzcGVjaWZpYyB0b2FzdFxuICAgKi9cbiAgaGlkZSh0b2FzdCkge1xuICAgIGlmICghdG9hc3QgfHwgIXRoaXMudG9hc3RzLmhhcyh0b2FzdCkpIHJldHVybjtcbiAgICBcbiAgICB0b2FzdC5jbGFzc0xpc3QuYWRkKCd0b2FzdC1ub3RpZmljYXRpb24tLWhpZGluZycpO1xuICAgIFxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgaWYgKHRvYXN0LnBhcmVudE5vZGUpIHtcbiAgICAgICAgdG9hc3QucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0b2FzdCk7XG4gICAgICB9XG4gICAgICB0aGlzLnRvYXN0cy5kZWxldGUodG9hc3QpO1xuICAgIH0sIDUwMCk7XG4gICAgXG4gICAgdGhpcy5lbWl0KCd0b2FzdDpoaWRkZW4nLCB7IHRvYXN0IH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSB0b2FzdCBET00gZWxlbWVudFxuICAgKi9cbiAgY3JlYXRlVG9hc3QobWVzc2FnZSwgdHlwZSwgZHVyYXRpb24pIHtcbiAgICBjb25zdCB0b2FzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRvYXN0LmNsYXNzTmFtZSA9IGB0b2FzdC1ub3RpZmljYXRpb24gdG9hc3Qtbm90aWZpY2F0aW9uLS0ke3R5cGV9YDtcbiAgICBcbiAgICBjb25zdCBpY29ucyA9IHtcbiAgICAgIHN1Y2Nlc3M6IGA8c3ZnIGNsYXNzPVwidG9hc3Qtbm90aWZpY2F0aW9uX19pY29uXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIj5cbiAgICAgICAgPHBhdGggZmlsbC1ydWxlPVwiZXZlbm9kZFwiIGQ9XCJNMTAgMThhOCA4IDAgMTAwLTE2IDggOCAwIDAwMCAxNnptMy44NTctOS44MDlhLjc1Ljc1IDAgMDAtMS4yMTQtLjg4MmwtMy4yMzYgNC41M0w3LjUzIDEwLjUzYS43NS43NSAwIDAwLTEuMDYgMS4wNjFsMi41IDIuNWEuNzUuNzUgMCAwMDEuMTM3LS4wODlsNC01LjV6XCIgY2xpcC1ydWxlPVwiZXZlbm9kZFwiLz5cbiAgICAgIDwvc3ZnPmAsXG4gICAgICBlcnJvcjogYDxzdmcgY2xhc3M9XCJ0b2FzdC1ub3RpZmljYXRpb25fX2ljb25cIiBmaWxsPVwiY3VycmVudENvbG9yXCIgdmlld0JveD1cIjAgMCAyMCAyMFwiPlxuICAgICAgICA8cGF0aCBmaWxsLXJ1bGU9XCJldmVub2RkXCIgZD1cIk0xMCAxOGE4IDggMCAxMDAtMTYgOCA4IDAgMDAwIDE2ek04LjI4IDcuMjJhLjc1Ljc1IDAgMDAtMS4wNiAxLjA2TDguOTQgMTBsLTEuNzIgMS43MmEuNzUuNzUgMCAxMDEuMDYgMS4wNkwxMCAxMS4wNmwxLjcyIDEuNzJhLjc1Ljc1IDAgMTAxLjA2LTEuMDZMMTEuMDYgMTBsMS43Mi0xLjcyYS43NS43NSAwIDAwLTEuMDYtMS4wNkwxMCA4Ljk0IDguMjggNy4yMnpcIiBjbGlwLXJ1bGU9XCJldmVub2RkXCIvPlxuICAgICAgPC9zdmc+YCxcbiAgICAgIHdhcm5pbmc6IGA8c3ZnIGNsYXNzPVwidG9hc3Qtbm90aWZpY2F0aW9uX19pY29uXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIj5cbiAgICAgICAgPHBhdGggZmlsbC1ydWxlPVwiZXZlbm9kZFwiIGQ9XCJNOC40ODUgMi40OTVjLjY3My0xLjE2NyAyLjM1Ny0xLjE2NyAzLjAzIDBsNi4yOCAxMC44NzVjLjY3MyAxLjE2Ny0uMTcgMi42MjUtMS41MTYgMi42MjVIMy43MmMtMS4zNDcgMC0yLjE4OS0xLjQ1OC0xLjUxNS0yLjYyNUw4LjQ4NSAyLjQ5NXpNMTAgNWEuNzUuNzUgMCAwMS43NS43NXYzLjVhLjc1Ljc1IDAgMDEtMS41IDB2LTMuNUEuNzUuNzUgMCAwMTEwIDV6bTAgOWExIDEgMCAxMDAtMiAxIDEgMCAwMDAgMnpcIiBjbGlwLXJ1bGU9XCJldmVub2RkXCIvPlxuICAgICAgPC9zdmc+YCxcbiAgICAgIGluZm86IGA8c3ZnIGNsYXNzPVwidG9hc3Qtbm90aWZpY2F0aW9uX19pY29uXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIj5cbiAgICAgICAgPHBhdGggZmlsbC1ydWxlPVwiZXZlbm9kZFwiIGQ9XCJNMTggMTBhOCA4IDAgMTEtMTYgMCA4IDggMCAwMTE2IDB6bS03LTRhMSAxIDAgMTEtMiAwIDEgMSAwIDAxMiAwek05IDlhLjc1Ljc1IDAgMDAwIDEuNWguMjUzYS4yNS4yNSAwIDAxLjI0NC4zMDRsLS40NTkgMi4wNjZBMS43NSAxLjc1IDAgMDAxMC43NDcgMTVIMTFhLjc1Ljc1IDAgMDAwLTEuNWgtLjI1M2EuMjUuMjUgMCAwMS0uMjQ0LS4zMDRsLjQ1OS0yLjA2NkExLjc1IDEuNzUgMCAwMDkuMjUzIDlIOXpcIiBjbGlwLXJ1bGU9XCJldmVub2RkXCIvPlxuICAgICAgPC9zdmc+YFxuICAgIH07XG4gICAgXG4gICAgY29uc3QgaHRtbCA9IGBcbiAgICAgIDxkaXYgY2xhc3M9XCJ0b2FzdC1ub3RpZmljYXRpb25fX2NvbnRlbnRcIj5cbiAgICAgICAgJHtpY29uc1t0eXBlXSB8fCBpY29ucy5pbmZvfVxuICAgICAgICA8ZGl2IGNsYXNzPVwidG9hc3Qtbm90aWZpY2F0aW9uX19tZXNzYWdlXCI+JHtlc2NhcGVIVE1MKG1lc3NhZ2UpfTwvZGl2PlxuICAgICAgICA8YnV0dG9uIGNsYXNzPVwidG9hc3Qtbm90aWZpY2F0aW9uX19jbG9zZVwiIGFyaWEtbGFiZWw9XCJDbG9zZSBub3RpZmljYXRpb25cIj5cbiAgICAgICAgICA8c3ZnIGZpbGw9XCJjdXJyZW50Q29sb3JcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCI+XG4gICAgICAgICAgICA8cGF0aCBmaWxsLXJ1bGU9XCJldmVub2RkXCIgZD1cIk00LjI5MyA0LjI5M2ExIDEgMCAwMTEuNDE0IDBMMTAgOC41ODZsNC4yOTMtNC4yOTNhMSAxIDAgMTExLjQxNCAxLjQxNEwxMS40MTQgMTBsNC4yOTMgNC4yOTNhMSAxIDAgMDEtMS40MTQgMS40MTRMMTAgMTEuNDE0bC00LjI5MyA0LjI5M2ExIDEgMCAwMS0xLjQxNC0xLjQxNEw4LjU4NiAxMCA0LjI5MyA1LjcwN2ExIDEgMCAwMTAtMS40MTR6XCIgY2xpcC1ydWxlPVwiZXZlbm9kZFwiLz5cbiAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgPC9idXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICAgIHRvYXN0LmlubmVySFRNTCA9IHNhbml0aXplSFRNTChodG1sKTtcbiAgICBcbiAgICAvLyBBZGQgY2xvc2UgYnV0dG9uIGZ1bmN0aW9uYWxpdHlcbiAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IHRvYXN0LnF1ZXJ5U2VsZWN0b3IoJy50b2FzdC1ub3RpZmljYXRpb25fX2Nsb3NlJyk7XG4gICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGNsb3NlQnV0dG9uLCAnY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLmhpZGUodG9hc3QpO1xuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiB0b2FzdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBIaWRlIGFsbCB0b2FzdHNcbiAgICovXG4gIGhpZGVBbGwoKSB7XG4gICAgQXJyYXkuZnJvbSh0aGlzLnRvYXN0cykuZm9yRWFjaCh0b2FzdCA9PiB7XG4gICAgICB0aGlzLmhpZGUodG9hc3QpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlbmllbmNlIG1ldGhvZHNcbiAgICovXG4gIHN1Y2Nlc3MobWVzc2FnZSwgZHVyYXRpb24pIHtcbiAgICByZXR1cm4gdGhpcy5zaG93KG1lc3NhZ2UsICdzdWNjZXNzJywgZHVyYXRpb24pO1xuICB9XG5cbiAgZXJyb3IobWVzc2FnZSwgZHVyYXRpb24pIHtcbiAgICByZXR1cm4gdGhpcy5zaG93KG1lc3NhZ2UsICdlcnJvcicsIGR1cmF0aW9uKTtcbiAgfVxuXG4gIHdhcm5pbmcobWVzc2FnZSwgZHVyYXRpb24pIHtcbiAgICByZXR1cm4gdGhpcy5zaG93KG1lc3NhZ2UsICd3YXJuaW5nJywgZHVyYXRpb24pO1xuICB9XG5cbiAgaW5mbyhtZXNzYWdlLCBkdXJhdGlvbikge1xuICAgIHJldHVybiB0aGlzLnNob3cobWVzc2FnZSwgJ2luZm8nLCBkdXJhdGlvbik7XG4gIH1cblxuICAvKipcbiAgICogQ29tcG9uZW50IGNsZWFudXBcbiAgICovXG4gIG9uRGVzdHJveSgpIHtcbiAgICB0aGlzLmhpZGVBbGwoKTtcbiAgICBpZiAod2luZG93LnRvYXN0ID09PSB0aGlzLnNob3cpIHtcbiAgICAgIGRlbGV0ZSB3aW5kb3cudG9hc3Q7XG4gICAgfVxuICAgIGlmICh3aW5kb3cuTWlsb1VYICYmIHdpbmRvdy5NaWxvVVguc2hvd05vdGlmaWNhdGlvbiA9PT0gdGhpcy5zaG93KSB7XG4gICAgICBkZWxldGUgd2luZG93Lk1pbG9VWC5zaG93Tm90aWZpY2F0aW9uO1xuICAgIH1cbiAgfVxufVxuXG4vLyBBdXRvLXJlZ2lzdGVyIGNvbXBvbmVudFxuQ29tcG9uZW50TWFuYWdlci5yZWdpc3RlcigndG9hc3QnLCBUb2FzdCk7IiwgIi8qKlxuICogVHV0b3JpYWwgTWFuYWdlciBDb21wb25lbnRcbiAqIEVuaGFuY2VkIHR1dG9yaWFsIHN5c3RlbSB3aXRoIHByb2dyZXNzIHRyYWNraW5nLCBzdGVwIHZhbGlkYXRpb24sIGFuZCBpbnRlcmFjdGl2ZSBlbGVtZW50c1xuICovXG5cbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJy4uLy4uL2NvcmUvQ29tcG9uZW50LmpzJztcbmltcG9ydCB7IGFuaW1hdGlvbkJyaWRnZSB9IGZyb20gJy4uLy4uL2NvcmUvQW5pbWF0aW9uQnJpZGdlLmpzJztcbmltcG9ydCB7IGxvY2FsU3RvcmFnZSB9IGZyb20gJy4uLy4uL3V0aWxzL3N0b3JhZ2UuanMnO1xuaW1wb3J0IHsgZGVib3VuY2UgfSBmcm9tICcuLi8uLi91dGlscy9kb20uanMnO1xuXG5leHBvcnQgY2xhc3MgVHV0b3JpYWxNYW5hZ2VyIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoY29uZmlnID0ge30pIHtcbiAgICBzdXBlcih7XG4gICAgICBuYW1lOiAndHV0b3JpYWwtbWFuYWdlcicsXG4gICAgICBzZWxlY3RvcjogY29uZmlnLnNlbGVjdG9yIHx8ICdbZGF0YS1jb21wb25lbnQ9XCJ0dXRvcmlhbC1wcm9ncmVzcy1lbmhhbmNlZFwiXSwgLnR1dG9yaWFsLW92ZXJ2aWV3LCAudHV0b3JpYWwtc3RlcC1jb250ZW50JyxcbiAgICAgIC4uLmNvbmZpZ1xuICAgIH0pO1xuICAgIFxuICAgIHRoaXMudHV0b3JpYWxJZCA9IG51bGw7XG4gICAgdGhpcy5jdXJyZW50U3RlcCA9IDA7XG4gICAgdGhpcy50b3RhbFN0ZXBzID0gMDtcbiAgICB0aGlzLnByb2dyZXNzRGF0YSA9IHt9O1xuICAgIHRoaXMuYXV0b1NhdmVJbnRlcnZhbCA9IG51bGw7XG4gICAgdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlciA9IG51bGw7XG4gIH1cblxuICBhc3luYyBvbkluaXQoKSB7XG4gICAgaWYgKCF0aGlzLmVsZW1lbnQpIHtcbiAgICAgIGNvbnNvbGUud2FybignVHV0b3JpYWxNYW5hZ2VyOiBObyB0dXRvcmlhbCBlbGVtZW50cyBmb3VuZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEluaXRpYWxpemUgdHV0b3JpYWwgZGF0YVxuICAgIHRoaXMudHV0b3JpYWxJZCA9IHRoaXMuZ2V0Q3VycmVudFR1dG9yaWFsSWQoKTtcbiAgICB0aGlzLmN1cnJlbnRTdGVwID0gdGhpcy5nZXRDdXJyZW50U3RlcCgpO1xuICAgIHRoaXMudG90YWxTdGVwcyA9IHRoaXMuZ2V0VG90YWxTdGVwcygpO1xuICAgIFxuICAgIGlmICghdGhpcy50dXRvcmlhbElkKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1R1dG9yaWFsTWFuYWdlcjogTm8gdHV0b3JpYWwgSUQgZm91bmQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJbml0aWFsaXplIGFsbCB0dXRvcmlhbCBmZWF0dXJlc1xuICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZVR1dG9yaWFsKCk7XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBhbGwgdHV0b3JpYWwgZnVuY3Rpb25hbGl0eVxuICAgKi9cbiAgYXN5bmMgaW5pdGlhbGl6ZVR1dG9yaWFsKCkge1xuICAgIC8vIExvYWQgc2F2ZWQgcHJvZ3Jlc3MgZmlyc3RcbiAgICB0aGlzLmxvYWRQcm9ncmVzcygpO1xuICAgIFxuICAgIC8vIFNldHVwIGFsbCB0dXRvcmlhbCBmZWF0dXJlc1xuICAgIHRoaXMuc2V0dXBFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMudXBkYXRlUHJvZ3Jlc3NEaXNwbGF5KCk7XG4gICAgdGhpcy5pbml0aWFsaXplQ29kZUJsb2NrcygpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZUNvbGxhcHNpYmxlU2VjdGlvbnMoKTtcbiAgICB0aGlzLmluaXRpYWxpemVTdGVwVmFsaWRhdGlvbigpO1xuICAgIHRoaXMuc2V0dXBBdXRvU2F2ZSgpO1xuICAgIHRoaXMuc2V0dXBTY3JvbGxUcmFja2luZygpO1xuICAgIHRoaXMuc2V0dXBTbW9vdGhTY3JvbGxpbmcoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdHV0b3JpYWwgSUQgZnJvbSBET01cbiAgICovXG4gIGdldEN1cnJlbnRUdXRvcmlhbElkKCkge1xuICAgIGNvbnN0IHByb2dyZXNzRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXR1dG9yaWFsLWlkXScpO1xuICAgIHJldHVybiBwcm9ncmVzc0VsZW1lbnQgPyBwcm9ncmVzc0VsZW1lbnQuZGF0YXNldC50dXRvcmlhbElkIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY3VycmVudCBzdGVwIGZyb20gRE9NXG4gICAqL1xuICBnZXRDdXJyZW50U3RlcCgpIHtcbiAgICBjb25zdCBwcm9ncmVzc0VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1jdXJyZW50LXN0ZXBdJyk7XG4gICAgcmV0dXJuIHByb2dyZXNzRWxlbWVudCA/IHBhcnNlSW50KHByb2dyZXNzRWxlbWVudC5kYXRhc2V0LmN1cnJlbnRTdGVwKSA6IDA7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRvdGFsIHN0ZXBzIGZyb20gRE9NXG4gICAqL1xuICBnZXRUb3RhbFN0ZXBzKCkge1xuICAgIGNvbnN0IHByb2dyZXNzRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXRvdGFsLXN0ZXBzXScpO1xuICAgIHJldHVybiBwcm9ncmVzc0VsZW1lbnQgPyBwYXJzZUludChwcm9ncmVzc0VsZW1lbnQuZGF0YXNldC50b3RhbFN0ZXBzKSA6IDA7XG4gIH1cblxuICAvKipcbiAgICogU2V0dXAgZXZlbnQgbGlzdGVuZXJzIGZvciB0dXRvcmlhbCBpbnRlcmFjdGlvbnNcbiAgICovXG4gIHNldHVwRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgLy8gU2F2ZSBwcm9ncmVzcyBidXR0b25cbiAgICBjb25zdCBzYXZlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtYWN0aW9uPVwic2F2ZS1wcm9ncmVzc1wiXScpO1xuICAgIGlmIChzYXZlQnRuKSB7XG4gICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoc2F2ZUJ0biwgJ2NsaWNrJywgKCkgPT4gdGhpcy5zYXZlUHJvZ3Jlc3MoKSk7XG4gICAgfVxuXG4gICAgLy8gUmVzZXQgcHJvZ3Jlc3MgYnV0dG9uXG4gICAgY29uc3QgcmVzZXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1hY3Rpb249XCJyZXNldC1wcm9ncmVzc1wiXScpO1xuICAgIGlmIChyZXNldEJ0bikge1xuICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKHJlc2V0QnRuLCAnY2xpY2snLCAoKSA9PiB0aGlzLnJlc2V0UHJvZ3Jlc3MoKSk7XG4gICAgfVxuXG4gICAgLy8gU3RlcCB2YWxpZGF0aW9uIGNoZWNrYm94ZXNcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudmFsaWRhdGlvbi1jaGVja2JveCcpLmZvckVhY2goY2hlY2tib3ggPT4ge1xuICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGNoZWNrYm94LCAnY2hhbmdlJywgKCkgPT4gdGhpcy52YWxpZGF0ZVN0ZXAoKSk7XG4gICAgfSk7XG5cbiAgICAvLyBTdGVwIGNvbXBsZXRpb24gYnV0dG9uXG4gICAgY29uc3QgdmFsaWRhdGVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmFsaWRhdGUtc3RlcCcpO1xuICAgIGlmICh2YWxpZGF0ZUJ0bikge1xuICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKHZhbGlkYXRlQnRuLCAnY2xpY2snLCAoKSA9PiB0aGlzLmNvbXBsZXRlU3RlcCgpKTtcbiAgICB9XG5cbiAgICAvLyBDb3B5IGNvZGUgYnV0dG9ucyBhcmUgbm93IGhhbmRsZWQgYnkgQXJ0aWNsZUNsaXBib2FyZCBjb21wb25lbnRcbiAgICAvLyBObyBuZWVkIGZvciBkdXBsaWNhdGUgaW1wbGVtZW50YXRpb24gaGVyZVxuXG4gICAgLy8gQ29sbGFwc2libGUgc2VjdGlvbnNcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiXScpLmZvckVhY2godHJpZ2dlciA9PiB7XG4gICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIodHJpZ2dlciwgJ2NsaWNrJywgKGUpID0+IHRoaXMudG9nZ2xlQ29sbGFwc2UoZSkpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNhdmUgdHV0b3JpYWwgcHJvZ3Jlc3MgdG8gbG9jYWxTdG9yYWdlXG4gICAqL1xuICBzYXZlUHJvZ3Jlc3MoKSB7XG4gICAgaWYgKCF0aGlzLnR1dG9yaWFsSWQpIHJldHVybjtcbiAgICBcbiAgICBjb25zdCBwcm9ncmVzcyA9IHtcbiAgICAgIHR1dG9yaWFsSWQ6IHRoaXMudHV0b3JpYWxJZCxcbiAgICAgIGN1cnJlbnRTdGVwOiB0aGlzLmN1cnJlbnRTdGVwLFxuICAgICAgY29tcGxldGVkU3RlcHM6IHRoaXMuZ2V0Q29tcGxldGVkU3RlcHMoKSxcbiAgICAgIGNoZWNrZWRJdGVtczogdGhpcy5nZXRDaGVja2VkSXRlbXMoKSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgIGxhc3RWaXNpdGVkU3RlcDogdGhpcy5jdXJyZW50U3RlcFxuICAgIH07XG4gICAgXG4gICAgbG9jYWxTdG9yYWdlLnNldChgdHV0b3JpYWwtJHt0aGlzLnR1dG9yaWFsSWR9YCwgcHJvZ3Jlc3MpO1xuICAgIHRoaXMucHJvZ3Jlc3NEYXRhID0gcHJvZ3Jlc3M7XG4gICAgXG4gICAgLy8gU2hvdyBzYXZlIGNvbmZpcm1hdGlvblxuICAgIHRoaXMuc2hvd1NhdmVDb25maXJtYXRpb24oKTtcbiAgICBcbiAgICAvLyBFbWl0IHNhdmUgZXZlbnRcbiAgICB0aGlzLmVtaXQoJ3R1dG9yaWFsOnByb2dyZXNzU2F2ZWQnLCB7IHR1dG9yaWFsSWQ6IHRoaXMudHV0b3JpYWxJZCwgcHJvZ3Jlc3MgfSk7XG4gIH1cblxuICAvKipcbiAgICogTG9hZCB0dXRvcmlhbCBwcm9ncmVzcyBmcm9tIGxvY2FsU3RvcmFnZVxuICAgKi9cbiAgbG9hZFByb2dyZXNzKCkge1xuICAgIGlmICghdGhpcy50dXRvcmlhbElkKSByZXR1cm47XG4gICAgXG4gICAgY29uc3Qgc2F2ZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0KGB0dXRvcmlhbC0ke3RoaXMudHV0b3JpYWxJZH1gKTtcbiAgICBpZiAoc2F2ZWQpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMucHJvZ3Jlc3NEYXRhID0gc2F2ZWQ7IC8vIFNhZmVTdG9yYWdlIGFscmVhZHkgaGFuZGxlcyBKU09OIHBhcnNpbmdcbiAgICAgICAgdGhpcy51cGRhdGVVSUZyb21Qcm9ncmVzcyh0aGlzLnByb2dyZXNzRGF0YSk7XG4gICAgICAgIHRoaXMuZW1pdCgndHV0b3JpYWw6cHJvZ3Jlc3NMb2FkZWQnLCB7IHR1dG9yaWFsSWQ6IHRoaXMudHV0b3JpYWxJZCwgcHJvZ3Jlc3M6IHRoaXMucHJvZ3Jlc3NEYXRhIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignVHV0b3JpYWxNYW5hZ2VyOiBFcnJvciBsb2FkaW5nIHByb2dyZXNzOicsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVzZXQgdHV0b3JpYWwgcHJvZ3Jlc3NcbiAgICovXG4gIHJlc2V0UHJvZ3Jlc3MoKSB7XG4gICAgaWYgKCF0aGlzLnR1dG9yaWFsSWQpIHJldHVybjtcbiAgICBcbiAgICBpZiAoY29uZmlybSgnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIHJlc2V0IHlvdXIgcHJvZ3Jlc3M/IFRoaXMgY2Fubm90IGJlIHVuZG9uZS4nKSkge1xuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZShgdHV0b3JpYWwtJHt0aGlzLnR1dG9yaWFsSWR9YCk7XG4gICAgICB0aGlzLnByb2dyZXNzRGF0YSA9IHt9O1xuICAgICAgXG4gICAgICAvLyBSZXNldCBVSVxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnZhbGlkYXRpb24tY2hlY2tib3gnKS5mb3JFYWNoKGNiID0+IGNiLmNoZWNrZWQgPSBmYWxzZSk7XG4gICAgICB0aGlzLnZhbGlkYXRlU3RlcCgpO1xuICAgICAgdGhpcy51cGRhdGVQcm9ncmVzc0Rpc3BsYXkoKTtcbiAgICAgIFxuICAgICAgdGhpcy5lbWl0KCd0dXRvcmlhbDpwcm9ncmVzc1Jlc2V0JywgeyB0dXRvcmlhbElkOiB0aGlzLnR1dG9yaWFsSWQgfSk7XG4gICAgICB0aGlzLnNob3dOb3RpZmljYXRpb24oJ1R1dG9yaWFsIHByb2dyZXNzIGhhcyBiZWVuIHJlc2V0JywgJ2luZm8nKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIFVJIGZyb20gbG9hZGVkIHByb2dyZXNzIGRhdGFcbiAgICovXG4gIHVwZGF0ZVVJRnJvbVByb2dyZXNzKHByb2dyZXNzKSB7XG4gICAgLy8gUmVzdG9yZSBjaGVja2VkIGl0ZW1zXG4gICAgaWYgKHByb2dyZXNzLmNoZWNrZWRJdGVtcykge1xuICAgICAgcHJvZ3Jlc3MuY2hlY2tlZEl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgIGNvbnN0IGNoZWNrYm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtY2hlY2tsaXN0LWl0ZW09XCIke2l0ZW19XCJdYCk7XG4gICAgICAgIGlmIChjaGVja2JveCkge1xuICAgICAgICAgIGNoZWNrYm94LmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHRoaXMudmFsaWRhdGVTdGVwKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjdXJyZW50bHkgY29tcGxldGVkIHN0ZXBzXG4gICAqL1xuICBnZXRDb21wbGV0ZWRTdGVwcygpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9ncmVzc0RhdGEuY29tcGxldGVkU3RlcHMgfHwgW107XG4gIH1cblxuICAvKipcbiAgICogR2V0IGN1cnJlbnRseSBjaGVja2VkIGl0ZW1zXG4gICAqL1xuICBnZXRDaGVja2VkSXRlbXMoKSB7XG4gICAgY29uc3QgY2hlY2tib3hlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWNoZWNrbGlzdC1pdGVtXScpO1xuICAgIHJldHVybiBBcnJheS5mcm9tKGNoZWNrYm94ZXMpXG4gICAgICAuZmlsdGVyKGNiID0+IGNiLmNoZWNrZWQpXG4gICAgICAubWFwKGNiID0+IGNiLmRhdGFzZXQuY2hlY2tsaXN0SXRlbSk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIHByb2dyZXNzIGRpc3BsYXlcbiAgICovXG4gIHVwZGF0ZVByb2dyZXNzRGlzcGxheSgpIHtcbiAgICBjb25zdCBjb21wbGV0ZWRTdGVwcyA9IHRoaXMuZ2V0Q29tcGxldGVkU3RlcHMoKTtcbiAgICBjb25zdCBwcm9ncmVzc1BlcmNlbnRhZ2UgPSB0aGlzLnRvdGFsU3RlcHMgPiAwID8gTWF0aC5yb3VuZCgoY29tcGxldGVkU3RlcHMubGVuZ3RoIC8gdGhpcy50b3RhbFN0ZXBzKSAqIDEwMCkgOiAwO1xuICAgIFxuICAgIC8vIFVwZGF0ZSBwcm9ncmVzcyBiYXJcbiAgICBjb25zdCBwcm9ncmVzc0JhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50dXRvcmlhbC1wcm9ncmVzcy1iYXInKTtcbiAgICBpZiAocHJvZ3Jlc3NCYXIpIHtcbiAgICAgIHByb2dyZXNzQmFyLnN0eWxlLndpZHRoID0gYCR7cHJvZ3Jlc3NQZXJjZW50YWdlfSVgO1xuICAgIH1cbiAgICBcbiAgICAvLyBVcGRhdGUgcHJvZ3Jlc3MgdGV4dFxuICAgIGNvbnN0IHByb2dyZXNzVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50dXRvcmlhbC1wcm9ncmVzcy10ZXh0Jyk7XG4gICAgaWYgKHByb2dyZXNzVGV4dCkge1xuICAgICAgcHJvZ3Jlc3NUZXh0LnRleHRDb250ZW50ID0gYCR7Y29tcGxldGVkU3RlcHMubGVuZ3RofS8ke3RoaXMudG90YWxTdGVwc30gc3RlcHMgY29tcGxldGVkICgke3Byb2dyZXNzUGVyY2VudGFnZX0lKWA7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIGF1dG8tc2F2ZSBmdW5jdGlvbmFsaXR5XG4gICAqL1xuICBzZXR1cEF1dG9TYXZlKCkge1xuICAgIC8vIEF1dG8tc2F2ZSBldmVyeSAzMCBzZWNvbmRzIGlmIHRoZXJlIGFyZSBjaGFuZ2VzXG4gICAgdGhpcy5hdXRvU2F2ZUludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuaGFzVW5zYXZlZENoYW5nZXMoKSkge1xuICAgICAgICB0aGlzLnNhdmVQcm9ncmVzcygpO1xuICAgICAgfVxuICAgIH0sIDMwMDAwKTtcbiAgICBcbiAgICAvLyBTYXZlIG9uIHBhZ2UgdW5sb2FkXG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKHdpbmRvdywgJ2JlZm9yZXVubG9hZCcsICgpID0+IHtcbiAgICAgIHRoaXMuc2F2ZVByb2dyZXNzKCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlcmUgYXJlIHVuc2F2ZWQgY2hhbmdlc1xuICAgKi9cbiAgaGFzVW5zYXZlZENoYW5nZXMoKSB7XG4gICAgY29uc3QgY3VycmVudENoZWNrZWRJdGVtcyA9IHRoaXMuZ2V0Q2hlY2tlZEl0ZW1zKCk7XG4gICAgY29uc3Qgc2F2ZWRDaGVja2VkSXRlbXMgPSB0aGlzLnByb2dyZXNzRGF0YS5jaGVja2VkSXRlbXMgfHwgW107XG4gICAgXG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGN1cnJlbnRDaGVja2VkSXRlbXMuc29ydCgpKSAhPT0gSlNPTi5zdHJpbmdpZnkoc2F2ZWRDaGVja2VkSXRlbXMuc29ydCgpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIHN0ZXAgdmFsaWRhdGlvblxuICAgKi9cbiAgaW5pdGlhbGl6ZVN0ZXBWYWxpZGF0aW9uKCkge1xuICAgIC8vIEluaXRpYWwgdmFsaWRhdGlvbiBjaGVja1xuICAgIHRoaXMudmFsaWRhdGVTdGVwKCk7XG4gIH1cblxuICAvKipcbiAgICogVmFsaWRhdGUgY3VycmVudCBzdGVwIHJlcXVpcmVtZW50c1xuICAgKi9cbiAgdmFsaWRhdGVTdGVwKCkge1xuICAgIGNvbnN0IGNoZWNrYm94ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudmFsaWRhdGlvbi1jaGVja2JveCcpO1xuICAgIGNvbnN0IGFsbENoZWNrZWQgPSBBcnJheS5mcm9tKGNoZWNrYm94ZXMpLmV2ZXJ5KGNiID0+IGNiLmNoZWNrZWQpO1xuICAgIGNvbnN0IGNvbnRpbnVlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnZhbGlkYXRlLXN0ZXAnKTtcbiAgICBcbiAgICBpZiAoY29udGludWVCdG4pIHtcbiAgICAgIGNvbnRpbnVlQnRuLmRpc2FibGVkID0gIWFsbENoZWNrZWQ7XG4gICAgICBjb250aW51ZUJ0bi5jbGFzc0xpc3QudG9nZ2xlKCdidG4tLXByaW1hcnknLCBhbGxDaGVja2VkKTtcbiAgICAgIGNvbnRpbnVlQnRuLmNsYXNzTGlzdC50b2dnbGUoJ2J0bi0tc2Vjb25kYXJ5JywgIWFsbENoZWNrZWQpO1xuICAgICAgXG4gICAgICBpZiAoYWxsQ2hlY2tlZCkge1xuICAgICAgICBjb250aW51ZUJ0bi5jbGFzc0xpc3QuYWRkKCdwdWxzZS1nZW50bGUnKTtcbiAgICAgICAgLy8gVXNlIENTUyB0aW1pbmcgdG9rZW5zIGZvciBhbmltYXRpb25zXG4gICAgICAgIGNvbnN0IGR1cmF0aW9uID0gYW5pbWF0aW9uQnJpZGdlLmdldFRpbWluZygnc2xvdycpICogNjtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiBjb250aW51ZUJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdwdWxzZS1nZW50bGUnKSwgZHVyYXRpb24pO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBVcGRhdGUgdmFsaWRhdGlvbiBwcm9ncmVzc1xuICAgIGNvbnN0IGNvbXBsZXRlZENvdW50ID0gQXJyYXkuZnJvbShjaGVja2JveGVzKS5maWx0ZXIoY2IgPT4gY2IuY2hlY2tlZCkubGVuZ3RoO1xuICAgIGNvbnN0IHRvdGFsQ291bnQgPSBjaGVja2JveGVzLmxlbmd0aDtcbiAgICBcbiAgICBpZiAodG90YWxDb3VudCA+IDApIHtcbiAgICAgIGNvbnN0IHByb2dyZXNzVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy52YWxpZGF0aW9uLXByb2dyZXNzLXRleHQnKTtcbiAgICAgIGlmIChwcm9ncmVzc1RleHQpIHtcbiAgICAgICAgcHJvZ3Jlc3NUZXh0LnRleHRDb250ZW50ID0gYCR7Y29tcGxldGVkQ291bnR9LyR7dG90YWxDb3VudH0gY29tcGxldGVkYDtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgdGhpcy5lbWl0KCd0dXRvcmlhbDpzdGVwVmFsaWRhdGVkJywgeyBcbiAgICAgIGFsbENoZWNrZWQsIFxuICAgICAgY29tcGxldGVkQ291bnQsIFxuICAgICAgdG90YWxDb3VudCBcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb21wbGV0ZSBjdXJyZW50IHN0ZXBcbiAgICovXG4gIGFzeW5jIGNvbXBsZXRlU3RlcCgpIHtcbiAgICAvLyBNYXJrIGN1cnJlbnQgc3RlcCBhcyBjb21wbGV0ZWRcbiAgICB0aGlzLnByb2dyZXNzRGF0YS5jb21wbGV0ZWRTdGVwcyA9IHRoaXMucHJvZ3Jlc3NEYXRhLmNvbXBsZXRlZFN0ZXBzIHx8IFtdO1xuICAgIGlmICghdGhpcy5wcm9ncmVzc0RhdGEuY29tcGxldGVkU3RlcHMuaW5jbHVkZXModGhpcy5jdXJyZW50U3RlcCkpIHtcbiAgICAgIHRoaXMucHJvZ3Jlc3NEYXRhLmNvbXBsZXRlZFN0ZXBzLnB1c2godGhpcy5jdXJyZW50U3RlcCk7XG4gICAgfVxuICAgIFxuICAgIHRoaXMuc2F2ZVByb2dyZXNzKCk7XG4gICAgdGhpcy51cGRhdGVQcm9ncmVzc0Rpc3BsYXkoKTtcbiAgICBcbiAgICAvLyBTaG93IGNvbXBsZXRpb24gYW5pbWF0aW9uXG4gICAgYXdhaXQgdGhpcy5zaG93U3RlcENvbXBsZXRpb25BbmltYXRpb24oKTtcbiAgICBcbiAgICB0aGlzLmVtaXQoJ3R1dG9yaWFsOnN0ZXBDb21wbGV0ZWQnLCB7IFxuICAgICAgc3RlcDogdGhpcy5jdXJyZW50U3RlcCwgXG4gICAgICB0dXRvcmlhbElkOiB0aGlzLnR1dG9yaWFsSWQgXG4gICAgfSk7XG4gICAgXG4gICAgLy8gTmF2aWdhdGUgdG8gbmV4dCBzdGVwXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLm5hdmlnYXRlVG9OZXh0U3RlcCgpO1xuICAgIH0sIDIwMDApO1xuICB9XG5cbiAgLyoqXG4gICAqIFNob3cgc3RlcCBjb21wbGV0aW9uIGFuaW1hdGlvblxuICAgKi9cbiAgYXN5bmMgc2hvd1N0ZXBDb21wbGV0aW9uQW5pbWF0aW9uKCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgY29uc3QgY2VsZWJyYXRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIGNlbGVicmF0aW9uLmNsYXNzTmFtZSA9ICdmaXhlZCBpbnNldC0wIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHotNTAgcG9pbnRlci1ldmVudHMtbm9uZSc7XG4gICAgICBjZWxlYnJhdGlvbi5pbm5lckhUTUwgPSBgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJiZy1ncmVlbi01MDAgdGV4dC13aGl0ZSBwLTYgcm91bmRlZC1sZyBzaGFkb3ctbGcgdHJhbnNmb3JtIHNjYWxlLTAgdHJhbnNpdGlvbi10cmFuc2Zvcm0gZHVyYXRpb24tNTAwXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICA8c3ZnIGNsYXNzPVwidy04IGgtOCBtci0zXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIj5cbiAgICAgICAgICAgICAgPHBhdGggZD1cIk05IDEybDIgMiA0LTRtNiAyYTkgOSAwIDExLTE4IDAgOSA5IDAgMDExOCAwelwiLz5cbiAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgPGgzIGNsYXNzPVwiZm9udC1ib2xkIHRleHQtbGdcIj5TdGVwIENvbXBsZXRlZCE8L2gzPlxuICAgICAgICAgICAgICA8cCBjbGFzcz1cInRleHQtZ3JlZW4tMTAwXCI+R3JlYXQgam9iISBNb3ZpbmcgdG8gdGhlIG5leHQgc3RlcC4uLjwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGA7XG4gICAgICBcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY2VsZWJyYXRpb24pO1xuICAgICAgXG4gICAgICAvLyBUcmlnZ2VyIGFuaW1hdGlvblxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGNlbGVicmF0aW9uLnF1ZXJ5U2VsZWN0b3IoJ2RpdicpLmNsYXNzTGlzdC5hZGQoJ3NjYWxlLTEwMCcpO1xuICAgICAgfSwgMTAwKTtcbiAgICAgIFxuICAgICAgLy8gUmVtb3ZlIGFmdGVyIGFuaW1hdGlvblxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGNlbGVicmF0aW9uLnJlbW92ZSgpO1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9LCAzMDAwKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBOYXZpZ2F0ZSB0byBuZXh0IHN0ZXAgb3IgY29tcGxldGlvblxuICAgKi9cbiAgbmF2aWdhdGVUb05leHRTdGVwKCkge1xuICAgIC8vIExvb2sgZm9yIG5leHQgc3RlcCBidXR0b25zIHdpdGggYW55IGhyZWYgZm9ybWF0IChhYnNvbHV0ZSwgcmVsYXRpdmUsIGV0Yy4pXG4gICAgY29uc3QgbmV4dFN0ZXBCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnRuLS1wcmltYXJ5W2hyZWZdJykgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2FbaHJlZio9XCJOZXh0OlwiXScpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2FbaHJlZl06aGFzLXRleHQoXCJOZXh0OlwiKScpO1xuICAgIFxuICAgIGlmIChuZXh0U3RlcEJ0biAmJiBuZXh0U3RlcEJ0bi50ZXh0Q29udGVudC5pbmNsdWRlcygnTmV4dDonKSkge1xuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBuZXh0U3RlcEJ0bi5ocmVmO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNob3dUdXRvcmlhbENvbXBsZXRpb25Nb2RhbCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93IHR1dG9yaWFsIGNvbXBsZXRpb24gbW9kYWxcbiAgICovXG4gIHNob3dUdXRvcmlhbENvbXBsZXRpb25Nb2RhbCgpIHtcbiAgICB0aGlzLnNob3dOb3RpZmljYXRpb24oJ1R1dG9yaWFsIGNvbXBsZXRlZCEgXHVEODNDXHVERjg5JywgJ3N1Y2Nlc3MnLCA1MDAwKTtcbiAgICB0aGlzLmVtaXQoJ3R1dG9yaWFsOmNvbXBsZXRlZCcsIHsgdHV0b3JpYWxJZDogdGhpcy50dXRvcmlhbElkIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgY29kZSBibG9jayBjb3B5IGZ1bmN0aW9uYWxpdHlcbiAgICogTm90ZTogQ29weSBmdW5jdGlvbmFsaXR5IGlzIG5vdyBoYW5kbGVkIGJ5IHRoZSBBcnRpY2xlQ2xpcGJvYXJkIGNvbXBvbmVudFxuICAgKi9cbiAgaW5pdGlhbGl6ZUNvZGVCbG9ja3MoKSB7XG4gICAgLy8gTGlzdGVuIGZvciBjb3B5IGV2ZW50cyBmcm9tIEFydGljbGVDbGlwYm9hcmQgY29tcG9uZW50XG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGRvY3VtZW50LCAnY29weS1zdWNjZXNzJywgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLmVtaXQoJ3R1dG9yaWFsOmNvZGVDb3BpZWQnLCB7IFxuICAgICAgICBjb2RlVGV4dDogZXZlbnQuZGV0YWlsLnRleHQuc3Vic3RyaW5nKDAsIDUwKSArICcuLi4nIFxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBjb2xsYXBzaWJsZSBzZWN0aW9uc1xuICAgKi9cbiAgaW5pdGlhbGl6ZUNvbGxhcHNpYmxlU2VjdGlvbnMoKSB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtdG9nZ2xlPVwiY29sbGFwc2VcIl0nKS5mb3JFYWNoKHRyaWdnZXIgPT4ge1xuICAgICAgY29uc3QgdGFyZ2V0SWQgPSB0cmlnZ2VyLmRhdGFzZXQudGFyZ2V0O1xuICAgICAgY29uc3QgdGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXRJZCk7XG4gICAgICBcbiAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgLy8gU2V0IGluaXRpYWwgc3RhdGVcbiAgICAgICAgY29uc3QgaXNDb2xsYXBzZWQgPSB0cmlnZ2VyLmNsYXNzTGlzdC5jb250YWlucygnY29sbGFwc2VkJyk7XG4gICAgICAgIHRhcmdldC5zdHlsZS5kaXNwbGF5ID0gaXNDb2xsYXBzZWQgPyAnbm9uZScgOiAnYmxvY2snO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFRvZ2dsZSBjb2xsYXBzaWJsZSBzZWN0aW9uXG4gICAqL1xuICB0b2dnbGVDb2xsYXBzZShldmVudCkge1xuICAgIGNvbnN0IHRyaWdnZXIgPSBldmVudC5jdXJyZW50VGFyZ2V0O1xuICAgIGNvbnN0IHRhcmdldElkID0gdHJpZ2dlci5kYXRhc2V0LnRhcmdldDtcbiAgICBjb25zdCB0YXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldElkKTtcbiAgICBcbiAgICBpZiAoIXRhcmdldCkgcmV0dXJuO1xuICAgIFxuICAgIGNvbnN0IGlzQ29sbGFwc2VkID0gdHJpZ2dlci5jbGFzc0xpc3QuY29udGFpbnMoJ2NvbGxhcHNlZCcpO1xuICAgIFxuICAgIGlmIChpc0NvbGxhcHNlZCkge1xuICAgICAgdGFyZ2V0LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgdHJpZ2dlci5jbGFzc0xpc3QucmVtb3ZlKCdjb2xsYXBzZWQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGFyZ2V0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICB0cmlnZ2VyLmNsYXNzTGlzdC5hZGQoJ2NvbGxhcHNlZCcpO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLmVtaXQoJ3R1dG9yaWFsOnNlY3Rpb25Ub2dnbGVkJywgeyB0YXJnZXRJZCwgaXNDb2xsYXBzZWQ6ICFpc0NvbGxhcHNlZCB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCBzY3JvbGwgdHJhY2tpbmcgd2l0aCBJbnRlcnNlY3Rpb25PYnNlcnZlclxuICAgKi9cbiAgc2V0dXBTY3JvbGxUcmFja2luZygpIHtcbiAgICBpZiAoISgnSW50ZXJzZWN0aW9uT2JzZXJ2ZXInIGluIHdpbmRvdykpIHJldHVybjtcbiAgICBcbiAgICB0aGlzLmludGVyc2VjdGlvbk9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKChlbnRyaWVzKSA9PiB7XG4gICAgICBlbnRyaWVzLmZvckVhY2goZW50cnkgPT4ge1xuICAgICAgICBpZiAoZW50cnkuaXNJbnRlcnNlY3RpbmcpIHtcbiAgICAgICAgICBjb25zdCBzZWN0aW9uSWQgPSBlbnRyeS50YXJnZXQuaWQ7XG4gICAgICAgICAgaWYgKHNlY3Rpb25JZCkge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCd0dXRvcmlhbDpzZWN0aW9uVmlld2VkJywgeyBzZWN0aW9uSWQgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LCB7XG4gICAgICB0aHJlc2hvbGQ6IDAuNSxcbiAgICAgIHJvb3RNYXJnaW46ICctMjAlIDBweCAtMjAlIDBweCdcbiAgICB9KTtcbiAgICBcbiAgICAvLyBPYnNlcnZlIG1haW4gY29udGVudCBzZWN0aW9uc1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2gyLCBoMywgLnR1dG9yaWFsLXNlY3Rpb24nKS5mb3JFYWNoKHNlY3Rpb24gPT4ge1xuICAgICAgaWYgKHNlY3Rpb24uaWQpIHtcbiAgICAgICAgdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlci5vYnNlcnZlKHNlY3Rpb24pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIHNtb290aCBzY3JvbGxpbmcgZm9yIHR1dG9yaWFsIGFuY2hvcnNcbiAgICovXG4gIHNldHVwU21vb3RoU2Nyb2xsaW5nKCkge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2FbaHJlZl49XCIjXCJdJykuZm9yRWFjaChhbmNob3IgPT4ge1xuICAgICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoYW5jaG9yLCAnY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSk7XG4gICAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgICB0YXJnZXQuc2Nyb2xsSW50b1ZpZXcoe1xuICAgICAgICAgICAgYmVoYXZpb3I6ICdzbW9vdGgnLFxuICAgICAgICAgICAgYmxvY2s6ICdzdGFydCdcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU2hvdyBzYXZlIGNvbmZpcm1hdGlvbiBmZWVkYmFja1xuICAgKi9cbiAgc2hvd1NhdmVDb25maXJtYXRpb24oKSB7XG4gICAgY29uc3Qgc2F2ZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWFjdGlvbj1cInNhdmUtcHJvZ3Jlc3NcIl0nKTtcbiAgICBpZiAoc2F2ZUJ0bikge1xuICAgICAgY29uc3Qgb3JpZ2luYWxUZXh0ID0gc2F2ZUJ0bi5pbm5lckhUTUw7XG4gICAgICBzYXZlQnRuLmlubmVySFRNTCA9IGBcbiAgICAgICAgPHN2ZyBjbGFzcz1cImJ0bl9faWNvblwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCI+XG4gICAgICAgICAgPHBhdGggZD1cIk05IDEybDIgMiA0LTRtNiAyYTkgOSAwIDExLTE4IDAgOSA5IDAgMDExOCAwelwiLz5cbiAgICAgICAgPC9zdmc+XG4gICAgICAgIFNhdmVkIVxuICAgICAgYDtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBzYXZlQnRuLmlubmVySFRNTCA9IG9yaWdpbmFsVGV4dDtcbiAgICAgIH0sIDIwMDApO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLnNob3dOb3RpZmljYXRpb24oJ1Byb2dyZXNzIHNhdmVkIHN1Y2Nlc3NmdWxseSEnLCAnc3VjY2VzcycpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNob3cgbm90aWZpY2F0aW9uIHRvIHVzZXJcbiAgICovXG4gIHNob3dOb3RpZmljYXRpb24obWVzc2FnZSwgdHlwZSA9ICdpbmZvJywgZHVyYXRpb24gPSAzMDAwKSB7XG4gICAgaWYgKHdpbmRvdy5NaWxvVVggJiYgd2luZG93Lk1pbG9VWC5zaG93Tm90aWZpY2F0aW9uKSB7XG4gICAgICB3aW5kb3cuTWlsb1VYLnNob3dOb3RpZmljYXRpb24obWVzc2FnZSwgdHlwZSwgZHVyYXRpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBGYWxsYmFjayB0byBjb25zb2xlIHdoZW4gTm90aWZpY2F0aW9uTWFuYWdlciBpcyB1bmF2YWlsYWJsZVxuICAgICAgLy8gKHJlZHVjZWQgdmVyYm9zaXR5KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDb21wb25lbnQgY2xlYW51cFxuICAgKi9cbiAgb25EZXN0cm95KCkge1xuICAgIGlmICh0aGlzLmF1dG9TYXZlSW50ZXJ2YWwpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5hdXRvU2F2ZUludGVydmFsKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuaW50ZXJzZWN0aW9uT2JzZXJ2ZXIpIHtcbiAgICAgIHRoaXMuaW50ZXJzZWN0aW9uT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZygnVHV0b3JpYWxNYW5hZ2VyOiBDb21wb25lbnQgZGVzdHJveWVkIGFuZCBjbGVhbmVkIHVwJyk7XG4gIH1cbn1cblxuLy8gQXV0by1yZWdpc3RlciBjb21wb25lbnRcbmltcG9ydCBDb21wb25lbnRNYW5hZ2VyIGZyb20gJy4uLy4uL2NvcmUvQ29tcG9uZW50TWFuYWdlci5qcyc7XG5Db21wb25lbnRNYW5hZ2VyLnJlZ2lzdGVyKCd0dXRvcmlhbC1tYW5hZ2VyJywgVHV0b3JpYWxNYW5hZ2VyKTsiLCAiLyoqXG4gKiBQZXJmb3JtYW5jZSBPcHRpbWl6ZXIgQ29tcG9uZW50XG4gKiBIYW5kbGVzIGxhenkgbG9hZGluZywgcGVyZm9ybWFuY2UgbW9uaXRvcmluZywgYWNjZXNzaWJpbGl0eSBlbmhhbmNlbWVudHMsIGFuZCBVWCBvcHRpbWl6YXRpb25zXG4gKi9cblxuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vY29yZS9Db21wb25lbnQuanMnO1xuaW1wb3J0IHsgYW5pbWF0aW9uQnJpZGdlIH0gZnJvbSAnLi4vLi4vY29yZS9BbmltYXRpb25CcmlkZ2UuanMnO1xuaW1wb3J0IENvbXBvbmVudE1hbmFnZXIgZnJvbSAnLi4vLi4vY29yZS9Db21wb25lbnRNYW5hZ2VyLmpzJztcbmltcG9ydCB7IGRlYm91bmNlLCB0aHJvdHRsZSB9IGZyb20gJy4uLy4uL3V0aWxzL2RvbS5qcyc7XG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuLi8uLi91dGlscy9Mb2dnZXIuanMnO1xuXG5jb25zdCBsb2cgPSBsb2dnZXIuY29tcG9uZW50KCdQZXJmb3JtYW5jZU9wdGltaXplcicpO1xuXG5leHBvcnQgY2xhc3MgUGVyZm9ybWFuY2VPcHRpbWl6ZXIgZXh0ZW5kcyBDb21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcihjb25maWcgPSB7fSkge1xuICAgIHN1cGVyKHtcbiAgICAgIG5hbWU6ICdwZXJmb3JtYW5jZS1vcHRpbWl6ZXInLFxuICAgICAgc2VsZWN0b3I6IGNvbmZpZy5zZWxlY3RvciB8fCAnYm9keScsXG4gICAgICAuLi5jb25maWdcbiAgICB9KTtcbiAgICBcbiAgICB0aGlzLmxhenlPYnNlcnZlciA9IG51bGw7XG4gICAgdGhpcy5wZXJmb3JtYW5jZU9ic2VydmVycyA9IFtdO1xuICAgIHRoaXMuaXNEZWJ1Z01vZGUgPSBjb25maWcuZGVidWdNb2RlIHx8IHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSA9PT0gJ2xvY2FsaG9zdCc7XG4gICAgdGhpcy5tZW1vcnlDaGVja0ludGVydmFsID0gbnVsbDtcbiAgICBcbiAgICAvLyBUb3VjaCBnZXN0dXJlIHRyYWNraW5nXG4gICAgdGhpcy50b3VjaFN0YXJ0WCA9IDA7XG4gICAgdGhpcy50b3VjaFN0YXJ0WSA9IDA7XG4gIH1cblxuICBhc3luYyBvbkluaXQoKSB7XG4gICAgaWYgKCF0aGlzLmVsZW1lbnQpIHtcbiAgICAgIGxvZy53YXJuKCdUYXJnZXQgZWxlbWVudCBub3QgZm91bmQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJbml0aWFsaXplIGFsbCBvcHRpbWl6YXRpb25zXG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgdGhpcy5zZXR1cExhenlMb2FkaW5nKCksXG4gICAgICB0aGlzLnNldHVwTG9hZGluZ1N0YXRlcygpLFxuICAgICAgdGhpcy5zZXR1cFBlcmZvcm1hbmNlTW9uaXRvcmluZygpLFxuICAgICAgdGhpcy5zZXR1cEExMXlFbmhhbmNlbWVudHMoKSxcbiAgICAgIHRoaXMuc2V0dXBNb2JpbGVPcHRpbWl6YXRpb25zKCksXG4gICAgICB0aGlzLnNldHVwVVhVdGlsaXRpZXMoKVxuICAgIF0pO1xuICAgIFxuICAgIGxvZy5kZWJ1ZygnQWxsIG9wdGltaXphdGlvbnMgaW5pdGlhbGl6ZWQnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCBsYXp5IGxvYWRpbmcgZm9yIGltYWdlcyBhbmQgY29tcG9uZW50c1xuICAgKi9cbiAgYXN5bmMgc2V0dXBMYXp5TG9hZGluZygpIHtcbiAgICBpZiAoISgnSW50ZXJzZWN0aW9uT2JzZXJ2ZXInIGluIHdpbmRvdykpIHtcbiAgICAgIGxvZy53YXJuKCdJbnRlcnNlY3Rpb25PYnNlcnZlciBub3Qgc3VwcG9ydGVkLCBza2lwcGluZyBsYXp5IGxvYWRpbmcnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmxhenlPYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcigoZW50cmllcykgPT4ge1xuICAgICAgZW50cmllcy5mb3JFYWNoKGVudHJ5ID0+IHtcbiAgICAgICAgaWYgKGVudHJ5LmlzSW50ZXJzZWN0aW5nKSB7XG4gICAgICAgICAgdGhpcy5oYW5kbGVMYXp5TG9hZChlbnRyeS50YXJnZXQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LCB7IFxuICAgICAgcm9vdE1hcmdpbjogJzEwMHB4JyxcbiAgICAgIHRocmVzaG9sZDogMC4xXG4gICAgfSk7XG5cbiAgICAvLyBPYnNlcnZlIGFsbCBsYXp5IGxvYWQgY2FuZGlkYXRlc1xuICAgIGNvbnN0IGxhenlFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXNyY10sIFtkYXRhLWxhenktY29tcG9uZW50XScpO1xuICAgIGxhenlFbGVtZW50cy5mb3JFYWNoKGVsID0+IHRoaXMubGF6eU9ic2VydmVyLm9ic2VydmUoZWwpKTtcbiAgICBcbiAgICBsb2cuZGVidWcoYE9ic2VydmluZyAke2xhenlFbGVtZW50cy5sZW5ndGh9IGxhenkgbG9hZCBlbGVtZW50c2ApO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBsYXp5IGxvYWRpbmcgZm9yIGEgc3BlY2lmaWMgZWxlbWVudFxuICAgKi9cbiAgYXN5bmMgaGFuZGxlTGF6eUxvYWQoZWxlbWVudCkge1xuICAgIHRyeSB7XG4gICAgICAvLyBMYXp5IGxvYWQgaW1hZ2VzXG4gICAgICBpZiAoZWxlbWVudC5kYXRhc2V0LnNyYykge1xuICAgICAgICBlbGVtZW50LnNyYyA9IGVsZW1lbnQuZGF0YXNldC5zcmM7XG4gICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXNyYycpO1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2xhenktbG9hZGVkJyk7XG4gICAgICAgIHRoaXMuZW1pdCgncGVyZm9ybWFuY2U6aW1hZ2VMb2FkZWQnLCB7IGVsZW1lbnQgfSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIExhenkgbG9hZCBjb21wb25lbnRzXG4gICAgICBpZiAoZWxlbWVudC5kYXRhc2V0LmxhenlDb21wb25lbnQpIHtcbiAgICAgICAgY29uc3QgY29tcG9uZW50TmFtZSA9IGVsZW1lbnQuZGF0YXNldC5sYXp5Q29tcG9uZW50O1xuICAgICAgICBhd2FpdCB0aGlzLmxvYWRMYXp5Q29tcG9uZW50KGNvbXBvbmVudE5hbWUsIGVsZW1lbnQpO1xuICAgICAgfVxuICAgICAgXG4gICAgICB0aGlzLmxhenlPYnNlcnZlci51bm9ic2VydmUoZWxlbWVudCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZy5lcnJvcignTGF6eSBsb2FkaW5nIGZhaWxlZDonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIExvYWQgYSBsYXp5IGNvbXBvbmVudFxuICAgKi9cbiAgYXN5bmMgbG9hZExhenlDb21wb25lbnQoY29tcG9uZW50TmFtZSwgZWxlbWVudCkge1xuICAgIGNvbnN0IGNvbXBvbmVudE1hcCA9IHtcbiAgICAgICdjaGF0JzogKCkgPT4gaW1wb3J0KCcuLi9jaGF0L2luZGV4LmpzJylcbiAgICAgIC8vICdzZWFyY2gnOiB0ZW1wb3JhcmlseSBkaXNhYmxlZFxuICAgIH07XG4gICAgXG4gICAgY29uc3QgbG9hZGVyID0gY29tcG9uZW50TWFwW2NvbXBvbmVudE5hbWVdO1xuICAgIGlmIChsb2FkZXIpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGxvYWRlcigpO1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2xvYWRlZCcpO1xuICAgICAgICB0aGlzLmVtaXQoJ3BlcmZvcm1hbmNlOmNvbXBvbmVudExvYWRlZCcsIHsgY29tcG9uZW50TmFtZSwgZWxlbWVudCB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGxvZy5lcnJvcihgRmFpbGVkIHRvIGxvYWQgY29tcG9uZW50ICR7Y29tcG9uZW50TmFtZX06YCwgZXJyb3IpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCBlbmhhbmNlZCBsb2FkaW5nIHN0YXRlc1xuICAgKi9cbiAgc2V0dXBMb2FkaW5nU3RhdGVzKCkge1xuICAgIGNvbnN0IGNvbnRlbnRBcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FydGljbGVDb250ZW50Jyk7XG4gICAgaWYgKGNvbnRlbnRBcmVhICYmICFjb250ZW50QXJlYS5pbm5lckhUTUwudHJpbSgpKSB7XG4gICAgICB0aGlzLnNob3dDb250ZW50U2tlbGV0b24oY29udGVudEFyZWEpO1xuICAgIH1cbiAgICBcbiAgICAvLyBOb3RlOiBQYWdlIHRyYW5zaXRpb25zIGRpc2FibGVkIGZvciBzdGF0aWMgc2l0ZXNcbiAgICBsb2cuZGVidWcoJ0xvYWRpbmcgc3RhdGVzIGNvbmZpZ3VyZWQnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93IGNvbnRlbnQgc2tlbGV0b24gd2hpbGUgbG9hZGluZ1xuICAgKi9cbiAgc2hvd0NvbnRlbnRTa2VsZXRvbihjb250YWluZXIpIHtcbiAgICBjb25zdCBza2VsZXRvbiA9IGBcbiAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50LXNrZWxldG9uIHNwYWNlLXktNFwiIGFyaWEtbGFiZWw9XCJMb2FkaW5nIGNvbnRlbnRcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImgtOCBiZy1ncmF5LTIwMCByb3VuZGVkIGFuaW1hdGUtcHVsc2VcIj48L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInNwYWNlLXktMlwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJoLTQgYmctZ3JheS0yMDAgcm91bmRlZCBhbmltYXRlLXB1bHNlXCI+PC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImgtNCBiZy1ncmF5LTIwMCByb3VuZGVkIHctNS82IGFuaW1hdGUtcHVsc2VcIj48L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiaC00IGJnLWdyYXktMjAwIHJvdW5kZWQgdy00LzYgYW5pbWF0ZS1wdWxzZVwiPjwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImgtNiBiZy1ncmF5LTIwMCByb3VuZGVkIHctMy80IGFuaW1hdGUtcHVsc2VcIj48L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gICAgY29udGFpbmVyLmlubmVySFRNTCA9IHNrZWxldG9uO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIHBlcmZvcm1hbmNlIG1vbml0b3JpbmdcbiAgICovXG4gIHNldHVwUGVyZm9ybWFuY2VNb25pdG9yaW5nKCkge1xuICAgIGlmICghKCdQZXJmb3JtYW5jZU9ic2VydmVyJyBpbiB3aW5kb3cpKSB7XG4gICAgICBsb2cud2FybignUGVyZm9ybWFuY2VPYnNlcnZlciBub3Qgc3VwcG9ydGVkJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gTGFyZ2VzdCBDb250ZW50ZnVsIFBhaW50XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGxjcE9ic2VydmVyID0gbmV3IFBlcmZvcm1hbmNlT2JzZXJ2ZXIoKGVudHJ5TGlzdCkgPT4ge1xuICAgICAgICBjb25zdCBlbnRyaWVzID0gZW50cnlMaXN0LmdldEVudHJpZXMoKTtcbiAgICAgICAgY29uc3QgbGFzdEVudHJ5ID0gZW50cmllc1tlbnRyaWVzLmxlbmd0aCAtIDFdO1xuICAgICAgICB0aGlzLmVtaXQoJ3BlcmZvcm1hbmNlOmxjcCcsIHsgdmFsdWU6IGxhc3RFbnRyeS5zdGFydFRpbWUgfSk7XG4gICAgICAgIGxvZ2dlci5wZXJmb3JtYW5jZSgnTENQJywgbGFzdEVudHJ5LnN0YXJ0VGltZSk7XG4gICAgICB9KTtcbiAgICAgIGxjcE9ic2VydmVyLm9ic2VydmUoe2VudHJ5VHlwZXM6IFsnbGFyZ2VzdC1jb250ZW50ZnVsLXBhaW50J119KTtcbiAgICAgIHRoaXMucGVyZm9ybWFuY2VPYnNlcnZlcnMucHVzaChsY3BPYnNlcnZlcik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZy53YXJuKCdMQ1Agb2JzZXJ2ZXIgZmFpbGVkOicsIGVycm9yKTtcbiAgICB9XG5cbiAgICAvLyBGaXJzdCBJbnB1dCBEZWxheVxuICAgIHRyeSB7XG4gICAgICBjb25zdCBmaWRPYnNlcnZlciA9IG5ldyBQZXJmb3JtYW5jZU9ic2VydmVyKChlbnRyeUxpc3QpID0+IHtcbiAgICAgICAgY29uc3QgZW50cmllcyA9IGVudHJ5TGlzdC5nZXRFbnRyaWVzKCk7XG4gICAgICAgIGVudHJpZXMuZm9yRWFjaChlbnRyeSA9PiB7XG4gICAgICAgICAgY29uc3QgZmlkID0gZW50cnkucHJvY2Vzc2luZ1N0YXJ0IC0gZW50cnkuc3RhcnRUaW1lO1xuICAgICAgICAgIHRoaXMuZW1pdCgncGVyZm9ybWFuY2U6ZmlkJywgeyB2YWx1ZTogZmlkIH0pO1xuICAgICAgICAgIGxvZ2dlci5wZXJmb3JtYW5jZSgnRklEJywgZmlkKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIGZpZE9ic2VydmVyLm9ic2VydmUoe2VudHJ5VHlwZXM6IFsnZmlyc3QtaW5wdXQnXX0pO1xuICAgICAgdGhpcy5wZXJmb3JtYW5jZU9ic2VydmVycy5wdXNoKGZpZE9ic2VydmVyKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nLndhcm4oJ0ZJRCBvYnNlcnZlciBmYWlsZWQ6JywgZXJyb3IpO1xuICAgIH1cblxuICAgIC8vIE1lbW9yeSBtb25pdG9yaW5nIChkZWJ1ZyBtb2RlIG9ubHkpXG4gICAgaWYgKHRoaXMuaXNEZWJ1Z01vZGUgJiYgJ21lbW9yeScgaW4gcGVyZm9ybWFuY2UpIHtcbiAgICAgIHRoaXMubWVtb3J5Q2hlY2tJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgY29uc3QgbWVtb3J5ID0gcGVyZm9ybWFuY2UubWVtb3J5O1xuICAgICAgICBjb25zdCBtZW1vcnlJbmZvID0ge1xuICAgICAgICAgIHVzZWQ6IE1hdGgucm91bmQobWVtb3J5LnVzZWRKU0hlYXBTaXplIC8gMTA0ODU3NikgKyAnIE1CJyxcbiAgICAgICAgICB0b3RhbDogTWF0aC5yb3VuZChtZW1vcnkudG90YWxKU0hlYXBTaXplIC8gMTA0ODU3NikgKyAnIE1CJ1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmVtaXQoJ3BlcmZvcm1hbmNlOm1lbW9yeScsIG1lbW9yeUluZm8pO1xuICAgICAgICBsb2dnZXIucGVyZm9ybWFuY2UoJ01lbW9yeScsIGAke21lbW9yeUluZm8udXNlZH0vJHttZW1vcnlJbmZvLnRvdGFsfWApO1xuICAgICAgfSwgMzAwMDApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCBhY2Nlc3NpYmlsaXR5IGVuaGFuY2VtZW50c1xuICAgKi9cbiAgc2V0dXBBMTF5RW5oYW5jZW1lbnRzKCkge1xuICAgIHRoaXMuc2V0dXBLZXlib2FyZE5hdmlnYXRpb24oKTtcbiAgICB0aGlzLnNldHVwRm9jdXNNYW5hZ2VtZW50KCk7XG4gICAgdGhpcy5zZXR1cFNjcmVlblJlYWRlck9wdGltaXphdGlvbnMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbmhhbmNlZCBrZXlib2FyZCBuYXZpZ2F0aW9uXG4gICAqL1xuICBzZXR1cEtleWJvYXJkTmF2aWdhdGlvbigpIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcbiAgICAgIC8vIE5hdmlnYXRlIHdpdGggYXJyb3cga2V5cyBpbiBzaWRlYmFyXG4gICAgICBpZiAoZS50YXJnZXQuY2xvc2VzdCgnI2xpbmtUcmVlJykpIHtcbiAgICAgICAgaWYgKGUua2V5ID09PSAnQXJyb3dEb3duJyB8fCBlLmtleSA9PT0gJ0Fycm93VXAnKSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IGUua2V5ID09PSAnQXJyb3dEb3duJyA/IDEgOiAtMTtcbiAgICAgICAgICB0aGlzLm5hdmlnYXRlU2lkZWJhcihkaXJlY3Rpb24pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFF1aWNrIG5hdmlnYXRpb24gc2hvcnRjdXRzXG4gICAgICBpZiAoZS5hbHRLZXkpIHtcbiAgICAgICAgc3dpdGNoKGUua2V5KSB7XG4gICAgICAgICAgY2FzZSAncyc6XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoSW5wdXQnKT8uZm9jdXMoKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnYTExeTpzZWFyY2hGb2N1c2VkJyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICduJzpcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXh0LWxpbmsnKT8uZm9jdXMoKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnYTExeTpuZXh0Rm9jdXNlZCcpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAncCc6XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJldi1saW5rJyk/LmZvY3VzKCk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2ExMXk6cHJldkZvY3VzZWQnKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogTmF2aWdhdGUgc2lkZWJhciB3aXRoIGtleWJvYXJkXG4gICAqL1xuICBuYXZpZ2F0ZVNpZGViYXIoZGlyZWN0aW9uKSB7XG4gICAgY29uc3Qgc2lkZWJhckxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI2xpbmtUcmVlIGEnKTtcbiAgICBjb25zdCBjdXJyZW50SW5kZXggPSBBcnJheS5mcm9tKHNpZGViYXJMaW5rcykuaW5kZXhPZihkb2N1bWVudC5hY3RpdmVFbGVtZW50KTtcbiAgICBjb25zdCBuZXh0SW5kZXggPSBNYXRoLm1heCgwLCBNYXRoLm1pbihzaWRlYmFyTGlua3MubGVuZ3RoIC0gMSwgY3VycmVudEluZGV4ICsgZGlyZWN0aW9uKSk7XG4gICAgc2lkZWJhckxpbmtzW25leHRJbmRleF0/LmZvY3VzKCk7XG4gIH1cblxuICAvKipcbiAgICogRm9jdXMgbWFuYWdlbWVudCBmb3IgbW9kYWxzIGFuZCBvdmVybGF5c1xuICAgKi9cbiAgc2V0dXBGb2N1c01hbmFnZW1lbnQoKSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XG4gICAgICBpZiAoZS5rZXkgPT09ICdUYWInKSB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsOm5vdCguaGlkZGVuKScpO1xuICAgICAgICBpZiAoYWN0aXZlTW9kYWwpIHtcbiAgICAgICAgICB0aGlzLnRyYXBGb2N1cyhlLCBhY3RpdmVNb2RhbCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFwIGZvY3VzIHdpdGhpbiBhIGNvbnRhaW5lclxuICAgKi9cbiAgdHJhcEZvY3VzKGUsIGNvbnRhaW5lcikge1xuICAgIGNvbnN0IGZvY3VzYWJsZUVsZW1lbnRzID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoXG4gICAgICAnYVtocmVmXSwgYnV0dG9uLCBpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYSwgW3RhYmluZGV4XTpub3QoW3RhYmluZGV4PVwiLTFcIl0pJ1xuICAgICk7XG4gICAgY29uc3QgZmlyc3RFbGVtZW50ID0gZm9jdXNhYmxlRWxlbWVudHNbMF07XG4gICAgY29uc3QgbGFzdEVsZW1lbnQgPSBmb2N1c2FibGVFbGVtZW50c1tmb2N1c2FibGVFbGVtZW50cy5sZW5ndGggLSAxXTtcblxuICAgIGlmIChlLnNoaWZ0S2V5ICYmIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IGZpcnN0RWxlbWVudCkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgbGFzdEVsZW1lbnQ/LmZvY3VzKCk7XG4gICAgfSBlbHNlIGlmICghZS5zaGlmdEtleSAmJiBkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSBsYXN0RWxlbWVudCkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZmlyc3RFbGVtZW50Py5mb2N1cygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTY3JlZW4gcmVhZGVyIG9wdGltaXphdGlvbnNcbiAgICovXG4gIHNldHVwU2NyZWVuUmVhZGVyT3B0aW1pemF0aW9ucygpIHtcbiAgICAvLyBDcmVhdGUgbGl2ZSByZWdpb24gZm9yIGFubm91bmNlbWVudHNcbiAgICBjb25zdCBhbm5vdW5jZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBhbm5vdW5jZXIuc2V0QXR0cmlidXRlKCdhcmlhLWxpdmUnLCAncG9saXRlJyk7XG4gICAgYW5ub3VuY2VyLnNldEF0dHJpYnV0ZSgnYXJpYS1hdG9taWMnLCAndHJ1ZScpO1xuICAgIGFubm91bmNlci5jbGFzc05hbWUgPSAnc3Itb25seSc7XG4gICAgYW5ub3VuY2VyLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICBhbm5vdW5jZXIuc3R5bGUubGVmdCA9ICctMTAwMDBweCc7XG4gICAgYW5ub3VuY2VyLnN0eWxlLndpZHRoID0gJzFweCc7XG4gICAgYW5ub3VuY2VyLnN0eWxlLmhlaWdodCA9ICcxcHgnO1xuICAgIGFubm91bmNlci5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYW5ub3VuY2VyKTtcblxuICAgIC8vIEdsb2JhbCBhbm5vdW5jZW1lbnQgZnVuY3Rpb25cbiAgICB3aW5kb3cuYW5ub3VuY2VUb1NjcmVlblJlYWRlciA9IChtZXNzYWdlKSA9PiB7XG4gICAgICBhbm5vdW5jZXIudGV4dENvbnRlbnQgPSBtZXNzYWdlO1xuICAgICAgdGhpcy5lbWl0KCdhMTF5OmFubm91bmNlZCcsIHsgbWVzc2FnZSB9KTtcbiAgICAgIGNvbnN0IGR1cmF0aW9uID0gYW5pbWF0aW9uQnJpZGdlLmdldFRpbWluZygnc2xvdycpICogMjtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4gYW5ub3VuY2VyLnRleHRDb250ZW50ID0gJycsIGR1cmF0aW9uKTtcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIE1vYmlsZSBvcHRpbWl6YXRpb25zXG4gICAqL1xuICBzZXR1cE1vYmlsZU9wdGltaXphdGlvbnMoKSB7XG4gICAgLy8gVG91Y2ggZ2VzdHVyZSBoYW5kbGluZ1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCAoZSkgPT4ge1xuICAgICAgdGhpcy50b3VjaFN0YXJ0WCA9IGUudG91Y2hlc1swXS5jbGllbnRYO1xuICAgICAgdGhpcy50b3VjaFN0YXJ0WSA9IGUudG91Y2hlc1swXS5jbGllbnRZO1xuICAgIH0sIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgKGUpID0+IHtcbiAgICAgIGNvbnN0IHRvdWNoRW5kWCA9IGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WDtcbiAgICAgIGNvbnN0IHRvdWNoRW5kWSA9IGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WTtcbiAgICAgIGNvbnN0IGRlbHRhWCA9IHRvdWNoRW5kWCAtIHRoaXMudG91Y2hTdGFydFg7XG4gICAgICBjb25zdCBkZWx0YVkgPSB0b3VjaEVuZFkgLSB0aGlzLnRvdWNoU3RhcnRZO1xuXG4gICAgICAvLyBTd2lwZSBnZXN0dXJlcyBmb3IgbmF2aWdhdGlvblxuICAgICAgaWYgKE1hdGguYWJzKGRlbHRhWCkgPiBNYXRoLmFicyhkZWx0YVkpICYmIE1hdGguYWJzKGRlbHRhWCkgPiA1MCkge1xuICAgICAgICBpZiAoZGVsdGFYID4gMCkge1xuICAgICAgICAgIC8vIFN3aXBlIHJpZ2h0IC0gZ28gdG8gcHJldmlvdXMgcGFnZVxuICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcmV2LWxpbmsnKT8uY2xpY2soKTtcbiAgICAgICAgICB0aGlzLmVtaXQoJ21vYmlsZTpzd2lwZVJpZ2h0Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gU3dpcGUgbGVmdCAtIGdvIHRvIG5leHQgcGFnZVxuICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXh0LWxpbmsnKT8uY2xpY2soKTtcbiAgICAgICAgICB0aGlzLmVtaXQoJ21vYmlsZTpzd2lwZUxlZnQnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcblxuICAgIC8vIFZpZXdwb3J0IGhlaWdodCBmaXggZm9yIG1vYmlsZSBicm93c2Vyc1xuICAgIGNvbnN0IHNldFZIID0gKCkgPT4ge1xuICAgICAgY29uc3QgdmggPSB3aW5kb3cuaW5uZXJIZWlnaHQgKiAwLjAxO1xuICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KCctLXZoJywgYCR7dmh9cHhgKTtcbiAgICB9O1xuICAgIFxuICAgIHNldFZIKCk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGRlYm91bmNlKHNldFZILCAxMDApKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignb3JpZW50YXRpb25jaGFuZ2UnLCAoKSA9PiB7XG4gICAgICBjb25zdCBkZWxheSA9IGFuaW1hdGlvbkJyaWRnZS5nZXRUaW1pbmcoJ2Zhc3QnKSAvIDI7XG4gICAgc2V0VGltZW91dChzZXRWSCwgZGVsYXkpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIFVYIHV0aWxpdGllc1xuICAgKi9cbiAgc2V0dXBVWFV0aWxpdGllcygpIHtcbiAgICAvLyBFbmhhbmNlZCBnbG9iYWwgVVggdXRpbGl0aWVzIChub3RpZmljYXRpb25zIG5vdyBoYW5kbGVkIGJ5IFRvYXN0IGNvbXBvbmVudClcbiAgICBpZiAoIXdpbmRvdy5NaWxvVVgpIHtcbiAgICAgIHdpbmRvdy5NaWxvVVggPSB7fTtcbiAgICB9XG4gICAgXG4gICAgLy8gT25seSBhZGQgdXRpbGl0aWVzIHRoYXQgYXJlbid0IGhhbmRsZWQgYnkgb3RoZXIgY29tcG9uZW50c1xuICAgIHdpbmRvdy5NaWxvVVguc21vb3RoU2Nyb2xsVG8gPSAoZWxlbWVudCwgb2Zmc2V0ID0gMCkgPT4ge1xuICAgICAgdGhpcy5zbW9vdGhTY3JvbGxUbyhlbGVtZW50LCBvZmZzZXQpO1xuICAgIH07XG4gIH1cblxuICAvLyBOb3RpZmljYXRpb24gc3lzdGVtIG1vdmVkIHRvIGRlZGljYXRlZCBUb2FzdCBjb21wb25lbnRcblxuICAvKipcbiAgICogU21vb3RoIHNjcm9sbCB0byBlbGVtZW50XG4gICAqL1xuICBzbW9vdGhTY3JvbGxUbyhlbGVtZW50LCBvZmZzZXQgPSAwKSB7XG4gICAgaWYgKHR5cGVvZiBlbGVtZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWxlbWVudCk7XG4gICAgfVxuICAgIFxuICAgIGlmIChlbGVtZW50KSB7XG4gICAgICBjb25zdCB0YXJnZXRQb3NpdGlvbiA9IGVsZW1lbnQub2Zmc2V0VG9wIC0gb2Zmc2V0O1xuICAgICAgd2luZG93LnNjcm9sbFRvKHtcbiAgICAgICAgdG9wOiB0YXJnZXRQb3NpdGlvbixcbiAgICAgICAgYmVoYXZpb3I6ICdzbW9vdGgnXG4gICAgICB9KTtcbiAgICAgIHRoaXMuZW1pdCgndXg6c21vb3RoU2Nyb2xsZWQnLCB7IGVsZW1lbnQsIG9mZnNldCB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ29tcG9uZW50IGNsZWFudXBcbiAgICovXG4gIG9uRGVzdHJveSgpIHtcbiAgICAvLyBDbGVhbiB1cCBvYnNlcnZlcnNcbiAgICBpZiAodGhpcy5sYXp5T2JzZXJ2ZXIpIHtcbiAgICAgIHRoaXMubGF6eU9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5wZXJmb3JtYW5jZU9ic2VydmVycy5mb3JFYWNoKG9ic2VydmVyID0+IHtcbiAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICB9KTtcbiAgICBcbiAgICBpZiAodGhpcy5tZW1vcnlDaGVja0ludGVydmFsKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMubWVtb3J5Q2hlY2tJbnRlcnZhbCk7XG4gICAgfVxuICAgIFxuICAgIGxvZy5kZWJ1ZygnQ29tcG9uZW50IGRlc3Ryb3llZCBhbmQgY2xlYW5lZCB1cCcpO1xuICB9XG59XG5cbi8vIEF1dG8tcmVnaXN0ZXIgY29tcG9uZW50XG5Db21wb25lbnRNYW5hZ2VyLnJlZ2lzdGVyKCdwZXJmb3JtYW5jZS1vcHRpbWl6ZXInLCBQZXJmb3JtYW5jZU9wdGltaXplcik7IiwgIi8qKlxuICogQ29tcG9uZW50cyBpbmRleCAtIExhenkgbG9hZGluZyBhbmQgcmVnaXN0cmF0aW9uIG9mIGFsbCBjb21wb25lbnRzXG4gKiBFbmhhbmNlZCB3aXRoIG1vZGVybiB2YW5pbGxhIEpTIHBlcmZvcm1hbmNlIG9wdGltaXphdGlvbnNcbiAqL1xuXG5pbXBvcnQgQ29tcG9uZW50TWFuYWdlciBmcm9tICcuLi9jb3JlL0NvbXBvbmVudE1hbmFnZXIuanMnO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnLi4vdXRpbHMvTG9nZ2VyLmpzJztcbmltcG9ydCB7IHJlcXVlc3RJZGxlVGltZSwgbG9nRmVhdHVyZVN1cHBvcnQgfSBmcm9tICcuLi91dGlscy9GZWF0dXJlRGV0ZWN0aW9uLmpzJztcblxuLy8gUmUtZXhwb3J0IG1peGlucyBmb3IgZWFzeSBjb21wb25lbnQgYWNjZXNzXG5leHBvcnQgeyBFeHBhbmRhYmxlTWl4aW4gfSBmcm9tICcuLi9taXhpbnMvRXhwYW5kYWJsZU1peGluLmpzJztcbmV4cG9ydCB7IFJlc3BvbnNpdmVNaXhpbiB9IGZyb20gJy4uL21peGlucy9SZXNwb25zaXZlTWl4aW4uanMnO1xuZXhwb3J0IHsgTW9kYWxNaXhpbiB9IGZyb20gJy4uL21peGlucy9Nb2RhbE1peGluLmpzJztcbmV4cG9ydCB7IFNjcm9sbFRyYWNraW5nTWl4aW4gfSBmcm9tICcuLi9taXhpbnMvU2Nyb2xsVHJhY2tpbmdNaXhpbi5qcyc7XG5leHBvcnQgeyBGb3JtVmFsaWRhdGlvbk1peGluIH0gZnJvbSAnLi4vbWl4aW5zL0Zvcm1WYWxpZGF0aW9uTWl4aW4uanMnO1xuZXhwb3J0IHsgTWl4aW5NYW5hZ2VyLCBNaXhpbkFwcGxpY2F0b3JzLCB3aXRoTWl4aW5zIH0gZnJvbSAnLi4vbWl4aW5zL01peGluTWFuYWdlci5qcyc7XG5cbi8vIFJlLWV4cG9ydCBNaXhpbkJhc2UgdXRpbGl0aWVzIGZvciBtaXhpbiBjcmVhdG9yc1xuZXhwb3J0IHsgTWl4aW5VdGlsaXRpZXMsIE1peGluUGF0dGVybnMsIHZhbGlkYXRlTWl4aW5JbnRlcmZhY2UgfSBmcm9tICcuLi9taXhpbnMvTWl4aW5CYXNlLmpzJztcblxuY29uc3QgbG9nID0gbG9nZ2VyLmNvbXBvbmVudCgnQ29tcG9uZW50TG9hZGVyJyk7XG5cbi8vIENvbXBvbmVudCByZWdpc3RyYXRpb24gd2l0aCBsYXp5IGxvYWRpbmdcbmV4cG9ydCBjb25zdCBjb21wb25lbnRSZWdpc3RyeSA9IHtcbiAgLy8gQXJ0aWNsZSBjb21wb25lbnRzXG4gICd0YWItYWdncmVnYXRvcic6ICgpID0+IGltcG9ydCgnLi9hcnRpY2xlL1RhYkFnZ3JlZ2F0b3IuanMnKSxcbiAgJ2FydGljbGUtY2xpcGJvYXJkJzogKCkgPT4gaW1wb3J0KCcuL2FydGljbGUvQ2xpcGJvYXJkLmpzJyksXG4gICdhcnRpY2xlLWNvbGxhcHNlJzogKCkgPT4gaW1wb3J0KCcuL2FydGljbGUvQ29sbGFwc2UuanMnKSxcbiAgJ2FydGljbGUtY2hhdCc6ICgpID0+IGltcG9ydCgnLi9jaGF0L2luZGV4LmpzJyksXG4gICdhcnRpY2xlLWhlYWRlcic6ICgpID0+IGltcG9ydCgnLi9hcnRpY2xlL0hlYWRlci5qcycpLFxuICAnYXJ0aWNsZS10YWJzJzogKCkgPT4gaW1wb3J0KCcuL2FydGljbGUvVGFicy5qcycpLFxuICAnYXJ0aWNsZS10b2MnOiAoKSA9PiBpbXBvcnQoJy4vYXJ0aWNsZS9UT0MuanMnKSxcbiAgJ2FydGljbGUtdGlsZXMnOiAoKSA9PiBpbXBvcnQoJy4vYXJ0aWNsZS9UaWxlcy5qcycpLFxuICAnYXJ0aWNsZS1zdW1tYXJpemF0aW9uJzogKCkgPT4gaW1wb3J0KCcuL2FydGljbGUvU3VtbWFyaXphdGlvbi5qcycpLFxuICAnYXJ0aWNsZS1yZWxhdGVkLWNvbnRlbnQnOiAoKSA9PiBpbXBvcnQoJy4vYXJ0aWNsZS9SZWxhdGVkQ29udGVudC5qcycpLFxuICAnY29weS1wYWdlJzogKCkgPT4gaW1wb3J0KCcuL2FydGljbGUvQ29weVBhZ2UuanMnKSxcbiAgJ21lcm1haWQtZGlhZ3JhbSc6ICgpID0+IGltcG9ydCgnLi9hcnRpY2xlL01lcm1haWQuanMnKSxcbiAgJ3ZpZGVvLXBsYXllcic6ICgpID0+IGltcG9ydCgnLi9hcnRpY2xlL1ZpZGVvLmpzJyksXG4gICdub3RlYm9vay12aWV3ZXInOiAoKSA9PiBpbXBvcnQoJy4vbm90ZWJvb2svTm90ZWJvb2tWaWV3ZXIuanMnKSxcbiAgJ25vdGVib29rLXByb2dyZXNzaXZlLXJldmVhbCc6ICgpID0+IGltcG9ydCgnLi9hcnRpY2xlL05vdGVib29rUHJvZ3Jlc3NpdmVSZXZlYWwuanMnKSxcbiAgJ25vdGVib29rLWNlbGwnOiAoKSA9PiBpbXBvcnQoJy4vbm90ZWJvb2svTm90ZWJvb2tDZWxsLmpzJyksXG4gICdub3RlYm9vay1uYXZpZ2F0aW9uJzogKCkgPT4gaW1wb3J0KCcuL25vdGVib29rL05vdGVib29rTmF2aWdhdGlvbi5qcycpLFxuICAnbm90ZWJvb2stc3RhdGUnOiAoKSA9PiBpbXBvcnQoJy4vbm90ZWJvb2svTm90ZWJvb2tTdGF0ZS5qcycpLFxuICAvLyAnbm90ZWJvb2stZGVuc2l0eSc6ICgpID0+IGltcG9ydCgnLi9ub3RlYm9vay9Ob3RlYm9va0RlbnNpdHkuanMnKSxcbiAgJ25vdGVib29rLWxhdW5jaCc6ICgpID0+IGltcG9ydCgnLi9ub3RlYm9vay9Ob3RlYm9va0xhdW5jaC5qcycpLFxuICAnbm90ZWJvb2stY29sbGFwc2UnOiAoKSA9PiBpbXBvcnQoJy4vbm90ZWJvb2svTm90ZWJvb2tDb2xsYXBzZS5qcycpLFxuXG4gIFxuICAvLyBPcGVuQVBJIGNvbXBvbmVudHNcbiAgJ29wZW5hcGktdmlld2VyJzogKCkgPT4gaW1wb3J0KCcuL2FydGljbGUvT3BlbkFQSVZpZXdlci5qcycpLFxuICAnb3BlbmFwaS1jb2xsYXBzZSc6ICgpID0+IGltcG9ydCgnLi9vcGVuYXBpL09wZW5BUElDb2xsYXBzZS5qcycpLFxuICAnZW5kcG9pbnQtZmlsdGVyJzogKCkgPT4gaW1wb3J0KCcuL29wZW5hcGkvRW5kcG9pbnRGaWx0ZXIuanMnKSxcbiAgJ2VuZHBvaW50LWRhdGEnOiAoKSA9PiBpbXBvcnQoJy4vb3BlbmFwaS9lbmRwb2ludC9FbmRwb2ludERhdGEuanMnKSxcbiAgJ2ZpbHRlci1sb2dpYyc6ICgpID0+IGltcG9ydCgnLi9vcGVuYXBpL2VuZHBvaW50L0ZpbHRlckxvZ2ljLmpzJyksXG4gICdmaWx0ZXItdWknOiAoKSA9PiBpbXBvcnQoJy4vb3BlbmFwaS9lbmRwb2ludC9GaWx0ZXJVSS5qcycpLFxuICAnZmlsdGVyLXBlcnNpc3RlbmNlJzogKCkgPT4gaW1wb3J0KCcuL29wZW5hcGkvZW5kcG9pbnQvRmlsdGVyUGVyc2lzdGVuY2UuanMnKSxcblxuICBcbiAgLy8gTGF5b3V0IGNvbXBvbmVudHNcbiAgJ3RoZW1lLXRvZ2dsZSc6ICgpID0+IGltcG9ydCgnLi9sYXlvdXQvVGhlbWVUb2dnbGUuanMnKSxcbiAgJ29wZW5hcGktc2lkZWJhcic6ICgpID0+IGltcG9ydCgnLi9sYXlvdXQvT3BlbkFQSVNpZGViYXIuanMnKSxcbiAgJ25hdmlnYXRpb24tbW9iaWxlLXRvZ2dsZSc6ICgpID0+IGltcG9ydCgnLi9sYXlvdXQvTW9iaWxlTmF2LmpzJyksXG4gICduYXZpZ2F0aW9uLXNpZGViYXItbGVmdCc6ICgpID0+IGltcG9ydCgnLi9sYXlvdXQvU2lkZWJhci5qcycpLFxuICAnbGFuZ3VhZ2Utc3dpdGNoZXInOiAoKSA9PiBpbXBvcnQoJy4vbGF5b3V0L0xhbmd1YWdlU3dpdGNoZXIuanMnKSxcblxuICAnZ2xvc3NhcnknOiAoKSA9PiBpbXBvcnQoJy4vbGF5b3V0L0dsb3NzYXJ5LmpzJyksXG4gICdjaGF0LXRvYy10b2dnbGUnOiAoKSA9PiBpbXBvcnQoJy4vbGF5b3V0L0NoYXRUb2NUb2dnbGUuanMnKSxcbiAgXG4gIC8vIFVJIGNvbXBvbmVudHNcbiAgJ3RvYXN0JzogKCkgPT4gaW1wb3J0KCcuL3VpL1RvYXN0LmpzJyksXG4gIFxuICAvLyBGZWF0dXJlIGNvbXBvbmVudHNcbiAgJ3R1dG9yaWFsLW1hbmFnZXInOiAoKSA9PiBpbXBvcnQoJy4vZmVhdHVyZXMvVHV0b3JpYWxNYW5hZ2VyLmpzJyksXG5cbiAgJ3BlcmZvcm1hbmNlLW9wdGltaXplcic6ICgpID0+IGltcG9ydCgnLi9mZWF0dXJlcy9QZXJmb3JtYW5jZU9wdGltaXplci5qcycpXG59O1xuXG4vLyBSZWdpc3RlciBuby1vcCBjb21wb25lbnRzIGZvciBwdXJlbHkgc3RydWN0dXJhbCBtYXJrZXJzIHVzZWQgaW4gdGVtcGxhdGVzXG5pbXBvcnQgeyByZWdpc3Rlck5vb3AgfSBmcm9tICcuL3VpL05vb3AuanMnO1xucmVnaXN0ZXJOb29wKCduYXZpZ2F0aW9uLXRvcGJhcicpO1xucmVnaXN0ZXJOb29wKCduYXZpZ2F0aW9uLW1vYmlsZS1vdmVybGF5Jyk7XG5yZWdpc3Rlck5vb3AoJ25hdmlnYXRpb24tc2lkZWJhci1yaWdodCcpO1xucmVnaXN0ZXJOb29wKCdxdWlja2xpbmtzLXNob3J0Y29kZScpO1xuXG4vKipcbiAqIExhenkgbG9hZCBhIGNvbXBvbmVudFxuICovXG4vLyBMaWdodHdlaWdodCBET00gcHJlc2VuY2UgY2hlY2sgdG8gYXZvaWQgaW1wb3J0aW5nIGNvbXBvbmVudHMgbm90IHVzZWQgb24gdGhlIHBhZ2VcbmZ1bmN0aW9uIGhhc0NvbXBvbmVudEluRE9NKG5hbWUsIGNvbmZpZyA9IHt9KSB7XG4gIGlmIChjb25maWcuZWxlbWVudCkgcmV0dXJuIHRydWU7XG4gIGlmICh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgLy8gUmVseSBzb2xlbHkgb24gZGF0YS1jb21wb25lbnQgbWFya2VycyBmb3IgZGlzY292ZXJ5XG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWNvbXBvbmVudD1cIiR7bmFtZX1cIl1gKSkgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9hZENvbXBvbmVudChuYW1lLCBjb25maWcgPSB7fSkge1xuICBjb25zdCBsb2FkZXIgPSBjb21wb25lbnRSZWdpc3RyeVtuYW1lXTtcbiAgaWYgKCFsb2FkZXIpIHtcbiAgICBsb2cuZGVidWcoYENvbXBvbmVudCBcIiR7bmFtZX1cIiBub3QgZm91bmQgaW4gcmVnaXN0cnlgKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIFNraXAgaW1wb3J0aW5nIGlmIHRoZSBjb21wb25lbnQgaXMgbm90IHByZXNlbnQgb24gdGhpcyBwYWdlXG4gIGlmICghY29uZmlnLmZvcmNlICYmICFoYXNDb21wb25lbnRJbkRPTShuYW1lLCBjb25maWcpKSB7XG4gICAgbG9nLmRlYnVnKGBTa2lwcGluZyBjb21wb25lbnQgbm90IHByZXNlbnQgb24gcGFnZTogJHtuYW1lfWApO1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBsb2cuZGVidWcoYExvYWRpbmcgY29tcG9uZW50IG1vZHVsZTogJHtuYW1lfWApO1xuICAgIGNvbnN0IG1vZHVsZSA9IGF3YWl0IGxvYWRlcigpO1xuICAgIGxvZy50cmFjZShgQ29tcG9uZW50IG1vZHVsZSBsb2FkZWQ6ICR7bmFtZX1gLCBtb2R1bGUpO1xuXG4gICAgLy8gQ29tcG9uZW50IHNob3VsZCBiZSBhdXRvLXJlZ2lzdGVyZWQgd2hlbiBtb2R1bGUgbG9hZHNcbiAgICBjb25zdCBpbnN0YW5jZSA9IGF3YWl0IENvbXBvbmVudE1hbmFnZXIuY3JlYXRlKG5hbWUsIGNvbmZpZyk7XG4gICAgaWYgKGluc3RhbmNlKSB7XG4gICAgICBsb2cudHJhY2UoYENvbXBvbmVudCBpbnN0YW5jZSBjcmVhdGVkIGFuZCBpbml0aWFsaXplZDogJHtuYW1lfWApO1xuICAgICAgcmV0dXJuIGluc3RhbmNlO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBOb3QgYW4gZXJyb3IgaWYgdGhlIGNvbXBvbmVudCBpc24ndCBhcHBsaWNhYmxlIHRvIHRoaXMgRE9NXG4gICAgICBsb2cuZGVidWcoYENvbXBvbmVudCBub3QgYXBwbGljYWJsZSBvciBoYWQgbm8gdGFyZ2V0IGVsZW1lbnRzOiAke25hbWV9YCk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nLmVycm9yKGBGYWlsZWQgdG8gbG9hZCBjb21wb25lbnQgXCIke25hbWV9XCI6YCwgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogTG9hZCBtdWx0aXBsZSBjb21wb25lbnRzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2FkQ29tcG9uZW50cyhuYW1lcykge1xuICBjb25zdCBwcm9taXNlcyA9IG5hbWVzLm1hcChuYW1lID0+IGxvYWRDb21wb25lbnQobmFtZSkpO1xuICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKHByb21pc2VzKTtcbiAgXG4gIHJldHVybiByZXN1bHRzXG4gICAgLmZpbHRlcihyZXN1bHQgPT4gcmVzdWx0LnN0YXR1cyA9PT0gJ2Z1bGZpbGxlZCcgJiYgcmVzdWx0LnZhbHVlKVxuICAgIC5tYXAocmVzdWx0ID0+IHJlc3VsdC52YWx1ZSk7XG59XG5cbi8qKlxuICogUmVnaXN0ZXIgYWxsIGF2YWlsYWJsZSBjb21wb25lbnRzIGZvciBkaXNjb3ZlcnlcbiAqIEVuaGFuY2VkIHdpdGggcmVxdWVzdElkbGVDYWxsYmFjayBmb3Igb3B0aW1hbCBwZXJmb3JtYW5jZVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJBbGxDb21wb25lbnRzKCkge1xuICAvLyBDcml0aWNhbCBjb21wb25lbnRzIHRoYXQgc2hvdWxkIGJlIHJlZ2lzdGVyZWQgaW1tZWRpYXRlbHlcbiAgY29uc3QgY3JpdGljYWwgPSBbXG4gICAgJ3RhYi1hZ2dyZWdhdG9yJywgICAgICAgICAgIC8vIEJ1aWxkIHRhYnMgZnJvbSBzaW1wbGUgdGFiIHNob3J0Y29kZXNcbiAgICAndG9hc3QnLCAgICAgICAgICAgICAgICAgICAgIC8vIE11c3QgYmUgZmlyc3QgZm9yIG5vdGlmaWNhdGlvbnNcbiAgICAndGhlbWUtdG9nZ2xlJywgICAgICAgICAgICAgIC8vIE11c3QgYmUgZWFybHkgZm9yIHRoZW1lIGFwcGxpY2F0aW9uXG4gICAgJ25hdmlnYXRpb24tc2lkZWJhci1sZWZ0JywgICAvLyBFc3NlbnRpYWwgZm9yIG5hdmlnYXRpb25cbiAgICAvLyAnc2VhcmNoJywgICAgICAgICAgICAgICAgIC8vIENvbW1lbnRlZDogc2VhcmNoIGNvbXBvbmVudCBub3QgcHJlc2VudDsgcmUtZW5hYmxlIHdoZW4gaW1wbGVtZW50ZWRcbiAgICAnbmF2aWdhdGlvbi1tb2JpbGUtdG9nZ2xlJywgIC8vIE1vYmlsZSBuYXZpZ2F0aW9uXG4gICAgJ2FydGljbGUtY2xpcGJvYXJkJywgICAgICAgICAvLyBDb2RlIGNvcHlpbmdcbiAgICAnYXJ0aWNsZS1jb2xsYXBzZScsICAgICAgICAgIC8vIENvbnRlbnQgY29sbGFwc2luZ1xuICAgICdub3RlYm9vay1wcm9ncmVzc2l2ZS1yZXZlYWwnLCAvLyBQcm9ncmVzc2l2ZSByZXZlYWwgZm9yIG5vdGVib29rIGNlbGxzIChtdXN0IGJlIGZpcnN0KVxuICAgICdwZXJmb3JtYW5jZS1vcHRpbWl6ZXInICAgICAgLy8gUGVyZm9ybWFuY2UgZW5oYW5jZW1lbnRzXG4gIF07XG4gIFxuICAvLyBTZWNvbmRhcnkgY29tcG9uZW50cyAobG9hZGVkIGR1cmluZyBpZGxlIHRpbWUpXG4gIGNvbnN0IHNlY29uZGFyeSA9IFtcbiAgICAnYXJ0aWNsZS10b2MnLFxuICAgICdhcnRpY2xlLWNoYXQnLCBcbiAgICAnYXJ0aWNsZS10YWJzJyxcbiAgICAnYXJ0aWNsZS10aWxlcycsXG4gICAgJ2FydGljbGUtaGVhZGVyJyxcbiAgICAnYXJ0aWNsZS1zdW1tYXJpemF0aW9uJyxcbiAgICAnYXJ0aWNsZS1yZWxhdGVkLWNvbnRlbnQnLCAgICAgLy8gRW5oYW5jZWQgcmVsYXRlZCBjb250ZW50IHdpdGggdmlldyB0b2dnbGluZ1xuICAgICdjb3B5LXBhZ2UnLCAgICAgICAgICAgICAgICAgICAvLyBDb3B5IHBhZ2UgZnVuY3Rpb25hbGl0eVxuICAgICdtZXJtYWlkLWRpYWdyYW0nLCAgICAgICAgICAgICAvLyBJbml0aWFsaXplIE1lcm1haWQgZGlhZ3JhbXNcbiAgICAnYXNjaWluZW1hLWVtYmVkJywgICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSBBc2NpaW5lbWEgZW1iZWRzXG4gICAgXG4gICAgLy8gTm90ZWJvb2sgY29tcG9uZW50c1xuICAgIC8vICdub3RlYm9vay1kZW5zaXR5JywgICAgICAgICAgICAvLyBOb3RlYm9vayBkZW5zaXR5IHRvZ2dsZSBjb250cm9scyAocmVtb3ZlZClcbiAgICAnbm90ZWJvb2stbGF1bmNoJywgICAgICAgICAgICAgLy8gTm90ZWJvb2sgcGxhdGZvcm0gbGF1bmNoZXIgZHJvcGRvd25cbiAgICAnbm90ZWJvb2stY29sbGFwc2UnLCAgICAgICAgICAgLy8gUGVyLWNlbGwgY29sbGFwc2UvZXhwYW5kXG4gICAgXG4gICAgLy8gT3BlbkFQSSBjb21wb25lbnRzXG4gICAgJ29wZW5hcGktdmlld2VyJyxcbiAgICAnb3BlbmFwaS1jb2xsYXBzZScsXG4gICAgJ2VuZHBvaW50LWZpbHRlcicsXG5cbiAgICAnZ2xvc3NhcnknLFxuICAgICdjaGF0LXRvYy10b2dnbGUnLFxuICAgICd0dXRvcmlhbC1tYW5hZ2VyJ1xuICAgIC8vICd0aGVtZScgY29tcG9uZW50IHJlbW92ZWQgLSBjb25mbGljdHMgd2l0aCAndGhlbWUtdG9nZ2xlJyBsb2FkZWQgYWJvdmVcbiAgXTtcbiAgXG4gIC8vIExvZyBmZWF0dXJlIHN1cHBvcnQgaW4gZGVidWcgbW9kZVxuICBpZiAod2luZG93LmxvY2F0aW9uLmhvc3RuYW1lID09PSAnbG9jYWxob3N0Jykge1xuICAgIGxvZ0ZlYXR1cmVTdXBwb3J0KCk7XG4gIH1cbiAgXG4gIGxvZy5pbmZvKGBMb2FkaW5nICR7Y3JpdGljYWwubGVuZ3RofSBjcml0aWNhbCBjb21wb25lbnRzLi4uYCk7XG4gIFxuICAvLyBSZWdpc3RlciBjcml0aWNhbCBjb21wb25lbnRzIGZpcnN0XG4gIHJldHVybiBQcm9taXNlLmFsbChjcml0aWNhbC5tYXAobmFtZSA9PiB7XG4gICAgbG9nLmRlYnVnKGBMb2FkaW5nIGNyaXRpY2FsIGNvbXBvbmVudDogJHtuYW1lfWApO1xuICAgIGNvbnN0IG9wdGlvbnMgPSBuYW1lID09PSAndGFiLWFnZ3JlZ2F0b3InID8geyBmb3JjZTogdHJ1ZSB9IDoge307XG4gICAgcmV0dXJuIGxvYWRDb21wb25lbnQobmFtZSwgb3B0aW9ucyk7XG4gIH0pKVxuICAgIC50aGVuKChjcml0aWNhbFJlc3VsdHMpID0+IHtcbiAgICAgIGNvbnN0IHN1Y2Nlc3NmdWxDcml0aWNhbCA9IGNyaXRpY2FsUmVzdWx0cy5maWx0ZXIociA9PiByKS5sZW5ndGg7XG4gICAgICBsb2cuaW5mbyhgQ3JpdGljYWwgY29tcG9uZW50cyBsb2FkZWQ6ICR7c3VjY2Vzc2Z1bENyaXRpY2FsfS8ke2NyaXRpY2FsLmxlbmd0aH1gKTtcbiAgICAgIFxuICAgICAgLy8gXHVEODNEXHVERTgwIE1PREVSTiBFTkhBTkNFTUVOVDogTG9hZCBzZWNvbmRhcnkgY29tcG9uZW50cyBkdXJpbmcgaWRsZSB0aW1lXG4gICAgICBsb2FkU2Vjb25kYXJ5Q29tcG9uZW50c0luSWRsZShzZWNvbmRhcnkpO1xuICAgICAgXG4gICAgICAvLyBSZXR1cm4gY3JpdGljYWwgY29tcG9uZW50cyBpbW1lZGlhdGVseSBmb3IgZmFzdGVyIHBlcmNlaXZlZCBwZXJmb3JtYW5jZVxuICAgICAgcmV0dXJuIGNyaXRpY2FsUmVzdWx0cy5maWx0ZXIociA9PiByKTtcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBcdUQ4M0RcdURFODAgTG9hZCBzZWNvbmRhcnkgY29tcG9uZW50cyBkdXJpbmcgYnJvd3NlciBpZGxlIHRpbWVcbiAqIFRoaXMgZHJhbWF0aWNhbGx5IGltcHJvdmVzIHBlcmNlaXZlZCBwZXJmb3JtYW5jZSBieSBwcmlvcml0aXppbmcgY3JpdGljYWwgY29tcG9uZW50c1xuICovXG5mdW5jdGlvbiBsb2FkU2Vjb25kYXJ5Q29tcG9uZW50c0luSWRsZShzZWNvbmRhcnkpIHtcbiAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gIFxuICBsb2cuaW5mbyhgU2NoZWR1bGluZyAke3NlY29uZGFyeS5sZW5ndGh9IHNlY29uZGFyeSBjb21wb25lbnRzIGZvciBpZGxlIGxvYWRpbmcuLi5gKTtcbiAgXG4gIC8vIFVzZSByZXF1ZXN0SWRsZUNhbGxiYWNrIGZvciBvcHRpbWFsIHBlcmZvcm1hbmNlXG4gIHJlcXVlc3RJZGxlVGltZShcbiAgICBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpZGxlU3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICBsb2cuZGVidWcoJ0Jyb3dzZXIgaXMgaWRsZSwgbG9hZGluZyBzZWNvbmRhcnkgY29tcG9uZW50cy4uLicpO1xuICAgICAgXG4gICAgICAvLyBMb2FkIHNlY29uZGFyeSBjb21wb25lbnRzIGluIGJhdGNoZXMgdG8gYXZvaWQgYmxvY2tpbmdcbiAgICAgIGNvbnN0IGJhdGNoU2l6ZSA9IDM7XG4gICAgICBjb25zdCBiYXRjaGVzID0gW107XG4gICAgICBcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2Vjb25kYXJ5Lmxlbmd0aDsgaSArPSBiYXRjaFNpemUpIHtcbiAgICAgICAgYmF0Y2hlcy5wdXNoKHNlY29uZGFyeS5zbGljZShpLCBpICsgYmF0Y2hTaXplKSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFByb2Nlc3MgYmF0Y2hlcyB3aXRoIHNtYWxsIGRlbGF5cyBiZXR3ZWVuIHRoZW1cbiAgICAgIGZvciAoY29uc3QgW2luZGV4LCBiYXRjaF0gb2YgYmF0Y2hlcy5lbnRyaWVzKCkpIHtcbiAgICAgICAgaWYgKGluZGV4ID4gMCkge1xuICAgICAgICAgIC8vIFNtYWxsIGRlbGF5IGJldHdlZW4gYmF0Y2hlcyB0byBrZWVwIHRoZSBtYWluIHRocmVhZCByZXNwb25zaXZlXG4gICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDUpKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgbG9nLnRyYWNlKGBMb2FkaW5nIGJhdGNoICR7aW5kZXggKyAxfS8ke2JhdGNoZXMubGVuZ3RofTpgLCBiYXRjaCk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBiYXRjaFByb21pc2VzID0gYmF0Y2gubWFwKG5hbWUgPT4ge1xuICAgICAgICAgIGxvZy50cmFjZShgTG9hZGluZyBzZWNvbmRhcnkgY29tcG9uZW50OiAke25hbWV9YCk7XG4gICAgICAgICAgcmV0dXJuIGxvYWRDb21wb25lbnQobmFtZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgYmF0Y2hSZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKGJhdGNoUHJvbWlzZXMpO1xuICAgICAgICBjb25zdCBiYXRjaFN1Y2Nlc3NmdWwgPSBiYXRjaFJlc3VsdHMuZmlsdGVyKHIgPT4gci5zdGF0dXMgPT09ICdmdWxmaWxsZWQnICYmIHIudmFsdWUpO1xuICAgICAgICBcbiAgICAgICAgbG9nLnRyYWNlKGBCYXRjaCAke2luZGV4ICsgMX0gY29tcGxldGVkOiAke2JhdGNoU3VjY2Vzc2Z1bC5sZW5ndGh9LyR7YmF0Y2gubGVuZ3RofSBzdWNjZXNzZnVsYCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IHRvdGFsVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lO1xuICAgICAgY29uc3QgaWRsZVRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIGlkbGVTdGFydFRpbWU7XG4gICAgICBcbiAgICAgIGxvZy5pbmZvKGBTZWNvbmRhcnkgY29tcG9uZW50cyBsb2FkZWQgaW4gJHtNYXRoLnJvdW5kKGlkbGVUaW1lKX1tcyAoJHtNYXRoLnJvdW5kKHRvdGFsVGltZSl9bXMgdG90YWwpYCk7XG4gICAgICBcbiAgICAgIC8vIEVtaXQgY29tcGxldGlvbiBldmVudCBmb3Igb3RoZXIgY29tcG9uZW50cyB0aGF0IG1pZ2h0IGRlcGVuZCBvbiB0aGlzXG4gICAgICBpbXBvcnQoJy4uL2NvcmUvRXZlbnRCdXMuanMnKS50aGVuKCh7IGV2ZW50QnVzIH0pID0+IHtcbiAgICAgICAgZXZlbnRCdXMuZW1pdCgnY29tcG9uZW50czpzZWNvbmRhcnktbG9hZGVkJywge1xuICAgICAgICAgIGNvdW50OiBzZWNvbmRhcnkubGVuZ3RoLFxuICAgICAgICAgIGxvYWRUaW1lOiBpZGxlVGltZSxcbiAgICAgICAgICB0b3RhbFRpbWVcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIHsgXG4gICAgICB0aW1lb3V0OiAzMDAwLCAgLy8gTWF4aW11bSB3YWl0IHRpbWVcbiAgICAgIHByaW9yaXR5OiAnbG93JyAvLyBUaGVzZSBhcmUgbm9uLWNyaXRpY2FsXG4gICAgfVxuICApO1xufSIsICIvKipcbiAqIENvbXBvbmVudE1hbmFnZXIgLSBDb21wb25lbnQgbGlmZWN5Y2xlIGFuZCByZWdpc3RyeSBtYW5hZ2VtZW50XG4gKiBIYW5kbGVzIGNvbXBvbmVudCByZWdpc3RyYXRpb24sIGluc3RhbnRpYXRpb24sIGFuZCBkaXNjb3ZlcnlcbiAqL1xuXG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICcuL0NvbXBvbmVudC5qcyc7XG5pbXBvcnQgeyBldmVudEJ1cyB9IGZyb20gJy4vRXZlbnRCdXMuanMnO1xuaW1wb3J0IHsgJCB9IGZyb20gJy4uL3V0aWxzL2RvbS5qcyc7XG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuLi91dGlscy9Mb2dnZXIuanMnO1xuaW1wb3J0IHsgbW9kZXJuRmVhdHVyZXMsIHJlcXVlc3RJZGxlVGltZSB9IGZyb20gJy4uL3V0aWxzL0ZlYXR1cmVEZXRlY3Rpb24uanMnO1xuaW1wb3J0IHsgd2FpdEZvckRPTSwgd2FpdEZvckVsZW1lbnQsIGlzRWxlbWVudFZpc2libGUsIHNjcm9sbFRvRWxlbWVudCB9IGZyb20gJy4vdXRpbHMvRE9NVXRpbHMuanMnO1xuXG5jb25zdCBsb2cgPSBsb2dnZXIuY29tcG9uZW50KCdDb21wb25lbnRNYW5hZ2VyJyk7XG5cbi8qKlxuICogQ29tcG9uZW50TWFuYWdlciAtIFNpbmdsZXRvbiBmb3IgbWFuYWdpbmcgY29tcG9uZW50IGxpZmVjeWNsZVxuICovXG5jbGFzcyBDb21wb25lbnRNYW5hZ2VyIHtcbiAgc3RhdGljIGNvbXBvbmVudHMgPSBuZXcgTWFwKCk7XG4gIHN0YXRpYyBpbnN0YW5jZXMgPSBuZXcgTWFwKCk7XG4gIHN0YXRpYyBhdXRvRGlzY292ZXJ5ID0gdHJ1ZTtcbiAgc3RhdGljIHJlYWN0aXZlT2JzZXJ2ZXIgPSBudWxsO1xuICBzdGF0aWMgaXNSZWFjdGl2ZUVuYWJsZWQgPSBmYWxzZTtcbiAgc3RhdGljIGxhc3RBY3Rpdml0eSA9IERhdGUubm93KCk7XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIGEgY29tcG9uZW50IGNsYXNzXG4gICAqL1xuICBzdGF0aWMgcmVnaXN0ZXIobmFtZSwgQ29tcG9uZW50Q2xhc3MsIG9wdGlvbnMgPSB7fSkge1xuICAgIGlmICh0aGlzLmNvbXBvbmVudHMuaGFzKG5hbWUpKSB7XG4gICAgICBsb2cud2FybihgQ29tcG9uZW50IFwiJHtuYW1lfVwiIGlzIGFscmVhZHkgcmVnaXN0ZXJlZC4gT3ZlcndyaXRpbmcuLi5gKTtcbiAgICB9XG5cbiAgICB0aGlzLmNvbXBvbmVudHMuc2V0KG5hbWUsIHtcbiAgICAgIENvbXBvbmVudENsYXNzLFxuICAgICAgb3B0aW9uczoge1xuICAgICAgICBhdXRvSW5pdDogdHJ1ZSxcbiAgICAgICAgbGF6eTogZmFsc2UsXG4gICAgICAgIC4uLm9wdGlvbnNcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGxvZy5kZWJ1ZyhgUmVnaXN0ZXJlZCBjb21wb25lbnQ6ICR7bmFtZX1gKTtcbiAgICBcbiAgICAvLyBEb24ndCB0cmlnZ2VyIGF1dG8tZGlzY292ZXJ5IGltbWVkaWF0ZWx5IHRvIHByZXZlbnQgaW5maW5pdGUgbG9vcHNcbiAgICAvLyBBdXRvLWRpc2NvdmVyeSB3aWxsIHJ1biBmcm9tIHRoZSBtYWluIGluaXRpYWxpemF0aW9uIHByb2Nlc3NcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW5kIGluaXRpYWxpemUgYSBjb21wb25lbnQgaW5zdGFuY2VcbiAgICovXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUobmFtZSwgY29uZmlnID0ge30pIHtcbiAgICBjb25zdCBjb21wb25lbnREYXRhID0gdGhpcy5jb21wb25lbnRzLmdldChuYW1lKTtcbiAgICBpZiAoIWNvbXBvbmVudERhdGEpIHtcbiAgICAgIGxvZy5lcnJvcihgQ29tcG9uZW50IFwiJHtuYW1lfVwiIG5vdCByZWdpc3RlcmVkYCk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBDb21wb25lbnRDbGFzcyB9ID0gY29tcG9uZW50RGF0YTtcbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIHRlbXBvcmFyeSBpbnN0YW5jZSB0byBnZXQgc2VsZWN0b3IgaW5mb1xuICAgICAgY29uc3QgdGVtcEluc3RhbmNlID0gbmV3IENvbXBvbmVudENsYXNzKHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgLi4uY29tcG9uZW50RGF0YS5vcHRpb25zLFxuICAgICAgICAuLi5jb25maWdcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBFbmhhbmNlZCBkdXBsaWNhdGUgZGV0ZWN0aW9uIHdpdGggc2luZ2xldG9uIGF3YXJlbmVzc1xuICAgICAgaWYgKHRlbXBJbnN0YW5jZS5zZWxlY3Rvcikge1xuICAgICAgICBjb25zdCBleGlzdGluZ0luc3RhbmNlID0gdGhpcy5maW5kSW5zdGFuY2VCeVNlbGVjdG9yKG5hbWUsIHRlbXBJbnN0YW5jZS5zZWxlY3Rvcik7XG4gICAgICAgIGlmIChleGlzdGluZ0luc3RhbmNlKSB7XG4gICAgICAgICAgY29uc3QgaXNTaW5nbGV0b24gPSB0ZW1wSW5zdGFuY2UuaXNTaW5nbGV0b24gfHwgdGhpcy5pc1NpbmdsZXRvblNlbGVjdG9yKHRlbXBJbnN0YW5jZS5zZWxlY3Rvcik7XG4gICAgICAgICAgLy8gRHVwbGljYXRlIGNyZWF0aW9ucyBmb3Igc2luZ2xldG9uIHRhcmdldHMgYXJlIGV4cGVjdGVkIGR1cmluZyBhdXRvL3JlLWFjdGl2ZSBkaXNjb3ZlcnkuXG4gICAgICAgICAgLy8gUmVkdWNlIG5vaXNlIGJ5IGxvZ2dpbmcgYXQgZGVidWcgZm9yIHNpbmdsZXRvbnM7IHdhcm4gZm9yIHRydWUgbXVsdGktaW5zdGFuY2UgY29uZmxpY3RzIG9ubHkuXG4gICAgICAgICAgY29uc3QgbG9nTGV2ZWwgPSBpc1NpbmdsZXRvbiA/ICdkZWJ1ZycgOiAnd2Fybic7XG4gICAgICAgICAgXG4gICAgICAgICAgbG9nW2xvZ0xldmVsXShgQ29tcG9uZW50IFwiJHtuYW1lfVwiIGluc3RhbmNlIGFscmVhZHkgZXhpc3RzIGZvciBzZWxlY3RvciBcIiR7dGVtcEluc3RhbmNlLnNlbGVjdG9yfVwiLiBSZXR1cm5pbmcgZXhpc3RpbmcgaW5zdGFuY2UuYCk7XG4gICAgICAgICAgcmV0dXJuIGV4aXN0aW5nSW5zdGFuY2U7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIGZvciBET00gZWxlbWVudCBjb25mbGljdHMgKHJlZ2FyZGxlc3Mgb2YgY29tcG9uZW50IG5hbWUpXG4gICAgICAgIGNvbnN0IGVsZW1lbnRDb25mbGljdCA9IHRoaXMuZmluZEluc3RhbmNlQnlFbGVtZW50KHRlbXBJbnN0YW5jZS5zZWxlY3Rvcik7XG4gICAgICAgIGlmIChlbGVtZW50Q29uZmxpY3QgJiYgKHRlbXBJbnN0YW5jZS5pc1NpbmdsZXRvbiB8fCB0aGlzLmlzU2luZ2xldG9uU2VsZWN0b3IodGVtcEluc3RhbmNlLnNlbGVjdG9yKSkpIHtcbiAgICAgICAgICBsb2cud2FybihgU2luZ2xldG9uIGVsZW1lbnQgXCIke3RlbXBJbnN0YW5jZS5zZWxlY3Rvcn1cIiBhbHJlYWR5IG1hbmFnZWQgYnkgY29tcG9uZW50IFwiJHtlbGVtZW50Q29uZmxpY3QubmFtZX1cIi4gUmV0dXJuaW5nIGV4aXN0aW5nIGluc3RhbmNlLmApO1xuICAgICAgICAgIHJldHVybiBlbGVtZW50Q29uZmxpY3Q7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gVXNlIHRoZSB0ZW1wIGluc3RhbmNlIGFzIG91ciBhY3R1YWwgaW5zdGFuY2VcbiAgICAgIGNvbnN0IGluc3RhbmNlID0gdGVtcEluc3RhbmNlO1xuXG4gICAgICAvLyBTdG9yZSBpbnN0YW5jZSByZWZlcmVuY2VcbiAgICAgIHRoaXMuaW5zdGFuY2VzLnNldChpbnN0YW5jZS5pZCwgaW5zdGFuY2UpO1xuXG4gICAgICAvLyBJbml0aWFsaXplIHRoZSBjb21wb25lbnRcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGluc3RhbmNlLmluaXQoKTtcbiAgICAgIFxuICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICBsb2cuZGVidWcoYENvbXBvbmVudCAke25hbWV9IGluaXRpYWxpemVkYCk7XG4gICAgICAgIGV2ZW50QnVzLmVtaXQoJ2NvbXBvbmVudDpjcmVhdGVkJywgeyBuYW1lLCBpbnN0YW5jZSB9KTtcbiAgICAgICAgdGhpcy5sYXN0QWN0aXZpdHkgPSBEYXRlLm5vdygpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2cuZXJyb3IoYEZhaWxlZCB0byBjcmVhdGUgaW5zdGFuY2UgZm9yOiAke25hbWV9YCwgZXJyb3IpO1xuICAgICAgXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTG9hZCBhIGNvbXBvbmVudCAocmVnaXN0ZXIgaWYgbmVlZGVkLCB0aGVuIGNyZWF0ZSBpbnN0YW5jZSlcbiAgICovXG4gIHN0YXRpYyBhc3luYyBsb2FkKG5hbWUsIGNvbmZpZyA9IHt9KSB7XG4gICAgLy8gSWYgbm90IHJlZ2lzdGVyZWQgeWV0LCB0cnkgbGF6eS1pbXBvcnRpbmcgdmlhIHRoZSBjb21wb25lbnQgbG9hZGVyXG4gICAgaWYgKCF0aGlzLmNvbXBvbmVudHMuaGFzKG5hbWUpKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBjb21wb25lbnRzSW5kZXggPSBhd2FpdCBpbXBvcnQoJy4uL2NvbXBvbmVudHMvaW5kZXguanMnKTtcbiAgICAgICAgaWYgKHR5cGVvZiBjb21wb25lbnRzSW5kZXgubG9hZENvbXBvbmVudCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHJldHVybiBjb21wb25lbnRzSW5kZXgubG9hZENvbXBvbmVudChuYW1lLCBjb25maWcpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIFJlZHVjZSBub2lzZSB3aGVuIGNvbXBvbmVudHMgc2ltcGx5IGFyZW4ndCBwcmVzZW50IG9uIHRoZSBwYWdlXG4gICAgICAgIGxvZy5kZWJ1ZyhgRGVmZXJyZWQgbG9hZCBmYWlsZWQgb3IgY29tcG9uZW50IG5vdCBwcmVzZW50IGZvcjogJHtuYW1lfWApO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNyZWF0ZShuYW1lLCBjb25maWcpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjb21wb25lbnQgaW5zdGFuY2UgYnkgSURcbiAgICovXG4gIHN0YXRpYyBnZXRJbnN0YW5jZShpZCkge1xuICAgIHJldHVybiB0aGlzLmluc3RhbmNlcy5nZXQoaWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbGwgaW5zdGFuY2VzIG9mIGEgY29tcG9uZW50IGJ5IG5hbWVcbiAgICovXG4gIHN0YXRpYyBnZXRJbnN0YW5jZXNCeU5hbWUobmFtZSkge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuaW5zdGFuY2VzLnZhbHVlcygpKS5maWx0ZXIoaW5zdGFuY2UgPT4gaW5zdGFuY2UubmFtZSA9PT0gbmFtZSk7XG4gIH1cblxuICAvKipcbiAgICogRmluZCBhbiBleGlzdGluZyBpbnN0YW5jZSBieSBjb21wb25lbnQgbmFtZSBhbmQgc2VsZWN0b3JcbiAgICovXG4gIHN0YXRpYyBmaW5kSW5zdGFuY2VCeVNlbGVjdG9yKG5hbWUsIHNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5pbnN0YW5jZXMudmFsdWVzKCkpLmZpbmQoaW5zdGFuY2UgPT4gXG4gICAgICBpbnN0YW5jZS5uYW1lID09PSBuYW1lICYmIFxuICAgICAgaW5zdGFuY2Uuc2VsZWN0b3IgPT09IHNlbGVjdG9yICYmXG4gICAgICBpbnN0YW5jZS5zdGF0ZSAhPT0gJ2ZhaWxlZCdcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmQgYW4gZXhpc3RpbmcgaW5zdGFuY2UgYnkgRE9NIGVsZW1lbnQgc2VsZWN0b3IgKHJlZ2FyZGxlc3Mgb2YgY29tcG9uZW50IG5hbWUpXG4gICAqL1xuICBzdGF0aWMgZmluZEluc3RhbmNlQnlFbGVtZW50KHNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5pbnN0YW5jZXMudmFsdWVzKCkpLmZpbmQoaW5zdGFuY2UgPT4gXG4gICAgICBpbnN0YW5jZS5zZWxlY3RvciA9PT0gc2VsZWN0b3IgJiZcbiAgICAgIGluc3RhbmNlLnN0YXRlICE9PSAnZmFpbGVkJ1xuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogRGV0ZXJtaW5lIGlmIGEgc2VsZWN0b3Igc2hvdWxkIGJlIHRyZWF0ZWQgYXMgc2luZ2xldG9uIChvbmUgaW5zdGFuY2UgcGVyIERPTSBlbGVtZW50KVxuICAgKi9cbiAgc3RhdGljIGlzU2luZ2xldG9uU2VsZWN0b3Ioc2VsZWN0b3IpIHtcbiAgICBpZiAoIXNlbGVjdG9yKSByZXR1cm4gZmFsc2U7XG4gICAgXG4gICAgLy8gSUQgc2VsZWN0b3JzIGFyZSBhbHdheXMgc2luZ2xldG9uXG4gICAgaWYgKHNlbGVjdG9yLnN0YXJ0c1dpdGgoJyMnKSkgcmV0dXJuIHRydWU7XG4gICAgXG4gICAgLy8gU3BlY2lmaWMgc2luZ2xldG9uIHNlbGVjdG9ycyBmb3IgdGhpcyBhcHBcbiAgICBjb25zdCBzaW5nbGV0b25TZWxlY3RvcnMgPSBbXG4gICAgICAnYm9keScsXG4gICAgICAnaHRtbCcsXG4gICAgICAnaGVhZCcsXG4gICAgICAnW2RhdGEtY29tcG9uZW50PVwibmF2aWdhdGlvbi10b3BiYXJcIl0nLFxuICAgICAgJ1tkYXRhLWNvbXBvbmVudD1cIm5hdmlnYXRpb24tc2lkZWJhci1sZWZ0XCJdJyxcbiAgICAgICdbZGF0YS1jb21wb25lbnQ9XCJwZXJmb3JtYW5jZS1vcHRpbWl6ZXJcIl0nXG4gICAgXTtcbiAgICBcbiAgICByZXR1cm4gc2luZ2xldG9uU2VsZWN0b3JzLmluY2x1ZGVzKHNlbGVjdG9yKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXN0cm95IGEgY29tcG9uZW50IGluc3RhbmNlXG4gICAqL1xuICBzdGF0aWMgZGVzdHJveShpZCkge1xuICAgIGNvbnN0IGluc3RhbmNlID0gdGhpcy5pbnN0YW5jZXMuZ2V0KGlkKTtcbiAgICBpZiAoaW5zdGFuY2UpIHtcbiAgICAgIGluc3RhbmNlLmRlc3Ryb3koKTtcbiAgICAgIHRoaXMuaW5zdGFuY2VzLmRlbGV0ZShpZCk7XG4gICAgICBsb2cuZGVidWcoYERlc3Ryb3llZCBjb21wb25lbnQgaW5zdGFuY2U6ICR7aWR9YCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERlc3Ryb3kgYWxsIGluc3RhbmNlcyBvZiBhIGNvbXBvbmVudFxuICAgKi9cbiAgc3RhdGljIGRlc3Ryb3lCeU5hbWUobmFtZSkge1xuICAgIGNvbnN0IGluc3RhbmNlcyA9IHRoaXMuZ2V0SW5zdGFuY2VzQnlOYW1lKG5hbWUpO1xuICAgIGluc3RhbmNlcy5mb3JFYWNoKGluc3RhbmNlID0+IHRoaXMuZGVzdHJveShpbnN0YW5jZS5pZCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIERlc3Ryb3kgYWxsIGNvbXBvbmVudCBpbnN0YW5jZXNcbiAgICovXG4gIHN0YXRpYyBkZXN0cm95QWxsKCkge1xuICAgIGxvZy5pbmZvKCdEZXN0cm95aW5nIGFsbCBjb21wb25lbnQgaW5zdGFuY2VzJyk7XG4gICAgZXZlbnRCdXMuZW1pdCgnY29tcG9uZW50OmRlc3Ryb3ktYWxsJyk7XG4gICAgXG4gICAgdGhpcy5pbnN0YW5jZXMuZm9yRWFjaCgoaW5zdGFuY2UsIGlkKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBpbnN0YW5jZS5kZXN0cm95KCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBsb2cud2FybihgRXJyb3IgZGVzdHJveWluZyBjb21wb25lbnQgJHtpZH06YCwgZXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIHRoaXMuaW5zdGFuY2VzLmNsZWFyKCk7XG4gIH1cblxuICAvKipcbiAgICogQXV0by1kaXNjb3ZlciBjb21wb25lbnRzIGluIHRoZSBET01cbiAgICovXG4gIHN0YXRpYyBhdXRvRGlzY292ZXIoKSB7XG4gICAgaWYgKCF0aGlzLmF1dG9EaXNjb3ZlcnkpIHJldHVybjtcblxuICAgIC8vIFVzZSByZXF1ZXN0SWRsZUNhbGxiYWNrIHRvIGF2b2lkIGJsb2NraW5nIHRoZSBtYWluIHRocmVhZFxuICAgIHJlcXVlc3RJZGxlVGltZSgoKSA9PiB7XG4gICAgICB0aGlzLmRpc2NvdmVyQW5kTG9hZENvbXBvbmVudHMoKTtcbiAgICB9LCB7IHByaW9yaXR5OiAnbG93JyB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZS1pbml0aWFsaXplIGNvbXBvbmVudHMgYWZ0ZXIgcGFnZSByZXN0b3JhdGlvbiBmcm9tIGNhY2hlXG4gICAqIFRoaXMgbWV0aG9kIHNwZWNpZmljYWxseSBoYW5kbGVzIHRoZSBjYXNlIHdoZXJlIHRoZSBwYWdlIHdhcyByZXN0b3JlZFxuICAgKiBmcm9tIGJyb3dzZXIgY2FjaGUgYW5kIGNvbXBvbmVudHMgbWF5IG5vdCBiZSB3b3JraW5nIHByb3Blcmx5XG4gICAqL1xuICBzdGF0aWMgcmVpbml0aWFsaXplQWZ0ZXJDYWNoZVJlc3RvcmUoKSB7XG4gICAgbG9nLmluZm8oJ1JlaW5pdGlhbGl6aW5nIGNvbXBvbmVudHMgYWZ0ZXIgY2FjaGUgcmVzdG9yYXRpb24uLi4nKTtcbiAgICBcbiAgICAvLyBGaW5kIGFsbCBmYWlsZWQgb3IgYnJva2VuIGNvbXBvbmVudCBpbnN0YW5jZXNcbiAgICBjb25zdCBicm9rZW5JbnN0YW5jZXMgPSBBcnJheS5mcm9tKHRoaXMuaW5zdGFuY2VzLnZhbHVlcygpKS5maWx0ZXIoaW5zdGFuY2UgPT4ge1xuICAgICAgLy8gQ2hlY2sgaWYgdGhlIGNvbXBvbmVudCdzIERPTSBlbGVtZW50IHN0aWxsIGV4aXN0cyBhbmQgaXMgZnVuY3Rpb25hbFxuICAgICAgaWYgKCFpbnN0YW5jZS5lbGVtZW50IHx8ICFkb2N1bWVudC5jb250YWlucyhpbnN0YW5jZS5lbGVtZW50KSkge1xuICAgICAgICBsb2cuZGVidWcoYENvbXBvbmVudCAke2luc3RhbmNlLmlkfSBlbGVtZW50IG5vIGxvbmdlciBleGlzdHNgKTtcbiAgICAgICAgcmV0dXJuIHRydWU7IC8vIEVsZW1lbnQgZG9lc24ndCBleGlzdCBhbnltb3JlXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIGNvbXBvbmVudCBpcyBpbiBhIGZhaWxlZCBzdGF0ZVxuICAgICAgaWYgKGluc3RhbmNlLnN0YXRlID09PSAnZmFpbGVkJyB8fCBpbnN0YW5jZS5zdGF0ZSA9PT0gJ2Rlc3Ryb3llZCcpIHtcbiAgICAgICAgbG9nLmRlYnVnKGBDb21wb25lbnQgJHtpbnN0YW5jZS5pZH0gaXMgaW4gZmFpbGVkL2Rlc3Ryb3llZCBzdGF0ZWApO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gRW5oYW5jZWQgZGV0ZWN0aW9uIGZvciBzcGVjaWZpYyBjb21wb25lbnQgdHlwZXNcbiAgICAgIGlmIChpbnN0YW5jZS5uYW1lID09PSAnbmF2aWdhdGlvbi1zaWRlYmFyLWxlZnQnKSB7XG4gICAgICAgIC8vIENoZWNrIGlmIHNpZGViYXIgZnVuY3Rpb25hbGl0eSBpcyB3b3JraW5nXG4gICAgICAgIGlmICh0aGlzLmlzU2lkZWJhckJyb2tlbihpbnN0YW5jZSkpIHtcbiAgICAgICAgICBsb2cuZGVidWcoYFNpZGViYXIgY29tcG9uZW50ICR7aW5zdGFuY2UuaWR9IGFwcGVhcnMgYnJva2VuYCk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gR2VuZXJpYyBjaGVjayBmb3IgYW55IGNvbXBvbmVudCB0aGF0IG1pZ2h0IGhhdmUgbG9zdCBpdHMgZXZlbnQgbGlzdGVuZXJzXG4gICAgICBpZiAodGhpcy5oYXNMb3N0RXZlbnRMaXN0ZW5lcnMoaW5zdGFuY2UpKSB7XG4gICAgICAgIGxvZy5kZWJ1ZyhgQ29tcG9uZW50ICR7aW5zdGFuY2UuaWR9IGFwcGVhcnMgdG8gaGF2ZSBsb3N0IGV2ZW50IGxpc3RlbmVyc2ApO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuICAgIFxuICAgIC8vIEFsc28gbG9vayBmb3IgRE9NIGVsZW1lbnRzIHRoYXQgc2hvdWxkIGhhdmUgY29tcG9uZW50cyBidXQgZG9uJ3RcbiAgICBjb25zdCBtaXNzaW5nQ29tcG9uZW50cyA9IHRoaXMuZmluZE1pc3NpbmdDb21wb25lbnRzKCk7XG4gICAgXG4gICAgLy8gRGVzdHJveSBicm9rZW4gaW5zdGFuY2VzXG4gICAgYnJva2VuSW5zdGFuY2VzLmZvckVhY2goaW5zdGFuY2UgPT4ge1xuICAgICAgbG9nLmRlYnVnKGBEZXN0cm95aW5nIGJyb2tlbiBjb21wb25lbnQgaW5zdGFuY2U6ICR7aW5zdGFuY2UuaWR9YCk7XG4gICAgICB0aGlzLmRlc3Ryb3koaW5zdGFuY2UuaWQpO1xuICAgIH0pO1xuICAgIFxuICAgIC8vIFJlLWRpc2NvdmVyIGFuZCBsb2FkIGNvbXBvbmVudHNcbiAgICB0aGlzLmRpc2NvdmVyQW5kTG9hZENvbXBvbmVudHMoKTtcbiAgICBcbiAgICBjb25zdCB0b3RhbEZpeGVkID0gYnJva2VuSW5zdGFuY2VzLmxlbmd0aCArIG1pc3NpbmdDb21wb25lbnRzO1xuICAgIGxvZy5pbmZvKGBSZWluaXRpYWxpemVkICR7YnJva2VuSW5zdGFuY2VzLmxlbmd0aH0gYnJva2VuIGNvbXBvbmVudHMsIGZvdW5kICR7bWlzc2luZ0NvbXBvbmVudHN9IG1pc3NpbmcgY29tcG9uZW50c2ApO1xuICAgIFxuICAgIHJldHVybiB0b3RhbEZpeGVkO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHNpZGViYXIgY29tcG9uZW50IGlzIGJyb2tlblxuICAgKi9cbiAgc3RhdGljIGlzU2lkZWJhckJyb2tlbihpbnN0YW5jZSkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB0b2dnbGVzID0gaW5zdGFuY2UuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2lkZWJhci1pdGVtX190b2dnbGUnKTtcbiAgICAgIGlmICh0b2dnbGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIGZhbHNlO1xuICAgICAgXG4gICAgICAvLyBUZXN0IGlmIGNsaWNrIGhhbmRsZXIgZXhpc3RzXG4gICAgICBjb25zdCBmaXJzdFRvZ2dsZSA9IHRvZ2dsZXNbMF07XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIHRoZSB0b2dnbGUgaGFzIHRoZSBleHBlY3RlZCBldmVudCBsaXN0ZW5lcnNcbiAgICAgIC8vIE5vdGU6IFdlIGNhbid0IGRpcmVjdGx5IGNoZWNrIGFkZEV2ZW50TGlzdGVuZXIsIGJ1dCB3ZSBjYW4gdGVzdCBpZiB0aGUgY29tcG9uZW50IGhhcyBpdHMgdG9nZ2xlcyBhcnJheVxuICAgICAgaWYgKGluc3RhbmNlLnRvZ2dsZXMgJiYgaW5zdGFuY2UudG9nZ2xlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIHRoZSBlbGVtZW50IGhhcyBwcm9wZXIgYXJpYSBhdHRyaWJ1dGVzIHRoYXQgd291bGQgaW5kaWNhdGUgaXQncyBpbml0aWFsaXplZFxuICAgICAgaWYgKCFmaXJzdFRvZ2dsZS5oYXNBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2cud2FybihgRXJyb3IgY2hlY2tpbmcgc2lkZWJhciBjb21wb25lbnQgJHtpbnN0YW5jZS5pZH06YCwgZXJyb3IpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGNvbXBvbmVudCBoYXMgbG9zdCBpdHMgZXZlbnQgbGlzdGVuZXJzIChlbmhhbmNlZCBkZXRlY3Rpb24pXG4gICAqL1xuICBzdGF0aWMgaGFzTG9zdEV2ZW50TGlzdGVuZXJzKGluc3RhbmNlKSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIElmIHRoZSBjb21wb25lbnQgaGFzIHNwZWNpZmljIG1ldGhvZHMgdG8gY2hlY2sgaXRzIHN0YXRlLCB1c2UgdGhlbVxuICAgICAgaWYgKHR5cGVvZiBpbnN0YW5jZS5pc0hlYWx0aHkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuICFpbnN0YW5jZS5pc0hlYWx0aHkoKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gXHVEODNEXHVERDI3IEVOSEFOQ0VEOiBDaGVjayBmb3IgdHJhY2tlZCBldmVudCBsaXN0ZW5lcnNcbiAgICAgIGlmIChpbnN0YW5jZS5ldmVudExpc3RlbmVycyAmJiBpbnN0YW5jZS5ldmVudExpc3RlbmVycy5zaXplID09PSAwKSB7XG4gICAgICAgIGxvZy5kZWJ1ZyhgQ29tcG9uZW50ICR7aW5zdGFuY2UuaWR9IGhhcyBubyB0cmFja2VkIGV2ZW50IGxpc3RlbmVyc2ApO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gXHVEODNEXHVERDI3IEVOSEFOQ0VEOiBGb3Igc2lkZWJhciBjb21wb25lbnRzLCB2ZXJpZnkgY3JpdGljYWwgZnVuY3Rpb25hbGl0eVxuICAgICAgaWYgKGluc3RhbmNlLm5hbWUgPT09ICduYXZpZ2F0aW9uLXNpZGViYXItbGVmdCcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNTaWRlYmFyTGlzdGVuZXJzQnJva2VuKGluc3RhbmNlKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gXHVEODNEXHVERDI3IEVOSEFOQ0VEOiBDaGVjayBET00gZWxlbWVudCBsaXN0ZW5lciB0cmFja2luZ1xuICAgICAgaWYgKGluc3RhbmNlLmVsZW1lbnQgJiYgaW5zdGFuY2UuZWxlbWVudC5kYXRhc2V0LmNvbXBvbmVudExpc3RlbmVycykge1xuICAgICAgICBjb25zdCBjb21wb25lbnRJZHMgPSBpbnN0YW5jZS5lbGVtZW50LmRhdGFzZXQuY29tcG9uZW50TGlzdGVuZXJzLnNwbGl0KCcsJyk7XG4gICAgICAgIGlmICghY29tcG9uZW50SWRzLmluY2x1ZGVzKGluc3RhbmNlLmlkKSkge1xuICAgICAgICAgIGxvZy5kZWJ1ZyhgQ29tcG9uZW50ICR7aW5zdGFuY2UuaWR9IG5vdCB0cmFja2VkIG9uIGl0cyBET00gZWxlbWVudGApO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nLmRlYnVnKGBFcnJvciBjaGVja2luZyBldmVudCBsaXN0ZW5lcnMgZm9yICR7aW5zdGFuY2UuaWR9OmAsIGVycm9yKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFbmhhbmNlZCBzaWRlYmFyIGxpc3RlbmVyIGhlYWx0aCBjaGVja1xuICAgKi9cbiAgc3RhdGljIGlzU2lkZWJhckxpc3RlbmVyc0Jyb2tlbihpbnN0YW5jZSkge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIWluc3RhbmNlLmVsZW1lbnQgfHwgIWluc3RhbmNlLnRvZ2dsZXMpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIHRvZ2dsZXMgaGF2ZSBwcm9wZXIgZXZlbnQgbGlzdGVuZXIgdHJhY2tpbmdcbiAgICAgIGZvciAoY29uc3QgdG9nZ2xlIG9mIGluc3RhbmNlLnRvZ2dsZXMpIHtcbiAgICAgICAgaWYgKCF0b2dnbGUuZGF0YXNldC5jb21wb25lbnRMaXN0ZW5lcnMgfHwgXG4gICAgICAgICAgICAhdG9nZ2xlLmRhdGFzZXQuY29tcG9uZW50TGlzdGVuZXJzLmluY2x1ZGVzKGluc3RhbmNlLmlkKSkge1xuICAgICAgICAgIGxvZy5kZWJ1ZyhgU2lkZWJhciB0b2dnbGUgbWlzc2luZyBsaXN0ZW5lciB0cmFja2luZyBmcm9tICR7aW5zdGFuY2UuaWR9YCk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgaWYgZXZlbnRMaXN0ZW5lcnMgbWFwIGhhcyBlbnRyaWVzIGZvciB0b2dnbGVzXG4gICAgICBpZiAoaW5zdGFuY2UuZXZlbnRMaXN0ZW5lcnMpIHtcbiAgICAgICAgY29uc3QgdG9nZ2xlQ2xpY2tMaXN0ZW5lcnMgPSBBcnJheS5mcm9tKGluc3RhbmNlLmV2ZW50TGlzdGVuZXJzLnZhbHVlcygpKVxuICAgICAgICAgIC5maWx0ZXIobGlzdGVuZXIgPT4gbGlzdGVuZXIuZXZlbnQgPT09ICdjbGljaycgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UudG9nZ2xlcy5pbmNsdWRlcyhsaXN0ZW5lci5lbGVtZW50KSk7XG4gICAgICAgIFxuICAgICAgICBpZiAodG9nZ2xlQ2xpY2tMaXN0ZW5lcnMubGVuZ3RoICE9PSBpbnN0YW5jZS50b2dnbGVzLmxlbmd0aCkge1xuICAgICAgICAgIGxvZy5kZWJ1ZyhgU2lkZWJhciBoYXMgJHt0b2dnbGVDbGlja0xpc3RlbmVycy5sZW5ndGh9IGNsaWNrIGxpc3RlbmVycyBidXQgJHtpbnN0YW5jZS50b2dnbGVzLmxlbmd0aH0gdG9nZ2xlc2ApO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nLmRlYnVnKGBFcnJvciBjaGVja2luZyBzaWRlYmFyIGxpc3RlbmVycyBmb3IgJHtpbnN0YW5jZS5pZH06YCwgZXJyb3IpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZpbmQgRE9NIGVsZW1lbnRzIHRoYXQgc2hvdWxkIGhhdmUgY29tcG9uZW50cyBidXQgZG9uJ3RcbiAgICovXG4gIHN0YXRpYyBmaW5kTWlzc2luZ0NvbXBvbmVudHMoKSB7XG4gICAgY29uc3QgZWxlbWVudHNXaXRoQ29tcG9uZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWNvbXBvbmVudF0nKTtcbiAgICBsZXQgbWlzc2luZ0NvdW50ID0gMDtcbiAgICBcbiAgICBlbGVtZW50c1dpdGhDb21wb25lbnRzLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICBjb25zdCBjb21wb25lbnROYW1lID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY29tcG9uZW50Jyk7XG4gICAgICBpZiAoY29tcG9uZW50TmFtZSAmJiB0aGlzLmNvbXBvbmVudHMuaGFzKGNvbXBvbmVudE5hbWUpKSB7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoaXMgZWxlbWVudCBoYXMgYSBjb21wb25lbnQgaW5zdGFuY2VcbiAgICAgICAgY29uc3QgaGFzSW5zdGFuY2UgPSBBcnJheS5mcm9tKHRoaXMuaW5zdGFuY2VzLnZhbHVlcygpKS5zb21lKGluc3RhbmNlID0+IFxuICAgICAgICAgIGluc3RhbmNlLmVsZW1lbnQgPT09IGVsZW1lbnQgJiYgaW5zdGFuY2UubmFtZSA9PT0gY29tcG9uZW50TmFtZVxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFoYXNJbnN0YW5jZSkge1xuICAgICAgICAgIG1pc3NpbmdDb3VudCsrO1xuICAgICAgICAgIGxvZy5kZWJ1ZyhgRm91bmQgZWxlbWVudCB3aXRob3V0IGNvbXBvbmVudCBpbnN0YW5jZTogJHtjb21wb25lbnROYW1lfWApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIG1pc3NpbmdDb3VudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNjb3ZlciBhbmQgbG9hZCBjb21wb25lbnRzIGZyb20gRE9NIHdpdGggZW5oYW5jZWQgY2xlYW51cFxuICAgKi9cbiAgc3RhdGljIGRpc2NvdmVyQW5kTG9hZENvbXBvbmVudHMoKSB7XG4gICAgdGhpcy5jbGVhbnVwT3JwaGFuZWRMaXN0ZW5lcnMoKTtcbiAgICBcbiAgICBjb25zdCBlbGVtZW50c1dpdGhDb21wb25lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtY29tcG9uZW50XScpO1xuICAgIGNvbnN0IGRpc2NvdmVyZWRDb21wb25lbnRzID0gbmV3IFNldCgpO1xuXG4gICAgZWxlbWVudHNXaXRoQ29tcG9uZW50cy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgY29uc3QgY29tcG9uZW50TmFtZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWNvbXBvbmVudCcpO1xuICAgICAgaWYgKCFjb21wb25lbnROYW1lKSByZXR1cm47XG4gICAgICBkaXNjb3ZlcmVkQ29tcG9uZW50cy5hZGQoY29tcG9uZW50TmFtZSk7XG4gICAgfSk7XG5cbiAgICBpZiAoZGlzY292ZXJlZENvbXBvbmVudHMuc2l6ZSA+IDApIHtcbiAgICAgIGxvZy5pbmZvKGBEaXNjb3ZlcmVkICR7ZGlzY292ZXJlZENvbXBvbmVudHMuc2l6ZX0gY29tcG9uZW50czogWyR7QXJyYXkuZnJvbShkaXNjb3ZlcmVkQ29tcG9uZW50cykuam9pbignLCAnKX1dYCk7XG4gICAgfVxuXG4gICAgLy8gTG9hZCBkaXNjb3ZlcmVkIGNvbXBvbmVudHMgbGF6aWx5ICh3aWxsIGltcG9ydCBvbiBkZW1hbmQpXG4gICAgQXJyYXkuZnJvbShkaXNjb3ZlcmVkQ29tcG9uZW50cykuZm9yRWFjaChjb21wb25lbnROYW1lID0+IHtcbiAgICAgIHRoaXMubG9hZChjb21wb25lbnROYW1lKTtcbiAgICB9KTtcblxuICAgIGxvZy5pbmZvKGBBdXRvLWRpc2NvdmVyZWQgYW5kIGxvYWRlZCAke2Rpc2NvdmVyZWRDb21wb25lbnRzLnNpemV9IGNvbXBvbmVudHNgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbiB1cCBvcnBoYW5lZCBldmVudCBsaXN0ZW5lciB0cmFja2luZyBmcm9tIGRlc3Ryb3llZCBjb21wb25lbnRzXG4gICAqL1xuICBzdGF0aWMgY2xlYW51cE9ycGhhbmVkTGlzdGVuZXJzKCkge1xuICAgIGNvbnN0IGVsZW1lbnRzV2l0aExpc3RlbmVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWNvbXBvbmVudC1saXN0ZW5lcnNdJyk7XG4gICAgbGV0IGNsZWFuZWRDb3VudCA9IDA7XG4gICAgXG4gICAgZWxlbWVudHNXaXRoTGlzdGVuZXJzLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICBjb25zdCBsaXN0ZW5lcklkcyA9IGVsZW1lbnQuZGF0YXNldC5jb21wb25lbnRMaXN0ZW5lcnMuc3BsaXQoJywnKTtcbiAgICAgIGNvbnN0IHZhbGlkSWRzID0gbGlzdGVuZXJJZHMuZmlsdGVyKGNvbXBvbmVudElkID0+IHtcbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB0aGlzLmluc3RhbmNlcy5nZXQoY29tcG9uZW50SWQpO1xuICAgICAgICByZXR1cm4gaW5zdGFuY2UgJiYgaW5zdGFuY2Uuc3RhdGUgIT09ICdkZXN0cm95ZWQnO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGlmICh2YWxpZElkcy5sZW5ndGggIT09IGxpc3RlbmVySWRzLmxlbmd0aCkge1xuICAgICAgICBjbGVhbmVkQ291bnQrKztcbiAgICAgICAgaWYgKHZhbGlkSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBlbGVtZW50LmRhdGFzZXQuY29tcG9uZW50TGlzdGVuZXJzID0gdmFsaWRJZHMuam9pbignLCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRlbGV0ZSBlbGVtZW50LmRhdGFzZXQuY29tcG9uZW50TGlzdGVuZXJzO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgaWYgKGNsZWFuZWRDb3VudCA+IDApIHtcbiAgICAgIGxvZy5pbmZvKGBDbGVhbmVkIHVwIG9ycGhhbmVkIGxpc3RlbmVycyBmcm9tICR7Y2xlYW5lZENvdW50fSBlbGVtZW50c2ApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFbmFibGUgcmVhY3RpdmUgRE9NIGRpc2NvdmVyeVxuICAgKi9cbiAgc3RhdGljIGVuYWJsZVJlYWN0aXZlRGlzY292ZXJ5KCkge1xuICAgIGlmICghd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXIpIHtcbiAgICAgIGxvZy53YXJuKCdNdXRhdGlvbk9ic2VydmVyIG5vdCBzdXBwb3J0ZWQsIHJlYWN0aXZlIGRpc2NvdmVyeSBkaXNhYmxlZCcpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmlzUmVhY3RpdmVFbmFibGVkKSB7XG4gICAgICBsb2cuZGVidWcoJ1JlYWN0aXZlIGRpc2NvdmVyeSBhbHJlYWR5IGVuYWJsZWQnKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGxvZy5pbmZvKCdcdUQ4M0RcdURFODAgRW5hYmxpbmcgcmVhY3RpdmUgRE9NIGRpc2NvdmVyeS4uLicpO1xuXG4gICAgdGhpcy5yZWFjdGl2ZU9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKG11dGF0aW9ucykgPT4ge1xuICAgICAgLy8gVXNlIHJlcXVlc3RJZGxlQ2FsbGJhY2sgdG8gYXZvaWQgYmxvY2tpbmcgdGhlIG1haW4gdGhyZWFkXG4gICAgICByZXF1ZXN0SWRsZVRpbWUoKCkgPT4ge1xuICAgICAgICB0aGlzLmhhbmRsZURPTU11dGF0aW9ucyhtdXRhdGlvbnMpO1xuICAgICAgfSwgeyBwcmlvcml0eTogJ2xvdycgfSk7XG4gICAgfSk7XG5cbiAgICAvLyBPYnNlcnZlIGFsbCBET00gY2hhbmdlc1xuICAgIHRoaXMucmVhY3RpdmVPYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHtcbiAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcbiAgICAgIHN1YnRyZWU6IHRydWUsXG4gICAgICBhdHRyaWJ1dGVzOiB0cnVlLFxuICAgICAgYXR0cmlidXRlRmlsdGVyOiBbJ2RhdGEtY29tcG9uZW50JywgJ2RhdGEtY29tcG9uZW50LWlkJ11cbiAgICB9KTtcblxuICAgIHRoaXMuaXNSZWFjdGl2ZUVuYWJsZWQgPSB0cnVlO1xuICAgIFxuICAgIC8vIEVtaXQgZXZlbnQgZm9yIG90aGVyIGNvbXBvbmVudHNcbiAgICBldmVudEJ1cy5lbWl0KCdjb21wb25lbnQtbWFuYWdlcjpyZWFjdGl2ZS1lbmFibGVkJyk7XG4gICAgXG4gICAgbG9nLmluZm8oJ1x1MjcwNSBSZWFjdGl2ZSBET00gZGlzY292ZXJ5IGVuYWJsZWQnKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgRE9NIG11dGF0aW9ucyBmb3IgcmVhY3RpdmUgZW5oYW5jZW1lbnRcbiAgICovXG4gIHN0YXRpYyBoYW5kbGVET01NdXRhdGlvbnMobXV0YXRpb25zKSB7XG4gICAgY29uc3QgZW5oYW5jZWRFbGVtZW50cyA9IG5ldyBTZXQoKTtcbiAgICBsZXQgbmV3Q29tcG9uZW50Q291bnQgPSAwO1xuXG4gICAgLy8gVGhyb3R0bGUgbXV0YXRpb24gaGFuZGxpbmcgdG8gcHJldmVudCBpbmZpbml0ZSBsb29wc1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgaWYgKG5vdyAtIHRoaXMubGFzdEFjdGl2aXR5IDwgNTAwKSB7XG4gICAgICByZXR1cm47IC8vIFNraXAgaWYgdG9vIHJlY2VudCAtIGluY3JlYXNlZCB0byA1MDBtc1xuICAgIH1cblxuICAgIG11dGF0aW9ucy5mb3JFYWNoKG11dGF0aW9uID0+IHtcbiAgICAgIC8vIEhhbmRsZSBhZGRlZCBub2Rlc1xuICAgICAgaWYgKG11dGF0aW9uLnR5cGUgPT09ICdjaGlsZExpc3QnICYmIG11dGF0aW9uLmFkZGVkTm9kZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBtdXRhdGlvbi5hZGRlZE5vZGVzLmZvckVhY2gobm9kZSA9PiB7XG4gICAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IDEpIHsgLy8gRWxlbWVudCBub2RlXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgbm9kZSBpdHNlbGYgaGFzIGEgY29tcG9uZW50XG4gICAgICAgICAgICBjb25zdCBjb21wb25lbnROYW1lID0gbm9kZS5nZXRBdHRyaWJ1dGU/LignZGF0YS1jb21wb25lbnQnKTtcbiAgICAgICAgICAgIGlmIChjb21wb25lbnROYW1lICYmIFxuICAgICAgICAgICAgICAgICFub2RlLmhhc0F0dHJpYnV0ZSgnZGF0YS1jb21wb25lbnQtaWQnKSAmJiBcbiAgICAgICAgICAgICAgICAhbm9kZS5oYXNBdHRyaWJ1dGUoJ2RhdGEtY29tcG9uZW50LXByb2Nlc3NpbmcnKSkge1xuICAgICAgICAgICAgICBlbmhhbmNlZEVsZW1lbnRzLmFkZChub2RlKTtcbiAgICAgICAgICAgICAgbmV3Q29tcG9uZW50Q291bnQrKztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ2hlY2sgZGVzY2VuZGFudHMgZm9yIGNvbXBvbmVudHNcbiAgICAgICAgICAgIGNvbnN0IGRlc2NlbmRhbnRzID0gbm9kZS5xdWVyeVNlbGVjdG9yQWxsPy4oJ1tkYXRhLWNvbXBvbmVudF06bm90KFtkYXRhLWNvbXBvbmVudC1pZF0pOm5vdChbZGF0YS1jb21wb25lbnQtcHJvY2Vzc2luZ10pJyk7XG4gICAgICAgICAgICBkZXNjZW5kYW50cz8uZm9yRWFjaChkZXNjZW5kYW50ID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgZGVzY2VuZGFudENvbXBvbmVudCA9IGRlc2NlbmRhbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWNvbXBvbmVudCcpO1xuICAgICAgICAgICAgICBpZiAoZGVzY2VuZGFudENvbXBvbmVudCAmJiB0aGlzLmNvbXBvbmVudHMuaGFzKGRlc2NlbmRhbnRDb21wb25lbnQpKSB7XG4gICAgICAgICAgICAgICAgZW5oYW5jZWRFbGVtZW50cy5hZGQoZGVzY2VuZGFudCk7XG4gICAgICAgICAgICAgICAgbmV3Q29tcG9uZW50Q291bnQrKztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gSGFuZGxlIGF0dHJpYnV0ZSBjaGFuZ2VzXG4gICAgICBpZiAobXV0YXRpb24udHlwZSA9PT0gJ2F0dHJpYnV0ZXMnICYmIG11dGF0aW9uLmF0dHJpYnV0ZU5hbWUgPT09ICdkYXRhLWNvbXBvbmVudCcpIHtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IG11dGF0aW9uLnRhcmdldDtcbiAgICAgICAgY29uc3QgY29tcG9uZW50TmFtZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWNvbXBvbmVudCcpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGNvbXBvbmVudE5hbWUgJiYgXG4gICAgICAgICAgICAhZWxlbWVudC5oYXNBdHRyaWJ1dGUoJ2RhdGEtY29tcG9uZW50LWlkJykgJiYgXG4gICAgICAgICAgICAhZWxlbWVudC5oYXNBdHRyaWJ1dGUoJ2RhdGEtY29tcG9uZW50LXByb2Nlc3NpbmcnKSkge1xuICAgICAgICAgIGVuaGFuY2VkRWxlbWVudHMuYWRkKGVsZW1lbnQpO1xuICAgICAgICAgIG5ld0NvbXBvbmVudENvdW50Kys7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChuZXdDb21wb25lbnRDb3VudCA+IDApIHtcbiAgICAgIGxvZy5pbmZvKGBSZWFjdGl2ZWx5IGVuaGFuY2VkICR7bmV3Q29tcG9uZW50Q291bnR9IG5ldyBjb21wb25lbnRzYCk7XG4gICAgICBcbiAgICAgIC8vIExvYWQgbmV3IGNvbXBvbmVudHNcbiAgICAgIGVuaGFuY2VkRWxlbWVudHMuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgICAgY29uc3QgY29tcG9uZW50TmFtZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWNvbXBvbmVudCcpO1xuICAgICAgICAvLyBNYXJrIGFzIHByb2Nlc3NpbmcgaW1tZWRpYXRlbHkgdG8gcHJldmVudCByZS1wcm9jZXNzaW5nXG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLWNvbXBvbmVudC1wcm9jZXNzaW5nJywgJ3RydWUnKTtcbiAgICAgICAgdGhpcy5sb2FkKGNvbXBvbmVudE5hbWUsIHsgZWxlbWVudCB9KS50aGVuKCgpID0+IHtcbiAgICAgICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1jb21wb25lbnQtcHJvY2Vzc2luZycpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLmxhc3RBY3Rpdml0eSA9IERhdGUubm93KCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogRGlzYWJsZSByZWFjdGl2ZSBkaXNjb3ZlcnkgYW5kIGNsZWFudXBcbiAgICovXG4gIHN0YXRpYyBkaXNhYmxlUmVhY3RpdmVEaXNjb3ZlcnkoKSB7XG4gICAgaWYgKHRoaXMucmVhY3RpdmVPYnNlcnZlcikge1xuICAgICAgdGhpcy5yZWFjdGl2ZU9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgIHRoaXMucmVhY3RpdmVPYnNlcnZlciA9IG51bGw7XG4gICAgfVxuICAgIFxuICAgIHRoaXMuaXNSZWFjdGl2ZUVuYWJsZWQgPSBmYWxzZTtcbiAgICBldmVudEJ1cy5lbWl0KCdjb21wb25lbnQtbWFuYWdlcjpyZWFjdGl2ZS1kaXNhYmxlZCcpO1xuICAgIGxvZy5pbmZvKCdSZWFjdGl2ZSBET00gZGlzY292ZXJ5IGRpc2FibGVkJyk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGNvbXBvbmVudCBzdGF0aXN0aWNzIGZvciBkZWJ1Z2dpbmdcbiAgICovXG4gIHN0YXRpYyBnZXRTdGF0cygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVnaXN0ZXJlZDogdGhpcy5jb21wb25lbnRzLnNpemUsXG4gICAgICBpbnN0YW5jZXM6IHRoaXMuaW5zdGFuY2VzLnNpemUsXG4gICAgICByZWFjdGl2ZTogdGhpcy5pc1JlYWN0aXZlRW5hYmxlZCxcbiAgICAgIGxhc3RBY3Rpdml0eTogdGhpcy5sYXN0QWN0aXZpdHlcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEVuYWJsZS9kaXNhYmxlIGF1dG8tZGlzY292ZXJ5XG4gICAqL1xuICBzdGF0aWMgc2V0QXV0b0Rpc2NvdmVyeShlbmFibGVkKSB7XG4gICAgdGhpcy5hdXRvRGlzY292ZXJ5ID0gZW5hYmxlZDtcbiAgICBsb2cuaW5mbyhgQXV0by1kaXNjb3ZlcnkgJHtlbmFibGVkID8gJ2VuYWJsZWQnIDogJ2Rpc2FibGVkJ31gKTtcbiAgICBcbiAgICBpZiAoZW5hYmxlZCkge1xuICAgICAgdGhpcy5hdXRvRGlzY292ZXIoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBjb21wb25lbnQgaXMgcmVnaXN0ZXJlZFxuICAgKi9cbiAgc3RhdGljIGlzUmVnaXN0ZXJlZChuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMuY29tcG9uZW50cy5oYXMobmFtZSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGxpc3Qgb2YgcmVnaXN0ZXJlZCBjb21wb25lbnQgbmFtZXNcbiAgICovXG4gIHN0YXRpYyBnZXRSZWdpc3RlcmVkTmFtZXMoKSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5jb21wb25lbnRzLmtleXMoKSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGNvbXBvbmVudCBpbnN0YW5jZXMgYnkgbmFtZVxuICAgKi9cbiAgc3RhdGljIGdldEluc3RhbmNlcyhjb21wb25lbnROYW1lKSB7XG4gICAgLy8gVXNlIGEgZmlsdGVyZWQgbGlzdCBmcm9tIHRoZSBpbnN0YW5jZXMgbWFwIHZhbHVlc1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuaW5zdGFuY2VzLnZhbHVlcygpKS5maWx0ZXIoaW5zdGFuY2UgPT4gaW5zdGFuY2UubmFtZSA9PT0gY29tcG9uZW50TmFtZSk7XG4gIH1cblxuICAvKipcbiAgICogVXRpbGl0eSBtZXRob2RzIHJlLWV4cG9ydGVkIGZvciBjb252ZW5pZW5jZVxuICAgKi9cbiAgc3RhdGljIHdhaXRGb3JET00gPSB3YWl0Rm9yRE9NO1xuICBzdGF0aWMgd2FpdEZvckVsZW1lbnQgPSB3YWl0Rm9yRWxlbWVudDtcbiAgc3RhdGljIGlzRWxlbWVudFZpc2libGUgPSBpc0VsZW1lbnRWaXNpYmxlO1xuICBzdGF0aWMgc2Nyb2xsVG9FbGVtZW50ID0gc2Nyb2xsVG9FbGVtZW50O1xufVxuXG5cbmV4cG9ydCB7IENvbXBvbmVudCwgQ29tcG9uZW50TWFuYWdlciB9O1xuZXhwb3J0IGRlZmF1bHQgQ29tcG9uZW50TWFuYWdlcjsiLCAiLyoqXG4gKiBNaWxvQ29yZSAtIENlbnRyYWwgb3JjaGVzdHJhdG9yIGZvciB0aGUgTWlsb0RvY3MgSmF2YVNjcmlwdCBzeXN0ZW1cbiAqIEhhbmRsZXMgZW52aXJvbm1lbnQgZGV0ZWN0aW9uLCBmZWF0dXJlIGluaXRpYWxpemF0aW9uLCBhbmQgY29tcG9uZW50IGNvb3JkaW5hdGlvblxuICovXG5cbmltcG9ydCB7IGV2ZW50QnVzIH0gZnJvbSAnLi9FdmVudEJ1cy5qcyc7XG5pbXBvcnQgQ29tcG9uZW50TWFuYWdlciBmcm9tICcuL0NvbXBvbmVudE1hbmFnZXIuanMnO1xuaW1wb3J0IHsgcmVhZHkgfSBmcm9tICcuLi91dGlscy9kb20uanMnO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnLi4vdXRpbHMvTG9nZ2VyLmpzJztcblxuY29uc3QgbG9nID0gbG9nZ2VyLmNvbXBvbmVudCgnTWlsb0NvcmUnKTtcblxuZXhwb3J0IGNsYXNzIE1pbG9Db3JlIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy52ZXJzaW9uID0gJzIuMC4wJztcbiAgICB0aGlzLmVudmlyb25tZW50ID0gbnVsbDtcbiAgICB0aGlzLmZlYXR1cmVzID0gbmV3IFNldCgpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICB0aGlzLnBlcmZvcm1hbmNlID0ge1xuICAgICAgc3RhcnRUaW1lOiBwZXJmb3JtYW5jZS5ub3coKSxcbiAgICAgIGluaXRUaW1lOiBudWxsLFxuICAgICAgY29tcG9uZW50czogbmV3IE1hcCgpXG4gICAgfTtcbiAgICBcbiAgICAvLyBCaW5kIG1ldGhvZHNcbiAgICB0aGlzLmhhbmRsZUVycm9yID0gdGhpcy5oYW5kbGVFcnJvci5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaGFuZGxlVW5sb2FkID0gdGhpcy5oYW5kbGVVbmxvYWQuYmluZCh0aGlzKTtcbiAgICBcbiAgICAvLyBHbG9iYWwgZXJyb3IgaGFuZGxpbmdcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCB0aGlzLmhhbmRsZUVycm9yKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndW5oYW5kbGVkcmVqZWN0aW9uJywgdGhpcy5oYW5kbGVFcnJvcik7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIHRoaXMuaGFuZGxlVW5sb2FkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIHRoZSBjb3JlIHN5c3RlbVxuICAgKi9cbiAgYXN5bmMgaW5pdCgpIHtcbiAgICBpZiAodGhpcy5pbml0aWFsaXplZCkge1xuICAgICAgbG9nLndhcm4oJ01pbG9Db3JlIGFscmVhZHkgaW5pdGlhbGl6ZWQnKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBsb2cuaW5mbyhgTWlsb0RvY3MgQ29yZSB2JHt0aGlzLnZlcnNpb259IGluaXRpYWxpemluZy4uLmApO1xuICAgICAgXG4gICAgICAvLyBEZXRlY3QgZW52aXJvbm1lbnQgYW5kIGNhcGFiaWxpdGllc1xuICAgICAgdGhpcy5lbnZpcm9ubWVudCA9IHRoaXMuZGV0ZWN0RW52aXJvbm1lbnQoKTtcbiAgICAgIHRoaXMubG9nRW52aXJvbm1lbnQoKTtcbiAgICAgIFxuICAgICAgLy8gSW5pdGlhbGl6ZSBjb3JlIGZlYXR1cmVzXG4gICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemVDb3JlRmVhdHVyZXMoKTtcbiAgICAgIFxuICAgICAgLy8gU2V0dXAgY29tcG9uZW50IHN5c3RlbVxuICAgICAgdGhpcy5zZXR1cENvbXBvbmVudFN5c3RlbSgpO1xuICAgICAgXG4gICAgICAvLyBMb2FkIGNyaXRpY2FsIGNvbXBvbmVudHNcbiAgICAgIGF3YWl0IHRoaXMubG9hZENyaXRpY2FsQ29tcG9uZW50cygpO1xuICAgICAgXG4gICAgICAvLyBBdXRvLWRpc2NvdmVyIHBhZ2UgY29tcG9uZW50c1xuICAgICAgYXdhaXQgdGhpcy5kaXNjb3ZlckFuZExvYWRDb21wb25lbnRzKCk7XG4gICAgICBcbiAgICAgIC8vIFNldHVwIGdsb2JhbCBldmVudHMgYW5kIHNob3J0Y3V0c1xuICAgICAgdGhpcy5zZXR1cEdsb2JhbEV2ZW50cygpO1xuICAgICAgXG4gICAgICB0aGlzLmluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgIHRoaXMucGVyZm9ybWFuY2UuaW5pdFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZTtcbiAgICAgIFxuICAgICAgLy8gRW1pdCByZWFkeSBldmVudFxuICAgICAgZXZlbnRCdXMuZW1pdCgnbWlsbzpyZWFkeScsIHtcbiAgICAgICAgdmVyc2lvbjogdGhpcy52ZXJzaW9uLFxuICAgICAgICBlbnZpcm9ubWVudDogdGhpcy5lbnZpcm9ubWVudCxcbiAgICAgICAgcGVyZm9ybWFuY2U6IHRoaXMucGVyZm9ybWFuY2VcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBsb2cuaW5mbyhgTWlsb0RvY3MgaW5pdGlhbGl6ZWQgaW4gJHt0aGlzLnBlcmZvcm1hbmNlLmluaXRUaW1lLnRvRml4ZWQoMil9bXNgKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nLmVycm9yKCdNaWxvRG9jcyBpbml0aWFsaXphdGlvbiBmYWlsZWQ6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERldGVjdCBlbnZpcm9ubWVudCBhbmQgY2FwYWJpbGl0aWVzXG4gICAqL1xuICBkZXRlY3RFbnZpcm9ubWVudCgpIHtcbiAgICBjb25zdCBlbnYgPSB3aW5kb3cuSHVnb0Vudmlyb25tZW50IHx8IHt9O1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICAvLyBIdWdvIGVudmlyb25tZW50IGRhdGFcbiAgICAgIGh1Z286IHtcbiAgICAgICAgZW52aXJvbm1lbnQ6IGVudi5lbnZpcm9ubWVudCB8fCAnZGV2ZWxvcG1lbnQnLFxuICAgICAgICBpc1Byb2R1Y3Rpb246IGVudi5pc1Byb2R1Y3Rpb24gfHwgZmFsc2UsXG4gICAgICAgIGRlYnVnOiBlbnYuZGVidWcgfHwgZmFsc2UsXG4gICAgICAgIGJhc2VVUkw6IGVudi5iYXNlVVJMIHx8ICcnLFxuICAgICAgICB2ZXJzaW9uOiBlbnYudmVyc2lvbiB8fCAndW5rbm93bicsXG4gICAgICAgIGJ1aWxkVGltZTogZW52LmJ1aWxkVGltZSA/IG5ldyBEYXRlKHBhcnNlSW50KGVudi5idWlsZFRpbWUpKSA6IG5ldyBEYXRlKClcbiAgICAgIH0sXG4gICAgICBcbiAgICAgIC8vIEJyb3dzZXIgY2FwYWJpbGl0aWVzXG4gICAgICBicm93c2VyOiB7XG4gICAgICAgIHVzZXJBZ2VudDogbmF2aWdhdG9yLnVzZXJBZ2VudCxcbiAgICAgICAgbGFuZ3VhZ2U6IG5hdmlnYXRvci5sYW5ndWFnZSxcbiAgICAgICAgb25saW5lOiBuYXZpZ2F0b3Iub25MaW5lLFxuICAgICAgICBwbGF0Zm9ybTogbmF2aWdhdG9yLnBsYXRmb3JtLFxuICAgICAgICBjb29raWVFbmFibGVkOiBuYXZpZ2F0b3IuY29va2llRW5hYmxlZCxcbiAgICAgICAgZG9Ob3RUcmFjazogbmF2aWdhdG9yLmRvTm90VHJhY2sgPT09ICcxJ1xuICAgICAgfSxcbiAgICAgIFxuICAgICAgLy8gRmVhdHVyZSBkZXRlY3Rpb25cbiAgICAgIGZlYXR1cmVzOiB7XG4gICAgICAgIGxvY2FsU3RvcmFnZTogdGhpcy50ZXN0TG9jYWxTdG9yYWdlKCksXG4gICAgICAgIGludGVyc2VjdGlvbk9ic2VydmVyOiAnSW50ZXJzZWN0aW9uT2JzZXJ2ZXInIGluIHdpbmRvdyxcbiAgICAgICAgcmVzaXplT2JzZXJ2ZXI6ICdSZXNpemVPYnNlcnZlcicgaW4gd2luZG93LFxuICAgICAgICBtdXRhdGlvbk9ic2VydmVyOiAnTXV0YXRpb25PYnNlcnZlcicgaW4gd2luZG93LFxuICAgICAgICBwZXJmb3JtYW5jZU9ic2VydmVyOiAnUGVyZm9ybWFuY2VPYnNlcnZlcicgaW4gd2luZG93LFxuICAgICAgICB3ZWJnbDogdGhpcy50ZXN0V2ViR0woKSxcbiAgICAgICAgdG91Y2hFdmVudHM6ICdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdyxcbiAgICAgICAgZGFya01vZGVRdWVyeTogd2luZG93Lm1hdGNoTWVkaWEoJyhwcmVmZXJzLWNvbG9yLXNjaGVtZTogZGFyayknKS5tYXRjaGVzLFxuICAgICAgICByZWR1Y2VkTW90aW9uOiB3aW5kb3cubWF0Y2hNZWRpYSgnKHByZWZlcnMtcmVkdWNlZC1tb3Rpb246IHJlZHVjZSknKS5tYXRjaGVzLFxuICAgICAgICBoaWdoQ29udHJhc3Q6IHdpbmRvdy5tYXRjaE1lZGlhKCcocHJlZmVycy1jb250cmFzdDogaGlnaCknKS5tYXRjaGVzXG4gICAgICB9LFxuICAgICAgXG4gICAgICAvLyBEZXZpY2UgaW5mb3JtYXRpb25cbiAgICAgIGRldmljZToge1xuICAgICAgICBpc01vYmlsZTogL01vYml8QW5kcm9pZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksXG4gICAgICAgIGlzVGFibGV0OiAvVGFibGV0fGlQYWQvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLFxuICAgICAgICBpc0Rlc2t0b3A6ICEvTW9iaXxBbmRyb2lkfFRhYmxldHxpUGFkL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxcbiAgICAgICAgcGl4ZWxSYXRpbzogd2luZG93LmRldmljZVBpeGVsUmF0aW8gfHwgMSxcbiAgICAgICAgdmlld3BvcnQ6IHtcbiAgICAgICAgICB3aWR0aDogd2luZG93LmlubmVyV2lkdGgsXG4gICAgICAgICAgaGVpZ2h0OiB3aW5kb3cuaW5uZXJIZWlnaHRcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogVGVzdCBsb2NhbFN0b3JhZ2UgYXZhaWxhYmlsaXR5XG4gICAqL1xuICB0ZXN0TG9jYWxTdG9yYWdlKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB0ZXN0ID0gJ19fbWlsb190ZXN0X18nO1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odGVzdCwgdGVzdCk7XG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSh0ZXN0KTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUZXN0IFdlYkdMIGF2YWlsYWJpbGl0eVxuICAgKi9cbiAgdGVzdFdlYkdMKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgIHJldHVybiAhIShjYW52YXMuZ2V0Q29udGV4dCgnd2ViZ2wnKSB8fCBjYW52YXMuZ2V0Q29udGV4dCgnZXhwZXJpbWVudGFsLXdlYmdsJykpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBMb2cgZW52aXJvbm1lbnQgaW5mb3JtYXRpb25cbiAgICovXG4gIGxvZ0Vudmlyb25tZW50KCkge1xuICAgIGxvZy5kZWJ1ZygnRW52aXJvbm1lbnQgRGV0ZWN0aW9uJywge1xuICAgICAgaHVnbzogdGhpcy5lbnZpcm9ubWVudC5odWdvLmVudmlyb25tZW50LFxuICAgICAgcHJvZHVjdGlvbjogdGhpcy5lbnZpcm9ubWVudC5odWdvLmlzUHJvZHVjdGlvbixcbiAgICAgIGRlYnVnOiB0aGlzLmVudmlyb25tZW50Lmh1Z28uZGVidWcsXG4gICAgICBkZXZpY2U6IHtcbiAgICAgICAgbW9iaWxlOiB0aGlzLmVudmlyb25tZW50LmRldmljZS5pc01vYmlsZSxcbiAgICAgICAgdGFibGV0OiB0aGlzLmVudmlyb25tZW50LmRldmljZS5pc1RhYmxldCxcbiAgICAgICAgZGVza3RvcDogdGhpcy5lbnZpcm9ubWVudC5kZXZpY2UuaXNEZXNrdG9wXG4gICAgICB9LFxuICAgICAgZmVhdHVyZXM6IHRoaXMuZW52aXJvbm1lbnQuZmVhdHVyZXNcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIGNvcmUgZmVhdHVyZXMgYmFzZWQgb24gZW52aXJvbm1lbnRcbiAgICovXG4gIGFzeW5jIGluaXRpYWxpemVDb3JlRmVhdHVyZXMoKSB7XG4gICAgY29uc3QgZmVhdHVyZXMgPSBbXTtcbiAgICBcbiAgICAvLyBBbHdheXMgbG9hZCBjb3JlIHV0aWxpdGllc1xuICAgIGZlYXR1cmVzLnB1c2godGhpcy5sb2FkQ29yZVV0aWxpdGllcygpKTtcbiAgICBcbiAgICAvLyBQZXJmb3JtYW5jZSBtb25pdG9yaW5nIGluIGRldmVsb3BtZW50XG4gICAgaWYgKCF0aGlzLmVudmlyb25tZW50Lmh1Z28uaXNQcm9kdWN0aW9uKSB7XG4gICAgICBmZWF0dXJlcy5wdXNoKHRoaXMuaW5pdGlhbGl6ZVBlcmZvcm1hbmNlTW9uaXRvcmluZygpKTtcbiAgICB9XG4gICAgXG4gICAgLy8gRGVidWcgZmVhdHVyZXMgaW4gZGVidWcgbW9kZVxuICAgIGlmICh0aGlzLmVudmlyb25tZW50Lmh1Z28uZGVidWcpIHtcbiAgICAgIGZlYXR1cmVzLnB1c2godGhpcy5pbml0aWFsaXplRGVidWdGZWF0dXJlcygpKTtcbiAgICB9XG4gICAgXG4gICAgLy8gRW52aXJvbm1lbnQtc3BlY2lmaWMgZmVhdHVyZXNcbiAgICBmZWF0dXJlcy5wdXNoKHRoaXMuaW5pdGlhbGl6ZUVudmlyb25tZW50RmVhdHVyZXMoKSk7XG4gICAgXG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoZmVhdHVyZXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIExvYWQgY29yZSB1dGlsaXRpZXNcbiAgICovXG4gIGFzeW5jIGxvYWRDb3JlVXRpbGl0aWVzKCkge1xuICAgIC8vIEltcG9ydCBhbmQgaW5pdGlhbGl6ZSBjb3JlIG1hbmFnZW1lbnQgdXRpbGl0aWVzXG4gICAgdHJ5IHtcbiAgICAgIC8vIEltcG9ydCB1dGlsaXRpZXMgdG8gdHJpZ2dlciB0aGVpciBpbml0aWFsaXphdGlvblxuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICBpbXBvcnQoJy4uL3V0aWxzL0Vycm9ySGFuZGxlci5qcycpLCAgICAvLyBTZXRzIHVwIGdsb2JhbCBlcnJvciBoYW5kbGVyc1xuICAgICAgICBpbXBvcnQoJy4uL3V0aWxzL05vdGlmaWNhdGlvbk1hbmFnZXIuanMnKSwgLy8gU2V0cyB1cCB3aW5kb3cudG9hc3RcbiAgICAgICAgaW1wb3J0KCcuLi91dGlscy9Mb2FkaW5nU3RhdGVNYW5hZ2VyLmpzJyksIC8vIEluamVjdHMgQ1NTIHN0eWxlc1xuICAgICAgICBpbXBvcnQoJy4uL3V0aWxzL0NvcHlNYW5hZ2VyLmpzJykgICAgICAvLyBBdmFpbGFibGUgZm9yIGNvbXBvbmVudHNcbiAgICAgIF0pO1xuICAgICAgXG4gICAgICB0aGlzLmZlYXR1cmVzLmFkZCgndXRpbGl0aWVzJyk7XG4gICAgICBsb2cuZGVidWcoJ0NvcmUgdXRpbGl0aWVzIGxvYWRlZCBhbmQgaW5pdGlhbGl6ZWQnKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nLndhcm4oJ0ZhaWxlZCB0byBsb2FkIGNvcmUgdXRpbGl0aWVzOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBwZXJmb3JtYW5jZSBtb25pdG9yaW5nXG4gICAqL1xuICBhc3luYyBpbml0aWFsaXplUGVyZm9ybWFuY2VNb25pdG9yaW5nKCkge1xuICAgIGlmICghdGhpcy5lbnZpcm9ubWVudC5mZWF0dXJlcy5wZXJmb3JtYW5jZU9ic2VydmVyKSByZXR1cm47XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIENvcmUgV2ViIFZpdGFscyBtb25pdG9yaW5nXG4gICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBQZXJmb3JtYW5jZU9ic2VydmVyKChsaXN0KSA9PiB7XG4gICAgICAgIGxpc3QuZ2V0RW50cmllcygpLmZvckVhY2goZW50cnkgPT4ge1xuICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2UuY29tcG9uZW50cy5zZXQoZW50cnkubmFtZSwgZW50cnkpO1xuICAgICAgICAgIFxuICAgICAgICAgIGxvZ2dlci5wZXJmb3JtYW5jZShlbnRyeS5uYW1lLCBgJHtlbnRyeS5kdXJhdGlvbj8udG9GaXhlZCgyKX1tc2AgfHwgJ04vQScsICdNaWxvQ29yZScpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBvYnNlcnZlci5vYnNlcnZlKHsgZW50cnlUeXBlczogWydtZWFzdXJlJywgJ25hdmlnYXRpb24nLCAncmVzb3VyY2UnXSB9KTtcbiAgICAgIHRoaXMuZmVhdHVyZXMuYWRkKCdwZXJmb3JtYW5jZS1tb25pdG9yaW5nJyk7XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nLndhcm4oJ1BlcmZvcm1hbmNlIG1vbml0b3JpbmcgZmFpbGVkIHRvIGluaXRpYWxpemU6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIGRlYnVnIGZlYXR1cmVzXG4gICAqL1xuICBhc3luYyBpbml0aWFsaXplRGVidWdGZWF0dXJlcygpIHtcbiAgICAvLyBBZGQgZGVidWcgdXRpbGl0aWVzIHRvIGdsb2JhbCBzY29wZVxuICAgIHdpbmRvdy5NaWxvRGVidWcgPSB7XG4gICAgICBjb3JlOiB0aGlzLFxuICAgICAgZXZlbnRCdXMsXG4gICAgICBDb21wb25lbnRNYW5hZ2VyLFxuICAgICAgZW52aXJvbm1lbnQ6IHRoaXMuZW52aXJvbm1lbnQsXG4gICAgICBwZXJmb3JtYW5jZTogdGhpcy5wZXJmb3JtYW5jZSxcbiAgICAgIFxuICAgICAgLy8gRGVidWcgaGVscGVyc1xuICAgICAgbGlzdENvbXBvbmVudHM6ICgpID0+IENvbXBvbmVudE1hbmFnZXIuZ2V0QWxsSW5zdGFuY2VzKCksXG4gICAgICBnZXRDb21wb25lbnQ6IChpZCkgPT4gQ29tcG9uZW50TWFuYWdlci5nZXRJbnN0YW5jZShpZCksXG4gICAgICBkZXN0cm95Q29tcG9uZW50OiAoaWQpID0+IENvbXBvbmVudE1hbmFnZXIuZGVzdHJveShpZCksXG4gICAgICBlbWl0OiAoZXZlbnQsIGRhdGEpID0+IGV2ZW50QnVzLmVtaXQoZXZlbnQsIGRhdGEpLFxuICAgICAgXG4gICAgICAvLyBQZXJmb3JtYW5jZSBoZWxwZXJzXG4gICAgICBnZXRNZXRyaWNzOiAoKSA9PiB0aGlzLnBlcmZvcm1hbmNlLFxuICAgICAgbWVhc3VyZUNvbXBvbmVudDogKG5hbWUsIGZuKSA9PiB7XG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGZuKCk7XG4gICAgICAgIGNvbnN0IGVuZCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgICBjb25zb2xlLmxvZyhgXHVEODNEXHVEQ0NBICR7bmFtZX06ICR7KGVuZCAtIHN0YXJ0KS50b0ZpeGVkKDIpfW1zYCk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfTtcbiAgICBcbiAgICAvLyBEZWJ1ZyBrZXlib2FyZCBzaG9ydGN1dHNcbiAgICB0aGlzLnNldHVwRGVidWdLZXlib2FyZHMoKTtcbiAgICBcbiAgICB0aGlzLmZlYXR1cmVzLmFkZCgnZGVidWcnKTtcbiAgICBsb2cuZGVidWcoJ0RlYnVnIGZlYXR1cmVzIGluaXRpYWxpemVkJyk7XG4gIH1cblxuICAvKipcbiAgICogU2V0dXAgZGVidWcga2V5Ym9hcmQgc2hvcnRjdXRzXG4gICAqL1xuICBzZXR1cERlYnVnS2V5Ym9hcmRzKCkge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgICAgaWYgKGUuY3RybEtleSAmJiBlLnNoaWZ0S2V5KSB7XG4gICAgICAgIHN3aXRjaCAoZS5rZXkpIHtcbiAgICAgICAgICBjYXNlICdEJzpcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGNvbnNvbGUudGFibGUodGhpcy5lbnZpcm9ubWVudCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdDJzpcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGNvbnNvbGUudGFibGUoQ29tcG9uZW50TWFuYWdlci5nZXRBbGxJbnN0YW5jZXMoKS5tYXAoYyA9PiBjLmdldFN0YXRlKCkpKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ1AnOlxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgY29uc29sZS50YWJsZSh0aGlzLnBlcmZvcm1hbmNlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ0UnOlxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXZlbnRCdXMuZ2V0RXZlbnRzKCkpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIGVudmlyb25tZW50LXNwZWNpZmljIGZlYXR1cmVzXG4gICAqL1xuICBhc3luYyBpbml0aWFsaXplRW52aXJvbm1lbnRGZWF0dXJlcygpIHtcbiAgICBjb25zdCBlbnYgPSB0aGlzLmVudmlyb25tZW50Lmh1Z28uZW52aXJvbm1lbnQ7XG4gICAgXG4gICAgc3dpdGNoIChlbnYpIHtcbiAgICAgIGNhc2UgJ252aWRpYSc6XG4gICAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZU52aWRpYUZlYXR1cmVzKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZW50ZXJwcmlzZSc6XG4gICAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZUVudGVycHJpc2VGZWF0dXJlcygpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ29wZW4tc291cmNlJzpcbiAgICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplT3BlblNvdXJjZUZlYXR1cmVzKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplRGVmYXVsdEZlYXR1cmVzKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE5WSURJQS1zcGVjaWZpYyBpbml0aWFsaXphdGlvblxuICAgKi9cbiAgYXN5bmMgaW5pdGlhbGl6ZU52aWRpYUZlYXR1cmVzKCkge1xuICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1icmFuZC1wcmltYXJ5JywgJyM3NmI5MDAnKTtcbiAgICB0aGlzLmZlYXR1cmVzLmFkZCgnbnZpZGlhLWJyYW5kaW5nJyk7XG4gIH1cblxuICAvKipcbiAgICogRW50ZXJwcmlzZS1zcGVjaWZpYyBpbml0aWFsaXphdGlvblxuICAgKi9cbiAgYXN5bmMgaW5pdGlhbGl6ZUVudGVycHJpc2VGZWF0dXJlcygpIHtcbiAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoJy0tYnJhbmQtcHJpbWFyeScsICcjNjM2NmYxJyk7XG4gICAgdGhpcy5mZWF0dXJlcy5hZGQoJ2VudGVycHJpc2UtZmVhdHVyZXMnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPcGVuIHNvdXJjZS1zcGVjaWZpYyBpbml0aWFsaXphdGlvblxuICAgKi9cbiAgYXN5bmMgaW5pdGlhbGl6ZU9wZW5Tb3VyY2VGZWF0dXJlcygpIHtcbiAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoJy0tYnJhbmQtcHJpbWFyeScsICcjZmY2YjZiJyk7XG4gICAgdGhpcy5mZWF0dXJlcy5hZGQoJ29wZW4tc291cmNlLWZlYXR1cmVzJyk7XG4gIH1cblxuICAvKipcbiAgICogRGVmYXVsdCBmZWF0dXJlIGluaXRpYWxpemF0aW9uXG4gICAqL1xuICBhc3luYyBpbml0aWFsaXplRGVmYXVsdEZlYXR1cmVzKCkge1xuICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1icmFuZC1wcmltYXJ5JywgJyMzYjgyZjYnKTtcbiAgICB0aGlzLmZlYXR1cmVzLmFkZCgnZGVmYXVsdC1mZWF0dXJlcycpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIGNvbXBvbmVudCBzeXN0ZW1cbiAgICovXG4gIHNldHVwQ29tcG9uZW50U3lzdGVtKCkge1xuICAgIC8vIFJlZ2lzdGVyIGNvcmUgY29tcG9uZW50cyBoZXJlXG4gICAgLy8gVGhpcyB3aWxsIGJlIGV4cGFuZGVkIGFzIHdlIG1pZ3JhdGUgY29tcG9uZW50c1xuICAgIFxuICAgIC8vIFx1RDgzRFx1REU4MCBFbmFibGUgcmVhY3RpdmUgRE9NIGRpc2NvdmVyeSBmb3IgZHluYW1pYyBjb250ZW50XG4gICAgY29uc3QgcmVhY3RpdmVFbmFibGVkID0gQ29tcG9uZW50TWFuYWdlci5lbmFibGVSZWFjdGl2ZURpc2NvdmVyeSgpO1xuICAgIGlmIChyZWFjdGl2ZUVuYWJsZWQpIHtcbiAgICAgIHRoaXMuZmVhdHVyZXMuYWRkKCdyZWFjdGl2ZS1kaXNjb3ZlcnknKTtcbiAgICAgIGxvZy5kZWJ1ZygnXHUyNzA1IFJlYWN0aXZlIERPTSBkaXNjb3ZlcnkgZW5hYmxlZCcpO1xuICAgIH1cbiAgICBcbiAgICBsb2cuZGVidWcoJ0NvbXBvbmVudCBzeXN0ZW0gcmVhZHknKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMb2FkIGNyaXRpY2FsIGNvbXBvbmVudHMgdGhhdCBzaG91bGQgYWx3YXlzIGJlIGF2YWlsYWJsZVxuICAgKi9cbiAgYXN5bmMgbG9hZENyaXRpY2FsQ29tcG9uZW50cygpIHtcbiAgICBjb25zdCBjcml0aWNhbCA9IFtdO1xuICAgIFxuICAgIC8vIFRoZW1lIHN5c3RlbSBpcyBjcml0aWNhbCBmb3IgcHJvcGVyIHN0eWxpbmdcbiAgICAvLyBXaWxsIGJlIG1pZ3JhdGVkIGluIG5leHQgcGhhc2VcbiAgICBcbiAgICBhd2FpdCBQcm9taXNlLmFsbChjcml0aWNhbCk7XG4gIH1cblxuICAvKipcbiAgICogQXV0by1kaXNjb3ZlciBhbmQgbG9hZCBjb21wb25lbnRzXG4gICAqL1xuICBhc3luYyBkaXNjb3ZlckFuZExvYWRDb21wb25lbnRzKCkge1xuICAgIC8vIENvbXBvbmVudE1hbmFnZXIuYXV0b0Rpc2NvdmVyKCkgaGFuZGxlcyBkaXNjb3ZlcnkgYW5kIGxvYWRpbmcgaW50ZXJuYWxseVxuICAgIENvbXBvbmVudE1hbmFnZXIuYXV0b0Rpc2NvdmVyKCk7XG4gICAgXG4gICAgbG9nLmRlYnVnKCdDb21wb25lbnQgYXV0by1kaXNjb3ZlcnkgaW5pdGlhdGVkJyk7XG4gIH1cblxuICAvKipcbiAgICogUmVpbml0aWFsaXplIGNvbXBvbmVudHMgYWZ0ZXIgcGFnZSBjYWNoZSByZXN0b3JhdGlvblxuICAgKiBUaGlzIG1ldGhvZCBpcyBleHBvc2VkIGZvciBleHRlcm5hbCBhY2Nlc3MgYW5kIGRlYnVnZ2luZ1xuICAgKi9cbiAgcmVpbml0aWFsaXplQ29tcG9uZW50cygpIHtcbiAgICBpZiAoIXRoaXMuaW5pdGlhbGl6ZWQpIHtcbiAgICAgIGxvZy53YXJuKCdDb3JlIHN5c3RlbSBub3QgaW5pdGlhbGl6ZWQsIGNhbm5vdCByZWluaXRpYWxpemUgY29tcG9uZW50cycpO1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBDb21wb25lbnRNYW5hZ2VyLnJlaW5pdGlhbGl6ZUFmdGVyQ2FjaGVSZXN0b3JlKCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0dXAgZ2xvYmFsIGV2ZW50cyBhbmQgc2hvcnRjdXRzXG4gICAqL1xuICBzZXR1cEdsb2JhbEV2ZW50cygpIHtcbiAgICAvLyBHbG9iYWwga2V5Ym9hcmQgc2hvcnRjdXRzXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XG4gICAgICBpZiAoZS5hbHRLZXkpIHtcbiAgICAgICAgc3dpdGNoIChlLmtleSkge1xuICAgICAgICAgIGNhc2UgJ3MnOlxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaElucHV0Jyk/LmZvY3VzKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdoJzpcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIC8vIE5hdmlnYXRlIHRvIGhvbWUgcGFnZSB1c2luZyByZWxhdGl2ZSBwYXRoIHRoYXQgd29ya3MgaW4gc3RhdGljIGRlcGxveW1lbnRzXG4gICAgICAgICAgICBjb25zdCBob21lTGluayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2FbaHJlZj1cIi9cIl0sIGFbaHJlZj1cIi4vXCJdLCBhW2hyZWY9XCIuL2luZGV4Lmh0bWxcIl0sIGFbaHJlZj1cImluZGV4Lmh0bWxcIl0nKTtcbiAgICAgICAgICAgIGlmIChob21lTGluaykge1xuICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGhvbWVMaW5rLmhyZWY7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBGYWxsYmFjayB0byBjdXJyZW50IGRpcmVjdG9yeVxuICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcuLyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gUGVyZm9ybWFuY2UgbW9uaXRvcmluZ1xuICAgIHRoaXMuc2V0dXBQZXJmb3JtYW5jZVRyYWNraW5nKCk7XG4gICAgXG4gICAgLy8gT25saW5lL29mZmxpbmUgZGV0ZWN0aW9uXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ29ubGluZScsICgpID0+IHtcbiAgICAgIGV2ZW50QnVzLmVtaXQoJ21pbG86b25saW5lJyk7XG4gICAgICBsb2cuaW5mbygnQ29ubmVjdGlvbiByZXN0b3JlZCcpO1xuICAgIH0pO1xuICAgIFxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvZmZsaW5lJywgKCkgPT4ge1xuICAgICAgZXZlbnRCdXMuZW1pdCgnbWlsbzpvZmZsaW5lJyk7XG4gICAgICBsb2cuaW5mbygnQ29ubmVjdGlvbiBsb3N0Jyk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0dXAgcGVyZm9ybWFuY2UgdHJhY2tpbmdcbiAgICovXG4gIHNldHVwUGVyZm9ybWFuY2VUcmFja2luZygpIHtcbiAgICAvLyBUcmFjayBjb21wb25lbnQgaW5pdGlhbGl6YXRpb24gdGltZXNcbiAgICBldmVudEJ1cy5vbignY29tcG9uZW50OnJlYWR5JywgKGRhdGEpID0+IHtcbiAgICAgIGNvbnN0IHsgY29tcG9uZW50IH0gPSBkYXRhO1xuICAgICAgdGhpcy5wZXJmb3JtYW5jZS5jb21wb25lbnRzLnNldChjb21wb25lbnQuaWQsIHtcbiAgICAgICAgbmFtZTogY29tcG9uZW50Lm5hbWUsXG4gICAgICAgIGluaXRUaW1lOiBwZXJmb3JtYW5jZS5ub3coKSAtIHRoaXMucGVyZm9ybWFuY2Uuc3RhcnRUaW1lXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgZ2xvYmFsIGVycm9yc1xuICAgKi9cbiAgaGFuZGxlRXJyb3IoZXZlbnQpIHtcbiAgICBsb2cuZXJyb3IoJ0dsb2JhbCBlcnJvciBjYXVnaHQ6JywgZXZlbnQuZXJyb3IgfHwgZXZlbnQucmVhc29uKTtcbiAgICBcbiAgICBldmVudEJ1cy5lbWl0KCdtaWxvOmVycm9yJywge1xuICAgICAgZXJyb3I6IGV2ZW50LmVycm9yIHx8IGV2ZW50LnJlYXNvbixcbiAgICAgIHR5cGU6IGV2ZW50LnR5cGVcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgcGFnZSB1bmxvYWRcbiAgICovXG4gIGhhbmRsZVVubG9hZCgpIHtcbiAgICBDb21wb25lbnRNYW5hZ2VyLmRlc3Ryb3lBbGwoKTtcbiAgICBcbiAgICBsb2cuZGVidWcoJ0NsZWFudXAgY29tcGxldGVkJyk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHN5c3RlbSBpbmZvcm1hdGlvblxuICAgKi9cbiAgZ2V0SW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdmVyc2lvbjogdGhpcy52ZXJzaW9uLFxuICAgICAgZW52aXJvbm1lbnQ6IHRoaXMuZW52aXJvbm1lbnQsXG4gICAgICBmZWF0dXJlczogQXJyYXkuZnJvbSh0aGlzLmZlYXR1cmVzKSxcbiAgICAgIHBlcmZvcm1hbmNlOiB0aGlzLnBlcmZvcm1hbmNlLFxuICAgICAgaW5pdGlhbGl6ZWQ6IHRoaXMuaW5pdGlhbGl6ZWRcbiAgICB9O1xuICB9XG59XG5cbi8vIENyZWF0ZSBnbG9iYWwgaW5zdGFuY2VcbmV4cG9ydCBjb25zdCBtaWxvID0gbmV3IE1pbG9Db3JlKCk7XG5cbi8vIE1ha2UgYXZhaWxhYmxlIGdsb2JhbGx5IGZvciBkZWJ1Z2dpbmdcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICB3aW5kb3cuTWlsbyA9IG1pbG87XG59IiwgIi8qXG4gKiBFYXJseSBpbml0aWFsaXphdGlvbiBzY3JpcHRcbiAqIC0gUmVwbGFjZSBuby1qcyB3aXRoIGpzXG4gKiAtIEFwcGx5IHNhdmVkIHRoZW1lIGltbWVkaWF0ZWx5IHRvIGF2b2lkIEZPVUNcbiAqIC0gVGVtcG9yYXJpbHkgZGlzYWJsZSB0cmFuc2l0aW9ucyB1bnRpbCBDU1MgaXMgbG9hZGVkXG4gKiAtIFJlLWVuYWJsZSB0cmFuc2l0aW9ucyB3aGVuIENTUyBidW5kbGUgZmluaXNoZXMgbG9hZGluZyAod2l0aCBmYWxsYmFja3MpXG4gKi9cbihmdW5jdGlvbigpIHtcbiAgdHJ5IHtcbiAgICAvLyBNYXJrIEpTLWVuYWJsZWRcbiAgICB2YXIgZG9jRWwgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gICAgZG9jRWwuY2xhc3NMaXN0LnJlbW92ZSgnbm8tanMnKTtcbiAgICBkb2NFbC5jbGFzc0xpc3QuYWRkKCdqcycpO1xuXG4gICAgLy8gRGlzYWJsZSB0cmFuc2l0aW9ucyBkdXJpbmcgc3RhcnR1cFxuICAgIGlmICghZG9jRWwuY2xhc3NMaXN0LmNvbnRhaW5zKCduby10cmFuc2l0aW9ucycpKSB7XG4gICAgICBkb2NFbC5jbGFzc0xpc3QuYWRkKCduby10cmFuc2l0aW9ucycpO1xuICAgIH1cblxuICAgIC8vIEFwcGx5IHNhdmVkIHRoZW1lIGJlZm9yZSBDU1MgcGFpbnRzIHRvIHByZXZlbnQgZmxhc2hcbiAgICB0cnkge1xuICAgICAgdmFyIHNhdmVkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3RoZW1lLm1vZGUnKSB8fCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGhlbWUtbW9kZScpO1xuICAgICAgaWYgKCFzYXZlZCkge1xuICAgICAgICAvLyBPcHRpb25hbDogZGVyaXZlIGEgZGVmYXVsdCBmcm9tIGRhdGEtdGhlbWUgb24gPGJvZHk+XG4gICAgICAgIHZhciBib2R5ID0gZG9jdW1lbnQuYm9keTtcbiAgICAgICAgc2F2ZWQgPSBib2R5ICYmIGJvZHkuZGF0YXNldCAmJiBib2R5LmRhdGFzZXQudGhlbWUgPyBib2R5LmRhdGFzZXQudGhlbWUgOiAnZGFyayc7XG4gICAgICB9XG4gICAgICBpZiAoc2F2ZWQgPT09ICdkYXJrJykge1xuICAgICAgICBkb2NFbC5jbGFzc0xpc3QuYWRkKCdkYXJrJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkb2NFbC5jbGFzc0xpc3QucmVtb3ZlKCdkYXJrJyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gRmFpbCBkYXJrIGJ5IGRlZmF1bHRcbiAgICAgIGRvY0VsLmNsYXNzTGlzdC5hZGQoJ2RhcmsnKTtcbiAgICB9XG5cbiAgICAvLyBIZWxwZXIgdG8gcmUtZW5hYmxlIHRyYW5zaXRpb25zIG9uY2UgQ1NTIGlzIGRlZmluaXRlbHkgYXBwbGllZFxuICAgIHZhciB0cmFuc2l0aW9uc0VuYWJsZWQgPSBmYWxzZTtcbiAgICBmdW5jdGlvbiBlbmFibGVUcmFuc2l0aW9ucygpIHtcbiAgICAgIGlmICghdHJhbnNpdGlvbnNFbmFibGVkKSB7XG4gICAgICAgIHRyYW5zaXRpb25zRW5hYmxlZCA9IHRydWU7XG4gICAgICAgIGRvY0VsLmNsYXNzTGlzdC5yZW1vdmUoJ25vLXRyYW5zaXRpb25zJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUHJlZmVyIGxpc3RlbmluZyB0byB0aGUgQ1NTIGxpbmsgbG9hZFxuICAgIGZ1bmN0aW9uIGJpbmRDc3NMb2FkTGlzdGVuZXIoKSB7XG4gICAgICB2YXIgbGluayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluLWNzcycpO1xuICAgICAgaWYgKGxpbmspIHtcbiAgICAgICAgLy8gTW9kZXJuIGJyb3dzZXJzIGVtaXQgbG9hZCBmb3Igc3R5bGVzaGVldCBsaW5rc1xuICAgICAgICBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBlbmFibGVUcmFuc2l0aW9ucywgeyBvbmNlOiB0cnVlIH0pO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBUcnkgaW1tZWRpYXRlbHk7IGlmIGxpbmsgbm90IHlldCBpbiBET00sIHRyeSBhZ2FpbiBvbiBET01Db250ZW50TG9hZGVkXG4gICAgaWYgKCFiaW5kQ3NzTG9hZExpc3RlbmVyKCkpIHtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gV2FpdCBhIGZyYW1lIHRvIGFsbG93IGhlYWQgcGFydGlhbHMgdG8gaW5qZWN0IGxpbmtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmICghYmluZENzc0xvYWRMaXN0ZW5lcigpKSB7XG4gICAgICAgICAgICAvLyBGYWxsYmFja3NcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZW5hYmxlVHJhbnNpdGlvbnMsIDI1MCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEFic29sdXRlIGZhbGxiYWNrOiBhbHdheXMgZW5hYmxlIGJ5IDFzXG4gICAgc2V0VGltZW91dChlbmFibGVUcmFuc2l0aW9ucywgMTAwMCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBOZXZlciBibG9jayBwYWdlIHJlbmRlclxuICB9XG59KSgpO1xuXG5cblxuO1xuLypcbiAqIEVudmlyb25tZW50LXNwZWNpZmljIGZvbnQgbG9hZGluZyBzdGF0ZSBtYW5hZ2VtZW50IGZvciBOVklESUEgZW52XG4gKi9cbihmdW5jdGlvbigpIHtcbiAgdHJ5IHtcbiAgICBpZiAoZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLmdldFByb3BlcnR5VmFsdWUoJy0taHVnby1lbnZpcm9ubWVudCcpLmluY2x1ZGVzKCdudmlkaWEnKSB8fCBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucygnZW52LW52aWRpYScpKSB7XG4gICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZm9udHMtbG9hZGluZycpO1xuICAgICAgaWYgKCdmb250cycgaW4gZG9jdW1lbnQpIHtcbiAgICAgICAgUHJvbWlzZS5hbGwoW1xuICAgICAgICAgIGRvY3VtZW50LmZvbnRzLmxvYWQoJzQwMCAxcmVtIE5WSURJQScpLFxuICAgICAgICAgIGRvY3VtZW50LmZvbnRzLmxvYWQoJzcwMCAxcmVtIE5WSURJQScpXG4gICAgICAgIF0pLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2ZvbnRzLWxvYWRpbmcnKTtcbiAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZm9udHMtbG9hZGVkJyk7XG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZm9udHMtbG9hZGluZycpO1xuICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2ZvbnRzLWxvYWRlZCcpO1xuICAgICAgICAgIH0sIDIwMDApO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2ZvbnRzLWxvYWRpbmcnKTtcbiAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZm9udHMtbG9hZGVkJyk7XG4gICAgICAgIH0sIDEwMDApO1xuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZSkge31cbn0pKCk7XG5cblxuXG47XG4oZnVuY3Rpb24oKXtcbiAgdHJ5IHtcbiAgICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2h1Z28tZW52aXJvbm1lbnQtanNvbicpO1xuICAgIGlmICghc2NyaXB0KSByZXR1cm47XG4gICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKHNjcmlwdC50ZXh0Q29udGVudCB8fCAne30nKTtcbiAgICB3aW5kb3cuSHVnb0Vudmlyb25tZW50ID0gZGF0YTtcbiAgfSBjYXRjaCAoZSkge31cbn0pKCk7XG5cblxuXG47XG4vKipcbiAqIE1pbG9Eb2NzIE1haW4gRW50cnkgUG9pbnQgLSBOZXcgQXJjaGl0ZWN0dXJlXG4gKiBPcmNoZXN0cmF0ZXMgdGhlIGluaXRpYWxpemF0aW9uIG9mIHRoZSBlbnRpcmUgSmF2YVNjcmlwdCBzeXN0ZW1cbiAqL1xuXG5pbXBvcnQgeyBtaWxvIH0gZnJvbSAnLi9jb3JlL01pbG9Db3JlLmpzJztcbmltcG9ydCB7IHJlYWR5IH0gZnJvbSAnLi91dGlscy9kb20uanMnO1xuaW1wb3J0IHsgcmVnaXN0ZXJBbGxDb21wb25lbnRzIH0gZnJvbSAnLi9jb21wb25lbnRzL2luZGV4LmpzJztcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4vdXRpbHMvTG9nZ2VyLmpzJztcbmltcG9ydCBjb25maWd1cmVMb2dnaW5nIGZyb20gJy4vdXRpbHMvTG9nZ2luZ0NvbmZpZy5qcyc7XG5pbXBvcnQgeyBhbmltYXRpb25CcmlkZ2UgfSBmcm9tICcuL2NvcmUvQW5pbWF0aW9uQnJpZGdlLmpzJztcbmltcG9ydCBDb21wb25lbnRNYW5hZ2VyIGZyb20gJy4vY29yZS9Db21wb25lbnRNYW5hZ2VyLmpzJztcbmltcG9ydCBpbnN0YWxsR2xvYmFsRXJyb3JHdWFyZHMgZnJvbSAnLi9pbml0L0Vycm9yR3VhcmRzLmpzJztcbmltcG9ydCB7IHNldHVwR2xvYmFsRW5oYW5jZW1lbnRzIH0gZnJvbSAnLi91aS9HbG9iYWxFbmhhbmNlbWVudHMuanMnO1xuaW1wb3J0IHsgaXNTdGF0aWNEZXBsb3ltZW50LCBhdHRhY2hTdGF0aWNOYXZpZ2F0aW9uSGFuZGxlcnMsIGF0dGFjaER5bmFtaWNOYXZpZ2F0aW9uSGFuZGxlcnMsIGNoZWNrQ29tcG9uZW50SGVhbHRoLCBzeW5jU2lkZWJhckNvbXBvbmVudCB9IGZyb20gJy4vbmF2L1N0YXRpY05hdmlnYXRpb24uanMnO1xuaW1wb3J0IGluc3RhbGxEZWJ1Z1Rvb2xzIGZyb20gJy4vZGVidWcvRGV2VG9vbHMuanMnO1xuXG5jb25zdCBsb2cgPSBsb2dnZXIuY29tcG9uZW50KCdNaWxvRG9jcycpO1xuXG4vKipcbiAqIENvbmZpZ3VyZSBjZW50cmFsaXplZCBsb2dnaW5nIGFuZCBvcHRpb25hbCBjb25zb2xlIHNoaW1cbiAqIEFsbG93cyBidWlsZC9ydW50aW1lIGNvbnRyb2wgdmlhOiB3aW5kb3cuSHVnb0Vudmlyb25tZW50LmxvZ0xldmVsIG9yIGRhdGEtbG9nLWxldmVsIG9uIDxodG1sPlxuICovXG4vLyBjb25maWd1cmVMb2dnaW5nIG1vdmVkIHRvIHV0aWxzL0xvZ2dpbmdDb25maWcuanMgdG8gc2xpbSB0aGlzIGVudHJ5IGZpbGVcblxuLyoqXG4gKiBJbml0aWFsaXplIE1pbG9Eb2NzIHN5c3RlbVxuICovXG5hc3luYyBmdW5jdGlvbiBpbml0aWFsaXplTWlsb0RvY3MoKSB7XG4gIHRyeSB7XG4gICAgLy8gQ29uZmlndXJlIGxvZ2dpbmcgZWFybHk7IGd1YXJkIHRvIGF2b2lkIGludGVyZmVyaW5nIHdpdGggZXJyb3IgaGFuZGxpbmdcbiAgICB0cnkgeyBjb25maWd1cmVMb2dnaW5nKCk7IH0gY2F0Y2ggKF8pIHt9XG4gICAgLy8gR2xvYmFsIHNhZmV0eSBuZXRzOiBhdm9pZCB1bmhhbmRsZWQgcHJvbWlzZSBhbmQgZXJyb3IgZmxvb2RzXG4gICAgaW5zdGFsbEdsb2JhbEVycm9yR3VhcmRzKCk7XG4gICAgLy8gSW5pdGlhbGl6ZSBjb3JlIHN5c3RlbVxuICAgIGF3YWl0IG1pbG8uaW5pdCgpO1xuICAgIFxuICAgIC8vIEluaXRpYWxpemUgYW5pbWF0aW9uIGJyaWRnZSAoTkVXKVxuICAgIGFuaW1hdGlvbkJyaWRnZS5pbml0KCk7XG4gICAgYW5pbWF0aW9uQnJpZGdlLm1pZ3JhdGVFeGlzdGluZ0NvbXBvbmVudHMoKTtcbiAgICBcbiAgICAvLyBSZWdpc3RlciBjcml0aWNhbCBjb21wb25lbnRzXG4gICAgYXdhaXQgcmVnaXN0ZXJBbGxDb21wb25lbnRzKCk7XG4gICAgXG5cbiAgICBcbiAgICAvLyBTZXR1cCBnbG9iYWwgdXRpbGl0aWVzXG4gICAgYXdhaXQgc2V0dXBHbG9iYWxFbmhhbmNlbWVudHMoKTtcbiAgICBcbiAgICBsb2cuaW5mbygnTWlsb0RvY3MgZnVsbHkgaW5pdGlhbGl6ZWQnKTtcbiAgICBsb2cuZGVidWcoJ0RlYnVnIHV0aWxpdGllcyBhdmFpbGFibGU6Jyk7XG4gICAgbG9nLmRlYnVnKCcgIC0gd2luZG93LnJlc2V0TmF2aWdhdGlvbigpIC0gUmVzZXQgc2lkZWJhciBzdGF0ZScpO1xuICAgIGxvZy5kZWJ1ZygnICAtIHdpbmRvdy5kZWJ1Z1NpZGViYXIoKSAtIERlYnVnIHNpZGViYXIgaW5mbyArIGF1dG8tZml4Jyk7XG4gICAgbG9nLmRlYnVnKCcgIC0gd2luZG93LmRlYnVnQ29tcG9uZW50cygpIC0gU2hvdyBhbGwgcmVnaXN0ZXJlZCBjb21wb25lbnRzJyk7XG4gICAgbG9nLmRlYnVnKCcgIC0gd2luZG93LnJlaW5pdGlhbGl6ZUNvbXBvbmVudHMoKSAtIFJlaW5pdGlhbGl6ZSBicm9rZW4gY29tcG9uZW50cyAoc2ltdWxhdGVzIGNhY2hlIHJlc3RvcmUpJyk7XG4gICAgaW5zdGFsbERlYnVnVG9vbHMoKTtcbiAgICBcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2cuZXJyb3IoJ01pbG9Eb2NzIGluaXRpYWxpemF0aW9uIGZhaWxlZDonLCBlcnJvcik7XG5cbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG5cblxuXG5cblxuXG4vKipcbiAqIEluaXRpYWxpemUgTWlsb0RvY3MgYW5kIGhhbmRsZSBwYWdlIHJlc3RvcmF0aW9uIGZyb20gY2FjaGVcbiAqL1xuYXN5bmMgZnVuY3Rpb24gaGFuZGxlUGFnZUluaXRpYWxpemF0aW9uKCkge1xuICAvLyBBZGQgZW52aXJvbm1lbnQgY2xhc3MgZm9yIHN0eWxpbmdcbiAgY29uc3QgZW52ID0gd2luZG93Lkh1Z29FbnZpcm9ubWVudD8uZW52aXJvbm1lbnQgfHwgJ2RldmVsb3BtZW50JztcbiAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKGBlbnYtJHtlbnZ9YCk7XG4gIFxuICAvLyBJbml0aWFsaXplIHRoZSBzeXN0ZW1cbiAgYXdhaXQgaW5pdGlhbGl6ZU1pbG9Eb2NzKCk7XG4gIFxuICAvLyBTeXN0ZW0gcmVhZHlcbiAgLy8gKGluZm8gYWxyZWFkeSBsb2dnZWQgdmlhIGxvZ2dlciBpbiBpbml0aWFsaXplTWlsb0RvY3MpXG59XG5cbi8qKlxuICogU3RhcnQgaW5pdGlhbGl6YXRpb24gd2hlbiBET00gaXMgcmVhZHlcbiAqL1xucmVhZHkoKCkgPT4ge1xuICBoYW5kbGVQYWdlSW5pdGlhbGl6YXRpb24oKTtcbn0pO1xuXG4vKipcbiAqIEhhbmRsZSBwYWdlIHJlc3RvcmF0aW9uIGFuZCBuYXZpZ2F0aW9uIGZvciBzdGF0aWMgZGVwbG95bWVudHNcbiAqIFN0YXRpYyBzaXRlcyAodWdseVVSTHM6IHRydWUsIHJlbGF0aXZlVVJMczogdHJ1ZSkgaGF2ZSBkaWZmZXJlbnQgbmF2aWdhdGlvbiBiZWhhdmlvclxuICovXG5cbi8vIFRyYWNrIGluaXRpYWxpemF0aW9uIHN0YXRlIGFjcm9zcyBwYWdlIGxvYWRzXG5sZXQgaXNDdXJyZW50UGFnZUluaXRpYWxpemVkID0gZmFsc2U7XG5sZXQgbGFzdFVSTCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xubGV0IHJlaW5pdGlhbGl6YXRpb25BdHRlbXB0cyA9IDA7XG5jb25zdCBNQVhfUkVJTklUX0FUVEVNUFRTID0gMztcblxuXG4vKipcbiAqIEhhbmRsZSBwYWdlIG5hdmlnYXRpb24gZm9yIHN0YXRpYyBzaXRlc1xuICovXG5hc3luYyBmdW5jdGlvbiBoYW5kbGVTdGF0aWNOYXZpZ2F0aW9uKGV2ZW50KSB7XG4gIGNvbnN0IGN1cnJlbnRVUkwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcbiAgY29uc3QgaXNOZXdQYWdlID0gY3VycmVudFVSTCAhPT0gbGFzdFVSTDtcbiAgXG4gICAgaWYgKGlzTmV3UGFnZSB8fCBldmVudD8ucGVyc2lzdGVkIHx8ICFpc0N1cnJlbnRQYWdlSW5pdGlhbGl6ZWQpIHtcbiAgICBsb2cuaW5mbyhgU3RhdGljIG5hdmlnYXRpb24gZGV0ZWN0ZWQ6ICR7aXNOZXdQYWdlID8gJ25ldyBwYWdlJyA6ICdjYWNoZWQgcGFnZSd9YCk7XG4gICAgbGFzdFVSTCA9IGN1cnJlbnRVUkw7XG4gICAgXG4gICAgLy8gUmVzZXQgYXR0ZW1wdCBjb3VudGVyIGZvciBuZXcgcGFnZXNcbiAgICBpZiAoaXNOZXdQYWdlKSB7XG4gICAgICByZWluaXRpYWxpemF0aW9uQXR0ZW1wdHMgPSAwO1xuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBjb21wb25lbnQgaGVhbHRoXG4gICAgY29uc3QgaGVhbHRoU3RhdHVzID0gYXdhaXQgY2hlY2tDb21wb25lbnRIZWFsdGgoKTtcbiAgICBcbiAgICAgIGlmIChoZWFsdGhTdGF0dXMgPT09ICduZWVkc19mdWxsX2luaXQnKSB7XG4gICAgICBpZiAocmVpbml0aWFsaXphdGlvbkF0dGVtcHRzIDwgTUFYX1JFSU5JVF9BVFRFTVBUUykge1xuICAgICAgICByZWluaXRpYWxpemF0aW9uQXR0ZW1wdHMrKztcbiAgICAgICAgbG9nLmluZm8oYFBlcmZvcm1pbmcgZnVsbCBpbml0aWFsaXphdGlvbiAoYXR0ZW1wdCAke3JlaW5pdGlhbGl6YXRpb25BdHRlbXB0c30pYCk7XG4gICAgICAgIGF3YWl0IGhhbmRsZVBhZ2VJbml0aWFsaXphdGlvbigpO1xuICAgICAgICBpc0N1cnJlbnRQYWdlSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICAgIC8vIGtlZXAgc2lkZWJhciBpbiBzeW5jIHdpdGggdGhlIG5ldyBsb2NhdGlvblxuICAgICAgICAgIC8vIFVzZSBjb21wb25lbnQgQVBJIHRvIHN5bmMgc2lkZWJhciByZWxpYWJseVxuICAgICAgICAgIHN5bmNTaWRlYmFyQ29tcG9uZW50KCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChoZWFsdGhTdGF0dXMgPT09ICduZWVkc19jb21wb25lbnRfcmVpbml0Jykge1xuICAgICAgaWYgKHJlaW5pdGlhbGl6YXRpb25BdHRlbXB0cyA8IE1BWF9SRUlOSVRfQVRURU1QVFMpIHtcbiAgICAgICAgcmVpbml0aWFsaXphdGlvbkF0dGVtcHRzKys7XG4gICAgICAgIGxvZy5pbmZvKGBSZWluaXRpYWxpemluZyBjb21wb25lbnRzIChhdHRlbXB0ICR7cmVpbml0aWFsaXphdGlvbkF0dGVtcHRzfSlgKTtcbiAgICAgICAgY29uc3QgcmVpbml0aWFsaXplZCA9IENvbXBvbmVudE1hbmFnZXIucmVpbml0aWFsaXplQWZ0ZXJDYWNoZVJlc3RvcmUoKTtcbiAgICAgICAgbG9nLmluZm8oYFN0YXRpYyBuYXZpZ2F0aW9uOiAke3JlaW5pdGlhbGl6ZWR9IGNvbXBvbmVudHMgcmVpbml0aWFsaXplZGApO1xuICAgICAgICBpc0N1cnJlbnRQYWdlSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICAgIC8vIGtlZXAgc2lkZWJhciBpbiBzeW5jIHdpdGggdGhlIG5ldyBsb2NhdGlvblxuICAgICAgICAgIC8vIFVzZSBjb21wb25lbnQgQVBJIHRvIHN5bmMgc2lkZWJhciByZWxpYWJseVxuICAgICAgICAgIHN5bmNTaWRlYmFyQ29tcG9uZW50KCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvZy5pbmZvKCdDb21wb25lbnRzIGFwcGVhciBoZWFsdGh5IGFmdGVyIG5hdmlnYXRpb24nKTtcbiAgICAgIGlzQ3VycmVudFBhZ2VJbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgIC8vIHN0aWxsIHJlc3luYyBjdXJyZW50IHBhZ2UgaGlnaGxpZ2h0L2V4cGFuc2lvbiBvbiBoZWFsdGh5IGZhc3QtbmF2XG4gICAgICAgIC8vIFVzZSBjb21wb25lbnQgQVBJIHRvIHN5bmMgc2lkZWJhciByZWxpYWJseVxuICAgICAgICBzeW5jU2lkZWJhckNvbXBvbmVudCgpO1xuICAgIH1cbiAgfVxufVxuXG4vLyBEaWZmZXJlbnQgZXZlbnQgaGFuZGxpbmcgZm9yIHN0YXRpYyB2cyBkeW5hbWljIHNpdGVzXG5pZiAoaXNTdGF0aWNEZXBsb3ltZW50KCkpIHtcbiAgbG9nLmluZm8oJ1N0YXRpYyBkZXBsb3ltZW50IGRldGVjdGVkLCB1c2luZyBlbmhhbmNlZCBuYXZpZ2F0aW9uIGhhbmRsaW5nJyk7XG4gIGF0dGFjaFN0YXRpY05hdmlnYXRpb25IYW5kbGVycyh7IG9uSW5pdDogaGFuZGxlUGFnZUluaXRpYWxpemF0aW9uIH0pO1xufSBlbHNlIHtcbiAgbG9nLmluZm8oJ0R5bmFtaWMgZGVwbG95bWVudCBkZXRlY3RlZCwgdXNpbmcgc3RhbmRhcmQgbmF2aWdhdGlvbiBoYW5kbGluZycpO1xuICBhdHRhY2hEeW5hbWljTmF2aWdhdGlvbkhhbmRsZXJzKHsgb25Jbml0OiBoYW5kbGVQYWdlSW5pdGlhbGl6YXRpb24gfSk7XG59XG5cbi8vIEdsb2JhbCBkZWJ1ZyB1dGlsaXRpZXMgZm9yIHRlc3RpbmdcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAvLyBBZGQgcmVpbml0aWFsaXplIGZ1bmN0aW9uIGZvciBkZWJ1Z2dpbmdcbiAgd2luZG93LnJlaW5pdGlhbGl6ZUNvbXBvbmVudHMgPSAoKSA9PiB7XG4gICAgbG9nLmluZm8oJ01hbnVhbCBjb21wb25lbnQgcmVpbml0aWFsaXphdGlvbiB0cmlnZ2VyZWQnKTtcbiAgICBjb25zdCBjb3VudCA9IG1pbG8ucmVpbml0aWFsaXplQ29tcG9uZW50cygpO1xuICAgIGxvZy5pbmZvKGBSZWluaXRpYWxpemVkICR7Y291bnR9IGNvbXBvbmVudHNgKTtcbiAgICByZXR1cm4gY291bnQ7XG4gIH07XG4gIFxuICAvLyBEZWJ1ZyBmdW5jdGlvbiBzcGVjaWZpY2FsbHkgZm9yIHRlc3Rpbmcgc3RhdGljIG5hdmlnYXRpb25cbiAgd2luZG93LnRlc3RTdGF0aWNOYXZpZ2F0aW9uID0gKCkgPT4ge1xuICAgIGxvZy5pbmZvKCdUZXN0aW5nIHN0YXRpYyBuYXZpZ2F0aW9uIGhhbmRsaW5nLi4uJyk7XG4gICAgbG9nLmluZm8oYEN1cnJlbnQgVVJMOiAke3dpbmRvdy5sb2NhdGlvbi5ocmVmfWApO1xuICAgIGxvZy5pbmZvKGBJcyBzdGF0aWMgZGVwbG95bWVudDogJHtpc1N0YXRpY0RlcGxveW1lbnQoKX1gKTtcbiAgICBsb2cuaW5mbyhgQ29yZSBpbml0aWFsaXplZDogJHttaWxvLmluaXRpYWxpemVkfWApO1xuICAgIGxvZy5pbmZvKGBQYWdlIGluaXRpYWxpemVkOiAke2lzQ3VycmVudFBhZ2VJbml0aWFsaXplZH1gKTtcbiAgICBcbiAgICBoYW5kbGVTdGF0aWNOYXZpZ2F0aW9uKHsgdHlwZTogJ21hbnVhbF90ZXN0JyB9KTtcbiAgfTtcbiAgXG4gIC8vIFVzZSBtb2R1bGUtc2NvcGUgc3luY1NpZGViYXJDb21wb25lbnRcbiAgXG4gIC8vIERlYnVnIGZ1bmN0aW9uIHRvIGNoZWNrIGNvbXBvbmVudCBoZWFsdGhcbiAgd2luZG93LmNoZWNrQ29tcG9uZW50SGVhbHRoID0gYXN5bmMgKCkgPT4ge1xuICAgIGxvZy5pbmZvKCdDaGVja2luZyBjb21wb25lbnQgaGVhbHRoLi4uJyk7XG4gICAgY29uc3QgaGVhbHRoID0gYXdhaXQgY2hlY2tDb21wb25lbnRIZWFsdGgoKTtcbiAgICBsb2cuaW5mbyhgQ29tcG9uZW50IGhlYWx0aCBzdGF0dXM6ICR7aGVhbHRofWApO1xuICAgIHJldHVybiBoZWFsdGg7XG4gIH07XG4gIFxuICAvLyBEZWJ1ZyBmdW5jdGlvbiB0byB0ZXN0IHNpZGViYXIgZnVuY3Rpb25hbGl0eSBzcGVjaWZpY2FsbHlcbiAgd2luZG93LnRlc3RTaWRlYmFyRnVuY3Rpb25hbGl0eSA9ICgpID0+IHtcbiAgICBsb2cuaW5mbygnVGVzdGluZyBzaWRlYmFyIGZ1bmN0aW9uYWxpdHkuLi4nKTtcbiAgICBjb25zdCBzaWRlYmFyRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaWRlYmFyLWxlZnQnKTtcbiAgICBcbiAgICBpZiAoIXNpZGViYXJFbGVtZW50KSB7XG4gICAgICBsb2cuZXJyb3IoJ1NpZGViYXIgZWxlbWVudCBub3QgZm91bmQnKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgc2lkZWJhciBpcyB2aXNpYmxlXG4gICAgY29uc3Qgc2lkZWJhclN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoc2lkZWJhckVsZW1lbnQpO1xuICAgIGNvbnN0IGlzVmlzaWJsZSA9IHNpZGViYXJTdHlsZS5kaXNwbGF5ICE9PSAnbm9uZScgJiYgc2lkZWJhclN0eWxlLm9wYWNpdHkgIT09ICcwJztcbiAgICBsb2cuaW5mbyhgU2lkZWJhciB2aXNpYmlsaXR5OiAke2lzVmlzaWJsZSA/ICdcdTI3MDUgVklTSUJMRScgOiAnXHUyNzRDIEhJRERFTid9YCk7XG4gICAgbG9nLmluZm8oYFNpZGViYXIgb3BhY2l0eTogJHtzaWRlYmFyU3R5bGUub3BhY2l0eX1gKTtcbiAgICBsb2cuaW5mbyhgU2lkZWJhciBkaXNwbGF5OiAke3NpZGViYXJTdHlsZS5kaXNwbGF5fWApO1xuICAgIGxvZy5pbmZvKGBTaWRlYmFyIHRyYW5zZm9ybTogJHtzaWRlYmFyU3R5bGUudHJhbnNmb3JtfWApO1xuICAgIGxvZy5pbmZvKGBTaWRlYmFyIGNvbXBvbmVudCBzdGF0ZTogJHtzaWRlYmFyRWxlbWVudC5kYXRhc2V0LmNvbXBvbmVudFN0YXRlIHx8ICdub25lJ31gKTtcbiAgICBcbiAgICBjb25zdCB0b2dnbGVzID0gc2lkZWJhckVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNpZGViYXItaXRlbV9fdG9nZ2xlJyk7XG4gICAgbG9nLmluZm8oYEZvdW5kICR7dG9nZ2xlcy5sZW5ndGh9IHNpZGViYXIgdG9nZ2xlc2ApO1xuICAgIFxuICAgIGlmICh0b2dnbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgbG9nLmVycm9yKCdObyBzaWRlYmFyIHRvZ2dsZXMgZm91bmQnKTtcbiAgICAgIHJldHVybiB7IGlzVmlzaWJsZSwgdG9nZ2xlQ291bnQ6IDAgfTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgZmlyc3RUb2dnbGUgPSB0b2dnbGVzWzBdO1xuICAgIFxuICAgIC8vIENoZWNrIGluaXRpYWxpemF0aW9uXG4gICAgY29uc3QgaGFzQXJpYSA9IGZpcnN0VG9nZ2xlLmhhc0F0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcpO1xuICAgIGNvbnN0IGhhc0xpc3RlbmVycyA9ICEhZmlyc3RUb2dnbGUuZGF0YXNldC5jb21wb25lbnRMaXN0ZW5lcnM7XG4gICAgXG4gICAgbG9nLmluZm8oYFRvZ2dsZSBoYXMgYXJpYS1leHBhbmRlZDogJHtoYXNBcmlhfWApO1xuICAgIGxvZy5pbmZvKGBUb2dnbGUgaGFzIGxpc3RlbmVyIHRyYWNraW5nOiAke2hhc0xpc3RlbmVyc31gKTtcbiAgICBsb2cuaW5mbyhgVG9nZ2xlIGxpc3RlbmVyIElEczogJHtmaXJzdFRvZ2dsZS5kYXRhc2V0LmNvbXBvbmVudExpc3RlbmVyc31gKTtcbiAgICBcbiAgICAvLyBUZXN0IGNsaWNrIGZ1bmN0aW9uYWxpdHlcbiAgICBjb25zdCBvcmlnaW5hbFN0YXRlID0gZmlyc3RUb2dnbGUuZ2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJyk7XG4gICAgbG9nLmluZm8oYE9yaWdpbmFsIHRvZ2dsZSBzdGF0ZTogJHtvcmlnaW5hbFN0YXRlfWApO1xuICAgIFxuICAgIC8vIFNpbXVsYXRlIGNsaWNrXG4gICAgY29uc3QgY2xpY2tFdmVudCA9IG5ldyBFdmVudCgnY2xpY2snLCB7IGJ1YmJsZXM6IHRydWUsIGNhbmNlbGFibGU6IHRydWUgfSk7XG4gICAgZmlyc3RUb2dnbGUuZGlzcGF0Y2hFdmVudChjbGlja0V2ZW50KTtcbiAgICBcbiAgICAvLyBDaGVjayBpZiBzdGF0ZSBjaGFuZ2VkIChhZnRlciBhIGJyaWVmIGRlbGF5IGZvciBhbmltYXRpb25zKVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgY29uc3QgbmV3U3RhdGUgPSBmaXJzdFRvZ2dsZS5nZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnKTtcbiAgICAgIGxvZy5pbmZvKGBOZXcgdG9nZ2xlIHN0YXRlIGFmdGVyIGNsaWNrOiAke25ld1N0YXRlfWApO1xuICAgICAgY29uc3QgaXNXb3JraW5nID0gbmV3U3RhdGUgIT09IG9yaWdpbmFsU3RhdGU7XG4gICAgICBsb2cuaW5mbyhgU2lkZWJhciBjbGljayBmdW5jdGlvbmFsaXR5OiAke2lzV29ya2luZyA/ICdcdTI3MDUgV09SS0lORycgOiAnXHUyNzRDIEJST0tFTid9YCk7XG4gICAgICBcbiAgICAgIC8vIFJlc3RvcmUgb3JpZ2luYWwgc3RhdGVcbiAgICAgIGZpcnN0VG9nZ2xlLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsIG9yaWdpbmFsU3RhdGUpO1xuICAgIH0sIDEwMCk7XG4gICAgXG4gICAgcmV0dXJuIHsgXG4gICAgICBpc1Zpc2libGUsIFxuICAgICAgaGFzQXJpYSwgXG4gICAgICBoYXNMaXN0ZW5lcnMsIFxuICAgICAgdG9nZ2xlQ291bnQ6IHRvZ2dsZXMubGVuZ3RoLFxuICAgICAgY29tcG9uZW50U3RhdGU6IHNpZGViYXJFbGVtZW50LmRhdGFzZXQuY29tcG9uZW50U3RhdGUgXG4gICAgfTtcbiAgfTtcbn1cblxuLy8gRXhwb3J0IGZvciBleHRlcm5hbCBhY2Nlc3NcbmV4cG9ydCB7IG1pbG8sIGluaXRpYWxpemVNaWxvRG9jcyB9OyIsICIvKipcbiAqIExvZ2dpbmcgY29uZmlndXJhdGlvbiB1dGlsaXRpZXNcbiAqL1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnLi9Mb2dnZXIuanMnO1xuXG5leHBvcnQgZnVuY3Rpb24gY29uZmlndXJlTG9nZ2luZygpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBleHBsaWNpdExldmVsID0gd2luZG93Lkh1Z29FbnZpcm9ubWVudD8ubG9nTGV2ZWwgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Py5kYXRhc2V0Py5sb2dMZXZlbDtcbiAgICBpZiAoZXhwbGljaXRMZXZlbCkge1xuICAgICAgbG9nZ2VyLnNldExvZ0xldmVsKGV4cGxpY2l0TGV2ZWwpO1xuICAgIH1cblxuICAgIGNvbnN0IGlzRGVidWcgPSB3aW5kb3cuSHVnb0Vudmlyb25tZW50Py5kZWJ1ZyB8fCAvXihERUJVR3xUUkFDRSkkL2kudGVzdChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ/LmRhdGFzZXQ/LmxvZ0xldmVsIHx8ICcnKTtcbiAgICBpZiAoaXNEZWJ1ZyAmJiAhd2luZG93Ll9fbWlsb0NvbnNvbGVTaGltSW5zdGFsbGVkICYmICF3aW5kb3cuTWlsb0RvY3NEaXNhYmxlQ29uc29sZVNoaW0pIHtcbiAgICAgIGNvbnN0IG9yaWdpbmFsV2FybiA9IGNvbnNvbGUud2Fybi5iaW5kKGNvbnNvbGUpO1xuICAgICAgY29uc3Qgb3JpZ2luYWxFcnJvciA9IGNvbnNvbGUuZXJyb3IuYmluZChjb25zb2xlKTtcbiAgICAgIGNvbnNvbGUud2FybiA9ICguLi5hcmdzKSA9PiB7XG4gICAgICAgIGNvbnN0IFttZXNzYWdlLCAuLi5yZXN0XSA9IGFyZ3M7XG4gICAgICAgIGNvbnN0IGZvcm1hdHRlZCA9XG4gICAgICAgICAgdHlwZW9mIG1lc3NhZ2UgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICA/IGxvZ2dlci5mb3JtYXRNZXNzYWdlKCdXQVJOJywgJ0NvbnNvbGUnLCBtZXNzYWdlLCAuLi5yZXN0KVxuICAgICAgICAgICAgOiBsb2dnZXIuZm9ybWF0TWVzc2FnZSgnV0FSTicsICdDb25zb2xlJywgJ1dhcm5pbmc6JywgbWVzc2FnZSwgLi4ucmVzdCk7XG4gICAgICAgIG9yaWdpbmFsV2FybiguLi5mb3JtYXR0ZWQpO1xuICAgICAgfTtcbiAgICAgIGNvbnNvbGUuZXJyb3IgPSAoLi4uYXJncykgPT4ge1xuICAgICAgICBjb25zdCBbbWVzc2FnZSwgLi4ucmVzdF0gPSBhcmdzO1xuICAgICAgICBjb25zdCBmb3JtYXR0ZWQgPVxuICAgICAgICAgIHR5cGVvZiBtZXNzYWdlID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgPyBsb2dnZXIuZm9ybWF0TWVzc2FnZSgnRVJST1InLCAnQ29uc29sZScsIG1lc3NhZ2UsIC4uLnJlc3QpXG4gICAgICAgICAgICA6IGxvZ2dlci5mb3JtYXRNZXNzYWdlKCdFUlJPUicsICdDb25zb2xlJywgJ0Vycm9yOicsIG1lc3NhZ2UsIC4uLnJlc3QpO1xuICAgICAgICBvcmlnaW5hbEVycm9yKC4uLmZvcm1hdHRlZCk7XG4gICAgICB9O1xuICAgICAgd2luZG93Ll9fbWlsb0NvbnNvbGVTaGltSW5zdGFsbGVkID0gdHJ1ZTtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBGYWlsIG9wZW47IGRvIG5vdCBibG9jayBpbml0aWFsaXphdGlvbiBvbiBsb2dnaW5nIGNvbmZpZ1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNvbmZpZ3VyZUxvZ2dpbmc7XG5cbiIsICIvKipcbiAqIEdsb2JhbCBlcnJvciBhbmQgcmVqZWN0aW9uIGd1YXJkc1xuICovXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuLi91dGlscy9Mb2dnZXIuanMnO1xuXG4vKipcbiAqIEluc3RhbGwgZ2xvYmFsIGhhbmRsZXJzIGZvciB1bmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb25zIGFuZCBlcnJvcnMuXG4gKiBTYWZlIHRvIGNhbGwgbXVsdGlwbGUgdGltZXM7IGxpc3RlbmVycyB3aWxsIGJlIGR1cGxpY2F0ZWQgYnkgdGhlIGJyb3dzZXIsXG4gKiBzbyBjYWxsZXJzIHNob3VsZCBndWFyZCBhZ2FpbnN0IHJlcGVhdGVkIGNhbGxzIGlmIG5lZWRlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluc3RhbGxHbG9iYWxFcnJvckd1YXJkcygpIHtcbiAgLy8gVW5oYW5kbGVkIHByb21pc2UgcmVqZWN0aW9uc1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndW5oYW5kbGVkcmVqZWN0aW9uJywgKGV2ZW50KSA9PiB7XG4gICAgdHJ5IHsgbG9nZ2VyLmVycm9yKCdHbG9iYWwnLCAnVW5oYW5kbGVkIHByb21pc2UgcmVqZWN0aW9uJywgZXZlbnQucmVhc29uKTsgfSBjYXRjaCAoXykge31cbiAgICAvLyBQcmV2ZW50IGRlZmF1bHQgY29uc29sZSBzcGFtIGluIHByb2R1Y3Rpb25cbiAgICBpZiAoIXdpbmRvdy5IdWdvRW52aXJvbm1lbnQ/LmRlYnVnKSBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICB9KTtcblxuICAvLyBVbmNhdWdodCBlcnJvcnNcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgKGV2ZW50KSA9PiB7XG4gICAgdHJ5IHsgbG9nZ2VyLmVycm9yKCdHbG9iYWwnLCAnVW5oYW5kbGVkIGVycm9yJywgZXZlbnQuZXJyb3IgfHwgZXZlbnQubWVzc2FnZSk7IH0gY2F0Y2ggKF8pIHt9XG4gIH0pO1xufVxuXG5leHBvcnQgZGVmYXVsdCBpbnN0YWxsR2xvYmFsRXJyb3JHdWFyZHM7XG5cbiIsICIvKipcbiAqIEdsb2JhbCBVSSBlbmhhbmNlbWVudHM6IHJpcHBsZXMsIGhvdmVyIGVmZmVjdHMsIGZvcm0gbG9hZGluZyBzdGF0ZXMsIHNjcm9sbCBlZmZlY3RzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZXR1cEdsb2JhbEVuaGFuY2VtZW50cygpIHtcbiAgY29uc3QgeyBjcmVhdGVSaXBwbGUgfSA9IGF3YWl0IGltcG9ydCgnLi4vdXRpbHMvZG9tLmpzJyk7XG4gIGNvbnN0IHsgc2hvd0xvYWRpbmcsIGhpZGVMb2FkaW5nIH0gPSBhd2FpdCBpbXBvcnQoJy4uL3V0aWxzL0xvYWRpbmdTdGF0ZU1hbmFnZXIuanMnKTtcblxuICBjb25zdCBjb25maWcgPSB7XG4gICAgcmlwcGxlczogdHJ1ZSxcbiAgICBob3ZlcnM6IHRydWUsXG4gICAgZm9ybXM6IHRydWUsXG4gICAgc2Nyb2xsOiB0cnVlLFxuICAgIC4uLih3aW5kb3cuTWlsb1VYIHx8IHt9KVxuICB9O1xuXG4gIC8vIFJpcHBsZSBvbiBjbGljayBmb3IgY29tbW9uIGludGVyYWN0aXZlIGVsZW1lbnRzXG4gIGlmIChjb25maWcucmlwcGxlcykge1xuICAgIGNvbnN0IGNsaWNrYWJsZUVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgXG4gICAgYnV0dG9uLCAuYnRuLCAudG9wYmFyX19idXR0b24sXG4gICAgLmFydGljbGUtbmV4dC1wcmV2X19saW5rLCAuYnJlYWRjcnVtYl9fbGluaywgLnRvYy1saW5rLFxuICAgIC5xdWlja2xpbmtzX19saW5rLCAucXVpY2tsaW5rc19faXRlbSxcbiAgICAudGlsZSwgLmNhcmQsIC5yZXNvdXJjZS1jYXJkLFxuICAgIC50b3BiYXJfX2xvZ28tbGluaywgLmRyb3Bkb3duLWxpbmssXG4gICAgLnNpZGViYXJfX2xpbmssIC5zaWRlYmFyX190b2dnbGVcbiAgYCk7XG4gICAgY2xpY2thYmxlRWxlbWVudHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBjcmVhdGVSaXBwbGUoZWxlbWVudCwgZSkpO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gU3VidGxlIGhvdmVyIGxpZnQgZm9yIHRpbGVzL2NhcmRzXG4gIGlmIChjb25maWcuaG92ZXJzKSB7XG4gICAgY29uc3QgaG92ZXJFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50aWxlLCAuY2FyZCwgLnF1aWNrbGlua3NfX2l0ZW0nKTtcbiAgICBob3ZlckVsZW1lbnRzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IHtcbiAgICAgICAgZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWSgtMnB4KSc7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUuYm94U2hhZG93ID0gJzAgOHB4IDI1cHggcmdiYSgwLDAsMCwwLjE1KSc7XG4gICAgICB9KTtcbiAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcbiAgICAgICAgZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWSgwKSc7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUuYm94U2hhZG93ID0gJyc7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIEZvcm0gc3VibWl0IGxvYWRpbmcgc3RhdGVcbiAgaWYgKGNvbmZpZy5mb3Jtcykge1xuICAgIGNvbnN0IGZvcm1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnZm9ybScpO1xuICAgIGZvcm1zLmZvckVhY2goKGZvcm0pID0+IHtcbiAgICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCBzdWJtaXRCdXR0b24gPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvblt0eXBlPVwic3VibWl0XCJdJyk7XG4gICAgICAgIGlmICghc3VibWl0QnV0dG9uKSByZXR1cm47XG4gICAgICAgIHN1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIGNvbnN0IG9yaWdpbmFsQ29udGVudCA9IHN1Ym1pdEJ1dHRvbi5pbm5lckhUTUw7XG4gICAgICAgIHN1Ym1pdEJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2RhdGEtb3JpZ2luYWwtY29udGVudCcsIG9yaWdpbmFsQ29udGVudCk7XG4gICAgICAgIGNvbnN0IGxvYWRlcklkID0gc2hvd0xvYWRpbmcoc3VibWl0QnV0dG9uLCB7XG4gICAgICAgICAgdHlwZTogJ2RvdHMnLFxuICAgICAgICAgIG1lc3NhZ2U6ICdQcm9jZXNzaW5nLi4uJyxcbiAgICAgICAgICBzaXplOiAnc21hbGwnLFxuICAgICAgICB9KTtcbiAgICAgICAgc3VibWl0QnV0dG9uLnNldEF0dHJpYnV0ZSgnZGF0YS1sb2FkZXItaWQnLCBsb2FkZXJJZCk7XG4gICAgICB9KTtcbiAgICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcigncmVzZXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGZvcm0ucXVlcnlTZWxlY3RvcignYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl0nKTtcbiAgICAgICAgaWYgKCFzdWJtaXRCdXR0b24pIHJldHVybjtcbiAgICAgICAgY29uc3QgbG9hZGVySWQgPSBzdWJtaXRCdXR0b24uZ2V0QXR0cmlidXRlKCdkYXRhLWxvYWRlci1pZCcpO1xuICAgICAgICBjb25zdCBvcmlnaW5hbENvbnRlbnQgPSBzdWJtaXRCdXR0b24uZ2V0QXR0cmlidXRlKCdkYXRhLW9yaWdpbmFsLWNvbnRlbnQnKTtcbiAgICAgICAgaWYgKGxvYWRlcklkKSB7XG4gICAgICAgICAgaGlkZUxvYWRpbmcobG9hZGVySWQpO1xuICAgICAgICAgIHN1Ym1pdEJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtbG9hZGVyLWlkJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9yaWdpbmFsQ29udGVudCkge1xuICAgICAgICAgIHN1Ym1pdEJ1dHRvbi5pbm5lckhUTUwgPSBvcmlnaW5hbENvbnRlbnQ7XG4gICAgICAgICAgc3VibWl0QnV0dG9uLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1vcmlnaW5hbC1jb250ZW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFNjcm9sbC1iYXNlZCBlZmZlY3RzXG4gIGlmIChjb25maWcuc2Nyb2xsKSB7XG4gICAgYXdhaXQgc2V0dXBTY3JvbGxFbmhhbmNlbWVudHMoKTtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBzZXR1cFNjcm9sbEVuaGFuY2VtZW50cygpIHtcbiAgY29uc3QgeyB0aHJvdHRsZSB9ID0gYXdhaXQgaW1wb3J0KCcuLi91dGlscy9kb20uanMnKTtcbiAgbGV0IGxhc3RTY3JvbGxZID0gd2luZG93LnNjcm9sbFk7XG4gIGxldCBzY2hlZHVsZWQgPSBmYWxzZTtcbiAgZnVuY3Rpb24gb25TY3JvbGwoKSB7XG4gICAgaWYgKHNjaGVkdWxlZCkgcmV0dXJuO1xuICAgIHNjaGVkdWxlZCA9IHRydWU7XG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRTY3JvbGxZID0gd2luZG93LnNjcm9sbFk7XG4gICAgICBjb25zdCBzY3JvbGxEaXJlY3Rpb24gPSBjdXJyZW50U2Nyb2xsWSA+IGxhc3RTY3JvbGxZID8gJ2Rvd24nIDogJ3VwJztcbiAgICAgIGRvY3VtZW50LmJvZHkuc2V0QXR0cmlidXRlKCdkYXRhLXNjcm9sbC1kaXJlY3Rpb24nLCBzY3JvbGxEaXJlY3Rpb24pO1xuXG4gICAgICBjb25zdCBzY3JvbGxlZCA9IHdpbmRvdy5wYWdlWU9mZnNldDtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5oZXJvLXBhcmFsbGF4JykuZm9yRWFjaCgoaGVybykgPT4ge1xuICAgICAgICBjb25zdCBwYXJhbGxheCA9IHNjcm9sbGVkICogMC41O1xuICAgICAgICBoZXJvLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVZKCR7cGFyYWxsYXh9cHgpYDtcbiAgICAgIH0pO1xuXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZmFkZS1pbi1vbi1zY3JvbGwnKS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBpZiAocmVjdC50b3AgPCB3aW5kb3cuaW5uZXJIZWlnaHQgJiYgcmVjdC5ib3R0b20gPiAwKSB7XG4gICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBsYXN0U2Nyb2xsWSA9IGN1cnJlbnRTY3JvbGxZO1xuICAgICAgc2NoZWR1bGVkID0gZmFsc2U7XG4gICAgfSk7XG4gIH1cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIG9uU2Nyb2xsLCB7IHBhc3NpdmU6IHRydWUgfSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHNldHVwR2xvYmFsRW5oYW5jZW1lbnRzO1xuXG4iLCAiLyoqXG4gKiBTdGF0aWMgc2l0ZSBuYXZpZ2F0aW9uIGhhbmRsaW5nIChiZmNhY2hlLCBwb3BzdGF0ZSwgZm9jdXMtcmV0dXJuKVxuICovXG5pbXBvcnQgQ29tcG9uZW50TWFuYWdlciBmcm9tICcuLi9jb3JlL0NvbXBvbmVudE1hbmFnZXIuanMnO1xuaW1wb3J0IHsgbWlsbyB9IGZyb20gJy4uL2NvcmUvTWlsb0NvcmUuanMnO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnLi4vdXRpbHMvTG9nZ2VyLmpzJztcblxuY29uc3QgbG9nID0gbG9nZ2VyLmNvbXBvbmVudCgnU3RhdGljTmF2Jyk7XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1N0YXRpY0RlcGxveW1lbnQoKSB7XG4gIGNvbnN0IGhhc1VnbHlVUkxzID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLmluY2x1ZGVzKCcuaHRtbCcpO1xuICBjb25zdCBoYXNCYXNlVVJMID0gd2luZG93Lkh1Z29FbnZpcm9ubWVudD8uYmFzZVVSTCA9PT0gJy8nIHx8IHdpbmRvdy5IdWdvRW52aXJvbm1lbnQ/LmJhc2VVUkw/LmVuZHNXaXRoKCcvJyk7XG4gIHJldHVybiBoYXNVZ2x5VVJMcyB8fCBoYXNCYXNlVVJMO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3luY1NpZGViYXJDb21wb25lbnQoKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgaW5zdGFuY2UgPSBBcnJheS5mcm9tKENvbXBvbmVudE1hbmFnZXIuaW5zdGFuY2VzLnZhbHVlcygpKS5maW5kKChpbnN0KSA9PiBpbnN0Lm5hbWUgPT09ICduYXZpZ2F0aW9uLXNpZGViYXItbGVmdCcpO1xuICAgIGlmIChpbnN0YW5jZSAmJiB0eXBlb2YgaW5zdGFuY2Uuc3luY1RvQ3VycmVudFBhZ2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGluc3RhbmNlLnN5bmNUb0N1cnJlbnRQYWdlKCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IGNhdGNoIChlKSB7XG4gICAgbG9nLmRlYnVnKCdzeW5jU2lkZWJhckNvbXBvbmVudCBmYWlsZWQ6JywgZSk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbmZ1bmN0aW9uIHRlc3RTaWRlYmFySW50ZXJhY3Rpdml0eSh0b2dnbGUpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gdG9nZ2xlLmhhc0F0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZy5kZWJ1ZygnU2lkZWJhciBpbnRlcmFjdGl2aXR5IHRlc3QgZmFpbGVkOicsIGVycm9yKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFzT3JwaGFuZWRFdmVudExpc3RlbmVycygpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBlbGVtZW50c1dpdGhMaXN0ZW5lcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1jb21wb25lbnQtbGlzdGVuZXJzXScpO1xuICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiBlbGVtZW50c1dpdGhMaXN0ZW5lcnMpIHtcbiAgICAgIGNvbnN0IGxpc3RlbmVySWRzID0gZWxlbWVudC5kYXRhc2V0LmNvbXBvbmVudExpc3RlbmVycy5zcGxpdCgnLCcpO1xuICAgICAgZm9yIChjb25zdCBjb21wb25lbnRJZCBvZiBsaXN0ZW5lcklkcykge1xuICAgICAgICBjb25zdCBpbnN0YW5jZSA9IENvbXBvbmVudE1hbmFnZXIuaW5zdGFuY2VzLmdldChjb21wb25lbnRJZCk7XG4gICAgICAgIGlmICghaW5zdGFuY2UgfHwgaW5zdGFuY2Uuc3RhdGUgPT09ICdkZXN0cm95ZWQnKSB7XG4gICAgICAgICAgbG9nLmRlYnVnKGBGb3VuZCBvcnBoYW5lZCBsaXN0ZW5lcnMgZnJvbSBjb21wb25lbnQgJHtjb21wb25lbnRJZH1gKTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nLmRlYnVnKCdFcnJvciBjaGVja2luZyBmb3Igb3JwaGFuZWQgbGlzdGVuZXJzOicsIGVycm9yKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrQ29tcG9uZW50SGVhbHRoKCkge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmICghbWlsby5pbml0aWFsaXplZCkge1xuICAgICAgICBsb2cud2FybignQ29yZSBzeXN0ZW0gbm90IGluaXRpYWxpemVkIGFmdGVyIG5hdmlnYXRpb24nKTtcbiAgICAgICAgcmVzb2x2ZSgnbmVlZHNfZnVsbF9pbml0Jyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgc2lkZWJhckVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2lkZWJhci1sZWZ0Jyk7XG4gICAgICBpZiAoc2lkZWJhckVsZW1lbnQpIHtcbiAgICAgIGNvbnN0IHRvZ2dsZXMgPSBzaWRlYmFyRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2lkZWJhcl9fdG9nZ2xlJyk7XG4gICAgICAgIGlmICh0b2dnbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zdCBmaXJzdFRvZ2dsZSA9IHRvZ2dsZXNbMF07XG4gICAgICAgICAgaWYgKCFmaXJzdFRvZ2dsZS5oYXNBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnKSkge1xuICAgICAgICAgICAgbG9nLmluZm8oJ1NpZGViYXIgdG9nZ2xlcyBtaXNzaW5nIGFyaWEtZXhwYW5kZWQgYXR0cmlidXRlcycpO1xuICAgICAgICAgICAgcmVzb2x2ZSgnbmVlZHNfY29tcG9uZW50X3JlaW5pdCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIWZpcnN0VG9nZ2xlLmRhdGFzZXQuY29tcG9uZW50TGlzdGVuZXJzKSB7XG4gICAgICAgICAgICBsb2cuaW5mbygnU2lkZWJhciB0b2dnbGVzIG1pc3NpbmcgZXZlbnQgbGlzdGVuZXIgdHJhY2tpbmcnKTtcbiAgICAgICAgICAgIHJlc29sdmUoJ25lZWRzX2NvbXBvbmVudF9yZWluaXQnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCF0ZXN0U2lkZWJhckludGVyYWN0aXZpdHkoZmlyc3RUb2dnbGUpKSB7XG4gICAgICAgICAgICBsb2cuaW5mbygnU2lkZWJhciB0b2dnbGVzIG5vdCByZXNwb25zaXZlIHRvIGV2ZW50cycpO1xuICAgICAgICAgICAgcmVzb2x2ZSgnbmVlZHNfY29tcG9uZW50X3JlaW5pdCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoaGFzT3JwaGFuZWRFdmVudExpc3RlbmVycygpKSB7XG4gICAgICAgIGxvZy5pbmZvKCdEZXRlY3RlZCBvcnBoYW5lZCBldmVudCBsaXN0ZW5lcnMnKTtcbiAgICAgICAgcmVzb2x2ZSgnbmVlZHNfY29tcG9uZW50X3JlaW5pdCcpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHJlc29sdmUoJ2hlYWx0aHknKTtcbiAgICB9LCAxNTApO1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGF0dGFjaFN0YXRpY05hdmlnYXRpb25IYW5kbGVycyh7IG9uSW5pdCB9KSB7XG4gIGNvbnN0IE1BWF9SRUlOSVRfQVRURU1QVFMgPSAzO1xuICBsZXQgaXNDdXJyZW50UGFnZUluaXRpYWxpemVkID0gZmFsc2U7XG4gIGxldCBsYXN0VVJMID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG4gIGxldCByZWluaXRpYWxpemF0aW9uQXR0ZW1wdHMgPSAwO1xuXG4gIGFzeW5jIGZ1bmN0aW9uIGhhbmRsZVN0YXRpY05hdmlnYXRpb24oZXZlbnQpIHtcbiAgICBjb25zdCBjdXJyZW50VVJMID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG4gICAgY29uc3QgaXNOZXdQYWdlID0gY3VycmVudFVSTCAhPT0gbGFzdFVSTDtcbiAgICBpZiAoaXNOZXdQYWdlIHx8IGV2ZW50Py5wZXJzaXN0ZWQgfHwgIWlzQ3VycmVudFBhZ2VJbml0aWFsaXplZCkge1xuICAgICAgbG9nLmluZm8oYFN0YXRpYyBuYXZpZ2F0aW9uIGRldGVjdGVkOiAke2lzTmV3UGFnZSA/ICduZXcgcGFnZScgOiAnY2FjaGVkIHBhZ2UnfWApO1xuICAgICAgbGFzdFVSTCA9IGN1cnJlbnRVUkw7XG4gICAgICBpZiAoaXNOZXdQYWdlKSByZWluaXRpYWxpemF0aW9uQXR0ZW1wdHMgPSAwO1xuXG4gICAgICBjb25zdCBoZWFsdGhTdGF0dXMgPSBhd2FpdCBjaGVja0NvbXBvbmVudEhlYWx0aCgpO1xuICAgICAgaWYgKGhlYWx0aFN0YXR1cyA9PT0gJ25lZWRzX2Z1bGxfaW5pdCcpIHtcbiAgICAgICAgaWYgKHJlaW5pdGlhbGl6YXRpb25BdHRlbXB0cyA8IE1BWF9SRUlOSVRfQVRURU1QVFMpIHtcbiAgICAgICAgICByZWluaXRpYWxpemF0aW9uQXR0ZW1wdHMrKztcbiAgICAgICAgICBsb2cuaW5mbyhgUGVyZm9ybWluZyBmdWxsIGluaXRpYWxpemF0aW9uIChhdHRlbXB0ICR7cmVpbml0aWFsaXphdGlvbkF0dGVtcHRzfSlgKTtcbiAgICAgICAgICBhd2FpdCBvbkluaXQoKTtcbiAgICAgICAgICBpc0N1cnJlbnRQYWdlSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICAgIHN5bmNTaWRlYmFyQ29tcG9uZW50KCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoaGVhbHRoU3RhdHVzID09PSAnbmVlZHNfY29tcG9uZW50X3JlaW5pdCcpIHtcbiAgICAgICAgaWYgKHJlaW5pdGlhbGl6YXRpb25BdHRlbXB0cyA8IE1BWF9SRUlOSVRfQVRURU1QVFMpIHtcbiAgICAgICAgICByZWluaXRpYWxpemF0aW9uQXR0ZW1wdHMrKztcbiAgICAgICAgICBsb2cuaW5mbyhgUmVpbml0aWFsaXppbmcgY29tcG9uZW50cyAoYXR0ZW1wdCAke3JlaW5pdGlhbGl6YXRpb25BdHRlbXB0c30pYCk7XG4gICAgICAgICAgY29uc3QgcmVpbml0aWFsaXplZCA9IENvbXBvbmVudE1hbmFnZXIucmVpbml0aWFsaXplQWZ0ZXJDYWNoZVJlc3RvcmUoKTtcbiAgICAgICAgICBsb2cuaW5mbyhgU3RhdGljIG5hdmlnYXRpb246ICR7cmVpbml0aWFsaXplZH0gY29tcG9uZW50cyByZWluaXRpYWxpemVkYCk7XG4gICAgICAgICAgaXNDdXJyZW50UGFnZUluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgICBzeW5jU2lkZWJhckNvbXBvbmVudCgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb2cuaW5mbygnQ29tcG9uZW50cyBhcHBlYXIgaGVhbHRoeSBhZnRlciBuYXZpZ2F0aW9uJyk7XG4gICAgICAgIGlzQ3VycmVudFBhZ2VJbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgIHN5bmNTaWRlYmFyQ29tcG9uZW50KCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gRm9yIHN0YXRpYyBzaXRlc1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncGFnZXNob3cnLCBoYW5kbGVTdGF0aWNOYXZpZ2F0aW9uKTtcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgKGV2ZW50KSA9PiB7XG4gICAgbG9nLmluZm8oJ1N0YXRpYyBzaXRlIHBvcHN0YXRlIG5hdmlnYXRpb24nKTtcbiAgICBoYW5kbGVTdGF0aWNOYXZpZ2F0aW9uKGV2ZW50KTtcbiAgfSk7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsICgpID0+IHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IGhhbmRsZVN0YXRpY05hdmlnYXRpb24oeyB0eXBlOiAnZm9jdXMnIH0pLCAxMDApO1xuICB9KTtcblxuICByZXR1cm4geyBoYW5kbGVTdGF0aWNOYXZpZ2F0aW9uIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhdHRhY2hEeW5hbWljTmF2aWdhdGlvbkhhbmRsZXJzKHsgb25Jbml0IH0pIHtcbiAgbGV0IGlzQ3VycmVudFBhZ2VJbml0aWFsaXplZCA9IGZhbHNlO1xuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwYWdlc2hvdycsIChldmVudCkgPT4ge1xuICAgIGlmIChldmVudC5wZXJzaXN0ZWQgfHwgIWlzQ3VycmVudFBhZ2VJbml0aWFsaXplZCkge1xuICAgICAgbG9nLmluZm8oJ1BhZ2UgcmVzdG9yZWQvbG9hZGVkLCBjaGVja2luZyBjb21wb25lbnQgc3RhdGUuLi4nKTtcbiAgICAgIGlmICghbWlsby5pbml0aWFsaXplZCkge1xuICAgICAgICBvbkluaXQoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICBpc0N1cnJlbnRQYWdlSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICAgIHN5bmNTaWRlYmFyQ29tcG9uZW50KCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgcmVpbml0aWFsaXplZCA9IENvbXBvbmVudE1hbmFnZXIucmVpbml0aWFsaXplQWZ0ZXJDYWNoZVJlc3RvcmUoKTtcbiAgICAgICAgbG9nLmluZm8oYFBhZ2UgbmF2aWdhdGlvbiBoYW5kbGVkOiAke3JlaW5pdGlhbGl6ZWR9IGNvbXBvbmVudHMgcmVpbml0aWFsaXplZGApO1xuICAgICAgICBpc0N1cnJlbnRQYWdlSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICBzeW5jU2lkZWJhckNvbXBvbmVudCgpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgKCkgPT4ge1xuICAgIGxvZy5pbmZvKCdOYXZpZ2F0aW9uIGRldGVjdGVkIChwb3BzdGF0ZSksIHJlaW5pdGlhbGl6aW5nIGNvbXBvbmVudHMuLi4nKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmIChtaWxvLmluaXRpYWxpemVkKSB7XG4gICAgICAgIGNvbnN0IHJlaW5pdGlhbGl6ZWQgPSBDb21wb25lbnRNYW5hZ2VyLnJlaW5pdGlhbGl6ZUFmdGVyQ2FjaGVSZXN0b3JlKCk7XG4gICAgICAgIGxvZy5pbmZvKGBCYWNrL2ZvcndhcmQgbmF2aWdhdGlvbiBoYW5kbGVkOiAke3JlaW5pdGlhbGl6ZWR9IGNvbXBvbmVudHMgcmVpbml0aWFsaXplZGApO1xuICAgICAgICBzeW5jU2lkZWJhckNvbXBvbmVudCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb25Jbml0KCk7XG4gICAgICB9XG4gICAgfSwgMTAwKTtcbiAgfSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgaXNTdGF0aWNEZXBsb3ltZW50LFxuICBhdHRhY2hTdGF0aWNOYXZpZ2F0aW9uSGFuZGxlcnMsXG4gIGF0dGFjaER5bmFtaWNOYXZpZ2F0aW9uSGFuZGxlcnMsXG4gIGNoZWNrQ29tcG9uZW50SGVhbHRoLFxuICBzeW5jU2lkZWJhckNvbXBvbmVudCxcbn07XG5cbiIsICIvKipcbiAqIERlYnVnLW9ubHkgdXRpbGl0aWVzIGV4cG9zZWQgb24gd2luZG93IHdoZW4gaW4gZGVidWcgbW9kZVxuICovXG5pbXBvcnQgeyBtaWxvIH0gZnJvbSAnLi4vY29yZS9NaWxvQ29yZS5qcyc7XG5pbXBvcnQgQ29tcG9uZW50TWFuYWdlciBmcm9tICcuLi9jb3JlL0NvbXBvbmVudE1hbmFnZXIuanMnO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnLi4vdXRpbHMvTG9nZ2VyLmpzJztcbmltcG9ydCB7IGlzU3RhdGljRGVwbG95bWVudCwgY2hlY2tDb21wb25lbnRIZWFsdGggfSBmcm9tICcuLi9uYXYvU3RhdGljTmF2aWdhdGlvbi5qcyc7XG5cbmNvbnN0IGxvZyA9IGxvZ2dlci5jb21wb25lbnQoJ0RldlRvb2xzJyk7XG5cbmV4cG9ydCBmdW5jdGlvbiBpbnN0YWxsRGVidWdUb29scygpIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSByZXR1cm47XG4gIGlmICghd2luZG93Lkh1Z29FbnZpcm9ubWVudD8uZGVidWcgJiYgIS9eKERFQlVHfFRSQUNFKSQvaS50ZXN0KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudD8uZGF0YXNldD8ubG9nTGV2ZWwgfHwgJycpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgd2luZG93LnJlaW5pdGlhbGl6ZUNvbXBvbmVudHMgPSAoKSA9PiB7XG4gICAgbG9nLmluZm8oJ01hbnVhbCBjb21wb25lbnQgcmVpbml0aWFsaXphdGlvbiB0cmlnZ2VyZWQnKTtcbiAgICBjb25zdCBjb3VudCA9IG1pbG8ucmVpbml0aWFsaXplQ29tcG9uZW50cygpO1xuICAgIGxvZy5pbmZvKGBSZWluaXRpYWxpemVkICR7Y291bnR9IGNvbXBvbmVudHNgKTtcbiAgICByZXR1cm4gY291bnQ7XG4gIH07XG5cbiAgd2luZG93LnRlc3RTdGF0aWNOYXZpZ2F0aW9uID0gKCkgPT4ge1xuICAgIGxvZy5pbmZvKCdUZXN0aW5nIHN0YXRpYyBuYXZpZ2F0aW9uIGhhbmRsaW5nLi4uJyk7XG4gICAgbG9nLmluZm8oYEN1cnJlbnQgVVJMOiAke3dpbmRvdy5sb2NhdGlvbi5ocmVmfWApO1xuICAgIGxvZy5pbmZvKGBJcyBzdGF0aWMgZGVwbG95bWVudDogJHtpc1N0YXRpY0RlcGxveW1lbnQoKX1gKTtcbiAgICBsb2cuaW5mbyhgQ29yZSBpbml0aWFsaXplZDogJHttaWxvLmluaXRpYWxpemVkfWApO1xuICAgIHJldHVybiBjaGVja0NvbXBvbmVudEhlYWx0aCgpO1xuICB9O1xuXG4gIHdpbmRvdy5jaGVja0NvbXBvbmVudEhlYWx0aCA9IGFzeW5jICgpID0+IHtcbiAgICBsb2cuaW5mbygnQ2hlY2tpbmcgY29tcG9uZW50IGhlYWx0aC4uLicpO1xuICAgIGNvbnN0IGhlYWx0aCA9IGF3YWl0IGNoZWNrQ29tcG9uZW50SGVhbHRoKCk7XG4gICAgbG9nLmluZm8oYENvbXBvbmVudCBoZWFsdGggc3RhdHVzOiAke2hlYWx0aH1gKTtcbiAgICByZXR1cm4gaGVhbHRoO1xuICB9O1xuXG4gIHdpbmRvdy50ZXN0U2lkZWJhckZ1bmN0aW9uYWxpdHkgPSAoKSA9PiB7XG4gICAgbG9nLmluZm8oJ1Rlc3Rpbmcgc2lkZWJhciBmdW5jdGlvbmFsaXR5Li4uJyk7XG4gICAgY29uc3Qgc2lkZWJhckVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2lkZWJhci1sZWZ0Jyk7XG4gICAgaWYgKCFzaWRlYmFyRWxlbWVudCkge1xuICAgICAgbG9nLmVycm9yKCdTaWRlYmFyIGVsZW1lbnQgbm90IGZvdW5kJyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoc2lkZWJhckVsZW1lbnQpO1xuICAgIGNvbnN0IGlzVmlzaWJsZSA9IHN0eWxlLmRpc3BsYXkgIT09ICdub25lJyAmJiBzdHlsZS5vcGFjaXR5ICE9PSAnMCc7XG4gICAgbG9nLmluZm8oYFNpZGViYXIgdmlzaWJpbGl0eTogJHtpc1Zpc2libGUgPyAnXHUyNzA1IFZJU0lCTEUnIDogJ1x1Mjc0QyBISURERU4nfWApO1xuICAgIHJldHVybiBpc1Zpc2libGU7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGluc3RhbGxEZWJ1Z1Rvb2xzO1xuXG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7O0FBQUEsSUFNTSxZQVFBLFFBMkpPO0FBektiO0FBQUE7QUFNQSxJQUFNLGFBQWE7QUFBQSxNQUNqQixPQUFPO0FBQUEsTUFDUCxNQUFNO0FBQUEsTUFDTixNQUFNO0FBQUEsTUFDTixPQUFPO0FBQUEsTUFDUCxPQUFPO0FBQUEsSUFDVDtBQUVBLElBQU0sU0FBTixNQUFhO0FBQUEsTUFDWCxjQUFjO0FBQ1osYUFBSyxlQUFlLEtBQUssWUFBWTtBQUNyQyxhQUFLLFNBQVM7QUFDZCxhQUFLLFNBQVM7QUFBQSxVQUNaLE9BQU87QUFBQSxVQUNQLE1BQU07QUFBQSxVQUNOLE1BQU07QUFBQSxVQUNOLE9BQU87QUFBQSxVQUNQLE9BQU87QUFBQSxRQUNUO0FBQUEsTUFDRjtBQUFBO0FBQUE7QUFBQTtBQUFBLE1BS0EsY0FBYztBQTlCaEI7QUFnQ0ksWUFBSSxPQUFPLGtCQUFrQjtBQUMzQixrQkFBTyxnQkFBVyxPQUFPLGlCQUFpQixZQUFZLENBQUMsTUFBaEQsWUFBcUQsV0FBVztBQUFBLFFBQ3pFO0FBR0EsYUFBSSxZQUFPLG9CQUFQLG1CQUF3QixPQUFPO0FBQ2pDLGlCQUFPLFdBQVc7QUFBQSxRQUNwQjtBQUdBLFlBQUksT0FBTyxTQUFTLGFBQWEsZUFBZSxPQUFPLFNBQVMsYUFBYSxhQUFhO0FBQ3hGLGlCQUFPLFdBQVc7QUFBQSxRQUNwQjtBQUdBLGVBQU8sV0FBVztBQUFBLE1BQ3BCO0FBQUE7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QUFRLGtCQUFrQixFQUFFO0FBR3pFLFVBQU0sZ0JBQWdCLFlBQVksYUFBYSxlQUFlO0FBQzlELElBQUFBLE1BQUksS0FBSywwQkFBMEIsYUFBYSxFQUFFO0FBR2xELFVBQU0sYUFBYSxJQUFJLE1BQU0sU0FBUyxFQUFFLFNBQVMsTUFBTSxZQUFZLEtBQUssQ0FBQztBQUN6RSxnQkFBWSxjQUFjLFVBQVU7QUFHcEMsZUFBVyxNQUFNO0FBQ2YsWUFBTSxXQUFXLFlBQVksYUFBYSxlQUFlO0FBQ3pELE1BQUFBLE1BQUksS0FBSyxpQ0FBaUMsUUFBUSxFQUFFO0FBQ3BELFlBQU0sWUFBWSxhQUFhO0FBQy9CLE1BQUFBLE1BQUksS0FBSyxnQ0FBZ0MsWUFBWSxtQkFBYyxlQUFVLEVBQUU7QUFHL0Usa0JBQVksYUFBYSxpQkFBaUIsYUFBYTtBQUFBLElBQ3pELEdBQUcsR0FBRztBQUVOLFdBQU87QUFBQSxNQUNMO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBLGFBQWEsUUFBUTtBQUFBLE1BQ3JCLGdCQUFnQixlQUFlLFFBQVE7QUFBQSxJQUN6QztBQUFBLEVBQ0Y7QUFDRjsiLAogICJuYW1lcyI6IFsibG9nIiwgIkNvbXBvbmVudE1hbmFnZXIiLCAiZWxlbWVudCIsICJ3YWl0Rm9yRWxlbWVudCIsICJlbGVtZW50IiwgImxvZyIsICJsb2ciLCAibG9nIiwgImxvZyIsICJsb2NhbFN0b3JhZ2UiLCAidXBkYXRlUHJvZ3Jlc3MiLCAibG9nIiwgImxvZyIsICJsb2NhbFN0b3JhZ2UiLCAibG9nIiwgIkV4cGFuZGFibGVNaXhpbiIsICJSZXNwb25zaXZlTWl4aW4iLCAiU2Nyb2xsVHJhY2tpbmdNaXhpbiIsICJNb2RhbE1peGluIiwgImlzT2ZmbGluZSIsICJsb2NhbFN0b3JhZ2UiLCAibG9jYWxTdG9yYWdlIiwgImlzT2ZmbGluZSIsICJsb2NhbFN0b3JhZ2UiLCAiaXNPZmZsaW5lIiwgImxvZyIsICJsb2NhbFN0b3JhZ2UiLCAibG9nIiwgImlzT2ZmbGluZSIsICJpc09mZmxpbmUiLCAiaXNPZmZsaW5lIiwgImNvcHlUZXh0IiwgImxvY2FsU3RvcmFnZSIsICJsb2ciLCAiaW5pdF9Db2xsYXBzZSIsICJsb2NhbFN0b3JhZ2UiLCAiaW5pdF9Db2xsYXBzZSIsICJsb2NhbFN0b3JhZ2UiLCAiaW5pdF9Db2xsYXBzZSIsICJsb2NhbFN0b3JhZ2UiLCAiaGlzdG9yeSIsICJsb2NhbFN0b3JhZ2UiLCAibG9nIiwgImxvY2FsU3RvcmFnZSIsICJ0b2FzdCIsICJsb2NhbFN0b3JhZ2UiLCAibG9nIiwgImFubm91bmNlciIsICJsb2ciLCAiZXZlbnRCdXMiLCAibG9nIiwgIndhaXRGb3JFbGVtZW50IiwgImxvZyIsICJjcmVhdGVSaXBwbGUiLCAic2hvd0xvYWRpbmciLCAiaGlkZUxvYWRpbmciLCAidGhyb3R0bGUiLCAibG9nIiwgIk1BWF9SRUlOSVRfQVRURU1QVFMiLCAiaXNDdXJyZW50UGFnZUluaXRpYWxpemVkIiwgImxhc3RVUkwiLCAicmVpbml0aWFsaXphdGlvbkF0dGVtcHRzIiwgImhhbmRsZVN0YXRpY05hdmlnYXRpb24iLCAibG9nIiwgImxvZyJdCn0K
